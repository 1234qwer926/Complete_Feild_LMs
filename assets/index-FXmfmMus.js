var kU=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var eEe=kU((xEe,C5)=>{function IU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d1={exports:{}},Th={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON;function MU(){if(ON)return Th;ON=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,a){var i=null;if(a!==void 0&&(i=""+a),o.key!==void 0&&(i=""+o.key),"key"in o){a={};for(var s in o)s!=="key"&&(a[s]=o[s])}else a=o;return o=a.ref,{$$typeof:t,type:r,key:i,ref:o!==void 0?o:null,props:a}}return Th.Fragment=e,Th.jsx=n,Th.jsxs=n,Th}var PN;function OU(){return PN||(PN=1,d1.exports=MU()),d1.exports}var w=OU(),f1={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FN;function PU(){if(FN)return Et;FN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=f&&L[f]||L["@@iterator"],typeof L=="function"?L:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function b(L,$,J){this.props=L,this.context=$,this.refs=y,this.updater=J||m}b.prototype.isReactComponent={},b.prototype.setState=function(L,$){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,$,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=b.prototype;function S(L,$,J){this.props=L,this.context=$,this.refs=y,this.updater=J||m}var E=S.prototype=new C;E.constructor=S,g(E,b.prototype),E.isPureReactComponent=!0;var _=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function I(L,$,J,ne,ce,be){return J=be.ref,{$$typeof:t,type:L,key:$,ref:J!==void 0?J:null,props:be}}function k(L,$){return I(L.type,$,void 0,void 0,void 0,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function O(L){var $={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(J){return $[J]})}var F=/\/+/g;function j(L,$){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):$.toString(36)}function G(){}function W(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(G,G):(L.status="pending",L.then(function($){L.status==="pending"&&(L.status="fulfilled",L.value=$)},function($){L.status==="pending"&&(L.status="rejected",L.reason=$)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function q(L,$,J,ne,ce){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var se=!1;if(L===null)se=!0;else switch(be){case"bigint":case"string":case"number":se=!0;break;case"object":switch(L.$$typeof){case t:case e:se=!0;break;case d:return se=L._init,q(se(L._payload),$,J,ne,ce)}}if(se)return ce=ce(L),se=ne===""?"."+j(L,0):ne,_(ce)?(J="",se!=null&&(J=se.replace(F,"$&/")+"/"),q(ce,$,J,"",function(me){return me})):ce!=null&&(M(ce)&&(ce=k(ce,J+(ce.key==null||L&&L.key===ce.key?"":(""+ce.key).replace(F,"$&/")+"/")+se)),$.push(ce)),1;se=0;var oe=ne===""?".":ne+":";if(_(L))for(var fe=0;fe<L.length;fe++)ne=L[fe],be=oe+j(ne,fe),se+=q(ne,$,J,be,ce);else if(fe=p(L),typeof fe=="function")for(L=fe.call(L),fe=0;!(ne=L.next()).done;)ne=ne.value,be=oe+j(ne,fe++),se+=q(ne,$,J,be,ce);else if(be==="object"){if(typeof L.then=="function")return q(W(L),$,J,ne,ce);throw $=String(L),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return se}function P(L,$,J){if(L==null)return L;var ne=[],ce=0;return q(L,ne,"","",function(be){return $.call(J,be,ce++)}),ne}function U(L){if(L._status===-1){var $=L._result;$=$(),$.then(function(J){(L._status===0||L._status===-1)&&(L._status=1,L._result=J)},function(J){(L._status===0||L._status===-1)&&(L._status=2,L._result=J)}),L._status===-1&&(L._status=0,L._result=$)}if(L._status===1)return L._result.default;throw L._result}var z=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function H(){}return Et.Children={map:P,forEach:function(L,$,J){P(L,function(){$.apply(this,arguments)},J)},count:function(L){var $=0;return P(L,function(){$++}),$},toArray:function(L){return P(L,function($){return $})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Et.Component=b,Et.Fragment=n,Et.Profiler=o,Et.PureComponent=S,Et.StrictMode=r,Et.Suspense=u,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Et.__COMPILER_RUNTIME={__proto__:null,c:function(L){return T.H.useMemoCache(L)}},Et.cache=function(L){return function(){return L.apply(null,arguments)}},Et.cloneElement=function(L,$,J){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ne=g({},L.props),ce=L.key,be=void 0;if($!=null)for(se in $.ref!==void 0&&(be=void 0),$.key!==void 0&&(ce=""+$.key),$)!D.call($,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&$.ref===void 0||(ne[se]=$[se]);var se=arguments.length-2;if(se===1)ne.children=J;else if(1<se){for(var oe=Array(se),fe=0;fe<se;fe++)oe[fe]=arguments[fe+2];ne.children=oe}return I(L.type,ce,void 0,void 0,be,ne)},Et.createContext=function(L){return L={$$typeof:i,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},Et.createElement=function(L,$,J){var ne,ce={},be=null;if($!=null)for(ne in $.key!==void 0&&(be=""+$.key),$)D.call($,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ce[ne]=$[ne]);var se=arguments.length-2;if(se===1)ce.children=J;else if(1<se){for(var oe=Array(se),fe=0;fe<se;fe++)oe[fe]=arguments[fe+2];ce.children=oe}if(L&&L.defaultProps)for(ne in se=L.defaultProps,se)ce[ne]===void 0&&(ce[ne]=se[ne]);return I(L,be,void 0,void 0,null,ce)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(L){return{$$typeof:s,render:L}},Et.isValidElement=M,Et.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:U}},Et.memo=function(L,$){return{$$typeof:l,type:L,compare:$===void 0?null:$}},Et.startTransition=function(L){var $=T.T,J={};T.T=J;try{var ne=L(),ce=T.S;ce!==null&&ce(J,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(H,z)}catch(be){z(be)}finally{T.T=$}},Et.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Et.use=function(L){return T.H.use(L)},Et.useActionState=function(L,$,J){return T.H.useActionState(L,$,J)},Et.useCallback=function(L,$){return T.H.useCallback(L,$)},Et.useContext=function(L){return T.H.useContext(L)},Et.useDebugValue=function(){},Et.useDeferredValue=function(L,$){return T.H.useDeferredValue(L,$)},Et.useEffect=function(L,$,J){var ne=T.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(L,$)},Et.useId=function(){return T.H.useId()},Et.useImperativeHandle=function(L,$,J){return T.H.useImperativeHandle(L,$,J)},Et.useInsertionEffect=function(L,$){return T.H.useInsertionEffect(L,$)},Et.useLayoutEffect=function(L,$){return T.H.useLayoutEffect(L,$)},Et.useMemo=function(L,$){return T.H.useMemo(L,$)},Et.useOptimistic=function(L,$){return T.H.useOptimistic(L,$)},Et.useReducer=function(L,$,J){return T.H.useReducer(L,$,J)},Et.useRef=function(L){return T.H.useRef(L)},Et.useState=function(L){return T.H.useState(L)},Et.useSyncExternalStore=function(L,$,J){return T.H.useSyncExternalStore(L,$,J)},Et.useTransition=function(){return T.H.useTransition()},Et.version="19.1.1",Et}var BN;function Ap(){return BN||(BN=1,f1.exports=PU()),f1.exports}var A=Ap();const bt=tf(A),FU=IU({__proto__:null,default:bt},[A]);var h1={exports:{}},Ah={},p1={exports:{}},m1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LN;function BU(){return LN||(LN=1,(function(t){function e(P,U){var z=P.length;P.push(U);e:for(;0<z;){var H=z-1>>>1,L=P[H];if(0<o(L,U))P[H]=U,P[z]=L,z=H;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var U=P[0],z=P.pop();if(z!==U){P[0]=z;e:for(var H=0,L=P.length,$=L>>>1;H<$;){var J=2*(H+1)-1,ne=P[J],ce=J+1,be=P[ce];if(0>o(ne,z))ce<L&&0>o(be,ne)?(P[H]=be,P[ce]=z,H=ce):(P[H]=ne,P[J]=z,H=J);else if(ce<L&&0>o(be,z))P[H]=be,P[ce]=z,H=ce;else break e}}return U}function o(P,U){var z=P.sortIndex-U.sortIndex;return z!==0?z:P.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,s=i.now();t.unstable_now=function(){return i.now()-s}}var u=[],l=[],d=1,f=null,p=3,m=!1,g=!1,y=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function _(P){for(var U=n(l);U!==null;){if(U.callback===null)r(l);else if(U.startTime<=P)r(l),U.sortIndex=U.expirationTime,e(u,U);else break;U=n(l)}}function T(P){if(y=!1,_(P),!g)if(n(u)!==null)g=!0,D||(D=!0,j());else{var U=n(l);U!==null&&q(T,U.startTime-P)}}var D=!1,I=-1,k=5,M=-1;function O(){return b?!0:!(t.unstable_now()-M<k)}function F(){if(b=!1,D){var P=t.unstable_now();M=P;var U=!0;try{e:{g=!1,y&&(y=!1,S(I),I=-1),m=!0;var z=p;try{t:{for(_(P),f=n(u);f!==null&&!(f.expirationTime>P&&O());){var H=f.callback;if(typeof H=="function"){f.callback=null,p=f.priorityLevel;var L=H(f.expirationTime<=P);if(P=t.unstable_now(),typeof L=="function"){f.callback=L,_(P),U=!0;break t}f===n(u)&&r(u),_(P)}else r(u);f=n(u)}if(f!==null)U=!0;else{var $=n(l);$!==null&&q(T,$.startTime-P),U=!1}}break e}finally{f=null,p=z,m=!1}U=void 0}}finally{U?j():D=!1}}}var j;if(typeof E=="function")j=function(){E(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=F,j=function(){W.postMessage(null)}}else j=function(){C(F,0)};function q(P,U){I=C(function(){P(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var z=p;p=U;try{return P()}finally{p=z}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(P,U){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var z=p;p=P;try{return U()}finally{p=z}},t.unstable_scheduleCallback=function(P,U,z){var H=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,P){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=z+L,P={id:d++,callback:U,priorityLevel:P,startTime:z,expirationTime:L,sortIndex:-1},z>H?(P.sortIndex=z,e(l,P),n(u)===null&&P===n(l)&&(y?(S(I),I=-1):y=!0,q(T,z-H))):(P.sortIndex=L,e(u,P),g||m||(g=!0,D||(D=!0,j()))),P},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(P){var U=p;return function(){var z=p;p=U;try{return P.apply(this,arguments)}finally{p=z}}}})(m1)),m1}var jN;function LU(){return jN||(jN=1,p1.exports=BU()),p1.exports}var v1={exports:{}},Pr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN;function jU(){if(zN)return Pr;zN=1;var t=Ap();function e(u){var l="https://react.dev/errors/"+u;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(u,l,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:f==null?null:""+f,children:u,containerInfo:l,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,l){if(u==="font")return"";if(typeof l=="string")return l==="use-credentials"?l:""}return Pr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pr.createPortal=function(u,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)throw Error(e(299));return a(u,l,null,d)},Pr.flushSync=function(u){var l=i.T,d=r.p;try{if(i.T=null,r.p=2,u)return u()}finally{i.T=l,r.p=d,r.d.f()}},Pr.preconnect=function(u,l){typeof u=="string"&&(l?(l=l.crossOrigin,l=typeof l=="string"?l==="use-credentials"?l:"":void 0):l=null,r.d.C(u,l))},Pr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Pr.preinit=function(u,l){if(typeof u=="string"&&l&&typeof l.as=="string"){var d=l.as,f=s(d,l.crossOrigin),p=typeof l.integrity=="string"?l.integrity:void 0,m=typeof l.fetchPriority=="string"?l.fetchPriority:void 0;d==="style"?r.d.S(u,typeof l.precedence=="string"?l.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:m}):d==="script"&&r.d.X(u,{crossOrigin:f,integrity:p,fetchPriority:m,nonce:typeof l.nonce=="string"?l.nonce:void 0})}},Pr.preinitModule=function(u,l){if(typeof u=="string")if(typeof l=="object"&&l!==null){if(l.as==null||l.as==="script"){var d=s(l.as,l.crossOrigin);r.d.M(u,{crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0})}}else l==null&&r.d.M(u)},Pr.preload=function(u,l){if(typeof u=="string"&&typeof l=="object"&&l!==null&&typeof l.as=="string"){var d=l.as,f=s(d,l.crossOrigin);r.d.L(u,d,{crossOrigin:f,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0,type:typeof l.type=="string"?l.type:void 0,fetchPriority:typeof l.fetchPriority=="string"?l.fetchPriority:void 0,referrerPolicy:typeof l.referrerPolicy=="string"?l.referrerPolicy:void 0,imageSrcSet:typeof l.imageSrcSet=="string"?l.imageSrcSet:void 0,imageSizes:typeof l.imageSizes=="string"?l.imageSizes:void 0,media:typeof l.media=="string"?l.media:void 0})}},Pr.preloadModule=function(u,l){if(typeof u=="string")if(l){var d=s(l.as,l.crossOrigin);r.d.m(u,{as:typeof l.as=="string"&&l.as!=="script"?l.as:void 0,crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0})}else r.d.m(u)},Pr.requestFormReset=function(u){r.d.r(u)},Pr.unstable_batchedUpdates=function(u,l){return u(l)},Pr.useFormState=function(u,l,d){return i.H.useFormState(u,l,d)},Pr.useFormStatus=function(){return i.H.useHostTransitionStatus()},Pr.version="19.1.1",Pr}var UN;function nO(){if(UN)return v1.exports;UN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),v1.exports=jU(),v1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WN;function zU(){if(WN)return Ah;WN=1;var t=LU(),e=Ap(),n=nO();function r(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function a(c){var h=c,v=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(v=h.return),c=h.return;while(c)}return h.tag===3?v:null}function i(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function s(c){if(a(c)!==c)throw Error(r(188))}function u(c){var h=c.alternate;if(!h){if(h=a(c),h===null)throw Error(r(188));return h!==c?null:c}for(var v=c,x=h;;){var R=v.return;if(R===null)break;var N=R.alternate;if(N===null){if(x=R.return,x!==null){v=x;continue}break}if(R.child===N.child){for(N=R.child;N;){if(N===v)return s(R),c;if(N===x)return s(R),h;N=N.sibling}throw Error(r(188))}if(v.return!==x.return)v=R,x=N;else{for(var B=!1,V=R.child;V;){if(V===v){B=!0,v=R,x=N;break}if(V===x){B=!0,x=R,v=N;break}V=V.sibling}if(!B){for(V=N.child;V;){if(V===v){B=!0,v=N,x=R;break}if(V===x){B=!0,x=N,v=R;break}V=V.sibling}if(!B)throw Error(r(189))}}if(v.alternate!==x)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?c:h}function l(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=l(c),h!==null)return h;c=c.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function j(c){return c===null||typeof c!="object"?null:(c=F&&c[F]||c["@@iterator"],typeof c=="function"?c:null)}var G=Symbol.for("react.client.reference");function W(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===G?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case g:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList";case M:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case m:return"Portal";case E:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case _:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case I:return h=c.displayName||null,h!==null?h:W(c.type)||"Memo";case k:h=c._payload,c=c._init;try{return W(c(h))}catch{}}return null}var q=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},H=[],L=-1;function $(c){return{current:c}}function J(c){0>L||(c.current=H[L],H[L]=null,L--)}function ne(c,h){L++,H[L]=c.current,c.current=h}var ce=$(null),be=$(null),se=$(null),oe=$(null);function fe(c,h){switch(ne(se,h),ne(be,c),ne(ce,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?uN(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=uN(h),c=lN(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}J(ce),ne(ce,c)}function me(){J(ce),J(be),J(se)}function Oe(c){c.memoizedState!==null&&ne(oe,c);var h=ce.current,v=lN(h,c.type);h!==v&&(ne(be,c),ne(ce,v))}function Be(c){be.current===c&&(J(ce),J(be)),oe.current===c&&(J(oe),Ch._currentValue=z)}var Le=Object.prototype.hasOwnProperty,De=t.unstable_scheduleCallback,$e=t.unstable_cancelCallback,et=t.unstable_shouldYield,ot=t.unstable_requestPaint,Ie=t.unstable_now,Me=t.unstable_getCurrentPriorityLevel,Fe=t.unstable_ImmediatePriority,Ke=t.unstable_UserBlockingPriority,ct=t.unstable_NormalPriority,qe=t.unstable_LowPriority,Xe=t.unstable_IdlePriority,Wt=t.log,je=t.unstable_setDisableYieldValue,He=null,it=null;function zt(c){if(typeof Wt=="function"&&je(c),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(He,c)}catch{}}var Pt=Math.clz32?Math.clz32:gn,Hn=Math.log,Qt=Math.LN2;function gn(c){return c>>>=0,c===0?32:31-(Hn(c)/Qt|0)|0}var Mr=256,qr=4194304;function nr(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Da(c,h,v){var x=c.pendingLanes;if(x===0)return 0;var R=0,N=c.suspendedLanes,B=c.pingedLanes;c=c.warmLanes;var V=x&134217727;return V!==0?(x=V&~N,x!==0?R=nr(x):(B&=V,B!==0?R=nr(B):v||(v=V&~c,v!==0&&(R=nr(v))))):(V=x&~N,V!==0?R=nr(V):B!==0?R=nr(B):v||(v=x&~c,v!==0&&(R=nr(v)))),R===0?0:h!==0&&h!==R&&(h&N)===0&&(N=R&-R,v=h&-h,N>=v||N===32&&(v&4194048)!==0)?h:R}function Tn(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function Za(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var c=Mr;return Mr<<=1,(Mr&4194048)===0&&(Mr=256),c}function Ft(){var c=qr;return qr<<=1,(qr&62914560)===0&&(qr=4194304),c}function kt(c){for(var h=[],v=0;31>v;v++)h.push(c);return h}function Bt(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function sn(c,h,v,x,R,N){var B=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var V=c.entanglements,Z=c.expirationTimes,he=c.hiddenUpdates;for(v=B&~v;0<v;){var Ee=31-Pt(v),Ne=1<<Ee;V[Ee]=0,Z[Ee]=-1;var pe=he[Ee];if(pe!==null)for(he[Ee]=null,Ee=0;Ee<pe.length;Ee++){var ve=pe[Ee];ve!==null&&(ve.lane&=-536870913)}v&=~Ne}x!==0&&un(c,x,0),N!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=N&~(B&~h))}function un(c,h,v){c.pendingLanes|=h,c.suspendedLanes&=~h;var x=31-Pt(h);c.entangledLanes|=h,c.entanglements[x]=c.entanglements[x]|1073741824|v&4194090}function Jt(c,h){var v=c.entangledLanes|=h;for(c=c.entanglements;v;){var x=31-Pt(v),R=1<<x;R&h|c[x]&h&&(c[x]|=h),v&=~R}}function Ui(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function cc(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function ei(){var c=U.p;return c!==0?c:(c=window.event,c===void 0?32:AN(c.type))}function kf(c,h){var v=U.p;try{return U.p=c,h()}finally{U.p=v}}var An=Math.random().toString(36).slice(2),Pn="__reactFiber$"+An,rr="__reactProps$"+An,Ls="__reactContainer$"+An,js="__reactEvents$"+An,If="__reactListeners$"+An,vm="__reactHandles$"+An,Mf="__reactResources$"+An,Ku="__reactMarker$"+An;function Of(c){delete c[Pn],delete c[rr],delete c[js],delete c[If],delete c[vm]}function Wi(c){var h=c[Pn];if(h)return h;for(var v=c.parentNode;v;){if(h=v[Ls]||v[Pn]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(c=hN(c);c!==null;){if(v=c[Pn])return v;c=hN(c)}return h}c=v,v=c.parentNode}return null}function zs(c){if(c=c[Pn]||c[Ls]){var h=c.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return c}return null}function Us(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(r(33))}function Xt(c){var h=c[Mf];return h||(h=c[Mf]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Fn(c){c[Ku]=!0}var gm=new Set,JR={};function Yu(c,h){dc(c,h),dc(c+"Capture",h)}function dc(c,h){for(JR[c]=h,c=0;c<h.length;c++)gm.add(h[c])}var S5=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ZR={},e_={};function E5(c){return Le.call(e_,c)?!0:Le.call(ZR,c)?!1:S5.test(c)?e_[c]=!0:(ZR[c]=!0,!1)}function ym(c,h,v){if(E5(h))if(v===null)c.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var x=h.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+v)}}function bm(c,h,v){if(v===null)c.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+v)}}function Vi(c,h,v,x){if(x===null)c.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(v);return}c.setAttributeNS(h,v,""+x)}}var ab,t_;function fc(c){if(ab===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);ab=h&&h[1]||"",t_=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ab+c+t_}var ib=!1;function sb(c,h){if(!c||ib)return"";ib=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(ve){var pe=ve}Reflect.construct(c,[],Ne)}else{try{Ne.call()}catch(ve){pe=ve}c.call(Ne.prototype)}}else{try{throw Error()}catch(ve){pe=ve}(Ne=c())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(ve){if(ve&&pe&&typeof ve.stack=="string")return[ve.stack,pe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=x.DetermineComponentFrameRoot(),B=N[0],V=N[1];if(B&&V){var Z=B.split(`
`),he=V.split(`
`);for(R=x=0;x<Z.length&&!Z[x].includes("DetermineComponentFrameRoot");)x++;for(;R<he.length&&!he[R].includes("DetermineComponentFrameRoot");)R++;if(x===Z.length||R===he.length)for(x=Z.length-1,R=he.length-1;1<=x&&0<=R&&Z[x]!==he[R];)R--;for(;1<=x&&0<=R;x--,R--)if(Z[x]!==he[R]){if(x!==1||R!==1)do if(x--,R--,0>R||Z[x]!==he[R]){var Ee=`
`+Z[x].replace(" at new "," at ");return c.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",c.displayName)),Ee}while(1<=x&&0<=R);break}}}finally{ib=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?fc(v):""}function R5(c){switch(c.tag){case 26:case 27:case 5:return fc(c.type);case 16:return fc("Lazy");case 13:return fc("Suspense");case 19:return fc("SuspenseList");case 0:case 15:return sb(c.type,!1);case 11:return sb(c.type.render,!1);case 1:return sb(c.type,!0);case 31:return fc("Activity");default:return""}}function n_(c){try{var h="";do h+=R5(c),c=c.return;while(c);return h}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Zo(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function r_(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function _5(c){var h=r_(c)?"checked":"value",v=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),x=""+c[h];if(!c.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var R=v.get,N=v.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return R.call(this)},set:function(B){x=""+B,N.call(this,B)}}),Object.defineProperty(c,h,{enumerable:v.enumerable}),{getValue:function(){return x},setValue:function(B){x=""+B},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function xm(c){c._valueTracker||(c._valueTracker=_5(c))}function o_(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var v=h.getValue(),x="";return c&&(x=r_(c)?c.checked?"true":"false":c.value),c=x,c!==v?(h.setValue(c),!0):!1}function wm(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var T5=/[\n"\\]/g;function ea(c){return c.replace(T5,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function ub(c,h,v,x,R,N,B,V){c.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?c.type=B:c.removeAttribute("type"),h!=null?B==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+Zo(h)):c.value!==""+Zo(h)&&(c.value=""+Zo(h)):B!=="submit"&&B!=="reset"||c.removeAttribute("value"),h!=null?lb(c,B,Zo(h)):v!=null?lb(c,B,Zo(v)):x!=null&&c.removeAttribute("value"),R==null&&N!=null&&(c.defaultChecked=!!N),R!=null&&(c.checked=R&&typeof R!="function"&&typeof R!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?c.name=""+Zo(V):c.removeAttribute("name")}function a_(c,h,v,x,R,N,B,V){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(c.type=N),h!=null||v!=null){if(!(N!=="submit"&&N!=="reset"||h!=null))return;v=v!=null?""+Zo(v):"",h=h!=null?""+Zo(h):v,V||h===c.value||(c.value=h),c.defaultValue=h}x=x??R,x=typeof x!="function"&&typeof x!="symbol"&&!!x,c.checked=V?c.checked:!!x,c.defaultChecked=!!x,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(c.name=B)}function lb(c,h,v){h==="number"&&wm(c.ownerDocument)===c||c.defaultValue===""+v||(c.defaultValue=""+v)}function hc(c,h,v,x){if(c=c.options,h){h={};for(var R=0;R<v.length;R++)h["$"+v[R]]=!0;for(v=0;v<c.length;v++)R=h.hasOwnProperty("$"+c[v].value),c[v].selected!==R&&(c[v].selected=R),R&&x&&(c[v].defaultSelected=!0)}else{for(v=""+Zo(v),h=null,R=0;R<c.length;R++){if(c[R].value===v){c[R].selected=!0,x&&(c[R].defaultSelected=!0);return}h!==null||c[R].disabled||(h=c[R])}h!==null&&(h.selected=!0)}}function i_(c,h,v){if(h!=null&&(h=""+Zo(h),h!==c.value&&(c.value=h),v==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=v!=null?""+Zo(v):""}function s_(c,h,v,x){if(h==null){if(x!=null){if(v!=null)throw Error(r(92));if(q(x)){if(1<x.length)throw Error(r(93));x=x[0]}v=x}v==null&&(v=""),h=v}v=Zo(h),c.defaultValue=v,x=c.textContent,x===v&&x!==""&&x!==null&&(c.value=x)}function pc(c,h){if(h){var v=c.firstChild;if(v&&v===c.lastChild&&v.nodeType===3){v.nodeValue=h;return}}c.textContent=h}var A5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function u_(c,h,v){var x=h.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?x?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":x?c.setProperty(h,v):typeof v!="number"||v===0||A5.has(h)?h==="float"?c.cssFloat=v:c[h]=(""+v).trim():c[h]=v+"px"}function l_(c,h,v){if(h!=null&&typeof h!="object")throw Error(r(62));if(c=c.style,v!=null){for(var x in v)!v.hasOwnProperty(x)||h!=null&&h.hasOwnProperty(x)||(x.indexOf("--")===0?c.setProperty(x,""):x==="float"?c.cssFloat="":c[x]="");for(var R in h)x=h[R],h.hasOwnProperty(R)&&v[R]!==x&&u_(c,R,x)}else for(var N in h)h.hasOwnProperty(N)&&u_(c,N,h[N])}function cb(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cm(c){return D5.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var db=null;function fb(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var mc=null,vc=null;function c_(c){var h=zs(c);if(h&&(c=h.stateNode)){var v=c[rr]||null;e:switch(c=h.stateNode,h.type){case"input":if(ub(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),h=v.name,v.type==="radio"&&h!=null){for(v=c;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+ea(""+h)+'"][type="radio"]'),h=0;h<v.length;h++){var x=v[h];if(x!==c&&x.form===c.form){var R=x[rr]||null;if(!R)throw Error(r(90));ub(x,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(h=0;h<v.length;h++)x=v[h],x.form===c.form&&o_(x)}break e;case"textarea":i_(c,v.value,v.defaultValue);break e;case"select":h=v.value,h!=null&&hc(c,!!v.multiple,h,!1)}}}var hb=!1;function d_(c,h,v){if(hb)return c(h,v);hb=!0;try{var x=c(h);return x}finally{if(hb=!1,(mc!==null||vc!==null)&&(sv(),mc&&(h=mc,c=vc,vc=mc=null,c_(h),c)))for(h=0;h<c.length;h++)c_(c[h])}}function Pf(c,h){var v=c.stateNode;if(v===null)return null;var x=v[rr]||null;if(x===null)return null;v=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(c=c.type,x=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!x;break e;default:c=!1}if(c)return null;if(v&&typeof v!="function")throw Error(r(231,h,typeof v));return v}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pb=!1;if(Hi)try{var Ff={};Object.defineProperty(Ff,"passive",{get:function(){pb=!0}}),window.addEventListener("test",Ff,Ff),window.removeEventListener("test",Ff,Ff)}catch{pb=!1}var Ws=null,mb=null,Sm=null;function f_(){if(Sm)return Sm;var c,h=mb,v=h.length,x,R="value"in Ws?Ws.value:Ws.textContent,N=R.length;for(c=0;c<v&&h[c]===R[c];c++);var B=v-c;for(x=1;x<=B&&h[v-x]===R[N-x];x++);return Sm=R.slice(c,1<x?1-x:void 0)}function Em(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Rm(){return!0}function h_(){return!1}function so(c){function h(v,x,R,N,B){this._reactName=v,this._targetInst=R,this.type=x,this.nativeEvent=N,this.target=B,this.currentTarget=null;for(var V in c)c.hasOwnProperty(V)&&(v=c[V],this[V]=v?v(N):N[V]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Rm:h_,this.isPropagationStopped=h_,this}return d(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Rm)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Rm)},persist:function(){},isPersistent:Rm}),h}var Qu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_m=so(Qu),Bf=d({},Qu,{view:0,detail:0}),k5=so(Bf),vb,gb,Lf,Tm=d({},Bf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bb,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Lf&&(Lf&&c.type==="mousemove"?(vb=c.screenX-Lf.screenX,gb=c.screenY-Lf.screenY):gb=vb=0,Lf=c),vb)},movementY:function(c){return"movementY"in c?c.movementY:gb}}),p_=so(Tm),I5=d({},Tm,{dataTransfer:0}),M5=so(I5),O5=d({},Bf,{relatedTarget:0}),yb=so(O5),P5=d({},Qu,{animationName:0,elapsedTime:0,pseudoElement:0}),F5=so(P5),B5=d({},Qu,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),L5=so(B5),j5=d({},Qu,{data:0}),m_=so(j5),z5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V5(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=W5[c])?!!h[c]:!1}function bb(){return V5}var H5=d({},Bf,{key:function(c){if(c.key){var h=z5[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Em(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?U5[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bb,charCode:function(c){return c.type==="keypress"?Em(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Em(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),G5=so(H5),$5=d({},Tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v_=so($5),q5=d({},Bf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bb}),X5=so(q5),K5=d({},Qu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y5=so(K5),Q5=d({},Tm,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),J5=so(Q5),Z5=d({},Qu,{newState:0,oldState:0}),e6=so(Z5),t6=[9,13,27,32],xb=Hi&&"CompositionEvent"in window,jf=null;Hi&&"documentMode"in document&&(jf=document.documentMode);var n6=Hi&&"TextEvent"in window&&!jf,g_=Hi&&(!xb||jf&&8<jf&&11>=jf),y_=" ",b_=!1;function x_(c,h){switch(c){case"keyup":return t6.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w_(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var gc=!1;function r6(c,h){switch(c){case"compositionend":return w_(h);case"keypress":return h.which!==32?null:(b_=!0,y_);case"textInput":return c=h.data,c===y_&&b_?null:c;default:return null}}function o6(c,h){if(gc)return c==="compositionend"||!xb&&x_(c,h)?(c=f_(),Sm=mb=Ws=null,gc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return g_&&h.locale!=="ko"?null:h.data;default:return null}}var a6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C_(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!a6[c.type]:h==="textarea"}function S_(c,h,v,x){mc?vc?vc.push(x):vc=[x]:mc=x,h=hv(h,"onChange"),0<h.length&&(v=new _m("onChange","change",null,v,x),c.push({event:v,listeners:h}))}var zf=null,Uf=null;function i6(c){rN(c,0)}function Am(c){var h=Us(c);if(o_(h))return c}function E_(c,h){if(c==="change")return h}var R_=!1;if(Hi){var wb;if(Hi){var Cb="oninput"in document;if(!Cb){var __=document.createElement("div");__.setAttribute("oninput","return;"),Cb=typeof __.oninput=="function"}wb=Cb}else wb=!1;R_=wb&&(!document.documentMode||9<document.documentMode)}function T_(){zf&&(zf.detachEvent("onpropertychange",A_),Uf=zf=null)}function A_(c){if(c.propertyName==="value"&&Am(Uf)){var h=[];S_(h,Uf,c,fb(c)),d_(i6,h)}}function s6(c,h,v){c==="focusin"?(T_(),zf=h,Uf=v,zf.attachEvent("onpropertychange",A_)):c==="focusout"&&T_()}function u6(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Am(Uf)}function l6(c,h){if(c==="click")return Am(h)}function c6(c,h){if(c==="input"||c==="change")return Am(h)}function d6(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Eo=typeof Object.is=="function"?Object.is:d6;function Wf(c,h){if(Eo(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var v=Object.keys(c),x=Object.keys(h);if(v.length!==x.length)return!1;for(x=0;x<v.length;x++){var R=v[x];if(!Le.call(h,R)||!Eo(c[R],h[R]))return!1}return!0}function N_(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function D_(c,h){var v=N_(c);c=0;for(var x;v;){if(v.nodeType===3){if(x=c+v.textContent.length,c<=h&&x>=h)return{node:v,offset:h-c};c=x}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=N_(v)}}function k_(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?k_(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function I_(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=wm(c.document);h instanceof c.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)c=h.contentWindow;else break;h=wm(c.document)}return h}function Sb(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var f6=Hi&&"documentMode"in document&&11>=document.documentMode,yc=null,Eb=null,Vf=null,Rb=!1;function M_(c,h,v){var x=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Rb||yc==null||yc!==wm(x)||(x=yc,"selectionStart"in x&&Sb(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Vf&&Wf(Vf,x)||(Vf=x,x=hv(Eb,"onSelect"),0<x.length&&(h=new _m("onSelect","select",null,h,v),c.push({event:h,listeners:x}),h.target=yc)))}function Ju(c,h){var v={};return v[c.toLowerCase()]=h.toLowerCase(),v["Webkit"+c]="webkit"+h,v["Moz"+c]="moz"+h,v}var bc={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionrun:Ju("Transition","TransitionRun"),transitionstart:Ju("Transition","TransitionStart"),transitioncancel:Ju("Transition","TransitionCancel"),transitionend:Ju("Transition","TransitionEnd")},_b={},O_={};Hi&&(O_=document.createElement("div").style,"AnimationEvent"in window||(delete bc.animationend.animation,delete bc.animationiteration.animation,delete bc.animationstart.animation),"TransitionEvent"in window||delete bc.transitionend.transition);function Zu(c){if(_b[c])return _b[c];if(!bc[c])return c;var h=bc[c],v;for(v in h)if(h.hasOwnProperty(v)&&v in O_)return _b[c]=h[v];return c}var P_=Zu("animationend"),F_=Zu("animationiteration"),B_=Zu("animationstart"),h6=Zu("transitionrun"),p6=Zu("transitionstart"),m6=Zu("transitioncancel"),L_=Zu("transitionend"),j_=new Map,Tb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tb.push("scrollEnd");function ka(c,h){j_.set(c,h),Yu(h,[c])}var z_=new WeakMap;function ta(c,h){if(typeof c=="object"&&c!==null){var v=z_.get(c);return v!==void 0?v:(h={value:c,source:h,stack:n_(h)},z_.set(c,h),h)}return{value:c,source:h,stack:n_(h)}}var na=[],xc=0,Ab=0;function Nm(){for(var c=xc,h=Ab=xc=0;h<c;){var v=na[h];na[h++]=null;var x=na[h];na[h++]=null;var R=na[h];na[h++]=null;var N=na[h];if(na[h++]=null,x!==null&&R!==null){var B=x.pending;B===null?R.next=R:(R.next=B.next,B.next=R),x.pending=R}N!==0&&U_(v,R,N)}}function Dm(c,h,v,x){na[xc++]=c,na[xc++]=h,na[xc++]=v,na[xc++]=x,Ab|=x,c.lanes|=x,c=c.alternate,c!==null&&(c.lanes|=x)}function Nb(c,h,v,x){return Dm(c,h,v,x),km(c)}function wc(c,h){return Dm(c,null,null,h),km(c)}function U_(c,h,v){c.lanes|=v;var x=c.alternate;x!==null&&(x.lanes|=v);for(var R=!1,N=c.return;N!==null;)N.childLanes|=v,x=N.alternate,x!==null&&(x.childLanes|=v),N.tag===22&&(c=N.stateNode,c===null||c._visibility&1||(R=!0)),c=N,N=N.return;return c.tag===3?(N=c.stateNode,R&&h!==null&&(R=31-Pt(v),c=N.hiddenUpdates,x=c[R],x===null?c[R]=[h]:x.push(h),h.lane=v|536870912),N):null}function km(c){if(50<ph)throw ph=0,Px=null,Error(r(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var Cc={};function v6(c,h,v,x){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ro(c,h,v,x){return new v6(c,h,v,x)}function Db(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Gi(c,h){var v=c.alternate;return v===null?(v=Ro(c.tag,h,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=h,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&65011712,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,h=c.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function W_(c,h){c.flags&=65011714;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,h=v.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function Im(c,h,v,x,R,N){var B=0;if(x=c,typeof c=="function")Db(c)&&(B=1);else if(typeof c=="string")B=yU(c,v,ce.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case M:return c=Ro(31,v,h,R),c.elementType=M,c.lanes=N,c;case g:return el(v.children,R,N,h);case y:B=8,R|=24;break;case b:return c=Ro(12,v,h,R|2),c.elementType=b,c.lanes=N,c;case T:return c=Ro(13,v,h,R),c.elementType=T,c.lanes=N,c;case D:return c=Ro(19,v,h,R),c.elementType=D,c.lanes=N,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case C:case E:B=10;break e;case S:B=9;break e;case _:B=11;break e;case I:B=14;break e;case k:B=16,x=null;break e}B=29,v=Error(r(130,c===null?"null":typeof c,"")),x=null}return h=Ro(B,v,h,R),h.elementType=c,h.type=x,h.lanes=N,h}function el(c,h,v,x){return c=Ro(7,c,x,h),c.lanes=v,c}function kb(c,h,v){return c=Ro(6,c,null,h),c.lanes=v,c}function Ib(c,h,v){return h=Ro(4,c.children!==null?c.children:[],c.key,h),h.lanes=v,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var Sc=[],Ec=0,Mm=null,Om=0,ra=[],oa=0,tl=null,$i=1,qi="";function nl(c,h){Sc[Ec++]=Om,Sc[Ec++]=Mm,Mm=c,Om=h}function V_(c,h,v){ra[oa++]=$i,ra[oa++]=qi,ra[oa++]=tl,tl=c;var x=$i;c=qi;var R=32-Pt(x)-1;x&=~(1<<R),v+=1;var N=32-Pt(h)+R;if(30<N){var B=R-R%5;N=(x&(1<<B)-1).toString(32),x>>=B,R-=B,$i=1<<32-Pt(h)+R|v<<R|x,qi=N+c}else $i=1<<N|v<<R|x,qi=c}function Mb(c){c.return!==null&&(nl(c,1),V_(c,1,0))}function Ob(c){for(;c===Mm;)Mm=Sc[--Ec],Sc[Ec]=null,Om=Sc[--Ec],Sc[Ec]=null;for(;c===tl;)tl=ra[--oa],ra[oa]=null,qi=ra[--oa],ra[oa]=null,$i=ra[--oa],ra[oa]=null}var Xr=null,Bn=null,Zt=!1,rl=null,ti=!1,Pb=Error(r(519));function ol(c){var h=Error(r(418,""));throw $f(ta(h,c)),Pb}function H_(c){var h=c.stateNode,v=c.type,x=c.memoizedProps;switch(h[Pn]=c,h[rr]=x,v){case"dialog":Mt("cancel",h),Mt("close",h);break;case"iframe":case"object":case"embed":Mt("load",h);break;case"video":case"audio":for(v=0;v<vh.length;v++)Mt(vh[v],h);break;case"source":Mt("error",h);break;case"img":case"image":case"link":Mt("error",h),Mt("load",h);break;case"details":Mt("toggle",h);break;case"input":Mt("invalid",h),a_(h,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),xm(h);break;case"select":Mt("invalid",h);break;case"textarea":Mt("invalid",h),s_(h,x.value,x.defaultValue,x.children),xm(h)}v=x.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||h.textContent===""+v||x.suppressHydrationWarning===!0||sN(h.textContent,v)?(x.popover!=null&&(Mt("beforetoggle",h),Mt("toggle",h)),x.onScroll!=null&&Mt("scroll",h),x.onScrollEnd!=null&&Mt("scrollend",h),x.onClick!=null&&(h.onclick=pv),h=!0):h=!1,h||ol(c)}function G_(c){for(Xr=c.return;Xr;)switch(Xr.tag){case 5:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Xr=Xr.return}}function Hf(c){if(c!==Xr)return!1;if(!Zt)return G_(c),Zt=!0,!1;var h=c.tag,v;if((v=h!==3&&h!==27)&&((v=h===5)&&(v=c.type,v=!(v!=="form"&&v!=="button")||Qx(c.type,c.memoizedProps)),v=!v),v&&Bn&&ol(c),G_(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8)if(v=c.data,v==="/$"){if(h===0){Bn=Ma(c.nextSibling);break e}h--}else v!=="$"&&v!=="$!"&&v!=="$?"||h++;c=c.nextSibling}Bn=null}}else h===27?(h=Bn,ou(c.type)?(c=t1,t1=null,Bn=c):Bn=h):Bn=Xr?Ma(c.stateNode.nextSibling):null;return!0}function Gf(){Bn=Xr=null,Zt=!1}function $_(){var c=rl;return c!==null&&(co===null?co=c:co.push.apply(co,c),rl=null),c}function $f(c){rl===null?rl=[c]:rl.push(c)}var Fb=$(null),al=null,Xi=null;function Vs(c,h,v){ne(Fb,h._currentValue),h._currentValue=v}function Ki(c){c._currentValue=Fb.current,J(Fb)}function Bb(c,h,v){for(;c!==null;){var x=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),c===v)break;c=c.return}}function Lb(c,h,v,x){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var N=R.dependencies;if(N!==null){var B=R.child;N=N.firstContext;e:for(;N!==null;){var V=N;N=R;for(var Z=0;Z<h.length;Z++)if(V.context===h[Z]){N.lanes|=v,V=N.alternate,V!==null&&(V.lanes|=v),Bb(N.return,v,c),x||(B=null);break e}N=V.next}}else if(R.tag===18){if(B=R.return,B===null)throw Error(r(341));B.lanes|=v,N=B.alternate,N!==null&&(N.lanes|=v),Bb(B,v,c),B=null}else B=R.child;if(B!==null)B.return=R;else for(B=R;B!==null;){if(B===c){B=null;break}if(R=B.sibling,R!==null){R.return=B.return,B=R;break}B=B.return}R=B}}function qf(c,h,v,x){c=null;for(var R=h,N=!1;R!==null;){if(!N){if((R.flags&524288)!==0)N=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var B=R.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var V=R.type;Eo(R.pendingProps.value,B.value)||(c!==null?c.push(V):c=[V])}}else if(R===oe.current){if(B=R.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(Ch):c=[Ch])}R=R.return}c!==null&&Lb(h,c,v,x),h.flags|=262144}function Pm(c){for(c=c.firstContext;c!==null;){if(!Eo(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function il(c){al=c,Xi=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Or(c){return q_(al,c)}function Fm(c,h){return al===null&&il(c),q_(c,h)}function q_(c,h){var v=h._currentValue;if(h={context:h,memoizedValue:v,next:null},Xi===null){if(c===null)throw Error(r(308));Xi=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else Xi=Xi.next=h;return v}var g6=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(v,x){c.push(x)}};this.abort=function(){h.aborted=!0,c.forEach(function(v){return v()})}},y6=t.unstable_scheduleCallback,b6=t.unstable_NormalPriority,or={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jb(){return{controller:new g6,data:new Map,refCount:0}}function Xf(c){c.refCount--,c.refCount===0&&y6(b6,function(){c.controller.abort()})}var Kf=null,zb=0,Rc=0,_c=null;function x6(c,h){if(Kf===null){var v=Kf=[];zb=0,Rc=Wx(),_c={status:"pending",value:void 0,then:function(x){v.push(x)}}}return zb++,h.then(X_,X_),h}function X_(){if(--zb===0&&Kf!==null){_c!==null&&(_c.status="fulfilled");var c=Kf;Kf=null,Rc=0,_c=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function w6(c,h){var v=[],x={status:"pending",value:null,reason:null,then:function(R){v.push(R)}};return c.then(function(){x.status="fulfilled",x.value=h;for(var R=0;R<v.length;R++)(0,v[R])(h)},function(R){for(x.status="rejected",x.reason=R,R=0;R<v.length;R++)(0,v[R])(void 0)}),x}var K_=P.S;P.S=function(c,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&x6(c,h),K_!==null&&K_(c,h)};var sl=$(null);function Ub(){var c=sl.current;return c!==null?c:xn.pooledCache}function Bm(c,h){h===null?ne(sl,sl.current):ne(sl,h.pool)}function Y_(){var c=Ub();return c===null?null:{parent:or._currentValue,pool:c}}var Yf=Error(r(460)),Q_=Error(r(474)),Lm=Error(r(542)),Wb={then:function(){}};function J_(c){return c=c.status,c==="fulfilled"||c==="rejected"}function jm(){}function Z_(c,h,v){switch(v=c[v],v===void 0?c.push(h):v!==h&&(h.then(jm,jm),h=v),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,tT(c),c;default:if(typeof h.status=="string")h.then(jm,jm);else{if(c=xn,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=h,c.status="pending",c.then(function(x){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=x}},function(x){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,tT(c),c}throw Qf=h,Yf}}var Qf=null;function eT(){if(Qf===null)throw Error(r(459));var c=Qf;return Qf=null,c}function tT(c){if(c===Yf||c===Lm)throw Error(r(483))}var Hs=!1;function Vb(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hb(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Gs(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function $s(c,h,v){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,(ln&2)!==0){var R=x.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),x.pending=h,h=km(c),U_(c,null,v),h}return Dm(c,x,h,v),km(c)}function Jf(c,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194048)!==0)){var x=h.lanes;x&=c.pendingLanes,v|=x,h.lanes=v,Jt(c,v)}}function Gb(c,h){var v=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,v===x)){var R=null,N=null;if(v=v.firstBaseUpdate,v!==null){do{var B={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};N===null?R=N=B:N=N.next=B,v=v.next}while(v!==null);N===null?R=N=h:N=N.next=h}else R=N=h;v={baseState:x.baseState,firstBaseUpdate:R,lastBaseUpdate:N,shared:x.shared,callbacks:x.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=h:c.next=h,v.lastBaseUpdate=h}var $b=!1;function Zf(){if($b){var c=_c;if(c!==null)throw c}}function eh(c,h,v,x){$b=!1;var R=c.updateQueue;Hs=!1;var N=R.firstBaseUpdate,B=R.lastBaseUpdate,V=R.shared.pending;if(V!==null){R.shared.pending=null;var Z=V,he=Z.next;Z.next=null,B===null?N=he:B.next=he,B=Z;var Ee=c.alternate;Ee!==null&&(Ee=Ee.updateQueue,V=Ee.lastBaseUpdate,V!==B&&(V===null?Ee.firstBaseUpdate=he:V.next=he,Ee.lastBaseUpdate=Z))}if(N!==null){var Ne=R.baseState;B=0,Ee=he=Z=null,V=N;do{var pe=V.lane&-536870913,ve=pe!==V.lane;if(ve?(Vt&pe)===pe:(x&pe)===pe){pe!==0&&pe===Rc&&($b=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var vt=c,ht=V;pe=h;var hn=v;switch(ht.tag){case 1:if(vt=ht.payload,typeof vt=="function"){Ne=vt.call(hn,Ne,pe);break e}Ne=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=ht.payload,pe=typeof vt=="function"?vt.call(hn,Ne,pe):vt,pe==null)break e;Ne=d({},Ne,pe);break e;case 2:Hs=!0}}pe=V.callback,pe!==null&&(c.flags|=64,ve&&(c.flags|=8192),ve=R.callbacks,ve===null?R.callbacks=[pe]:ve.push(pe))}else ve={lane:pe,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ee===null?(he=Ee=ve,Z=Ne):Ee=Ee.next=ve,B|=pe;if(V=V.next,V===null){if(V=R.shared.pending,V===null)break;ve=V,V=ve.next,ve.next=null,R.lastBaseUpdate=ve,R.shared.pending=null}}while(!0);Ee===null&&(Z=Ne),R.baseState=Z,R.firstBaseUpdate=he,R.lastBaseUpdate=Ee,N===null&&(R.shared.lanes=0),eu|=B,c.lanes=B,c.memoizedState=Ne}}function nT(c,h){if(typeof c!="function")throw Error(r(191,c));c.call(h)}function rT(c,h){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)nT(v[c],h)}var Tc=$(null),zm=$(0);function oT(c,h){c=ns,ne(zm,c),ne(Tc,h),ns=c|h.baseLanes}function qb(){ne(zm,ns),ne(Tc,Tc.current)}function Xb(){ns=zm.current,J(Tc),J(zm)}var qs=0,Nt=null,dn=null,Yn=null,Um=!1,Ac=!1,ul=!1,Wm=0,th=0,Nc=null,C6=0;function Gn(){throw Error(r(321))}function Kb(c,h){if(h===null)return!1;for(var v=0;v<h.length&&v<c.length;v++)if(!Eo(c[v],h[v]))return!1;return!0}function Yb(c,h,v,x,R,N){return qs=N,Nt=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,P.H=c===null||c.memoizedState===null?UT:WT,ul=!1,N=v(x,R),ul=!1,Ac&&(N=iT(h,v,x,R)),aT(c),N}function aT(c){P.H=Xm;var h=dn!==null&&dn.next!==null;if(qs=0,Yn=dn=Nt=null,Um=!1,th=0,Nc=null,h)throw Error(r(300));c===null||hr||(c=c.dependencies,c!==null&&Pm(c)&&(hr=!0))}function iT(c,h,v,x){Nt=c;var R=0;do{if(Ac&&(Nc=null),th=0,Ac=!1,25<=R)throw Error(r(301));if(R+=1,Yn=dn=null,c.updateQueue!=null){var N=c.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}P.H=N6,N=h(v,x)}while(Ac);return N}function S6(){var c=P.H,h=c.useState()[0];return h=typeof h.then=="function"?nh(h):h,c=c.useState()[0],(dn!==null?dn.memoizedState:null)!==c&&(Nt.flags|=1024),h}function Qb(){var c=Wm!==0;return Wm=0,c}function Jb(c,h,v){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~v}function Zb(c){if(Um){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Um=!1}qs=0,Yn=dn=Nt=null,Ac=!1,th=Wm=0,Nc=null}function uo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?Nt.memoizedState=Yn=c:Yn=Yn.next=c,Yn}function Qn(){if(dn===null){var c=Nt.alternate;c=c!==null?c.memoizedState:null}else c=dn.next;var h=Yn===null?Nt.memoizedState:Yn.next;if(h!==null)Yn=h,dn=c;else{if(c===null)throw Nt.alternate===null?Error(r(467)):Error(r(310));dn=c,c={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},Yn===null?Nt.memoizedState=Yn=c:Yn=Yn.next=c}return Yn}function ex(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nh(c){var h=th;return th+=1,Nc===null&&(Nc=[]),c=Z_(Nc,c,h),h=Nt,(Yn===null?h.memoizedState:Yn.next)===null&&(h=h.alternate,P.H=h===null||h.memoizedState===null?UT:WT),c}function Vm(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return nh(c);if(c.$$typeof===E)return Or(c)}throw Error(r(438,String(c)))}function tx(c){var h=null,v=Nt.updateQueue;if(v!==null&&(h=v.memoCache),h==null){var x=Nt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),v===null&&(v=ex(),Nt.updateQueue=v),v.memoCache=h,v=h.data[h.index],v===void 0)for(v=h.data[h.index]=Array(c),x=0;x<c;x++)v[x]=O;return h.index++,v}function Yi(c,h){return typeof h=="function"?h(c):h}function Hm(c){var h=Qn();return nx(h,dn,c)}function nx(c,h,v){var x=c.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=v;var R=c.baseQueue,N=x.pending;if(N!==null){if(R!==null){var B=R.next;R.next=N.next,N.next=B}h.baseQueue=R=N,x.pending=null}if(N=c.baseState,R===null)c.memoizedState=N;else{h=R.next;var V=B=null,Z=null,he=h,Ee=!1;do{var Ne=he.lane&-536870913;if(Ne!==he.lane?(Vt&Ne)===Ne:(qs&Ne)===Ne){var pe=he.revertLane;if(pe===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ne===Rc&&(Ee=!0);else if((qs&pe)===pe){he=he.next,pe===Rc&&(Ee=!0);continue}else Ne={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(V=Z=Ne,B=N):Z=Z.next=Ne,Nt.lanes|=pe,eu|=pe;Ne=he.action,ul&&v(N,Ne),N=he.hasEagerState?he.eagerState:v(N,Ne)}else pe={lane:Ne,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(V=Z=pe,B=N):Z=Z.next=pe,Nt.lanes|=Ne,eu|=Ne;he=he.next}while(he!==null&&he!==h);if(Z===null?B=N:Z.next=V,!Eo(N,c.memoizedState)&&(hr=!0,Ee&&(v=_c,v!==null)))throw v;c.memoizedState=N,c.baseState=B,c.baseQueue=Z,x.lastRenderedState=N}return R===null&&(x.lanes=0),[c.memoizedState,x.dispatch]}function rx(c){var h=Qn(),v=h.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=c;var x=v.dispatch,R=v.pending,N=h.memoizedState;if(R!==null){v.pending=null;var B=R=R.next;do N=c(N,B.action),B=B.next;while(B!==R);Eo(N,h.memoizedState)||(hr=!0),h.memoizedState=N,h.baseQueue===null&&(h.baseState=N),v.lastRenderedState=N}return[N,x]}function sT(c,h,v){var x=Nt,R=Qn(),N=Zt;if(N){if(v===void 0)throw Error(r(407));v=v()}else v=h();var B=!Eo((dn||R).memoizedState,v);B&&(R.memoizedState=v,hr=!0),R=R.queue;var V=cT.bind(null,x,R,c);if(rh(2048,8,V,[c]),R.getSnapshot!==h||B||Yn!==null&&Yn.memoizedState.tag&1){if(x.flags|=2048,Dc(9,Gm(),lT.bind(null,x,R,v,h),null),xn===null)throw Error(r(349));N||(qs&124)!==0||uT(x,h,v)}return v}function uT(c,h,v){c.flags|=16384,c={getSnapshot:h,value:v},h=Nt.updateQueue,h===null?(h=ex(),Nt.updateQueue=h,h.stores=[c]):(v=h.stores,v===null?h.stores=[c]:v.push(c))}function lT(c,h,v,x){h.value=v,h.getSnapshot=x,dT(h)&&fT(c)}function cT(c,h,v){return v(function(){dT(h)&&fT(c)})}function dT(c){var h=c.getSnapshot;c=c.value;try{var v=h();return!Eo(c,v)}catch{return!0}}function fT(c){var h=wc(c,2);h!==null&&Do(h,c,2)}function ox(c){var h=uo();if(typeof c=="function"){var v=c;if(c=v(),ul){zt(!0);try{v()}finally{zt(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:c},h}function hT(c,h,v,x){return c.baseState=v,nx(c,dn,typeof x=="function"?x:Yi)}function E6(c,h,v,x,R){if(qm(c))throw Error(r(485));if(c=h.action,c!==null){var N={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){N.listeners.push(B)}};P.T!==null?v(!0):N.isTransition=!1,x(N),v=h.pending,v===null?(N.next=h.pending=N,pT(h,N)):(N.next=v.next,h.pending=v.next=N)}}function pT(c,h){var v=h.action,x=h.payload,R=c.state;if(h.isTransition){var N=P.T,B={};P.T=B;try{var V=v(R,x),Z=P.S;Z!==null&&Z(B,V),mT(c,h,V)}catch(he){ax(c,h,he)}finally{P.T=N}}else try{N=v(R,x),mT(c,h,N)}catch(he){ax(c,h,he)}}function mT(c,h,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(x){vT(c,h,x)},function(x){return ax(c,h,x)}):vT(c,h,v)}function vT(c,h,v){h.status="fulfilled",h.value=v,gT(h),c.state=v,h=c.pending,h!==null&&(v=h.next,v===h?c.pending=null:(v=v.next,h.next=v,pT(c,v)))}function ax(c,h,v){var x=c.pending;if(c.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=v,gT(h),h=h.next;while(h!==x)}c.action=null}function gT(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function yT(c,h){return h}function bT(c,h){if(Zt){var v=xn.formState;if(v!==null){e:{var x=Nt;if(Zt){if(Bn){t:{for(var R=Bn,N=ti;R.nodeType!==8;){if(!N){R=null;break t}if(R=Ma(R.nextSibling),R===null){R=null;break t}}N=R.data,R=N==="F!"||N==="F"?R:null}if(R){Bn=Ma(R.nextSibling),x=R.data==="F!";break e}}ol(x)}x=!1}x&&(h=v[0])}}return v=uo(),v.memoizedState=v.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yT,lastRenderedState:h},v.queue=x,v=LT.bind(null,Nt,x),x.dispatch=v,x=ox(!1),N=cx.bind(null,Nt,!1,x.queue),x=uo(),R={state:h,dispatch:null,action:c,pending:null},x.queue=R,v=E6.bind(null,Nt,R,N,v),R.dispatch=v,x.memoizedState=c,[h,v,!1]}function xT(c){var h=Qn();return wT(h,dn,c)}function wT(c,h,v){if(h=nx(c,h,yT)[0],c=Hm(Yi)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var x=nh(h)}catch(B){throw B===Yf?Lm:B}else x=h;h=Qn();var R=h.queue,N=R.dispatch;return v!==h.memoizedState&&(Nt.flags|=2048,Dc(9,Gm(),R6.bind(null,R,v),null)),[x,N,c]}function R6(c,h){c.action=h}function CT(c){var h=Qn(),v=dn;if(v!==null)return wT(h,v,c);Qn(),h=h.memoizedState,v=Qn();var x=v.queue.dispatch;return v.memoizedState=c,[h,x,!1]}function Dc(c,h,v,x){return c={tag:c,create:v,deps:x,inst:h,next:null},h=Nt.updateQueue,h===null&&(h=ex(),Nt.updateQueue=h),v=h.lastEffect,v===null?h.lastEffect=c.next=c:(x=v.next,v.next=c,c.next=x,h.lastEffect=c),c}function Gm(){return{destroy:void 0,resource:void 0}}function ST(){return Qn().memoizedState}function $m(c,h,v,x){var R=uo();x=x===void 0?null:x,Nt.flags|=c,R.memoizedState=Dc(1|h,Gm(),v,x)}function rh(c,h,v,x){var R=Qn();x=x===void 0?null:x;var N=R.memoizedState.inst;dn!==null&&x!==null&&Kb(x,dn.memoizedState.deps)?R.memoizedState=Dc(h,N,v,x):(Nt.flags|=c,R.memoizedState=Dc(1|h,N,v,x))}function ET(c,h){$m(8390656,8,c,h)}function RT(c,h){rh(2048,8,c,h)}function _T(c,h){return rh(4,2,c,h)}function TT(c,h){return rh(4,4,c,h)}function AT(c,h){if(typeof h=="function"){c=c();var v=h(c);return function(){typeof v=="function"?v():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function NT(c,h,v){v=v!=null?v.concat([c]):null,rh(4,4,AT.bind(null,h,c),v)}function ix(){}function DT(c,h){var v=Qn();h=h===void 0?null:h;var x=v.memoizedState;return h!==null&&Kb(h,x[1])?x[0]:(v.memoizedState=[c,h],c)}function kT(c,h){var v=Qn();h=h===void 0?null:h;var x=v.memoizedState;if(h!==null&&Kb(h,x[1]))return x[0];if(x=c(),ul){zt(!0);try{c()}finally{zt(!1)}}return v.memoizedState=[x,h],x}function sx(c,h,v){return v===void 0||(qs&1073741824)!==0?c.memoizedState=h:(c.memoizedState=v,c=OA(),Nt.lanes|=c,eu|=c,v)}function IT(c,h,v,x){return Eo(v,h)?v:Tc.current!==null?(c=sx(c,v,x),Eo(c,h)||(hr=!0),c):(qs&42)===0?(hr=!0,c.memoizedState=v):(c=OA(),Nt.lanes|=c,eu|=c,h)}function MT(c,h,v,x,R){var N=U.p;U.p=N!==0&&8>N?N:8;var B=P.T,V={};P.T=V,cx(c,!1,h,v);try{var Z=R(),he=P.S;if(he!==null&&he(V,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ee=w6(Z,x);oh(c,h,Ee,No(c))}else oh(c,h,x,No(c))}catch(Ne){oh(c,h,{then:function(){},status:"rejected",reason:Ne},No())}finally{U.p=N,P.T=B}}function _6(){}function ux(c,h,v,x){if(c.tag!==5)throw Error(r(476));var R=OT(c).queue;MT(c,R,h,z,v===null?_6:function(){return PT(c),v(x)})}function OT(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:z},next:null};var v={};return h.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:v},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function PT(c){var h=OT(c).next.queue;oh(c,h,{},No())}function lx(){return Or(Ch)}function FT(){return Qn().memoizedState}function BT(){return Qn().memoizedState}function T6(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var v=No();c=Gs(v);var x=$s(h,c,v);x!==null&&(Do(x,h,v),Jf(x,h,v)),h={cache:jb()},c.payload=h;return}h=h.return}}function A6(c,h,v){var x=No();v={lane:x,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},qm(c)?jT(h,v):(v=Nb(c,h,v,x),v!==null&&(Do(v,c,x),zT(v,h,x)))}function LT(c,h,v){var x=No();oh(c,h,v,x)}function oh(c,h,v,x){var R={lane:x,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(qm(c))jT(h,R);else{var N=c.alternate;if(c.lanes===0&&(N===null||N.lanes===0)&&(N=h.lastRenderedReducer,N!==null))try{var B=h.lastRenderedState,V=N(B,v);if(R.hasEagerState=!0,R.eagerState=V,Eo(V,B))return Dm(c,h,R,0),xn===null&&Nm(),!1}catch{}finally{}if(v=Nb(c,h,R,x),v!==null)return Do(v,c,x),zT(v,h,x),!0}return!1}function cx(c,h,v,x){if(x={lane:2,revertLane:Wx(),action:x,hasEagerState:!1,eagerState:null,next:null},qm(c)){if(h)throw Error(r(479))}else h=Nb(c,v,x,2),h!==null&&Do(h,c,2)}function qm(c){var h=c.alternate;return c===Nt||h!==null&&h===Nt}function jT(c,h){Ac=Um=!0;var v=c.pending;v===null?h.next=h:(h.next=v.next,v.next=h),c.pending=h}function zT(c,h,v){if((v&4194048)!==0){var x=h.lanes;x&=c.pendingLanes,v|=x,h.lanes=v,Jt(c,v)}}var Xm={readContext:Or,use:Vm,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn},UT={readContext:Or,use:Vm,useCallback:function(c,h){return uo().memoizedState=[c,h===void 0?null:h],c},useContext:Or,useEffect:ET,useImperativeHandle:function(c,h,v){v=v!=null?v.concat([c]):null,$m(4194308,4,AT.bind(null,h,c),v)},useLayoutEffect:function(c,h){return $m(4194308,4,c,h)},useInsertionEffect:function(c,h){$m(4,2,c,h)},useMemo:function(c,h){var v=uo();h=h===void 0?null:h;var x=c();if(ul){zt(!0);try{c()}finally{zt(!1)}}return v.memoizedState=[x,h],x},useReducer:function(c,h,v){var x=uo();if(v!==void 0){var R=v(h);if(ul){zt(!0);try{v(h)}finally{zt(!1)}}}else R=h;return x.memoizedState=x.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},x.queue=c,c=c.dispatch=A6.bind(null,Nt,c),[x.memoizedState,c]},useRef:function(c){var h=uo();return c={current:c},h.memoizedState=c},useState:function(c){c=ox(c);var h=c.queue,v=LT.bind(null,Nt,h);return h.dispatch=v,[c.memoizedState,v]},useDebugValue:ix,useDeferredValue:function(c,h){var v=uo();return sx(v,c,h)},useTransition:function(){var c=ox(!1);return c=MT.bind(null,Nt,c.queue,!0,!1),uo().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,v){var x=Nt,R=uo();if(Zt){if(v===void 0)throw Error(r(407));v=v()}else{if(v=h(),xn===null)throw Error(r(349));(Vt&124)!==0||uT(x,h,v)}R.memoizedState=v;var N={value:v,getSnapshot:h};return R.queue=N,ET(cT.bind(null,x,N,c),[c]),x.flags|=2048,Dc(9,Gm(),lT.bind(null,x,N,v,h),null),v},useId:function(){var c=uo(),h=xn.identifierPrefix;if(Zt){var v=qi,x=$i;v=(x&~(1<<32-Pt(x)-1)).toString(32)+v,h=""+h+"R"+v,v=Wm++,0<v&&(h+="H"+v.toString(32)),h+=""}else v=C6++,h=""+h+"r"+v.toString(32)+"";return c.memoizedState=h},useHostTransitionStatus:lx,useFormState:bT,useActionState:bT,useOptimistic:function(c){var h=uo();h.memoizedState=h.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=v,h=cx.bind(null,Nt,!0,v),v.dispatch=h,[c,h]},useMemoCache:tx,useCacheRefresh:function(){return uo().memoizedState=T6.bind(null,Nt)}},WT={readContext:Or,use:Vm,useCallback:DT,useContext:Or,useEffect:RT,useImperativeHandle:NT,useInsertionEffect:_T,useLayoutEffect:TT,useMemo:kT,useReducer:Hm,useRef:ST,useState:function(){return Hm(Yi)},useDebugValue:ix,useDeferredValue:function(c,h){var v=Qn();return IT(v,dn.memoizedState,c,h)},useTransition:function(){var c=Hm(Yi)[0],h=Qn().memoizedState;return[typeof c=="boolean"?c:nh(c),h]},useSyncExternalStore:sT,useId:FT,useHostTransitionStatus:lx,useFormState:xT,useActionState:xT,useOptimistic:function(c,h){var v=Qn();return hT(v,dn,c,h)},useMemoCache:tx,useCacheRefresh:BT},N6={readContext:Or,use:Vm,useCallback:DT,useContext:Or,useEffect:RT,useImperativeHandle:NT,useInsertionEffect:_T,useLayoutEffect:TT,useMemo:kT,useReducer:rx,useRef:ST,useState:function(){return rx(Yi)},useDebugValue:ix,useDeferredValue:function(c,h){var v=Qn();return dn===null?sx(v,c,h):IT(v,dn.memoizedState,c,h)},useTransition:function(){var c=rx(Yi)[0],h=Qn().memoizedState;return[typeof c=="boolean"?c:nh(c),h]},useSyncExternalStore:sT,useId:FT,useHostTransitionStatus:lx,useFormState:CT,useActionState:CT,useOptimistic:function(c,h){var v=Qn();return dn!==null?hT(v,dn,c,h):(v.baseState=c,[c,v.queue.dispatch])},useMemoCache:tx,useCacheRefresh:BT},kc=null,ah=0;function Km(c){var h=ah;return ah+=1,kc===null&&(kc=[]),Z_(kc,c,h)}function ih(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function Ym(c,h){throw h.$$typeof===f?Error(r(525)):(c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function VT(c){var h=c._init;return h(c._payload)}function HT(c){function h(ue,re){if(c){var de=ue.deletions;de===null?(ue.deletions=[re],ue.flags|=16):de.push(re)}}function v(ue,re){if(!c)return null;for(;re!==null;)h(ue,re),re=re.sibling;return null}function x(ue){for(var re=new Map;ue!==null;)ue.key!==null?re.set(ue.key,ue):re.set(ue.index,ue),ue=ue.sibling;return re}function R(ue,re){return ue=Gi(ue,re),ue.index=0,ue.sibling=null,ue}function N(ue,re,de){return ue.index=de,c?(de=ue.alternate,de!==null?(de=de.index,de<re?(ue.flags|=67108866,re):de):(ue.flags|=67108866,re)):(ue.flags|=1048576,re)}function B(ue){return c&&ue.alternate===null&&(ue.flags|=67108866),ue}function V(ue,re,de,_e){return re===null||re.tag!==6?(re=kb(de,ue.mode,_e),re.return=ue,re):(re=R(re,de),re.return=ue,re)}function Z(ue,re,de,_e){var Ye=de.type;return Ye===g?Ee(ue,re,de.props.children,_e,de.key):re!==null&&(re.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===k&&VT(Ye)===re.type)?(re=R(re,de.props),ih(re,de),re.return=ue,re):(re=Im(de.type,de.key,de.props,null,ue.mode,_e),ih(re,de),re.return=ue,re)}function he(ue,re,de,_e){return re===null||re.tag!==4||re.stateNode.containerInfo!==de.containerInfo||re.stateNode.implementation!==de.implementation?(re=Ib(de,ue.mode,_e),re.return=ue,re):(re=R(re,de.children||[]),re.return=ue,re)}function Ee(ue,re,de,_e,Ye){return re===null||re.tag!==7?(re=el(de,ue.mode,_e,Ye),re.return=ue,re):(re=R(re,de),re.return=ue,re)}function Ne(ue,re,de){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=kb(""+re,ue.mode,de),re.return=ue,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case p:return de=Im(re.type,re.key,re.props,null,ue.mode,de),ih(de,re),de.return=ue,de;case m:return re=Ib(re,ue.mode,de),re.return=ue,re;case k:var _e=re._init;return re=_e(re._payload),Ne(ue,re,de)}if(q(re)||j(re))return re=el(re,ue.mode,de,null),re.return=ue,re;if(typeof re.then=="function")return Ne(ue,Km(re),de);if(re.$$typeof===E)return Ne(ue,Fm(ue,re),de);Ym(ue,re)}return null}function pe(ue,re,de,_e){var Ye=re!==null?re.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Ye!==null?null:V(ue,re,""+de,_e);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case p:return de.key===Ye?Z(ue,re,de,_e):null;case m:return de.key===Ye?he(ue,re,de,_e):null;case k:return Ye=de._init,de=Ye(de._payload),pe(ue,re,de,_e)}if(q(de)||j(de))return Ye!==null?null:Ee(ue,re,de,_e,null);if(typeof de.then=="function")return pe(ue,re,Km(de),_e);if(de.$$typeof===E)return pe(ue,re,Fm(ue,de),_e);Ym(ue,de)}return null}function ve(ue,re,de,_e,Ye){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return ue=ue.get(de)||null,V(re,ue,""+_e,Ye);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case p:return ue=ue.get(_e.key===null?de:_e.key)||null,Z(re,ue,_e,Ye);case m:return ue=ue.get(_e.key===null?de:_e.key)||null,he(re,ue,_e,Ye);case k:var Dt=_e._init;return _e=Dt(_e._payload),ve(ue,re,de,_e,Ye)}if(q(_e)||j(_e))return ue=ue.get(de)||null,Ee(re,ue,_e,Ye,null);if(typeof _e.then=="function")return ve(ue,re,de,Km(_e),Ye);if(_e.$$typeof===E)return ve(ue,re,de,Fm(re,_e),Ye);Ym(re,_e)}return null}function vt(ue,re,de,_e){for(var Ye=null,Dt=null,st=re,pt=re=0,mr=null;st!==null&&pt<de.length;pt++){st.index>pt?(mr=st,st=null):mr=st.sibling;var Kt=pe(ue,st,de[pt],_e);if(Kt===null){st===null&&(st=mr);break}c&&st&&Kt.alternate===null&&h(ue,st),re=N(Kt,re,pt),Dt===null?Ye=Kt:Dt.sibling=Kt,Dt=Kt,st=mr}if(pt===de.length)return v(ue,st),Zt&&nl(ue,pt),Ye;if(st===null){for(;pt<de.length;pt++)st=Ne(ue,de[pt],_e),st!==null&&(re=N(st,re,pt),Dt===null?Ye=st:Dt.sibling=st,Dt=st);return Zt&&nl(ue,pt),Ye}for(st=x(st);pt<de.length;pt++)mr=ve(st,ue,pt,de[pt],_e),mr!==null&&(c&&mr.alternate!==null&&st.delete(mr.key===null?pt:mr.key),re=N(mr,re,pt),Dt===null?Ye=mr:Dt.sibling=mr,Dt=mr);return c&&st.forEach(function(lu){return h(ue,lu)}),Zt&&nl(ue,pt),Ye}function ht(ue,re,de,_e){if(de==null)throw Error(r(151));for(var Ye=null,Dt=null,st=re,pt=re=0,mr=null,Kt=de.next();st!==null&&!Kt.done;pt++,Kt=de.next()){st.index>pt?(mr=st,st=null):mr=st.sibling;var lu=pe(ue,st,Kt.value,_e);if(lu===null){st===null&&(st=mr);break}c&&st&&lu.alternate===null&&h(ue,st),re=N(lu,re,pt),Dt===null?Ye=lu:Dt.sibling=lu,Dt=lu,st=mr}if(Kt.done)return v(ue,st),Zt&&nl(ue,pt),Ye;if(st===null){for(;!Kt.done;pt++,Kt=de.next())Kt=Ne(ue,Kt.value,_e),Kt!==null&&(re=N(Kt,re,pt),Dt===null?Ye=Kt:Dt.sibling=Kt,Dt=Kt);return Zt&&nl(ue,pt),Ye}for(st=x(st);!Kt.done;pt++,Kt=de.next())Kt=ve(st,ue,pt,Kt.value,_e),Kt!==null&&(c&&Kt.alternate!==null&&st.delete(Kt.key===null?pt:Kt.key),re=N(Kt,re,pt),Dt===null?Ye=Kt:Dt.sibling=Kt,Dt=Kt);return c&&st.forEach(function(DU){return h(ue,DU)}),Zt&&nl(ue,pt),Ye}function hn(ue,re,de,_e){if(typeof de=="object"&&de!==null&&de.type===g&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case p:e:{for(var Ye=de.key;re!==null;){if(re.key===Ye){if(Ye=de.type,Ye===g){if(re.tag===7){v(ue,re.sibling),_e=R(re,de.props.children),_e.return=ue,ue=_e;break e}}else if(re.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===k&&VT(Ye)===re.type){v(ue,re.sibling),_e=R(re,de.props),ih(_e,de),_e.return=ue,ue=_e;break e}v(ue,re);break}else h(ue,re);re=re.sibling}de.type===g?(_e=el(de.props.children,ue.mode,_e,de.key),_e.return=ue,ue=_e):(_e=Im(de.type,de.key,de.props,null,ue.mode,_e),ih(_e,de),_e.return=ue,ue=_e)}return B(ue);case m:e:{for(Ye=de.key;re!==null;){if(re.key===Ye)if(re.tag===4&&re.stateNode.containerInfo===de.containerInfo&&re.stateNode.implementation===de.implementation){v(ue,re.sibling),_e=R(re,de.children||[]),_e.return=ue,ue=_e;break e}else{v(ue,re);break}else h(ue,re);re=re.sibling}_e=Ib(de,ue.mode,_e),_e.return=ue,ue=_e}return B(ue);case k:return Ye=de._init,de=Ye(de._payload),hn(ue,re,de,_e)}if(q(de))return vt(ue,re,de,_e);if(j(de)){if(Ye=j(de),typeof Ye!="function")throw Error(r(150));return de=Ye.call(de),ht(ue,re,de,_e)}if(typeof de.then=="function")return hn(ue,re,Km(de),_e);if(de.$$typeof===E)return hn(ue,re,Fm(ue,de),_e);Ym(ue,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,re!==null&&re.tag===6?(v(ue,re.sibling),_e=R(re,de),_e.return=ue,ue=_e):(v(ue,re),_e=kb(de,ue.mode,_e),_e.return=ue,ue=_e),B(ue)):v(ue,re)}return function(ue,re,de,_e){try{ah=0;var Ye=hn(ue,re,de,_e);return kc=null,Ye}catch(st){if(st===Yf||st===Lm)throw st;var Dt=Ro(29,st,null,ue.mode);return Dt.lanes=_e,Dt.return=ue,Dt}finally{}}}var Ic=HT(!0),GT=HT(!1),aa=$(null),ni=null;function Xs(c){var h=c.alternate;ne(ar,ar.current&1),ne(aa,c),ni===null&&(h===null||Tc.current!==null||h.memoizedState!==null)&&(ni=c)}function $T(c){if(c.tag===22){if(ne(ar,ar.current),ne(aa,c),ni===null){var h=c.alternate;h!==null&&h.memoizedState!==null&&(ni=c)}}else Ks()}function Ks(){ne(ar,ar.current),ne(aa,aa.current)}function Qi(c){J(aa),ni===c&&(ni=null),J(ar)}var ar=$(0);function Qm(c){for(var h=c;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||e1(v)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function dx(c,h,v,x){h=c.memoizedState,v=v(x,h),v=v==null?h:d({},h,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var fx={enqueueSetState:function(c,h,v){c=c._reactInternals;var x=No(),R=Gs(x);R.payload=h,v!=null&&(R.callback=v),h=$s(c,R,x),h!==null&&(Do(h,c,x),Jf(h,c,x))},enqueueReplaceState:function(c,h,v){c=c._reactInternals;var x=No(),R=Gs(x);R.tag=1,R.payload=h,v!=null&&(R.callback=v),h=$s(c,R,x),h!==null&&(Do(h,c,x),Jf(h,c,x))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var v=No(),x=Gs(v);x.tag=2,h!=null&&(x.callback=h),h=$s(c,x,v),h!==null&&(Do(h,c,v),Jf(h,c,v))}};function qT(c,h,v,x,R,N,B){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,N,B):h.prototype&&h.prototype.isPureReactComponent?!Wf(v,x)||!Wf(R,N):!0}function XT(c,h,v,x){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,x),h.state!==c&&fx.enqueueReplaceState(h,h.state,null)}function ll(c,h){var v=h;if("ref"in h){v={};for(var x in h)x!=="ref"&&(v[x]=h[x])}if(c=c.defaultProps){v===h&&(v=d({},v));for(var R in c)v[R]===void 0&&(v[R]=c[R])}return v}var Jm=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function KT(c){Jm(c)}function YT(c){console.error(c)}function QT(c){Jm(c)}function Zm(c,h){try{var v=c.onUncaughtError;v(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function JT(c,h,v){try{var x=c.onCaughtError;x(v.value,{componentStack:v.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function hx(c,h,v){return v=Gs(v),v.tag=3,v.payload={element:null},v.callback=function(){Zm(c,h)},v}function ZT(c){return c=Gs(c),c.tag=3,c}function eA(c,h,v,x){var R=v.type.getDerivedStateFromError;if(typeof R=="function"){var N=x.value;c.payload=function(){return R(N)},c.callback=function(){JT(h,v,x)}}var B=v.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(c.callback=function(){JT(h,v,x),typeof R!="function"&&(tu===null?tu=new Set([this]):tu.add(this));var V=x.stack;this.componentDidCatch(x.value,{componentStack:V!==null?V:""})})}function D6(c,h,v,x,R){if(v.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=v.alternate,h!==null&&qf(h,v,R,!0),v=aa.current,v!==null){switch(v.tag){case 13:return ni===null?Bx():v.alternate===null&&Ln===0&&(Ln=3),v.flags&=-257,v.flags|=65536,v.lanes=R,x===Wb?v.flags|=16384:(h=v.updateQueue,h===null?v.updateQueue=new Set([x]):h.add(x),jx(c,x,R)),!1;case 22:return v.flags|=65536,x===Wb?v.flags|=16384:(h=v.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},v.updateQueue=h):(v=h.retryQueue,v===null?h.retryQueue=new Set([x]):v.add(x)),jx(c,x,R)),!1}throw Error(r(435,v.tag))}return jx(c,x,R),Bx(),!1}if(Zt)return h=aa.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,x!==Pb&&(c=Error(r(422),{cause:x}),$f(ta(c,v)))):(x!==Pb&&(h=Error(r(423),{cause:x}),$f(ta(h,v))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,x=ta(x,v),R=hx(c.stateNode,x,R),Gb(c,R),Ln!==4&&(Ln=2)),!1;var N=Error(r(520),{cause:x});if(N=ta(N,v),hh===null?hh=[N]:hh.push(N),Ln!==4&&(Ln=2),h===null)return!0;x=ta(x,v),v=h;do{switch(v.tag){case 3:return v.flags|=65536,c=R&-R,v.lanes|=c,c=hx(v.stateNode,x,c),Gb(v,c),!1;case 1:if(h=v.type,N=v.stateNode,(v.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(tu===null||!tu.has(N))))return v.flags|=65536,R&=-R,v.lanes|=R,R=ZT(R),eA(R,c,v,x),Gb(v,R),!1}v=v.return}while(v!==null);return!1}var tA=Error(r(461)),hr=!1;function Cr(c,h,v,x){h.child=c===null?GT(h,null,v,x):Ic(h,c.child,v,x)}function nA(c,h,v,x,R){v=v.render;var N=h.ref;if("ref"in x){var B={};for(var V in x)V!=="ref"&&(B[V]=x[V])}else B=x;return il(h),x=Yb(c,h,v,B,N,R),V=Qb(),c!==null&&!hr?(Jb(c,h,R),Ji(c,h,R)):(Zt&&V&&Mb(h),h.flags|=1,Cr(c,h,x,R),h.child)}function rA(c,h,v,x,R){if(c===null){var N=v.type;return typeof N=="function"&&!Db(N)&&N.defaultProps===void 0&&v.compare===null?(h.tag=15,h.type=N,oA(c,h,N,x,R)):(c=Im(v.type,null,x,h,h.mode,R),c.ref=h.ref,c.return=h,h.child=c)}if(N=c.child,!wx(c,R)){var B=N.memoizedProps;if(v=v.compare,v=v!==null?v:Wf,v(B,x)&&c.ref===h.ref)return Ji(c,h,R)}return h.flags|=1,c=Gi(N,x),c.ref=h.ref,c.return=h,h.child=c}function oA(c,h,v,x,R){if(c!==null){var N=c.memoizedProps;if(Wf(N,x)&&c.ref===h.ref)if(hr=!1,h.pendingProps=x=N,wx(c,R))(c.flags&131072)!==0&&(hr=!0);else return h.lanes=c.lanes,Ji(c,h,R)}return px(c,h,v,x,R)}function aA(c,h,v){var x=h.pendingProps,R=x.children,N=c!==null?c.memoizedState:null;if(x.mode==="hidden"){if((h.flags&128)!==0){if(x=N!==null?N.baseLanes|v:v,c!==null){for(R=h.child=c.child,N=0;R!==null;)N=N|R.lanes|R.childLanes,R=R.sibling;h.childLanes=N&~x}else h.childLanes=0,h.child=null;return iA(c,h,x,v)}if((v&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&Bm(h,N!==null?N.cachePool:null),N!==null?oT(h,N):qb(),$T(h);else return h.lanes=h.childLanes=536870912,iA(c,h,N!==null?N.baseLanes|v:v,v)}else N!==null?(Bm(h,N.cachePool),oT(h,N),Ks(),h.memoizedState=null):(c!==null&&Bm(h,null),qb(),Ks());return Cr(c,h,R,v),h.child}function iA(c,h,v,x){var R=Ub();return R=R===null?null:{parent:or._currentValue,pool:R},h.memoizedState={baseLanes:v,cachePool:R},c!==null&&Bm(h,null),qb(),$T(h),c!==null&&qf(c,h,x,!0),null}function ev(c,h){var v=h.ref;if(v===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(r(284));(c===null||c.ref!==v)&&(h.flags|=4194816)}}function px(c,h,v,x,R){return il(h),v=Yb(c,h,v,x,void 0,R),x=Qb(),c!==null&&!hr?(Jb(c,h,R),Ji(c,h,R)):(Zt&&x&&Mb(h),h.flags|=1,Cr(c,h,v,R),h.child)}function sA(c,h,v,x,R,N){return il(h),h.updateQueue=null,v=iT(h,x,v,R),aT(c),x=Qb(),c!==null&&!hr?(Jb(c,h,N),Ji(c,h,N)):(Zt&&x&&Mb(h),h.flags|=1,Cr(c,h,v,N),h.child)}function uA(c,h,v,x,R){if(il(h),h.stateNode===null){var N=Cc,B=v.contextType;typeof B=="object"&&B!==null&&(N=Or(B)),N=new v(x,N),h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=fx,h.stateNode=N,N._reactInternals=h,N=h.stateNode,N.props=x,N.state=h.memoizedState,N.refs={},Vb(h),B=v.contextType,N.context=typeof B=="object"&&B!==null?Or(B):Cc,N.state=h.memoizedState,B=v.getDerivedStateFromProps,typeof B=="function"&&(dx(h,v,B,x),N.state=h.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(B=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),B!==N.state&&fx.enqueueReplaceState(N,N.state,null),eh(h,x,N,R),Zf(),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(c===null){N=h.stateNode;var V=h.memoizedProps,Z=ll(v,V);N.props=Z;var he=N.context,Ee=v.contextType;B=Cc,typeof Ee=="object"&&Ee!==null&&(B=Or(Ee));var Ne=v.getDerivedStateFromProps;Ee=typeof Ne=="function"||typeof N.getSnapshotBeforeUpdate=="function",V=h.pendingProps!==V,Ee||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V||he!==B)&&XT(h,N,x,B),Hs=!1;var pe=h.memoizedState;N.state=pe,eh(h,x,N,R),Zf(),he=h.memoizedState,V||pe!==he||Hs?(typeof Ne=="function"&&(dx(h,v,Ne,x),he=h.memoizedState),(Z=Hs||qT(h,v,Z,x,pe,he,B))?(Ee||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(h.flags|=4194308)):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=he),N.props=x,N.state=he,N.context=B,x=Z):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{N=h.stateNode,Hb(c,h),B=h.memoizedProps,Ee=ll(v,B),N.props=Ee,Ne=h.pendingProps,pe=N.context,he=v.contextType,Z=Cc,typeof he=="object"&&he!==null&&(Z=Or(he)),V=v.getDerivedStateFromProps,(he=typeof V=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==Ne||pe!==Z)&&XT(h,N,x,Z),Hs=!1,pe=h.memoizedState,N.state=pe,eh(h,x,N,R),Zf();var ve=h.memoizedState;B!==Ne||pe!==ve||Hs||c!==null&&c.dependencies!==null&&Pm(c.dependencies)?(typeof V=="function"&&(dx(h,v,V,x),ve=h.memoizedState),(Ee=Hs||qT(h,v,Ee,x,pe,ve,Z)||c!==null&&c.dependencies!==null&&Pm(c.dependencies))?(he||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(x,ve,Z),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(x,ve,Z)),typeof N.componentDidUpdate=="function"&&(h.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===c.memoizedProps&&pe===c.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===c.memoizedProps&&pe===c.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=ve),N.props=x,N.state=ve,N.context=Z,x=Ee):(typeof N.componentDidUpdate!="function"||B===c.memoizedProps&&pe===c.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===c.memoizedProps&&pe===c.memoizedState||(h.flags|=1024),x=!1)}return N=x,ev(c,h),x=(h.flags&128)!==0,N||x?(N=h.stateNode,v=x&&typeof v.getDerivedStateFromError!="function"?null:N.render(),h.flags|=1,c!==null&&x?(h.child=Ic(h,c.child,null,R),h.child=Ic(h,null,v,R)):Cr(c,h,v,R),h.memoizedState=N.state,c=h.child):c=Ji(c,h,R),c}function lA(c,h,v,x){return Gf(),h.flags|=256,Cr(c,h,v,x),h.child}var mx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vx(c){return{baseLanes:c,cachePool:Y_()}}function gx(c,h,v){return c=c!==null?c.childLanes&~v:0,h&&(c|=ia),c}function cA(c,h,v){var x=h.pendingProps,R=!1,N=(h.flags&128)!==0,B;if((B=N)||(B=c!==null&&c.memoizedState===null?!1:(ar.current&2)!==0),B&&(R=!0,h.flags&=-129),B=(h.flags&32)!==0,h.flags&=-33,c===null){if(Zt){if(R?Xs(h):Ks(),Zt){var V=Bn,Z;if(Z=V){e:{for(Z=V,V=ti;Z.nodeType!==8;){if(!V){V=null;break e}if(Z=Ma(Z.nextSibling),Z===null){V=null;break e}}V=Z}V!==null?(h.memoizedState={dehydrated:V,treeContext:tl!==null?{id:$i,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},Z=Ro(18,null,null,0),Z.stateNode=V,Z.return=h,h.child=Z,Xr=h,Bn=null,Z=!0):Z=!1}Z||ol(h)}if(V=h.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return e1(V)?h.lanes=32:h.lanes=536870912,null;Qi(h)}return V=x.children,x=x.fallback,R?(Ks(),R=h.mode,V=tv({mode:"hidden",children:V},R),x=el(x,R,v,null),V.return=h,x.return=h,V.sibling=x,h.child=V,R=h.child,R.memoizedState=vx(v),R.childLanes=gx(c,B,v),h.memoizedState=mx,x):(Xs(h),yx(h,V))}if(Z=c.memoizedState,Z!==null&&(V=Z.dehydrated,V!==null)){if(N)h.flags&256?(Xs(h),h.flags&=-257,h=bx(c,h,v)):h.memoizedState!==null?(Ks(),h.child=c.child,h.flags|=128,h=null):(Ks(),R=x.fallback,V=h.mode,x=tv({mode:"visible",children:x.children},V),R=el(R,V,v,null),R.flags|=2,x.return=h,R.return=h,x.sibling=R,h.child=x,Ic(h,c.child,null,v),x=h.child,x.memoizedState=vx(v),x.childLanes=gx(c,B,v),h.memoizedState=mx,h=R);else if(Xs(h),e1(V)){if(B=V.nextSibling&&V.nextSibling.dataset,B)var he=B.dgst;B=he,x=Error(r(419)),x.stack="",x.digest=B,$f({value:x,source:null,stack:null}),h=bx(c,h,v)}else if(hr||qf(c,h,v,!1),B=(v&c.childLanes)!==0,hr||B){if(B=xn,B!==null&&(x=v&-v,x=(x&42)!==0?1:Ui(x),x=(x&(B.suspendedLanes|v))!==0?0:x,x!==0&&x!==Z.retryLane))throw Z.retryLane=x,wc(c,x),Do(B,c,x),tA;V.data==="$?"||Bx(),h=bx(c,h,v)}else V.data==="$?"?(h.flags|=192,h.child=c.child,h=null):(c=Z.treeContext,Bn=Ma(V.nextSibling),Xr=h,Zt=!0,rl=null,ti=!1,c!==null&&(ra[oa++]=$i,ra[oa++]=qi,ra[oa++]=tl,$i=c.id,qi=c.overflow,tl=h),h=yx(h,x.children),h.flags|=4096);return h}return R?(Ks(),R=x.fallback,V=h.mode,Z=c.child,he=Z.sibling,x=Gi(Z,{mode:"hidden",children:x.children}),x.subtreeFlags=Z.subtreeFlags&65011712,he!==null?R=Gi(he,R):(R=el(R,V,v,null),R.flags|=2),R.return=h,x.return=h,x.sibling=R,h.child=x,x=R,R=h.child,V=c.child.memoizedState,V===null?V=vx(v):(Z=V.cachePool,Z!==null?(he=or._currentValue,Z=Z.parent!==he?{parent:he,pool:he}:Z):Z=Y_(),V={baseLanes:V.baseLanes|v,cachePool:Z}),R.memoizedState=V,R.childLanes=gx(c,B,v),h.memoizedState=mx,x):(Xs(h),v=c.child,c=v.sibling,v=Gi(v,{mode:"visible",children:x.children}),v.return=h,v.sibling=null,c!==null&&(B=h.deletions,B===null?(h.deletions=[c],h.flags|=16):B.push(c)),h.child=v,h.memoizedState=null,v)}function yx(c,h){return h=tv({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function tv(c,h){return c=Ro(22,c,null,h),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function bx(c,h,v){return Ic(h,c.child,null,v),c=yx(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function dA(c,h,v){c.lanes|=h;var x=c.alternate;x!==null&&(x.lanes|=h),Bb(c.return,h,v)}function xx(c,h,v,x,R){var N=c.memoizedState;N===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:v,tailMode:R}:(N.isBackwards=h,N.rendering=null,N.renderingStartTime=0,N.last=x,N.tail=v,N.tailMode=R)}function fA(c,h,v){var x=h.pendingProps,R=x.revealOrder,N=x.tail;if(Cr(c,h,x.children,v),x=ar.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&dA(c,v,h);else if(c.tag===19)dA(c,v,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}x&=1}switch(ne(ar,x),R){case"forwards":for(v=h.child,R=null;v!==null;)c=v.alternate,c!==null&&Qm(c)===null&&(R=v),v=v.sibling;v=R,v===null?(R=h.child,h.child=null):(R=v.sibling,v.sibling=null),xx(h,!1,R,v,N);break;case"backwards":for(v=null,R=h.child,h.child=null;R!==null;){if(c=R.alternate,c!==null&&Qm(c)===null){h.child=R;break}c=R.sibling,R.sibling=v,v=R,R=c}xx(h,!0,v,null,N);break;case"together":xx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Ji(c,h,v){if(c!==null&&(h.dependencies=c.dependencies),eu|=h.lanes,(v&h.childLanes)===0)if(c!==null){if(qf(c,h,v,!1),(v&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,v=Gi(c,c.pendingProps),h.child=v,v.return=h;c.sibling!==null;)c=c.sibling,v=v.sibling=Gi(c,c.pendingProps),v.return=h;v.sibling=null}return h.child}function wx(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&Pm(c)))}function k6(c,h,v){switch(h.tag){case 3:fe(h,h.stateNode.containerInfo),Vs(h,or,c.memoizedState.cache),Gf();break;case 27:case 5:Oe(h);break;case 4:fe(h,h.stateNode.containerInfo);break;case 10:Vs(h,h.type,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(Xs(h),h.flags|=128,null):(v&h.child.childLanes)!==0?cA(c,h,v):(Xs(h),c=Ji(c,h,v),c!==null?c.sibling:null);Xs(h);break;case 19:var R=(c.flags&128)!==0;if(x=(v&h.childLanes)!==0,x||(qf(c,h,v,!1),x=(v&h.childLanes)!==0),R){if(x)return fA(c,h,v);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),ne(ar,ar.current),x)break;return null;case 22:case 23:return h.lanes=0,aA(c,h,v);case 24:Vs(h,or,c.memoizedState.cache)}return Ji(c,h,v)}function hA(c,h,v){if(c!==null)if(c.memoizedProps!==h.pendingProps)hr=!0;else{if(!wx(c,v)&&(h.flags&128)===0)return hr=!1,k6(c,h,v);hr=(c.flags&131072)!==0}else hr=!1,Zt&&(h.flags&1048576)!==0&&V_(h,Om,h.index);switch(h.lanes=0,h.tag){case 16:e:{c=h.pendingProps;var x=h.elementType,R=x._init;if(x=R(x._payload),h.type=x,typeof x=="function")Db(x)?(c=ll(x,c),h.tag=1,h=uA(null,h,x,c,v)):(h.tag=0,h=px(null,h,x,c,v));else{if(x!=null){if(R=x.$$typeof,R===_){h.tag=11,h=nA(null,h,x,c,v);break e}else if(R===I){h.tag=14,h=rA(null,h,x,c,v);break e}}throw h=W(x)||x,Error(r(306,h,""))}}return h;case 0:return px(c,h,h.type,h.pendingProps,v);case 1:return x=h.type,R=ll(x,h.pendingProps),uA(c,h,x,R,v);case 3:e:{if(fe(h,h.stateNode.containerInfo),c===null)throw Error(r(387));x=h.pendingProps;var N=h.memoizedState;R=N.element,Hb(c,h),eh(h,x,null,v);var B=h.memoizedState;if(x=B.cache,Vs(h,or,x),x!==N.cache&&Lb(h,[or],v,!0),Zf(),x=B.element,N.isDehydrated)if(N={element:x,isDehydrated:!1,cache:B.cache},h.updateQueue.baseState=N,h.memoizedState=N,h.flags&256){h=lA(c,h,x,v);break e}else if(x!==R){R=ta(Error(r(424)),h),$f(R),h=lA(c,h,x,v);break e}else{switch(c=h.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Bn=Ma(c.firstChild),Xr=h,Zt=!0,rl=null,ti=!0,v=GT(h,null,x,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(Gf(),x===R){h=Ji(c,h,v);break e}Cr(c,h,x,v)}h=h.child}return h;case 26:return ev(c,h),c===null?(v=gN(h.type,null,h.pendingProps,null))?h.memoizedState=v:Zt||(v=h.type,c=h.pendingProps,x=mv(se.current).createElement(v),x[Pn]=h,x[rr]=c,Er(x,v,c),Fn(x),h.stateNode=x):h.memoizedState=gN(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return Oe(h),c===null&&Zt&&(x=h.stateNode=pN(h.type,h.pendingProps,se.current),Xr=h,ti=!0,R=Bn,ou(h.type)?(t1=R,Bn=Ma(x.firstChild)):Bn=R),Cr(c,h,h.pendingProps.children,v),ev(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&Zt&&((R=x=Bn)&&(x=aU(x,h.type,h.pendingProps,ti),x!==null?(h.stateNode=x,Xr=h,Bn=Ma(x.firstChild),ti=!1,R=!0):R=!1),R||ol(h)),Oe(h),R=h.type,N=h.pendingProps,B=c!==null?c.memoizedProps:null,x=N.children,Qx(R,N)?x=null:B!==null&&Qx(R,B)&&(h.flags|=32),h.memoizedState!==null&&(R=Yb(c,h,S6,null,null,v),Ch._currentValue=R),ev(c,h),Cr(c,h,x,v),h.child;case 6:return c===null&&Zt&&((c=v=Bn)&&(v=iU(v,h.pendingProps,ti),v!==null?(h.stateNode=v,Xr=h,Bn=null,c=!0):c=!1),c||ol(h)),null;case 13:return cA(c,h,v);case 4:return fe(h,h.stateNode.containerInfo),x=h.pendingProps,c===null?h.child=Ic(h,null,x,v):Cr(c,h,x,v),h.child;case 11:return nA(c,h,h.type,h.pendingProps,v);case 7:return Cr(c,h,h.pendingProps,v),h.child;case 8:return Cr(c,h,h.pendingProps.children,v),h.child;case 12:return Cr(c,h,h.pendingProps.children,v),h.child;case 10:return x=h.pendingProps,Vs(h,h.type,x.value),Cr(c,h,x.children,v),h.child;case 9:return R=h.type._context,x=h.pendingProps.children,il(h),R=Or(R),x=x(R),h.flags|=1,Cr(c,h,x,v),h.child;case 14:return rA(c,h,h.type,h.pendingProps,v);case 15:return oA(c,h,h.type,h.pendingProps,v);case 19:return fA(c,h,v);case 31:return x=h.pendingProps,v=h.mode,x={mode:x.mode,children:x.children},c===null?(v=tv(x,v),v.ref=h.ref,h.child=v,v.return=h,h=v):(v=Gi(c.child,x),v.ref=h.ref,h.child=v,v.return=h,h=v),h;case 22:return aA(c,h,v);case 24:return il(h),x=Or(or),c===null?(R=Ub(),R===null&&(R=xn,N=jb(),R.pooledCache=N,N.refCount++,N!==null&&(R.pooledCacheLanes|=v),R=N),h.memoizedState={parent:x,cache:R},Vb(h),Vs(h,or,R)):((c.lanes&v)!==0&&(Hb(c,h),eh(h,null,null,v),Zf()),R=c.memoizedState,N=h.memoizedState,R.parent!==x?(R={parent:x,cache:x},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),Vs(h,or,x)):(x=N.cache,Vs(h,or,x),x!==R.cache&&Lb(h,[or],v,!0))),Cr(c,h,h.pendingProps.children,v),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Zi(c){c.flags|=4}function pA(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!CN(h)){if(h=aa.current,h!==null&&((Vt&4194048)===Vt?ni!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||h!==ni))throw Qf=Wb,Q_;c.flags|=8192}}function nv(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?Ft():536870912,c.lanes|=h,Fc|=h)}function sh(c,h){if(!Zt)switch(c.tailMode){case"hidden":h=c.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function kn(c){var h=c.alternate!==null&&c.alternate.child===c.child,v=0,x=0;if(h)for(var R=c.child;R!==null;)v|=R.lanes|R.childLanes,x|=R.subtreeFlags&65011712,x|=R.flags&65011712,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)v|=R.lanes|R.childLanes,x|=R.subtreeFlags,x|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=x,c.childLanes=v,h}function I6(c,h,v){var x=h.pendingProps;switch(Ob(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(h),null;case 1:return kn(h),null;case 3:return v=h.stateNode,x=null,c!==null&&(x=c.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),Ki(or),me(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(Hf(h)?Zi(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,$_())),kn(h),null;case 26:return v=h.memoizedState,c===null?(Zi(h),v!==null?(kn(h),pA(h,v)):(kn(h),h.flags&=-16777217)):v?v!==c.memoizedState?(Zi(h),kn(h),pA(h,v)):(kn(h),h.flags&=-16777217):(c.memoizedProps!==x&&Zi(h),kn(h),h.flags&=-16777217),null;case 27:Be(h),v=se.current;var R=h.type;if(c!==null&&h.stateNode!=null)c.memoizedProps!==x&&Zi(h);else{if(!x){if(h.stateNode===null)throw Error(r(166));return kn(h),null}c=ce.current,Hf(h)?H_(h):(c=pN(R,x,v),h.stateNode=c,Zi(h))}return kn(h),null;case 5:if(Be(h),v=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==x&&Zi(h);else{if(!x){if(h.stateNode===null)throw Error(r(166));return kn(h),null}if(c=ce.current,Hf(h))H_(h);else{switch(R=mv(se.current),c){case 1:c=R.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:c=R.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":c=R.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":c=R.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":c=R.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof x.is=="string"?R.createElement("select",{is:x.is}):R.createElement("select"),x.multiple?c.multiple=!0:x.size&&(c.size=x.size);break;default:c=typeof x.is=="string"?R.createElement(v,{is:x.is}):R.createElement(v)}}c[Pn]=h,c[rr]=x;e:for(R=h.child;R!==null;){if(R.tag===5||R.tag===6)c.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===h)break e;for(;R.sibling===null;){if(R.return===null||R.return===h)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}h.stateNode=c;e:switch(Er(c,v,x),v){case"button":case"input":case"select":case"textarea":c=!!x.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Zi(h)}}return kn(h),h.flags&=-16777217,null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==x&&Zi(h);else{if(typeof x!="string"&&h.stateNode===null)throw Error(r(166));if(c=se.current,Hf(h)){if(c=h.stateNode,v=h.memoizedProps,x=null,R=Xr,R!==null)switch(R.tag){case 27:case 5:x=R.memoizedProps}c[Pn]=h,c=!!(c.nodeValue===v||x!==null&&x.suppressHydrationWarning===!0||sN(c.nodeValue,v)),c||ol(h)}else c=mv(c).createTextNode(x),c[Pn]=h,h.stateNode=c}return kn(h),null;case 13:if(x=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=Hf(h),x!==null&&x.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[Pn]=h}else Gf(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;kn(h),R=!1}else R=$_(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=R),R=!0;if(!R)return h.flags&256?(Qi(h),h):(Qi(h),null)}if(Qi(h),(h.flags&128)!==0)return h.lanes=v,h;if(v=x!==null,c=c!==null&&c.memoizedState!==null,v){x=h.child,R=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(R=x.alternate.memoizedState.cachePool.pool);var N=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(N=x.memoizedState.cachePool.pool),N!==R&&(x.flags|=2048)}return v!==c&&v&&(h.child.flags|=8192),nv(h,h.updateQueue),kn(h),null;case 4:return me(),c===null&&$x(h.stateNode.containerInfo),kn(h),null;case 10:return Ki(h.type),kn(h),null;case 19:if(J(ar),R=h.memoizedState,R===null)return kn(h),null;if(x=(h.flags&128)!==0,N=R.rendering,N===null)if(x)sh(R,!1);else{if(Ln!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(N=Qm(c),N!==null){for(h.flags|=128,sh(R,!1),c=N.updateQueue,h.updateQueue=c,nv(h,c),h.subtreeFlags=0,c=v,v=h.child;v!==null;)W_(v,c),v=v.sibling;return ne(ar,ar.current&1|2),h.child}c=c.sibling}R.tail!==null&&Ie()>av&&(h.flags|=128,x=!0,sh(R,!1),h.lanes=4194304)}else{if(!x)if(c=Qm(N),c!==null){if(h.flags|=128,x=!0,c=c.updateQueue,h.updateQueue=c,nv(h,c),sh(R,!0),R.tail===null&&R.tailMode==="hidden"&&!N.alternate&&!Zt)return kn(h),null}else 2*Ie()-R.renderingStartTime>av&&v!==536870912&&(h.flags|=128,x=!0,sh(R,!1),h.lanes=4194304);R.isBackwards?(N.sibling=h.child,h.child=N):(c=R.last,c!==null?c.sibling=N:h.child=N,R.last=N)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=Ie(),h.sibling=null,c=ar.current,ne(ar,x?c&1|2:c&1),h):(kn(h),null);case 22:case 23:return Qi(h),Xb(),x=h.memoizedState!==null,c!==null?c.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(v&536870912)!==0&&(h.flags&128)===0&&(kn(h),h.subtreeFlags&6&&(h.flags|=8192)):kn(h),v=h.updateQueue,v!==null&&nv(h,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==v&&(h.flags|=2048),c!==null&&J(sl),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),Ki(or),kn(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function M6(c,h){switch(Ob(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Ki(or),me(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return Be(h),null;case 13:if(Qi(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Gf()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return J(ar),null;case 4:return me(),null;case 10:return Ki(h.type),null;case 22:case 23:return Qi(h),Xb(),c!==null&&J(sl),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return Ki(or),null;case 25:return null;default:return null}}function mA(c,h){switch(Ob(h),h.tag){case 3:Ki(or),me();break;case 26:case 27:case 5:Be(h);break;case 4:me();break;case 13:Qi(h);break;case 19:J(ar);break;case 10:Ki(h.type);break;case 22:case 23:Qi(h),Xb(),c!==null&&J(sl);break;case 24:Ki(or)}}function uh(c,h){try{var v=h.updateQueue,x=v!==null?v.lastEffect:null;if(x!==null){var R=x.next;v=R;do{if((v.tag&c)===c){x=void 0;var N=v.create,B=v.inst;x=N(),B.destroy=x}v=v.next}while(v!==R)}}catch(V){yn(h,h.return,V)}}function Ys(c,h,v){try{var x=h.updateQueue,R=x!==null?x.lastEffect:null;if(R!==null){var N=R.next;x=N;do{if((x.tag&c)===c){var B=x.inst,V=B.destroy;if(V!==void 0){B.destroy=void 0,R=h;var Z=v,he=V;try{he()}catch(Ee){yn(R,Z,Ee)}}}x=x.next}while(x!==N)}}catch(Ee){yn(h,h.return,Ee)}}function vA(c){var h=c.updateQueue;if(h!==null){var v=c.stateNode;try{rT(h,v)}catch(x){yn(c,c.return,x)}}}function gA(c,h,v){v.props=ll(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(x){yn(c,h,x)}}function lh(c,h){try{var v=c.ref;if(v!==null){switch(c.tag){case 26:case 27:case 5:var x=c.stateNode;break;case 30:x=c.stateNode;break;default:x=c.stateNode}typeof v=="function"?c.refCleanup=v(x):v.current=x}}catch(R){yn(c,h,R)}}function ri(c,h){var v=c.ref,x=c.refCleanup;if(v!==null)if(typeof x=="function")try{x()}catch(R){yn(c,h,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(R){yn(c,h,R)}else v.current=null}function yA(c){var h=c.type,v=c.memoizedProps,x=c.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":v.autoFocus&&x.focus();break e;case"img":v.src?x.src=v.src:v.srcSet&&(x.srcset=v.srcSet)}}catch(R){yn(c,c.return,R)}}function Cx(c,h,v){try{var x=c.stateNode;eU(x,c.type,v,h),x[rr]=h}catch(R){yn(c,c.return,R)}}function bA(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&ou(c.type)||c.tag===4}function Sx(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||bA(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&ou(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ex(c,h,v){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(c,h):(h=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,h.appendChild(c),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=pv));else if(x!==4&&(x===27&&ou(c.type)&&(v=c.stateNode,h=null),c=c.child,c!==null))for(Ex(c,h,v),c=c.sibling;c!==null;)Ex(c,h,v),c=c.sibling}function rv(c,h,v){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?v.insertBefore(c,h):v.appendChild(c);else if(x!==4&&(x===27&&ou(c.type)&&(v=c.stateNode),c=c.child,c!==null))for(rv(c,h,v),c=c.sibling;c!==null;)rv(c,h,v),c=c.sibling}function xA(c){var h=c.stateNode,v=c.memoizedProps;try{for(var x=c.type,R=h.attributes;R.length;)h.removeAttributeNode(R[0]);Er(h,x,v),h[Pn]=c,h[rr]=v}catch(N){yn(c,c.return,N)}}var es=!1,$n=!1,Rx=!1,wA=typeof WeakSet=="function"?WeakSet:Set,pr=null;function O6(c,h){if(c=c.containerInfo,Kx=wv,c=I_(c),Sb(c)){if("selectionStart"in c)var v={start:c.selectionStart,end:c.selectionEnd};else e:{v=(v=c.ownerDocument)&&v.defaultView||window;var x=v.getSelection&&v.getSelection();if(x&&x.rangeCount!==0){v=x.anchorNode;var R=x.anchorOffset,N=x.focusNode;x=x.focusOffset;try{v.nodeType,N.nodeType}catch{v=null;break e}var B=0,V=-1,Z=-1,he=0,Ee=0,Ne=c,pe=null;t:for(;;){for(var ve;Ne!==v||R!==0&&Ne.nodeType!==3||(V=B+R),Ne!==N||x!==0&&Ne.nodeType!==3||(Z=B+x),Ne.nodeType===3&&(B+=Ne.nodeValue.length),(ve=Ne.firstChild)!==null;)pe=Ne,Ne=ve;for(;;){if(Ne===c)break t;if(pe===v&&++he===R&&(V=B),pe===N&&++Ee===x&&(Z=B),(ve=Ne.nextSibling)!==null)break;Ne=pe,pe=Ne.parentNode}Ne=ve}v=V===-1||Z===-1?null:{start:V,end:Z}}else v=null}v=v||{start:0,end:0}}else v=null;for(Yx={focusedElem:c,selectionRange:v},wv=!1,pr=h;pr!==null;)if(h=pr,c=h.child,(h.subtreeFlags&1024)!==0&&c!==null)c.return=h,pr=c;else for(;pr!==null;){switch(h=pr,N=h.alternate,c=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&N!==null){c=void 0,v=h,R=N.memoizedProps,N=N.memoizedState,x=v.stateNode;try{var vt=ll(v.type,R,v.elementType===v.type);c=x.getSnapshotBeforeUpdate(vt,N),x.__reactInternalSnapshotBeforeUpdate=c}catch(ht){yn(v,v.return,ht)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,v=c.nodeType,v===9)Zx(c);else if(v===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Zx(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=h.sibling,c!==null){c.return=h.return,pr=c;break}pr=h.return}}function CA(c,h,v){var x=v.flags;switch(v.tag){case 0:case 11:case 15:Qs(c,v),x&4&&uh(5,v);break;case 1:if(Qs(c,v),x&4)if(c=v.stateNode,h===null)try{c.componentDidMount()}catch(B){yn(v,v.return,B)}else{var R=ll(v.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(R,h,c.__reactInternalSnapshotBeforeUpdate)}catch(B){yn(v,v.return,B)}}x&64&&vA(v),x&512&&lh(v,v.return);break;case 3:if(Qs(c,v),x&64&&(c=v.updateQueue,c!==null)){if(h=null,v.child!==null)switch(v.child.tag){case 27:case 5:h=v.child.stateNode;break;case 1:h=v.child.stateNode}try{rT(c,h)}catch(B){yn(v,v.return,B)}}break;case 27:h===null&&x&4&&xA(v);case 26:case 5:Qs(c,v),h===null&&x&4&&yA(v),x&512&&lh(v,v.return);break;case 12:Qs(c,v);break;case 13:Qs(c,v),x&4&&RA(c,v),x&64&&(c=v.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(v=V6.bind(null,v),sU(c,v))));break;case 22:if(x=v.memoizedState!==null||es,!x){h=h!==null&&h.memoizedState!==null||$n,R=es;var N=$n;es=x,($n=h)&&!N?Js(c,v,(v.subtreeFlags&8772)!==0):Qs(c,v),es=R,$n=N}break;case 30:break;default:Qs(c,v)}}function SA(c){var h=c.alternate;h!==null&&(c.alternate=null,SA(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&Of(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Nn=null,lo=!1;function ts(c,h,v){for(v=v.child;v!==null;)EA(c,h,v),v=v.sibling}function EA(c,h,v){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(He,v)}catch{}switch(v.tag){case 26:$n||ri(v,h),ts(c,h,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:$n||ri(v,h);var x=Nn,R=lo;ou(v.type)&&(Nn=v.stateNode,lo=!1),ts(c,h,v),yh(v.stateNode),Nn=x,lo=R;break;case 5:$n||ri(v,h);case 6:if(x=Nn,R=lo,Nn=null,ts(c,h,v),Nn=x,lo=R,Nn!==null)if(lo)try{(Nn.nodeType===9?Nn.body:Nn.nodeName==="HTML"?Nn.ownerDocument.body:Nn).removeChild(v.stateNode)}catch(N){yn(v,h,N)}else try{Nn.removeChild(v.stateNode)}catch(N){yn(v,h,N)}break;case 18:Nn!==null&&(lo?(c=Nn,fN(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,v.stateNode),_h(c)):fN(Nn,v.stateNode));break;case 4:x=Nn,R=lo,Nn=v.stateNode.containerInfo,lo=!0,ts(c,h,v),Nn=x,lo=R;break;case 0:case 11:case 14:case 15:$n||Ys(2,v,h),$n||Ys(4,v,h),ts(c,h,v);break;case 1:$n||(ri(v,h),x=v.stateNode,typeof x.componentWillUnmount=="function"&&gA(v,h,x)),ts(c,h,v);break;case 21:ts(c,h,v);break;case 22:$n=(x=$n)||v.memoizedState!==null,ts(c,h,v),$n=x;break;default:ts(c,h,v)}}function RA(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{_h(c)}catch(v){yn(h,h.return,v)}}function P6(c){switch(c.tag){case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new wA),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new wA),h;default:throw Error(r(435,c.tag))}}function _x(c,h){var v=P6(c);h.forEach(function(x){var R=H6.bind(null,c,x);v.has(x)||(v.add(x),x.then(R,R))})}function _o(c,h){var v=h.deletions;if(v!==null)for(var x=0;x<v.length;x++){var R=v[x],N=c,B=h,V=B;e:for(;V!==null;){switch(V.tag){case 27:if(ou(V.type)){Nn=V.stateNode,lo=!1;break e}break;case 5:Nn=V.stateNode,lo=!1;break e;case 3:case 4:Nn=V.stateNode.containerInfo,lo=!0;break e}V=V.return}if(Nn===null)throw Error(r(160));EA(N,B,R),Nn=null,lo=!1,N=R.alternate,N!==null&&(N.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)_A(h,c),h=h.sibling}var Ia=null;function _A(c,h){var v=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:_o(h,c),To(c),x&4&&(Ys(3,c,c.return),uh(3,c),Ys(5,c,c.return));break;case 1:_o(h,c),To(c),x&512&&($n||v===null||ri(v,v.return)),x&64&&es&&(c=c.updateQueue,c!==null&&(x=c.callbacks,x!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?x:v.concat(x))));break;case 26:var R=Ia;if(_o(h,c),To(c),x&512&&($n||v===null||ri(v,v.return)),x&4){var N=v!==null?v.memoizedState:null;if(x=c.memoizedState,v===null)if(x===null)if(c.stateNode===null){e:{x=c.type,v=c.memoizedProps,R=R.ownerDocument||R;t:switch(x){case"title":N=R.getElementsByTagName("title")[0],(!N||N[Ku]||N[Pn]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=R.createElement(x),R.head.insertBefore(N,R.querySelector("head > title"))),Er(N,x,v),N[Pn]=c,Fn(N),x=N;break e;case"link":var B=xN("link","href",R).get(x+(v.href||""));if(B){for(var V=0;V<B.length;V++)if(N=B[V],N.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&N.getAttribute("rel")===(v.rel==null?null:v.rel)&&N.getAttribute("title")===(v.title==null?null:v.title)&&N.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){B.splice(V,1);break t}}N=R.createElement(x),Er(N,x,v),R.head.appendChild(N);break;case"meta":if(B=xN("meta","content",R).get(x+(v.content||""))){for(V=0;V<B.length;V++)if(N=B[V],N.getAttribute("content")===(v.content==null?null:""+v.content)&&N.getAttribute("name")===(v.name==null?null:v.name)&&N.getAttribute("property")===(v.property==null?null:v.property)&&N.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&N.getAttribute("charset")===(v.charSet==null?null:v.charSet)){B.splice(V,1);break t}}N=R.createElement(x),Er(N,x,v),R.head.appendChild(N);break;default:throw Error(r(468,x))}N[Pn]=c,Fn(N),x=N}c.stateNode=x}else wN(R,c.type,c.stateNode);else c.stateNode=bN(R,x,c.memoizedProps);else N!==x?(N===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):N.count--,x===null?wN(R,c.type,c.stateNode):bN(R,x,c.memoizedProps)):x===null&&c.stateNode!==null&&Cx(c,c.memoizedProps,v.memoizedProps)}break;case 27:_o(h,c),To(c),x&512&&($n||v===null||ri(v,v.return)),v!==null&&x&4&&Cx(c,c.memoizedProps,v.memoizedProps);break;case 5:if(_o(h,c),To(c),x&512&&($n||v===null||ri(v,v.return)),c.flags&32){R=c.stateNode;try{pc(R,"")}catch(ve){yn(c,c.return,ve)}}x&4&&c.stateNode!=null&&(R=c.memoizedProps,Cx(c,R,v!==null?v.memoizedProps:R)),x&1024&&(Rx=!0);break;case 6:if(_o(h,c),To(c),x&4){if(c.stateNode===null)throw Error(r(162));x=c.memoizedProps,v=c.stateNode;try{v.nodeValue=x}catch(ve){yn(c,c.return,ve)}}break;case 3:if(yv=null,R=Ia,Ia=vv(h.containerInfo),_o(h,c),Ia=R,To(c),x&4&&v!==null&&v.memoizedState.isDehydrated)try{_h(h.containerInfo)}catch(ve){yn(c,c.return,ve)}Rx&&(Rx=!1,TA(c));break;case 4:x=Ia,Ia=vv(c.stateNode.containerInfo),_o(h,c),To(c),Ia=x;break;case 12:_o(h,c),To(c);break;case 13:_o(h,c),To(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Ix=Ie()),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,_x(c,x)));break;case 22:R=c.memoizedState!==null;var Z=v!==null&&v.memoizedState!==null,he=es,Ee=$n;if(es=he||R,$n=Ee||Z,_o(h,c),$n=Ee,es=he,To(c),x&8192)e:for(h=c.stateNode,h._visibility=R?h._visibility&-2:h._visibility|1,R&&(v===null||Z||es||$n||cl(c)),v=null,h=c;;){if(h.tag===5||h.tag===26){if(v===null){Z=v=h;try{if(N=Z.stateNode,R)B=N.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{V=Z.stateNode;var Ne=Z.memoizedProps.style,pe=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;V.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(ve){yn(Z,Z.return,ve)}}}else if(h.tag===6){if(v===null){Z=h;try{Z.stateNode.nodeValue=R?"":Z.memoizedProps}catch(ve){yn(Z,Z.return,ve)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}x&4&&(x=c.updateQueue,x!==null&&(v=x.retryQueue,v!==null&&(x.retryQueue=null,_x(c,v))));break;case 19:_o(h,c),To(c),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,_x(c,x)));break;case 30:break;case 21:break;default:_o(h,c),To(c)}}function To(c){var h=c.flags;if(h&2){try{for(var v,x=c.return;x!==null;){if(bA(x)){v=x;break}x=x.return}if(v==null)throw Error(r(160));switch(v.tag){case 27:var R=v.stateNode,N=Sx(c);rv(c,N,R);break;case 5:var B=v.stateNode;v.flags&32&&(pc(B,""),v.flags&=-33);var V=Sx(c);rv(c,V,B);break;case 3:case 4:var Z=v.stateNode.containerInfo,he=Sx(c);Ex(c,he,Z);break;default:throw Error(r(161))}}catch(Ee){yn(c,c.return,Ee)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function TA(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;TA(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function Qs(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)CA(c,h.alternate,h),h=h.sibling}function cl(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:Ys(4,h,h.return),cl(h);break;case 1:ri(h,h.return);var v=h.stateNode;typeof v.componentWillUnmount=="function"&&gA(h,h.return,v),cl(h);break;case 27:yh(h.stateNode);case 26:case 5:ri(h,h.return),cl(h);break;case 22:h.memoizedState===null&&cl(h);break;case 30:cl(h);break;default:cl(h)}c=c.sibling}}function Js(c,h,v){for(v=v&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,R=c,N=h,B=N.flags;switch(N.tag){case 0:case 11:case 15:Js(R,N,v),uh(4,N);break;case 1:if(Js(R,N,v),x=N,R=x.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(he){yn(x,x.return,he)}if(x=N,R=x.updateQueue,R!==null){var V=x.stateNode;try{var Z=R.shared.hiddenCallbacks;if(Z!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Z.length;R++)nT(Z[R],V)}catch(he){yn(x,x.return,he)}}v&&B&64&&vA(N),lh(N,N.return);break;case 27:xA(N);case 26:case 5:Js(R,N,v),v&&x===null&&B&4&&yA(N),lh(N,N.return);break;case 12:Js(R,N,v);break;case 13:Js(R,N,v),v&&B&4&&RA(R,N);break;case 22:N.memoizedState===null&&Js(R,N,v),lh(N,N.return);break;case 30:break;default:Js(R,N,v)}h=h.sibling}}function Tx(c,h){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&Xf(v))}function Ax(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Xf(c))}function oi(c,h,v,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)AA(c,h,v,x),h=h.sibling}function AA(c,h,v,x){var R=h.flags;switch(h.tag){case 0:case 11:case 15:oi(c,h,v,x),R&2048&&uh(9,h);break;case 1:oi(c,h,v,x);break;case 3:oi(c,h,v,x),R&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Xf(c)));break;case 12:if(R&2048){oi(c,h,v,x),c=h.stateNode;try{var N=h.memoizedProps,B=N.id,V=N.onPostCommit;typeof V=="function"&&V(B,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Z){yn(h,h.return,Z)}}else oi(c,h,v,x);break;case 13:oi(c,h,v,x);break;case 23:break;case 22:N=h.stateNode,B=h.alternate,h.memoizedState!==null?N._visibility&2?oi(c,h,v,x):ch(c,h):N._visibility&2?oi(c,h,v,x):(N._visibility|=2,Mc(c,h,v,x,(h.subtreeFlags&10256)!==0)),R&2048&&Tx(B,h);break;case 24:oi(c,h,v,x),R&2048&&Ax(h.alternate,h);break;default:oi(c,h,v,x)}}function Mc(c,h,v,x,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var N=c,B=h,V=v,Z=x,he=B.flags;switch(B.tag){case 0:case 11:case 15:Mc(N,B,V,Z,R),uh(8,B);break;case 23:break;case 22:var Ee=B.stateNode;B.memoizedState!==null?Ee._visibility&2?Mc(N,B,V,Z,R):ch(N,B):(Ee._visibility|=2,Mc(N,B,V,Z,R)),R&&he&2048&&Tx(B.alternate,B);break;case 24:Mc(N,B,V,Z,R),R&&he&2048&&Ax(B.alternate,B);break;default:Mc(N,B,V,Z,R)}h=h.sibling}}function ch(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var v=c,x=h,R=x.flags;switch(x.tag){case 22:ch(v,x),R&2048&&Tx(x.alternate,x);break;case 24:ch(v,x),R&2048&&Ax(x.alternate,x);break;default:ch(v,x)}h=h.sibling}}var dh=8192;function Oc(c){if(c.subtreeFlags&dh)for(c=c.child;c!==null;)NA(c),c=c.sibling}function NA(c){switch(c.tag){case 26:Oc(c),c.flags&dh&&c.memoizedState!==null&&xU(Ia,c.memoizedState,c.memoizedProps);break;case 5:Oc(c);break;case 3:case 4:var h=Ia;Ia=vv(c.stateNode.containerInfo),Oc(c),Ia=h;break;case 22:c.memoizedState===null&&(h=c.alternate,h!==null&&h.memoizedState!==null?(h=dh,dh=16777216,Oc(c),dh=h):Oc(c));break;default:Oc(c)}}function DA(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function fh(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var x=h[v];pr=x,IA(x,c)}DA(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)kA(c),c=c.sibling}function kA(c){switch(c.tag){case 0:case 11:case 15:fh(c),c.flags&2048&&Ys(9,c,c.return);break;case 3:fh(c);break;case 12:fh(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,ov(c)):fh(c);break;default:fh(c)}}function ov(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var x=h[v];pr=x,IA(x,c)}DA(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:Ys(8,h,h.return),ov(h);break;case 22:v=h.stateNode,v._visibility&2&&(v._visibility&=-3,ov(h));break;default:ov(h)}c=c.sibling}}function IA(c,h){for(;pr!==null;){var v=pr;switch(v.tag){case 0:case 11:case 15:Ys(8,v,h);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var x=v.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Xf(v.memoizedState.cache)}if(x=v.child,x!==null)x.return=v,pr=x;else e:for(v=c;pr!==null;){x=pr;var R=x.sibling,N=x.return;if(SA(x),x===v){pr=null;break e}if(R!==null){R.return=N,pr=R;break e}pr=N}}}var F6={getCacheForType:function(c){var h=Or(or),v=h.data.get(c);return v===void 0&&(v=c(),h.data.set(c,v)),v}},B6=typeof WeakMap=="function"?WeakMap:Map,ln=0,xn=null,It=null,Vt=0,cn=0,Ao=null,Zs=!1,Pc=!1,Nx=!1,ns=0,Ln=0,eu=0,dl=0,Dx=0,ia=0,Fc=0,hh=null,co=null,kx=!1,Ix=0,av=1/0,iv=null,tu=null,Sr=0,nu=null,Bc=null,Lc=0,Mx=0,Ox=null,MA=null,ph=0,Px=null;function No(){if((ln&2)!==0&&Vt!==0)return Vt&-Vt;if(P.T!==null){var c=Rc;return c!==0?c:Wx()}return ei()}function OA(){ia===0&&(ia=(Vt&536870912)===0||Zt?mt():536870912);var c=aa.current;return c!==null&&(c.flags|=32),ia}function Do(c,h,v){(c===xn&&(cn===2||cn===9)||c.cancelPendingCommit!==null)&&(jc(c,0),ru(c,Vt,ia,!1)),Bt(c,v),((ln&2)===0||c!==xn)&&(c===xn&&((ln&2)===0&&(dl|=v),Ln===4&&ru(c,Vt,ia,!1)),ai(c))}function PA(c,h,v){if((ln&6)!==0)throw Error(r(327));var x=!v&&(h&124)===0&&(h&c.expiredLanes)===0||Tn(c,h),R=x?z6(c,h):Lx(c,h,!0),N=x;do{if(R===0){Pc&&!x&&ru(c,h,0,!1);break}else{if(v=c.current.alternate,N&&!L6(v)){R=Lx(c,h,!1),N=!1;continue}if(R===2){if(N=h,c.errorRecoveryDisabledLanes&N)var B=0;else B=c.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){h=B;e:{var V=c;R=hh;var Z=V.current.memoizedState.isDehydrated;if(Z&&(jc(V,B).flags|=256),B=Lx(V,B,!1),B!==2){if(Nx&&!Z){V.errorRecoveryDisabledLanes|=N,dl|=N,R=4;break e}N=co,co=R,N!==null&&(co===null?co=N:co.push.apply(co,N))}R=B}if(N=!1,R!==2)continue}}if(R===1){jc(c,0),ru(c,h,0,!0);break}e:{switch(x=c,N=R,N){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:ru(x,h,ia,!Zs);break e;case 2:co=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(R=Ix+300-Ie(),10<R)){if(ru(x,h,ia,!Zs),Da(x,0,!0)!==0)break e;x.timeoutHandle=cN(FA.bind(null,x,v,co,iv,kx,h,ia,dl,Fc,Zs,N,2,-0,0),R);break e}FA(x,v,co,iv,kx,h,ia,dl,Fc,Zs,N,0,-0,0)}}break}while(!0);ai(c)}function FA(c,h,v,x,R,N,B,V,Z,he,Ee,Ne,pe,ve){if(c.timeoutHandle=-1,Ne=h.subtreeFlags,(Ne&8192||(Ne&16785408)===16785408)&&(wh={stylesheets:null,count:0,unsuspend:bU},NA(h),Ne=wU(),Ne!==null)){c.cancelPendingCommit=Ne(VA.bind(null,c,h,N,v,x,R,B,V,Z,Ee,1,pe,ve)),ru(c,N,B,!he);return}VA(c,h,N,v,x,R,B,V,Z)}function L6(c){for(var h=c;;){var v=h.tag;if((v===0||v===11||v===15)&&h.flags&16384&&(v=h.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var x=0;x<v.length;x++){var R=v[x],N=R.getSnapshot;R=R.value;try{if(!Eo(N(),R))return!1}catch{return!1}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ru(c,h,v,x){h&=~Dx,h&=~dl,c.suspendedLanes|=h,c.pingedLanes&=~h,x&&(c.warmLanes|=h),x=c.expirationTimes;for(var R=h;0<R;){var N=31-Pt(R),B=1<<N;x[N]=-1,R&=~B}v!==0&&un(c,v,h)}function sv(){return(ln&6)===0?(mh(0),!1):!0}function Fx(){if(It!==null){if(cn===0)var c=It.return;else c=It,Xi=al=null,Zb(c),kc=null,ah=0,c=It;for(;c!==null;)mA(c.alternate,c),c=c.return;It=null}}function jc(c,h){var v=c.timeoutHandle;v!==-1&&(c.timeoutHandle=-1,nU(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),Fx(),xn=c,It=v=Gi(c.current,null),Vt=h,cn=0,Ao=null,Zs=!1,Pc=Tn(c,h),Nx=!1,Fc=ia=Dx=dl=eu=Ln=0,co=hh=null,kx=!1,(h&8)!==0&&(h|=h&32);var x=c.entangledLanes;if(x!==0)for(c=c.entanglements,x&=h;0<x;){var R=31-Pt(x),N=1<<R;h|=c[R],x&=~N}return ns=h,Nm(),v}function BA(c,h){Nt=null,P.H=Xm,h===Yf||h===Lm?(h=eT(),cn=3):h===Q_?(h=eT(),cn=4):cn=h===tA?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ao=h,It===null&&(Ln=1,Zm(c,ta(h,c.current)))}function LA(){var c=P.H;return P.H=Xm,c===null?Xm:c}function jA(){var c=P.A;return P.A=F6,c}function Bx(){Ln=4,Zs||(Vt&4194048)!==Vt&&aa.current!==null||(Pc=!0),(eu&134217727)===0&&(dl&134217727)===0||xn===null||ru(xn,Vt,ia,!1)}function Lx(c,h,v){var x=ln;ln|=2;var R=LA(),N=jA();(xn!==c||Vt!==h)&&(iv=null,jc(c,h)),h=!1;var B=Ln;e:do try{if(cn!==0&&It!==null){var V=It,Z=Ao;switch(cn){case 8:Fx(),B=6;break e;case 3:case 2:case 9:case 6:aa.current===null&&(h=!0);var he=cn;if(cn=0,Ao=null,zc(c,V,Z,he),v&&Pc){B=0;break e}break;default:he=cn,cn=0,Ao=null,zc(c,V,Z,he)}}j6(),B=Ln;break}catch(Ee){BA(c,Ee)}while(!0);return h&&c.shellSuspendCounter++,Xi=al=null,ln=x,P.H=R,P.A=N,It===null&&(xn=null,Vt=0,Nm()),B}function j6(){for(;It!==null;)zA(It)}function z6(c,h){var v=ln;ln|=2;var x=LA(),R=jA();xn!==c||Vt!==h?(iv=null,av=Ie()+500,jc(c,h)):Pc=Tn(c,h);e:do try{if(cn!==0&&It!==null){h=It;var N=Ao;t:switch(cn){case 1:cn=0,Ao=null,zc(c,h,N,1);break;case 2:case 9:if(J_(N)){cn=0,Ao=null,UA(h);break}h=function(){cn!==2&&cn!==9||xn!==c||(cn=7),ai(c)},N.then(h,h);break e;case 3:cn=7;break e;case 4:cn=5;break e;case 7:J_(N)?(cn=0,Ao=null,UA(h)):(cn=0,Ao=null,zc(c,h,N,7));break;case 5:var B=null;switch(It.tag){case 26:B=It.memoizedState;case 5:case 27:var V=It;if(!B||CN(B)){cn=0,Ao=null;var Z=V.sibling;if(Z!==null)It=Z;else{var he=V.return;he!==null?(It=he,uv(he)):It=null}break t}}cn=0,Ao=null,zc(c,h,N,5);break;case 6:cn=0,Ao=null,zc(c,h,N,6);break;case 8:Fx(),Ln=6;break e;default:throw Error(r(462))}}U6();break}catch(Ee){BA(c,Ee)}while(!0);return Xi=al=null,P.H=x,P.A=R,ln=v,It!==null?0:(xn=null,Vt=0,Nm(),Ln)}function U6(){for(;It!==null&&!et();)zA(It)}function zA(c){var h=hA(c.alternate,c,ns);c.memoizedProps=c.pendingProps,h===null?uv(c):It=h}function UA(c){var h=c,v=h.alternate;switch(h.tag){case 15:case 0:h=sA(v,h,h.pendingProps,h.type,void 0,Vt);break;case 11:h=sA(v,h,h.pendingProps,h.type.render,h.ref,Vt);break;case 5:Zb(h);default:mA(v,h),h=It=W_(h,ns),h=hA(v,h,ns)}c.memoizedProps=c.pendingProps,h===null?uv(c):It=h}function zc(c,h,v,x){Xi=al=null,Zb(h),kc=null,ah=0;var R=h.return;try{if(D6(c,R,h,v,Vt)){Ln=1,Zm(c,ta(v,c.current)),It=null;return}}catch(N){if(R!==null)throw It=R,N;Ln=1,Zm(c,ta(v,c.current)),It=null;return}h.flags&32768?(Zt||x===1?c=!0:Pc||(Vt&536870912)!==0?c=!1:(Zs=c=!0,(x===2||x===9||x===3||x===6)&&(x=aa.current,x!==null&&x.tag===13&&(x.flags|=16384))),WA(h,c)):uv(h)}function uv(c){var h=c;do{if((h.flags&32768)!==0){WA(h,Zs);return}c=h.return;var v=I6(h.alternate,h,ns);if(v!==null){It=v;return}if(h=h.sibling,h!==null){It=h;return}It=h=c}while(h!==null);Ln===0&&(Ln=5)}function WA(c,h){do{var v=M6(c.alternate,c);if(v!==null){v.flags&=32767,It=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!h&&(c=c.sibling,c!==null)){It=c;return}It=c=v}while(c!==null);Ln=6,It=null}function VA(c,h,v,x,R,N,B,V,Z){c.cancelPendingCommit=null;do lv();while(Sr!==0);if((ln&6)!==0)throw Error(r(327));if(h!==null){if(h===c.current)throw Error(r(177));if(N=h.lanes|h.childLanes,N|=Ab,sn(c,v,N,B,V,Z),c===xn&&(It=xn=null,Vt=0),Bc=h,nu=c,Lc=v,Mx=N,Ox=R,MA=x,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,G6(ct,function(){return XA(),null})):(c.callbackNode=null,c.callbackPriority=0),x=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||x){x=P.T,P.T=null,R=U.p,U.p=2,B=ln,ln|=4;try{O6(c,h,v)}finally{ln=B,U.p=R,P.T=x}}Sr=1,HA(),GA(),$A()}}function HA(){if(Sr===1){Sr=0;var c=nu,h=Bc,v=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||v){v=P.T,P.T=null;var x=U.p;U.p=2;var R=ln;ln|=4;try{_A(h,c);var N=Yx,B=I_(c.containerInfo),V=N.focusedElem,Z=N.selectionRange;if(B!==V&&V&&V.ownerDocument&&k_(V.ownerDocument.documentElement,V)){if(Z!==null&&Sb(V)){var he=Z.start,Ee=Z.end;if(Ee===void 0&&(Ee=he),"selectionStart"in V)V.selectionStart=he,V.selectionEnd=Math.min(Ee,V.value.length);else{var Ne=V.ownerDocument||document,pe=Ne&&Ne.defaultView||window;if(pe.getSelection){var ve=pe.getSelection(),vt=V.textContent.length,ht=Math.min(Z.start,vt),hn=Z.end===void 0?ht:Math.min(Z.end,vt);!ve.extend&&ht>hn&&(B=hn,hn=ht,ht=B);var ue=D_(V,ht),re=D_(V,hn);if(ue&&re&&(ve.rangeCount!==1||ve.anchorNode!==ue.node||ve.anchorOffset!==ue.offset||ve.focusNode!==re.node||ve.focusOffset!==re.offset)){var de=Ne.createRange();de.setStart(ue.node,ue.offset),ve.removeAllRanges(),ht>hn?(ve.addRange(de),ve.extend(re.node,re.offset)):(de.setEnd(re.node,re.offset),ve.addRange(de))}}}}for(Ne=[],ve=V;ve=ve.parentNode;)ve.nodeType===1&&Ne.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Ne.length;V++){var _e=Ne[V];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}wv=!!Kx,Yx=Kx=null}finally{ln=R,U.p=x,P.T=v}}c.current=h,Sr=2}}function GA(){if(Sr===2){Sr=0;var c=nu,h=Bc,v=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||v){v=P.T,P.T=null;var x=U.p;U.p=2;var R=ln;ln|=4;try{CA(c,h.alternate,h)}finally{ln=R,U.p=x,P.T=v}}Sr=3}}function $A(){if(Sr===4||Sr===3){Sr=0,ot();var c=nu,h=Bc,v=Lc,x=MA;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Sr=5:(Sr=0,Bc=nu=null,qA(c,c.pendingLanes));var R=c.pendingLanes;if(R===0&&(tu=null),cc(v),h=h.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(He,h,void 0,(h.current.flags&128)===128)}catch{}if(x!==null){h=P.T,R=U.p,U.p=2,P.T=null;try{for(var N=c.onRecoverableError,B=0;B<x.length;B++){var V=x[B];N(V.value,{componentStack:V.stack})}}finally{P.T=h,U.p=R}}(Lc&3)!==0&&lv(),ai(c),R=c.pendingLanes,(v&4194090)!==0&&(R&42)!==0?c===Px?ph++:(ph=0,Px=c):ph=0,mh(0)}}function qA(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,Xf(h)))}function lv(c){return HA(),GA(),$A(),XA()}function XA(){if(Sr!==5)return!1;var c=nu,h=Mx;Mx=0;var v=cc(Lc),x=P.T,R=U.p;try{U.p=32>v?32:v,P.T=null,v=Ox,Ox=null;var N=nu,B=Lc;if(Sr=0,Bc=nu=null,Lc=0,(ln&6)!==0)throw Error(r(331));var V=ln;if(ln|=4,kA(N.current),AA(N,N.current,B,v),ln=V,mh(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(He,N)}catch{}return!0}finally{U.p=R,P.T=x,qA(c,h)}}function KA(c,h,v){h=ta(v,h),h=hx(c.stateNode,h,2),c=$s(c,h,2),c!==null&&(Bt(c,2),ai(c))}function yn(c,h,v){if(c.tag===3)KA(c,c,v);else for(;h!==null;){if(h.tag===3){KA(h,c,v);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(tu===null||!tu.has(x))){c=ta(v,c),v=ZT(2),x=$s(h,v,2),x!==null&&(eA(v,x,h,c),Bt(x,2),ai(x));break}}h=h.return}}function jx(c,h,v){var x=c.pingCache;if(x===null){x=c.pingCache=new B6;var R=new Set;x.set(h,R)}else R=x.get(h),R===void 0&&(R=new Set,x.set(h,R));R.has(v)||(Nx=!0,R.add(v),c=W6.bind(null,c,h,v),h.then(c,c))}function W6(c,h,v){var x=c.pingCache;x!==null&&x.delete(h),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,xn===c&&(Vt&v)===v&&(Ln===4||Ln===3&&(Vt&62914560)===Vt&&300>Ie()-Ix?(ln&2)===0&&jc(c,0):Dx|=v,Fc===Vt&&(Fc=0)),ai(c)}function YA(c,h){h===0&&(h=Ft()),c=wc(c,h),c!==null&&(Bt(c,h),ai(c))}function V6(c){var h=c.memoizedState,v=0;h!==null&&(v=h.retryLane),YA(c,v)}function H6(c,h){var v=0;switch(c.tag){case 13:var x=c.stateNode,R=c.memoizedState;R!==null&&(v=R.retryLane);break;case 19:x=c.stateNode;break;case 22:x=c.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(h),YA(c,v)}function G6(c,h){return De(c,h)}var cv=null,Uc=null,zx=!1,dv=!1,Ux=!1,fl=0;function ai(c){c!==Uc&&c.next===null&&(Uc===null?cv=Uc=c:Uc=Uc.next=c),dv=!0,zx||(zx=!0,q6())}function mh(c,h){if(!Ux&&dv){Ux=!0;do for(var v=!1,x=cv;x!==null;){if(c!==0){var R=x.pendingLanes;if(R===0)var N=0;else{var B=x.suspendedLanes,V=x.pingedLanes;N=(1<<31-Pt(42|c)+1)-1,N&=R&~(B&~V),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(v=!0,eN(x,N))}else N=Vt,N=Da(x,x===xn?N:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(N&3)===0||Tn(x,N)||(v=!0,eN(x,N));x=x.next}while(v);Ux=!1}}function $6(){QA()}function QA(){dv=zx=!1;var c=0;fl!==0&&(tU()&&(c=fl),fl=0);for(var h=Ie(),v=null,x=cv;x!==null;){var R=x.next,N=JA(x,h);N===0?(x.next=null,v===null?cv=R:v.next=R,R===null&&(Uc=v)):(v=x,(c!==0||(N&3)!==0)&&(dv=!0)),x=R}mh(c)}function JA(c,h){for(var v=c.suspendedLanes,x=c.pingedLanes,R=c.expirationTimes,N=c.pendingLanes&-62914561;0<N;){var B=31-Pt(N),V=1<<B,Z=R[B];Z===-1?((V&v)===0||(V&x)!==0)&&(R[B]=Za(V,h)):Z<=h&&(c.expiredLanes|=V),N&=~V}if(h=xn,v=Vt,v=Da(c,c===h?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),x=c.callbackNode,v===0||c===h&&(cn===2||cn===9)||c.cancelPendingCommit!==null)return x!==null&&x!==null&&$e(x),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||Tn(c,v)){if(h=v&-v,h===c.callbackPriority)return h;switch(x!==null&&$e(x),cc(v)){case 2:case 8:v=Ke;break;case 32:v=ct;break;case 268435456:v=Xe;break;default:v=ct}return x=ZA.bind(null,c),v=De(v,x),c.callbackPriority=h,c.callbackNode=v,h}return x!==null&&x!==null&&$e(x),c.callbackPriority=2,c.callbackNode=null,2}function ZA(c,h){if(Sr!==0&&Sr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var v=c.callbackNode;if(lv()&&c.callbackNode!==v)return null;var x=Vt;return x=Da(c,c===xn?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),x===0?null:(PA(c,x,h),JA(c,Ie()),c.callbackNode!=null&&c.callbackNode===v?ZA.bind(null,c):null)}function eN(c,h){if(lv())return null;PA(c,h,!0)}function q6(){rU(function(){(ln&6)!==0?De(Fe,$6):QA()})}function Wx(){return fl===0&&(fl=mt()),fl}function tN(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Cm(""+c)}function nN(c,h){var v=h.ownerDocument.createElement("input");return v.name=h.name,v.value=h.value,c.id&&v.setAttribute("form",c.id),h.parentNode.insertBefore(v,h),c=new FormData(c),v.parentNode.removeChild(v),c}function X6(c,h,v,x,R){if(h==="submit"&&v&&v.stateNode===R){var N=tN((R[rr]||null).action),B=x.submitter;B&&(h=(h=B[rr]||null)?tN(h.formAction):B.getAttribute("formAction"),h!==null&&(N=h,B=null));var V=new _m("action","action",null,x,R);c.push({event:V,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(fl!==0){var Z=B?nN(R,B):new FormData(R);ux(v,{pending:!0,data:Z,method:R.method,action:N},null,Z)}}else typeof N=="function"&&(V.preventDefault(),Z=B?nN(R,B):new FormData(R),ux(v,{pending:!0,data:Z,method:R.method,action:N},N,Z))},currentTarget:R}]})}}for(var Vx=0;Vx<Tb.length;Vx++){var Hx=Tb[Vx],K6=Hx.toLowerCase(),Y6=Hx[0].toUpperCase()+Hx.slice(1);ka(K6,"on"+Y6)}ka(P_,"onAnimationEnd"),ka(F_,"onAnimationIteration"),ka(B_,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(h6,"onTransitionRun"),ka(p6,"onTransitionStart"),ka(m6,"onTransitionCancel"),ka(L_,"onTransitionEnd"),dc("onMouseEnter",["mouseout","mouseover"]),dc("onMouseLeave",["mouseout","mouseover"]),dc("onPointerEnter",["pointerout","pointerover"]),dc("onPointerLeave",["pointerout","pointerover"]),Yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yu("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vh));function rN(c,h){h=(h&4)!==0;for(var v=0;v<c.length;v++){var x=c[v],R=x.event;x=x.listeners;e:{var N=void 0;if(h)for(var B=x.length-1;0<=B;B--){var V=x[B],Z=V.instance,he=V.currentTarget;if(V=V.listener,Z!==N&&R.isPropagationStopped())break e;N=V,R.currentTarget=he;try{N(R)}catch(Ee){Jm(Ee)}R.currentTarget=null,N=Z}else for(B=0;B<x.length;B++){if(V=x[B],Z=V.instance,he=V.currentTarget,V=V.listener,Z!==N&&R.isPropagationStopped())break e;N=V,R.currentTarget=he;try{N(R)}catch(Ee){Jm(Ee)}R.currentTarget=null,N=Z}}}}function Mt(c,h){var v=h[js];v===void 0&&(v=h[js]=new Set);var x=c+"__bubble";v.has(x)||(oN(h,c,2,!1),v.add(x))}function Gx(c,h,v){var x=0;h&&(x|=4),oN(v,c,x,h)}var fv="_reactListening"+Math.random().toString(36).slice(2);function $x(c){if(!c[fv]){c[fv]=!0,gm.forEach(function(v){v!=="selectionchange"&&(Q6.has(v)||Gx(v,!1,c),Gx(v,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[fv]||(h[fv]=!0,Gx("selectionchange",!1,h))}}function oN(c,h,v,x){switch(AN(h)){case 2:var R=EU;break;case 8:R=RU;break;default:R=i1}v=R.bind(null,h,v,c),R=void 0,!pb||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(R=!0),x?R!==void 0?c.addEventListener(h,v,{capture:!0,passive:R}):c.addEventListener(h,v,!0):R!==void 0?c.addEventListener(h,v,{passive:R}):c.addEventListener(h,v,!1)}function qx(c,h,v,x,R){var N=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var B=x.tag;if(B===3||B===4){var V=x.stateNode.containerInfo;if(V===R)break;if(B===4)for(B=x.return;B!==null;){var Z=B.tag;if((Z===3||Z===4)&&B.stateNode.containerInfo===R)return;B=B.return}for(;V!==null;){if(B=Wi(V),B===null)return;if(Z=B.tag,Z===5||Z===6||Z===26||Z===27){x=N=B;continue e}V=V.parentNode}}x=x.return}d_(function(){var he=N,Ee=fb(v),Ne=[];e:{var pe=j_.get(c);if(pe!==void 0){var ve=_m,vt=c;switch(c){case"keypress":if(Em(v)===0)break e;case"keydown":case"keyup":ve=G5;break;case"focusin":vt="focus",ve=yb;break;case"focusout":vt="blur",ve=yb;break;case"beforeblur":case"afterblur":ve=yb;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=p_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=M5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=X5;break;case P_:case F_:case B_:ve=F5;break;case L_:ve=Y5;break;case"scroll":case"scrollend":ve=k5;break;case"wheel":ve=J5;break;case"copy":case"cut":case"paste":ve=L5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=v_;break;case"toggle":case"beforetoggle":ve=e6}var ht=(h&4)!==0,hn=!ht&&(c==="scroll"||c==="scrollend"),ue=ht?pe!==null?pe+"Capture":null:pe;ht=[];for(var re=he,de;re!==null;){var _e=re;if(de=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||de===null||ue===null||(_e=Pf(re,ue),_e!=null&&ht.push(gh(re,_e,de))),hn)break;re=re.return}0<ht.length&&(pe=new ve(pe,vt,null,v,Ee),Ne.push({event:pe,listeners:ht}))}}if((h&7)===0){e:{if(pe=c==="mouseover"||c==="pointerover",ve=c==="mouseout"||c==="pointerout",pe&&v!==db&&(vt=v.relatedTarget||v.fromElement)&&(Wi(vt)||vt[Ls]))break e;if((ve||pe)&&(pe=Ee.window===Ee?Ee:(pe=Ee.ownerDocument)?pe.defaultView||pe.parentWindow:window,ve?(vt=v.relatedTarget||v.toElement,ve=he,vt=vt?Wi(vt):null,vt!==null&&(hn=a(vt),ht=vt.tag,vt!==hn||ht!==5&&ht!==27&&ht!==6)&&(vt=null)):(ve=null,vt=he),ve!==vt)){if(ht=p_,_e="onMouseLeave",ue="onMouseEnter",re="mouse",(c==="pointerout"||c==="pointerover")&&(ht=v_,_e="onPointerLeave",ue="onPointerEnter",re="pointer"),hn=ve==null?pe:Us(ve),de=vt==null?pe:Us(vt),pe=new ht(_e,re+"leave",ve,v,Ee),pe.target=hn,pe.relatedTarget=de,_e=null,Wi(Ee)===he&&(ht=new ht(ue,re+"enter",vt,v,Ee),ht.target=de,ht.relatedTarget=hn,_e=ht),hn=_e,ve&&vt)t:{for(ht=ve,ue=vt,re=0,de=ht;de;de=Wc(de))re++;for(de=0,_e=ue;_e;_e=Wc(_e))de++;for(;0<re-de;)ht=Wc(ht),re--;for(;0<de-re;)ue=Wc(ue),de--;for(;re--;){if(ht===ue||ue!==null&&ht===ue.alternate)break t;ht=Wc(ht),ue=Wc(ue)}ht=null}else ht=null;ve!==null&&aN(Ne,pe,ve,ht,!1),vt!==null&&hn!==null&&aN(Ne,hn,vt,ht,!0)}}e:{if(pe=he?Us(he):window,ve=pe.nodeName&&pe.nodeName.toLowerCase(),ve==="select"||ve==="input"&&pe.type==="file")var Ye=E_;else if(C_(pe))if(R_)Ye=c6;else{Ye=u6;var Dt=s6}else ve=pe.nodeName,!ve||ve.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?he&&cb(he.elementType)&&(Ye=E_):Ye=l6;if(Ye&&(Ye=Ye(c,he))){S_(Ne,Ye,v,Ee);break e}Dt&&Dt(c,pe,he),c==="focusout"&&he&&pe.type==="number"&&he.memoizedProps.value!=null&&lb(pe,"number",pe.value)}switch(Dt=he?Us(he):window,c){case"focusin":(C_(Dt)||Dt.contentEditable==="true")&&(yc=Dt,Eb=he,Vf=null);break;case"focusout":Vf=Eb=yc=null;break;case"mousedown":Rb=!0;break;case"contextmenu":case"mouseup":case"dragend":Rb=!1,M_(Ne,v,Ee);break;case"selectionchange":if(f6)break;case"keydown":case"keyup":M_(Ne,v,Ee)}var st;if(xb)e:{switch(c){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else gc?x_(c,v)&&(pt="onCompositionEnd"):c==="keydown"&&v.keyCode===229&&(pt="onCompositionStart");pt&&(g_&&v.locale!=="ko"&&(gc||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&gc&&(st=f_()):(Ws=Ee,mb="value"in Ws?Ws.value:Ws.textContent,gc=!0)),Dt=hv(he,pt),0<Dt.length&&(pt=new m_(pt,c,null,v,Ee),Ne.push({event:pt,listeners:Dt}),st?pt.data=st:(st=w_(v),st!==null&&(pt.data=st)))),(st=n6?r6(c,v):o6(c,v))&&(pt=hv(he,"onBeforeInput"),0<pt.length&&(Dt=new m_("onBeforeInput","beforeinput",null,v,Ee),Ne.push({event:Dt,listeners:pt}),Dt.data=st)),X6(Ne,c,he,v,Ee)}rN(Ne,h)})}function gh(c,h,v){return{instance:c,listener:h,currentTarget:v}}function hv(c,h){for(var v=h+"Capture",x=[];c!==null;){var R=c,N=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||N===null||(R=Pf(c,v),R!=null&&x.unshift(gh(c,R,N)),R=Pf(c,h),R!=null&&x.push(gh(c,R,N))),c.tag===3)return x;c=c.return}return[]}function Wc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function aN(c,h,v,x,R){for(var N=h._reactName,B=[];v!==null&&v!==x;){var V=v,Z=V.alternate,he=V.stateNode;if(V=V.tag,Z!==null&&Z===x)break;V!==5&&V!==26&&V!==27||he===null||(Z=he,R?(he=Pf(v,N),he!=null&&B.unshift(gh(v,he,Z))):R||(he=Pf(v,N),he!=null&&B.push(gh(v,he,Z)))),v=v.return}B.length!==0&&c.push({event:h,listeners:B})}var J6=/\r\n?/g,Z6=/\u0000|\uFFFD/g;function iN(c){return(typeof c=="string"?c:""+c).replace(J6,`
`).replace(Z6,"")}function sN(c,h){return h=iN(h),iN(c)===h}function pv(){}function fn(c,h,v,x,R,N){switch(v){case"children":typeof x=="string"?h==="body"||h==="textarea"&&x===""||pc(c,x):(typeof x=="number"||typeof x=="bigint")&&h!=="body"&&pc(c,""+x);break;case"className":bm(c,"class",x);break;case"tabIndex":bm(c,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":bm(c,v,x);break;case"style":l_(c,x,N);break;case"data":if(h!=="object"){bm(c,"data",x);break}case"src":case"href":if(x===""&&(h!=="a"||v!=="href")){c.removeAttribute(v);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){c.removeAttribute(v);break}x=Cm(""+x),c.setAttribute(v,x);break;case"action":case"formAction":if(typeof x=="function"){c.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(v==="formAction"?(h!=="input"&&fn(c,h,"name",R.name,R,null),fn(c,h,"formEncType",R.formEncType,R,null),fn(c,h,"formMethod",R.formMethod,R,null),fn(c,h,"formTarget",R.formTarget,R,null)):(fn(c,h,"encType",R.encType,R,null),fn(c,h,"method",R.method,R,null),fn(c,h,"target",R.target,R,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){c.removeAttribute(v);break}x=Cm(""+x),c.setAttribute(v,x);break;case"onClick":x!=null&&(c.onclick=pv);break;case"onScroll":x!=null&&Mt("scroll",c);break;case"onScrollEnd":x!=null&&Mt("scrollend",c);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(v=x.__html,v!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=v}}break;case"multiple":c.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":c.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){c.removeAttribute("xlink:href");break}v=Cm(""+x),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?c.setAttribute(v,""+x):c.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?c.setAttribute(v,""):c.removeAttribute(v);break;case"capture":case"download":x===!0?c.setAttribute(v,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?c.setAttribute(v,x):c.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?c.setAttribute(v,x):c.removeAttribute(v);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?c.removeAttribute(v):c.setAttribute(v,x);break;case"popover":Mt("beforetoggle",c),Mt("toggle",c),ym(c,"popover",x);break;case"xlinkActuate":Vi(c,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Vi(c,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Vi(c,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Vi(c,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Vi(c,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Vi(c,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Vi(c,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Vi(c,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Vi(c,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":ym(c,"is",x);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=N5.get(v)||v,ym(c,v,x))}}function Xx(c,h,v,x,R,N){switch(v){case"style":l_(c,x,N);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(v=x.__html,v!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=v}}break;case"children":typeof x=="string"?pc(c,x):(typeof x=="number"||typeof x=="bigint")&&pc(c,""+x);break;case"onScroll":x!=null&&Mt("scroll",c);break;case"onScrollEnd":x!=null&&Mt("scrollend",c);break;case"onClick":x!=null&&(c.onclick=pv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!JR.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(R=v.endsWith("Capture"),h=v.slice(2,R?v.length-7:void 0),N=c[rr]||null,N=N!=null?N[v]:null,typeof N=="function"&&c.removeEventListener(h,N,R),typeof x=="function")){typeof N!="function"&&N!==null&&(v in c?c[v]=null:c.hasAttribute(v)&&c.removeAttribute(v)),c.addEventListener(h,x,R);break e}v in c?c[v]=x:x===!0?c.setAttribute(v,""):ym(c,v,x)}}}function Er(c,h,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",c),Mt("load",c);var x=!1,R=!1,N;for(N in v)if(v.hasOwnProperty(N)){var B=v[N];if(B!=null)switch(N){case"src":x=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:fn(c,h,N,B,v,null)}}R&&fn(c,h,"srcSet",v.srcSet,v,null),x&&fn(c,h,"src",v.src,v,null);return;case"input":Mt("invalid",c);var V=N=B=R=null,Z=null,he=null;for(x in v)if(v.hasOwnProperty(x)){var Ee=v[x];if(Ee!=null)switch(x){case"name":R=Ee;break;case"type":B=Ee;break;case"checked":Z=Ee;break;case"defaultChecked":he=Ee;break;case"value":N=Ee;break;case"defaultValue":V=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,h));break;default:fn(c,h,x,Ee,v,null)}}a_(c,N,V,Z,he,B,R,!1),xm(c);return;case"select":Mt("invalid",c),x=B=N=null;for(R in v)if(v.hasOwnProperty(R)&&(V=v[R],V!=null))switch(R){case"value":N=V;break;case"defaultValue":B=V;break;case"multiple":x=V;default:fn(c,h,R,V,v,null)}h=N,v=B,c.multiple=!!x,h!=null?hc(c,!!x,h,!1):v!=null&&hc(c,!!x,v,!0);return;case"textarea":Mt("invalid",c),N=R=x=null;for(B in v)if(v.hasOwnProperty(B)&&(V=v[B],V!=null))switch(B){case"value":x=V;break;case"defaultValue":R=V;break;case"children":N=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:fn(c,h,B,V,v,null)}s_(c,x,R,N),xm(c);return;case"option":for(Z in v)if(v.hasOwnProperty(Z)&&(x=v[Z],x!=null))switch(Z){case"selected":c.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:fn(c,h,Z,x,v,null)}return;case"dialog":Mt("beforetoggle",c),Mt("toggle",c),Mt("cancel",c),Mt("close",c);break;case"iframe":case"object":Mt("load",c);break;case"video":case"audio":for(x=0;x<vh.length;x++)Mt(vh[x],c);break;case"image":Mt("error",c),Mt("load",c);break;case"details":Mt("toggle",c);break;case"embed":case"source":case"link":Mt("error",c),Mt("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in v)if(v.hasOwnProperty(he)&&(x=v[he],x!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:fn(c,h,he,x,v,null)}return;default:if(cb(h)){for(Ee in v)v.hasOwnProperty(Ee)&&(x=v[Ee],x!==void 0&&Xx(c,h,Ee,x,v,void 0));return}}for(V in v)v.hasOwnProperty(V)&&(x=v[V],x!=null&&fn(c,h,V,x,v,null))}function eU(c,h,v,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,N=null,B=null,V=null,Z=null,he=null,Ee=null;for(ve in v){var Ne=v[ve];if(v.hasOwnProperty(ve)&&Ne!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":Z=Ne;default:x.hasOwnProperty(ve)||fn(c,h,ve,null,x,Ne)}}for(var pe in x){var ve=x[pe];if(Ne=v[pe],x.hasOwnProperty(pe)&&(ve!=null||Ne!=null))switch(pe){case"type":N=ve;break;case"name":R=ve;break;case"checked":he=ve;break;case"defaultChecked":Ee=ve;break;case"value":B=ve;break;case"defaultValue":V=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,h));break;default:ve!==Ne&&fn(c,h,pe,ve,x,Ne)}}ub(c,B,V,Z,he,Ee,N,R);return;case"select":ve=B=V=pe=null;for(N in v)if(Z=v[N],v.hasOwnProperty(N)&&Z!=null)switch(N){case"value":break;case"multiple":ve=Z;default:x.hasOwnProperty(N)||fn(c,h,N,null,x,Z)}for(R in x)if(N=x[R],Z=v[R],x.hasOwnProperty(R)&&(N!=null||Z!=null))switch(R){case"value":pe=N;break;case"defaultValue":V=N;break;case"multiple":B=N;default:N!==Z&&fn(c,h,R,N,x,Z)}h=V,v=B,x=ve,pe!=null?hc(c,!!v,pe,!1):!!x!=!!v&&(h!=null?hc(c,!!v,h,!0):hc(c,!!v,v?[]:"",!1));return;case"textarea":ve=pe=null;for(V in v)if(R=v[V],v.hasOwnProperty(V)&&R!=null&&!x.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:fn(c,h,V,null,x,R)}for(B in x)if(R=x[B],N=v[B],x.hasOwnProperty(B)&&(R!=null||N!=null))switch(B){case"value":pe=R;break;case"defaultValue":ve=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==N&&fn(c,h,B,R,x,N)}i_(c,pe,ve);return;case"option":for(var vt in v)if(pe=v[vt],v.hasOwnProperty(vt)&&pe!=null&&!x.hasOwnProperty(vt))switch(vt){case"selected":c.selected=!1;break;default:fn(c,h,vt,null,x,pe)}for(Z in x)if(pe=x[Z],ve=v[Z],x.hasOwnProperty(Z)&&pe!==ve&&(pe!=null||ve!=null))switch(Z){case"selected":c.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:fn(c,h,Z,pe,x,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in v)pe=v[ht],v.hasOwnProperty(ht)&&pe!=null&&!x.hasOwnProperty(ht)&&fn(c,h,ht,null,x,pe);for(he in x)if(pe=x[he],ve=v[he],x.hasOwnProperty(he)&&pe!==ve&&(pe!=null||ve!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,h));break;default:fn(c,h,he,pe,x,ve)}return;default:if(cb(h)){for(var hn in v)pe=v[hn],v.hasOwnProperty(hn)&&pe!==void 0&&!x.hasOwnProperty(hn)&&Xx(c,h,hn,void 0,x,pe);for(Ee in x)pe=x[Ee],ve=v[Ee],!x.hasOwnProperty(Ee)||pe===ve||pe===void 0&&ve===void 0||Xx(c,h,Ee,pe,x,ve);return}}for(var ue in v)pe=v[ue],v.hasOwnProperty(ue)&&pe!=null&&!x.hasOwnProperty(ue)&&fn(c,h,ue,null,x,pe);for(Ne in x)pe=x[Ne],ve=v[Ne],!x.hasOwnProperty(Ne)||pe===ve||pe==null&&ve==null||fn(c,h,Ne,pe,x,ve)}var Kx=null,Yx=null;function mv(c){return c.nodeType===9?c:c.ownerDocument}function uN(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lN(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function Qx(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Jx=null;function tU(){var c=window.event;return c&&c.type==="popstate"?c===Jx?!1:(Jx=c,!0):(Jx=null,!1)}var cN=typeof setTimeout=="function"?setTimeout:void 0,nU=typeof clearTimeout=="function"?clearTimeout:void 0,dN=typeof Promise=="function"?Promise:void 0,rU=typeof queueMicrotask=="function"?queueMicrotask:typeof dN<"u"?function(c){return dN.resolve(null).then(c).catch(oU)}:cN;function oU(c){setTimeout(function(){throw c})}function ou(c){return c==="head"}function fN(c,h){var v=h,x=0,R=0;do{var N=v.nextSibling;if(c.removeChild(v),N&&N.nodeType===8)if(v=N.data,v==="/$"){if(0<x&&8>x){v=x;var B=c.ownerDocument;if(v&1&&yh(B.documentElement),v&2&&yh(B.body),v&4)for(v=B.head,yh(v),B=v.firstChild;B;){var V=B.nextSibling,Z=B.nodeName;B[Ku]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&B.rel.toLowerCase()==="stylesheet"||v.removeChild(B),B=V}}if(R===0){c.removeChild(N),_h(h);return}R--}else v==="$"||v==="$?"||v==="$!"?R++:x=v.charCodeAt(0)-48;else x=0;v=N}while(v);_h(h)}function Zx(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var v=h;switch(h=h.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":Zx(v),Of(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}c.removeChild(v)}}function aU(c,h,v,x){for(;c.nodeType===1;){var R=v;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!x&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(x){if(!c[Ku])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(N=c.getAttribute("rel"),N==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(N!==R.rel||c.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||c.getAttribute("title")!==(R.title==null?null:R.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(N=c.getAttribute("src"),(N!==(R.src==null?null:R.src)||c.getAttribute("type")!==(R.type==null?null:R.type)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&N&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var N=R.name==null?null:""+R.name;if(R.type==="hidden"&&c.getAttribute("name")===N)return c}else return c;if(c=Ma(c.nextSibling),c===null)break}return null}function iU(c,h,v){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!v||(c=Ma(c.nextSibling),c===null))return null;return c}function e1(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function sU(c,h){var v=c.ownerDocument;if(c.data!=="$?"||v.readyState==="complete")h();else{var x=function(){h(),v.removeEventListener("DOMContentLoaded",x)};v.addEventListener("DOMContentLoaded",x),c._reactRetry=x}}function Ma(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return c}var t1=null;function hN(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var v=c.data;if(v==="$"||v==="$!"||v==="$?"){if(h===0)return c;h--}else v==="/$"&&h++}c=c.previousSibling}return null}function pN(c,h,v){switch(h=mv(v),c){case"html":if(c=h.documentElement,!c)throw Error(r(452));return c;case"head":if(c=h.head,!c)throw Error(r(453));return c;case"body":if(c=h.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function yh(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);Of(c)}var sa=new Map,mN=new Set;function vv(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var rs=U.d;U.d={f:uU,r:lU,D:cU,C:dU,L:fU,m:hU,X:mU,S:pU,M:vU};function uU(){var c=rs.f(),h=sv();return c||h}function lU(c){var h=zs(c);h!==null&&h.tag===5&&h.type==="form"?PT(h):rs.r(c)}var Vc=typeof document>"u"?null:document;function vN(c,h,v){var x=Vc;if(x&&typeof h=="string"&&h){var R=ea(h);R='link[rel="'+c+'"][href="'+R+'"]',typeof v=="string"&&(R+='[crossorigin="'+v+'"]'),mN.has(R)||(mN.add(R),c={rel:c,crossOrigin:v,href:h},x.querySelector(R)===null&&(h=x.createElement("link"),Er(h,"link",c),Fn(h),x.head.appendChild(h)))}}function cU(c){rs.D(c),vN("dns-prefetch",c,null)}function dU(c,h){rs.C(c,h),vN("preconnect",c,h)}function fU(c,h,v){rs.L(c,h,v);var x=Vc;if(x&&c&&h){var R='link[rel="preload"][as="'+ea(h)+'"]';h==="image"&&v&&v.imageSrcSet?(R+='[imagesrcset="'+ea(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(R+='[imagesizes="'+ea(v.imageSizes)+'"]')):R+='[href="'+ea(c)+'"]';var N=R;switch(h){case"style":N=Hc(c);break;case"script":N=Gc(c)}sa.has(N)||(c=d({rel:"preload",href:h==="image"&&v&&v.imageSrcSet?void 0:c,as:h},v),sa.set(N,c),x.querySelector(R)!==null||h==="style"&&x.querySelector(bh(N))||h==="script"&&x.querySelector(xh(N))||(h=x.createElement("link"),Er(h,"link",c),Fn(h),x.head.appendChild(h)))}}function hU(c,h){rs.m(c,h);var v=Vc;if(v&&c){var x=h&&typeof h.as=="string"?h.as:"script",R='link[rel="modulepreload"][as="'+ea(x)+'"][href="'+ea(c)+'"]',N=R;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Gc(c)}if(!sa.has(N)&&(c=d({rel:"modulepreload",href:c},h),sa.set(N,c),v.querySelector(R)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(xh(N)))return}x=v.createElement("link"),Er(x,"link",c),Fn(x),v.head.appendChild(x)}}}function pU(c,h,v){rs.S(c,h,v);var x=Vc;if(x&&c){var R=Xt(x).hoistableStyles,N=Hc(c);h=h||"default";var B=R.get(N);if(!B){var V={loading:0,preload:null};if(B=x.querySelector(bh(N)))V.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":h},v),(v=sa.get(N))&&n1(c,v);var Z=B=x.createElement("link");Fn(Z),Er(Z,"link",c),Z._p=new Promise(function(he,Ee){Z.onload=he,Z.onerror=Ee}),Z.addEventListener("load",function(){V.loading|=1}),Z.addEventListener("error",function(){V.loading|=2}),V.loading|=4,gv(B,h,x)}B={type:"stylesheet",instance:B,count:1,state:V},R.set(N,B)}}}function mU(c,h){rs.X(c,h);var v=Vc;if(v&&c){var x=Xt(v).hoistableScripts,R=Gc(c),N=x.get(R);N||(N=v.querySelector(xh(R)),N||(c=d({src:c,async:!0},h),(h=sa.get(R))&&r1(c,h),N=v.createElement("script"),Fn(N),Er(N,"link",c),v.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},x.set(R,N))}}function vU(c,h){rs.M(c,h);var v=Vc;if(v&&c){var x=Xt(v).hoistableScripts,R=Gc(c),N=x.get(R);N||(N=v.querySelector(xh(R)),N||(c=d({src:c,async:!0,type:"module"},h),(h=sa.get(R))&&r1(c,h),N=v.createElement("script"),Fn(N),Er(N,"link",c),v.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},x.set(R,N))}}function gN(c,h,v,x){var R=(R=se.current)?vv(R):null;if(!R)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(h=Hc(v.href),v=Xt(R).hoistableStyles,x=v.get(h),x||(x={type:"style",instance:null,count:0,state:null},v.set(h,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){c=Hc(v.href);var N=Xt(R).hoistableStyles,B=N.get(c);if(B||(R=R.ownerDocument||R,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(c,B),(N=R.querySelector(bh(c)))&&!N._p&&(B.instance=N,B.state.loading=5),sa.has(c)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},sa.set(c,v),N||gU(R,c,v,B.state))),h&&x===null)throw Error(r(528,""));return B}if(h&&x!==null)throw Error(r(529,""));return null;case"script":return h=v.async,v=v.src,typeof v=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Gc(v),v=Xt(R).hoistableScripts,x=v.get(h),x||(x={type:"script",instance:null,count:0,state:null},v.set(h,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Hc(c){return'href="'+ea(c)+'"'}function bh(c){return'link[rel="stylesheet"]['+c+"]"}function yN(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function gU(c,h,v,x){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?x.loading=1:(h=c.createElement("link"),x.preload=h,h.addEventListener("load",function(){return x.loading|=1}),h.addEventListener("error",function(){return x.loading|=2}),Er(h,"link",v),Fn(h),c.head.appendChild(h))}function Gc(c){return'[src="'+ea(c)+'"]'}function xh(c){return"script[async]"+c}function bN(c,h,v){if(h.count++,h.instance===null)switch(h.type){case"style":var x=c.querySelector('style[data-href~="'+ea(v.href)+'"]');if(x)return h.instance=x,Fn(x),x;var R=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return x=(c.ownerDocument||c).createElement("style"),Fn(x),Er(x,"style",R),gv(x,v.precedence,c),h.instance=x;case"stylesheet":R=Hc(v.href);var N=c.querySelector(bh(R));if(N)return h.state.loading|=4,h.instance=N,Fn(N),N;x=yN(v),(R=sa.get(R))&&n1(x,R),N=(c.ownerDocument||c).createElement("link"),Fn(N);var B=N;return B._p=new Promise(function(V,Z){B.onload=V,B.onerror=Z}),Er(N,"link",x),h.state.loading|=4,gv(N,v.precedence,c),h.instance=N;case"script":return N=Gc(v.src),(R=c.querySelector(xh(N)))?(h.instance=R,Fn(R),R):(x=v,(R=sa.get(N))&&(x=d({},v),r1(x,R)),c=c.ownerDocument||c,R=c.createElement("script"),Fn(R),Er(R,"link",x),c.head.appendChild(R),h.instance=R);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(x=h.instance,h.state.loading|=4,gv(x,v.precedence,c));return h.instance}function gv(c,h,v){for(var x=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=x.length?x[x.length-1]:null,N=R,B=0;B<x.length;B++){var V=x[B];if(V.dataset.precedence===h)N=V;else if(N!==R)break}N?N.parentNode.insertBefore(c,N.nextSibling):(h=v.nodeType===9?v.head:v,h.insertBefore(c,h.firstChild))}function n1(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function r1(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var yv=null;function xN(c,h,v){if(yv===null){var x=new Map,R=yv=new Map;R.set(v,x)}else R=yv,x=R.get(v),x||(x=new Map,R.set(v,x));if(x.has(c))return x;for(x.set(c,null),v=v.getElementsByTagName(c),R=0;R<v.length;R++){var N=v[R];if(!(N[Ku]||N[Pn]||c==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var B=N.getAttribute(h)||"";B=c+B;var V=x.get(B);V?V.push(N):x.set(B,[N])}}return x}function wN(c,h,v){c=c.ownerDocument||c,c.head.insertBefore(v,h==="title"?c.querySelector("head > title"):null)}function yU(c,h,v){if(v===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return c=h.disabled,typeof h.precedence=="string"&&c==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function CN(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var wh=null;function bU(){}function xU(c,h,v){if(wh===null)throw Error(r(475));var x=wh;if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var R=Hc(v.href),N=c.querySelector(bh(R));if(N){c=N._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(x.count++,x=bv.bind(x),c.then(x,x)),h.state.loading|=4,h.instance=N,Fn(N);return}N=c.ownerDocument||c,v=yN(v),(R=sa.get(R))&&n1(v,R),N=N.createElement("link"),Fn(N);var B=N;B._p=new Promise(function(V,Z){B.onload=V,B.onerror=Z}),Er(N,"link",v),h.instance=N}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(x.count++,h=bv.bind(x),c.addEventListener("load",h),c.addEventListener("error",h))}}function wU(){if(wh===null)throw Error(r(475));var c=wh;return c.stylesheets&&c.count===0&&o1(c,c.stylesheets),0<c.count?function(h){var v=setTimeout(function(){if(c.stylesheets&&o1(c,c.stylesheets),c.unsuspend){var x=c.unsuspend;c.unsuspend=null,x()}},6e4);return c.unsuspend=h,function(){c.unsuspend=null,clearTimeout(v)}}:null}function bv(){if(this.count--,this.count===0){if(this.stylesheets)o1(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var xv=null;function o1(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,xv=new Map,h.forEach(CU,c),xv=null,bv.call(c))}function CU(c,h){if(!(h.state.loading&4)){var v=xv.get(c);if(v)var x=v.get(null);else{v=new Map,xv.set(c,v);for(var R=c.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<R.length;N++){var B=R[N];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(v.set(B.dataset.precedence,B),x=B)}x&&v.set(null,x)}R=h.instance,B=R.getAttribute("data-precedence"),N=v.get(B)||x,N===x&&v.set(null,R),v.set(B,R),this.count++,x=bv.bind(this),R.addEventListener("load",x),R.addEventListener("error",x),N?N.parentNode.insertBefore(R,N.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(R,c.firstChild)),h.state.loading|=4}}var Ch={$$typeof:E,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function SU(c,h,v,x,R,N,B,V){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=x,this.onUncaughtError=R,this.onCaughtError=N,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function SN(c,h,v,x,R,N,B,V,Z,he,Ee,Ne){return c=new SU(c,h,v,B,V,Z,he,Ne),h=1,N===!0&&(h|=24),N=Ro(3,null,null,h),c.current=N,N.stateNode=c,h=jb(),h.refCount++,c.pooledCache=h,h.refCount++,N.memoizedState={element:x,isDehydrated:v,cache:h},Vb(N),c}function EN(c){return c?(c=Cc,c):Cc}function RN(c,h,v,x,R,N){R=EN(R),x.context===null?x.context=R:x.pendingContext=R,x=Gs(h),x.payload={element:v},N=N===void 0?null:N,N!==null&&(x.callback=N),v=$s(c,x,h),v!==null&&(Do(v,c,h),Jf(v,c,h))}function _N(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<h?v:h}}function a1(c,h){_N(c,h),(c=c.alternate)&&_N(c,h)}function TN(c){if(c.tag===13){var h=wc(c,67108864);h!==null&&Do(h,c,67108864),a1(c,67108864)}}var wv=!0;function EU(c,h,v,x){var R=P.T;P.T=null;var N=U.p;try{U.p=2,i1(c,h,v,x)}finally{U.p=N,P.T=R}}function RU(c,h,v,x){var R=P.T;P.T=null;var N=U.p;try{U.p=8,i1(c,h,v,x)}finally{U.p=N,P.T=R}}function i1(c,h,v,x){if(wv){var R=s1(x);if(R===null)qx(c,h,x,Cv,v),NN(c,x);else if(TU(R,c,h,v,x))x.stopPropagation();else if(NN(c,x),h&4&&-1<_U.indexOf(c)){for(;R!==null;){var N=zs(R);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var B=nr(N.pendingLanes);if(B!==0){var V=N;for(V.pendingLanes|=2,V.entangledLanes|=2;B;){var Z=1<<31-Pt(B);V.entanglements[1]|=Z,B&=~Z}ai(N),(ln&6)===0&&(av=Ie()+500,mh(0))}}break;case 13:V=wc(N,2),V!==null&&Do(V,N,2),sv(),a1(N,2)}if(N=s1(x),N===null&&qx(c,h,x,Cv,v),N===R)break;R=N}R!==null&&x.stopPropagation()}else qx(c,h,x,null,v)}}function s1(c){return c=fb(c),u1(c)}var Cv=null;function u1(c){if(Cv=null,c=Wi(c),c!==null){var h=a(c);if(h===null)c=null;else{var v=h.tag;if(v===13){if(c=i(h),c!==null)return c;c=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return Cv=c,null}function AN(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case Fe:return 2;case Ke:return 8;case ct:case qe:return 32;case Xe:return 268435456;default:return 32}default:return 32}}var l1=!1,au=null,iu=null,su=null,Sh=new Map,Eh=new Map,uu=[],_U="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NN(c,h){switch(c){case"focusin":case"focusout":au=null;break;case"dragenter":case"dragleave":iu=null;break;case"mouseover":case"mouseout":su=null;break;case"pointerover":case"pointerout":Sh.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eh.delete(h.pointerId)}}function Rh(c,h,v,x,R,N){return c===null||c.nativeEvent!==N?(c={blockedOn:h,domEventName:v,eventSystemFlags:x,nativeEvent:N,targetContainers:[R]},h!==null&&(h=zs(h),h!==null&&TN(h)),c):(c.eventSystemFlags|=x,h=c.targetContainers,R!==null&&h.indexOf(R)===-1&&h.push(R),c)}function TU(c,h,v,x,R){switch(h){case"focusin":return au=Rh(au,c,h,v,x,R),!0;case"dragenter":return iu=Rh(iu,c,h,v,x,R),!0;case"mouseover":return su=Rh(su,c,h,v,x,R),!0;case"pointerover":var N=R.pointerId;return Sh.set(N,Rh(Sh.get(N)||null,c,h,v,x,R)),!0;case"gotpointercapture":return N=R.pointerId,Eh.set(N,Rh(Eh.get(N)||null,c,h,v,x,R)),!0}return!1}function DN(c){var h=Wi(c.target);if(h!==null){var v=a(h);if(v!==null){if(h=v.tag,h===13){if(h=i(v),h!==null){c.blockedOn=h,kf(c.priority,function(){if(v.tag===13){var x=No();x=Ui(x);var R=wc(v,x);R!==null&&Do(R,v,x),a1(v,x)}});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){c.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Sv(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var v=s1(c.nativeEvent);if(v===null){v=c.nativeEvent;var x=new v.constructor(v.type,v);db=x,v.target.dispatchEvent(x),db=null}else return h=zs(v),h!==null&&TN(h),c.blockedOn=v,!1;h.shift()}return!0}function kN(c,h,v){Sv(c)&&v.delete(h)}function AU(){l1=!1,au!==null&&Sv(au)&&(au=null),iu!==null&&Sv(iu)&&(iu=null),su!==null&&Sv(su)&&(su=null),Sh.forEach(kN),Eh.forEach(kN)}function Ev(c,h){c.blockedOn===h&&(c.blockedOn=null,l1||(l1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,AU)))}var Rv=null;function IN(c){Rv!==c&&(Rv=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Rv===c&&(Rv=null);for(var h=0;h<c.length;h+=3){var v=c[h],x=c[h+1],R=c[h+2];if(typeof x!="function"){if(u1(x||v)===null)continue;break}var N=zs(v);N!==null&&(c.splice(h,3),h-=3,ux(N,{pending:!0,data:R,method:v.method,action:x},x,R))}}))}function _h(c){function h(Z){return Ev(Z,c)}au!==null&&Ev(au,c),iu!==null&&Ev(iu,c),su!==null&&Ev(su,c),Sh.forEach(h),Eh.forEach(h);for(var v=0;v<uu.length;v++){var x=uu[v];x.blockedOn===c&&(x.blockedOn=null)}for(;0<uu.length&&(v=uu[0],v.blockedOn===null);)DN(v),v.blockedOn===null&&uu.shift();if(v=(c.ownerDocument||c).$$reactFormReplay,v!=null)for(x=0;x<v.length;x+=3){var R=v[x],N=v[x+1],B=R[rr]||null;if(typeof N=="function")B||IN(v);else if(B){var V=null;if(N&&N.hasAttribute("formAction")){if(R=N,B=N[rr]||null)V=B.formAction;else if(u1(R)!==null)continue}else V=B.action;typeof V=="function"?v[x+1]=V:(v.splice(x,3),x-=3),IN(v)}}}function c1(c){this._internalRoot=c}_v.prototype.render=c1.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));var v=h.current,x=No();RN(v,x,c,h,null,null)},_v.prototype.unmount=c1.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;RN(c.current,2,null,c,null,null),sv(),h[Ls]=null}};function _v(c){this._internalRoot=c}_v.prototype.unstable_scheduleHydration=function(c){if(c){var h=ei();c={blockedOn:null,target:c,priority:h};for(var v=0;v<uu.length&&h!==0&&h<uu[v].priority;v++);uu.splice(v,0,c),v===0&&DN(c)}};var MN=e.version;if(MN!=="19.1.1")throw Error(r(527,MN,"19.1.1"));U.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=u(h),c=c!==null?l(c):null,c=c===null?null:c.stateNode,c};var NU={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tv.isDisabled&&Tv.supportsFiber)try{He=Tv.inject(NU),it=Tv}catch{}}return Ah.createRoot=function(c,h){if(!o(c))throw Error(r(299));var v=!1,x="",R=KT,N=YT,B=QT,V=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(R=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(B=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(V=h.unstable_transitionCallbacks)),h=SN(c,1,!1,null,null,v,x,R,N,B,V,null),c[Ls]=h.current,$x(c),new c1(h)},Ah.hydrateRoot=function(c,h,v){if(!o(c))throw Error(r(299));var x=!1,R="",N=KT,B=YT,V=QT,Z=null,he=null;return v!=null&&(v.unstable_strictMode===!0&&(x=!0),v.identifierPrefix!==void 0&&(R=v.identifierPrefix),v.onUncaughtError!==void 0&&(N=v.onUncaughtError),v.onCaughtError!==void 0&&(B=v.onCaughtError),v.onRecoverableError!==void 0&&(V=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(Z=v.unstable_transitionCallbacks),v.formState!==void 0&&(he=v.formState)),h=SN(c,1,!0,h,v??null,x,R,N,B,V,Z,he),h.context=EN(null),v=h.current,x=No(),x=Ui(x),R=Gs(x),R.callback=null,$s(v,R,x),v=x,h.current.lanes=v,Bt(h,v),ai(h),c[Ls]=h.current,$x(c),new _v(h)},Ah.version="19.1.1",Ah}var VN;function UU(){if(VN)return h1.exports;VN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),h1.exports=zU(),h1.exports}var WU=UU();const VU=tf(WU);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var HN="popstate";function HU(t={}){function e(r,o){let{pathname:a,search:i,hash:s}=r.location;return qw("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:tp(o)}return $U(e,n,null,t)}function In(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Va(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GU(){return Math.random().toString(36).substring(2,10)}function GN(t,e){return{usr:t.state,key:t.key,idx:e}}function qw(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?nf(e):e,state:n,key:e&&e.key||r||GU()}}function tp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function nf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function $U(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s="POP",u=null,l=d();l==null&&(l=0,i.replaceState({...i.state,idx:l},""));function d(){return(i.state||{idx:null}).idx}function f(){s="POP";let b=d(),C=b==null?null:b-l;l=b,u&&u({action:s,location:y.location,delta:C})}function p(b,C){s="PUSH";let S=qw(y.location,b,C);l=d()+1;let E=GN(S,l),_=y.createHref(S);try{i.pushState(E,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;o.location.assign(_)}a&&u&&u({action:s,location:y.location,delta:1})}function m(b,C){s="REPLACE";let S=qw(y.location,b,C);l=d();let E=GN(S,l),_=y.createHref(S);i.replaceState(E,"",_),a&&u&&u({action:s,location:y.location,delta:0})}function g(b){return qU(b)}let y={get action(){return s},get location(){return t(o,i)},listen(b){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(HN,f),u=b,()=>{o.removeEventListener(HN,f),u=null}},createHref(b){return e(o,b)},createURL:g,encodeLocation(b){let C=g(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:m,go(b){return i.go(b)}};return y}function qU(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),In(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:tp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function rO(t,e,n="/"){return XU(t,e,n,!1)}function XU(t,e,n,r){let o=typeof e=="string"?nf(e):e,a=bs(o.pathname||"/",n);if(a==null)return null;let i=oO(t);KU(i);let s=null;for(let u=0;s==null&&u<i.length;++u){let l=iW(a);s=oW(i[u],l,r)}return s}function oO(t,e=[],n=[],r="",o=!1){let a=(i,s,u=o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&u)return;In(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=ms([r,d.relativePath]),p=n.concat(d);i.children&&i.children.length>0&&(In(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),oO(i.children,e,p,f,u)),!(i.path==null&&!i.index)&&e.push({path:f,score:nW(f,i.index),routesMeta:p})};return t.forEach((i,s)=>{if(i.path===""||!i.path?.includes("?"))a(i,s);else for(let u of aO(i.path))a(i,s,!0,u)}),e}function aO(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=aO(r.join("/")),s=[];return s.push(...i.map(u=>u===""?a:[a,u].join("/"))),o&&s.push(...i),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function KU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rW(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var YU=/^:[\w-]+$/,QU=3,JU=2,ZU=1,eW=10,tW=-2,$N=t=>t==="*";function nW(t,e){let n=t.split("/"),r=n.length;return n.some($N)&&(r+=tW),e&&(r+=JU),n.filter(o=>!$N(o)).reduce((o,a)=>o+(YU.test(a)?QU:a===""?ZU:eW),r)}function rW(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function oW(t,e,n=!1){let{routesMeta:r}=t,o={},a="/",i=[];for(let s=0;s<r.length;++s){let u=r[s],l=s===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=Ng({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},d),p=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=Ng({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!f)return null;Object.assign(o,f.params),i.push({params:o,pathname:ms([a,f.pathname]),pathnameBase:cW(ms([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=ms([a,f.pathnameBase]))}return i}function Ng(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aW(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((l,{paramName:d,isOptional:f},p)=>{if(d==="*"){let g=s[p]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const m=s[p];return f&&!m?l[d]=void 0:l[d]=(m||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:i,pattern:t}}function aW(t,e=!1,n=!0){Va(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function iW(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Va(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function bs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sW(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?nf(t):t;return{pathname:n?n.startsWith("/")?n:uW(n,e):e,search:dW(r),hash:fW(o)}}function uW(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function g1(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lW(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iO(t){let e=lW(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function sO(t,e,n,r=!1){let o;typeof t=="string"?o=nf(t):(o={...t},In(!o.pathname||!o.pathname.includes("?"),g1("?","pathname","search",o)),In(!o.pathname||!o.pathname.includes("#"),g1("#","pathname","hash",o)),In(!o.search||!o.search.includes("#"),g1("#","search","hash",o)));let a=t===""||o.pathname==="",i=a?"/":o.pathname,s;if(i==null)s=n;else{let f=e.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),f-=1;o.pathname=p.join("/")}s=f>=0?e[f]:"/"}let u=sW(o,s),l=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||d)&&(u.pathname+="/"),u}var ms=t=>t.join("/").replace(/\/\/+/g,"/"),cW=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dW=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fW=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function hW(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var uO=["POST","PUT","PATCH","DELETE"];new Set(uO);var pW=["GET",...uO];new Set(pW);var rf=A.createContext(null);rf.displayName="DataRouter";var My=A.createContext(null);My.displayName="DataRouterState";A.createContext(!1);var lO=A.createContext({isTransitioning:!1});lO.displayName="ViewTransition";var mW=A.createContext(new Map);mW.displayName="Fetchers";var vW=A.createContext(null);vW.displayName="Await";var Di=A.createContext(null);Di.displayName="Navigation";var Np=A.createContext(null);Np.displayName="Location";var ki=A.createContext({outlet:null,matches:[],isDataRoute:!1});ki.displayName="Route";var RC=A.createContext(null);RC.displayName="RouteError";function gW(t,{relative:e}={}){In(Dp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Di),{hash:o,pathname:a,search:i}=kp(t,{relative:e}),s=a;return n!=="/"&&(s=a==="/"?n:ms([n,a])),r.createHref({pathname:s,search:i,hash:o})}function Dp(){return A.useContext(Np)!=null}function Xa(){return In(Dp(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Np).location}var cO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dO(t){A.useContext(Di).static||A.useLayoutEffect(t)}function Gr(){let{isDataRoute:t}=A.useContext(ki);return t?DW():yW()}function yW(){In(Dp(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(rf),{basename:e,navigator:n}=A.useContext(Di),{matches:r}=A.useContext(ki),{pathname:o}=Xa(),a=JSON.stringify(iO(r)),i=A.useRef(!1);return dO(()=>{i.current=!0}),A.useCallback((u,l={})=>{if(Va(i.current,cO),!i.current)return;if(typeof u=="number"){n.go(u);return}let d=sO(u,JSON.parse(a),o,l.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ms([e,d.pathname])),(l.replace?n.replace:n.push)(d,l.state,l)},[e,n,a,o,t])}A.createContext(null);function _C(){let{matches:t}=A.useContext(ki),e=t[t.length-1];return e?e.params:{}}function kp(t,{relative:e}={}){let{matches:n}=A.useContext(ki),{pathname:r}=Xa(),o=JSON.stringify(iO(n));return A.useMemo(()=>sO(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function bW(t,e){return fO(t,e)}function fO(t,e,n,r,o){In(Dp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Di),{matches:i}=A.useContext(ki),s=i[i.length-1],u=s?s.params:{},l=s?s.pathname:"/",d=s?s.pathnameBase:"/",f=s&&s.route;{let S=f&&f.path||"";hO(l,!f||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=Xa(),m;if(e){let S=typeof e=="string"?nf(e):e;In(d==="/"||S.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${S.pathname}" was given in the \`location\` prop.`),m=S}else m=p;let g=m.pathname||"/",y=g;if(d!=="/"){let S=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=rO(t,{pathname:y});Va(f||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Va(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=EW(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:ms([d,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:ms([d,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r,o);return e&&C?A.createElement(Np.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},C):C}function xW(){let t=NW(),e=hW(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:o},n):null,i)}var wW=A.createElement(xW,null),CW=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(ki.Provider,{value:this.props.routeContext},A.createElement(RC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function SW({routeContext:t,match:e,children:n}){let r=A.useContext(rf);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(ki.Provider,{value:t},n)}function EW(t,e=[],n=null,r=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,i=n?.errors;if(i!=null){let l=a.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);In(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,l+1))}let s=!1,u=-1;if(n)for(let l=0;l<a.length;l++){let d=a[l];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=l),d.route.id){let{loaderData:f,errors:p}=n,m=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){s=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((l,d,f)=>{let p,m=!1,g=null,y=null;n&&(p=i&&d.route.id?i[d.route.id]:void 0,g=d.route.errorElement||wW,s&&(u<0&&f===0?(hO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):u===f&&(m=!0,y=d.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,f+1)),C=()=>{let S;return p?S=g:m?S=y:d.route.Component?S=A.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=l,A.createElement(SW,{match:d,routeContext:{outlet:l,matches:b,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?A.createElement(CW,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:C(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:r}):C()},null)}function TC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RW(t){let e=A.useContext(rf);return In(e,TC(t)),e}function _W(t){let e=A.useContext(My);return In(e,TC(t)),e}function TW(t){let e=A.useContext(ki);return In(e,TC(t)),e}function AC(t){let e=TW(t),n=e.matches[e.matches.length-1];return In(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function AW(){return AC("useRouteId")}function NW(){let t=A.useContext(RC),e=_W("useRouteError"),n=AC("useRouteError");return t!==void 0?t:e.errors?.[n]}function DW(){let{router:t}=RW("useNavigate"),e=AC("useNavigate"),n=A.useRef(!1);return dO(()=>{n.current=!0}),A.useCallback(async(o,a={})=>{Va(n.current,cO),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var qN={};function hO(t,e,n){!e&&!qN[t]&&(qN[t]=!0,Va(!1,n))}A.memo(kW);function kW({routes:t,future:e,state:n,unstable_onError:r}){return fO(t,void 0,n,r,e)}function Dn(t){In(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IW({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){In(!Dp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),s=A.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=nf(n));let{pathname:u="/",search:l="",hash:d="",state:f=null,key:p="default"}=n,m=A.useMemo(()=>{let g=bs(u,i);return g==null?null:{location:{pathname:g,search:l,hash:d,state:f,key:p},navigationType:r}},[i,u,l,d,f,p,r]);return Va(m!=null,`<Router basename="${i}"> is not able to match the URL "${u}${l}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:A.createElement(Di.Provider,{value:s},A.createElement(Np.Provider,{children:e,value:m}))}function MW({children:t,location:e}){return bW(Xw(t),e)}function Xw(t,e=[]){let n=[];return A.Children.forEach(t,(r,o)=>{if(!A.isValidElement(r))return;let a=[...e,o];if(r.type===A.Fragment){n.push.apply(n,Xw(r.props.children,a));return}In(r.type===Dn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),In(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Xw(r.props.children,a)),n.push(i)}),n}var hg="get",pg="application/x-www-form-urlencoded";function Oy(t){return t!=null&&typeof t.tagName=="string"}function OW(t){return Oy(t)&&t.tagName.toLowerCase()==="button"}function PW(t){return Oy(t)&&t.tagName.toLowerCase()==="form"}function FW(t){return Oy(t)&&t.tagName.toLowerCase()==="input"}function BW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LW(t,e){return t.button===0&&(!e||e==="_self")&&!BW(t)}function Kw(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function jW(t,e){let n=Kw(t);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(a=>{n.append(o,a)})}),n}var Nv=null;function zW(){if(Nv===null)try{new FormData(document.createElement("form"),0),Nv=!1}catch{Nv=!0}return Nv}var UW=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function y1(t){return t!=null&&!UW.has(t)?(Va(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pg}"`),null):t}function WW(t,e){let n,r,o,a,i;if(PW(t)){let s=t.getAttribute("action");r=s?bs(s,e):null,n=t.getAttribute("method")||hg,o=y1(t.getAttribute("enctype"))||pg,a=new FormData(t)}else if(OW(t)||FW(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||s.getAttribute("action");if(r=u?bs(u,e):null,n=t.getAttribute("formmethod")||s.getAttribute("method")||hg,o=y1(t.getAttribute("formenctype"))||y1(s.getAttribute("enctype"))||pg,a=new FormData(s,t),!zW()){let{name:l,type:d,value:f}=t;if(d==="image"){let p=l?`${l}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else l&&a.append(l,f)}}else{if(Oy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hg,r=null,o=pg,i=t}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function NC(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function VW(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&bs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function HW(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GW(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function $W(t,e,n){let r=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let i=await HW(a,n);return i.links?i.links():[]}return[]}));return YW(r.flat(1).filter(GW).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function XN(t,e,n,r,o,a){let i=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,s=(u,l)=>n[l].pathname!==u.pathname||n[l].route.path?.endsWith("*")&&n[l].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,l)=>i(u,l)||s(u,l)):a==="data"?e.filter((u,l)=>{let d=r.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(i(u,l)||s(u,l))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function qW(t,e,{includeHydrateFallback:n}={}){return XW(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function XW(t){return[...new Set(t)]}function KW(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function YW(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let a=JSON.stringify(KW(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function pO(){let t=A.useContext(rf);return NC(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function QW(){let t=A.useContext(My);return NC(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var DC=A.createContext(void 0);DC.displayName="FrameworkContext";function mO(){let t=A.useContext(DC);return NC(t,"You must render this element inside a <HydratedRouter> element"),t}function JW(t,e){let n=A.useContext(DC),[r,o]=A.useState(!1),[a,i]=A.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:l,onMouseLeave:d,onTouchStart:f}=e,p=A.useRef(null);A.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let y=C=>{C.forEach(S=>{i(S.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),A.useEffect(()=>{if(r){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[r]);let m=()=>{o(!0)},g=()=>{o(!1),i(!1)};return n?t!=="intent"?[a,p,{}]:[a,p,{onFocus:Nh(s,m),onBlur:Nh(u,g),onMouseEnter:Nh(l,m),onMouseLeave:Nh(d,g),onTouchStart:Nh(f,m)}]:[!1,p,{}]}function Nh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function ZW({page:t,...e}){let{router:n}=pO(),r=A.useMemo(()=>rO(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(tV,{page:t,matches:r,...e}):null}function eV(t){let{manifest:e,routeModules:n}=mO(),[r,o]=A.useState([]);return A.useEffect(()=>{let a=!1;return $W(t,e,n).then(i=>{a||o(i)}),()=>{a=!0}},[t,e,n]),r}function tV({page:t,matches:e,...n}){let r=Xa(),{manifest:o,routeModules:a}=mO(),{basename:i}=pO(),{loaderData:s,matches:u}=QW(),l=A.useMemo(()=>XN(t,e,u,o,r,"data"),[t,e,u,o,r]),d=A.useMemo(()=>XN(t,e,u,o,r,"assets"),[t,e,u,o,r]),f=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,y=!1;if(e.forEach(C=>{let S=o.routes[C.route.id];!S||!S.hasLoader||(!l.some(E=>E.route.id===C.route.id)&&C.route.id in s&&a[C.route.id]?.shouldRevalidate||S.hasClientLoader?y=!0:g.add(C.route.id))}),g.size===0)return[];let b=VW(t,i,"data");return y&&g.size>0&&b.searchParams.set("_routes",e.filter(C=>g.has(C.route.id)).map(C=>C.route.id).join(",")),[b.pathname+b.search]},[i,s,r,o,l,e,t,a]),p=A.useMemo(()=>qW(d,o),[d,o]),m=eV(d);return A.createElement(A.Fragment,null,f.map(g=>A.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),p.map(g=>A.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),m.map(({key:g,link:y})=>A.createElement("link",{key:g,nonce:n.nonce,...y})))}function nV(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var vO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vO&&(window.__reactRouterVersion="7.8.2")}catch{}function rV({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=HU({window:n,v5Compat:!0}));let o=r.current,[a,i]=A.useState({action:o.action,location:o.location}),s=A.useCallback(u=>{A.startTransition(()=>i(u))},[i]);return A.useLayoutEffect(()=>o.listen(s),[o,s]),A.createElement(IW,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o})}var gO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ca=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:a,replace:i,state:s,target:u,to:l,preventScrollReset:d,viewTransition:f,...p},m){let{basename:g}=A.useContext(Di),y=typeof l=="string"&&gO.test(l),b,C=!1;if(typeof l=="string"&&y&&(b=l,vO))try{let M=new URL(window.location.href),O=l.startsWith("//")?new URL(M.protocol+l):new URL(l),F=bs(O.pathname,g);O.origin===M.origin&&F!=null?l=F+O.search+O.hash:C=!0}catch{Va(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=gW(l,{relative:o}),[E,_,T]=JW(r,p),D=sV(l,{replace:i,state:s,target:u,preventScrollReset:d,relative:o,viewTransition:f});function I(M){e&&e(M),M.defaultPrevented||D(M)}let k=A.createElement("a",{...p,...T,href:b||S,onClick:C||a?e:I,ref:nV(m,_),target:u,"data-discover":!y&&n==="render"?"true":void 0});return E&&!y?A.createElement(A.Fragment,null,k,A.createElement(ZW,{page:S})):k});ca.displayName="Link";var oV=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:a,to:i,viewTransition:s,children:u,...l},d){let f=kp(i,{relative:l.relative}),p=Xa(),m=A.useContext(My),{navigator:g,basename:y}=A.useContext(Di),b=m!=null&&hV(f)&&s===!0,C=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,S=p.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(S=S.toLowerCase(),E=E?E.toLowerCase():null,C=C.toLowerCase()),E&&y&&(E=bs(E,y)||E);const _=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let T=S===C||!o&&S.startsWith(C)&&S.charAt(_)==="/",D=E!=null&&(E===C||!o&&E.startsWith(C)&&E.charAt(C.length)==="/"),I={isActive:T,isPending:D,isTransitioning:b},k=T?e:void 0,M;typeof r=="function"?M=r(I):M=[r,T?"active":null,D?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(I):a;return A.createElement(ca,{...l,"aria-current":k,className:M,ref:d,style:O,to:i,viewTransition:s},typeof u=="function"?u(I):u)});oV.displayName="NavLink";var aV=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:a,method:i=hg,action:s,onSubmit:u,relative:l,preventScrollReset:d,viewTransition:f,...p},m)=>{let g=dV(),y=fV(s,{relative:l}),b=i.toLowerCase()==="get"?"get":"post",C=typeof s=="string"&&gO.test(s),S=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let _=E.nativeEvent.submitter,T=_?.getAttribute("formmethod")||i;g(_||E.currentTarget,{fetcherKey:e,method:T,navigate:n,replace:o,state:a,relative:l,preventScrollReset:d,viewTransition:f})};return A.createElement("form",{ref:m,method:b,action:y,onSubmit:r?u:S,...p,"data-discover":!C&&t==="render"?"true":void 0})});aV.displayName="Form";function iV(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yO(t){let e=A.useContext(rf);return In(e,iV(t)),e}function sV(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let s=Gr(),u=Xa(),l=kp(t,{relative:a});return A.useCallback(d=>{if(LW(d,e)){d.preventDefault();let f=n!==void 0?n:tp(u)===tp(l);s(t,{replace:f,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[u,s,l,n,r,e,t,o,a,i])}function uV(t){Va(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(Kw(t)),n=A.useRef(!1),r=Xa(),o=A.useMemo(()=>jW(r.search,n.current?null:e.current),[r.search]),a=Gr(),i=A.useCallback((s,u)=>{const l=Kw(typeof s=="function"?s(new URLSearchParams(o)):s);n.current=!0,a("?"+l,u)},[a,o]);return[o,i]}var lV=0,cV=()=>`__${String(++lV)}__`;function dV(){let{router:t}=yO("useSubmit"),{basename:e}=A.useContext(Di),n=AW();return A.useCallback(async(r,o={})=>{let{action:a,method:i,encType:s,formData:u,body:l}=WW(r,e);if(o.navigate===!1){let d=o.fetcherKey||cV();await t.fetch(d,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:u,body:l,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:u,body:l,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function fV(t,{relative:e}={}){let{basename:n}=A.useContext(Di),r=A.useContext(ki);In(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...kp(t||".",{relative:e})},i=Xa();if(t==null){a.search=i.search;let s=new URLSearchParams(a.search),u=s.getAll("index");if(u.some(d=>d==="")){s.delete("index"),u.filter(f=>f).forEach(f=>s.append("index",f));let d=s.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ms([n,a.pathname])),tp(a)}function hV(t,{relative:e}={}){let n=A.useContext(lO);In(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yO("useViewTransitionState"),o=kp(t,{relative:e});if(!n.isTransitioning)return!1;let a=bs(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=bs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ng(o.pathname,i)!=null||Ng(o.pathname,a)!=null}var of=nO();const fd=tf(of);var mi=function(){return mi=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mi.apply(this,arguments)};function bO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function pV(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var mg="right-scroll-bar-position",vg="width-before-scroll-bar",mV="with-scroll-bars-hidden",vV="--removed-body-scroll-bar-size";function b1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function gV(t,e){var n=A.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var yV=typeof window<"u"?A.useLayoutEffect:A.useEffect,KN=new WeakMap;function bV(t,e){var n=gV(null,function(r){return t.forEach(function(o){return b1(o,r)})});return yV(function(){var r=KN.get(n);if(r){var o=new Set(r),a=new Set(t),i=n.current;o.forEach(function(s){a.has(s)||b1(s,null)}),a.forEach(function(s){o.has(s)||b1(s,i)})}KN.set(n,t)},[t]),n}function xV(t){return t}function wV(t,e){e===void 0&&(e=xV);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var i=e(a,r);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(s){return a(s)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(a),i=n}var u=function(){var d=i;i=[],d.forEach(a)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(d){i.push(d),l()},filter:function(d){return i=i.filter(d),n}}}};return o}function CV(t){t===void 0&&(t={});var e=wV(null);return e.options=mi({async:!0,ssr:!1},t),e}var xO=function(t){var e=t.sideCar,n=bO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,mi({},n))};xO.isSideCarExport=!0;function SV(t,e){return t.useMedium(e),xO}var wO=CV(),x1=function(){},Py=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:x1,onWheelCapture:x1,onTouchMoveCapture:x1}),o=r[0],a=r[1],i=t.forwardProps,s=t.children,u=t.className,l=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,m=t.noRelative,g=t.noIsolation,y=t.inert,b=t.allowPinchZoom,C=t.as,S=C===void 0?"div":C,E=t.gapMode,_=bO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=p,D=bV([n,e]),I=mi(mi({},_),o);return A.createElement(A.Fragment,null,d&&A.createElement(T,{sideCar:wO,removeScrollBar:l,shards:f,noRelative:m,noIsolation:g,inert:y,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:E}),i?A.cloneElement(A.Children.only(s),mi(mi({},I),{ref:D})):A.createElement(S,mi({},I,{className:u,ref:D}),s))});Py.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Py.classNames={fullWidth:vg,zeroRight:mg};var EV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=EV();return e&&t.setAttribute("nonce",e),t}function _V(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function TV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var AV=function(){var t=0,e=null;return{add:function(n){t==0&&(e=RV())&&(_V(e,n),TV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},NV=function(){var t=AV();return function(e,n){A.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},CO=function(){var t=NV(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},DV={left:0,top:0,right:0,gap:0},w1=function(t){return parseInt(t||"",10)||0},kV=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[w1(n),w1(r),w1(o)]},IV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return DV;var e=kV(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},MV=CO(),yd="data-scroll-locked",OV=function(t,e,n,r){var o=t.left,a=t.top,i=t.right,s=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(mV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(yd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mg,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(vg,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(mg," .").concat(mg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(vg," .").concat(vg,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(yd,`] {
    `).concat(vV,": ").concat(s,`px;
  }
`)},YN=function(){var t=parseInt(document.body.getAttribute(yd)||"0",10);return isFinite(t)?t:0},PV=function(){A.useEffect(function(){return document.body.setAttribute(yd,(YN()+1).toString()),function(){var t=YN()-1;t<=0?document.body.removeAttribute(yd):document.body.setAttribute(yd,t.toString())}},[])},FV=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;PV();var a=A.useMemo(function(){return IV(o)},[o]);return A.createElement(MV,{styles:OV(a,!e,o,n?"":"!important")})},Yw=!1;if(typeof window<"u")try{var Dv=Object.defineProperty({},"passive",{get:function(){return Yw=!0,!0}});window.addEventListener("test",Dv,Dv),window.removeEventListener("test",Dv,Dv)}catch{Yw=!1}var $c=Yw?{passive:!1}:!1,BV=function(t){return t.tagName==="TEXTAREA"},SO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!BV(t)&&n[e]==="visible")},LV=function(t){return SO(t,"overflowY")},jV=function(t){return SO(t,"overflowX")},QN=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=EO(t,r);if(o){var a=RO(t,r),i=a[1],s=a[2];if(i>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zV=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},UV=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},EO=function(t,e){return t==="v"?LV(e):jV(e)},RO=function(t,e){return t==="v"?zV(e):UV(e)},WV=function(t,e){return t==="h"&&e==="rtl"?-1:1},VV=function(t,e,n,r,o){var a=WV(t,window.getComputedStyle(e).direction),i=a*r,s=n.target,u=e.contains(s),l=!1,d=i>0,f=0,p=0;do{if(!s)break;var m=RO(t,s),g=m[0],y=m[1],b=m[2],C=y-b-a*g;(g||C)&&EO(t,s)&&(f+=C,p+=g);var S=s.parentNode;s=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!u&&s!==document.body||u&&(e.contains(s)||e===s));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(l=!0),l},kv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},JN=function(t){return[t.deltaX,t.deltaY]},ZN=function(t){return t&&"current"in t?t.current:t},HV=function(t,e){return t[0]===e[0]&&t[1]===e[1]},GV=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$V=0,qc=[];function qV(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),o=A.useState($V++)[0],a=A.useState(CO)[0],i=A.useRef(t);A.useEffect(function(){i.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var y=pV([t.lockRef.current],(t.shards||[]).map(ZN),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var s=A.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var C=kv(y),S=n.current,E="deltaX"in y?y.deltaX:S[0]-C[0],_="deltaY"in y?y.deltaY:S[1]-C[1],T,D=y.target,I=Math.abs(E)>Math.abs(_)?"h":"v";if("touches"in y&&I==="h"&&D.type==="range")return!1;var k=QN(I,D);if(!k)return!0;if(k?T=I:(T=I==="v"?"h":"v",k=QN(I,D)),!k)return!1;if(!r.current&&"changedTouches"in y&&(E||_)&&(r.current=T),!T)return!0;var M=r.current||T;return VV(M,b,y,M==="h"?E:_)},[]),u=A.useCallback(function(y){var b=y;if(!(!qc.length||qc[qc.length-1]!==a)){var C="deltaY"in b?JN(b):kv(b),S=e.current.filter(function(T){return T.name===b.type&&(T.target===b.target||b.target===T.shadowParent)&&HV(T.delta,C)})[0];if(S&&S.should){b.cancelable&&b.preventDefault();return}if(!S){var E=(i.current.shards||[]).map(ZN).filter(Boolean).filter(function(T){return T.contains(b.target)}),_=E.length>0?s(b,E[0]):!i.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),l=A.useCallback(function(y,b,C,S){var E={name:y,delta:b,target:C,should:S,shadowParent:XV(C)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(_){return _!==E})},1)},[]),d=A.useCallback(function(y){n.current=kv(y),r.current=void 0},[]),f=A.useCallback(function(y){l(y.type,JN(y),y.target,s(y,t.lockRef.current))},[]),p=A.useCallback(function(y){l(y.type,kv(y),y.target,s(y,t.lockRef.current))},[]);A.useEffect(function(){return qc.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",u,$c),document.addEventListener("touchmove",u,$c),document.addEventListener("touchstart",d,$c),function(){qc=qc.filter(function(y){return y!==a}),document.removeEventListener("wheel",u,$c),document.removeEventListener("touchmove",u,$c),document.removeEventListener("touchstart",d,$c)}},[]);var m=t.removeScrollBar,g=t.inert;return A.createElement(A.Fragment,null,g?A.createElement(a,{styles:GV(o)}):null,m?A.createElement(FV,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function XV(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const KV=SV(wO,qV);var Dg=A.forwardRef(function(t,e){return A.createElement(Py,mi({},t,{ref:e,sideCar:KV}))});Dg.classNames=Py.classNames;function mo(t){return Object.keys(t)}function C1(t){return t&&typeof t=="object"&&!Array.isArray(t)}function kC(t,e){const n={...t},r=e;return C1(t)&&C1(e)&&Object.keys(e).forEach(o=>{C1(r[o])&&o in t?n[o]=kC(n[o],r[o]):n[o]=r[o]}),n}function YV(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function QV(t){return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:t.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function np(t){const e=QV(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function eD(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function _O(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?eD(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(a=>n(a)).join(",");if(r.includes(" "))return r.split(" ").map(a=>n(a)).join(" ");const o=r.replace("px","");if(!Number.isNaN(Number(o))){const a=`${Number(o)/16}${t}`;return e?eD(a):a}}return r}return n}const Ae=_O("rem",{shouldScale:!0}),tD=_O("em");function Ip(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function TO(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function Lu(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==A.Fragment:!1}function _a(t){const e=A.createContext(null);return[({children:o,value:a})=>w.jsx(e.Provider,{value:a,children:o}),()=>{const o=A.useContext(e);if(o===null)throw new Error(t);return o}]}function $l(t=null){const e=A.createContext(t);return[({children:o,value:a})=>w.jsx(e.Provider,{value:a,children:o}),()=>A.useContext(e)]}const JV={app:100,modal:200,popover:300,overlay:400,max:9999};function oo(t){return JV[t]}const kg=()=>{};function ZV(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||kg:n=>{n.key==="Escape"&&(t(n),e.onTrigger?.())}}function Tt(t,e="size",n=!0){if(t!==void 0)return TO(t)?n?Ae(t):t:`var(--${e}-${t})`}function Vr(t){return Tt(t,"mantine-spacing")}function On(t){return t===void 0?"var(--mantine-radius-default)":Tt(t,"mantine-radius")}function gr(t){return Tt(t,"mantine-font-size")}function AO(t){return Tt(t,"mantine-line-height",!1)}function IC(t){if(t)return Tt(t,"mantine-shadow",!1)}function hd(t,e){return n=>{t?.(n),e?.(n)}}function e8(t,e){return t in e?np(e[t]):np(t)}function t8(t,e){const n=t.map(r=>({value:r,px:e8(r,e)}));return n.sort((r,o)=>r.px-o.px),n}function bd(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function gg(t,e,n){return e===void 0&&n===void 0?t:e!==void 0&&n===void 0?Math.max(t,e):Math.min(e===void 0&&n!==void 0?t:Math.max(t,e),n)}function Ci(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}function n8(t,e){if(t===e||Number.isNaN(t)&&Number.isNaN(e))return!0;if(!(t instanceof Object)||!(e instanceof Object))return!1;const n=Object.keys(t),{length:r}=n;if(r!==Object.keys(e).length)return!1;for(let o=0;o<r;o+=1){const a=n[o];if(!(a in e)||t[a]!==e[a]&&!(Number.isNaN(t[a])&&Number.isNaN(e[a])))return!1}return!0}function r8(t){return typeof t!="string"?"":t.charAt(0).toUpperCase()+t.slice(1)}function wl(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>e.current?.(...n),[])}function Fy(t,e){const{delay:n,flushOnUnmount:r,leading:o}=typeof e=="number"?{delay:e,flushOnUnmount:!1,leading:!1}:e,a=wl(t),i=A.useRef(0),s=A.useMemo(()=>{const u=Object.assign((...l)=>{window.clearTimeout(i.current);const d=u._isFirstCall;u._isFirstCall=!1;function f(){window.clearTimeout(i.current),i.current=0,u._isFirstCall=!0}if(o&&d){a(...l);const g=()=>{f()},y=()=>{i.current!==0&&(f(),a(...l))},b=()=>{f()};u.flush=y,u.cancel=b,i.current=window.setTimeout(g,n);return}if(o&&!d){const g=()=>{i.current!==0&&(f(),a(...l))},y=()=>{f()};u.flush=g,u.cancel=y;const b=()=>{f()};i.current=window.setTimeout(b,n);return}const p=()=>{i.current!==0&&(f(),a(...l))},m=()=>{f()};u.flush=p,u.cancel=m,i.current=window.setTimeout(p,n)},{flush:()=>{},cancel:()=>{},_isFirstCall:!0});return u},[a,n,o]);return A.useEffect(()=>()=>{r?s.flush():s.cancel()},[s,r]),s}const o8=["mousedown","touchstart"];function a8(t,e,n){const r=A.useRef(null),o=e||o8;return A.useEffect(()=>{const a=i=>{const{target:s}=i??{};if(Array.isArray(n)){const u=!document.body.contains(s)&&s.tagName!=="HTML";n.every(d=>!!d&&!i.composedPath().includes(d))&&!u&&t()}else r.current&&!r.current.contains(s)&&t()};return o.forEach(i=>document.addEventListener(i,a)),()=>{o.forEach(i=>document.removeEventListener(i,a))}},[r,t,n]),r}function i8(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function s8(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function NO(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=A.useState(n?e:s8(t));return A.useEffect(()=>{try{const a=window.matchMedia(t);return o(a.matches),i8(a,i=>o(i.matches))}catch{return}},[t]),r||!1}function u8(t,e){return NO("(prefers-color-scheme: dark)",t==="dark",e)?"dark":"light"}const af=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Su(t,e){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function DO({opened:t,shouldReturnFocus:e=!0}){const n=A.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return Su(()=>{let o=-1;const a=i=>{i.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",a),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",a)}},[t,e]),r}const l8=/input|select|textarea|button|object/,kO="a, input, select, textarea, button, object, [tabindex]";function c8(t){return t.style.display==="none"}function d8(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(c8(n))return!1;n=n.parentNode}return!0}function IO(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function Qw(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(IO(t));return(l8.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&d8(t)}function MO(t){const e=IO(t);return(Number.isNaN(e)||e>=0)&&Qw(t)}function f8(t){return Array.from(t.querySelectorAll(kO)).filter(MO)}function h8(t,e){const n=f8(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let a=r===o.activeElement||t===o.activeElement;const i=o.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(a=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===i.getAttribute("name")).includes(r)),!a)return;e.preventDefault();const u=n[e.shiftKey?n.length-1:0];u&&u.focus()}function p8(t=!0){const e=A.useRef(null),n=o=>{let a=o.querySelector("[data-autofocus]");if(!a){const i=Array.from(o.querySelectorAll(kO));a=i.find(MO)||i.find(Qw)||null,!a&&Qw(o)&&(a=o)}a&&a.focus({preventScroll:!0})},r=A.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return A.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=a=>{a.key==="Tab"&&e.current&&h8(e.current,a)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const m8=t=>(t+1)%1e6;function v8(){const[,t]=A.useReducer(m8,0);return t}const g8=bt.useId||(()=>{});function y8(){const t=g8();return t?`mantine-${t.replace(/:/g,"")}`:""}function Ko(t){const e=y8(),[n,r]=A.useState(e);return af(()=>{r(Ci())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function b8(t,e,n){A.useEffect(()=>(window.addEventListener(t,e,n),()=>window.removeEventListener(t,e,n)),[t,e])}function rp(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function OO(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=rp(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o&&typeof o=="function"?o():rp(r,null)}),e.clear()}}}function tr(...t){return A.useCallback(OO(...t),t)}function xa({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,a]=A.useState(e!==void 0?e:n),i=(s,...u)=>{a(s),r?.(s,...u)};return t!==void 0?[t,r,!0]:[o,i,!1]}function By(t,e){return NO("(prefers-reduced-motion: reduce)",t,e)}function x8(t,e){if(!t||!e)return!1;if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n+=1)if(!n8(t[n],e[n]))return!1;return!0}function w8(t){const e=A.useRef([]),n=A.useRef(0);return x8(e.current,t)||(e.current=t,n.current+=1),[n.current]}function C8(t,e){A.useEffect(t,w8(e))}function S8(t=[!1,!0]){const[[e],n]=A.useReducer((r,o)=>{const a=o instanceof Function?o(r[0]):o,i=Math.abs(r.indexOf(a));return r.slice(i).concat(r.slice(0,i))},t);return[e,n]}function nD(t=!1,e={}){const[n,r]=A.useState(t),o=A.useCallback(()=>{r(s=>s||(e.onOpen?.(),!0))},[e.onOpen]),a=A.useCallback(()=>{r(s=>s&&(e.onClose?.(),!1))},[e.onClose]),i=A.useCallback(()=>{n?a():o()},[a,o,n]);return[n,{open:o,close:a,toggle:i}]}function E8(t,e,n={autoInvoke:!1}){const r=A.useRef(null),o=A.useCallback((...i)=>{r.current||(r.current=window.setTimeout(()=>{t(i),r.current=null},e))},[e]),a=A.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return A.useEffect(()=>(n.autoInvoke&&o(),a),[a,o]),{start:o,clear:a}}function R8(t){const e=A.useRef(void 0);return A.useEffect(()=>{e.current=t},[t]),e.current}function _8(t,e,n){const r=A.useRef(null),o=A.useRef(null);return A.useEffect(()=>{const a=typeof n=="function"?n():n;return(a||o.current)&&(r.current=new MutationObserver(t),r.current.observe(a||o.current,e)),()=>{r.current?.disconnect()}},[t,e]),o}function T8(){const[t,e]=A.useState(!1);return A.useEffect(()=>e(!0),[]),t}function A8(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}function N8(t){function e(r){const o=Object.keys(r).reduce((a,i)=>(a[`${t}:${i}`]=s=>r[i](s.detail),a),{});af(()=>(Object.keys(o).forEach(a=>{window.removeEventListener(a,o[a]),window.addEventListener(a,o[a])}),()=>Object.keys(o).forEach(a=>{window.removeEventListener(a,o[a])})),[o])}function n(r){return(...o)=>A8(`${t}:${String(r)}`,o[0])}return[e,n]}var D8={};function PO(){return typeof process<"u"&&D8?"production":"development"}function Ly(t){const e=bt.version;return typeof bt.version!="string"||e.startsWith("18.")?t?.ref:t?.props?.ref}function FO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=FO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function lr(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=FO(t))&&(r&&(r+=" "),r+=e);return r}const k8={};function I8(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=lr(e[r],o):e[r]=o})}),e}function jy({theme:t,classNames:e,props:n,stylesCtx:r}){const a=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(t,n,r):i||k8);return I8(a)}function Ig({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((a,i)=>typeof i=="function"?{...a,...i(t,n,r)}:{...a,...i},{})}const MC=A.createContext(null);function ju(){const t=A.useContext(MC);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function M8(){return ju().cssVariablesResolver}function O8(){return ju().classNamesPrefix}function zy(){return ju().getStyleNonce}function P8(){return ju().withStaticClasses}function F8(){return ju().headless}function B8(){return ju().stylesTransform?.sx}function L8(){return ju().stylesTransform?.styles}function Uy(){return ju().env||"default"}function j8(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function z8(t){let e=t.replace("#","");if(e.length===3){const i=e.split("");e=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(e.length===8){const i=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:i}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,a=n&255;return{r,g:o,b:a,a:1}}function U8(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o===void 0?1:o}}function W8(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,a=parseInt(n[3],10)/100,i=n[5]?parseFloat(n[5]):void 0,s=(1-Math.abs(2*a-1))*o,u=r/60,l=s*(1-Math.abs(u%2-1)),d=a-s/2;let f,p,m;return u>=0&&u<1?(f=s,p=l,m=0):u>=1&&u<2?(f=l,p=s,m=0):u>=2&&u<3?(f=0,p=s,m=l):u>=3&&u<4?(f=0,p=l,m=s):u>=4&&u<5?(f=l,p=0,m=s):(f=s,p=0,m=l),{r:Math.round((f+d)*255),g:Math.round((p+d)*255),b:Math.round((m+d)*255),a:i||1}}function OC(t){return j8(t)?z8(t):t.startsWith("rgb")?U8(t):t.startsWith("hsl")?W8(t):{r:0,g:0,b:0,a:1}}function Iv(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a}=OC(t),i=1-e,s=u=>Math.round(u*i);return`rgba(${s(n)}, ${s(r)}, ${s(o)}, ${a})`}function op(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function S1(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function V8(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function H8(t){if(t.startsWith("oklch("))return(V8(t)||0)/100;const{r:e,g:n,b:r}=OC(t),o=e/255,a=n/255,i=r/255,s=S1(o),u=S1(a),l=S1(i);return .2126*s+.7152*u+.0722*l}function Dh(t,e=.179){return t.startsWith("var(")?!1:H8(t)>e}function ql({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Dh(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Dh(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Dh(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),a=o?Number(o):void 0,i=r in e.colors;if(i){const s=a!==void 0?e.colors[r][a]:e.colors[r][op(e,n||"light")];return{color:r,value:s,shade:a,isThemeColor:i,isLight:Dh(s,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${a}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:i,isLight:Dh(t,e.luminanceThreshold),shade:a,variable:void 0}}function ur(t,e){const n=ql({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function Jw(t,e){const n={from:t?.from||e.defaultGradient.from,to:t?.to||e.defaultGradient.to,deg:t?.deg??e.defaultGradient.deg??0},r=ur(n.from,e),o=ur(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function ci(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const a=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${a}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=OC(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const Xc=ci,G8=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const a=ql({color:t,theme:e}),i=typeof o=="boolean"?o:e.autoContrast;if(n==="none")return{background:"transparent",hover:"transparent",color:"inherit",border:"none"};if(n==="filled"){const s=i&&a.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return a.isThemeColor?a.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:s,border:`${Ae(1)} solid transparent`}:{background:`var(--mantine-color-${a.color}-${a.shade})`,hover:`var(--mantine-color-${a.color}-${a.shade===9?8:a.shade+1})`,color:s,border:`${Ae(1)} solid transparent`}:{background:t,hover:Iv(t,.1),color:s,border:`${Ae(1)} solid transparent`}}if(n==="light"){if(a.isThemeColor){if(a.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Ae(1)} solid transparent`};const s=e.colors[a.color][a.shade];return{background:ci(s,.1),hover:ci(s,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:ci(t,.1),hover:ci(t,.12),color:t,border:`${Ae(1)} solid transparent`}}if(n==="outline")return a.isThemeColor?a.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${Ae(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:ci(e.colors[a.color][a.shade],.05),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${Ae(1)} solid var(--mantine-color-${a.color}-${a.shade})`}:{background:"transparent",hover:ci(t,.05),color:t,border:`${Ae(1)} solid ${t}`};if(n==="subtle"){if(a.isThemeColor){if(a.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Ae(1)} solid transparent`};const s=e.colors[a.color][a.shade];return{background:"transparent",hover:ci(s,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:"transparent",hover:ci(t,.12),color:t,border:`${Ae(1)} solid transparent`}}return n==="transparent"?a.isThemeColor?a.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${Ae(1)} solid transparent`}:n==="white"?a.isThemeColor?a.shade===void 0?{background:"var(--mantine-color-white)",hover:Iv(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Iv(e.white,.01),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Iv(e.white,.01),color:t,border:`${Ae(1)} solid transparent`}:n==="gradient"?{background:Jw(r,e),hover:Jw(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ae(1)} solid var(--mantine-color-default-border)`}:{}},$8={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},rD="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",PC={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:$8,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:G8,autoContrast:!1,luminanceThreshold:.3,fontFamily:rD,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:rD,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ae(34),lineHeight:"1.3"},h2:{fontSize:Ae(26),lineHeight:"1.35"},h3:{fontSize:Ae(22),lineHeight:"1.4"},h4:{fontSize:Ae(18),lineHeight:"1.45"},h5:{fontSize:Ae(16),lineHeight:"1.5"},h6:{fontSize:Ae(14),lineHeight:"1.5"}}},fontSizes:{xs:Ae(12),sm:Ae(14),md:Ae(16),lg:Ae(18),xl:Ae(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ae(2),sm:Ae(4),md:Ae(8),lg:Ae(16),xl:Ae(32)},spacing:{xs:Ae(10),sm:Ae(12),md:Ae(16),lg:Ae(20),xl:Ae(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), 0 ${Ae(1)} ${Ae(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(10)} ${Ae(15)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(7)} ${Ae(7)} ${Ae(-5)}`,md:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(20)} ${Ae(25)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(10)} ${Ae(10)} ${Ae(-5)}`,lg:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(28)} ${Ae(23)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(12)} ${Ae(12)} ${Ae(-7)}`,xl:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(36)} ${Ae(28)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(17)} ${Ae(17)} ${Ae(-7)}`},other:{},components:{}};function oD(t){return t==="auto"||t==="dark"||t==="light"}function q8({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return oD(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&oD(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const X8="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",aD="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function E1(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function iD(t){if(!(t.primaryColor in t.colors))throw new Error(X8);if(typeof t.primaryShade=="object"&&(!E1(t.primaryShade.dark)||!E1(t.primaryShade.light)))throw new Error(aD);if(typeof t.primaryShade=="number"&&!E1(t.primaryShade))throw new Error(aD)}function K8(t,e){if(!e)return iD(t),t;const n=kC(t,e);return e.fontFamily&&!e.headings?.fontFamily&&(n.headings.fontFamily=e.fontFamily),iD(n),n}const FC=A.createContext(null),Y8=()=>A.useContext(FC)||PC;function $r(){const t=A.useContext(FC);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function BO({theme:t,children:e,inherit:n=!0}){const r=Y8(),o=A.useMemo(()=>K8(n?r:PC,t),[t,r,n]);return w.jsx(FC.Provider,{value:o,children:e})}BO.displayName="@mantine/core/MantineThemeProvider";function Q8(){const t=$r(),e=zy(),n=mo(t.breakpoints).reduce((r,o)=>{const a=t.breakpoints[o].includes("px"),i=np(t.breakpoints[o]),s=a?`${i-.1}px`:tD(i-.1),u=a?`${i}px`:tD(i);return`${r}@media (max-width: ${s}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:e?.(),dangerouslySetInnerHTML:{__html:n}})}function R1(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function kh(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function J8(t,e){const n=R1(t.variables),r=n?kh(e,n):"",o=R1(t.dark),a=R1(t.light),i=o?kh(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",s=a?kh(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,a):"";return`${r}

${i}

${s}`}function Mp({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&ql({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function sD(t,e){return Mp({color:t.colors[t.primaryColor][op(t,e)],theme:t,autoContrast:null})}function Mv({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const s=op(t,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Xc(t.colors[e][s],.1),[`--mantine-color-${r}-light-hover`]:Xc(t.colors[e][s],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-outline-hover`]:Xc(t.colors[e][s],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...u}:u}const a=op(t,"dark"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Xc(t.colors[e][Math.max(0,a-2)],.15),[`--mantine-color-${r}-light-hover`]:Xc(t.colors[e][Math.max(0,a-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(a-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(a-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Xc(t.colors[e][Math.max(a-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...i}:i}function Z8(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function Kc(t,e,n){mo(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const LO=t=>{const e=op(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:Ae(t.defaultRadius),r={variables:{"--mantine-z-index-app":"100","--mantine-z-index-modal":"200","--mantine-z-index-popover":"300","--mantine-z-index-overlay":"400","--mantine-z-index-max":"9999","--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-color-scheme":"light","--mantine-primary-color-contrast":sD(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)","--mantine-color-disabled":"var(--mantine-color-gray-2)","--mantine-color-disabled-color":"var(--mantine-color-gray-5)","--mantine-color-disabled-border":"var(--mantine-color-gray-3)"},dark:{"--mantine-color-scheme":"dark","--mantine-primary-color-contrast":sD(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)","--mantine-color-disabled":"var(--mantine-color-dark-6)","--mantine-color-disabled-color":"var(--mantine-color-dark-3)","--mantine-color-disabled-border":"var(--mantine-color-dark-4)"}};Kc(r.variables,t.breakpoints,"breakpoint"),Kc(r.variables,t.spacing,"spacing"),Kc(r.variables,t.fontSizes,"font-size"),Kc(r.variables,t.lineHeights,"line-height"),Kc(r.variables,t.shadows,"shadow"),Kc(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((a,i)=>{r.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${t.primaryColor}-${i})`}),mo(t.colors).forEach(a=>{const i=t.colors[a];if(Z8(i)){Object.assign(r.light,Mv({theme:t,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Mv({theme:t,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((s,u)=>{r.variables[`--mantine-color-${a}-${u}`]=s}),Object.assign(r.light,Mv({theme:t,color:a,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Mv({theme:t,color:a,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return mo(o).forEach(a=>{r.variables[`--mantine-${a}-font-size`]=o[a].fontSize,r.variables[`--mantine-${a}-line-height`]=o[a].lineHeight,r.variables[`--mantine-${a}-font-weight`]=o[a].fontWeight||t.headings.fontWeight}),r};function eH({theme:t,generator:e}){const n=LO(t),r=e?.(t);return r?kC(n,r):n}const _1=LO(PC);function tH(t){const e={variables:{},light:{},dark:{}};return mo(t.variables).forEach(n=>{_1.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),mo(t.light).forEach(n=>{_1.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),mo(t.dark).forEach(n=>{_1.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function nH(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function jO({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=$r(),r=zy(),o=M8(),a=eH({theme:n,generator:o}),i=t===":root"&&e,s=i?tH(a):a,u=J8(s,t);return u?w.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${u}${i?"":nH(t)}`}}):null}jO.displayName="@mantine/CssVariables";function Yc(t,e){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=t!=="auto"?t:n?"dark":"light";e()?.setAttribute("data-mantine-color-scheme",r)}function rH({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=A.useRef(null),[a,i]=A.useState(()=>t.get(e)),s=r||a,u=A.useCallback(d=>{r||(Yc(d,n),i(d),t.set(d))},[t.set,s,r]),l=A.useCallback(()=>{i(e),Yc(e,n),t.clear()},[t.clear,e]);return A.useEffect(()=>(t.subscribe(u),t.unsubscribe),[t.subscribe,t.unsubscribe]),af(()=>{Yc(t.get(e),n)},[]),A.useEffect(()=>{if(r)return Yc(r,n),()=>{};r===void 0&&Yc(a,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=f=>{a==="auto"&&Yc(f.matches?"dark":"light",n)};return o.current?.addEventListener("change",d),()=>o.current?.removeEventListener("change",d)},[a,r]),{colorScheme:s,setColorScheme:u,clearColorScheme:l}}function oH({respectReducedMotion:t,getRootElement:e}){af(()=>{t&&e()?.setAttribute("data-respect-reduced-motion","true")},[t])}function zO({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:a=!0,withCssVariables:i=!0,cssVariablesSelector:s=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=q8(),defaultColorScheme:d="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:m,stylesTransform:g,env:y}){const{colorScheme:b,setColorScheme:C,clearColorScheme:S}=rH({defaultColorScheme:d,forceColorScheme:m,manager:l,getRootElement:f});return oH({respectReducedMotion:t?.respectReducedMotion||!1,getRootElement:f}),w.jsx(MC.Provider,{value:{colorScheme:b,setColorScheme:C,clearColorScheme:S,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:s,withStaticClasses:r,stylesTransform:g,env:y},children:w.jsxs(BO,{theme:t,children:[i&&w.jsx(jO,{cssVariablesSelector:s,deduplicateCssVariables:a}),o&&w.jsx(Q8,{}),e]})})}zO.displayName="@mantine/core/MantineProvider";function zu({classNames:t,styles:e,props:n,stylesCtx:r}){const o=$r();return{resolvedClassNames:jy({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:Ig({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const aH={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function iH({theme:t,options:e,unstyled:n}){return lr(e?.focusable&&!n&&(t.focusClassName||aH[t.focusRing]),e?.active&&!n&&t.activeClassName)}function sH({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return jy({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:e})[t]}function uD({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return jy({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function uH({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function lH({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function cH({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function dH({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(a=>jy({theme:e,classNames:e.components[a]?.classNames,props:r,stylesCtx:o})?.[n])}function fH({options:t,classes:e,selector:n,unstyled:r}){return t?.variant&&!r?e[`${n}--${t.variant}`]:void 0}function hH({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:a,classes:i,unstyled:s,className:u,rootSelector:l,props:d,stylesCtx:f,withStaticClasses:p,headless:m,transformedStyles:g}){return lr(iH({theme:t,options:e,unstyled:s||m}),dH({theme:t,themeName:n,selector:r,props:d,stylesCtx:f}),fH({options:e,classes:i,selector:r,unstyled:s}),uD({selector:r,stylesCtx:f,theme:t,classNames:a,props:d}),uD({selector:r,stylesCtx:f,theme:t,classNames:g,props:d}),sH({selector:r,stylesCtx:f,options:e,props:d,theme:t}),uH({rootSelector:l,selector:r,className:u}),lH({selector:r,classes:i,unstyled:s||m}),p&&!m&&cH({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e?.withStaticClass}),e?.className)}function pH({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(a=>Ig({theme:t,styles:t.components[a]?.styles,props:n,stylesCtx:r})[o]).reduce((a,i)=>({...a,...i}),{})}function Zw({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Zw({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function mH(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...Ip(n[r])}}),e),{})}function vH({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:a,themeName:i,headless:s}){return mH([s?{}:e?.(n,r,o),...i.map(u=>n.components?.[u]?.vars?.(n,r,o)),t?.(n,r,o)])?.[a]}function gH({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:a,rootSelector:i,styles:s,style:u,vars:l,varsResolver:d,headless:f,withStylesTransform:p}){return{...!p&&pH({theme:t,themeName:e,props:o,stylesCtx:a,selector:n}),...!p&&Ig({theme:t,styles:s,props:o,stylesCtx:a})[n],...!p&&Ig({theme:t,styles:r?.styles,props:r?.props||o,stylesCtx:a})[n],...vH({theme:t,props:o,stylesCtx:a,vars:l,varsResolver:d,selector:n,themeName:e,headless:f}),...i===n?Zw({style:u,theme:t}):null,...Zw({style:r?.style,theme:t})}}function yH({props:t,stylesCtx:e,themeName:n}){const r=$r(),o=L8()?.();return{getTransformedStyles:i=>o?[...i.map(u=>o(u,{props:t,theme:r,ctx:e})),...n.map(u=>o(r.components[u]?.styles,{props:t,theme:r,ctx:e}))].filter(Boolean):[],withStylesTransform:!!o}}function at({name:t,classes:e,props:n,stylesCtx:r,className:o,style:a,rootSelector:i="root",unstyled:s,classNames:u,styles:l,vars:d,varsResolver:f,attributes:p}){const m=$r(),g=O8(),y=P8(),b=F8(),C=(Array.isArray(t)?t:[t]).filter(_=>_),{withStylesTransform:S,getTransformedStyles:E}=yH({props:n,stylesCtx:r,themeName:C});return(_,T)=>({className:hH({theme:m,options:T,themeName:C,selector:_,classNamesPrefix:g,classNames:u,classes:e,unstyled:s,className:o,rootSelector:i,props:n,stylesCtx:r,withStaticClasses:y,headless:b,transformedStyles:E([T?.styles,l])}),style:gH({theme:m,themeName:C,selector:_,options:T,props:n,stylesCtx:r,rootSelector:i,styles:l,style:a,vars:d,varsResolver:f,headless:b,withStylesTransform:S}),...p?.[_]})}function BC(t,e){return typeof t=="boolean"?t:e.autoContrast}function lD(t){const e=document.createElement("style");return e.setAttribute("data-mantine-styles","inline"),e.innerHTML="*, *::before, *::after {transition: none !important;}",e.setAttribute("data-mantine-disable-transition","true"),t&&e.setAttribute("nonce",t),document.head.appendChild(e),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(r=>r.remove())}function UO({keepTransitions:t}={}){const e=A.useRef(kg),n=A.useRef(-1),r=A.useContext(MC),o=zy(),a=A.useRef(o?.());if(!r)throw new Error("[@mantine/core] MantineProvider was not found in tree");const i=f=>{r.setColorScheme(f),e.current=t?()=>{}:lD(a.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{e.current?.()},10)},s=()=>{r.clearColorScheme(),e.current=t?()=>{}:lD(a.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{e.current?.()},10)},u=u8("light",{getInitialValueInEffect:!1}),l=r.colorScheme==="auto"?u:r.colorScheme,d=A.useCallback(()=>i(l==="light"?"dark":"light"),[i,l]);return A.useEffect(()=>()=>{e.current?.(),window.clearTimeout(n.current)},[]),{colorScheme:r.colorScheme,setColorScheme:i,clearColorScheme:s,toggleColorScheme:d}}function Te(t,e,n){const r=$r(),o=r.components[t]?.defaultProps,a=typeof o=="function"?o(r):o;return{...e,...a,...Ip(n)}}function T1(t){return mo(t).reduce((e,n)=>t[n]!==void 0?`${e}${YV(n)}:${t[n]};`:e,"").trim()}function bH({selector:t,styles:e,media:n,container:r}){const o=e?T1(e):"",a=Array.isArray(n)?n.map(s=>`@media${s.query}{${t}{${T1(s.styles)}}}`):[],i=Array.isArray(r)?r.map(s=>`@container ${s.query}{${t}{${T1(s.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${a.join("")}${i.join("")}`.trim()}function LC(t){const e=zy();return w.jsx("style",{"data-mantine-styles":"inline",nonce:e?.(),dangerouslySetInnerHTML:{__html:bH(t)}})}function sf(t){const{m:e,mx:n,my:r,mt:o,mb:a,ml:i,mr:s,me:u,ms:l,p:d,px:f,py:p,pt:m,pb:g,pl:y,pr:b,pe:C,ps:S,bd:E,bdrs:_,bg:T,c:D,opacity:I,ff:k,fz:M,fw:O,lts:F,ta:j,lh:G,fs:W,tt:q,td:P,w:U,miw:z,maw:H,h:L,mih:$,mah:J,bgsz:ne,bgp:ce,bgr:be,bga:se,pos:oe,top:fe,left:me,bottom:Oe,right:Be,inset:Le,display:De,flex:$e,hiddenFrom:et,visibleFrom:ot,lightHidden:Ie,darkHidden:Me,sx:Fe,...Ke}=t;return{styleProps:Ip({m:e,mx:n,my:r,mt:o,mb:a,ml:i,mr:s,me:u,ms:l,p:d,px:f,py:p,pt:m,pb:g,pl:y,pr:b,pe:C,ps:S,bd:E,bg:T,c:D,opacity:I,ff:k,fz:M,fw:O,lts:F,ta:j,lh:G,fs:W,tt:q,td:P,w:U,miw:z,maw:H,h:L,mih:$,mah:J,bgsz:ne,bgp:ce,bgr:be,bga:se,pos:oe,top:fe,left:me,bottom:Oe,right:Be,inset:Le,display:De,flex:$e,bdrs:_,hiddenFrom:et,visibleFrom:ot,lightHidden:Ie,darkHidden:Me,sx:Fe}),rest:Ke}}const xH={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bdrs:{type:"radius",property:"borderRadius"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function jC(t,e){const n=ql({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function wH(t,e){const n=ql({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:jC(t,e)}function CH(t,e){if(typeof t=="number")return Ae(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(i=>i.trim()!=="");let a=`${Ae(n)}`;return r&&(a+=` ${r}`),o.length>0&&(a+=` ${jC(o.join(" "),e)}`),a.trim()}return t}const cD={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function SH(t){return typeof t=="string"&&t in cD?cD[t]:t}const EH=["h1","h2","h3","h4","h5","h6"];function RH(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&EH.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?Ae(t):t}function _H(t){return t}const TH=["h1","h2","h3","h4","h5","h6"];function AH(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&TH.includes(t)?`var(--mantine-${t}-line-height)`:t}function NH(t,e){return typeof t=="string"&&t in e.radius?`var(--mantine-radius-${t})`:typeof t=="number"||typeof t=="string"?Ae(t):t}function DH(t){return typeof t=="number"?Ae(t):t}function kH(t,e){if(typeof t=="number")return Ae(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return Ae(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const A1={color:jC,textColor:wH,fontSize:RH,spacing:kH,radius:NH,identity:_H,size:DH,lineHeight:AH,fontFamily:SH,border:CH};function dD(t){return t.replace("(min-width: ","").replace("em)","")}function IH({media:t,...e}){const r=Object.keys(t).sort((o,a)=>Number(dD(o))-Number(dD(a))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function MH(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function OH(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function PH(t){return typeof t=="object"&&t!==null?mo(t).filter(e=>e!=="base"):[]}function FH(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function BH({styleProps:t,data:e,theme:n}){return IH(mo(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const a=e[o],i=Array.isArray(a.property)?a.property:[a.property],s=OH(t[o]);if(!MH(t[o]))return i.forEach(l=>{r.inlineStyles[l]=A1[a.type](s,n)}),r;r.hasResponsiveStyles=!0;const u=PH(t[o]);return i.forEach(l=>{s!=null&&(r.styles[l]=A1[a.type](s,n)),u.forEach(d=>{const f=`(min-width: ${n.breakpoints[d]})`;r.media[f]={...r.media[f],[l]:A1[a.type](FH(t[o],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function WO(){return`__m__-${A.useId().replace(/:/g,"")}`}function zC(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...zC(r,e)}),{}):typeof t=="function"?t(e):t??{}}function VO(t){return t.startsWith("data-")?t:`data-${t}`}function LH(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[VO(n)]=t[n]),e},{})}function HO(t){return t?typeof t=="string"?{[VO(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...HO(n)}),{}):LH(t):null}function e2(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...e2(r,e)}),{}):typeof t=="function"?t(e):t??{}}function jH({theme:t,style:e,vars:n,styleProps:r}){const o=e2(e,t),a=e2(n,t);return{...o,...a,...r}}const GO=A.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:a,size:i,hiddenFrom:s,visibleFrom:u,lightHidden:l,darkHidden:d,renderRoot:f,__size:p,...m},g)=>{const y=$r(),b=t||"div",{styleProps:C,rest:S}=sf(m),_=B8()?.()?.(C.sx),T=WO(),D=BH({styleProps:C,theme:y,data:xH}),I={ref:g,style:jH({theme:y,style:e,vars:n,styleProps:D.inlineStyles}),className:lr(r,_,{[T]:D.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":d,[`mantine-hidden-from-${s}`]:s,[`mantine-visible-from-${u}`]:u}),"data-variant":o,"data-size":TO(i)?void 0:i||void 0,size:p,...HO(a),...S};return w.jsxs(w.Fragment,{children:[D.hasResponsiveStyles&&w.jsx(LC,{selector:`.${T}`,styles:D.styles,media:D.media}),typeof f=="function"?f(I):w.jsx(b,{...I})]})});GO.displayName="@mantine/core/Box";const le=GO;function $O(t){return t}function ze(t){const e=A.forwardRef(t);return e.extend=$O,e.withProps=n=>{const r=A.forwardRef((o,a)=>w.jsx(e,{...n,...o,ref:a}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function ao(t){const e=A.forwardRef(t);return e.withProps=n=>{const r=A.forwardRef((o,a)=>w.jsx(e,{...n,...o,ref:a}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=$O,e}const zH=A.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Op(){return A.useContext(zH)}function UH(t){if(!t||typeof t=="string")return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function N1(t){return t?.current?t.current.scrollHeight:"auto"}const Ih=typeof window<"u"&&window.requestAnimationFrame,fD=0,WH=t=>({height:0,overflow:"hidden",...t?{}:{display:"none"}});function VH({transitionDuration:t,transitionTimingFunction:e="ease",onTransitionEnd:n=()=>{},opened:r,keepMounted:o=!1}){const a=A.useRef(null),i=WH(o),[s,u]=A.useState(r?{}:i),l=g=>{of.flushSync(()=>u(g))},d=g=>{l(y=>({...y,...g}))};function f(g){const y=t||UH(g);return{transition:`height ${y}ms ${e}, opacity ${y}ms ${e}`}}Su(()=>{typeof Ih=="function"&&Ih(r?()=>{d({willChange:"height",display:"block",overflow:"hidden"}),Ih(()=>{const g=N1(a);d({...f(g),height:g})})}:()=>{const g=N1(a);d({...f(g),willChange:"height",height:g}),Ih(()=>d({height:fD,overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==a.current||g.propertyName!=="height"))if(r){const y=N1(a);y===s.height?l({}):d({height:y}),n()}else s.height===fD&&(l(i),n())};function m({style:g={},refKey:y="ref",...b}={}){const C=b[y],S={"aria-hidden":!r,...b,[y]:OO(a,C),onTransitionEnd:p,style:{boxSizing:"border-box",...g,...s}};return bt.version.startsWith("18")?r||(S.inert=""):S.inert=!r,S}return m}const HH={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},qO=ze((t,e)=>{const{children:n,in:r,transitionDuration:o,transitionTimingFunction:a,style:i,onTransitionEnd:s,animateOpacity:u,keepMounted:l,...d}=Te("Collapse",HH,t),f=$r(),p=By(),g=(f.respectReducedMotion?p:!1)?0:o,y=VH({opened:r,transitionDuration:g,transitionTimingFunction:a,onTransitionEnd:s,keepMounted:l});return g===0?r?w.jsx(le,{...d,children:n}):null:w.jsx(le,{...y({style:{opacity:r||!u?1:0,transition:u?`opacity ${g}ms ${a}`:"none",...zC(i,f)},ref:e,...d}),children:n})});qO.displayName="@mantine/core/Collapse";function Wy(){return typeof window<"u"}function uf(t){return XO(t)?(t.nodeName||"").toLowerCase():"#document"}function vo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ii(t){var e;return(e=(XO(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XO(t){return Wy()?t instanceof Node||t instanceof vo(t).Node:!1}function En(t){return Wy()?t instanceof Element||t instanceof vo(t).Element:!1}function Go(t){return Wy()?t instanceof HTMLElement||t instanceof vo(t).HTMLElement:!1}function t2(t){return!Wy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vo(t).ShadowRoot}const GH=new Set(["inline","contents"]);function Pp(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=wa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!GH.has(o)}const $H=new Set(["table","td","th"]);function qH(t){return $H.has(uf(t))}const XH=[":popover-open",":modal"];function Vy(t){return XH.some(e=>{try{return t.matches(e)}catch{return!1}})}const KH=["transform","translate","scale","rotate","perspective"],YH=["transform","translate","scale","rotate","perspective","filter"],QH=["paint","layout","strict","content"];function UC(t){const e=Hy(),n=En(t)?wa(t):t;return KH.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||YH.some(r=>(n.willChange||"").includes(r))||QH.some(r=>(n.contain||"").includes(r))}function JH(t){let e=xs(t);for(;Go(e)&&!Du(e);){if(UC(e))return e;if(Vy(e))return null;e=xs(e)}return null}function Hy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZH=new Set(["html","body","#document"]);function Du(t){return ZH.has(uf(t))}function wa(t){return vo(t).getComputedStyle(t)}function Gy(t){return En(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function xs(t){if(uf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||t2(t)&&t.host||Ii(t);return t2(e)?e.host:e}function KO(t){const e=xs(t);return Du(e)?t.ownerDocument?t.ownerDocument.body:t.body:Go(e)&&Pp(e)?e:KO(e)}function vs(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=KO(t),a=o===((r=t.ownerDocument)==null?void 0:r.body),i=vo(o);if(a){const s=n2(i);return e.concat(i,i.visualViewport||[],Pp(o)?o:[],s&&n?vs(s):[])}return e.concat(o,vs(o,[],n))}function n2(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function hD(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function ap(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&t2(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function YO(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function QO(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function eG(t){return rG()?!1:!pD()&&t.width===0&&t.height===0||pD()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function tG(){return/apple/i.test(navigator.vendor)}function pD(){const t=/android/i;return t.test(YO())||t.test(QO())}function nG(){return YO().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function rG(){return QO().includes("jsdom/")}function r2(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function oG(t){return"nativeEvent"in t}function aG(t){return t.matches("html,body")}function Rl(t){return t?.ownerDocument||document}function D1(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function rd(t){return"composedPath"in t?t.composedPath()[0]:t.target}const iG="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function sG(t){return Go(t)&&t.matches(iG)}const uG=["top","right","bottom","left"],Ha=Math.min,Lr=Math.max,Mg=Math.round,Ov=Math.floor,Si=t=>({x:t,y:t}),lG={left:"right",right:"left",bottom:"top",top:"bottom"},cG={start:"end",end:"start"};function o2(t,e,n){return Lr(t,Ha(e,n))}function _i(t,e){return typeof t=="function"?t(e):t}function Ga(t){return t.split("-")[0]}function lf(t){return t.split("-")[1]}function WC(t){return t==="x"?"y":"x"}function VC(t){return t==="y"?"height":"width"}const dG=new Set(["top","bottom"]);function Fa(t){return dG.has(Ga(t))?"y":"x"}function HC(t){return WC(Fa(t))}function fG(t,e,n){n===void 0&&(n=!1);const r=lf(t),o=HC(t),a=VC(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=Og(i)),[i,Og(i)]}function hG(t){const e=Og(t);return[a2(t),e,a2(e)]}function a2(t){return t.replace(/start|end/g,e=>cG[e])}const mD=["left","right"],vD=["right","left"],pG=["top","bottom"],mG=["bottom","top"];function vG(t,e,n){switch(t){case"top":case"bottom":return n?e?vD:mD:e?mD:vD;case"left":case"right":return e?pG:mG;default:return[]}}function gG(t,e,n,r){const o=lf(t);let a=vG(Ga(t),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),e&&(a=a.concat(a.map(a2)))),a}function Og(t){return t.replace(/left|right|bottom|top/g,e=>lG[e])}function yG(t){return{top:0,right:0,bottom:0,left:0,...t}}function GC(t){return typeof t!="number"?yG(t):{top:t,right:t,bottom:t,left:t}}function Md(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function gD(t,e,n){let{reference:r,floating:o}=t;const a=Fa(e),i=HC(e),s=VC(i),u=Ga(e),l=a==="y",d=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,p=r[s]/2-o[s]/2;let m;switch(u){case"top":m={x:d,y:r.y-o.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-o.width,y:f};break;default:m={x:r.x,y:r.y}}switch(lf(e)){case"start":m[i]-=p*(n&&l?-1:1);break;case"end":m[i]+=p*(n&&l?-1:1);break}return m}const bG=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),u=await(i.isRTL==null?void 0:i.isRTL(e));let l=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:d,y:f}=gD(l,r,u),p=r,m={},g=0;for(let y=0;y<s.length;y++){const{name:b,fn:C}=s[y],{x:S,y:E,data:_,reset:T}=await C({x:d,y:f,initialPlacement:r,placement:p,strategy:o,middlewareData:m,rects:l,platform:i,elements:{reference:t,floating:e}});d=S??d,f=E??f,m={...m,[b]:{...m[b],..._}},T&&g<=50&&(g++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(l=T.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):T.rects),{x:d,y:f}=gD(l,p,u)),y=-1)}return{x:d,y:f,placement:p,strategy:o,middlewareData:m}};async function ip(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=_i(e,t),g=GC(m),b=s[p?f==="floating"?"reference":"floating":f],C=Md(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:l,rootBoundary:d,strategy:u})),S=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),_=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},T=Md(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:u}):S);return{top:(C.top-T.top+g.top)/_.y,bottom:(T.bottom-C.bottom+g.bottom)/_.y,left:(C.left-T.left+g.left)/_.x,right:(T.right-C.right+g.right)/_.x}}const xG=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:u}=e,{element:l,padding:d=0}=_i(t,e)||{};if(l==null)return{};const f=GC(d),p={x:n,y:r},m=HC(o),g=VC(m),y=await i.getDimensions(l),b=m==="y",C=b?"top":"left",S=b?"bottom":"right",E=b?"clientHeight":"clientWidth",_=a.reference[g]+a.reference[m]-p[m]-a.floating[g],T=p[m]-a.reference[m],D=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let I=D?D[E]:0;(!I||!await(i.isElement==null?void 0:i.isElement(D)))&&(I=s.floating[E]||a.floating[g]);const k=_/2-T/2,M=I/2-y[g]/2-1,O=Ha(f[C],M),F=Ha(f[S],M),j=O,G=I-y[g]-F,W=I/2-y[g]/2+k,q=o2(j,W,G),P=!u.arrow&&lf(o)!=null&&W!==q&&a.reference[g]/2-(W<j?O:F)-y[g]/2<0,U=P?W<j?W-j:W-G:0;return{[m]:p[m]+U,data:{[m]:q,centerOffset:W-q-U,...P&&{alignmentOffset:U}},reset:P}}}),wG=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:u,elements:l}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...b}=_i(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const C=Ga(o),S=Fa(s),E=Ga(s)===s,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),T=p||(E||!y?[Og(s)]:hG(s)),D=g!=="none";!p&&D&&T.push(...gG(s,y,g,_));const I=[s,...T],k=await ip(e,b),M=[];let O=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&M.push(k[C]),f){const W=fG(o,i,_);M.push(k[W[0]],k[W[1]])}if(O=[...O,{placement:o,overflows:M}],!M.every(W=>W<=0)){var F,j;const W=(((F=a.flip)==null?void 0:F.index)||0)+1,q=I[W];if(q&&(!(f==="alignment"?S!==Fa(q):!1)||O.every(z=>Fa(z.placement)===S?z.overflows[0]>0:!0)))return{data:{index:W,overflows:O},reset:{placement:q}};let P=(j=O.filter(U=>U.overflows[0]<=0).sort((U,z)=>U.overflows[1]-z.overflows[1])[0])==null?void 0:j.placement;if(!P)switch(m){case"bestFit":{var G;const U=(G=O.filter(z=>{if(D){const H=Fa(z.placement);return H===S||H==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(H=>H>0).reduce((H,L)=>H+L,0)]).sort((z,H)=>z[1]-H[1])[0])==null?void 0:G[0];U&&(P=U);break}case"initialPlacement":P=s;break}if(o!==P)return{reset:{placement:P}}}return{}}}};function yD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function bD(t){return uG.some(e=>t[e]>=0)}const CG=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=_i(t,e);switch(r){case"referenceHidden":{const a=await ip(e,{...o,elementContext:"reference"}),i=yD(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:bD(i)}}}case"escaped":{const a=await ip(e,{...o,altBoundary:!0}),i=yD(a,n.floating);return{data:{escapedOffsets:i,escaped:bD(i)}}}default:return{}}}}};function JO(t){const e=Ha(...t.map(a=>a.left)),n=Ha(...t.map(a=>a.top)),r=Lr(...t.map(a=>a.right)),o=Lr(...t.map(a=>a.bottom));return{x:e,y:n,width:r-e,height:o-n}}function SG(t){const e=t.slice().sort((o,a)=>o.y-a.y),n=[];let r=null;for(let o=0;o<e.length;o++){const a=e[o];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map(o=>Md(JO(o)))}const EG=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:o,platform:a,strategy:i}=e,{padding:s=2,x:u,y:l}=_i(t,e),d=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),f=SG(d),p=Md(JO(d)),m=GC(s);function g(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(b=>u>b.left-m.left&&u<b.right+m.right&&l>b.top-m.top&&l<b.bottom+m.bottom)||p;if(f.length>=2){if(Fa(n)==="y"){const O=f[0],F=f[f.length-1],j=Ga(n)==="top",G=O.top,W=F.bottom,q=j?O.left:F.left,P=j?O.right:F.right,U=P-q,z=W-G;return{top:G,bottom:W,left:q,right:P,width:U,height:z,x:q,y:G}}const b=Ga(n)==="left",C=Lr(...f.map(O=>O.right)),S=Ha(...f.map(O=>O.left)),E=f.filter(O=>b?O.left===S:O.right===C),_=E[0].top,T=E[E.length-1].bottom,D=S,I=C,k=I-D,M=T-_;return{top:_,bottom:T,left:D,right:I,width:k,height:M,x:D,y:_}}return p}const y=await a.getElementRects({reference:{getBoundingClientRect:g},floating:r.floating,strategy:i});return o.reference.x!==y.reference.x||o.reference.y!==y.reference.y||o.reference.width!==y.reference.width||o.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}},ZO=new Set(["left","top"]);async function RG(t,e){const{placement:n,platform:r,elements:o}=t,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Ga(n),s=lf(n),u=Fa(n)==="y",l=ZO.has(i)?-1:1,d=a&&u?-1:1,f=_i(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof g=="number"&&(m=s==="end"?g*-1:g),u?{x:m*d,y:p*l}:{x:p*l,y:m*d}}const _G=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=e,u=await RG(e,t);return i===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+u.x,y:a+u.y,data:{...u,placement:i}}}}},TG=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:b=>{let{x:C,y:S}=b;return{x:C,y:S}}},...u}=_i(t,e),l={x:n,y:r},d=await ip(e,u),f=Fa(Ga(o)),p=WC(f);let m=l[p],g=l[f];if(a){const b=p==="y"?"top":"left",C=p==="y"?"bottom":"right",S=m+d[b],E=m-d[C];m=o2(S,m,E)}if(i){const b=f==="y"?"top":"left",C=f==="y"?"bottom":"right",S=g+d[b],E=g-d[C];g=o2(S,g,E)}const y=s.fn({...e,[p]:m,[f]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:a,[f]:i}}}}}},AG=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=e,{offset:s=0,mainAxis:u=!0,crossAxis:l=!0}=_i(t,e),d={x:n,y:r},f=Fa(o),p=WC(f);let m=d[p],g=d[f];const y=_i(s,e),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(u){const E=p==="y"?"height":"width",_=a.reference[p]-a.floating[E]+b.mainAxis,T=a.reference[p]+a.reference[E]-b.mainAxis;m<_?m=_:m>T&&(m=T)}if(l){var C,S;const E=p==="y"?"width":"height",_=ZO.has(Ga(o)),T=a.reference[f]-a.floating[E]+(_&&((C=i.offset)==null?void 0:C[f])||0)+(_?0:b.crossAxis),D=a.reference[f]+a.reference[E]+(_?0:((S=i.offset)==null?void 0:S[f])||0)-(_?b.crossAxis:0);g<T?g=T:g>D&&(g=D)}return{[p]:m,[f]:g}}}},NG=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:a,platform:i,elements:s}=e,{apply:u=()=>{},...l}=_i(t,e),d=await ip(e,l),f=Ga(o),p=lf(o),m=Fa(o)==="y",{width:g,height:y}=a.floating;let b,C;f==="top"||f==="bottom"?(b=f,C=p===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(C=f,b=p==="end"?"top":"bottom");const S=y-d.top-d.bottom,E=g-d.left-d.right,_=Ha(y-d[b],S),T=Ha(g-d[C],E),D=!e.middlewareData.shift;let I=_,k=T;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(k=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=S),D&&!p){const O=Lr(d.left,0),F=Lr(d.right,0),j=Lr(d.top,0),G=Lr(d.bottom,0);m?k=g-2*(O!==0||F!==0?O+F:Lr(d.left,d.right)):I=y-2*(j!==0||G!==0?j+G:Lr(d.top,d.bottom))}await u({...e,availableWidth:k,availableHeight:I});const M=await i.getDimensions(s.floating);return g!==M.width||y!==M.height?{reset:{rects:!0}}:{}}}};function e3(t){const e=wa(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Go(t),a=o?t.offsetWidth:n,i=o?t.offsetHeight:r,s=Mg(n)!==a||Mg(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function $C(t){return En(t)?t:t.contextElement}function xd(t){const e=$C(t);if(!Go(e))return Si(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:a}=e3(e);let i=(a?Mg(n.width):n.width)/r,s=(a?Mg(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const DG=Si(0);function t3(t){const e=vo(t);return!Hy()||!e.visualViewport?DG:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function kG(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==vo(t)?!1:e}function jl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),a=$C(t);let i=Si(1);e&&(r?En(r)&&(i=xd(r)):i=xd(t));const s=kG(a,n,r)?t3(a):Si(0);let u=(o.left+s.x)/i.x,l=(o.top+s.y)/i.y,d=o.width/i.x,f=o.height/i.y;if(a){const p=vo(a),m=r&&En(r)?vo(r):r;let g=p,y=n2(g);for(;y&&r&&m!==g;){const b=xd(y),C=y.getBoundingClientRect(),S=wa(y),E=C.left+(y.clientLeft+parseFloat(S.paddingLeft))*b.x,_=C.top+(y.clientTop+parseFloat(S.paddingTop))*b.y;u*=b.x,l*=b.y,d*=b.x,f*=b.y,u+=E,l+=_,g=vo(y),y=n2(g)}}return Md({width:d,height:f,x:u,y:l})}function $y(t,e){const n=Gy(t).scrollLeft;return e?e.left+n:jl(Ii(t)).left+n}function n3(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-$y(t,n),o=n.top+e.scrollTop;return{x:r,y:o}}function IG(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const a=o==="fixed",i=Ii(r),s=e?Vy(e.floating):!1;if(r===i||s&&a)return n;let u={scrollLeft:0,scrollTop:0},l=Si(1);const d=Si(0),f=Go(r);if((f||!f&&!a)&&((uf(r)!=="body"||Pp(i))&&(u=Gy(r)),Go(r))){const m=jl(r);l=xd(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=i&&!f&&!a?n3(i,u):Si(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+d.x+p.x,y:n.y*l.y-u.scrollTop*l.y+d.y+p.y}}function MG(t){return Array.from(t.getClientRects())}function OG(t){const e=Ii(t),n=Gy(t),r=t.ownerDocument.body,o=Lr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Lr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+$y(t);const s=-n.scrollTop;return wa(r).direction==="rtl"&&(i+=Lr(e.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}const xD=25;function PG(t,e){const n=vo(t),r=Ii(t),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,u=0;if(o){a=o.width,i=o.height;const d=Hy();(!d||d&&e==="fixed")&&(s=o.offsetLeft,u=o.offsetTop)}const l=$y(r);if(l<=0){const d=r.ownerDocument,f=d.body,p=getComputedStyle(f),m=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,g=Math.abs(r.clientWidth-f.clientWidth-m);g<=xD&&(a-=g)}else l<=xD&&(a+=l);return{width:a,height:i,x:s,y:u}}const FG=new Set(["absolute","fixed"]);function BG(t,e){const n=jl(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,a=Go(t)?xd(t):Si(1),i=t.clientWidth*a.x,s=t.clientHeight*a.y,u=o*a.x,l=r*a.y;return{width:i,height:s,x:u,y:l}}function wD(t,e,n){let r;if(e==="viewport")r=PG(t,n);else if(e==="document")r=OG(Ii(t));else if(En(e))r=BG(e,n);else{const o=t3(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Md(r)}function r3(t,e){const n=xs(t);return n===e||!En(n)||Du(n)?!1:wa(n).position==="fixed"||r3(n,e)}function LG(t,e){const n=e.get(t);if(n)return n;let r=vs(t,[],!1).filter(s=>En(s)&&uf(s)!=="body"),o=null;const a=wa(t).position==="fixed";let i=a?xs(t):t;for(;En(i)&&!Du(i);){const s=wa(i),u=UC(i);!u&&s.position==="fixed"&&(o=null),(a?!u&&!o:!u&&s.position==="static"&&!!o&&FG.has(o.position)||Pp(i)&&!u&&r3(t,i))?r=r.filter(d=>d!==i):o=s,i=xs(i)}return e.set(t,r),r}function jG(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?Vy(e)?[]:LG(e,this._c):[].concat(n),r],s=i[0],u=i.reduce((l,d)=>{const f=wD(e,d,o);return l.top=Lr(f.top,l.top),l.right=Ha(f.right,l.right),l.bottom=Ha(f.bottom,l.bottom),l.left=Lr(f.left,l.left),l},wD(e,s,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function zG(t){const{width:e,height:n}=e3(t);return{width:e,height:n}}function UG(t,e,n){const r=Go(e),o=Ii(e),a=n==="fixed",i=jl(t,!0,a,e);let s={scrollLeft:0,scrollTop:0};const u=Si(0);function l(){u.x=$y(o)}if(r||!r&&!a)if((uf(e)!=="body"||Pp(o))&&(s=Gy(e)),r){const m=jl(e,!0,a,e);u.x=m.x+e.clientLeft,u.y=m.y+e.clientTop}else o&&l();a&&!r&&o&&l();const d=o&&!r&&!a?n3(o,s):Si(0),f=i.left+s.scrollLeft-u.x-d.x,p=i.top+s.scrollTop-u.y-d.y;return{x:f,y:p,width:i.width,height:i.height}}function k1(t){return wa(t).position==="static"}function CD(t,e){if(!Go(t)||wa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ii(t)===n&&(n=n.ownerDocument.body),n}function o3(t,e){const n=vo(t);if(Vy(t))return n;if(!Go(t)){let o=xs(t);for(;o&&!Du(o);){if(En(o)&&!k1(o))return o;o=xs(o)}return n}let r=CD(t,e);for(;r&&qH(r)&&k1(r);)r=CD(r,e);return r&&Du(r)&&k1(r)&&!UC(r)?n:r||JH(t)||n}const WG=async function(t){const e=this.getOffsetParent||o3,n=this.getDimensions,r=await n(t.floating);return{reference:UG(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function VG(t){return wa(t).direction==="rtl"}const HG={convertOffsetParentRelativeRectToViewportRelativeRect:IG,getDocumentElement:Ii,getClippingRect:jG,getOffsetParent:o3,getElementRects:WG,getClientRects:MG,getDimensions:zG,getScale:xd,isElement:En,isRTL:VG};function a3(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function GG(t,e){let n=null,r;const o=Ii(t);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),a();const l=t.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=l;if(s||e(),!p||!m)return;const g=Ov(f),y=Ov(o.clientWidth-(d+p)),b=Ov(o.clientHeight-(f+m)),C=Ov(d),E={rootMargin:-g+"px "+-y+"px "+-b+"px "+-C+"px",threshold:Lr(0,Ha(1,u))||1};let _=!0;function T(D){const I=D[0].intersectionRatio;if(I!==u){if(!_)return i();I?i(!1,I):r=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!a3(l,t.getBoundingClientRect())&&i(),_=!1}try{n=new IntersectionObserver(T,{...E,root:o.ownerDocument})}catch{n=new IntersectionObserver(T,E)}n.observe(t)}return i(!0),a}function i3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=$C(t),d=o||a?[...l?vs(l):[],...vs(e)]:[];d.forEach(C=>{o&&C.addEventListener("scroll",n,{passive:!0}),a&&C.addEventListener("resize",n)});const f=l&&s?GG(l,n):null;let p=-1,m=null;i&&(m=new ResizeObserver(C=>{let[S]=C;S&&S.target===l&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),n()}),l&&!u&&m.observe(l),m.observe(e));let g,y=u?jl(t):null;u&&b();function b(){const C=jl(t);y&&!a3(y,C)&&n(),y=C,g=requestAnimationFrame(b)}return n(),()=>{var C;d.forEach(S=>{o&&S.removeEventListener("scroll",n),a&&S.removeEventListener("resize",n)}),f?.(),(C=m)==null||C.disconnect(),m=null,u&&cancelAnimationFrame(g)}}const $G=_G,qG=TG,XG=wG,KG=NG,YG=CG,SD=xG,QG=EG,JG=AG,ZG=(t,e,n)=>{const r=new Map,o={platform:HG,...n},a={...o.platform,_c:r};return bG(t,e,{...o,platform:a})};var e$=typeof document<"u",t$=function(){},yg=e$?A.useLayoutEffect:t$;function Pg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Pg(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&t.$$typeof)&&!Pg(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function s3(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ED(t,e){const n=s3(t);return Math.round(e*n)/n}function I1(t){const e=A.useRef(t);return yg(()=>{e.current=t}),e}function n$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:s=!0,whileElementsMounted:u,open:l}=t,[d,f]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=A.useState(r);Pg(p,r)||m(r);const[g,y]=A.useState(null),[b,C]=A.useState(null),S=A.useCallback(z=>{z!==D.current&&(D.current=z,y(z))},[]),E=A.useCallback(z=>{z!==I.current&&(I.current=z,C(z))},[]),_=a||g,T=i||b,D=A.useRef(null),I=A.useRef(null),k=A.useRef(d),M=u!=null,O=I1(u),F=I1(o),j=I1(l),G=A.useCallback(()=>{if(!D.current||!I.current)return;const z={placement:e,strategy:n,middleware:p};F.current&&(z.platform=F.current),ZG(D.current,I.current,z).then(H=>{const L={...H,isPositioned:j.current!==!1};W.current&&!Pg(k.current,L)&&(k.current=L,of.flushSync(()=>{f(L)}))})},[p,e,n,F,j]);yg(()=>{l===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[l]);const W=A.useRef(!1);yg(()=>(W.current=!0,()=>{W.current=!1}),[]),yg(()=>{if(_&&(D.current=_),T&&(I.current=T),_&&T){if(O.current)return O.current(_,T,G);G()}},[_,T,G,O,M]);const q=A.useMemo(()=>({reference:D,floating:I,setReference:S,setFloating:E}),[S,E]),P=A.useMemo(()=>({reference:_,floating:T}),[_,T]),U=A.useMemo(()=>{const z={position:n,left:0,top:0};if(!P.floating)return z;const H=ED(P.floating,d.x),L=ED(P.floating,d.y);return s?{...z,transform:"translate("+H+"px, "+L+"px)",...s3(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:L}},[n,s,P.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:G,refs:q,elements:P,floatingStyles:U}),[d,G,q,P,U])}const r$=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?SD({element:r.current,padding:o}).fn(n):{}:r?SD({element:r,padding:o}).fn(n):{}}}},u3=(t,e)=>({...$G(t),options:[t,e]}),qC=(t,e)=>({...qG(t),options:[t,e]}),RD=(t,e)=>({...JG(t),options:[t,e]}),Fg=(t,e)=>({...XG(t),options:[t,e]}),o$=(t,e)=>({...KG(t),options:[t,e]}),a$=(t,e)=>({...YG(t),options:[t,e]}),Xh=(t,e)=>({...QG(t),options:[t,e]}),l3=(t,e)=>({...r$(t),options:[t,e]});function c3(t){return A.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const d3={...FU},i$=d3.useInsertionEffect,s$=i$||(t=>t());function ls(t){const e=A.useRef(()=>{});return s$(()=>{e.current=t}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var Ei=typeof document<"u"?A.useLayoutEffect:A.useEffect;let _D=!1,u$=0;const TD=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+u$++;function l$(){const[t,e]=A.useState(()=>_D?TD():void 0);return Ei(()=>{t==null&&e(TD())},[]),A.useEffect(()=>{_D=!0},[]),t}const c$=d3.useId,f3=c$||l$;function d$(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const f$=A.createContext(null),h$=A.createContext(null),XC=()=>{var t;return((t=A.useContext(f$))==null?void 0:t.id)||null},KC=()=>A.useContext(h$);function YC(t){return"data-floating-ui-"+t}function M1(t){const e=A.useRef(t);return Ei(()=>{e.current=t}),e}const AD=YC("safe-polygon");function bg(t,e,n){return n&&!r2(n)?0:typeof t=="number"?t:t?.[e]}function h3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:a,elements:i}=t,{enabled:s=!0,delay:u=0,handleClose:l=null,mouseOnly:d=!1,restMs:f=0,move:p=!0}=e,m=KC(),g=XC(),y=M1(l),b=M1(u),C=M1(n),S=A.useRef(),E=A.useRef(-1),_=A.useRef(),T=A.useRef(-1),D=A.useRef(!0),I=A.useRef(!1),k=A.useRef(()=>{}),M=A.useRef(!1),O=A.useCallback(()=>{var U;const z=(U=o.current.openEvent)==null?void 0:U.type;return z?.includes("mouse")&&z!=="mousedown"},[o]);A.useEffect(()=>{if(!s)return;function U(z){let{open:H}=z;H||(clearTimeout(E.current),clearTimeout(T.current),D.current=!0,M.current=!1)}return a.on("openchange",U),()=>{a.off("openchange",U)}},[s,a]),A.useEffect(()=>{if(!s||!y.current||!n)return;function U(H){O()&&r(!1,H,"hover")}const z=Rl(i.floating).documentElement;return z.addEventListener("mouseleave",U),()=>{z.removeEventListener("mouseleave",U)}},[i.floating,n,r,s,y,O]);const F=A.useCallback(function(U,z,H){z===void 0&&(z=!0),H===void 0&&(H="hover");const L=bg(b.current,"close",S.current);L&&!_.current?(clearTimeout(E.current),E.current=window.setTimeout(()=>r(!1,U,H),L)):z&&(clearTimeout(E.current),r(!1,U,H))},[b,r]),j=ls(()=>{k.current(),_.current=void 0}),G=ls(()=>{if(I.current){const U=Rl(i.floating).body;U.style.pointerEvents="",U.removeAttribute(AD),I.current=!1}}),W=ls(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);A.useEffect(()=>{if(!s)return;function U($){if(clearTimeout(E.current),D.current=!1,d&&!r2(S.current)||f>0&&!bg(b.current,"open"))return;const J=bg(b.current,"open",S.current);J?E.current=window.setTimeout(()=>{C.current||r(!0,$,"hover")},J):n||r(!0,$,"hover")}function z($){if(W())return;k.current();const J=Rl(i.floating);if(clearTimeout(T.current),M.current=!1,y.current&&o.current.floatingContext){n||clearTimeout(E.current),_.current=y.current({...o.current.floatingContext,tree:m,x:$.clientX,y:$.clientY,onClose(){G(),j(),W()||F($,!0,"safe-polygon")}});const ce=_.current;J.addEventListener("mousemove",ce),k.current=()=>{J.removeEventListener("mousemove",ce)};return}(S.current==="touch"?!ap(i.floating,$.relatedTarget):!0)&&F($)}function H($){W()||o.current.floatingContext&&(y.current==null||y.current({...o.current.floatingContext,tree:m,x:$.clientX,y:$.clientY,onClose(){G(),j(),W()||F($)}})($))}if(En(i.domReference)){var L;const $=i.domReference;return n&&$.addEventListener("mouseleave",H),(L=i.floating)==null||L.addEventListener("mouseleave",H),p&&$.addEventListener("mousemove",U,{once:!0}),$.addEventListener("mouseenter",U),$.addEventListener("mouseleave",z),()=>{var J;n&&$.removeEventListener("mouseleave",H),(J=i.floating)==null||J.removeEventListener("mouseleave",H),p&&$.removeEventListener("mousemove",U),$.removeEventListener("mouseenter",U),$.removeEventListener("mouseleave",z)}}},[i,s,t,d,f,p,F,j,G,r,n,C,m,b,y,o,W]),Ei(()=>{var U;if(s&&n&&(U=y.current)!=null&&U.__options.blockPointerEvents&&O()){I.current=!0;const H=i.floating;if(En(i.domReference)&&H){var z;const L=Rl(i.floating).body;L.setAttribute(AD,"");const $=i.domReference,J=m==null||(z=m.nodesRef.current.find(ne=>ne.id===g))==null||(z=z.context)==null?void 0:z.elements.floating;return J&&(J.style.pointerEvents=""),L.style.pointerEvents="none",$.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{L.style.pointerEvents="",$.style.pointerEvents="",H.style.pointerEvents=""}}}},[s,n,g,i,m,y,O]),Ei(()=>{n||(S.current=void 0,M.current=!1,j(),G())},[n,j,G]),A.useEffect(()=>()=>{j(),clearTimeout(E.current),clearTimeout(T.current),G()},[s,i.domReference,j,G]);const q=A.useMemo(()=>{function U(z){S.current=z.pointerType}return{onPointerDown:U,onPointerEnter:U,onMouseMove(z){const{nativeEvent:H}=z;function L(){!D.current&&!C.current&&r(!0,H,"hover")}d&&!r2(S.current)||n||f===0||M.current&&z.movementX**2+z.movementY**2<2||(clearTimeout(T.current),S.current==="touch"?L():(M.current=!0,T.current=window.setTimeout(L,f)))}}},[d,r,n,C,f]),P=A.useMemo(()=>({onMouseEnter(){clearTimeout(E.current)},onMouseLeave(U){W()||F(U.nativeEvent,!1)}}),[F,W]);return A.useMemo(()=>s?{reference:q,floating:P}:{},[s,q,P])}const i2=()=>{},p3=A.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:i2,setState:i2,isInstantPhase:!1}),p$=()=>A.useContext(p3);function m3(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,a]=A.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),i=A.useRef(null),s=A.useCallback(u=>{a({currentId:u})},[]);return Ei(()=>{o.currentId?i.current===null?i.current=o.currentId:o.isInstantPhase||a({isInstantPhase:!0}):(o.isInstantPhase&&a({isInstantPhase:!1}),i.current=null)},[o.currentId,o.isInstantPhase]),A.createElement(p3.Provider,{value:A.useMemo(()=>({...o,setState:a,setCurrentId:s}),[o,s])},e)}function v3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:a,enabled:i=!0}=e,s=a??o,u=p$(),{currentId:l,setCurrentId:d,initialDelay:f,setState:p,timeoutMs:m}=u;return Ei(()=>{i&&l&&(p({delay:{open:1,close:bg(f,"close")}}),l!==s&&r(!1))},[i,s,r,p,l,f]),Ei(()=>{function g(){r(!1),p({delay:f,currentId:null})}if(i&&l&&!n&&l===s){if(m){const y=window.setTimeout(g,m);return()=>{clearTimeout(y)}}g()}},[i,n,p,l,s,r,f,m]),Ei(()=>{i&&(d===i2||!n||d(s))},[i,n,d,s]),u}function O1(t,e){let n=t.filter(o=>{var a;return o.parentId===e&&((a=o.context)==null?void 0:a.open)}),r=n;for(;r.length;)r=t.filter(o=>{var a;return(a=r)==null?void 0:a.some(i=>{var s;return o.parentId===i.id&&((s=o.context)==null?void 0:s.open)})}),n=n.concat(r);return n}const m$="data-floating-ui-focusable",v$={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},g$={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ND=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function g3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:a}=t,{enabled:i=!0,escapeKey:s=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:d=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=e,y=KC(),b=ls(typeof u=="function"?u:()=>!1),C=typeof u=="function"?b:u,S=A.useRef(!1),E=A.useRef(!1),{escapeKey:_,outsidePress:T}=ND(m),{escapeKey:D,outsidePress:I}=ND(g),k=A.useRef(!1),M=ls(q=>{var P;if(!n||!i||!s||q.key!=="Escape"||k.current)return;const U=(P=a.current.floatingContext)==null?void 0:P.nodeId,z=y?O1(y.nodesRef.current,U):[];if(!_&&(q.stopPropagation(),z.length>0)){let H=!0;if(z.forEach(L=>{var $;if(($=L.context)!=null&&$.open&&!L.context.dataRef.current.__escapeKeyBubbles){H=!1;return}}),!H)return}r(!1,oG(q)?q.nativeEvent:q,"escape-key")}),O=ls(q=>{var P;const U=()=>{var z;M(q),(z=rd(q))==null||z.removeEventListener("keydown",U)};(P=rd(q))==null||P.addEventListener("keydown",U)}),F=ls(q=>{var P;const U=S.current;S.current=!1;const z=E.current;if(E.current=!1,l==="click"&&z||U||typeof C=="function"&&!C(q))return;const H=rd(q),L="["+YC("inert")+"]",$=Rl(o.floating).querySelectorAll(L);let J=En(H)?H:null;for(;J&&!Du(J);){const se=xs(J);if(Du(se)||!En(se))break;J=se}if($.length&&En(H)&&!aG(H)&&!ap(H,o.floating)&&Array.from($).every(se=>!ap(J,se)))return;if(Go(H)&&W){const se=H.clientWidth>0&&H.scrollWidth>H.clientWidth,oe=H.clientHeight>0&&H.scrollHeight>H.clientHeight;let fe=oe&&q.offsetX>H.clientWidth;if(oe&&wa(H).direction==="rtl"&&(fe=q.offsetX<=H.offsetWidth-H.clientWidth),fe||se&&q.offsetY>H.clientHeight)return}const ne=(P=a.current.floatingContext)==null?void 0:P.nodeId,ce=y&&O1(y.nodesRef.current,ne).some(se=>{var oe;return D1(q,(oe=se.context)==null?void 0:oe.elements.floating)});if(D1(q,o.floating)||D1(q,o.domReference)||ce)return;const be=y?O1(y.nodesRef.current,ne):[];if(be.length>0){let se=!0;if(be.forEach(oe=>{var fe;if((fe=oe.context)!=null&&fe.open&&!oe.context.dataRef.current.__outsidePressBubbles){se=!1;return}}),!se)return}r(!1,q,"outside-press")}),j=ls(q=>{var P;const U=()=>{var z;F(q),(z=rd(q))==null||z.removeEventListener(l,U)};(P=rd(q))==null||P.addEventListener(l,U)});A.useEffect(()=>{if(!n||!i)return;a.current.__escapeKeyBubbles=_,a.current.__outsidePressBubbles=T;let q=-1;function P($){r(!1,$,"ancestor-scroll")}function U(){window.clearTimeout(q),k.current=!0}function z(){q=window.setTimeout(()=>{k.current=!1},Hy()?5:0)}const H=Rl(o.floating);s&&(H.addEventListener("keydown",D?O:M,D),H.addEventListener("compositionstart",U),H.addEventListener("compositionend",z)),C&&H.addEventListener(l,I?j:F,I);let L=[];return p&&(En(o.domReference)&&(L=vs(o.domReference)),En(o.floating)&&(L=L.concat(vs(o.floating))),!En(o.reference)&&o.reference&&o.reference.contextElement&&(L=L.concat(vs(o.reference.contextElement)))),L=L.filter($=>{var J;return $!==((J=H.defaultView)==null?void 0:J.visualViewport)}),L.forEach($=>{$.addEventListener("scroll",P,{passive:!0})}),()=>{s&&(H.removeEventListener("keydown",D?O:M,D),H.removeEventListener("compositionstart",U),H.removeEventListener("compositionend",z)),C&&H.removeEventListener(l,I?j:F,I),L.forEach($=>{$.removeEventListener("scroll",P)}),window.clearTimeout(q)}},[a,o,s,C,l,n,r,p,i,_,T,M,D,O,F,I,j]),A.useEffect(()=>{S.current=!1},[C,l]);const G=A.useMemo(()=>({onKeyDown:M,[v$[f]]:q=>{d&&r(!1,q.nativeEvent,"reference-press")}}),[M,r,d,f]),W=A.useMemo(()=>({onKeyDown:M,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[g$[l]]:()=>{S.current=!0}}),[M,l]);return A.useMemo(()=>i?{reference:G,floating:W}:{},[i,G,W])}function y$(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=f3(),a=A.useRef({}),[i]=A.useState(()=>d$()),s=XC()!=null,[u,l]=A.useState(r.reference),d=ls((m,g,y)=>{a.current.openEvent=m?g:void 0,i.emit("openchange",{open:m,event:g,reason:y,nested:s}),n?.(m,g,y)}),f=A.useMemo(()=>({setPositionReference:l}),[]),p=A.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return A.useMemo(()=>({dataRef:a,open:e,onOpenChange:d,elements:p,events:i,floatingId:o,refs:f}),[e,d,p,i,o,f])}function qy(t){t===void 0&&(t={});const{nodeId:e}=t,n=y$({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[a,i]=A.useState(null),[s,u]=A.useState(null),d=o?.domReference||a,f=A.useRef(null),p=KC();Ei(()=>{d&&(f.current=d)},[d]);const m=n$({...t,elements:{...o,...s&&{reference:s}}}),g=A.useCallback(E=>{const _=En(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;u(_),m.refs.setReference(_)},[m.refs]),y=A.useCallback(E=>{(En(E)||E===null)&&(f.current=E,i(E)),(En(m.refs.reference.current)||m.refs.reference.current===null||E!==null&&!En(E))&&m.refs.setReference(E)},[m.refs]),b=A.useMemo(()=>({...m.refs,setReference:y,setPositionReference:g,domReference:f}),[m.refs,y,g]),C=A.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),S=A.useMemo(()=>({...m,...r,refs:b,elements:C,nodeId:e}),[m,b,C,e,r]);return Ei(()=>{r.dataRef.current.floatingContext=S;const E=p?.nodesRef.current.find(_=>_.id===e);E&&(E.context=S)}),A.useMemo(()=>({...m,context:S,refs:b,elements:C}),[m,b,C,S])}function b$(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:a,elements:i}=t,{enabled:s=!0,visibleOnly:u=!0}=e,l=A.useRef(!1),d=A.useRef(),f=A.useRef(!0);A.useEffect(()=>{if(!s)return;const m=vo(i.domReference);function g(){!n&&Go(i.domReference)&&i.domReference===hD(Rl(i.domReference))&&(l.current=!0)}function y(){f.current=!0}return m.addEventListener("blur",g),m.addEventListener("keydown",y,!0),()=>{m.removeEventListener("blur",g),m.removeEventListener("keydown",y,!0)}},[i.domReference,n,s]),A.useEffect(()=>{if(!s)return;function m(g){let{reason:y}=g;(y==="reference-press"||y==="escape-key")&&(l.current=!0)}return o.on("openchange",m),()=>{o.off("openchange",m)}},[o,s]),A.useEffect(()=>()=>{clearTimeout(d.current)},[]);const p=A.useMemo(()=>({onPointerDown(m){eG(m.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(m){if(l.current)return;const g=rd(m.nativeEvent);if(u&&En(g))try{if(tG()&&nG())throw Error();if(!g.matches(":focus-visible"))return}catch{if(!f.current&&!sG(g))return}r(!0,m.nativeEvent,"focus")},onBlur(m){l.current=!1;const g=m.relatedTarget,y=m.nativeEvent,b=En(g)&&g.hasAttribute(YC("focus-guard"))&&g.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var C;const S=hD(i.domReference?i.domReference.ownerDocument:document);!g&&S===i.domReference||ap((C=a.current.floatingContext)==null?void 0:C.refs.floating.current,S)||ap(i.domReference,S)||b||r(!1,y,"focus")})}}),[a,i.domReference,r,u]);return A.useMemo(()=>s?{reference:p}:{},[s,p])}const DD="active",kD="selected";function P1(t,e,n){const r=new Map,o=n==="item";let a=t;if(o&&t){const{[DD]:i,[kD]:s,...u}=t;a=u}return{...n==="floating"&&{tabIndex:-1,[m$]:""},...a,...e.map(i=>{const s=i?i[n]:null;return typeof s=="function"?t?s(t):null:s}).concat(t).reduce((i,s)=>(s&&Object.entries(s).forEach(u=>{let[l,d]=u;if(!(o&&[DD,kD].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof d=="function"){var f;(f=r.get(l))==null||f.push(d),i[l]=function(){for(var p,m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return(p=r.get(l))==null?void 0:p.map(b=>b(...g)).find(b=>b!==void 0)}}}else i[l]=d}),i),{})}}function y3(t){t===void 0&&(t=[]);const e=t.map(s=>s?.reference),n=t.map(s=>s?.floating),r=t.map(s=>s?.item),o=A.useCallback(s=>P1(s,t,"reference"),e),a=A.useCallback(s=>P1(s,t,"floating"),n),i=A.useCallback(s=>P1(s,t,"item"),r);return A.useMemo(()=>({getReferenceProps:o,getFloatingProps:a,getItemProps:i}),[o,a,i])}const x$=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function b3(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:a=!0,role:i="dialog"}=e,s=(n=x$.get(i))!=null?n:i,u=f3(),d=XC()!=null,f=A.useMemo(()=>s==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":r?o:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:u},...s==="menu"&&d&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[s,o,d,r,u,i]),p=A.useMemo(()=>{const g={id:o,...s&&{role:s}};return s==="tooltip"||i==="label"?g:{...g,...s==="menu"&&{"aria-labelledby":u}}},[s,o,u,i]),m=A.useCallback(g=>{let{active:y,selected:b}=g;const C={role:"option",...y&&{id:o+"-option"}};switch(i){case"select":return{...C,"aria-selected":y&&b};case"combobox":return{...C,...y&&{"aria-selected":!0}}}return{}},[o,i]);return A.useMemo(()=>a?{reference:f,floating:p,item:m}:{},[a,f,p,m])}const[w$,Ta]=_a("ScrollArea.Root component was not found in tree");function Od(t,e){const n=wl(e);af(()=>{let r=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(r),o.unobserve(t)}}},[t,n])}const C$=A.forwardRef((t,e)=>{const{style:n,...r}=t,o=Ta(),[a,i]=A.useState(0),[s,u]=A.useState(0),l=!!(a&&s);return Od(o.scrollbarX,()=>{const d=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(d),u(d)}),Od(o.scrollbarY,()=>{const d=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(d),i(d)}),l?w.jsx("div",{...r,ref:e,style:{...n,width:a,height:s}}):null}),S$=A.forwardRef((t,e)=>{const n=Ta(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?w.jsx(C$,{...t,ref:e}):null}),E$={scrollHideDelay:1e3,type:"hover"},x3=A.forwardRef((t,e)=>{const{type:n,scrollHideDelay:r,scrollbars:o,getStyles:a,...i}=Te("ScrollAreaRoot",E$,t),[s,u]=A.useState(null),[l,d]=A.useState(null),[f,p]=A.useState(null),[m,g]=A.useState(null),[y,b]=A.useState(null),[C,S]=A.useState(0),[E,_]=A.useState(0),[T,D]=A.useState(!1),[I,k]=A.useState(!1),M=tr(e,O=>u(O));return w.jsx(w$,{value:{type:n,scrollHideDelay:r,scrollArea:s,viewport:l,onViewportChange:d,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:T,onScrollbarXEnabledChange:D,scrollbarY:y,onScrollbarYChange:b,scrollbarYEnabled:I,onScrollbarYEnabledChange:k,onCornerWidthChange:S,onCornerHeightChange:_,getStyles:a},children:w.jsx(le,{...i,ref:M,__vars:{"--sa-corner-width":o!=="xy"?"0px":`${C}px`,"--sa-corner-height":o!=="xy"?"0px":`${E}px`}})})});x3.displayName="@mantine/core/ScrollAreaRoot";function w3(t,e){const n=t/e;return Number.isNaN(n)?0:n}function Xy(t){const e=w3(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function C3(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function R$(t,[e,n]){return Math.min(n,Math.max(e,t))}function ID(t,e,n="ltr"){const r=Xy(e),o=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-o,i=e.content-e.viewport,s=a-r,u=n==="ltr"?[0,i]:[i*-1,0],l=R$(t,u);return C3([0,i],[0,s])(l)}function _$(t,e,n,r="ltr"){const o=Xy(n),a=o/2,i=e||a,s=o-i,u=n.scrollbar.paddingStart+i,l=n.scrollbar.size-n.scrollbar.paddingEnd-s,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return C3([u,l],f)(t)}function S3(t,e){return t>0&&t<e}function yu(t){return t?parseInt(t,10):0}function Il(t,e,{checkForDefaultPrevented:n=!0}={}){return r=>{t?.(r),(n===!1||!r.defaultPrevented)&&e?.(r)}}const[T$,E3]=_a("ScrollAreaScrollbar was not found in tree"),R3=A.forwardRef((t,e)=>{const{sizes:n,hasThumb:r,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:i,onThumbPositionChange:s,onDragScroll:u,onWheelScroll:l,onResize:d,...f}=t,p=Ta(),[m,g]=A.useState(null),y=tr(e,k=>g(k)),b=A.useRef(null),C=A.useRef(""),{viewport:S}=p,E=n.content-n.viewport,_=wl(l),T=wl(s),D=Fy(d,10),I=k=>{if(b.current){const M=k.clientX-b.current.left,O=k.clientY-b.current.top;u({x:M,y:O})}};return A.useEffect(()=>{const k=M=>{const O=M.target;m?.contains(O)&&_(M,E)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[S,m,E,_]),A.useEffect(T,[n,T]),Od(m,D),Od(p.content,D),w.jsx(T$,{value:{scrollbar:m,hasThumb:r,onThumbChange:wl(o),onThumbPointerUp:wl(a),onThumbPositionChange:T,onThumbPointerDown:wl(i)},children:w.jsx("div",{...f,ref:y,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:Il(t.onPointerDown,k=>{k.preventDefault(),k.button===0&&(k.target.setPointerCapture(k.pointerId),b.current=m.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I(k))}),onPointerMove:Il(t.onPointerMove,I),onPointerUp:Il(t.onPointerUp,k=>{const M=k.target;M.hasPointerCapture(k.pointerId)&&(k.preventDefault(),M.releasePointerCapture(k.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=C.current,b.current=null}})})}),_3=A.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,style:o,...a}=t,i=Ta(),[s,u]=A.useState(),l=A.useRef(null),d=tr(e,l,i.onScrollbarXChange);return A.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),w.jsx(R3,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{...o,"--sa-thumb-width":`${Xy(n)}px`},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(i.viewport){const m=i.viewport.scrollLeft+f.deltaX;t.onWheelScroll(m),S3(m,p)&&f.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:yu(s.paddingLeft),paddingEnd:yu(s.paddingRight)}})}})});_3.displayName="@mantine/core/ScrollAreaScrollbarX";const T3=A.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,style:o,...a}=t,i=Ta(),[s,u]=A.useState(),l=A.useRef(null),d=tr(e,l,i.onScrollbarYChange);return A.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),w.jsx(R3,{...a,"data-orientation":"vertical",ref:d,sizes:n,style:{"--sa-thumb-height":`${Xy(n)}px`,...o},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(i.viewport){const m=i.viewport.scrollTop+f.deltaY;t.onWheelScroll(m),S3(m,p)&&f.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:yu(s.paddingTop),paddingEnd:yu(s.paddingBottom)}})}})});T3.displayName="@mantine/core/ScrollAreaScrollbarY";const Ky=A.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,{dir:o}=Op(),a=Ta(),i=A.useRef(null),s=A.useRef(0),[u,l]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=w3(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:m=>{i.current=m},onThumbPointerUp:()=>{s.current=0},onThumbPointerDown:m=>{s.current=m}},p=(m,g)=>_$(m,s.current,u,g);return n==="horizontal"?w.jsx(_3,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=ID(m,u,o);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=p(m,o))}}):n==="vertical"?w.jsx(T3,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=ID(m,u);u.scrollbar.size===0?i.current.style.setProperty("--thumb-opacity","0"):i.current.style.setProperty("--thumb-opacity","1"),i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=p(m))}}):null});Ky.displayName="@mantine/core/ScrollAreaScrollbarVisible";const QC=A.forwardRef((t,e)=>{const n=Ta(),{forceMount:r,...o}=t,[a,i]=A.useState(!1),s=t.orientation==="horizontal",u=Fy(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(s?l:d)}},10);return Od(n.viewport,u),Od(n.content,u),r||a?w.jsx(Ky,{"data-state":a?"visible":"hidden",...o,ref:e}):null});QC.displayName="@mantine/core/ScrollAreaScrollbarAuto";const A3=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Ta(),[a,i]=A.useState(!1);return A.useEffect(()=>{const{scrollArea:s}=o;let u=0;if(s){const l=()=>{window.clearTimeout(u),i(!0)},d=()=>{u=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return s.addEventListener("pointerenter",l),s.addEventListener("pointerleave",d),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",l),s.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),n||a?w.jsx(QC,{"data-state":a?"visible":"hidden",...r,ref:e}):null});A3.displayName="@mantine/core/ScrollAreaScrollbarHover";const A$=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Ta(),a=t.orientation==="horizontal",[i,s]=A.useState("hidden"),u=Fy(()=>s("idle"),100);return A.useEffect(()=>{if(i==="idle"){const l=window.setTimeout(()=>s("hidden"),o.scrollHideDelay);return()=>window.clearTimeout(l)}},[i,o.scrollHideDelay]),A.useEffect(()=>{const{viewport:l}=o,d=a?"scrollLeft":"scrollTop";if(l){let f=l[d];const p=()=>{const m=l[d];f!==m&&(s("scrolling"),u()),f=m};return l.addEventListener("scroll",p),()=>l.removeEventListener("scroll",p)}},[o.viewport,a,u]),n||i!=="hidden"?w.jsx(Ky,{"data-state":i==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Il(t.onPointerEnter,()=>s("interacting")),onPointerLeave:Il(t.onPointerLeave,()=>s("idle"))}):null}),s2=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Ta(),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=o,s=t.orientation==="horizontal";return A.useEffect(()=>(s?a(!0):i(!0),()=>{s?a(!1):i(!1)}),[s,a,i]),o.type==="hover"?w.jsx(A3,{...r,ref:e,forceMount:n}):o.type==="scroll"?w.jsx(A$,{...r,ref:e,forceMount:n}):o.type==="auto"?w.jsx(QC,{...r,ref:e,forceMount:n}):o.type==="always"?w.jsx(Ky,{...r,ref:e}):null});s2.displayName="@mantine/core/ScrollAreaScrollbar";function N$(t,e=()=>{}){let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function o(){const a={left:t.scrollLeft,top:t.scrollTop},i=n.left!==a.left,s=n.top!==a.top;(i||s)&&e(),n=a,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)}const N3=A.forwardRef((t,e)=>{const{style:n,...r}=t,o=Ta(),a=E3(),{onThumbPositionChange:i}=a,s=tr(e,d=>a.onThumbChange(d)),u=A.useRef(void 0),l=Fy(()=>{u.current&&(u.current(),u.current=void 0)},100);return A.useEffect(()=>{const{viewport:d}=o;if(d){const f=()=>{if(l(),!u.current){const p=N$(d,i);u.current=p,i()}};return i(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[o.viewport,l,i]),w.jsx("div",{"data-state":a.hasThumb?"visible":"hidden",...r,ref:s,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Il(t.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),m=d.clientX-p.left,g=d.clientY-p.top;a.onThumbPointerDown({x:m,y:g})}),onPointerUp:Il(t.onPointerUp,a.onThumbPointerUp)})});N3.displayName="@mantine/core/ScrollAreaThumb";const u2=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=E3();return n||o.hasThumb?w.jsx(N3,{ref:e,...r}):null});u2.displayName="@mantine/core/ScrollAreaThumb";const D3=A.forwardRef(({children:t,style:e,...n},r)=>{const o=Ta(),a=tr(r,o.onViewportChange);return w.jsx(le,{...n,ref:a,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e},children:w.jsx("div",{...o.getStyles("content"),ref:o.onContentChange,children:t})})});D3.displayName="@mantine/core/ScrollAreaViewport";var JC={root:"m_d57069b5",content:"m_b1336c6",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const k3={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},D$=(t,{scrollbarSize:e,overscrollBehavior:n})=>({root:{"--scrollarea-scrollbar-size":Ae(e),"--scrollarea-over-scroll-behavior":n}}),Yo=ze((t,e)=>{const n=Te("ScrollArea",k3,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,scrollbarSize:u,vars:l,type:d,scrollHideDelay:f,viewportProps:p,viewportRef:m,onScrollPositionChange:g,children:y,offsetScrollbars:b,scrollbars:C,onBottomReached:S,onTopReached:E,overscrollBehavior:_,attributes:T,...D}=n,[I,k]=A.useState(!1),[M,O]=A.useState(!1),[F,j]=A.useState(!1),G=at({name:"ScrollArea",props:n,classes:JC,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:T,vars:l,varsResolver:D$}),W=A.useRef(null),q=c3([m,W]);return A.useEffect(()=>{if(!W.current||b!=="present")return;const P=W.current,U=new ResizeObserver(()=>{const{scrollHeight:z,clientHeight:H,scrollWidth:L,clientWidth:$}=P;O(z>H),j(L>$)});return U.observe(P),()=>U.disconnect()},[W,b]),w.jsxs(x3,{getStyles:G,type:d==="never"?"always":d,scrollHideDelay:f,ref:e,scrollbars:C,...G("root"),...D,children:[w.jsx(D3,{...p,...G("viewport",{style:p?.style}),ref:q,"data-offset-scrollbars":b===!0?"xy":b||void 0,"data-scrollbars":C||void 0,"data-horizontal-hidden":b==="present"&&!F?"true":void 0,"data-vertical-hidden":b==="present"&&!M?"true":void 0,onScroll:P=>{p?.onScroll?.(P),g?.({x:P.currentTarget.scrollLeft,y:P.currentTarget.scrollTop});const{scrollTop:U,scrollHeight:z,clientHeight:H}=P.currentTarget;U-(z-H)>=-.6&&S?.(),U===0&&E?.()},children:y}),(C==="xy"||C==="x")&&w.jsx(s2,{...G("scrollbar"),orientation:"horizontal","data-hidden":d==="never"||b==="present"&&!F?!0:void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:w.jsx(u2,{...G("thumb")})}),(C==="xy"||C==="y")&&w.jsx(s2,{...G("scrollbar"),orientation:"vertical","data-hidden":d==="never"||b==="present"&&!M?!0:void 0,forceMount:!0,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:w.jsx(u2,{...G("thumb")})}),w.jsx(S$,{...G("corner"),"data-hovered":I||void 0,"data-hidden":d==="never"||void 0})]})});Yo.displayName="@mantine/core/ScrollArea";const ZC=ze((t,e)=>{const{children:n,classNames:r,styles:o,scrollbarSize:a,scrollHideDelay:i,type:s,dir:u,offsetScrollbars:l,viewportRef:d,onScrollPositionChange:f,unstyled:p,variant:m,viewportProps:g,scrollbars:y,style:b,vars:C,onBottomReached:S,onTopReached:E,onOverflowChange:_,...T}=Te("ScrollAreaAutosize",k3,t),D=A.useRef(null),I=c3([d,D]),[k,M]=A.useState(!1),O=A.useRef(!1);return A.useEffect(()=>{if(!_)return;const F=D.current;if(!F)return;const j=()=>{const W=F.scrollHeight>F.clientHeight;W!==k&&(O.current?_?.(W):(O.current=!0,W&&_?.(!0)),M(W))};j();const G=new ResizeObserver(j);return G.observe(F),()=>G.disconnect()},[_,k]),w.jsx(le,{...T,ref:e,style:[{display:"flex",overflow:"hidden"},b],children:w.jsx(le,{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden",...y==="y"&&{minWidth:0},...y==="x"&&{minHeight:0},...y==="xy"&&{minWidth:0,minHeight:0},...y===!1&&{minWidth:0,minHeight:0}},children:w.jsx(Yo,{classNames:r,styles:o,scrollHideDelay:i,scrollbarSize:a,type:s,dir:u,offsetScrollbars:l,viewportRef:I,onScrollPositionChange:f,unstyled:p,variant:m,viewportProps:g,vars:C,scrollbars:y,onBottomReached:S,onTopReached:E,"data-autosize":"true",children:n})})})});Yo.classes=JC;ZC.displayName="@mantine/core/ScrollAreaAutosize";ZC.classes=JC;Yo.Autosize=ZC;var I3={root:"m_87cf2631"};const k$={__staticSelector:"UnstyledButton"},$a=ao((t,e)=>{const n=Te("UnstyledButton",k$,t),{className:r,component:o="button",__staticSelector:a,unstyled:i,classNames:s,styles:u,style:l,attributes:d,...f}=n,p=at({name:a,props:n,classes:I3,className:r,style:l,classNames:s,styles:u,unstyled:i,attributes:d});return w.jsx(le,{...p("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...f})});$a.classes=I3;$a.displayName="@mantine/core/UnstyledButton";var M3={root:"m_515a97f8"};const eS=ze((t,e)=>{const n=Te("VisuallyHidden",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,attributes:l,...d}=n,f=at({name:"VisuallyHidden",classes:M3,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:l});return w.jsx(le,{component:"span",ref:e,...f("root"),...d})});eS.classes=M3;eS.displayName="@mantine/core/VisuallyHidden";var O3={root:"m_1b7284a3"};const I$=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:On(e),"--paper-shadow":IC(n)}}),Qo=ao((t,e)=>{const n=Te("Paper",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,withBorder:u,vars:l,radius:d,shadow:f,variant:p,mod:m,attributes:g,...y}=n,b=at({name:"Paper",props:n,classes:O3,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:l,varsResolver:I$});return w.jsx(le,{ref:e,mod:[{"data-with-border":u},m],...b("root"),variant:p,...y})});Qo.classes=O3;Qo.displayName="@mantine/core/Paper";function MD(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function OD(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const M$={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function O$({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:a,arrowY:i,dir:s}){const[u,l="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[M$[u]]:r},f=-e/2;return u==="left"?{...d,...MD(l,i,n,o),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...d,...MD(l,i,n,o),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...d,...OD(l,a,n,o,s),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...d,...OD(l,a,n,o,s),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const Bg=A.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:a,arrowX:i,arrowY:s,style:u,...l},d)=>{const{dir:f}=Op();return a?w.jsx("div",{...l,ref:d,style:{...u,...O$({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:f,arrowX:i,arrowY:s})}}):null});Bg.displayName="@mantine/core/FloatingArrow";function P3(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}var F3={root:"m_9814e45f"};const P$={zIndex:oo("modal")},F$=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:a,zIndex:i})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&ci(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${Ae(o)})`:void 0,"--overlay-radius":a===void 0?void 0:On(a),"--overlay-z-index":i?.toString()}}),Yy=ao((t,e)=>{const n=Te("Overlay",P$,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,fixed:l,center:d,children:f,radius:p,zIndex:m,gradient:g,blur:y,color:b,backgroundOpacity:C,mod:S,attributes:E,..._}=n,T=at({name:"Overlay",props:n,classes:F3,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:E,vars:u,varsResolver:F$});return w.jsx(le,{ref:e,...T("root"),mod:[{center:d,fixed:l},S],..._,children:f})});Yy.classes=F3;Yy.displayName="@mantine/core/Overlay";function F1(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function B$({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||F1(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=F1(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return F1(n)}const L$={reuseTargetNode:!0},B3=ze((t,e)=>{const{children:n,target:r,reuseTargetNode:o,...a}=Te("Portal",L$,t),[i,s]=A.useState(!1),u=A.useRef(null);return af(()=>(s(!0),u.current=B$({target:r,reuseTargetNode:o,...a}),rp(e,u.current),!r&&!o&&u.current&&document.body.appendChild(u.current),()=>{!r&&!o&&u.current&&document.body.removeChild(u.current)}),[r]),!i||!u.current?null:of.createPortal(w.jsx(w.Fragment,{children:n}),u.current)});B3.displayName="@mantine/core/Portal";const ku=ze(({withinPortal:t=!0,children:e,...n},r)=>Uy()==="test"||!t?w.jsx(w.Fragment,{children:e}):w.jsx(B3,{ref:r,...n,children:e}));ku.displayName="@mantine/core/OptionalPortal";const Mh=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Pv={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Mh("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Mh("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Mh("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Mh("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Mh("top"),common:{transformOrigin:"top right"}}},PD={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function j$({transition:t,state:e,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in Pv?{transitionProperty:Pv[t].transitionProperty,...o,...Pv[t].common,...Pv[t][PD[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[PD[e]]}}function z$({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:a,onEntered:i,onExited:s,enterDelay:u,exitDelay:l}){const d=$r(),f=By(),p=d.respectReducedMotion?f:!1,[m,g]=A.useState(p?0:t),[y,b]=A.useState(r?"entered":"exited"),C=A.useRef(-1),S=A.useRef(-1),E=A.useRef(-1);function _(){window.clearTimeout(C.current),window.clearTimeout(S.current),cancelAnimationFrame(E.current)}const T=I=>{_();const k=I?o:a,M=I?i:s,O=p?0:I?t:e;g(O),O===0?(typeof k=="function"&&k(),typeof M=="function"&&M(),b(I?"entered":"exited")):E.current=requestAnimationFrame(()=>{fd.flushSync(()=>{b(I?"pre-entering":"pre-exiting")}),E.current=requestAnimationFrame(()=>{typeof k=="function"&&k(),b(I?"entering":"exiting"),C.current=window.setTimeout(()=>{typeof M=="function"&&M(),b(I?"entered":"exited")},O)})})},D=I=>{if(_(),typeof(I?u:l)!="number"){T(I);return}S.current=window.setTimeout(()=>{T(I)},I?u:l)};return Su(()=>{D(r)},[r]),A.useEffect(()=>()=>{_()},[]),{transitionDuration:m,transitionStatus:y,transitionTimingFunction:n||"ease"}}function ws({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:a,timingFunction:i="ease",onExit:s,onEntered:u,onEnter:l,onExited:d,enterDelay:f,exitDelay:p}){const m=Uy(),{transitionDuration:g,transitionStatus:y,transitionTimingFunction:b}=z$({mounted:o,exitDuration:r,duration:n,timingFunction:i,onExit:s,onEntered:u,onEnter:l,onExited:d,enterDelay:f,exitDelay:p});return g===0||m==="test"?o?w.jsx(w.Fragment,{children:a({})}):t?a({display:"none"}):null:y==="exited"?t?a({display:"none"}):null:w.jsx(w.Fragment,{children:a(j$({transition:e,duration:g,state:y,timingFunction:b}))})}ws.displayName="@mantine/core/Transition";const[U$,L3]=_a("Popover component was not found in the tree");function Qy({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=p8(e),a=tr(o,r);return Lu(t)?A.cloneElement(t,{[n]:a}):t}function j3(t){return w.jsx(eS,{tabIndex:-1,"data-autofocus":!0,...t})}Qy.displayName="@mantine/core/FocusTrap";j3.displayName="@mantine/core/FocusTrapInitialFocus";Qy.InitialFocus=j3;var z3={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const tS=ze((t,e)=>{const n=Te("PopoverDropdown",null,t),{className:r,style:o,vars:a,children:i,onKeyDownCapture:s,variant:u,classNames:l,styles:d,...f}=n,p=L3(),m=DO({opened:p.opened,shouldReturnFocus:p.returnFocus}),g=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},y=tr(e,p.floating);return p.disabled?null:w.jsx(ku,{...p.portalProps,withinPortal:p.withinPortal,children:w.jsx(ws,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:typeof p.transitionProps?.exitDuration=="number"?p.transitionProps.exitDuration:p.transitionProps?.duration,children:b=>w.jsx(Qy,{active:p.trapFocus&&p.opened,innerRef:y,children:w.jsxs(le,{...g,...f,variant:u,onKeyDownCapture:ZV(()=>{p.onClose?.(),p.onDismiss?.()},{active:p.closeOnEscape,onTrigger:m,onKeyDown:s}),"data-position":p.placement,"data-fixed":p.floatingStrategy==="fixed"||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:l,styles:d,style:[{...b,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:p.width==="target"?void 0:Ae(p.width),...p.referenceHidden?{display:"none"}:null},p.resolvedStyles.dropdown,d?.dropdown,o]}),children:[i,w.jsx(Bg,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:l,styles:d})})]})})})})});tS.classes=z3;tS.displayName="@mantine/core/PopoverDropdown";const W$={refProp:"ref",popupType:"dialog"},U3=ze((t,e)=>{const{children:n,refProp:r,popupType:o,...a}=Te("PopoverTarget",W$,t);if(!Lu(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=a,s=L3(),u=tr(s.reference,Ly(n),e),l=s.withRoles?{"aria-haspopup":o,"aria-expanded":s.opened,"aria-controls":s.getDropdownId(),id:s.getTargetId()}:{};return A.cloneElement(n,{...i,...l,...s.targetProps,className:lr(s.targetProps.className,i.className,n.props.className),[r]:u,...s.controlled?null:{onClick:()=>{s.onToggle(),n.props.onClick?.()}}})});U3.displayName="@mantine/core/PopoverTarget";function V$(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function H$(t,e,n){const r=V$(t.middlewares),o=[u3(t.offset),a$()];return t.dropdownVisible&&n!=="test"&&t.preventPositionChangeWhenVisible&&(r.flip=!1,r.shift=!1),r.shift&&o.push(qC(typeof r.shift=="boolean"?{limiter:RD(),padding:5}:{limiter:RD(),padding:5,...r.shift})),r.flip&&o.push(typeof r.flip=="boolean"?Fg():Fg(r.flip)),r.inline&&o.push(typeof r.inline=="boolean"?Xh():Xh(r.inline)),o.push(l3({element:t.arrowRef,padding:t.arrowOffset})),(r.size||t.width==="target")&&o.push(o$({...typeof r.size=="boolean"?{}:r.size,apply({rects:a,availableWidth:i,availableHeight:s,...u}){const d=e().refs.floating.current?.style??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:a,availableWidth:i,availableHeight:s,...u}):Object.assign(d,{maxWidth:`${i}px`,maxHeight:`${s}px`})),t.width==="target"&&Object.assign(d,{width:`${a.reference.width}px`})}})),o}function G$(t){const e=Uy(),[n,r]=xa({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),o=A.useRef(n),a=()=>{n&&!t.disabled&&r(!1)},i=()=>{t.disabled||r(!n)},s=qy({strategy:t.strategy,placement:t.preventPositionChangeWhenVisible?t.positionRef.current:t.position,middleware:H$(t,()=>s,e)});return A.useEffect(()=>{if(!(!s.refs.reference.current||!s.refs.floating.current)&&n)return i3(s.refs.reference.current,s.refs.floating.current,s.update)},[n,s.update]),Su(()=>{t.onPositionChange?.(s.placement),t.positionRef.current=s.placement},[s.placement,t.preventPositionChangeWhenVisible]),Su(()=>{n!==o.current&&(n?t.onOpen?.():t.onClose?.()),o.current=n},[n,t.onClose,t.onOpen]),Su(()=>{let u=-1;return n&&(u=window.setTimeout(()=>t.setDropdownVisible(!0),4)),()=>{window.clearTimeout(u)}},[n,t.position]),{floating:s,controlled:typeof t.opened=="boolean",opened:n,onClose:a,onToggle:i}}const $$={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:oo("popover"),__staticSelector:"Popover",width:"max-content"},q$=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:On(e),"--popover-shadow":IC(n)}});function $o(t){const e=Te("Popover",$$,t),{children:n,position:r,offset:o,onPositionChange:a,positionDependencies:i,opened:s,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:d,width:f,middlewares:p,withArrow:m,arrowSize:g,arrowOffset:y,arrowRadius:b,arrowPosition:C,unstyled:S,classNames:E,styles:_,closeOnClickOutside:T,withinPortal:D,portalProps:I,closeOnEscape:k,clickOutsideEvents:M,trapFocus:O,onClose:F,onDismiss:j,onOpen:G,onChange:W,zIndex:q,radius:P,shadow:U,id:z,defaultOpened:H,__staticSelector:L,withRoles:$,disabled:J,returnFocus:ne,variant:ce,keepMounted:be,vars:se,floatingStrategy:oe,withOverlay:fe,overlayProps:me,hideDetached:Oe,attributes:Be,preventPositionChangeWhenVisible:Le,...De}=e,$e=at({name:L,props:e,classes:z3,classNames:E,styles:_,unstyled:S,attributes:Be,rootSelector:"dropdown",vars:se,varsResolver:q$}),{resolvedStyles:et}=zu({classNames:E,styles:_,props:e}),[ot,Ie]=A.useState(s??H??!1),Me=A.useRef(r),Fe=A.useRef(null),[Ke,ct]=A.useState(null),[qe,Xe]=A.useState(null),{dir:Wt}=Op(),je=Uy(),He=Ko(z),it=G$({middlewares:p,width:f,position:P3(Wt,r),offset:typeof o=="number"?o+(m?g/2:0):o,arrowRef:Fe,arrowOffset:y,onPositionChange:a,positionDependencies:i,opened:s,defaultOpened:H,onChange:W,onOpen:G,onClose:F,onDismiss:j,strategy:oe,dropdownVisible:ot,setDropdownVisible:Ie,positionRef:Me,disabled:J,preventPositionChangeWhenVisible:Le,keepMounted:be});a8(()=>{T&&(it.onClose(),j?.())},M,[Ke,qe]);const zt=A.useCallback(gn=>{ct(gn),it.floating.refs.setReference(gn)},[it.floating.refs.setReference]),Pt=A.useCallback(gn=>{Xe(gn),it.floating.refs.setFloating(gn)},[it.floating.refs.setFloating]),Hn=A.useCallback(()=>{u?.onExited?.(),l?.(),Ie(!1),Me.current=r},[u?.onExited,l]),Qt=A.useCallback(()=>{u?.onEntered?.(),d?.()},[u?.onEntered,d]);return w.jsxs(U$,{value:{returnFocus:ne,disabled:J,controlled:it.controlled,reference:zt,floating:Pt,x:it.floating.x,y:it.floating.y,arrowX:it.floating?.middlewareData?.arrow?.x,arrowY:it.floating?.middlewareData?.arrow?.y,opened:it.opened,arrowRef:Fe,transitionProps:{...u,onExited:Hn,onEntered:Qt},width:f,withArrow:m,arrowSize:g,arrowOffset:y,arrowRadius:b,arrowPosition:C,placement:it.floating.placement,trapFocus:O,withinPortal:D,portalProps:I,zIndex:q,radius:P,shadow:U,closeOnEscape:k,onDismiss:j,onClose:it.onClose,onToggle:it.onToggle,getTargetId:()=>`${He}-target`,getDropdownId:()=>`${He}-dropdown`,withRoles:$,targetProps:De,__staticSelector:L,classNames:E,styles:_,unstyled:S,variant:ce,keepMounted:be,getStyles:$e,resolvedStyles:et,floatingStrategy:oe,referenceHidden:Oe&&je!=="test"?it.floating.middlewareData.hide?.referenceHidden:!1},children:[n,fe&&w.jsx(ws,{transition:"fade",mounted:it.opened,duration:u?.duration||250,exitDuration:u?.exitDuration||250,children:gn=>w.jsx(ku,{withinPortal:D,children:w.jsx(Yy,{...me,...$e("overlay",{className:me?.className,style:[gn,me?.style]})})})})]})}$o.Target=U3;$o.Dropdown=tS;$o.displayName="@mantine/core/Popover";$o.extend=t=>t;var Ba={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const W3=A.forwardRef(({className:t,...e},n)=>w.jsxs(le,{component:"span",className:lr(Ba.barsLoader,t),...e,ref:n,children:[w.jsx("span",{className:Ba.bar}),w.jsx("span",{className:Ba.bar}),w.jsx("span",{className:Ba.bar})]}));W3.displayName="@mantine/core/Bars";const V3=A.forwardRef(({className:t,...e},n)=>w.jsxs(le,{component:"span",className:lr(Ba.dotsLoader,t),...e,ref:n,children:[w.jsx("span",{className:Ba.dot}),w.jsx("span",{className:Ba.dot}),w.jsx("span",{className:Ba.dot})]}));V3.displayName="@mantine/core/Dots";const H3=A.forwardRef(({className:t,...e},n)=>w.jsx(le,{component:"span",className:lr(Ba.ovalLoader,t),...e,ref:n}));H3.displayName="@mantine/core/Oval";const G3={bars:W3,oval:H3,dots:V3},X$={loaders:G3,type:"oval"},K$=(t,{size:e,color:n})=>({root:{"--loader-size":Tt(e,"loader-size"),"--loader-color":n?ur(n,t):void 0}}),Jo=ze((t,e)=>{const n=Te("Loader",X$,t),{size:r,color:o,type:a,vars:i,className:s,style:u,classNames:l,styles:d,unstyled:f,loaders:p,variant:m,children:g,attributes:y,...b}=n,C=at({name:"Loader",props:n,classes:Ba,className:s,style:u,classNames:l,styles:d,unstyled:f,attributes:y,vars:i,varsResolver:K$});return g?w.jsx(le,{...C("root"),ref:e,...b,children:g}):w.jsx(le,{...C("root"),ref:e,component:p[a],variant:m,size:r,...b})});Jo.defaultLoaders=G3;Jo.classes=Ba;Jo.displayName="@mantine/core/Loader";var cf={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const FD={orientation:"horizontal"},Y$=(t,{borderWidth:e})=>({group:{"--ai-border-width":Ae(e)}}),nS=ze((t,e)=>{const n=Te("ActionIconGroup",FD,t),{className:r,style:o,classNames:a,styles:i,unstyled:s,orientation:u,vars:l,borderWidth:d,variant:f,mod:p,attributes:m,...g}=Te("ActionIconGroup",FD,t),y=at({name:"ActionIconGroup",props:n,classes:cf,className:r,style:o,classNames:a,styles:i,unstyled:s,attributes:m,vars:l,varsResolver:Y$,rootSelector:"group"});return w.jsx(le,{...y("group"),ref:e,variant:f,mod:[{"data-orientation":u},p],role:"group",...g})});nS.classes=cf;nS.displayName="@mantine/core/ActionIconGroup";const Q$=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:a,size:i})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{groupSection:{"--section-height":Tt(i,"section-height"),"--section-padding-x":Tt(i,"section-padding-x"),"--section-fz":gr(i),"--section-radius":e===void 0?void 0:On(e),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},rS=ze((t,e)=>{const n=Te("ActionIconGroupSection",null,t),{className:r,style:o,classNames:a,styles:i,unstyled:s,vars:u,variant:l,gradient:d,radius:f,autoContrast:p,attributes:m,...g}=n,y=at({name:"ActionIconGroupSection",props:n,classes:cf,className:r,style:o,classNames:a,styles:i,unstyled:s,attributes:m,vars:u,varsResolver:Q$,rootSelector:"groupSection"});return w.jsx(le,{...y("groupSection"),ref:e,variant:l,...g})});rS.classes=cf;rS.displayName="@mantine/core/ActionIconGroupSection";const J$=(t,{size:e,radius:n,variant:r,gradient:o,color:a,autoContrast:i})=>{const s=t.variantColorResolver({color:a||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ai-size":Tt(e,"ai-size"),"--ai-radius":n===void 0?void 0:On(n),"--ai-bg":a||r?s.background:void 0,"--ai-hover":a||r?s.hover:void 0,"--ai-hover-color":a||r?s.hoverColor:void 0,"--ai-color":s.color,"--ai-bd":a||r?s.border:void 0}}},Rn=ao((t,e)=>{const n=Te("ActionIcon",null,t),{className:r,unstyled:o,variant:a,classNames:i,styles:s,style:u,loading:l,loaderProps:d,size:f,color:p,radius:m,__staticSelector:g,gradient:y,vars:b,children:C,disabled:S,"data-disabled":E,autoContrast:_,mod:T,attributes:D,...I}=n,k=at({name:["ActionIcon",g],props:n,className:r,style:u,classes:cf,classNames:i,styles:s,unstyled:o,attributes:D,vars:b,varsResolver:J$});return w.jsxs($a,{...k("root",{active:!S&&!l&&!E}),...I,unstyled:o,variant:a,size:f,disabled:S||l,ref:e,mod:[{loading:l,disabled:S||E},T],children:[typeof l=="boolean"&&w.jsx(ws,{mounted:l,transition:"slide-down",duration:150,children:M=>w.jsx(le,{component:"span",...k("loader",{style:M}),"aria-hidden":!0,children:w.jsx(Jo,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),w.jsx(le,{component:"span",mod:{loading:l},...k("icon"),children:C})]})});Rn.classes=cf;Rn.displayName="@mantine/core/ActionIcon";Rn.Group=nS;Rn.GroupSection=rS;const $3=A.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));$3.displayName="@mantine/core/CloseIcon";var q3={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Z$={variant:"subtle"},e7=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":Tt(e,"cb-size"),"--cb-radius":n===void 0?void 0:On(n),"--cb-icon-size":Ae(r)}}),Uu=ao((t,e)=>{const n=Te("CloseButton",Z$,t),{iconSize:r,children:o,vars:a,radius:i,className:s,classNames:u,style:l,styles:d,unstyled:f,"data-disabled":p,disabled:m,variant:g,icon:y,mod:b,attributes:C,__staticSelector:S,...E}=n,_=at({name:S||"CloseButton",props:n,className:s,style:l,classes:q3,classNames:u,styles:d,unstyled:f,attributes:C,vars:a,varsResolver:e7});return w.jsxs($a,{ref:e,...E,unstyled:f,variant:g,disabled:m,mod:[{disabled:m||p},b],..._("root",{variant:g,active:!m&&!p}),children:[y||w.jsx($3,{}),o]})});Uu.classes=q3;Uu.displayName="@mantine/core/CloseButton";function t7(t){return A.Children.toArray(t).filter(Boolean)}var X3={root:"m_4081bf90"};const n7={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},r7=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:a,wrap:i},{childWidth:s})=>({root:{"--group-child-width":e&&n?s:void 0,"--group-gap":Vr(r),"--group-align":o,"--group-justify":a,"--group-wrap":i}}),Ge=ze((t,e)=>{const n=Te("Group",n7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,children:u,gap:l,align:d,justify:f,wrap:p,grow:m,preventGrowOverflow:g,vars:y,variant:b,__size:C,mod:S,attributes:E,..._}=n,T=t7(u),D=T.length,I=Vr(l??"md"),M={childWidth:`calc(${100/D}% - (${I} - ${I} / ${D}))`},O=at({name:"Group",props:n,stylesCtx:M,className:o,style:a,classes:X3,classNames:r,styles:i,unstyled:s,attributes:E,vars:y,varsResolver:r7});return w.jsx(le,{...O("root"),ref:e,variant:b,mod:[{grow:m},S],size:C,..._,children:T})});Ge.classes=X3;Ge.displayName="@mantine/core/Group";const[o7,Ss]=_a("ModalBase component was not found in tree");function a7({opened:t,transitionDuration:e}){const[n,r]=A.useState(t),o=A.useRef(-1),i=By()?0:e;return A.useEffect(()=>(t?(r(!0),window.clearTimeout(o.current)):i===0?r(!1):o.current=window.setTimeout(()=>r(!1),i),()=>window.clearTimeout(o.current)),[t,i]),n}function i7({id:t,transitionProps:e,opened:n,trapFocus:r,closeOnEscape:o,onClose:a,returnFocus:i}){const s=Ko(t),[u,l]=A.useState(!1),[d,f]=A.useState(!1),p=typeof e?.duration=="number"?e?.duration:200,m=a7({opened:n,transitionDuration:p});return b8("keydown",g=>{g.key==="Escape"&&o&&!g.isComposing&&n&&g.target?.getAttribute("data-mantine-stop-propagation")!=="true"&&a()},{capture:!0}),DO({opened:n,shouldReturnFocus:r&&i}),{_id:s,titleMounted:u,bodyMounted:d,shouldLockScroll:m,setTitleMounted:l,setBodyMounted:f}}const oS=A.forwardRef(({keepMounted:t,opened:e,onClose:n,id:r,transitionProps:o,onExitTransitionEnd:a,onEnterTransitionEnd:i,trapFocus:s,closeOnEscape:u,returnFocus:l,closeOnClickOutside:d,withinPortal:f,portalProps:p,lockScroll:m,children:g,zIndex:y,shadow:b,padding:C,__vars:S,unstyled:E,removeScrollProps:_,...T},D)=>{const{_id:I,titleMounted:k,bodyMounted:M,shouldLockScroll:O,setTitleMounted:F,setBodyMounted:j}=i7({id:r,transitionProps:o,opened:e,trapFocus:s,closeOnEscape:u,onClose:n,returnFocus:l}),{key:G,...W}=_||{};return w.jsx(ku,{...p,withinPortal:f,children:w.jsx(o7,{value:{opened:e,onClose:n,closeOnClickOutside:d,onExitTransitionEnd:a,onEnterTransitionEnd:i,transitionProps:{...o,keepMounted:t},getTitleId:()=>`${I}-title`,getBodyId:()=>`${I}-body`,titleMounted:k,bodyMounted:M,setTitleMounted:F,setBodyMounted:j,trapFocus:s,closeOnEscape:u,zIndex:y,unstyled:E},children:w.jsx(Dg,{enabled:O&&m,...W,children:w.jsx(le,{ref:D,...T,__vars:{...S,"--mb-z-index":(y||oo("modal")).toString(),"--mb-shadow":IC(b),"--mb-padding":Vr(C)},children:g})},G)})})});oS.displayName="@mantine/core/ModalBase";function s7(){const t=Ss();return A.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var Pd={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const aS=A.forwardRef(({className:t,...e},n)=>{const r=s7(),o=Ss();return w.jsx(le,{ref:n,...e,id:r,className:lr({[Pd.body]:!o.unstyled},t)})});aS.displayName="@mantine/core/ModalBaseBody";const iS=A.forwardRef(({className:t,onClick:e,...n},r)=>{const o=Ss();return w.jsx(Uu,{ref:r,...n,onClick:a=>{o.onClose(),e?.(a)},className:lr({[Pd.close]:!o.unstyled},t),unstyled:o.unstyled})});iS.displayName="@mantine/core/ModalBaseCloseButton";const sS=A.forwardRef(({transitionProps:t,className:e,innerProps:n,onKeyDown:r,style:o,...a},i)=>{const s=Ss();return w.jsx(ws,{mounted:s.opened,transition:"pop",...s.transitionProps,onExited:()=>{s.onExitTransitionEnd?.(),s.transitionProps?.onExited?.()},onEntered:()=>{s.onEnterTransitionEnd?.(),s.transitionProps?.onEntered?.()},...t,children:u=>w.jsx("div",{...n,className:lr({[Pd.inner]:!s.unstyled},n.className),children:w.jsx(Qy,{active:s.opened&&s.trapFocus,innerRef:i,children:w.jsx(Qo,{...a,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":s.bodyMounted?s.getBodyId():void 0,"aria-labelledby":s.titleMounted?s.getTitleId():void 0,style:[o,u],className:lr({[Pd.content]:!s.unstyled},e),unstyled:s.unstyled,children:a.children})})})})});sS.displayName="@mantine/core/ModalBaseContent";const uS=A.forwardRef(({className:t,...e},n)=>{const r=Ss();return w.jsx(le,{component:"header",ref:n,className:lr({[Pd.header]:!r.unstyled},t),...e})});uS.displayName="@mantine/core/ModalBaseHeader";const u7={duration:200,timingFunction:"ease",transition:"fade"};function l7(t){const e=Ss();return{...u7,...e.transitionProps,...t}}const lS=A.forwardRef(({onClick:t,transitionProps:e,style:n,visible:r,...o},a)=>{const i=Ss(),s=l7(e);return w.jsx(ws,{mounted:r!==void 0?r:i.opened,...s,transition:"fade",children:u=>w.jsx(Yy,{ref:a,fixed:!0,style:[n,u],zIndex:i.zIndex,unstyled:i.unstyled,onClick:l=>{t?.(l),i.closeOnClickOutside&&i.onClose()},...o})})});lS.displayName="@mantine/core/ModalBaseOverlay";function c7(){const t=Ss();return A.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const cS=A.forwardRef(({className:t,...e},n)=>{const r=c7(),o=Ss();return w.jsx(le,{component:"h2",ref:n,className:lr({[Pd.title]:!o.unstyled},t),...e,id:r})});cS.displayName="@mantine/core/ModalBaseTitle";function K3({children:t}){return w.jsx(w.Fragment,{children:t})}const[d7,f7]=$l({size:"sm"}),Y3=ze((t,e)=>{const n=Te("InputClearButton",null,t),{size:r,variant:o,vars:a,classNames:i,styles:s,...u}=n,l=f7(),{resolvedClassNames:d,resolvedStyles:f}=zu({classNames:i,styles:s,props:n});return w.jsx(Uu,{variant:o||"transparent",ref:e,size:r||l?.size||"sm",classNames:d,styles:f,__staticSelector:"InputClearButton",...u})});Y3.displayName="@mantine/core/InputClearButton";const[h7,df]=$l({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Aa={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const p7=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${gr(e)} - ${Ae(2)})`}}),Jy=ze((t,e)=>{const n=Te("InputDescription",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,__staticSelector:d,__inheritStyles:f=!0,attributes:p,variant:m,...g}=Te("InputDescription",null,n),y=df(),b=at({name:["InputWrapper",d],props:n,classes:Aa,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:p,rootSelector:"description",vars:u,varsResolver:p7}),C=f&&y?.getStyles||b;return w.jsx(le,{component:"p",ref:e,variant:m,size:l,...C("description",y?.getStyles?{className:o,style:a}:void 0),...g})});Jy.classes=Aa;Jy.displayName="@mantine/core/InputDescription";const m7=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${gr(e)} - ${Ae(2)})`}}),Zy=ze((t,e)=>{const n=Te("InputError",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,attributes:d,__staticSelector:f,__inheritStyles:p=!0,variant:m,...g}=n,y=at({name:["InputWrapper",f],props:n,classes:Aa,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:d,rootSelector:"error",vars:u,varsResolver:m7}),b=df(),C=p&&b?.getStyles||y;return w.jsx(le,{component:"p",ref:e,variant:m,size:l,...C("error",b?.getStyles?{className:o,style:a}:void 0),...g})});Zy.classes=Aa;Zy.displayName="@mantine/core/InputError";const BD={labelElement:"label"},v7=(t,{size:e})=>({label:{"--input-label-size":gr(e),"--input-asterisk-color":void 0}}),e0=ze((t,e)=>{const n=Te("InputLabel",BD,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,labelElement:l,size:d,required:f,htmlFor:p,onMouseDown:m,children:g,__staticSelector:y,variant:b,mod:C,attributes:S,...E}=Te("InputLabel",BD,n),_=at({name:["InputWrapper",y],props:n,classes:Aa,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:S,rootSelector:"label",vars:u,varsResolver:v7}),T=df(),D=T?.getStyles||_;return w.jsxs(le,{...D("label",T?.getStyles?{className:o,style:a}:void 0),component:l,variant:b,size:d,ref:e,htmlFor:l==="label"?p:void 0,mod:[{required:f},C],onMouseDown:I=>{m?.(I),!I.defaultPrevented&&I.detail>1&&I.preventDefault()},...E,children:[g,f&&w.jsx("span",{...D("required"),"aria-hidden":!0,children:" *"})]})});e0.classes=Aa;e0.displayName="@mantine/core/InputLabel";const dS=ze((t,e)=>{const n=Te("InputPlaceholder",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,__staticSelector:l,variant:d,error:f,mod:p,attributes:m,...g}=n,y=at({name:["InputPlaceholder",l],props:n,classes:Aa,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:m,rootSelector:"placeholder"});return w.jsx(le,{...y("placeholder"),mod:[{error:!!f},p],component:"span",variant:d,ref:e,...g})});dS.classes=Aa;dS.displayName="@mantine/core/InputPlaceholder";function g7(t,{hasDescription:e,hasError:n}){const r=t.findIndex(u=>u==="input"),o=t.slice(0,r),a=t.slice(r+1),i=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&a.includes("description")||n&&a.includes("error"),offsetTop:i}}const y7={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},b7=(t,{size:e})=>({label:{"--input-label-size":gr(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${gr(e)} - ${Ae(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${gr(e)} - ${Ae(2)})`}}),fS=ze((t,e)=>{const n=Te("InputWrapper",y7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,variant:d,__staticSelector:f,inputContainer:p,inputWrapperOrder:m,label:g,error:y,description:b,labelProps:C,descriptionProps:S,errorProps:E,labelElement:_,children:T,withAsterisk:D,id:I,required:k,__stylesApiProps:M,mod:O,attributes:F,...j}=n,G=at({name:["InputWrapper",f],props:M||n,classes:Aa,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:F,vars:u,varsResolver:b7}),W={size:l,variant:d,__staticSelector:f},q=Ko(I),P=typeof D=="boolean"?D:k,U=E?.id||`${q}-error`,z=S?.id||`${q}-description`,H=q,L=!!y&&typeof y!="boolean",$=!!b,J=`${L?U:""} ${$?z:""}`,ne=J.trim().length>0?J.trim():void 0,ce=C?.id||`${q}-label`,be=g&&w.jsx(e0,{labelElement:_,id:ce,htmlFor:H,required:P,...W,...C,children:g},"label"),se=$&&w.jsx(Jy,{...S,...W,size:S?.size||W.size,id:S?.id||z,children:b},"description"),oe=w.jsx(A.Fragment,{children:p(T)},"input"),fe=L&&A.createElement(Zy,{...E,...W,size:E?.size||W.size,key:"error",id:E?.id||U},y),me=m.map(Oe=>{switch(Oe){case"label":return be;case"input":return oe;case"description":return se;case"error":return fe;default:return null}});return w.jsx(h7,{value:{getStyles:G,describedBy:ne,inputId:H,labelId:ce,...g7(m,{hasDescription:$,hasError:L})},children:w.jsx(le,{ref:e,variant:d,size:l,mod:[{error:!!y},O],...G("root"),...j,children:me})})});fS.classes=Aa;fS.displayName="@mantine/core/InputWrapper";const x7={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0,size:"sm"},w7=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Tt(e.size,"input-height"),"--input-fz":gr(e.size),"--input-radius":e.radius===void 0?void 0:On(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?Ae(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?Ae(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Tt(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Kn=ao((t,e)=>{const n=Te("Input",x7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,required:u,__staticSelector:l,__stylesApiProps:d,size:f,wrapperProps:p,error:m,disabled:g,leftSection:y,leftSectionProps:b,leftSectionWidth:C,rightSection:S,rightSectionProps:E,rightSectionWidth:_,rightSectionPointerEvents:T,leftSectionPointerEvents:D,variant:I,vars:k,pointer:M,multiline:O,radius:F,id:j,withAria:G,withErrorStyles:W,mod:q,inputSize:P,attributes:U,__clearSection:z,__clearable:H,__defaultRightSection:L,...$}=n,{styleProps:J,rest:ne}=sf($),ce=df(),be={offsetBottom:ce?.offsetBottom,offsetTop:ce?.offsetTop},se=at({name:["Input",l],props:d||n,classes:Aa,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:U,stylesCtx:be,rootSelector:"wrapper",vars:k,varsResolver:w7}),oe=G?{required:u,disabled:g,"aria-invalid":!!m,"aria-describedby":ce?.describedBy,id:ce?.inputId||j}:{},fe=S||H&&z||L;return w.jsx(d7,{value:{size:f||"sm"},children:w.jsxs(le,{...se("wrapper"),...J,...p,mod:[{error:!!m&&W,pointer:M,disabled:g,multiline:O,"data-with-right-section":!!fe,"data-with-left-section":!!y},q],variant:I,size:f,children:[y&&w.jsx("div",{...b,"data-position":"left",...se("section",{className:b?.className,style:b?.style}),children:y}),w.jsx(le,{component:"input",...ne,...oe,ref:e,required:u,mod:{disabled:g,error:!!m&&W},variant:I,__size:P,...se("input")}),fe&&w.jsx("div",{...E,"data-position":"right",...se("section",{className:E?.className,style:E?.style}),children:fe})]})})});Kn.classes=Aa;Kn.Wrapper=fS;Kn.Label=e0;Kn.Error=Zy;Kn.Description=Jy;Kn.Placeholder=dS;Kn.ClearButton=Y3;Kn.displayName="@mantine/core/Input";function C7(t,e,n){const r=Te(t,e,n),{label:o,description:a,error:i,required:s,classNames:u,styles:l,className:d,unstyled:f,__staticSelector:p,__stylesApiProps:m,errorProps:g,labelProps:y,descriptionProps:b,wrapperProps:C,id:S,size:E,style:_,inputContainer:T,inputWrapperOrder:D,withAsterisk:I,variant:k,vars:M,mod:O,attributes:F,...j}=r,{styleProps:G,rest:W}=sf(j),q={label:o,description:a,error:i,required:s,classNames:u,className:d,__staticSelector:p,__stylesApiProps:m||r,errorProps:g,labelProps:y,descriptionProps:b,unstyled:f,styles:l,size:E,style:_,inputContainer:T,inputWrapperOrder:D,withAsterisk:I,variant:k,id:S,mod:O,attributes:F,...C};return{...W,classNames:u,styles:l,unstyled:f,wrapperProps:{...q,...G},inputProps:{required:s,classNames:u,styles:l,unstyled:f,size:E,__staticSelector:p,__stylesApiProps:m||r,error:i,variant:k,id:S,attributes:F}}}const S7={__staticSelector:"InputBase",withAria:!0,size:"sm"},io=ao((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=C7("InputBase",S7,t);return w.jsx(Kn.Wrapper,{...r,children:w.jsx(Kn,{...n,...o,ref:e})})});io.classes={...Kn.classes,...Kn.Wrapper.classes};io.displayName="@mantine/core/InputBase";function E7(t,e){if(!e||!t)return!1;let n=e.parentNode;for(;n!=null;){if(n===t)return!0;n=n.parentNode}return!1}function R7({target:t,parent:e,ref:n,displayAfterTransitionEnd:r}){const o=A.useRef(-1),[a,i]=A.useState(!1),[s,u]=A.useState(typeof r=="boolean"?r:!1),l=()=>{if(!t||!e||!n.current)return;const m=t.getBoundingClientRect(),g=e.getBoundingClientRect(),y=window.getComputedStyle(t),b=window.getComputedStyle(e),C=yu(y.borderTopWidth)+yu(b.borderTopWidth),S=yu(y.borderLeftWidth)+yu(b.borderLeftWidth),E={top:m.top-g.top-C,left:m.left-g.left-S,width:m.width,height:m.height};n.current.style.transform=`translateY(${E.top}px) translateX(${E.left}px)`,n.current.style.width=`${E.width}px`,n.current.style.height=`${E.height}px`},d=()=>{window.clearTimeout(o.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),o.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=A.useRef(null),p=A.useRef(null);return A.useEffect(()=>{if(l(),t)return f.current=new ResizeObserver(d),f.current.observe(t),e&&(p.current=new ResizeObserver(d),p.current.observe(e)),()=>{f.current?.disconnect(),p.current?.disconnect()}},[e,t]),A.useEffect(()=>{if(e){const m=g=>{E7(g.target,e)&&(d(),u(!1))};return e.addEventListener("transitionend",m),()=>{e.removeEventListener("transitionend",m)}}},[e]),E8(()=>{PO()!=="test"&&i(!0)},20,{autoInvoke:!0}),_8(m=>{m.forEach(g=>{g.type==="attributes"&&g.attributeName==="dir"&&d()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:a,hidden:s}}var Q3={root:"m_96b553a6"};const _7=(t,{transitionDuration:e})=>({root:{"--transition-duration":typeof e=="number"?`${e}ms`:e}}),hS=ze((t,e)=>{const n=Te("FloatingIndicator",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,target:l,parent:d,transitionDuration:f,mod:p,displayAfterTransitionEnd:m,attributes:g,...y}=n,b=at({name:"FloatingIndicator",classes:Q3,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:u,varsResolver:_7}),C=A.useRef(null),{initialized:S,hidden:E}=R7({target:l,parent:d,ref:C,displayAfterTransitionEnd:m}),_=tr(e,C);return!l||!d?null:w.jsx(le,{ref:_,mod:[{initialized:S,hidden:E},p],...b("root"),...y})});hS.displayName="@mantine/core/FloatingIndicator";hS.classes=Q3;var J3={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const T7=(t,{radius:e,color:n,variant:r,autoContrast:o})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,variant:r||"light",autoContrast:o});return{root:{"--alert-radius":e===void 0?void 0:On(e),"--alert-bg":n||r?a.background:void 0,"--alert-color":a.color,"--alert-bd":n||r?a.border:void 0}}},vi=ze((t,e)=>{const n=Te("Alert",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,radius:l,color:d,title:f,children:p,id:m,icon:g,withCloseButton:y,onClose:b,closeButtonLabel:C,variant:S,autoContrast:E,attributes:_,...T}=n,D=at({name:"Alert",classes:J3,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:_,vars:u,varsResolver:T7}),I=Ko(m),k=f&&`${I}-title`||void 0,M=`${I}-body`;return w.jsx(le,{id:I,...D("root",{variant:S}),variant:S,ref:e,...T,role:"alert","aria-describedby":M,"aria-labelledby":k,children:w.jsxs("div",{...D("wrapper"),children:[g&&w.jsx("div",{...D("icon"),children:g}),w.jsxs("div",{...D("body"),children:[f&&w.jsx("div",{...D("title"),"data-with-close-button":y||void 0,children:w.jsx("span",{id:k,...D("label"),children:f})}),p&&w.jsx("div",{id:M,...D("message"),"data-variant":S,children:p})]}),y&&w.jsx(Uu,{...D("closeButton"),onClick:b,variant:"transparent",size:16,iconSize:16,"aria-label":C,unstyled:s})]})})});vi.classes=J3;vi.displayName="@mantine/core/Alert";var Z3={root:"m_b6d8b162"};function A7(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const N7={inherit:!1},D7=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:a})=>({root:{"--text-fz":gr(o),"--text-lh":AO(o),"--text-gradient":e==="gradient"?Jw(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":a?ur(a,t):void 0}}),we=ao((t,e)=>{const n=Te("Text",N7,t),{lineClamp:r,truncate:o,inline:a,inherit:i,gradient:s,span:u,__staticSelector:l,vars:d,className:f,style:p,classNames:m,styles:g,unstyled:y,variant:b,mod:C,size:S,attributes:E,..._}=n,T=at({name:["Text",l],props:n,classes:Z3,className:f,style:p,classNames:m,styles:g,unstyled:y,attributes:E,vars:d,varsResolver:D7});return w.jsx(le,{...T("root",{focusable:!0}),ref:e,component:u?"span":"p",variant:b,mod:[{"data-truncate":A7(o),"data-line-clamp":typeof r=="number","data-inline":a,"data-inherit":i},C],size:S,..._})});we.classes=Z3;we.displayName="@mantine/core/Text";var e4={root:"m_849cf0da"};const k7={underline:"hover"},t0=ao((t,e)=>{const{underline:n,className:r,unstyled:o,mod:a,...i}=Te("Anchor",k7,t);return w.jsx(we,{component:"a",ref:e,className:lr({[e4.root]:!o},r),...i,mod:[{underline:n},a],__staticSelector:"Anchor",unstyled:o})});t0.classes=e4;t0.displayName="@mantine/core/Anchor";function t4(t){return typeof t=="string"?{value:t,label:t}:"value"in t&&!("label"in t)?{value:t.value,label:t.value,disabled:t.disabled}:typeof t=="number"?{value:t.toString(),label:t.toString()}:"group"in t?{group:t.group,items:t.items.map(e=>t4(e))}:t}function n4(t){return t?t.map(e=>t4(e)):[]}function pS(t){return t.reduce((e,n)=>"group"in n?{...e,...pS(n.items)}:(e[n.value]=n,e),{})}var Co={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const I7={error:null},M7=(t,{size:e,color:n})=>({chevron:{"--combobox-chevron-size":Tt(e,"combobox-chevron-size"),"--combobox-chevron-color":n?ur(n,t):void 0}}),mS=ze((t,e)=>{const n=Te("ComboboxChevron",I7,t),{size:r,error:o,style:a,className:i,classNames:s,styles:u,unstyled:l,vars:d,mod:f,...p}=n,m=at({name:"ComboboxChevron",classes:Co,props:n,style:a,className:i,classNames:s,styles:u,unstyled:l,vars:d,varsResolver:M7,rootSelector:"chevron"});return w.jsx(le,{component:"svg",...p,...m("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:o},f],ref:e,children:w.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});mS.classes=Co;mS.displayName="@mantine/core/ComboboxChevron";const[O7,Na]=_a("Combobox component was not found in tree"),r4=A.forwardRef(({size:t,onMouseDown:e,onClick:n,onClear:r,...o},a)=>w.jsx(Kn.ClearButton,{ref:a,tabIndex:-1,"aria-hidden":!0,...o,onMouseDown:i=>{i.preventDefault(),e?.(i)},onClick:i=>{r(),n?.(i)}}));r4.displayName="@mantine/core/ComboboxClearButton";const vS=ze((t,e)=>{const{classNames:n,styles:r,className:o,style:a,hidden:i,...s}=Te("ComboboxDropdown",null,t),u=Na();return w.jsx($o.Dropdown,{...s,ref:e,role:"presentation","data-hidden":i||void 0,...u.getStyles("dropdown",{className:o,style:a,classNames:n,styles:r})})});vS.classes=Co;vS.displayName="@mantine/core/ComboboxDropdown";const P7={refProp:"ref"},o4=ze((t,e)=>{const{children:n,refProp:r}=Te("ComboboxDropdownTarget",P7,t);if(Na(),!Lu(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return w.jsx($o.Target,{ref:e,refProp:r,children:n})});o4.displayName="@mantine/core/ComboboxDropdownTarget";const gS=ze((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,...s}=Te("ComboboxEmpty",null,t),u=Na();return w.jsx(le,{ref:e,...u.getStyles("empty",{className:r,classNames:n,styles:a,style:o}),...s})});gS.classes=Co;gS.displayName="@mantine/core/ComboboxEmpty";function yS({onKeyDown:t,withKeyboardNavigation:e,withAriaAttributes:n,withExpandedAttribute:r,targetType:o,autoComplete:a}){const i=Na(),[s,u]=A.useState(null),l=f=>{if(t?.(f),!i.readOnly&&e){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),i.store.dropdownOpened?u(i.store.selectNextOption()):(i.store.openDropdown("keyboard"),u(i.store.selectActiveOption()),i.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),i.store.dropdownOpened?u(i.store.selectPreviousOption()):(i.store.openDropdown("keyboard"),u(i.store.selectActiveOption()),i.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const p=i.store.getSelectedOptionIndex();i.store.dropdownOpened&&p!==-1?(f.preventDefault(),i.store.clickSelectedOption()):o==="button"&&(f.preventDefault(),i.store.openDropdown("keyboard"))}f.key==="Escape"&&i.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&o==="button"&&(f.preventDefault(),i.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r?!!(i.store.listId&&i.store.dropdownOpened):void 0,"aria-controls":i.store.dropdownOpened&&i.store.listId?i.store.listId:void 0,"aria-activedescendant":i.store.dropdownOpened&&s||void 0,autoComplete:a,"data-expanded":i.store.dropdownOpened||void 0,"data-mantine-stop-propagation":i.store.dropdownOpened||void 0}:{},onKeyDown:l}}const F7={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},a4=ze((t,e)=>{const{children:n,refProp:r,withKeyboardNavigation:o,withAriaAttributes:a,withExpandedAttribute:i,targetType:s,autoComplete:u,...l}=Te("ComboboxEventsTarget",F7,t);if(!Lu(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=Na(),f=yS({targetType:s,withAriaAttributes:a,withKeyboardNavigation:o,withExpandedAttribute:i,onKeyDown:n.props.onKeyDown,autoComplete:u});return A.cloneElement(n,{...f,...l,[r]:tr(e,d.store.targetRef,Ly(n))})});a4.displayName="@mantine/core/ComboboxEventsTarget";const bS=ze((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,...s}=Te("ComboboxFooter",null,t),u=Na();return w.jsx(le,{ref:e,...u.getStyles("footer",{className:r,classNames:n,style:o,styles:a}),...s,onMouseDown:l=>{l.preventDefault()}})});bS.classes=Co;bS.displayName="@mantine/core/ComboboxFooter";const xS=ze((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,children:s,label:u,id:l,...d}=Te("ComboboxGroup",null,t),f=Na(),p=Ko(l);return w.jsxs(le,{ref:e,role:"group","aria-labelledby":u?p:void 0,...f.getStyles("group",{className:r,classNames:n,style:o,styles:a}),...d,children:[u&&w.jsx("div",{id:p,...f.getStyles("groupLabel",{classNames:n,styles:a}),children:u}),s]})});xS.classes=Co;xS.displayName="@mantine/core/ComboboxGroup";const wS=ze((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,...s}=Te("ComboboxHeader",null,t),u=Na();return w.jsx(le,{ref:e,...u.getStyles("header",{className:r,classNames:n,style:o,styles:a}),...s,onMouseDown:l=>{l.preventDefault()}})});wS.classes=Co;wS.displayName="@mantine/core/ComboboxHeader";function i4({value:t,valuesDivider:e=",",...n}){return w.jsx("input",{type:"hidden",value:Array.isArray(t)?t.join(e):t||"",...n})}i4.displayName="@mantine/core/ComboboxHiddenInput";const CS=ze((t,e)=>{const n=Te("ComboboxOption",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,onClick:u,id:l,active:d,onMouseDown:f,onMouseOver:p,disabled:m,selected:g,mod:y,...b}=n,C=Na(),S=A.useId(),E=l||S;return w.jsx(le,{...C.getStyles("option",{className:o,classNames:r,styles:i,style:a}),...b,ref:e,id:E,mod:["combobox-option",{"combobox-active":d,"combobox-disabled":m,"combobox-selected":g},y],role:"option",onClick:_=>{m?_.preventDefault():(C.onOptionSubmit?.(n.value,n),u?.(_))},onMouseDown:_=>{_.preventDefault(),f?.(_)},onMouseOver:_=>{C.resetSelectionOnOptionHover&&C.store.resetSelectedOption(),p?.(_)}})});CS.classes=Co;CS.displayName="@mantine/core/ComboboxOption";const SS=ze((t,e)=>{const n=Te("ComboboxOptions",null,t),{classNames:r,className:o,style:a,styles:i,id:s,onMouseDown:u,labelledBy:l,...d}=n,f=Na(),p=Ko(s);return A.useEffect(()=>{f.store.setListId(p)},[p]),w.jsx(le,{ref:e,...f.getStyles("options",{className:o,style:a,classNames:r,styles:i}),...d,id:p,role:"listbox","aria-labelledby":l,onMouseDown:m=>{m.preventDefault(),u?.(m)}})});SS.classes=Co;SS.displayName="@mantine/core/ComboboxOptions";const B7={withAriaAttributes:!0,withKeyboardNavigation:!0},ES=ze((t,e)=>{const n=Te("ComboboxSearch",B7,t),{classNames:r,styles:o,unstyled:a,vars:i,withAriaAttributes:s,onKeyDown:u,withKeyboardNavigation:l,size:d,...f}=n,p=Na(),m=p.getStyles("search"),g=yS({targetType:"input",withAriaAttributes:s,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return w.jsx(Kn,{ref:tr(e,p.store.searchRef),classNames:[{input:m.className},r],styles:[{input:m.style},o],size:d||p.size,...g,...f,__staticSelector:"Combobox"})});ES.classes=Co;ES.displayName="@mantine/core/ComboboxSearch";const L7={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},s4=ze((t,e)=>{const{children:n,refProp:r,withKeyboardNavigation:o,withAriaAttributes:a,withExpandedAttribute:i,targetType:s,autoComplete:u,...l}=Te("ComboboxTarget",L7,t);if(!Lu(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=Na(),f=yS({targetType:s,withAriaAttributes:a,withKeyboardNavigation:o,withExpandedAttribute:i,onKeyDown:n.props.onKeyDown,autoComplete:u}),p=A.cloneElement(n,{...f,...l});return w.jsx($o.Target,{ref:tr(e,d.store.targetRef),children:p})});s4.displayName="@mantine/core/ComboboxTarget";function j7(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r}return t}function z7(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r}return t}function U7(t){for(let e=0;e<t.length;e+=1)if(!t[e].hasAttribute("data-combobox-disabled"))return e;return-1}function RS({defaultOpened:t,opened:e,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:o,loop:a=!0,scrollBehavior:i="instant"}={}){const[s,u]=xa({value:e,defaultValue:t,finalValue:!1,onChange:n}),l=A.useRef(null),d=A.useRef(-1),f=A.useRef(null),p=A.useRef(null),m=A.useRef(-1),g=A.useRef(-1),y=A.useRef(-1),b=A.useCallback((P="unknown")=>{s||(u(!0),o?.(P))},[u,o,s]),C=A.useCallback((P="unknown")=>{s&&(u(!1),r?.(P))},[u,r,s]),S=A.useCallback((P="unknown")=>{s?C(P):b(P)},[C,b,s]),E=A.useCallback(()=>{const P=document.querySelector(`#${l.current} [data-combobox-selected]`);P?.removeAttribute("data-combobox-selected"),P?.removeAttribute("aria-selected")},[]),_=A.useCallback(P=>{const z=document.getElementById(l.current)?.querySelectorAll("[data-combobox-option]");if(!z)return null;const H=P>=z.length?0:P<0?z.length-1:P;return d.current=H,z?.[H]&&!z[H].hasAttribute("data-combobox-disabled")?(E(),z[H].setAttribute("data-combobox-selected","true"),z[H].setAttribute("aria-selected","true"),z[H].scrollIntoView({block:"nearest",behavior:i}),z[H].id):null},[i,E]),T=A.useCallback(()=>{const P=document.querySelector(`#${l.current} [data-combobox-active]`);if(P){const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),z=Array.from(U).findIndex(H=>H===P);return _(z)}return _(0)},[_]),D=A.useCallback(()=>_(z7(d.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),a)),[_,a]),I=A.useCallback(()=>_(j7(d.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),a)),[_,a]),k=A.useCallback(()=>_(U7(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[_]),M=A.useCallback((P="selected",U)=>{y.current=window.setTimeout(()=>{const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(z).findIndex(L=>L.hasAttribute(`data-combobox-${P}`));d.current=H,U?.scrollIntoView&&z[H]?.scrollIntoView({block:"nearest",behavior:i})},0)},[]),O=A.useCallback(()=>{d.current=-1,E()},[E]),F=A.useCallback(()=>{document.querySelectorAll(`#${l.current} [data-combobox-option]`)?.[d.current]?.click()},[]),j=A.useCallback(P=>{l.current=P},[]),G=A.useCallback(()=>{m.current=window.setTimeout(()=>f.current.focus(),0)},[]),W=A.useCallback(()=>{g.current=window.setTimeout(()=>p.current.focus(),0)},[]),q=A.useCallback(()=>d.current,[]);return A.useEffect(()=>()=>{window.clearTimeout(m.current),window.clearTimeout(g.current),window.clearTimeout(y.current)},[]),{dropdownOpened:s,openDropdown:b,closeDropdown:C,toggleDropdown:S,selectedOptionIndex:d.current,getSelectedOptionIndex:q,selectOption:_,selectFirstOption:k,selectActiveOption:T,selectNextOption:D,selectPreviousOption:I,resetSelectedOption:O,updateSelectedOptionIndex:M,listId:l.current,setListId:j,clickSelectedOption:F,searchRef:f,focusSearchInput:G,targetRef:p,focusTarget:W}}const W7={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0},size:"sm"},V7=(t,{size:e,dropdownPadding:n})=>({options:{"--combobox-option-fz":gr(e),"--combobox-option-padding":Tt(e,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ae(n),"--combobox-option-fz":gr(e),"--combobox-option-padding":Tt(e,"combobox-option-padding")}});function Ut(t){const e=Te("Combobox",W7,t),{classNames:n,styles:r,unstyled:o,children:a,store:i,vars:s,onOptionSubmit:u,onClose:l,size:d,dropdownPadding:f,resetSelectionOnOptionHover:p,__staticSelector:m,readOnly:g,attributes:y,...b}=e,C=RS(),S=i||C,E=at({name:m||"Combobox",classes:Co,props:e,classNames:n,styles:r,unstyled:o,attributes:y,vars:s,varsResolver:V7}),_=()=>{l?.(),S.closeDropdown()};return w.jsx(O7,{value:{getStyles:E,store:S,onOptionSubmit:u,size:d,resetSelectionOnOptionHover:p,readOnly:g},children:w.jsx($o,{opened:S.dropdownOpened,preventPositionChangeWhenVisible:!0,...b,onChange:T=>!T&&_(),withRoles:!1,unstyled:o,children:a})})}const H7=t=>t;Ut.extend=H7;Ut.classes=Co;Ut.displayName="@mantine/core/Combobox";Ut.Target=s4;Ut.Dropdown=vS;Ut.Options=SS;Ut.Option=CS;Ut.Search=ES;Ut.Empty=gS;Ut.Chevron=mS;Ut.Footer=bS;Ut.Header=wS;Ut.EventsTarget=a4;Ut.DropdownTarget=o4;Ut.Group=xS;Ut.ClearButton=r4;Ut.HiddenInput=i4;var u4={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const G7=u4,l4=A.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:n,classNames:r,styles:o,unstyled:a,children:i,label:s,description:u,id:l,disabled:d,error:f,size:p,labelPosition:m="left",bodyElement:g="div",labelElement:y="label",variant:b,style:C,vars:S,mod:E,attributes:_,...T},D)=>{const I=at({name:t,props:e,className:n,style:C,classes:u4,classNames:r,styles:o,unstyled:a,attributes:_});return w.jsx(le,{...I("root"),ref:D,__vars:{"--label-fz":gr(p),"--label-lh":Tt(p,"label-lh")},mod:[{"label-position":m},E],variant:b,size:p,...T,children:w.jsxs(le,{component:g,htmlFor:g==="label"?l:void 0,...I("body"),children:[i,w.jsxs("div",{...I("labelWrapper"),"data-disabled":d||void 0,children:[s&&w.jsx(le,{component:y,htmlFor:y==="label"?l:void 0,...I("label"),"data-disabled":d||void 0,children:s}),u&&w.jsx(Kn.Description,{size:p,__inheritStyles:!1,...I("description"),children:u}),f&&typeof f!="boolean"&&w.jsx(Kn.Error,{size:p,__inheritStyles:!1,...I("error"),children:f})]})]})})});l4.displayName="@mantine/core/InlineInput";const c4=A.createContext(null),$7=c4.Provider,d4=()=>A.useContext(c4),[q7,X7]=$l();var f4={card:"m_26775b0a"};const K7={withBorder:!0},Y7=(t,{radius:e})=>({card:{"--card-radius":On(e)}}),_S=ze((t,e)=>{const n=Te("CheckboxCard",K7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,checked:l,mod:d,withBorder:f,value:p,onClick:m,defaultChecked:g,onChange:y,attributes:b,...C}=n,S=at({name:"CheckboxCard",classes:f4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:b,vars:u,varsResolver:Y7,rootSelector:"card"}),E=d4(),_=typeof l=="boolean"?l:E?E.value.includes(p||""):void 0,[T,D]=xa({value:_,defaultValue:g,finalValue:!1,onChange:y});return w.jsx(q7,{value:{checked:T},children:w.jsx($a,{ref:e,mod:[{"with-border":f,checked:T},d],...S("card"),...C,role:"checkbox","aria-checked":T,onClick:I=>{m?.(I),E?.onChange(p||""),D(!T)}})})});_S.displayName="@mantine/core/CheckboxCard";_S.classes=f4;function Q7({children:t,role:e}){const n=df();return n?w.jsx("div",{role:e,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:t}):w.jsx(w.Fragment,{children:t})}const TS=ze((t,e)=>{const{value:n,defaultValue:r,onChange:o,size:a,wrapperProps:i,children:s,readOnly:u,...l}=Te("CheckboxGroup",null,t),[d,f]=xa({value:n,defaultValue:r,finalValue:[],onChange:o}),p=m=>{const g=typeof m=="string"?m:m.currentTarget.value;!u&&f(d.includes(g)?d.filter(y=>y!==g):[...d,g])};return w.jsx($7,{value:{value:d,onChange:p,size:a},children:w.jsx(Kn.Wrapper,{size:a,ref:e,...i,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:w.jsx(Q7,{role:"group",children:s})})})});TS.classes=Kn.Wrapper.classes;TS.displayName="@mantine/core/CheckboxGroup";function h4({size:t,style:e,...n}){const r=t!==void 0?{width:Ae(t),height:Ae(t),...e}:e;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function p4({indeterminate:t,...e}){return t?w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...e,children:w.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):w.jsx(h4,{...e})}var m4={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const J7={icon:p4},Z7=(t,{radius:e,color:n,size:r,iconColor:o,variant:a,autoContrast:i})=>{const s=ql({color:n||t.primaryColor,theme:t}),u=s.isThemeColor&&s.shade===void 0?`var(--mantine-color-${s.color}-outline)`:s.color;return{indicator:{"--checkbox-size":Tt(r,"checkbox-size"),"--checkbox-radius":e===void 0?void 0:On(e),"--checkbox-color":a==="outline"?u:ur(n,t),"--checkbox-icon-color":o?ur(o,t):BC(i,t)?Mp({color:n,theme:t,autoContrast:i}):void 0}}},AS=ze((t,e)=>{const n=Te("CheckboxIndicator",J7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,icon:l,indeterminate:d,radius:f,color:p,iconColor:m,autoContrast:g,checked:y,mod:b,variant:C,disabled:S,attributes:E,..._}=n,T=at({name:"CheckboxIndicator",classes:m4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:E,vars:u,varsResolver:Z7,rootSelector:"indicator"}),D=X7(),I=typeof y=="boolean"||typeof d=="boolean"?y||d:D?.checked||!1;return w.jsx(le,{ref:e,...T("indicator",{variant:C}),variant:C,mod:[{checked:I,disabled:S},b],..._,children:w.jsx(l,{indeterminate:d,...T("icon")})})});AS.displayName="@mantine/core/CheckboxIndicator";AS.classes=m4;var v4={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const eq={labelPosition:"right",icon:p4},tq=(t,{radius:e,color:n,size:r,iconColor:o,variant:a,autoContrast:i})=>{const s=ql({color:n||t.primaryColor,theme:t}),u=s.isThemeColor&&s.shade===void 0?`var(--mantine-color-${s.color}-outline)`:s.color;return{root:{"--checkbox-size":Tt(r,"checkbox-size"),"--checkbox-radius":e===void 0?void 0:On(e),"--checkbox-color":a==="outline"?u:ur(n,t),"--checkbox-icon-color":o?ur(o,t):BC(i,t)?Mp({color:n,theme:t,autoContrast:i}):void 0}}},ff=ze((t,e)=>{const n=Te("Checkbox",eq,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,color:l,label:d,id:f,size:p,radius:m,wrapperProps:g,checked:y,labelPosition:b,description:C,error:S,disabled:E,variant:_,indeterminate:T,icon:D,rootRef:I,iconColor:k,onChange:M,autoContrast:O,mod:F,attributes:j,...G}=n,W=d4(),q=p||W?.size,P=at({name:"Checkbox",props:n,classes:v4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:j,vars:u,varsResolver:tq}),{styleProps:U,rest:z}=sf(G),H=Ko(f),L=W?{checked:W.value.includes(z.value),onChange:ne=>{W.onChange(ne),M?.(ne)}}:{},$=A.useRef(null),J=e||$;return A.useEffect(()=>{J&&"current"in J&&J.current&&(J.current.indeterminate=T||!1)},[T,J]),w.jsx(l4,{...P("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:H,size:q,labelPosition:b,label:d,description:C,error:S,disabled:E,classNames:r,styles:i,unstyled:s,"data-checked":L.checked||y||void 0,variant:_,ref:I,mod:F,...U,...g,children:w.jsxs(le,{...P("inner"),mod:{"data-label-position":b},children:[w.jsx(le,{component:"input",id:H,ref:J,checked:y,disabled:E,mod:{error:!!S,indeterminate:T},...P("input",{focusable:!0,variant:_}),onChange:M,...z,...L,type:"checkbox"}),w.jsx(D,{indeterminate:T,...P("icon")})]})})});ff.classes={...v4,...G7};ff.displayName="@mantine/core/Checkbox";ff.Group=TS;ff.Indicator=AS;ff.Card=_S;function Fd(t){return"group"in t}function g4({options:t,search:e,limit:n}){const r=e.trim().toLowerCase(),o=[];for(let a=0;a<t.length;a+=1){const i=t[a];if(o.length===n)return o;Fd(i)&&o.push({group:i.group,items:g4({options:i.items,search:e,limit:n-o.length})}),Fd(i)||i.label.toLowerCase().includes(r)&&o.push(i)}return o}function nq(t){if(t.length===0)return!0;for(const e of t)if(!("group"in e)||e.items.length>0)return!1;return!0}function y4(t,e=new Set){if(Array.isArray(t))for(const n of t)if(Fd(n))y4(n.items,e);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(e.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);e.add(n.value)}}function rq(t,e){return Array.isArray(t)?t.includes(e):t===e}function b4({data:t,withCheckIcon:e,value:n,checkIconPosition:r,unstyled:o,renderOption:a}){if(!Fd(t)){const s=rq(n,t.value),u=e&&s&&w.jsx(h4,{className:Co.optionsDropdownCheckIcon}),l=w.jsxs(w.Fragment,{children:[r==="left"&&u,w.jsx("span",{children:t.label}),r==="right"&&u]});return w.jsx(Ut.Option,{value:t.value,disabled:t.disabled,className:lr({[Co.optionsDropdownOption]:!o}),"data-reverse":r==="right"||void 0,"data-checked":s||void 0,"aria-selected":s,active:s,children:typeof a=="function"?a({option:t,checked:s}):l})}const i=t.items.map(s=>w.jsx(b4,{data:s,value:n,unstyled:o,withCheckIcon:e,checkIconPosition:r,renderOption:a},s.value));return w.jsx(Ut.Group,{label:t.group,children:i})}function x4({data:t,hidden:e,hiddenWhenEmpty:n,filter:r,search:o,limit:a,maxDropdownHeight:i,withScrollArea:s=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:d,checkIconPosition:f,nothingFoundMessage:p,unstyled:m,labelId:g,renderOption:y,scrollAreaProps:b,"aria-label":C}){y4(t);const E=typeof o=="string"?(r||g4)({options:t,search:u?o:"",limit:a??1/0}):t,_=nq(E),T=E.map(D=>w.jsx(b4,{data:D,withCheckIcon:l,value:d,checkIconPosition:f,unstyled:m,renderOption:y},Fd(D)?D.group:D.value));return w.jsx(Ut.Dropdown,{hidden:e||n&&_,"data-composed":!0,children:w.jsxs(Ut.Options,{labelledBy:g,"aria-label":C,children:[s?w.jsx(Yo.Autosize,{mah:i??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...b,children:T}):T,_&&p&&w.jsx(Ut.Empty,{children:p})]})})}var w4={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const oq=(t,{radius:e,color:n,gradient:r,variant:o,size:a,autoContrast:i})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{root:{"--badge-height":Tt(a,"badge-height"),"--badge-padding-x":Tt(a,"badge-padding-x"),"--badge-fz":Tt(a,"badge-fz"),"--badge-radius":e===void 0?void 0:On(e),"--badge-bg":n||o?s.background:void 0,"--badge-color":n||o?s.color:void 0,"--badge-bd":n||o?s.border:void 0,"--badge-dot-color":o==="dot"?ur(n,t):void 0}}},da=ao((t,e)=>{const n=Te("Badge",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,radius:l,color:d,gradient:f,leftSection:p,rightSection:m,children:g,variant:y,fullWidth:b,autoContrast:C,circle:S,mod:E,attributes:_,...T}=n,D=at({name:"Badge",props:n,classes:w4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:_,vars:u,varsResolver:oq});return w.jsxs(le,{variant:y,mod:[{block:b,circle:S,"with-right-section":!!m,"with-left-section":!!p},E],...D("root",{variant:y}),ref:e,...T,children:[p&&w.jsx("span",{...D("section"),"data-position":"left",children:p}),w.jsx("span",{...D("label"),children:g}),m&&w.jsx("span",{...D("section"),"data-position":"right",children:m})]})});da.classes=w4;da.displayName="@mantine/core/Badge";var C4={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const aq=(t,{color:e,size:n,lineSize:r,transitionDuration:o,transitionTimingFunction:a})=>({root:{"--burger-color":e?ur(e,t):void 0,"--burger-size":Tt(n,"burger-size"),"--burger-line-size":r?Ae(r):void 0,"--burger-transition-duration":o===void 0?void 0:`${o}ms`,"--burger-transition-timing-function":a}}),NS=ze((t,e)=>{const n=Te("Burger",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,opened:l,children:d,transitionDuration:f,transitionTimingFunction:p,lineSize:m,attributes:g,...y}=n,b=at({name:"Burger",classes:C4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:u,varsResolver:aq});return w.jsxs($a,{...b("root"),ref:e,...y,children:[w.jsx(le,{mod:["reduce-motion",{opened:l}],...b("burger")}),d]})});NS.classes=C4;NS.displayName="@mantine/core/Burger";var hf={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const LD={orientation:"horizontal"},iq=(t,{borderWidth:e})=>({group:{"--button-border-width":Ae(e)}}),DS=ze((t,e)=>{const n=Te("ButtonGroup",LD,t),{className:r,style:o,classNames:a,styles:i,unstyled:s,orientation:u,vars:l,borderWidth:d,variant:f,mod:p,attributes:m,...g}=Te("ButtonGroup",LD,t),y=at({name:"ButtonGroup",props:n,classes:hf,className:r,style:o,classNames:a,styles:i,unstyled:s,attributes:m,vars:l,varsResolver:iq,rootSelector:"group"});return w.jsx(le,{...y("group"),ref:e,variant:f,mod:[{"data-orientation":u},p],role:"group",...g})});DS.classes=hf;DS.displayName="@mantine/core/ButtonGroup";const sq=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:a,size:i})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{groupSection:{"--section-height":Tt(i,"section-height"),"--section-padding-x":Tt(i,"section-padding-x"),"--section-fz":i?.includes("compact")?gr(i.replace("compact-","")):gr(i),"--section-radius":e===void 0?void 0:On(e),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},kS=ze((t,e)=>{const n=Te("ButtonGroupSection",null,t),{className:r,style:o,classNames:a,styles:i,unstyled:s,vars:u,variant:l,gradient:d,radius:f,autoContrast:p,attributes:m,...g}=n,y=at({name:"ButtonGroupSection",props:n,classes:hf,className:r,style:o,classNames:a,styles:i,unstyled:s,attributes:m,vars:u,varsResolver:sq,rootSelector:"groupSection"});return w.jsx(le,{...y("groupSection"),ref:e,variant:l,...g})});kS.classes=hf;kS.displayName="@mantine/core/ButtonGroupSection";const uq={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ae(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},lq=(t,{radius:e,color:n,gradient:r,variant:o,size:a,justify:i,autoContrast:s})=>{const u=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--button-justify":i,"--button-height":Tt(a,"button-height"),"--button-padding-x":Tt(a,"button-padding-x"),"--button-fz":a?.includes("compact")?gr(a.replace("compact-","")):gr(a),"--button-radius":e===void 0?void 0:On(e),"--button-bg":n||o?u.background:void 0,"--button-hover":n||o?u.hover:void 0,"--button-color":u.color,"--button-bd":n||o?u.border:void 0,"--button-hover-color":n||o?u.hoverColor:void 0}}},Ve=ao((t,e)=>{const n=Te("Button",null,t),{style:r,vars:o,className:a,color:i,disabled:s,children:u,leftSection:l,rightSection:d,fullWidth:f,variant:p,radius:m,loading:g,loaderProps:y,gradient:b,classNames:C,styles:S,unstyled:E,"data-disabled":_,autoContrast:T,mod:D,attributes:I,...k}=n,M=at({name:"Button",props:n,classes:hf,className:a,style:r,classNames:C,styles:S,unstyled:E,attributes:I,vars:o,varsResolver:lq}),O=!!l,F=!!d;return w.jsxs($a,{ref:e,...M("root",{active:!s&&!g&&!_}),unstyled:E,variant:p,disabled:s||g,mod:[{disabled:s||_,loading:g,block:f,"with-left-section":O,"with-right-section":F},D],...k,children:[typeof g=="boolean"&&w.jsx(ws,{mounted:g,transition:uq,duration:150,children:j=>w.jsx(le,{component:"span",...M("loader",{style:j}),"aria-hidden":!0,children:w.jsx(Jo,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...y})})}),w.jsxs("span",{...M("inner"),children:[l&&w.jsx(le,{component:"span",...M("section"),mod:{position:"left"},children:l}),w.jsx(le,{component:"span",mod:{loading:g},...M("label"),children:u}),d&&w.jsx(le,{component:"span",...M("section"),mod:{position:"right"},children:d})]})]})});Ve.classes=hf;Ve.displayName="@mantine/core/Button";Ve.Group=DS;Ve.GroupSection=kS;const[cq,dq]=_a("Card component was not found in tree");var IS={root:"m_e615b15f",section:"m_599a2148"};const n0=ao((t,e)=>{const n=Te("CardSection",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,withBorder:u,inheritPadding:l,mod:d,...f}=n,p=dq();return w.jsx(le,{ref:e,mod:[{"with-border":u,"inherit-padding":l},d],...p.getStyles("section",{className:o,style:a,styles:i,classNames:r}),...f})});n0.classes=IS;n0.displayName="@mantine/core/CardSection";const fq=(t,{padding:e})=>({root:{"--card-padding":Vr(e)}}),Zr=ao((t,e)=>{const n=Te("Card",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,children:l,padding:d,attributes:f,...p}=n,m=at({name:"Card",props:n,classes:IS,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u,varsResolver:fq}),g=A.Children.toArray(l),y=g.map((b,C)=>typeof b=="object"&&b&&"type"in b&&b.type===n0?A.cloneElement(b,{"data-first-section":C===0||void 0,"data-last-section":C===g.length-1||void 0}):b);return w.jsx(cq,{value:{getStyles:m},children:w.jsx(Qo,{ref:e,unstyled:s,...m("root"),...p,children:y})})});Zr.classes=IS;Zr.displayName="@mantine/core/Card";Zr.Section=n0;var S4={root:"m_4451eb3a"};const Io=ao((t,e)=>{const n=Te("Center",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,inline:l,mod:d,attributes:f,...p}=n,m=at({name:"Center",props:n,classes:S4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u});return w.jsx(le,{ref:e,mod:[{inline:l},d],...m("root"),...p})});Io.classes=S4;Io.displayName="@mantine/core/Center";var E4={root:"m_7485cace"};const hq=(t,{size:e,fluid:n})=>({root:{"--container-size":n?void 0:Tt(e,"container-size")}}),rn=ze((t,e)=>{const n=Te("Container",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,fluid:l,mod:d,attributes:f,strategy:p,...m}=n,g=at({name:"Container",classes:E4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u,varsResolver:hq});return w.jsx(le,{ref:e,mod:[{fluid:l,strategy:p||"block"},d],...g("root"),...m})});rn.classes=E4;rn.displayName="@mantine/core/Container";var R4={root:"m_3eebeb36",label:"m_9e365f20"};const pq={orientation:"horizontal"},mq=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?ur(e,t):void 0,"--divider-border-style":n,"--divider-size":Tt(r,"divider-size")}}),go=ze((t,e)=>{const n=Te("Divider",pq,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,color:l,orientation:d,label:f,labelPosition:p,mod:m,attributes:g,...y}=n,b=at({name:"Divider",classes:R4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:u,varsResolver:mq});return w.jsx(le,{ref:e,mod:[{orientation:d,"with-label":!!f},m],...b("root"),...y,role:"separator",children:f&&w.jsx(le,{component:"span",mod:{position:p},...b("label"),children:f})})});go.classes=R4;go.displayName="@mantine/core/Divider";const[vq,pf]=_a("Drawer component was not found in tree");var Es={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const r0=ze((t,e)=>{const n=Te("DrawerBody",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=pf();return w.jsx(aS,{ref:e,...l.getStyles("body",{classNames:r,style:a,styles:i,className:o}),...u})});r0.classes=Es;r0.displayName="@mantine/core/DrawerBody";const o0=ze((t,e)=>{const n=Te("DrawerCloseButton",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=pf();return w.jsx(iS,{ref:e,...l.getStyles("close",{classNames:r,style:a,styles:i,className:o}),...u})});o0.classes=Es;o0.displayName="@mantine/core/DrawerCloseButton";const a0=ze((t,e)=>{const n=Te("DrawerContent",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,children:u,radius:l,__hidden:d,...f}=n,p=pf(),m=p.scrollAreaComponent||K3;return w.jsx(sS,{...p.getStyles("content",{className:o,style:a,styles:i,classNames:r}),innerProps:p.getStyles("inner",{className:o,style:a,styles:i,classNames:r}),ref:e,...f,radius:l||p.radius||0,"data-hidden":d||void 0,children:w.jsx(m,{style:{height:"calc(100vh - var(--drawer-offset) * 2)"},children:u})})});a0.classes=Es;a0.displayName="@mantine/core/DrawerContent";const i0=ze((t,e)=>{const n=Te("DrawerHeader",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=pf();return w.jsx(uS,{ref:e,...l.getStyles("header",{classNames:r,style:a,styles:i,className:o}),...u})});i0.classes=Es;i0.displayName="@mantine/core/DrawerHeader";const s0=ze((t,e)=>{const n=Te("DrawerOverlay",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=pf();return w.jsx(lS,{ref:e,...l.getStyles("overlay",{classNames:r,style:a,styles:i,className:o}),...u})});s0.classes=Es;s0.displayName="@mantine/core/DrawerOverlay";function gq(t){switch(t){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function yq(t){if(t==="top"||t==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const bq={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},xq={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},wq={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:oo("modal"),position:"left"},Cq=(t,{position:e,size:n,offset:r})=>({root:{"--drawer-size":Tt(n,"drawer-size"),"--drawer-flex":yq(e),"--drawer-height":e==="left"||e==="right"?void 0:"var(--drawer-size)","--drawer-align":gq(e),"--drawer-justify":e==="right"?"flex-end":void 0,"--drawer-offset":Ae(r)}}),u0=ze((t,e)=>{const n=Te("DrawerRoot",wq,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,scrollAreaComponent:l,position:d,transitionProps:f,radius:p,attributes:m,...g}=n,{dir:y}=Op(),b=at({name:"Drawer",classes:Es,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:m,vars:u,varsResolver:Cq}),C=(y==="rtl"?xq:bq)[d];return w.jsx(vq,{value:{scrollAreaComponent:l,getStyles:b,radius:p},children:w.jsx(oS,{ref:e,...b("root"),transitionProps:{transition:C,...f},"data-offset-scrollbars":l===Yo.Autosize||void 0,unstyled:s,...g})})});u0.classes=Es;u0.displayName="@mantine/core/DrawerRoot";const[Sq,Eq]=$l();function _4({children:t}){const[e,n]=A.useState([]),[r,o]=A.useState(oo("modal"));return w.jsx(Sq,{value:{stack:e,addModal:(a,i)=>{n(s=>[...new Set([...s,a])]),o(s=>typeof i=="number"&&typeof s=="number"?Math.max(s,i):s)},removeModal:a=>n(i=>i.filter(s=>s!==a)),getZIndex:a=>`calc(${r} + ${e.indexOf(a)} + 1)`,currentId:e[e.length-1],maxZIndex:r},children:t})}_4.displayName="@mantine/core/DrawerStack";const l0=ze((t,e)=>{const n=Te("DrawerTitle",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=pf();return w.jsx(cS,{ref:e,...l.getStyles("title",{classNames:r,style:a,styles:i,className:o}),...u})});l0.classes=Es;l0.displayName="@mantine/core/DrawerTitle";const Rq={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:oo("modal"),withOverlay:!0,withCloseButton:!0},Ka=ze((t,e)=>{const{title:n,withOverlay:r,overlayProps:o,withCloseButton:a,closeButtonProps:i,children:s,opened:u,stackId:l,zIndex:d,...f}=Te("Drawer",Rq,t),p=Eq(),m=!!n||a,g=p&&l?{closeOnEscape:p.currentId===l,trapFocus:p.currentId===l,zIndex:p.getZIndex(l)}:{},y=r===!1?!1:l&&p?p.currentId===l:u;return A.useEffect(()=>{p&&l&&(u?p.addModal(l,d||oo("modal")):p.removeModal(l))},[u,l,d]),w.jsxs(u0,{ref:e,opened:u,zIndex:p&&l?p.getZIndex(l):d,...f,...g,children:[r&&w.jsx(s0,{visible:y,transitionProps:p&&l?{duration:0}:void 0,...o}),w.jsxs(a0,{__hidden:p&&l&&u?l!==p.currentId:!1,children:[m&&w.jsxs(i0,{children:[n&&w.jsx(l0,{children:n}),a&&w.jsx(o0,{...i})]}),w.jsx(r0,{children:s})]})]})});Ka.classes=Es;Ka.displayName="@mantine/core/Drawer";Ka.Root=u0;Ka.Overlay=s0;Ka.Content=a0;Ka.Body=r0;Ka.Header=i0;Ka.Title=l0;Ka.CloseButton=o0;Ka.Stack=_4;const _q={multiple:!1},T4=A.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:a,name:i,form:s,resetRef:u,disabled:l,capture:d,inputProps:f,...p}=Te("FileButton",_q,t),m=A.useRef(null),g=()=>{!l&&m.current?.click()},y=C=>{if(C.currentTarget.files===null)return n(o?[]:null);n(o?Array.from(C.currentTarget.files):C.currentTarget.files[0]||null)};return rp(u,()=>{m.current&&(m.current.value="")}),w.jsxs(w.Fragment,{children:[w.jsx("input",{style:{display:"none"},type:"file",accept:a,multiple:o,onChange:y,ref:tr(e,m),name:i,form:s,capture:d,...f}),r({onClick:g,...p})]})});T4.displayName="@mantine/core/FileButton";const Tq=({value:t})=>w.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t?.name}),Aq={valueComponent:Tq},MS=ze((t,e)=>{const n=Te("FileInput",Aq,t),{unstyled:r,vars:o,onChange:a,value:i,defaultValue:s,multiple:u,accept:l,name:d,form:f,valueComponent:p,clearable:m,clearButtonProps:g,readOnly:y,capture:b,fileInputProps:C,rightSection:S,size:E,placeholder:_,component:T,resetRef:D,classNames:I,styles:k,attributes:M,...O}=n,F=A.useRef(null),{resolvedClassNames:j,resolvedStyles:G}=zu({classNames:I,styles:k,props:n}),[W,q]=xa({value:i,defaultValue:s,onChange:a,finalValue:u?[]:null}),P=Array.isArray(W)?W.length!==0:W!==null,U=S||(m&&P&&!y?w.jsx(Uu,{...g,variant:"subtle",onClick:()=>q(u?[]:null),size:E,unstyled:r}):null);return A.useEffect(()=>{(Array.isArray(W)&&W.length===0||W===null)&&F.current?.()},[W]),w.jsx(T4,{onChange:q,multiple:u,accept:l,name:d,form:f,resetRef:tr(F,D),disabled:y,capture:b,inputProps:C,children:z=>w.jsx(io,{component:T||"button",ref:e,rightSection:U,...z,...O,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:E,classNames:I,styles:k,attributes:M,children:P?w.jsx(p,{value:W}):w.jsx(Kn.Placeholder,{__staticSelector:"FileInput",classNames:j,styles:G,attributes:M,children:_})})})});MS.classes=io.classes;MS.displayName="@mantine/core/FileInput";const Lg=MS,[Nq,A4]=_a("HoverCard component was not found in the tree"),N4=A.createContext(!1),Dq=N4.Provider,OS=()=>A.useContext(N4);function D4(t){const{children:e,onMouseEnter:n,onMouseLeave:r,...o}=Te("HoverCardDropdown",null,t),a=A4();if(OS()&&a.getFloatingProps&&a.floating){const l=a.getFloatingProps();return w.jsx($o.Dropdown,{ref:a.floating,...l,onMouseEnter:hd(n,l.onMouseEnter),onMouseLeave:hd(r,l.onMouseLeave),...o,children:e})}const s=hd(n,a.openDropdown),u=hd(r,a.closeDropdown);return w.jsx($o.Dropdown,{onMouseEnter:s,onMouseLeave:u,...o,children:e})}D4.displayName="@mantine/core/HoverCardDropdown";const kq={openDelay:0,closeDelay:0};function PS(t){const{openDelay:e,closeDelay:n,children:r}=Te("HoverCardGroup",kq,t);return w.jsx(Dq,{value:!0,children:w.jsx(m3,{delay:{open:e,close:n},children:r})})}PS.displayName="@mantine/core/HoverCardGroup";PS.extend=t=>t;const Iq={refProp:"ref"},k4=A.forwardRef((t,e)=>{const{children:n,refProp:r,eventPropsWrapperName:o,...a}=Te("HoverCardTarget",Iq,t);if(!Lu(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=A4();if(OS()&&i.getReferenceProps&&i.reference){const f=i.getReferenceProps();return w.jsx($o.Target,{refProp:r,ref:e,...a,children:A.cloneElement(n,o?{[o]:{...f,ref:i.reference}}:{...f,ref:i.reference})})}const u=hd(n.props.onMouseEnter,i.openDropdown),l=hd(n.props.onMouseLeave,i.closeDropdown),d={onMouseEnter:u,onMouseLeave:l};return w.jsx($o.Target,{refProp:r,ref:e,...a,children:A.cloneElement(n,o?{[o]:d}:d)})});k4.displayName="@mantine/core/HoverCardTarget";function Mq(t){const[e,n]=A.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,a=OS(),i=Ko(),s=A.useRef(-1),u=A.useRef(-1),l=A.useCallback(()=>{window.clearTimeout(s.current),window.clearTimeout(u.current)},[]),d=A.useCallback(E=>{n(E),E?(g(i),t.onOpen?.()):t.onClose?.()},[i,t.onOpen,t.onClose]),{context:f,refs:p}=qy({open:o,onOpenChange:d}),{delay:m,setCurrentId:g}=v3(f,{id:i}),{getReferenceProps:y,getFloatingProps:b}=y3([h3(f,{enabled:!0,delay:a?m:{open:t.openDelay,close:t.closeDelay}}),b3(f,{role:"dialog"}),g3(f,{enabled:a})]),C=A.useCallback(()=>{a||(l(),t.openDelay===0||t.openDelay===void 0?d(!0):s.current=window.setTimeout(()=>d(!0),t.openDelay))},[a,l,t.openDelay,d]),S=A.useCallback(()=>{a||(l(),t.closeDelay===0||t.closeDelay===void 0?d(!1):u.current=window.setTimeout(()=>d(!1),t.closeDelay))},[a,l,t.closeDelay,d]);return A.useEffect(()=>()=>l(),[l]),{opened:o,reference:p.setReference,floating:p.setFloating,getReferenceProps:y,getFloatingProps:b,openDropdown:C,closeDropdown:S}}const Oq={openDelay:0,closeDelay:150,initiallyOpened:!1};function Eu(t){const{children:e,onOpen:n,onClose:r,openDelay:o,closeDelay:a,initiallyOpened:i,...s}=Te("HoverCard",Oq,t),u=Mq({openDelay:o,closeDelay:a,defaultOpened:i,onOpen:n,onClose:r});return w.jsx(Nq,{value:{openDropdown:u.openDropdown,closeDropdown:u.closeDropdown,getReferenceProps:u.getReferenceProps,getFloatingProps:u.getFloatingProps,reference:u.reference,floating:u.floating},children:w.jsx($o,{...s,opened:u.opened,__staticSelector:"HoverCard",children:e})})}Eu.displayName="@mantine/core/HoverCard";Eu.Target=k4;Eu.Dropdown=D4;Eu.Group=PS;Eu.extend=t=>t;var I4={root:"m_9e117634"};const Pq=(t,{radius:e,fit:n})=>({root:{"--image-radius":e===void 0?void 0:On(e),"--image-object-fit":n}}),sp=ao((t,e)=>{const n=Te("Image",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,onError:l,src:d,radius:f,fit:p,fallbackSrc:m,mod:g,attributes:y,...b}=n,[C,S]=A.useState(!d);A.useEffect(()=>S(!d),[d]);const E=at({name:"Image",classes:I4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:y,vars:u,varsResolver:Pq});return C&&m?w.jsx(le,{component:"img",ref:e,src:m,...E("root"),onError:l,mod:["fallback",g],...b}):w.jsx(le,{component:"img",ref:e,...E("root"),src:d,onError:_=>{l?.(_),S(!0)},mod:g,...b})});sp.classes=I4;sp.displayName="@mantine/core/Image";function Bd(){return Bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bd.apply(null,arguments)}function FS(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Fq=A.useLayoutEffect,Bq=function(e){var n=bt.useRef(e);return Fq(function(){n.current=e}),n},jD=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},Lq=function(e,n){var r=bt.useRef();return bt.useCallback(function(o){e.current=o,r.current&&jD(r.current,null),r.current=n,n&&jD(n,o)},[n])},zD={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},jq=function(e){Object.keys(zD).forEach(function(n){e.style.setProperty(n,zD[n],"important")})},UD=jq,Kr=null,WD=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function zq(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Kr||(Kr=document.createElement("textarea"),Kr.setAttribute("tabindex","-1"),Kr.setAttribute("aria-hidden","true"),UD(Kr)),Kr.parentNode===null&&document.body.appendChild(Kr);var o=t.paddingSize,a=t.borderSize,i=t.sizingStyle,s=i.boxSizing;Object.keys(i).forEach(function(p){var m=p;Kr.style[m]=i[m]}),UD(Kr),Kr.value=e;var u=WD(Kr,t);Kr.value=e,u=WD(Kr,t),Kr.value="x";var l=Kr.scrollHeight-o,d=l*n;s==="border-box"&&(d=d+o+a),u=Math.max(d,u);var f=l*r;return s==="border-box"&&(f=f+o+a),u=Math.min(f,u),[u,l]}var VD=function(){},Uq=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},Wq=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Vq=!!document.documentElement.currentStyle,Hq=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=Uq(Wq,n),o=r.boxSizing;if(o==="")return null;Vq&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:i}},Gq=Hq;function BS(t,e,n){var r=Bq(n);A.useLayoutEffect(function(){var o=function(i){return r.current(i)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var $q=function(e,n){BS(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},qq=function(e){BS(window,"resize",e)},Xq=function(e){BS(document.fonts,"loadingdone",e)},Kq=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Yq=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,a=e.minRows,i=e.onChange,s=i===void 0?VD:i,u=e.onHeightChange,l=u===void 0?VD:u,d=FS(e,Kq),f=d.value!==void 0,p=A.useRef(null),m=Lq(p,n),g=A.useRef(0),y=A.useRef(),b=function(){var E=p.current,_=r&&y.current?y.current:Gq(E);if(_){y.current=_;var T=zq(_,E.value||E.placeholder||"x",a,o),D=T[0],I=T[1];g.current!==D&&(g.current=D,E.style.setProperty("height",D+"px","important"),l(D,{rowHeight:I}))}},C=function(E){f||b(),s(E)};return A.useLayoutEffect(b),$q(p,function(){if(!f){var S=p.current.value;requestAnimationFrame(function(){var E=p.current;E&&S!==E.value&&b()})}}),qq(b),Xq(b),A.createElement("textarea",Bd({},d,{onChange:C,ref:m}))},Qq=A.forwardRef(Yq);const Jq={size:"sm"},up=ze((t,e)=>{const{autosize:n,maxRows:r,minRows:o,__staticSelector:a,resize:i,...s}=Te("Textarea",Jq,t),u=n&&PO()!=="test",l=u?{maxRows:r,minRows:o}:{};return w.jsx(io,{component:u?Qq:"textarea",ref:e,...s,__staticSelector:a||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":i},...l})});up.classes=io.classes;up.displayName="@mantine/core/Textarea";const[Zq,e9]=_a("List component was not found in tree");var LS={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const jS=ze((t,e)=>{const n=Te("ListItem",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,icon:u,children:l,mod:d,...f}=n,p=e9(),m=u||p.icon,g={classNames:r,styles:i};return w.jsx(le,{...p.getStyles("item",{...g,className:o,style:a}),component:"li",mod:[{"with-icon":!!m,centered:p.center},d],ref:e,...f,children:w.jsxs("div",{...p.getStyles("itemWrapper",g),children:[m&&w.jsx("span",{...p.getStyles("itemIcon",g),children:m}),w.jsx("span",{...p.getStyles("itemLabel",g),children:l})]})})});jS.classes=LS;jS.displayName="@mantine/core/ListItem";const t9={type:"unordered"},n9=(t,{size:e,spacing:n})=>({root:{"--list-fz":gr(e),"--list-lh":AO(e),"--list-spacing":Vr(n)}}),Un=ze((t,e)=>{const n=Te("List",t9,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,children:l,type:d,withPadding:f,icon:p,spacing:m,center:g,listStyleType:y,mod:b,attributes:C,...S}=n,E=at({name:"List",classes:LS,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:C,vars:u,varsResolver:n9});return w.jsx(Zq,{value:{center:g,icon:p,getStyles:E},children:w.jsx(le,{...E("root",{style:{listStyleType:y}}),component:d==="unordered"?"ul":"ol",mod:[{"with-padding":f},b],ref:e,...S,children:l})})});Un.classes=LS;Un.displayName="@mantine/core/List";Un.Item=jS;const[r9,mf]=_a("Modal component was not found in tree");var Rs={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const c0=ze((t,e)=>{const n=Te("ModalBody",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=mf();return w.jsx(aS,{ref:e,...l.getStyles("body",{classNames:r,style:a,styles:i,className:o}),...u})});c0.classes=Rs;c0.displayName="@mantine/core/ModalBody";const d0=ze((t,e)=>{const n=Te("ModalCloseButton",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=mf();return w.jsx(iS,{ref:e,...l.getStyles("close",{classNames:r,style:a,styles:i,className:o}),...u})});d0.classes=Rs;d0.displayName="@mantine/core/ModalCloseButton";const f0=ze((t,e)=>{const n=Te("ModalContent",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,children:u,__hidden:l,...d}=n,f=mf(),p=f.scrollAreaComponent||K3;return w.jsx(sS,{...f.getStyles("content",{className:o,style:a,styles:i,classNames:r}),innerProps:f.getStyles("inner",{className:o,style:a,styles:i,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:e,...d,children:w.jsx(p,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${Ae(f.yOffset)} * 2))`},children:u})})});f0.classes=Rs;f0.displayName="@mantine/core/ModalContent";const h0=ze((t,e)=>{const n=Te("ModalHeader",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=mf();return w.jsx(uS,{ref:e,...l.getStyles("header",{classNames:r,style:a,styles:i,className:o}),...u})});h0.classes=Rs;h0.displayName="@mantine/core/ModalHeader";const p0=ze((t,e)=>{const n=Te("ModalOverlay",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=mf();return w.jsx(lS,{ref:e,...l.getStyles("overlay",{classNames:r,style:a,styles:i,className:o}),...u})});p0.classes=Rs;p0.displayName="@mantine/core/ModalOverlay";const o9={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:oo("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},a9=(t,{radius:e,size:n,yOffset:r,xOffset:o})=>({root:{"--modal-radius":e===void 0?void 0:On(e),"--modal-size":Tt(n,"modal-size"),"--modal-y-offset":Ae(r),"--modal-x-offset":Ae(o)}}),m0=ze((t,e)=>{const n=Te("ModalRoot",o9,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,yOffset:l,scrollAreaComponent:d,radius:f,fullScreen:p,centered:m,xOffset:g,__staticSelector:y,attributes:b,...C}=n,S=at({name:y,classes:Rs,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:b,vars:u,varsResolver:a9});return w.jsx(r9,{value:{yOffset:l,scrollAreaComponent:d,getStyles:S,fullScreen:p},children:w.jsx(oS,{ref:e,...S("root"),"data-full-screen":p||void 0,"data-centered":m||void 0,"data-offset-scrollbars":d===Yo.Autosize||void 0,unstyled:s,...C})})});m0.classes=Rs;m0.displayName="@mantine/core/ModalRoot";const[i9,s9]=$l();function M4({children:t}){const[e,n]=A.useState([]),[r,o]=A.useState(oo("modal"));return w.jsx(i9,{value:{stack:e,addModal:(a,i)=>{n(s=>[...new Set([...s,a])]),o(s=>typeof i=="number"&&typeof s=="number"?Math.max(s,i):s)},removeModal:a=>n(i=>i.filter(s=>s!==a)),getZIndex:a=>`calc(${r} + ${e.indexOf(a)} + 1)`,currentId:e[e.length-1],maxZIndex:r},children:t})}M4.displayName="@mantine/core/ModalStack";const v0=ze((t,e)=>{const n=Te("ModalTitle",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=mf();return w.jsx(cS,{ref:e,...l.getStyles("title",{classNames:r,style:a,styles:i,className:o}),...u})});v0.classes=Rs;v0.displayName="@mantine/core/ModalTitle";const u9={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:oo("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},kr=ze((t,e)=>{const{title:n,withOverlay:r,overlayProps:o,withCloseButton:a,closeButtonProps:i,children:s,radius:u,opened:l,stackId:d,zIndex:f,...p}=Te("Modal",u9,t),m=s9(),g=!!n||a,y=m&&d?{closeOnEscape:m.currentId===d,trapFocus:m.currentId===d,zIndex:m.getZIndex(d)}:{},b=r===!1?!1:d&&m?m.currentId===d:l;return A.useEffect(()=>{m&&d&&(l?m.addModal(d,f||oo("modal")):m.removeModal(d))},[l,d,f]),w.jsxs(m0,{ref:e,radius:u,opened:l,zIndex:m&&d?m.getZIndex(d):f,...p,...y,children:[r&&w.jsx(p0,{visible:b,transitionProps:m&&d?{duration:0}:void 0,...o}),w.jsxs(f0,{radius:u,__hidden:m&&d&&l?d!==m.currentId:!1,children:[g&&w.jsxs(h0,{children:[n&&w.jsx(v0,{children:n}),a&&w.jsx(d0,{...i})]}),w.jsx(c0,{children:s})]})]})});kr.classes=Rs;kr.displayName="@mantine/core/Modal";kr.Root=m0;kr.Overlay=p0;kr.Content=f0;kr.Body=c0;kr.Header=h0;kr.Title=v0;kr.CloseButton=d0;kr.Stack=M4;const[l9,zS]=$l(),[c9,d9]=$l();var g0={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const f9=(t,{gap:e},{size:n})=>({group:{"--pg-gap":e!==void 0?Tt(e):Tt(n,"pg-gap")}}),US=ze((t,e)=>{const n=Te("PillGroup",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,disabled:d,attributes:f,...p}=n,g=zS()?.size||l||void 0,y=at({name:"PillGroup",classes:g0,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u,varsResolver:f9,stylesCtx:{size:g},rootSelector:"group"});return w.jsx(c9,{value:{size:g,disabled:d},children:w.jsx(le,{ref:e,size:g,...y("group"),...p})})});US.classes=g0;US.displayName="@mantine/core/PillGroup";const h9={variant:"default"},p9=(t,{radius:e},{size:n})=>({root:{"--pill-fz":Tt(n,"pill-fz"),"--pill-height":Tt(n,"pill-height"),"--pill-radius":e===void 0?void 0:On(e)}}),lp=ze((t,e)=>{const n=Te("Pill",h9,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,variant:l,children:d,withRemoveButton:f,onRemove:p,removeButtonProps:m,radius:g,size:y,disabled:b,mod:C,attributes:S,...E}=n,_=d9(),T=zS(),D=y||_?.size||void 0,I=T?.variant==="filled"?"contrast":l||"default",k=at({name:"Pill",classes:g0,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:S,vars:u,varsResolver:p9,stylesCtx:{size:D}});return w.jsxs(le,{component:"span",ref:e,variant:I,size:D,...k("root",{variant:I}),mod:[{"with-remove":f&&!b,disabled:b||_?.disabled},C],...E,children:[w.jsx("span",{...k("label"),children:d}),f&&w.jsx(Uu,{variant:"transparent",radius:g,tabIndex:-1,"aria-hidden":!0,unstyled:s,...m,...k("remove",{className:m?.className,style:m?.style}),onMouseDown:M=>{M.preventDefault(),M.stopPropagation(),m?.onMouseDown?.(M)},onClick:M=>{M.stopPropagation(),p?.(),m?.onClick?.(M)}})]})});lp.classes=g0;lp.displayName="@mantine/core/Pill";lp.Group=US;var O4={field:"m_45c4369d"};const m9={type:"visible"},WS=ze((t,e)=>{const n=Te("PillsInputField",m9,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,type:l,disabled:d,id:f,pointer:p,mod:m,attributes:g,...y}=n,b=zS(),C=df(),S=at({name:"PillsInputField",classes:O4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,rootSelector:"field"}),E=d||b?.disabled;return w.jsx(le,{component:"input",ref:tr(e,b?.fieldRef),"data-type":l,disabled:E,mod:[{disabled:E,pointer:p},m],...S("field"),...y,id:C?.inputId||f,"aria-invalid":b?.hasError,"aria-describedby":C?.describedBy,type:"text",onMouseDown:_=>!p&&_.stopPropagation()})});WS.classes=O4;WS.displayName="@mantine/core/PillsInputField";const v9={size:"sm"},jg=ze((t,e)=>{const n=Te("PillsInput",v9,t),{children:r,onMouseDown:o,onClick:a,size:i,disabled:s,__staticSelector:u,error:l,variant:d,...f}=n,p=A.useRef(null);return w.jsx(l9,{value:{fieldRef:p,size:i,disabled:s,hasError:!!l,variant:d},children:w.jsx(io,{size:i,error:l,variant:d,component:"div",ref:e,"data-no-overflow":!0,onMouseDown:m=>{m.preventDefault(),o?.(m),p.current?.focus()},onClick:m=>{m.preventDefault(),m.currentTarget.closest("fieldset")?.disabled||(p.current?.focus(),a?.(m))},...f,multiline:!0,disabled:s,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});jg.displayName="@mantine/core/PillsInput";jg.Field=WS;function g9({data:t,value:e}){const n=e.map(o=>o.trim().toLowerCase());return t.reduce((o,a)=>(Fd(a)?o.push({group:a.group,items:a.items.filter(i=>n.indexOf(i.value.toLowerCase().trim())===-1)}):n.indexOf(a.value.toLowerCase().trim())===-1&&o.push(a),o),[])}const y9={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:",",clearSearchOnChange:!0,size:"sm"},VS=ze((t,e)=>{const n=Te("MultiSelect",y9,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,value:d,defaultValue:f,onChange:p,onKeyDown:m,variant:g,data:y,dropdownOpened:b,defaultDropdownOpened:C,onDropdownOpen:S,onDropdownClose:E,selectFirstOptionOnChange:_,onOptionSubmit:T,comboboxProps:D,filter:I,limit:k,withScrollArea:M,maxDropdownHeight:O,searchValue:F,defaultSearchValue:j,onSearchChange:G,readOnly:W,disabled:q,onFocus:P,onBlur:U,radius:z,rightSection:H,rightSectionWidth:L,rightSectionPointerEvents:$,rightSectionProps:J,leftSection:ne,leftSectionWidth:ce,leftSectionPointerEvents:be,leftSectionProps:se,inputContainer:oe,inputWrapperOrder:fe,withAsterisk:me,labelProps:Oe,descriptionProps:Be,errorProps:Le,wrapperProps:De,description:$e,label:et,error:ot,maxValues:Ie,searchable:Me,nothingFoundMessage:Fe,withCheckIcon:Ke,checkIconPosition:ct,hidePickedOptions:qe,withErrorStyles:Xe,name:Wt,form:je,id:He,clearable:it,clearButtonProps:zt,hiddenInputProps:Pt,placeholder:Hn,hiddenInputValuesDivider:Qt,required:gn,mod:Mr,renderOption:qr,onRemove:nr,onClear:Da,scrollAreaProps:Tn,chevronColor:Za,attributes:mt,clearSearchOnChange:Ft,...kt}=n,Bt=Ko(He),sn=n4(y),un=pS(sn),Jt=RS({opened:b,defaultOpened:C,onDropdownOpen:S,onDropdownClose:()=>{E?.(),Jt.resetSelectedOption()}}),{styleProps:Ui,rest:{type:cc,autoComplete:ei,...kf}}=sf(kt),[An,Pn]=xa({value:d,defaultValue:f,finalValue:[],onChange:p}),[rr,Ls]=xa({value:F,defaultValue:j,finalValue:"",onChange:G}),js=Xt=>{Ls(Xt),Jt.resetSelectedOption()},If=at({name:"MultiSelect",classes:{},props:n,classNames:r,styles:i,unstyled:s,attributes:mt}),{resolvedClassNames:vm,resolvedStyles:Mf}=zu({props:n,styles:i,classNames:r}),Ku=Xt=>{m?.(Xt),Xt.key===" "&&!Me&&(Xt.preventDefault(),Jt.toggleDropdown()),Xt.key==="Backspace"&&rr.length===0&&An.length>0&&(nr?.(An[An.length-1]),Pn(An.slice(0,An.length-1)))},Of=An.map((Xt,Fn)=>w.jsx(lp,{withRemoveButton:!W&&!un[Xt]?.disabled,onRemove:()=>{Pn(An.filter(gm=>Xt!==gm)),nr?.(Xt)},unstyled:s,disabled:q,...If("pill"),children:un[Xt]?.label||Xt},`${Xt}-${Fn}`));A.useEffect(()=>{_&&Jt.selectFirstOption()},[_,rr]);const Wi=w.jsx(Ut.ClearButton,{...zt,onClear:()=>{Da?.(),Pn([]),js("")}}),zs=g9({data:sn,value:An}),Us=it&&An.length>0&&!q&&!W;return w.jsxs(w.Fragment,{children:[w.jsxs(Ut,{store:Jt,classNames:vm,styles:Mf,unstyled:s,size:l,readOnly:W,__staticSelector:"MultiSelect",attributes:mt,onOptionSubmit:Xt=>{T?.(Xt),Ft&&js(""),Jt.updateSelectedOptionIndex("selected"),An.includes(un[Xt].value)?(Pn(An.filter(Fn=>Fn!==un[Xt].value)),nr?.(un[Xt].value)):An.length<Ie&&Pn([...An,un[Xt].value])},...D,children:[w.jsx(Ut.DropdownTarget,{children:w.jsx(jg,{...Ui,__staticSelector:"MultiSelect",classNames:vm,styles:Mf,unstyled:s,size:l,className:o,style:a,variant:g,disabled:q,radius:z,__defaultRightSection:w.jsx(Ut.Chevron,{size:l,error:ot,unstyled:s,color:Za}),__clearSection:Wi,__clearable:Us,rightSection:H,rightSectionPointerEvents:$||(Wi?"all":"none"),rightSectionWidth:L,rightSectionProps:J,leftSection:ne,leftSectionWidth:ce,leftSectionPointerEvents:be,leftSectionProps:se,inputContainer:oe,inputWrapperOrder:fe,withAsterisk:me,labelProps:Oe,descriptionProps:Be,errorProps:Le,wrapperProps:De,description:$e,label:et,error:ot,withErrorStyles:Xe,__stylesApiProps:{...n,rightSectionPointerEvents:$||(Us?"all":"none"),multiline:!0},pointer:!Me,onClick:()=>Me?Jt.openDropdown():Jt.toggleDropdown(),"data-expanded":Jt.dropdownOpened||void 0,id:Bt,required:gn,mod:Mr,attributes:mt,children:w.jsxs(lp.Group,{attributes:mt,disabled:q,unstyled:s,...If("pillsList"),children:[Of,w.jsx(Ut.EventsTarget,{autoComplete:ei,children:w.jsx(jg.Field,{...kf,ref:e,id:Bt,placeholder:Hn,type:!Me&&!Hn?"hidden":"visible",...If("inputField"),unstyled:s,onFocus:Xt=>{P?.(Xt),Me&&Jt.openDropdown()},onBlur:Xt=>{U?.(Xt),Jt.closeDropdown(),js("")},onKeyDown:Ku,value:rr,onChange:Xt=>{js(Xt.currentTarget.value),Me&&Jt.openDropdown(),_&&Jt.selectFirstOption()},disabled:q,readOnly:W||!Me,pointer:!Me})})]})})}),w.jsx(x4,{data:qe?zs:sn,hidden:W||q,filter:I,search:rr,limit:k,hiddenWhenEmpty:!Fe,withScrollArea:M,maxDropdownHeight:O,filterOptions:Me,value:An,checkIconPosition:ct,withCheckIcon:Ke,nothingFoundMessage:Fe,unstyled:s,labelId:et?`${Bt}-label`:void 0,"aria-label":et?void 0:kt["aria-label"],renderOption:qr,scrollAreaProps:Tn})]}),w.jsx(Ut.HiddenInput,{name:Wt,valuesDivider:Qt,value:An,form:je,disabled:q,...Pt})]})});VS.classes={...io.classes,...Ut.classes};VS.displayName="@mantine/core/MultiSelect";var P4={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const b9={withCloseButton:!0},x9=(t,{radius:e,color:n})=>({root:{"--notification-radius":e===void 0?void 0:On(e),"--notification-color":n?ur(n,t):void 0}}),HS=ze((t,e)=>{const n=Te("Notification",b9,t),{className:r,color:o,radius:a,loading:i,withCloseButton:s,withBorder:u,title:l,icon:d,children:f,onClose:p,closeButtonProps:m,classNames:g,style:y,styles:b,unstyled:C,variant:S,vars:E,mod:_,loaderProps:T,role:D,attributes:I,...k}=n,M=at({name:"Notification",classes:P4,props:n,className:r,style:y,classNames:g,styles:b,unstyled:C,attributes:I,vars:E,varsResolver:x9});return w.jsxs(le,{...M("root"),mod:[{"data-with-icon":!!d||i,"data-with-border":u},_],ref:e,variant:S,role:D||"alert",...k,children:[d&&!i&&w.jsx("div",{...M("icon"),children:d}),i&&w.jsx(Jo,{size:28,color:o,...T,...M("loader")}),w.jsxs("div",{...M("body"),children:[l&&w.jsx("div",{...M("title"),children:l}),w.jsx(le,{...M("description"),mod:{"data-with-title":!!l},children:f})]}),s&&w.jsx(Uu,{iconSize:16,color:"gray",...m,unstyled:C,onClick:p,...M("closeButton")})]})});HS.classes=P4;HS.displayName="@mantine/core/Notification";function F4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}var cp;(function(t){t.event="event",t.props="prop"})(cp||(cp={}));function gu(){}function w9(t){var e,n=void 0;return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return e&&r.length===e.length&&r.every(function(a,i){return a===e[i]})||(e=r,n=t.apply(void 0,r)),n}}function dp(t){return!!(t||"").match(/\d/)}function wd(t){return t==null}function C9(t){return typeof t=="number"&&isNaN(t)}function B4(t){return wd(t)||C9(t)||typeof t=="number"&&!isFinite(t)}function L4(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function S9(t){switch(t){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function E9(t,e,n){var r=S9(n),o=t.search(/[1-9]/);return o=o===-1?t.length:o,t.substring(0,o)+t.substring(o,t.length).replace(r,"$1"+e)}function R9(t){var e=A.useRef(t);e.current=t;var n=A.useRef(function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return e.current.apply(e,r)});return n.current}function GS(t,e){e===void 0&&(e=!0);var n=t[0]==="-",r=n&&e;t=t.replace("-","");var o=t.split("."),a=o[0],i=o[1]||"";return{beforeDecimal:a,afterDecimal:i,hasNegation:n,addNegation:r}}function _9(t){if(!t)return t;var e=t[0]==="-";e&&(t=t.substring(1,t.length));var n=t.split("."),r=n[0].replace(/^0+/,"")||"0",o=n[1]||"";return(e?"-":"")+r+(o?"."+o:"")}function j4(t,e,n){for(var r="",o=n?"0":"",a=0;a<=e-1;a++)r+=t[a]||o;return r}function HD(t,e){return Array(e+1).join(t)}function z4(t){var e=t+"",n=e[0]==="-"?"-":"";n&&(e=e.substring(1));var r=e.split(/[eE]/g),o=r[0],a=r[1];if(a=Number(a),!a)return n+o;o=o.replace(".","");var i=1+a,s=o.length;return i<0?o="0."+HD("0",Math.abs(i))+o:i>=s?o=o+HD("0",i-s):o=(o.substring(0,i)||"0")+"."+o.substring(i),n+o}function GD(t,e,n){if(["","-"].indexOf(t)!==-1)return t;var r=(t.indexOf(".")!==-1||n)&&e,o=GS(t),a=o.beforeDecimal,i=o.afterDecimal,s=o.hasNegation,u=parseFloat("0."+(i||"0")),l=i.length<=e?"0."+i:u.toFixed(e),d=l.split("."),f=a;a&&Number(d[0])&&(f=a.split("").reverse().reduce(function(y,b,C){return y.length>C?(Number(y[0])+Number(b)).toString()+y.substring(1,y.length):b+y},d[0]));var p=j4(d[1]||"",e,n),m=s?"-":"",g=r?".":"";return""+m+f+g+p}function Cl(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var n=t.createTextRange();return n.move("character",e),n.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var U4=w9(function(t,e){for(var n=0,r=0,o=t.length,a=e.length;t[n]===e[n]&&n<o;)n++;for(;t[o-1-r]===e[a-1-r]&&a-r>n&&o-r>n;)r++;return{from:{start:n,end:o-r},to:{start:n,end:a-r}}}),T9=function(t,e){var n=Math.min(t.selectionStart,e);return{from:{start:n,end:t.selectionEnd},to:{start:n,end:e}}};function A9(t,e,n){return Math.min(Math.max(t,e),n)}function B1(t){return Math.max(t.selectionStart,t.selectionEnd)}function N9(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function D9(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function k9(t){var e=t.currentValue,n=t.formattedValue,r=t.currentValueIndex,o=t.formattedValueIndex;return e[r]===n[o]}function I9(t,e,n,r,o,a,i){i===void 0&&(i=k9);var s=o.findIndex(function(_){return _}),u=t.slice(0,s);!e&&!n.startsWith(u)&&(e=u,n=u+n,r=r+u.length);for(var l=n.length,d=t.length,f={},p=new Array(l),m=0;m<l;m++){p[m]=-1;for(var g=0,y=d;g<y;g++){var b=i({currentValue:n,lastValue:e,formattedValue:t,currentValueIndex:m,formattedValueIndex:g});if(b&&f[g]!==!0){p[m]=g,f[g]=!0;break}}}for(var C=r;C<l&&(p[C]===-1||!a(n[C]));)C++;var S=C===l||p[C]===-1?d:p[C];for(C=r-1;C>0&&p[C]===-1;)C--;var E=C===-1||p[C]===-1?0:p[C]+1;return E>S?S:r-E<S-r?E:S}function $D(t,e,n,r){var o=t.length;if(e=A9(e,0,o),r==="left"){for(;e>=0&&!n[e];)e--;e===-1&&(e=n.indexOf(!0))}else{for(;e<=o&&!n[e];)e++;e>o&&(e=n.lastIndexOf(!0))}return e===-1&&(e=o),e}function M9(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),n=0,r=e.length;n<r;n++)e[n]=!!(dp(t[n])||dp(t[n-1]));return e}function W4(t,e,n,r,o,a){a===void 0&&(a=gu);var i=R9(function(g,y){var b,C;return B4(g)?(C="",b=""):typeof g=="number"||y?(C=typeof g=="number"?z4(g):g,b=r(C)):(C=o(g,void 0),b=r(C)),{formattedValue:b,numAsString:C}}),s=A.useState(function(){return i(wd(t)?e:t,n)}),u=s[0],l=s[1],d=function(g,y){g.formattedValue!==u.formattedValue&&l({formattedValue:g.formattedValue,numAsString:g.value}),a(g,y)},f=t,p=n;wd(t)&&(f=u.numAsString,p=!0);var m=i(f,p);return A.useMemo(function(){l(m)},[m.formattedValue]),[u,d]}function O9(t){return t.replace(/[^0-9]/g,"")}function P9(t){return t}function F9(t){var e=t.type;e===void 0&&(e="text");var n=t.displayType;n===void 0&&(n="input");var r=t.customInput,o=t.renderText,a=t.getInputRef,i=t.format;i===void 0&&(i=P9);var s=t.removeFormatting;s===void 0&&(s=O9);var u=t.defaultValue,l=t.valueIsNumericString,d=t.onValueChange,f=t.isAllowed,p=t.onChange;p===void 0&&(p=gu);var m=t.onKeyDown;m===void 0&&(m=gu);var g=t.onMouseUp;g===void 0&&(g=gu);var y=t.onFocus;y===void 0&&(y=gu);var b=t.onBlur;b===void 0&&(b=gu);var C=t.value,S=t.getCaretBoundary;S===void 0&&(S=M9);var E=t.isValidInputCharacter;E===void 0&&(E=dp);var _=t.isCharacterSame,T=F4(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),D=W4(C,u,!!l,i,s,d),I=D[0],k=I.formattedValue,M=I.numAsString,O=D[1],F=A.useRef(),j=A.useRef({formattedValue:k,numAsString:M}),G=function(Ie,Me){j.current={formattedValue:Ie.formattedValue,numAsString:Ie.value},O(Ie,Me)},W=A.useState(!1),q=W[0],P=W[1],U=A.useRef(null),z=A.useRef({setCaretTimeout:null,focusTimeout:null});A.useEffect(function(){return P(!0),function(){clearTimeout(z.current.setCaretTimeout),clearTimeout(z.current.focusTimeout)}},[]);var H=i,L=function(Ie,Me){var Fe=parseFloat(Me);return{formattedValue:Ie,value:Me,floatValue:isNaN(Fe)?void 0:Fe}},$=function(Ie,Me,Fe){Ie.selectionStart===0&&Ie.selectionEnd===Ie.value.length||(Cl(Ie,Me),z.current.setCaretTimeout=setTimeout(function(){Ie.value===Fe&&Ie.selectionStart!==Me&&Cl(Ie,Me)},0))},J=function(Ie,Me,Fe){return $D(Ie,Me,S(Ie),Fe)},ne=function(Ie,Me,Fe){var Ke=S(Me),ct=I9(Me,k,Ie,Fe,Ke,E,_);return ct=$D(Me,ct,Ke),ct},ce=function(Ie){var Me=Ie.formattedValue;Me===void 0&&(Me="");var Fe=Ie.input,Ke=Ie.source,ct=Ie.event,qe=Ie.numAsString,Xe;if(Fe){var Wt=Ie.inputValue||Fe.value,je=B1(Fe);Fe.value=Me,Xe=ne(Wt,Me,je),Xe!==void 0&&$(Fe,Xe,Me)}Me!==k&&G(L(Me,qe),{event:ct,source:Ke})};A.useEffect(function(){var Ie=j.current,Me=Ie.formattedValue,Fe=Ie.numAsString;(k!==Me||M!==Fe)&&G(L(k,M),{event:void 0,source:cp.props})},[k,M]);var be=U.current?B1(U.current):void 0,se=typeof window<"u"?A.useLayoutEffect:A.useEffect;se(function(){var Ie=U.current;if(k!==j.current.formattedValue&&Ie){var Me=ne(j.current.formattedValue,k,be);Ie.value=k,$(Ie,Me,k)}},[k]);var oe=function(Ie,Me,Fe){var Ke=Me.target,ct=F.current?T9(F.current,Ke.selectionEnd):U4(k,Ie),qe=Object.assign(Object.assign({},ct),{lastValue:k}),Xe=s(Ie,qe),Wt=H(Xe);if(Xe=s(Wt,void 0),f&&!f(L(Wt,Xe))){var je=Me.target,He=B1(je),it=ne(Ie,k,He);return je.value=k,$(je,it,k),!1}return ce({formattedValue:Wt,numAsString:Xe,inputValue:Ie,event:Me,source:Fe,input:Me.target}),!0},fe=function(Ie,Me){Me===void 0&&(Me=0);var Fe=Ie.selectionStart,Ke=Ie.selectionEnd;F.current={selectionStart:Fe,selectionEnd:Ke+Me}},me=function(Ie){var Me=Ie.target,Fe=Me.value,Ke=oe(Fe,Ie,cp.event);Ke&&p(Ie),F.current=void 0},Oe=function(Ie){var Me=Ie.target,Fe=Ie.key,Ke=Me.selectionStart,ct=Me.selectionEnd,qe=Me.value;qe===void 0&&(qe="");var Xe;Fe==="ArrowLeft"||Fe==="Backspace"?Xe=Math.max(Ke-1,0):Fe==="ArrowRight"?Xe=Math.min(Ke+1,qe.length):Fe==="Delete"&&(Xe=Ke);var Wt=0;Fe==="Delete"&&Ke===ct&&(Wt=1);var je=Fe==="ArrowLeft"||Fe==="ArrowRight";if(Xe===void 0||Ke!==ct&&!je){m(Ie),fe(Me,Wt);return}var He=Xe;if(je){var it=Fe==="ArrowLeft"?"left":"right";He=J(qe,Xe,it),He!==Xe&&Ie.preventDefault()}else Fe==="Delete"&&!E(qe[Xe])?He=J(qe,Xe,"right"):Fe==="Backspace"&&!E(qe[Xe])&&(He=J(qe,Xe,"left"));He!==Xe&&$(Me,He,qe),m(Ie),fe(Me,Wt)},Be=function(Ie){var Me=Ie.target,Fe=function(){var Ke=Me.selectionStart,ct=Me.selectionEnd,qe=Me.value;if(qe===void 0&&(qe=""),Ke===ct){var Xe=J(qe,Ke);Xe!==Ke&&$(Me,Xe,qe)}};Fe(),requestAnimationFrame(function(){Fe()}),g(Ie),fe(Me)},Le=function(Ie){Ie.persist&&Ie.persist();var Me=Ie.target,Fe=Ie.currentTarget;U.current=Me,z.current.focusTimeout=setTimeout(function(){var Ke=Me.selectionStart,ct=Me.selectionEnd,qe=Me.value;qe===void 0&&(qe="");var Xe=J(qe,Ke);Xe!==Ke&&!(Ke===0&&ct===qe.length)&&$(Me,Xe,qe),y(Object.assign(Object.assign({},Ie),{currentTarget:Fe}))},0)},De=function(Ie){U.current=null,clearTimeout(z.current.focusTimeout),clearTimeout(z.current.setCaretTimeout),b(Ie)},$e=q&&N9()?"numeric":void 0,et=Object.assign({inputMode:$e},T,{type:e,value:k,onChange:me,onKeyDown:Oe,onMouseUp:Be,onFocus:Le,onBlur:De});if(n==="text")return o?bt.createElement(bt.Fragment,null,o(k,T)||null):bt.createElement("span",Object.assign({},T,{ref:a}),k);if(r){var ot=r;return bt.createElement(ot,Object.assign({},et,{ref:a}))}return bt.createElement("input",Object.assign({},et,{ref:a}))}function qD(t,e){var n=e.decimalScale,r=e.fixedDecimalScale,o=e.prefix;o===void 0&&(o="");var a=e.suffix;a===void 0&&(a="");var i=e.allowNegative,s=e.thousandsGroupStyle;if(s===void 0&&(s="thousand"),t===""||t==="-")return t;var u=y0(e),l=u.thousandSeparator,d=u.decimalSeparator,f=n!==0&&t.indexOf(".")!==-1||n&&r,p=GS(t,i),m=p.beforeDecimal,g=p.afterDecimal,y=p.addNegation;return n!==void 0&&(g=j4(g,n,!!r)),l&&(m=E9(m,l,s)),o&&(m=o+m),a&&(g=g+a),y&&(m="-"+m),t=m+(f&&d||"")+g,t}function y0(t){var e=t.decimalSeparator;e===void 0&&(e=".");var n=t.thousandSeparator,r=t.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[e,"."]),{decimalSeparator:e,thousandSeparator:n,allowedDecimalSeparators:r}}function B9(t,e){t===void 0&&(t="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),o=n.test(t),a=r.test(t);return t=t.replace(/-/g,""),o&&!a&&e&&(t="-"+t),t}function L9(t,e){return new RegExp("(^-)|[0-9]|"+L4(t),"g")}function j9(t,e,n){return t===""?!0:!e?.match(/\d/)&&!n?.match(/\d/)&&typeof t=="string"&&!isNaN(Number(t))}function z9(t,e,n){var r;e===void 0&&(e=D9(t));var o=n.allowNegative,a=n.prefix;a===void 0&&(a="");var i=n.suffix;i===void 0&&(i="");var s=n.decimalScale,u=e.from,l=e.to,d=l.start,f=l.end,p=y0(n),m=p.allowedDecimalSeparators,g=p.decimalSeparator,y=t[f]===g;if(dp(t)&&(t===a||t===i)&&e.lastValue==="")return t;if(f-d===1&&m.indexOf(t[d])!==-1){var b=s===0?"":g;t=t.substring(0,d)+b+t.substring(d+1,t.length)}var C=function(U,z,H){var L=!1,$=!1;a.startsWith("-")?L=!1:U.startsWith("--")?(L=!1,$=!0):i.startsWith("-")&&U.length===i.length?L=!1:U[0]==="-"&&(L=!0);var J=L?1:0;return $&&(J=2),J&&(U=U.substring(J),z-=J,H-=J),{value:U,start:z,end:H,hasNegation:L}},S=C(t,d,f),E=S.hasNegation;r=S,t=r.value,d=r.start,f=r.end;var _=C(e.lastValue,u.start,u.end),T=_.start,D=_.end,I=_.value,k=t.substring(d,f);t.length&&I.length&&(T>I.length-i.length||D<a.length)&&!(k&&i.startsWith(k))&&(t=I);var M=0;t.startsWith(a)?M+=a.length:d<a.length&&(M=d),t=t.substring(M),f-=M;var O=t.length,F=t.length-i.length;t.endsWith(i)?O=F:(f>F||f>t.length-i.length)&&(O=f),t=t.substring(0,O),t=B9(E?"-"+t:t,o),t=(t.match(L9(g))||[]).join("");var j=t.indexOf(g);t=t.replace(new RegExp(L4(g),"g"),function(U,z){return z===j?".":""});var G=GS(t,o),W=G.beforeDecimal,q=G.afterDecimal,P=G.addNegation;return l.end-l.start<u.end-u.start&&W===""&&y&&!parseFloat(q)&&(t=P?"-":""),t}function U9(t,e){var n=e.prefix;n===void 0&&(n="");var r=e.suffix;r===void 0&&(r="");var o=Array.from({length:t.length+1}).map(function(){return!0}),a=t[0]==="-";o.fill(!1,0,n.length+(a?1:0));var i=t.length;return o.fill(!1,i-r.length+1,i+1),o}function W9(t){var e=y0(t),n=e.thousandSeparator,r=e.decimalSeparator,o=t.prefix;o===void 0&&(o="");var a=t.allowNegative;if(a===void 0&&(a=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return o.startsWith("-")&&a&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+o+`
      allowNegative: `+a+`
    `),a=!1),Object.assign(Object.assign({},t),{allowNegative:a})}function V9(t){t=W9(t),t.decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle;var e=t.suffix,n=t.allowNegative,r=t.allowLeadingZeros,o=t.onKeyDown;o===void 0&&(o=gu);var a=t.onBlur;a===void 0&&(a=gu);var i=t.thousandSeparator,s=t.decimalScale,u=t.fixedDecimalScale,l=t.prefix;l===void 0&&(l="");var d=t.defaultValue,f=t.value,p=t.valueIsNumericString,m=t.onValueChange,g=F4(t,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),y=y0(t),b=y.decimalSeparator,C=y.allowedDecimalSeparators,S=function(P){return qD(P,t)},E=function(P,U){return z9(P,U,t)},_=wd(f)?d:f,T=p??j9(_,l,e);wd(f)?wd(d)||(T=T||typeof d=="number"):T=T||typeof f=="number";var D=function(P){return B4(P)?P:(typeof P=="number"&&(P=z4(P)),T&&typeof s=="number"?GD(P,s,!!u):P)},I=W4(D(f),D(d),!!T,S,E,m),k=I[0],M=k.numAsString,O=k.formattedValue,F=I[1],j=function(P){var U=P.target,z=P.key,H=U.selectionStart,L=U.selectionEnd,$=U.value;if($===void 0&&($=""),(z==="Backspace"||z==="Delete")&&L<l.length){P.preventDefault();return}if(H!==L){o(P);return}z==="Backspace"&&$[0]==="-"&&H===l.length+1&&n&&Cl(U,1),s&&u&&(z==="Backspace"&&$[H-1]===b?(Cl(U,H-1),P.preventDefault()):z==="Delete"&&$[H]===b&&P.preventDefault()),C?.includes(z)&&$[H]===b&&Cl(U,H+1);var J=i===!0?",":i;z==="Backspace"&&$[H-1]===J&&Cl(U,H-1),z==="Delete"&&$[H]===J&&Cl(U,H+1),o(P)},G=function(P){var U=M;if(U.match(/\d/g)||(U=""),r||(U=_9(U)),u&&s&&(U=GD(U,s,u)),U!==M){var z=qD(U,t);F({formattedValue:z,value:U,floatValue:parseFloat(U)},{event:P,source:cp.event})}a(P)},W=function(P){return P===b?!0:dp(P)},q=function(P){var U=P.currentValue,z=P.lastValue,H=P.formattedValue,L=P.currentValueIndex,$=P.formattedValueIndex,J=U[L],ne=H[$],ce=U4(z,U),be=ce.to,se=function(oe){return E(oe).indexOf(".")+l.length};return f===0&&u&&s&&U[be.start]===b&&se(U)<L&&se(H)>$?!1:L>=be.start&&L<be.end&&C&&C.includes(J)&&ne===b?!0:J===ne};return Object.assign(Object.assign({},g),{value:O,valueIsNumericString:!1,isValidInputCharacter:W,isCharacterSame:q,onValueChange:F,format:S,removeFormatting:E,getCaretBoundary:function(P){return U9(P,t)},onKeyDown:j,onBlur:G})}function H9(t){var e=V9(t);return bt.createElement(F9,Object.assign({},e))}function XD({direction:t,style:e,...n}){return w.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:t==="up"?"rotate(180deg)":void 0,...e},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var l2={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const G9=/^(0\.0*|-0(\.0*)?)$/,$9=/^-?0\d+(\.\d+)?\.?$/,q9=/\.\d*0$/;function c2(t){return typeof t=="string"&&t!==""&&!Number.isNaN(Number(t))}function L1(t){return typeof t=="number"?t<Number.MAX_SAFE_INTEGER:t===""||c2(t)&&Number(t)<Number.MAX_SAFE_INTEGER}function X9(t){return t.toString().replace(".","").length}function K9(t,e){return(typeof t=="number"?t<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(t)))&&!Number.isNaN(t)&&X9(e)<14&&e!==""}function KD(t,e,n){if(t===void 0)return!0;const r=e===void 0||t>=e,o=n===void 0||t<=n;return r&&o}const Y9={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Q9=(t,{size:e})=>({controls:{"--ni-chevron-size":Tt(e,"ni-chevron-size")}});function J9(t,e,n){const r=t.toString().replace(/^0+/,""),o=parseFloat(r);return Number.isNaN(o)?r:o>Number.MAX_SAFE_INTEGER?e!==void 0?e:r:gg(o,n,e)}const Cd=ze((t,e)=>{const n=Te("NumberInput",Y9,t),{className:r,classNames:o,styles:a,unstyled:i,vars:s,onChange:u,onValueChange:l,value:d,defaultValue:f,max:p,min:m,step:g,hideControls:y,rightSection:b,isAllowed:C,clampBehavior:S,onBlur:E,allowDecimal:_,decimalScale:T,onKeyDown:D,onKeyDownCapture:I,handlersRef:k,startValue:M,disabled:O,rightSectionPointerEvents:F,allowNegative:j,readOnly:G,size:W,rightSectionWidth:q,stepHoldInterval:P,stepHoldDelay:U,allowLeadingZeros:z,withKeyboardEvents:H,trimLeadingZeroesOnBlur:L,attributes:$,...J}=n,ne=at({name:"NumberInput",classes:l2,props:n,classNames:o,styles:a,unstyled:i,attributes:$,vars:s,varsResolver:Q9}),{resolvedClassNames:ce,resolvedStyles:be}=zu({classNames:o,styles:a,props:n}),[se,oe]=xa({value:d,defaultValue:f,finalValue:"",onChange:u}),fe=U!==void 0&&P!==void 0,me=A.useRef(null),Oe=A.useRef(null),Be=A.useRef(0),Le=(je,He)=>{He.source==="event"&&oe(K9(je.floatValue,je.value)&&!G9.test(je.value)&&!(z&&$9.test(je.value))&&!q9.test(je.value)?je.floatValue:je.value),l?.(je,He)},De=je=>{const He=String(je).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return He?Math.max(0,(He[1]?He[1].length:0)-(He[2]?+He[2]:0)):0},$e=je=>{me.current&&typeof je<"u"&&me.current.setSelectionRange(je,je)},et=A.useRef(kg);et.current=()=>{if(!L1(se))return;let je;const He=De(se),it=De(g),zt=Math.max(He,it),Pt=10**zt;if(!c2(se)&&(typeof se!="number"||Number.isNaN(se)))je=gg(M,m,p);else if(p!==void 0){const Qt=(Math.round(Number(se)*Pt)+Math.round(g*Pt))/Pt;je=Qt<=p?Qt:p}else je=(Math.round(Number(se)*Pt)+Math.round(g*Pt))/Pt;const Hn=je.toFixed(zt);oe(parseFloat(Hn)),l?.({floatValue:parseFloat(Hn),formattedValue:Hn,value:Hn},{source:"increment"}),setTimeout(()=>$e(me.current?.value.length),0)};const ot=A.useRef(kg);ot.current=()=>{if(!L1(se))return;let je;const He=m!==void 0?m:j?Number.MIN_SAFE_INTEGER:0,it=De(se),zt=De(g),Pt=Math.max(it,zt),Hn=10**Pt;if(!c2(se)&&typeof se!="number"||Number.isNaN(se))je=gg(M,He,p);else{const gn=(Math.round(Number(se)*Hn)-Math.round(g*Hn))/Hn;je=He!==void 0&&gn<He?He:gn}const Qt=je.toFixed(Pt);oe(parseFloat(Qt)),l?.({floatValue:parseFloat(Qt),formattedValue:Qt,value:Qt},{source:"decrement"}),setTimeout(()=>$e(me.current?.value.length),0)};const Ie=je=>{D?.(je),!(G||!H)&&(je.key==="ArrowUp"&&(je.preventDefault(),et.current?.()),je.key==="ArrowDown"&&(je.preventDefault(),ot.current?.()))},Me=je=>{if(I?.(je),je.key==="Backspace"){const He=me.current;He&&He.selectionStart===0&&He.selectionStart===He.selectionEnd&&(je.preventDefault(),window.setTimeout(()=>$e(0),0))}},Fe=je=>{let He=se;S==="blur"&&typeof He=="number"&&(He=gg(He,m,p)),L&&typeof He=="string"&&De(He)<15&&(He=J9(He,p,m)),se!==He&&oe(He),E?.(je)};rp(k,{increment:et.current,decrement:ot.current});const Ke=je=>{je?et.current?.():ot.current?.(),Be.current+=1},ct=je=>{if(Ke(je),fe){const He=typeof P=="number"?P:P(Be.current);Oe.current=window.setTimeout(()=>ct(je),He)}},qe=(je,He)=>{je.preventDefault(),me.current?.focus(),Ke(He),fe&&(Oe.current=window.setTimeout(()=>ct(He),U))},Xe=()=>{Oe.current&&window.clearTimeout(Oe.current),Oe.current=null,Be.current=0},Wt=w.jsxs("div",{...ne("controls"),children:[w.jsx($a,{...ne("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof se=="number"&&p!==void 0&&se>=p,mod:{direction:"up"},onMouseDown:je=>je.preventDefault(),onPointerDown:je=>{qe(je,!0)},onPointerUp:Xe,onPointerLeave:Xe,children:w.jsx(XD,{direction:"up"})}),w.jsx($a,{...ne("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof se=="number"&&m!==void 0&&se<=m,mod:{direction:"down"},onMouseDown:je=>je.preventDefault(),onPointerDown:je=>{qe(je,!1)},onPointerUp:Xe,onPointerLeave:Xe,children:w.jsx(XD,{direction:"down"})})]});return w.jsx(io,{component:H9,allowNegative:j,className:lr(l2.root,r),size:W,...J,readOnly:G,disabled:O,value:se,getInputRef:tr(e,me),onValueChange:Le,rightSection:y||G||!L1(se)?b:b||Wt,classNames:ce,styles:be,unstyled:i,__staticSelector:"NumberInput",decimalScale:_?T:0,onKeyDown:Ie,onKeyDownCapture:Me,rightSectionPointerEvents:F??(O?"none":void 0),rightSectionWidth:q??`var(--ni-right-section-width-${W||"sm"})`,allowLeadingZeros:z,onBlur:Fe,attributes:$,isAllowed:je=>S==="strict"?C?C(je)&&KD(je.floatValue,m,p):KD(je.floatValue,m,p):C?C(je):!0})});Cd.classes={...io.classes,...l2};Cd.displayName="@mantine/core/NumberInput";const Z9=({reveal:t})=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"},children:w.jsx("path",{d:t?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var d2={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const eX={visibilityToggleIcon:Z9},tX=(t,{size:e})=>({root:{"--psi-icon-size":Tt(e,"psi-icon-size"),"--psi-button-size":Tt(e,"psi-button-size")}}),$S=ze((t,e)=>{const n=Te("PasswordInput",eX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,required:l,error:d,leftSection:f,disabled:p,id:m,variant:g,inputContainer:y,description:b,label:C,size:S,errorProps:E,descriptionProps:_,labelProps:T,withAsterisk:D,inputWrapperOrder:I,wrapperProps:k,radius:M,rightSection:O,rightSectionWidth:F,rightSectionPointerEvents:j,leftSectionWidth:G,visible:W,defaultVisible:q,onVisibilityChange:P,visibilityToggleIcon:U,visibilityToggleButtonProps:z,rightSectionProps:H,leftSectionProps:L,leftSectionPointerEvents:$,withErrorStyles:J,mod:ne,attributes:ce,...be}=n,se=Ko(m),[oe,fe]=xa({value:W,defaultValue:q,finalValue:!1,onChange:P}),me=()=>fe(!oe),Oe=at({name:"PasswordInput",classes:d2,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:ce,vars:u,varsResolver:tX}),{resolvedClassNames:Be,resolvedStyles:Le}=zu({classNames:r,styles:i,props:n}),{styleProps:De,rest:$e}=sf(be),et=E?.id||`${se}-error`,ot=_?.id||`${se}-description`,Fe=`${!!d&&typeof d!="boolean"?et:""} ${!!b?ot:""}`,Ke=Fe.trim().length>0?Fe.trim():void 0,ct=w.jsx(Rn,{...Oe("visibilityToggle"),disabled:p,radius:M,"aria-hidden":!z,tabIndex:-1,...z,variant:z?.variant??"subtle",color:"gray",unstyled:s,onTouchEnd:qe=>{qe.preventDefault(),z?.onTouchEnd?.(qe),me()},onMouseDown:qe=>{qe.preventDefault(),z?.onMouseDown?.(qe),me()},onKeyDown:qe=>{z?.onKeyDown?.(qe),qe.key===" "&&(qe.preventDefault(),me())},children:w.jsx(U,{reveal:oe})});return w.jsx(Kn.Wrapper,{required:l,id:se,label:C,error:d,description:b,size:S,classNames:Be,styles:Le,__staticSelector:"PasswordInput",unstyled:s,withAsterisk:D,inputWrapperOrder:I,inputContainer:y,variant:g,labelProps:{...T,htmlFor:se},descriptionProps:{..._,id:ot},errorProps:{...E,id:et},mod:ne,attributes:ce,...Oe("root"),...De,...k,children:w.jsx(Kn,{component:"div",error:d,leftSection:f,size:S,classNames:{...Be,input:lr(d2.input,Be.input)},styles:Le,radius:M,disabled:p,__staticSelector:"PasswordInput",rightSectionWidth:F,rightSection:O??ct,variant:g,unstyled:s,leftSectionWidth:G,rightSectionPointerEvents:j||"all",rightSectionProps:H,leftSectionProps:L,leftSectionPointerEvents:$,withAria:!1,withErrorStyles:J,attributes:ce,children:w.jsx("input",{required:l,"data-invalid":!!d||void 0,"data-with-left-section":!!f||void 0,...Oe("innerInput"),disabled:p,id:se,ref:e,...$e,"aria-describedby":Ke,autoComplete:$e.autoComplete||"off",type:oe?"text":"password"})})})});$S.classes={...io.classes,...d2};$S.displayName="@mantine/core/PasswordInput";const[nX,V4]=_a("Progress.Root component was not found in tree");var Fp={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const qS=ze((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,...s}=Te("ProgressLabel",null,t),u=V4();return w.jsx(le,{ref:e,...u.getStyles("label",{className:r,style:o,classNames:n,styles:a}),...s})});qS.classes=Fp;qS.displayName="@mantine/core/ProgressLabel";const rX=(t,{size:e,radius:n,transitionDuration:r})=>({root:{"--progress-size":Tt(e,"progress-size"),"--progress-radius":n===void 0?void 0:On(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),b0=ze((t,e)=>{const n=Te("ProgressRoot",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,autoContrast:l,transitionDuration:d,attributes:f,...p}=n,m=at({name:"Progress",classes:Fp,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u,varsResolver:rX});return w.jsx(nX,{value:{getStyles:m,autoContrast:l},children:w.jsx(le,{ref:e,...m("root"),...p})})});b0.classes=Fp;b0.displayName="@mantine/core/ProgressRoot";const oX={withAria:!0},x0=ze((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,value:s,withAria:u,color:l,striped:d,animated:f,mod:p,...m}=Te("ProgressSection",oX,t),g=V4(),y=$r(),b=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":s,"aria-valuetext":`${s}%`}:{};return w.jsx(le,{ref:e,...g.getStyles("section",{className:r,classNames:n,styles:a,style:o}),...m,...b,mod:[{striped:d||f,animated:f},p],__vars:{"--progress-section-width":`${s}%`,"--progress-section-color":ur(l,y),"--progress-label-color":BC(g.autoContrast,y)?Mp({color:l,theme:y,autoContrast:g.autoContrast}):void 0}})});x0.classes=Fp;x0.displayName="@mantine/core/ProgressSection";const vf=ze((t,e)=>{const n=Te("Progress",null,t),{value:r,classNames:o,styles:a,vars:i,color:s,striped:u,animated:l,"aria-label":d,...f}=n,{resolvedClassNames:p,resolvedStyles:m}=zu({classNames:o,styles:a,props:n});return w.jsx(b0,{ref:e,classNames:p,styles:m,vars:i,...f,children:w.jsx(x0,{value:r,color:s,striped:u,animated:l,"aria-label":d})})});vf.classes=Fp;vf.displayName="@mantine/core/Progress";vf.Section=x0;vf.Root=b0;vf.Label=qS;const aX={duration:100,transition:"fade"};function YD(t,e){return{...aX,...e,...t}}function iX({offset:t,position:e,defaultOpened:n}){const[r,o]=A.useState(n),a=A.useRef(null),{x:i,y:s,elements:u,refs:l,update:d,placement:f}=qy({placement:e,middleware:[qC({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=f.includes("right")?t:e.includes("left")?t*-1:0,m=f.includes("bottom")?t:e.includes("top")?t*-1:0,g=A.useCallback(({clientX:y,clientY:b})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:y,y:b,left:y+p,top:b+m,right:y,bottom:b}}})},[u.reference]);return A.useEffect(()=>{if(l.floating.current){const y=a.current;y.addEventListener("mousemove",g);const b=vs(l.floating.current);return b.forEach(C=>{C.addEventListener("scroll",d)}),()=>{y.removeEventListener("mousemove",g),b.forEach(C=>{C.removeEventListener("scroll",d)})}}},[u.reference,l.floating.current,d,g,r]),{handleMouseMove:g,x:i,y:s,opened:r,setOpened:o,boundaryRef:a,floating:l.setFloating}}var w0={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const sX={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:oo("popover")},uX=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:On(e),"--tooltip-bg":n?ur(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),XS=ze((t,e)=>{const n=Te("TooltipFloating",sX,t),{children:r,refProp:o,withinPortal:a,style:i,className:s,classNames:u,styles:l,unstyled:d,radius:f,color:p,label:m,offset:g,position:y,multiline:b,zIndex:C,disabled:S,defaultOpened:E,variant:_,vars:T,portalProps:D,attributes:I,...k}=n,M=$r(),O=at({name:"TooltipFloating",props:n,classes:w0,className:s,style:i,classNames:u,styles:l,unstyled:d,attributes:I,rootSelector:"tooltip",vars:T,varsResolver:uX}),{handleMouseMove:F,x:j,y:G,opened:W,boundaryRef:q,floating:P,setOpened:U}=iX({offset:g,position:y,defaultOpened:E});if(!Lu(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const z=tr(q,Ly(r),e),H=r.props,L=J=>{H.onMouseEnter?.(J),F(J),U(!0)},$=J=>{H.onMouseLeave?.(J),U(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(ku,{...D,withinPortal:a,children:w.jsx(le,{...k,...O("tooltip",{style:{...zC(i,M),zIndex:C,display:!S&&W?"block":"none",top:(G&&Math.round(G))??"",left:(j&&Math.round(j))??""}}),variant:_,ref:P,mod:{multiline:b},children:m})}),A.cloneElement(r,{...H,[o]:z,onMouseEnter:L,onMouseLeave:$})]})});XS.classes=w0;XS.displayName="@mantine/core/TooltipFloating";const H4=A.createContext(!1),lX=H4.Provider,cX=()=>A.useContext(H4),dX={openDelay:0,closeDelay:0};function KS(t){const{openDelay:e,closeDelay:n,children:r}=Te("TooltipGroup",dX,t);return w.jsx(lX,{value:!0,children:w.jsx(m3,{delay:{open:e,close:n},children:r})})}KS.displayName="@mantine/core/TooltipGroup";KS.extend=t=>t;function fX(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function hX(t){const e=fX(t.middlewares),n=[u3(t.offset)];return e.shift&&n.push(qC(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?Fg():Fg(e.flip)),n.push(l3({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?Xh():Xh(e.inline)):t.inline&&n.push(Xh()),n}function pX(t){const[e,n]=A.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,a=cX(),i=Ko(),s=A.useCallback(T=>{n(T),T&&C(i)},[i]),{x:u,y:l,context:d,refs:f,placement:p,middlewareData:{arrow:{x:m,y:g}={}}}=qy({strategy:t.strategy,placement:t.position,open:o,onOpenChange:s,middleware:hX(t),whileElementsMounted:i3}),{delay:y,currentId:b,setCurrentId:C}=v3(d,{id:i}),{getReferenceProps:S,getFloatingProps:E}=y3([h3(d,{enabled:t.events?.hover,delay:a?y:{open:t.openDelay,close:t.closeDelay},mouseOnly:!t.events?.touch}),b$(d,{enabled:t.events?.focus,visibleOnly:!0}),b3(d,{role:"tooltip"}),g3(d,{enabled:typeof t.opened>"u"})]);Su(()=>{t.onPositionChange?.(p)},[p]);const _=o&&b&&b!==i;return{x:u,y:l,arrowX:m,arrowY:g,reference:f.setReference,floating:f.setFloating,getFloatingProps:E,getReferenceProps:S,isGroupPhase:_,opened:o,placement:p}}const QD={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:oo("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},mX=(t,{radius:e,color:n,variant:r,autoContrast:o})=>{const a=t.variantColorResolver({theme:t,color:n||t.primaryColor,autoContrast:o,variant:r||"filled"});return{tooltip:{"--tooltip-radius":e===void 0?void 0:On(e),"--tooltip-bg":n?a.background:void 0,"--tooltip-color":n?a.color:void 0}}},qo=ze((t,e)=>{const n=Te("Tooltip",QD,t),{children:r,position:o,refProp:a,label:i,openDelay:s,closeDelay:u,onPositionChange:l,opened:d,defaultOpened:f,withinPortal:p,radius:m,color:g,classNames:y,styles:b,unstyled:C,style:S,className:E,withArrow:_,arrowSize:T,arrowOffset:D,arrowRadius:I,arrowPosition:k,offset:M,transitionProps:O,multiline:F,events:j,zIndex:G,disabled:W,positionDependencies:q,onClick:P,onMouseEnter:U,onMouseLeave:z,inline:H,variant:L,keepMounted:$,vars:J,portalProps:ne,mod:ce,floatingStrategy:be,middlewares:se,autoContrast:oe,attributes:fe,target:me,...Oe}=Te("Tooltip",QD,n),{dir:Be}=Op(),Le=A.useRef(null),De=pX({position:P3(Be,o),closeDelay:u,openDelay:s,onPositionChange:l,opened:d,defaultOpened:f,events:j,arrowRef:Le,arrowOffset:D,offset:typeof M=="number"?M+(_?T/2:0):M,positionDependencies:[...q,me??r],inline:H,strategy:be,middlewares:se});A.useEffect(()=>{const Fe=me instanceof HTMLElement?me:typeof me=="string"?document.querySelector(me):me?.current||null;Fe&&De.reference(Fe)},[me,De]);const $e=at({name:"Tooltip",props:n,classes:w0,className:E,style:S,classNames:y,styles:b,unstyled:C,attributes:fe,rootSelector:"tooltip",vars:J,varsResolver:mX});if(!me&&!Lu(r))return null;if(me){const Fe=YD(O,{duration:100,transition:"fade"});return w.jsx(w.Fragment,{children:w.jsx(ku,{...ne,withinPortal:p,children:w.jsx(ws,{...Fe,keepMounted:$,mounted:!W&&!!De.opened,duration:De.isGroupPhase?10:Fe.duration,children:Ke=>w.jsxs(le,{...Oe,"data-fixed":be==="fixed"||void 0,variant:L,mod:[{multiline:F},ce],...De.getFloatingProps({ref:De.floating,className:$e("tooltip").className,style:{...$e("tooltip").style,...Ke,zIndex:G,top:De.y??0,left:De.x??0}}),children:[i,w.jsx(Bg,{ref:Le,arrowX:De.arrowX,arrowY:De.arrowY,visible:_,position:De.placement,arrowSize:T,arrowOffset:D,arrowRadius:I,arrowPosition:k,...$e("arrow")})]})})})})}const et=r,ot=et.props,Ie=tr(De.reference,Ly(et),e),Me=YD(O,{duration:100,transition:"fade"});return w.jsxs(w.Fragment,{children:[w.jsx(ku,{...ne,withinPortal:p,children:w.jsx(ws,{...Me,keepMounted:$,mounted:!W&&!!De.opened,duration:De.isGroupPhase?10:Me.duration,children:Fe=>w.jsxs(le,{...Oe,"data-fixed":be==="fixed"||void 0,variant:L,mod:[{multiline:F},ce],...De.getFloatingProps({ref:De.floating,className:$e("tooltip").className,style:{...$e("tooltip").style,...Fe,zIndex:G,top:De.y??0,left:De.x??0}}),children:[i,w.jsx(Bg,{ref:Le,arrowX:De.arrowX,arrowY:De.arrowY,visible:_,position:De.placement,arrowSize:T,arrowOffset:D,arrowRadius:I,arrowPosition:k,...$e("arrow")})]})})}),A.cloneElement(et,De.getReferenceProps({onClick:P,onMouseEnter:U,onMouseLeave:z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:lr(E,ot.className),...ot,[a]:Ie}))]})});qo.classes=w0;qo.displayName="@mantine/core/Tooltip";qo.Floating=XS;qo.Group=KS;var G4={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const vX={withItemsBorders:!0},gX=(t,{radius:e,color:n,transitionDuration:r,size:o,transitionTimingFunction:a})=>({root:{"--sc-radius":e===void 0?void 0:On(e),"--sc-color":n?ur(n,t):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":a,"--sc-padding":Tt(o,"sc-padding"),"--sc-font-size":gr(o)}}),YS=ze((t,e)=>{const n=Te("SegmentedControl",vX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,data:l,value:d,defaultValue:f,onChange:p,size:m,name:g,disabled:y,readOnly:b,fullWidth:C,orientation:S,radius:E,color:_,transitionDuration:T,transitionTimingFunction:D,variant:I,autoContrast:k,withItemsBorders:M,mod:O,attributes:F,...j}=n,G=at({name:"SegmentedControl",props:n,classes:G4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:F,vars:u,varsResolver:gX}),W=$r(),q=l.map(me=>typeof me=="string"?{label:me,value:me}:me),P=T8(),[U,z]=A.useState(Ci()),[H,L]=A.useState(null),[$,J]=A.useState({}),ne=(me,Oe)=>{$[Oe]=me,J($)},[ce,be]=xa({value:d,defaultValue:f,finalValue:Array.isArray(l)?q.find(me=>!me.disabled)?.value??l[0]?.value??null:null,onChange:p}),se=Ko(g),oe=q.map(me=>A.createElement(le,{...G("control"),mod:{active:ce===me.value,orientation:S},key:me.value},A.createElement("input",{...G("input"),disabled:y||me.disabled,type:"radio",name:se,value:me.value,id:`${se}-${me.value}`,checked:ce===me.value,onChange:()=>!b&&be(me.value),"data-focus-ring":W.focusRing,key:`${me.value}-input`}),A.createElement(le,{component:"label",...G("label"),mod:{active:ce===me.value&&!(y||me.disabled),disabled:y||me.disabled,"read-only":b},htmlFor:`${se}-${me.value}`,ref:Oe=>ne(Oe,me.value),__vars:{"--sc-label-color":_!==void 0?Mp({color:_,theme:W,autoContrast:k}):void 0},key:`${me.value}-label`},w.jsx("span",{...G("innerLabel"),children:me.label})))),fe=tr(e,me=>L(me));return C8(()=>{z(Ci())},[l.length]),l.length===0?null:w.jsxs(le,{...G("root"),variant:I,size:m,ref:fe,mod:[{"full-width":C,orientation:S,initialized:P,"with-items-borders":M},O],...j,role:"radiogroup","data-disabled":y,children:[typeof ce=="string"&&w.jsx(hS,{target:$[ce],parent:H,component:"span",transitionDuration:"var(--sc-transition-duration)",...G("indicator")},U),oe]})});YS.classes=G4;YS.displayName="@mantine/core/SegmentedControl";const yX={withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Ru=ze((t,e)=>{const n=Te("Select",yX,t),{classNames:r,styles:o,unstyled:a,vars:i,dropdownOpened:s,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:d,onFocus:f,onBlur:p,onClick:m,onChange:g,data:y,value:b,defaultValue:C,selectFirstOptionOnChange:S,onOptionSubmit:E,comboboxProps:_,readOnly:T,disabled:D,filter:I,limit:k,withScrollArea:M,maxDropdownHeight:O,size:F,searchable:j,rightSection:G,checkIconPosition:W,withCheckIcon:q,nothingFoundMessage:P,name:U,form:z,searchValue:H,defaultSearchValue:L,onSearchChange:$,allowDeselect:J,error:ne,rightSectionPointerEvents:ce,id:be,clearable:se,clearButtonProps:oe,hiddenInputProps:fe,renderOption:me,onClear:Oe,autoComplete:Be,scrollAreaProps:Le,__defaultRightSection:De,__clearSection:$e,__clearable:et,chevronColor:ot,autoSelectOnBlur:Ie,attributes:Me,...Fe}=n,Ke=A.useMemo(()=>n4(y),[y]),ct=A.useMemo(()=>pS(Ke),[Ke]),qe=Ko(be),[Xe,Wt,je]=xa({value:b,defaultValue:C,finalValue:null,onChange:g}),He=typeof Xe=="string"?ct[Xe]:void 0,it=R8(He),[zt,Pt,Hn]=xa({value:H,defaultValue:L,finalValue:He?He.label:"",onChange:$}),Qt=RS({opened:s,defaultOpened:u,onDropdownOpen:()=>{d?.(),Qt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l?.(),setTimeout(Qt.resetSelectedOption,0)}}),gn=Tn=>{Pt(Tn),Qt.resetSelectedOption()},{resolvedClassNames:Mr,resolvedStyles:qr}=zu({props:n,styles:o,classNames:r});A.useEffect(()=>{S&&Qt.selectFirstOption()},[S,zt]),A.useEffect(()=>{b===null&&gn(""),typeof b=="string"&&He&&(it?.value!==He.value||it?.label!==He.label)&&gn(He.label)},[b,He]),A.useEffect(()=>{!je&&!Hn&&gn(typeof Xe=="string"&&ct[Xe]?.label||"")},[y,Xe]);const nr=w.jsx(Ut.ClearButton,{...oe,onClear:()=>{Wt(null,null),gn(""),Oe?.()}}),Da=se&&!!Xe&&!D&&!T;return w.jsxs(w.Fragment,{children:[w.jsxs(Ut,{store:Qt,__staticSelector:"Select",classNames:Mr,styles:qr,unstyled:a,readOnly:T,size:F,attributes:Me,onOptionSubmit:Tn=>{E?.(Tn);const Za=J&&ct[Tn].value===Xe?null:ct[Tn],mt=Za?Za.value:null;mt!==Xe&&Wt(mt,Za),!je&&gn(typeof mt=="string"&&Za?.label||""),Qt.closeDropdown()},..._,children:[w.jsx(Ut.Target,{targetType:j?"input":"button",autoComplete:Be,children:w.jsx(io,{id:qe,ref:e,__defaultRightSection:w.jsx(Ut.Chevron,{size:F,error:ne,unstyled:a,color:ot}),__clearSection:nr,__clearable:Da,rightSection:G,rightSectionPointerEvents:ce||(Da?"all":"none"),...Fe,size:F,__staticSelector:"Select",disabled:D,readOnly:T||!j,value:zt,onChange:Tn=>{gn(Tn.currentTarget.value),Qt.openDropdown(),S&&Qt.selectFirstOption()},onFocus:Tn=>{j&&Qt.openDropdown(),f?.(Tn)},onBlur:Tn=>{Ie&&Qt.clickSelectedOption(),j&&Qt.closeDropdown(),gn(Xe!=null&&ct[Xe]?.label||""),p?.(Tn)},onClick:Tn=>{j?Qt.openDropdown():Qt.toggleDropdown(),m?.(Tn)},classNames:Mr,styles:qr,unstyled:a,pointer:!j,error:ne,attributes:Me})}),w.jsx(x4,{data:Ke,hidden:T||D,filter:I,search:zt,limit:k,hiddenWhenEmpty:!P,withScrollArea:M,maxDropdownHeight:O,filterOptions:!!j&&He?.label!==zt,value:Xe,checkIconPosition:W,withCheckIcon:q,nothingFoundMessage:P,unstyled:a,labelId:Fe.label?`${qe}-label`:void 0,"aria-label":Fe.label?void 0:Fe["aria-label"],renderOption:me,scrollAreaProps:Le})]}),w.jsx(Ut.HiddenInput,{value:Xe,name:U,form:z,disabled:D,...fe})]})});Ru.classes={...io.classes,...Ut.classes};Ru.displayName="@mantine/core/Select";function bX({spacing:t,verticalSpacing:e,cols:n,selector:r}){const o=$r(),a=e===void 0?t:e,i=Ip({"--sg-spacing-x":Vr(bd(t)),"--sg-spacing-y":Vr(bd(a)),"--sg-cols":bd(n)?.toString()}),s=mo(o.breakpoints).reduce((d,f)=>(d[f]||(d[f]={}),typeof t=="object"&&t[f]!==void 0&&(d[f]["--sg-spacing-x"]=Vr(t[f])),typeof a=="object"&&a[f]!==void 0&&(d[f]["--sg-spacing-y"]=Vr(a[f])),typeof n=="object"&&n[f]!==void 0&&(d[f]["--sg-cols"]=n[f]),d),{}),l=t8(mo(s),o.breakpoints).filter(d=>mo(s[d.value]).length>0).map(d=>({query:`(min-width: ${o.breakpoints[d.value]})`,styles:s[d.value]}));return w.jsx(LC,{styles:i,media:l,selector:r})}function j1(t){return typeof t=="object"&&t!==null?mo(t):[]}function xX(t){return t.sort((e,n)=>np(e)-np(n))}function wX({spacing:t,verticalSpacing:e,cols:n}){const r=Array.from(new Set([...j1(t),...j1(e),...j1(n)]));return xX(r)}function CX({spacing:t,verticalSpacing:e,cols:n,selector:r}){const o=e===void 0?t:e,a=Ip({"--sg-spacing-x":Vr(bd(t)),"--sg-spacing-y":Vr(bd(o)),"--sg-cols":bd(n)?.toString()}),i=wX({spacing:t,verticalSpacing:e,cols:n}),s=i.reduce((l,d)=>(l[d]||(l[d]={}),typeof t=="object"&&t[d]!==void 0&&(l[d]["--sg-spacing-x"]=Vr(t[d])),typeof o=="object"&&o[d]!==void 0&&(l[d]["--sg-spacing-y"]=Vr(o[d])),typeof n=="object"&&n[d]!==void 0&&(l[d]["--sg-cols"]=n[d]),l),{}),u=i.map(l=>({query:`simple-grid (min-width: ${l})`,styles:s[l]}));return w.jsx(LC,{styles:a,container:u,selector:r})}var $4={container:"m_925c2d2c",root:"m_2415a157"};const SX={cols:1,spacing:"md",type:"media"},Wu=ze((t,e)=>{const n=Te("SimpleGrid",SX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,cols:l,verticalSpacing:d,spacing:f,type:p,attributes:m,...g}=n,y=at({name:"SimpleGrid",classes:$4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:m,vars:u}),b=WO();return p==="container"?w.jsxs(w.Fragment,{children:[w.jsx(CX,{...n,selector:`.${b}`}),w.jsx("div",{...y("container"),children:w.jsx(le,{ref:e,...y("root",{className:b}),...g})})]}):w.jsxs(w.Fragment,{children:[w.jsx(bX,{...n,selector:`.${b}`}),w.jsx(le,{ref:e,...y("root",{className:b}),...g})]})});Wu.classes=$4;Wu.displayName="@mantine/core/SimpleGrid";var q4={root:"m_6d731127"};const EX={gap:"md",align:"stretch",justify:"flex-start"},RX=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":Vr(e),"--stack-align":n,"--stack-justify":r}}),po=ze((t,e)=>{const n=Te("Stack",EX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,align:l,justify:d,gap:f,variant:p,attributes:m,...g}=n,y=at({name:"Stack",props:n,classes:q4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:m,vars:u,varsResolver:RX});return w.jsx(le,{ref:e,...y("root"),variant:p,...g})});po.classes=q4;po.displayName="@mantine/core/Stack";const[_X,TX]=_a("Table component was not found in the tree");var Bp={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function AX(t,e){if(!e)return;const n={};return e.columnBorder&&t.withColumnBorders&&(n["data-with-column-border"]=!0),e.rowBorder&&t.withRowBorders&&(n["data-with-row-border"]=!0),e.striped&&t.striped&&(n["data-striped"]=t.striped),e.highlightOnHover&&t.highlightOnHover&&(n["data-hover"]=!0),e.captionSide&&t.captionSide&&(n["data-side"]=t.captionSide),e.stickyHeader&&t.stickyHeader&&(n["data-sticky"]=!0),n}function Xl(t,e){const n=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,r=ze((o,a)=>{const i=Te(n,{},o),{classNames:s,className:u,style:l,styles:d,...f}=i,p=TX();return w.jsx(le,{component:t,ref:a,...AX(p,e),...p.getStyles(t,{className:u,classNames:s,style:l,styles:d,props:i}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=Bp,r}const f2=Xl("th",{columnBorder:!0}),X4=Xl("td",{columnBorder:!0}),xg=Xl("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),K4=Xl("thead",{stickyHeader:!0}),Y4=Xl("tbody"),Q4=Xl("tfoot"),J4=Xl("caption",{captionSide:!0});function QS({data:t}){return w.jsxs(w.Fragment,{children:[t.caption&&w.jsx(J4,{children:t.caption}),t.head&&w.jsx(K4,{children:w.jsx(xg,{children:t.head.map((e,n)=>w.jsx(f2,{children:e},n))})}),t.body&&w.jsx(Y4,{children:t.body.map((e,n)=>w.jsx(xg,{children:e.map((r,o)=>w.jsx(X4,{children:r},o))},n))}),t.foot&&w.jsx(Q4,{children:w.jsx(xg,{children:t.foot.map((e,n)=>w.jsx(f2,{children:e},n))})})]})}QS.displayName="@mantine/core/TableDataRenderer";const NX={type:"scrollarea"},DX=(t,{minWidth:e,maxHeight:n,type:r})=>({scrollContainer:{"--table-min-width":Ae(e),"--table-max-height":Ae(n),"--table-overflow":r==="native"?"auto":void 0}}),JS=ze((t,e)=>{const n=Te("TableScrollContainer",NX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,children:l,minWidth:d,maxHeight:f,type:p,scrollAreaProps:m,attributes:g,...y}=n,b=at({name:"TableScrollContainer",classes:Bp,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:u,varsResolver:DX,rootSelector:"scrollContainer"});return w.jsx(le,{component:p==="scrollarea"?Yo:"div",...p==="scrollarea"?f?{offsetScrollbars:"xy",...m}:{offsetScrollbars:"x",...m}:{},ref:e,...b("scrollContainer"),...y,children:w.jsx("div",{...b("scrollContainerInner"),children:l})})});JS.classes=Bp;JS.displayName="@mantine/core/TableScrollContainer";const kX={withRowBorders:!0,verticalSpacing:7},IX=(t,{layout:e,captionSide:n,horizontalSpacing:r,verticalSpacing:o,borderColor:a,stripedColor:i,highlightOnHoverColor:s,striped:u,highlightOnHover:l,stickyHeaderOffset:d,stickyHeader:f})=>({table:{"--table-layout":e,"--table-caption-side":n,"--table-horizontal-spacing":Vr(r),"--table-vertical-spacing":Vr(o),"--table-border-color":a?ur(a,t):void 0,"--table-striped-color":u&&i?ur(i,t):void 0,"--table-highlight-on-hover-color":l&&s?ur(s,t):void 0,"--table-sticky-header-offset":f?Ae(d):void 0}}),Re=ze((t,e)=>{const n=Te("Table",kX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,horizontalSpacing:l,verticalSpacing:d,captionSide:f,stripedColor:p,highlightOnHoverColor:m,striped:g,highlightOnHover:y,withColumnBorders:b,withRowBorders:C,withTableBorder:S,borderColor:E,layout:_,variant:T,data:D,children:I,stickyHeader:k,stickyHeaderOffset:M,mod:O,tabularNums:F,attributes:j,...G}=n,W=at({name:"Table",props:n,className:o,style:a,classes:Bp,classNames:r,styles:i,unstyled:s,attributes:j,rootSelector:"table",vars:u,varsResolver:IX});return w.jsx(_X,{value:{getStyles:W,stickyHeader:k,striped:g===!0?"odd":g||void 0,highlightOnHover:y,withColumnBorders:b,withRowBorders:C,captionSide:f||"bottom"},children:w.jsx(le,{component:"table",variant:T,ref:e,mod:[{"data-with-table-border":S,"data-tabular-nums":F},O],...W("table"),...G,children:I||!!D&&w.jsx(QS,{data:D})})})});Re.classes=Bp;Re.displayName="@mantine/core/Table";Re.Td=X4;Re.Th=f2;Re.Tr=xg;Re.Thead=K4;Re.Tbody=Y4;Re.Tfoot=Q4;Re.Caption=J4;Re.ScrollContainer=JS;Re.DataRenderer=QS;const eo=ze((t,e)=>{const n=Te("TextInput",null,t);return w.jsx(io,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});eo.classes=io.classes;eo.displayName="@mantine/core/TextInput";var Z4={root:"m_7341320d"};const MX=(t,{size:e,radius:n,variant:r,gradient:o,color:a,autoContrast:i})=>{const s=t.variantColorResolver({color:a||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ti-size":Tt(e,"ti-size"),"--ti-radius":n===void 0?void 0:On(n),"--ti-bg":a||r?s.background:void 0,"--ti-color":a||r?s.color:void 0,"--ti-bd":a||r?s.border:void 0}}},ZS=ze((t,e)=>{const n=Te("ThemeIcon",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,autoContrast:l,attributes:d,...f}=n,p=at({name:"ThemeIcon",classes:Z4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:d,vars:u,varsResolver:MX});return w.jsx(le,{ref:e,...p("root"),...f})});ZS.classes=Z4;ZS.displayName="@mantine/core/ThemeIcon";const OX=["h1","h2","h3","h4","h5","h6"],PX=["xs","sm","md","lg","xl"];function FX(t,e){const n=e!==void 0?e:`h${t}`;return OX.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:PX.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}:{fontSize:Ae(n),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var eP={root:"m_8a5d1357"};const BX={order:1},LX=(t,{order:e,size:n,lineClamp:r,textWrap:o})=>{const a=FX(e||1,n);return{root:{"--title-fw":a.fontWeight,"--title-lh":a.lineHeight,"--title-fz":a.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":o}}},jt=ze((t,e)=>{const n=Te("Title",BX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,order:u,vars:l,size:d,variant:f,lineClamp:p,textWrap:m,mod:g,attributes:y,...b}=n,C=at({name:"Title",props:n,classes:eP,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:y,vars:l,varsResolver:LX});return[1,2,3,4,5,6].includes(u)?w.jsx(le,{...C("root"),component:`h${u}`,variant:f,ref:e,mod:[{order:u,"data-line-clamp":typeof p=="number"},g],size:d,...b}):null});jt.classes=eP;jt.displayName="@mantine/core/Title";const eE=A.createContext(null);eE.displayName="@mantine/modals/ModalsContext";function jX(){const t=A.useContext(eE);if(!t)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return t}function zX({id:t,cancelProps:e,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:o=!0,closeOnCancel:a=!0,groupProps:i,onCancel:s,onConfirm:u,children:l}){const{cancel:d,confirm:f}=r,p=jX(),m=y=>{typeof e?.onClick=="function"&&e?.onClick(y),typeof s=="function"&&s(),a&&p.closeModal(t)},g=y=>{typeof n?.onClick=="function"&&n?.onClick(y),typeof u=="function"&&u(),o&&p.closeModal(t)};return w.jsxs(w.Fragment,{children:[l&&w.jsx(le,{mb:"md",children:l}),w.jsxs(Ge,{mt:l?0:"md",justify:"flex-end",...i,children:[w.jsx(Ve,{variant:"default",...e,onClick:m,children:e?.children||d}),w.jsx(Ve,{...n,onClick:g,children:n?.children||f})]})]})}const[UX,Kl]=N8("mantine-modals"),WX=t=>{const e=t.modalId||Ci();return Kl("openModal")({...t,modalId:e}),e},VX=t=>{const e=t.modalId||Ci();return Kl("openConfirmModal")({...t,modalId:e}),e},HX=t=>{const e=t.modalId||Ci();return Kl("openContextModal")({...t,modalId:e}),e},GX=Kl("closeModal"),$X=Kl("closeAllModals"),qX=t=>Kl("updateModal")(t),XX=t=>Kl("updateContextModal")(t),tP={open:WX,close:GX,closeAll:$X,openConfirmModal:VX,openContextModal:HX,updateModal:qX,updateContextModal:XX};function JD(t,e){e&&t.type==="confirm"&&t.props.onCancel?.(),t.props.onClose?.()}function KX(t,e){switch(e.type){case"OPEN":return{current:e.modal,modals:[...t.modals,e.modal]};case"CLOSE":{const n=t.modals.find(o=>o.id===e.modalId);if(!n)return t;JD(n,e.canceled);const r=t.modals.filter(o=>o.id!==e.modalId);return{current:r[r.length-1]||t.current,modals:r}}case"CLOSE_ALL":return t.modals.length?(t.modals.concat().reverse().forEach(n=>{JD(n,e.canceled)}),{current:t.current,modals:[]}):t;case"UPDATE":{const{modalId:n,newProps:r}=e,o=t.modals.map(i=>i.id!==n?i:i.type==="content"||i.type==="confirm"?{...i,props:{...i.props,...r}}:i.type==="context"?{...i,props:{...i.props,...r,innerProps:{...i.props.innerProps,...r.innerProps}}}:i),a=t.current?.id===n&&o.find(i=>i.id===n)||t.current;return{...t,modals:o,current:a}}default:return t}}function YX(t){if(!t)return{confirmProps:{},modalProps:{}};const{id:e,children:n,onCancel:r,onConfirm:o,closeOnConfirm:a,closeOnCancel:i,cancelProps:s,confirmProps:u,groupProps:l,labels:d,...f}=t;return{confirmProps:{id:e,children:n,onCancel:r,onConfirm:o,closeOnConfirm:a,closeOnCancel:i,cancelProps:s,confirmProps:u,groupProps:l,labels:d},modalProps:{id:e,...f}}}function QX({children:t,modalProps:e,labels:n,modals:r}){const[o,a]=A.useReducer(KX,{modals:[],current:null}),i=A.useRef(o);i.current=o;const s=A.useCallback(S=>{a({type:"CLOSE_ALL",canceled:S})},[i,a]),u=A.useCallback(({modalId:S,...E})=>{const _=S||Ci();return a({type:"OPEN",modal:{id:_,type:"content",props:E}}),_},[a]),l=A.useCallback(({modalId:S,...E})=>{const _=S||Ci();return a({type:"OPEN",modal:{id:_,type:"confirm",props:E}}),_},[a]),d=A.useCallback((S,{modalId:E,..._})=>{const T=E||Ci();return a({type:"OPEN",modal:{id:T,type:"context",props:_,ctx:S}}),T},[a]),f=A.useCallback((S,E)=>{a({type:"CLOSE",modalId:S,canceled:E})},[i,a]),p=A.useCallback(({modalId:S,...E})=>{a({type:"UPDATE",modalId:S,newProps:E})},[a]),m=A.useCallback(({modalId:S,...E})=>{a({type:"UPDATE",modalId:S,newProps:E})},[a]);UX({openModal:u,openConfirmModal:l,openContextModal:({modal:S,...E})=>d(S,E),closeModal:f,closeContextModal:f,closeAllModals:s,updateModal:p,updateContextModal:m});const g={modalProps:e||{},modals:o.modals,openModal:u,openConfirmModal:l,openContextModal:d,closeModal:f,closeContextModal:f,closeAll:s,updateModal:p,updateContextModal:m},y=()=>{const S=i.current.current;switch(S?.type){case"context":{const{innerProps:E,..._}=S.props,T=r[S.ctx];return{modalProps:_,content:w.jsx(T,{innerProps:E,context:g,id:S.id})}}case"confirm":{const{modalProps:E,confirmProps:_}=YX(S.props);return{modalProps:E,content:w.jsx(zX,{..._,id:S.id,labels:S.props.labels||n})}}case"content":{const{children:E,..._}=S.props;return{modalProps:_,content:E}}default:return{modalProps:{},content:null}}},{modalProps:b,content:C}=y();return w.jsxs(eE.Provider,{value:g,children:[w.jsx(kr,{zIndex:oo("modal")+1,...e,...b,opened:o.modals.length>0,onClose:()=>f(o.current?.id),children:C}),t]})}function JX(t){let e=t,n=!1;const r=new Set;return{getState(){return e},updateState(o){e=typeof o=="function"?o(e):o},setState(o){this.updateState(o),r.forEach(a=>a(e))},initialize(o){n||(e=o,n=!0)},subscribe(o){return r.add(o),()=>r.delete(o)}}}function ZX(t){return A.useSyncExternalStore(t.subscribe,()=>t.getState(),()=>t.getState())}function eK(t,e,n){const r=[],o=[],a={};for(const i of t){const s=i.position||e;a[s]=a[s]||0,a[s]+=1,a[s]<=n?o.push(i):r.push(i)}return{notifications:o,queue:r}}const tK=()=>JX({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Yl=tK(),nK=(t=Yl)=>ZX(t);function gf(t,e){const n=t.getState(),r=e([...n.notifications,...n.queue]),o=eK(r,n.defaultPosition,n.limit);t.setState({notifications:o.notifications,queue:o.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function rK(t,e=Yl){const n=t.id||Ci();return gf(e,r=>t.id&&r.some(o=>o.id===t.id)?r:[...r,{...t,id:n}]),n}function nP(t,e=Yl){return gf(e,n=>n.filter(r=>r.id===t?(r.onClose?.(r),!1):!0)),t}function oK(t,e=Yl){return gf(e,n=>n.map(r=>r.id===t.id?{...r,...t}:r)),t.id}function aK(t=Yl){gf(t,()=>[])}function iK(t=Yl){gf(t,e=>e.slice(0,t.getState().limit))}const bn={show:rK,hide:nP,update:oK,clean:aK,cleanQueue:iK,updateState:gf};function h2(t,e){return h2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},h2(t,e)}function rP(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h2(t,e)}const ZD={disabled:!1},zg=bt.createContext(null);var sK=function(e){return e.scrollTop},Gh="unmounted",ml="exited",vl="entering",od="entered",p2="exiting",_s=(function(t){rP(e,t);function e(r,o){var a;a=t.call(this,r,o)||this;var i=o,s=i&&!i.isMounting?r.enter:r.appear,u;return a.appearStatus=null,r.in?s?(u=ml,a.appearStatus=vl):u=od:r.unmountOnExit||r.mountOnEnter?u=Gh:u=ml,a.state={status:u},a.nextCallback=null,a}e.getDerivedStateFromProps=function(o,a){var i=o.in;return i&&a.status===Gh?{status:ml}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var a=null;if(o!==this.props){var i=this.state.status;this.props.in?i!==vl&&i!==od&&(a=vl):(i===vl||i===od)&&(a=p2)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,a,i,s;return a=i=s=o,o!=null&&typeof o!="number"&&(a=o.exit,i=o.enter,s=o.appear!==void 0?o.appear:i),{exit:a,enter:i,appear:s}},n.updateStatus=function(o,a){if(o===void 0&&(o=!1),a!==null)if(this.cancelNextCallback(),a===vl){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:fd.findDOMNode(this);i&&sK(i)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ml&&this.setState({status:Gh})},n.performEnter=function(o){var a=this,i=this.props.enter,s=this.context?this.context.isMounting:o,u=this.props.nodeRef?[s]:[fd.findDOMNode(this),s],l=u[0],d=u[1],f=this.getTimeouts(),p=s?f.appear:f.enter;if(!o&&!i||ZD.disabled){this.safeSetState({status:od},function(){a.props.onEntered(l)});return}this.props.onEnter(l,d),this.safeSetState({status:vl},function(){a.props.onEntering(l,d),a.onTransitionEnd(p,function(){a.safeSetState({status:od},function(){a.props.onEntered(l,d)})})})},n.performExit=function(){var o=this,a=this.props.exit,i=this.getTimeouts(),s=this.props.nodeRef?void 0:fd.findDOMNode(this);if(!a||ZD.disabled){this.safeSetState({status:ml},function(){o.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:p2},function(){o.props.onExiting(s),o.onTransitionEnd(i.exit,function(){o.safeSetState({status:ml},function(){o.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,a){a=this.setNextCallback(a),this.setState(o,a)},n.setNextCallback=function(o){var a=this,i=!0;return this.nextCallback=function(s){i&&(i=!1,a.nextCallback=null,o(s))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(o,a){this.setNextCallback(a);var i=this.props.nodeRef?this.props.nodeRef.current:fd.findDOMNode(this),s=o==null&&!this.props.addEndListener;if(!i||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],l=u[0],d=u[1];this.props.addEndListener(l,d)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===Gh)return null;var a=this.props,i=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var s=FS(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bt.createElement(zg.Provider,{value:null},typeof i=="function"?i(o,s):bt.cloneElement(bt.Children.only(i),s))},e})(bt.Component);_s.contextType=zg;_s.propTypes={};function Qc(){}_s.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Qc,onEntering:Qc,onEntered:Qc,onExit:Qc,onExiting:Qc,onExited:Qc};_s.UNMOUNTED=Gh;_s.EXITED=ml;_s.ENTERING=vl;_s.ENTERED=od;_s.EXITING=p2;function uK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tE(t,e){var n=function(a){return e&&A.isValidElement(a)?e(a):a},r=Object.create(null);return t&&A.Children.map(t,function(o){return o}).forEach(function(o){r[o.key]=n(o)}),r}function lK(t,e){t=t||{},e=e||{};function n(d){return d in e?e[d]:t[d]}var r=Object.create(null),o=[];for(var a in t)a in e?o.length&&(r[a]=o,o=[]):o.push(a);var i,s={};for(var u in e){if(r[u])for(i=0;i<r[u].length;i++){var l=r[u][i];s[r[u][i]]=n(l)}s[u]=n(u)}for(i=0;i<o.length;i++)s[o[i]]=n(o[i]);return s}function _l(t,e,n){return n[e]!=null?n[e]:t.props[e]}function cK(t,e){return tE(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:_l(n,"appear",t),enter:_l(n,"enter",t),exit:_l(n,"exit",t)})})}function dK(t,e,n){var r=tE(t.children),o=lK(e,r);return Object.keys(o).forEach(function(a){var i=o[a];if(A.isValidElement(i)){var s=a in e,u=a in r,l=e[a],d=A.isValidElement(l)&&!l.props.in;u&&(!s||d)?o[a]=A.cloneElement(i,{onExited:n.bind(null,i),in:!0,exit:_l(i,"exit",t),enter:_l(i,"enter",t)}):!u&&s&&!d?o[a]=A.cloneElement(i,{in:!1}):u&&s&&A.isValidElement(l)&&(o[a]=A.cloneElement(i,{onExited:n.bind(null,i),in:l.props.in,exit:_l(i,"exit",t),enter:_l(i,"enter",t)}))}}),o}var fK=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},hK={component:"div",childFactory:function(e){return e}},pu=(function(t){rP(e,t);function e(r,o){var a;a=t.call(this,r,o)||this;var i=a.handleExited.bind(uK(a));return a.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(o,a){var i=a.children,s=a.handleExited,u=a.firstRender;return{children:u?cK(o,s):dK(o,i,s),firstRender:!1}},n.handleExited=function(o,a){var i=tE(this.props.children);o.key in i||(o.props.onExited&&o.props.onExited(a),this.mounted&&this.setState(function(s){var u=Bd({},s.children);return delete u[o.key],{children:u}}))},n.render=function(){var o=this.props,a=o.component,i=o.childFactory,s=FS(o,["component","childFactory"]),u=this.state.contextValue,l=fK(this.state.children).map(i);return delete s.appear,delete s.enter,delete s.exit,a===null?bt.createElement(zg.Provider,{value:u},l):bt.createElement(zg.Provider,{value:u},bt.createElement(a,s,l))},e})(bt.Component);pu.propTypes={};pu.defaultProps=hK;const oP=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function pK(t,e){return t.reduce((n,r)=>(n[r.position||e].push(r),n),oP.reduce((n,r)=>(n[r]=[],n),{}))}const ek={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},mK={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function vK({state:t,maxHeight:e,position:n,transitionDuration:r}){const[o,a]=n.split("-"),i=a==="center"?`${o}-center`:a,s={opacity:0,maxHeight:e,transform:ek[i],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:mK[i]},l={opacity:0,maxHeight:0,transform:ek[i]};return{...s,...{entering:u,entered:u,exiting:l,exited:l}[t]}}function gK(t,e){return typeof e=="number"?e:e===!1||t===!1?!1:t}const aP=A.forwardRef(({data:t,onHide:e,autoClose:n,...r},o)=>{const{autoClose:a,message:i,...s}=t,u=gK(n,t.autoClose),l=A.useRef(-1),d=()=>window.clearTimeout(l.current),f=()=>{e(t.id),d()},p=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return A.useEffect(()=>{t.onOpen?.(t)},[]),A.useEffect(()=>(p(),d),[u]),w.jsx(HS,{...r,...s,onClose:f,ref:o,onMouseEnter:d,onMouseLeave:p,children:i})});aP.displayName="@mantine/notifications/NotificationContainer";var iP={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const yK=_s,bK={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:oo("overlay"),store:Yl,withinPortal:!0},xK=(t,{zIndex:e,containerWidth:n})=>({root:{"--notifications-z-index":e?.toString(),"--notifications-container-width":Ae(n)}}),Ts=ze((t,e)=>{const n=Te("Notifications",bK,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,position:l,autoClose:d,transitionDuration:f,containerWidth:p,notificationMaxHeight:m,limit:g,zIndex:y,store:b,portalProps:C,withinPortal:S,...E}=n,_=$r(),T=nK(b),D=v8(),I=By(),k=A.useRef({}),M=A.useRef(0),F=(_.respectReducedMotion?I:!1)?1:f,j=at({name:"Notifications",classes:iP,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,vars:u,varsResolver:xK});A.useEffect(()=>{b?.updateState(q=>({...q,limit:g||5,defaultPosition:l}))},[g,l]),Su(()=>{T.notifications.length>M.current&&setTimeout(()=>D(),0),M.current=T.notifications.length},[T.notifications]);const G=pK(T.notifications,l),W=oP.reduce((q,P)=>(q[P]=G[P].map(({style:U,...z})=>w.jsx(yK,{timeout:F,onEnter:()=>k.current[z.id].offsetHeight,nodeRef:{current:k.current[z.id]},children:H=>w.jsx(aP,{ref:L=>{L&&(k.current[z.id]=L)},data:z,onHide:L=>nP(L,b),autoClose:d,...j("notification",{style:{...vK({state:H,position:P,transitionDuration:F,maxHeight:m}),...U}})})},z.id)),q),{});return w.jsxs(ku,{withinPortal:S,...C,children:[w.jsx(le,{...j("root"),"data-position":"top-center",ref:e,...E,children:w.jsx(pu,{children:W["top-center"]})}),w.jsx(le,{...j("root"),"data-position":"top-left",...E,children:w.jsx(pu,{children:W["top-left"]})}),w.jsx(le,{...j("root",{className:Dg.classNames.fullWidth}),"data-position":"top-right",...E,children:w.jsx(pu,{children:W["top-right"]})}),w.jsx(le,{...j("root",{className:Dg.classNames.fullWidth}),"data-position":"bottom-right",...E,children:w.jsx(pu,{children:W["bottom-right"]})}),w.jsx(le,{...j("root"),"data-position":"bottom-left",...E,children:w.jsx(pu,{children:W["bottom-left"]})}),w.jsx(le,{...j("root"),"data-position":"bottom-center",...E,children:w.jsx(pu,{children:W["bottom-center"]})})]})});Ts.classes=iP;Ts.displayName="@mantine/notifications/Notifications";Ts.show=bn.show;Ts.hide=bn.hide;Ts.update=bn.update;Ts.clean=bn.clean;Ts.cleanQueue=bn.cleanQueue;Ts.updateState=bn.updateState;/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wK={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(t,e,n,r)=>{const o=A.forwardRef(({color:a="currentColor",size:i=24,stroke:s=2,title:u,className:l,children:d,...f},p)=>A.createElement("svg",{ref:p,...wK[t],width:i,height:i,className:["tabler-icon",`tabler-icon-${e}`,l].join(" "),strokeWidth:s,stroke:a,...f},[u&&A.createElement("title",{key:"svg-title"},u),...r.map(([m,g])=>A.createElement(m,g)),...Array.isArray(d)?d:[d]]));return o.displayName=`${n}`,o};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],m2=gt("outline","alert-circle","AlertCircle",CK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]],gs=gt("outline","arrow-left","ArrowLeft",SK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]],tk=gt("outline","arrow-right","ArrowRight",EK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=[["path",{d:"M8 7l4 -4l4 4",key:"svg-0"}],["path",{d:"M8 17l4 4l4 -4",key:"svg-1"}],["path",{d:"M12 3l0 18",key:"svg-2"}]],_K=gt("outline","arrows-vertical","ArrowsVertical",RK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=[["path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-0"}],["path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-1"}],["path",{d:"M3 6l0 13",key:"svg-2"}],["path",{d:"M12 6l0 13",key:"svg-3"}],["path",{d:"M21 6l0 13",key:"svg-4"}]],fp=gt("outline","book","Book",TK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]],NK=gt("outline","brain","Brain",AK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=[["path",{d:"M4 8a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M16.5 7.5v.01",key:"svg-2"}]],kK=gt("outline","brand-instagram","BrandInstagram",DK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=[["path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z",key:"svg-0"}]],MK=gt("outline","brand-twitter","BrandTwitter",IK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z",key:"svg-0"}],["path",{d:"M10 9l5 3l-5 3z",key:"svg-1"}]],PK=gt("outline","brand-youtube","BrandYoutube",OK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],BK=gt("outline","camera","Camera",FK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]],jK=gt("outline","chart-bar","ChartBar",LK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=[["path",{d:"M12 12l-6.5 5.5",key:"svg-0"}],["path",{d:"M12 3v9h9",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]],UK=gt("outline","chart-pie-3","ChartPie3",zK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],v2=gt("outline","check","Check",WK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],nk=gt("outline","chevron-down","ChevronDown",VK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M9 12l.01 0",key:"svg-2"}],["path",{d:"M13 12l2 0",key:"svg-3"}],["path",{d:"M9 16l.01 0",key:"svg-4"}],["path",{d:"M13 16l2 0",key:"svg-5"}]],sP=gt("outline","clipboard-list","ClipboardList",HK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]],$K=gt("outline","clock","Clock",GK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["path",{d:"M7 8l-4 4l4 4",key:"svg-0"}],["path",{d:"M17 8l4 4l-4 4",key:"svg-1"}],["path",{d:"M14 4l-4 16",key:"svg-2"}]],XK=gt("outline","code","Code",qK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 1 0 0 4h2a2 2 0 1 1 0 4h-2a2 2 0 0 1 -1.8 -1",key:"svg-1"}],["path",{d:"M12 7v10",key:"svg-2"}]],YK=gt("outline","coin","Coin",KK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=[["path",{d:"M8 13v.01",key:"svg-1"}],["path",{d:"M12 17v.01",key:"svg-2"}],["path",{d:"M12 12v.01",key:"svg-3"}],["path",{d:"M16 14v.01",key:"svg-4"}],["path",{d:"M11 8v.01",key:"svg-5"}],["path",{d:"M13.148 3.476l2.667 1.104a4 4 0 0 0 4.656 6.14l.053 .132a3 3 0 0 1 0 2.296q -.745 1.18 -1.024 1.852q -.283 .684 -.66 2.216a3 3 0 0 1 -1.624 1.623q -1.572 .394 -2.216 .661q -.712 .295 -1.852 1.024a3 3 0 0 1 -2.296 0q -1.203 -.754 -1.852 -1.024q -.707 -.292 -2.216 -.66a3 3 0 0 1 -1.623 -1.624q -.397 -1.577 -.661 -2.216q -.298 -.718 -1.024 -1.852a3 3 0 0 1 0 -2.296q .719 -1.116 1.024 -1.852q .257 -.62 .66 -2.216a3 3 0 0 1 1.624 -1.623q 1.547 -.384 2.216 -.661q .687 -.285 1.852 -1.024a3 3 0 0 1 2.296 0",key:"svg-6"}]],JK=gt("outline","cookie","Cookie",QK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]],eY=gt("outline","device-floppy","DeviceFloppy",ZK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]],nY=gt("outline","edit","Edit",tY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]],nE=gt("outline","eye","Eye",rY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["path",{d:"M18.9 7a8 8 0 0 1 1.1 5v1a6 6 0 0 0 .8 3",key:"svg-0"}],["path",{d:"M8 11a4 4 0 0 1 8 0v1a10 10 0 0 0 2 6",key:"svg-1"}],["path",{d:"M12 11v2a14 14 0 0 0 2.5 8",key:"svg-2"}],["path",{d:"M8 15a18 18 0 0 0 1.8 6",key:"svg-3"}],["path",{d:"M4.9 19a22 22 0 0 1 -.9 -7v-1a8 8 0 0 1 12 -6.95",key:"svg-4"}]],aY=gt("outline","fingerprint","Fingerprint",oY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["path",{d:"M12 3a3 3 0 0 0 -3 3v12a3 3 0 0 0 3 3",key:"svg-0"}],["path",{d:"M6 3a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3",key:"svg-1"}],["path",{d:"M13 7h7a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-7",key:"svg-2"}],["path",{d:"M5 7h-1a1 1 0 0 0 -1 1v8a1 1 0 0 0 1 1h1",key:"svg-3"}],["path",{d:"M17 12h.01",key:"svg-4"}],["path",{d:"M13 12h.01",key:"svg-5"}]],sY=gt("outline","forms","Forms",iY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M13.41 10.59l2.59 -2.59",key:"svg-2"}],["path",{d:"M7 12a5 5 0 0 1 5 -5",key:"svg-3"}]],lY=gt("outline","gauge","Gauge",uY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],dY=gt("outline","info-circle","InfoCircle",cY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"M5 12h2",key:"svg-0"}],["path",{d:"M17 12h2",key:"svg-1"}],["path",{d:"M11 12h2",key:"svg-2"}]],hY=gt("outline","line-dashed","LineDashed",fY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]],uP=gt("outline","link","Link",pY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]],vY=gt("outline","list-numbers","ListNumbers",mY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]],yY=gt("outline","list","List",gY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-0"}],["path",{d:"M9.5 9h.01",key:"svg-1"}],["path",{d:"M14.5 9h.01",key:"svg-2"}],["path",{d:"M9.5 13a3.5 3.5 0 0 0 5 0",key:"svg-3"}]],xY=gt("outline","message-chatbot","MessageChatbot",bY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M5 10a7 7 0 0 0 14 0",key:"svg-1"}],["path",{d:"M8 21l8 0",key:"svg-2"}],["path",{d:"M12 17l0 4",key:"svg-3"}]],rE=gt("outline","microphone","Microphone",wY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["path",{d:"M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M9 17v-13h10v13",key:"svg-2"}],["path",{d:"M9 8h10",key:"svg-3"}]],SY=gt("outline","music","Music",CY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M10 6h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3",key:"svg-0"}],["path",{d:"M17 7m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}]],RY=gt("outline","notification","Notification",EY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=[["path",{d:"M8 10v-7l-2 2",key:"svg-0"}],["path",{d:"M6 16a2 2 0 1 1 4 0c0 .591 -.601 1.46 -1 2l-3 3h4",key:"svg-1"}],["path",{d:"M15 14a2 2 0 1 0 2 -2a2 2 0 1 0 -2 -2",key:"svg-2"}],["path",{d:"M6.5 10h3",key:"svg-3"}]],TY=gt("outline","numbers","Numbers",_Y);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]],C0=gt("outline","pencil","Pencil",AY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]],Ug=gt("outline","photo","Photo",NY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"M22 9l-10 -4l-10 4l10 4l10 -4v6",key:"svg-0"}],["path",{d:"M6 10.6v5.4a6 3 0 0 0 12 0v-5.4",key:"svg-1"}]],g2=gt("outline","school","School",DY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]],IY=gt("outline","send","Send",kY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],OY=gt("outline","settings","Settings",MY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"M3 7v-2h13v2",key:"svg-0"}],["path",{d:"M10 5v14",key:"svg-1"}],["path",{d:"M12 19h-4",key:"svg-2"}],["path",{d:"M15 13v-1h6v1",key:"svg-3"}],["path",{d:"M18 12v7",key:"svg-4"}],["path",{d:"M17 19h2",key:"svg-5"}]],FY=gt("outline","text-size","TextSize",PY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],Lp=gt("outline","trash","Trash",BY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"M4 20l3 0",key:"svg-0"}],["path",{d:"M14 20l7 0",key:"svg-1"}],["path",{d:"M6.9 15l6.9 0",key:"svg-2"}],["path",{d:"M10.2 6.3l5.8 13.7",key:"svg-3"}],["path",{d:"M5 20l6 -16l2 0l7 16",key:"svg-4"}]],jY=gt("outline","typography","Typography",LY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]],oE=gt("outline","upload","Upload",zY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]],WY=gt("outline","user","User",UY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]],HY=gt("outline","users","Users",VY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z",key:"svg-0"}],["path",{d:"M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M7 12l4 0",key:"svg-2"}],["path",{d:"M9 10l0 4",key:"svg-3"}]],lP=gt("outline","video-plus","VideoPlus",GY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z",key:"svg-0"}],["path",{d:"M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-1"}]],cP=gt("outline","video","Video",$Y);function dP(t,e){return function(){return t.apply(e,arguments)}}const{toString:qY}=Object.prototype,{getPrototypeOf:aE}=Object,{iterator:S0,toStringTag:fP}=Symbol,E0=(t=>e=>{const n=qY.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ya=t=>(t=t.toLowerCase(),e=>E0(e)===t),R0=t=>e=>typeof e===t,{isArray:yf}=Array,Ld=R0("undefined");function jp(t){return t!==null&&!Ld(t)&&t.constructor!==null&&!Ld(t.constructor)&&yo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const hP=Ya("ArrayBuffer");function XY(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&hP(t.buffer),e}const KY=R0("string"),yo=R0("function"),pP=R0("number"),zp=t=>t!==null&&typeof t=="object",YY=t=>t===!0||t===!1,wg=t=>{if(E0(t)!=="object")return!1;const e=aE(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(fP in t)&&!(S0 in t)},QY=t=>{if(!zp(t)||jp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},JY=Ya("Date"),ZY=Ya("File"),eQ=Ya("Blob"),tQ=Ya("FileList"),nQ=t=>zp(t)&&yo(t.pipe),rQ=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||yo(t.append)&&((e=E0(t))==="formdata"||e==="object"&&yo(t.toString)&&t.toString()==="[object FormData]"))},oQ=Ya("URLSearchParams"),[aQ,iQ,sQ,uQ]=["ReadableStream","Request","Response","Headers"].map(Ya),lQ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Up(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),yf(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{if(jp(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),i=a.length;let s;for(r=0;r<i;r++)s=a[r],e.call(null,t[s],s,t)}}function mP(t,e){if(jp(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}const Tl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vP=t=>!Ld(t)&&t!==Tl;function y2(){const{caseless:t,skipUndefined:e}=vP(this)&&this||{},n={},r=(o,a)=>{const i=t&&mP(n,a)||a;wg(n[i])&&wg(o)?n[i]=y2(n[i],o):wg(o)?n[i]=y2({},o):yf(o)?n[i]=o.slice():(!e||!Ld(o))&&(n[i]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Up(arguments[o],r);return n}const cQ=(t,e,n,{allOwnKeys:r}={})=>(Up(e,(o,a)=>{n&&yo(o)?t[a]=dP(o,n):t[a]=o},{allOwnKeys:r}),t),dQ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),fQ=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},hQ=(t,e,n,r)=>{let o,a,i;const s={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),a=o.length;a-- >0;)i=o[a],(!r||r(i,t,e))&&!s[i]&&(e[i]=t[i],s[i]=!0);t=n!==!1&&aE(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},pQ=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},mQ=t=>{if(!t)return null;if(yf(t))return t;let e=t.length;if(!pP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},vQ=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&aE(Uint8Array)),gQ=(t,e)=>{const r=(t&&t[S0]).call(t);let o;for(;(o=r.next())&&!o.done;){const a=o.value;e.call(t,a[0],a[1])}},yQ=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},bQ=Ya("HTMLFormElement"),xQ=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),rk=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),wQ=Ya("RegExp"),gP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Up(n,(o,a)=>{let i;(i=e(o,a,t))!==!1&&(r[a]=i||o)}),Object.defineProperties(t,r)},CQ=t=>{gP(t,(e,n)=>{if(yo(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(yo(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},SQ=(t,e)=>{const n={},r=o=>{o.forEach(a=>{n[a]=!0})};return yf(t)?r(t):r(String(t).split(e)),n},EQ=()=>{},RQ=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function _Q(t){return!!(t&&yo(t.append)&&t[fP]==="FormData"&&t[S0])}const TQ=t=>{const e=new Array(10),n=(r,o)=>{if(zp(r)){if(e.indexOf(r)>=0)return;if(jp(r))return r;if(!("toJSON"in r)){e[o]=r;const a=yf(r)?[]:{};return Up(r,(i,s)=>{const u=n(i,o+1);!Ld(u)&&(a[s]=u)}),e[o]=void 0,a}}return r};return n(t,0)},AQ=Ya("AsyncFunction"),NQ=t=>t&&(zp(t)||yo(t))&&yo(t.then)&&yo(t.catch),yP=((t,e)=>t?setImmediate:e?((n,r)=>(Tl.addEventListener("message",({source:o,data:a})=>{o===Tl&&a===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Tl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",yo(Tl.postMessage)),DQ=typeof queueMicrotask<"u"?queueMicrotask.bind(Tl):typeof process<"u"&&process.nextTick||yP,kQ=t=>t!=null&&yo(t[S0]),ye={isArray:yf,isArrayBuffer:hP,isBuffer:jp,isFormData:rQ,isArrayBufferView:XY,isString:KY,isNumber:pP,isBoolean:YY,isObject:zp,isPlainObject:wg,isEmptyObject:QY,isReadableStream:aQ,isRequest:iQ,isResponse:sQ,isHeaders:uQ,isUndefined:Ld,isDate:JY,isFile:ZY,isBlob:eQ,isRegExp:wQ,isFunction:yo,isStream:nQ,isURLSearchParams:oQ,isTypedArray:vQ,isFileList:tQ,forEach:Up,merge:y2,extend:cQ,trim:lQ,stripBOM:dQ,inherits:fQ,toFlatObject:hQ,kindOf:E0,kindOfTest:Ya,endsWith:pQ,toArray:mQ,forEachEntry:gQ,matchAll:yQ,isHTMLForm:bQ,hasOwnProperty:rk,hasOwnProp:rk,reduceDescriptors:gP,freezeMethods:CQ,toObjectSet:SQ,toCamelCase:xQ,noop:EQ,toFiniteNumber:RQ,findKey:mP,global:Tl,isContextDefined:vP,isSpecCompliantForm:_Q,toJSONObject:TQ,isAsyncFn:AQ,isThenable:NQ,setImmediate:yP,asap:DQ,isIterable:kQ};function St(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}ye.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}});const bP=St.prototype,xP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xP[t]={value:t}});Object.defineProperties(St,xP);Object.defineProperty(bP,"isAxiosError",{value:!0});St.from=(t,e,n,r,o,a)=>{const i=Object.create(bP);ye.toFlatObject(t,i,function(d){return d!==Error.prototype},l=>l!=="isAxiosError");const s=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return St.call(i,s,u,n,r,o),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",a&&Object.assign(i,a),i};const IQ=null;function b2(t){return ye.isPlainObject(t)||ye.isArray(t)}function wP(t){return ye.endsWith(t,"[]")?t.slice(0,-2):t}function ok(t,e,n){return t?t.concat(e).map(function(o,a){return o=wP(o),!n&&a?"["+o+"]":o}).join(n?".":""):e}function MQ(t){return ye.isArray(t)&&!t.some(b2)}const OQ=ye.toFlatObject(ye,{},null,function(e){return/^is[A-Z]/.test(e)});function _0(t,e,n){if(!ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!ye.isUndefined(b[y])});const r=n.metaTokens,o=n.visitor||d,a=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(e);if(!ye.isFunction(o))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(ye.isDate(g))return g.toISOString();if(ye.isBoolean(g))return g.toString();if(!u&&ye.isBlob(g))throw new St("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(g)||ye.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,y,b){let C=g;if(g&&!b&&typeof g=="object"){if(ye.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(ye.isArray(g)&&MQ(g)||(ye.isFileList(g)||ye.endsWith(y,"[]"))&&(C=ye.toArray(g)))return y=wP(y),C.forEach(function(E,_){!(ye.isUndefined(E)||E===null)&&e.append(i===!0?ok([y],_,a):i===null?y:y+"[]",l(E))}),!1}return b2(g)?!0:(e.append(ok(b,y,a),l(g)),!1)}const f=[],p=Object.assign(OQ,{defaultVisitor:d,convertValue:l,isVisitable:b2});function m(g,y){if(!ye.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(g),ye.forEach(g,function(C,S){(!(ye.isUndefined(C)||C===null)&&o.call(e,C,ye.isString(S)?S.trim():S,y,p))===!0&&m(C,y?y.concat(S):[S])}),f.pop()}}if(!ye.isObject(t))throw new TypeError("data must be an object");return m(t),e}function ak(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function iE(t,e){this._pairs=[],t&&_0(t,this,e)}const CP=iE.prototype;CP.append=function(e,n){this._pairs.push([e,n])};CP.toString=function(e){const n=e?function(r){return e.call(this,r,ak)}:ak;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function PQ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function SP(t,e,n){if(!e)return t;const r=n&&n.encode||PQ;ye.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(e,n):a=ye.isURLSearchParams(e)?e.toString():new iE(e,n).toString(r),a){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class ik{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const EP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FQ=typeof URLSearchParams<"u"?URLSearchParams:iE,BQ=typeof FormData<"u"?FormData:null,LQ=typeof Blob<"u"?Blob:null,jQ={isBrowser:!0,classes:{URLSearchParams:FQ,FormData:BQ,Blob:LQ},protocols:["http","https","file","blob","url","data"]},sE=typeof window<"u"&&typeof document<"u",x2=typeof navigator=="object"&&navigator||void 0,zQ=sE&&(!x2||["ReactNative","NativeScript","NS"].indexOf(x2.product)<0),UQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",WQ=sE&&window.location.href||"http://localhost",VQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sE,hasStandardBrowserEnv:zQ,hasStandardBrowserWebWorkerEnv:UQ,navigator:x2,origin:WQ},Symbol.toStringTag,{value:"Module"})),jr={...VQ,...jQ};function HQ(t,e){return _0(t,new jr.classes.URLSearchParams,{visitor:function(n,r,o,a){return jr.isNode&&ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function GQ(t){return ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $Q(t){const e={},n=Object.keys(t);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],e[a]=t[a];return e}function RP(t){function e(n,r,o,a){let i=n[a++];if(i==="__proto__")return!0;const s=Number.isFinite(+i),u=a>=n.length;return i=!i&&ye.isArray(o)?o.length:i,u?(ye.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!s):((!o[i]||!ye.isObject(o[i]))&&(o[i]=[]),e(n,r,o[i],a)&&ye.isArray(o[i])&&(o[i]=$Q(o[i])),!s)}if(ye.isFormData(t)&&ye.isFunction(t.entries)){const n={};return ye.forEachEntry(t,(r,o)=>{e(GQ(r),o,n,0)}),n}return null}function qQ(t,e,n){if(ye.isString(t))try{return(e||JSON.parse)(t),ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Wp={transitional:EP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,a=ye.isObject(e);if(a&&ye.isHTMLForm(e)&&(e=new FormData(e)),ye.isFormData(e))return o?JSON.stringify(RP(e)):e;if(ye.isArrayBuffer(e)||ye.isBuffer(e)||ye.isStream(e)||ye.isFile(e)||ye.isBlob(e)||ye.isReadableStream(e))return e;if(ye.isArrayBufferView(e))return e.buffer;if(ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return HQ(e,this.formSerializer).toString();if((s=ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return _0(s?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),qQ(e)):e}],transformResponse:[function(e){const n=this.transitional||Wp.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(ye.isResponse(e)||ye.isReadableStream(e))return e;if(e&&ye.isString(e)&&(r&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(s){if(i)throw s.name==="SyntaxError"?St.from(s,St.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jr.classes.FormData,Blob:jr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],t=>{Wp.headers[t]={}});const XQ=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KQ=t=>{const e={};let n,r,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||e[n]&&XQ[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},sk=Symbol("internals");function Oh(t){return t&&String(t).trim().toLowerCase()}function Cg(t){return t===!1||t==null?t:ye.isArray(t)?t.map(Cg):String(t)}function YQ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const QQ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function z1(t,e,n,r,o){if(ye.isFunction(r))return r.call(this,e,n);if(o&&(e=n),!!ye.isString(e)){if(ye.isString(r))return e.indexOf(r)!==-1;if(ye.isRegExp(r))return r.test(e)}}function JQ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function ZQ(t,e){const n=ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,a,i){return this[r].call(this,e,o,a,i)},configurable:!0})})}let bo=class{constructor(e){e&&this.set(e)}set(e,n,r){const o=this;function a(s,u,l){const d=Oh(u);if(!d)throw new Error("header name must be a non-empty string");const f=ye.findKey(o,d);(!f||o[f]===void 0||l===!0||l===void 0&&o[f]!==!1)&&(o[f||u]=Cg(s))}const i=(s,u)=>ye.forEach(s,(l,d)=>a(l,d,u));if(ye.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(ye.isString(e)&&(e=e.trim())&&!QQ(e))i(KQ(e),n);else if(ye.isObject(e)&&ye.isIterable(e)){let s={},u,l;for(const d of e){if(!ye.isArray(d))throw TypeError("Object iterator must return a key-value pair");s[l=d[0]]=(u=s[l])?ye.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}i(s,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=Oh(e),e){const r=ye.findKey(this,e);if(r){const o=this[r];if(!n)return o;if(n===!0)return YQ(o);if(ye.isFunction(n))return n.call(this,o,r);if(ye.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Oh(e),e){const r=ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||z1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let o=!1;function a(i){if(i=Oh(i),i){const s=ye.findKey(r,i);s&&(!n||z1(r,r[s],s,n))&&(delete r[s],o=!0)}}return ye.isArray(e)?e.forEach(a):a(e),o}clear(e){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const a=n[r];(!e||z1(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const n=this,r={};return ye.forEach(this,(o,a)=>{const i=ye.findKey(r,a);if(i){n[i]=Cg(o),delete n[a];return}const s=e?JQ(a):String(a).trim();s!==a&&delete n[a],n[s]=Cg(o),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ye.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[sk]=this[sk]={accessors:{}}).accessors,o=this.prototype;function a(i){const s=Oh(i);r[s]||(ZQ(o,i),r[s]=!0)}return ye.isArray(e)?e.forEach(a):a(e),this}};bo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(bo.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ye.freezeMethods(bo);function U1(t,e){const n=this||Wp,r=e||n,o=bo.from(r.headers);let a=r.data;return ye.forEach(t,function(s){a=s.call(n,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function _P(t){return!!(t&&t.__CANCEL__)}function bf(t,e,n){St.call(this,t??"canceled",St.ERR_CANCELED,e,n),this.name="CanceledError"}ye.inherits(bf,St,{__CANCEL__:!0});function TP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new St("Request failed with status code "+n.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function eJ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function tJ(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o=0,a=0,i;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),d=r[a];i||(i=l),n[o]=u,r[o]=l;let f=a,p=0;for(;f!==o;)p+=n[f++],f=f%t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),l-i<e)return;const m=d&&l-d;return m?Math.round(p*1e3/m):void 0}}function nJ(t,e){let n=0,r=1e3/e,o,a;const i=(l,d=Date.now())=>{n=d,o=null,a&&(clearTimeout(a),a=null),t(...l)};return[(...l)=>{const d=Date.now(),f=d-n;f>=r?i(l,d):(o=l,a||(a=setTimeout(()=>{a=null,i(o)},r-f)))},()=>o&&i(o)]}const Wg=(t,e,n=3)=>{let r=0;const o=tJ(50,250);return nJ(a=>{const i=a.loaded,s=a.lengthComputable?a.total:void 0,u=i-r,l=o(u),d=i<=s;r=i;const f={loaded:i,total:s,progress:s?i/s:void 0,bytes:u,rate:l||void 0,estimated:l&&s&&d?(s-i)/l:void 0,event:a,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(f)},n)},uk=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},lk=t=>(...e)=>ye.asap(()=>t(...e)),rJ=jr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,jr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(jr.origin),jr.navigator&&/(msie|trident)/i.test(jr.navigator.userAgent)):()=>!0,oJ=jr.hasStandardBrowserEnv?{write(t,e,n,r,o,a){const i=[t+"="+encodeURIComponent(e)];ye.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),ye.isString(r)&&i.push("path="+r),ye.isString(o)&&i.push("domain="+o),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function aJ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function iJ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function AP(t,e,n){let r=!aJ(e);return t&&(r||n==!1)?iJ(t,e):e}const ck=t=>t instanceof bo?{...t}:t;function zl(t,e){e=e||{};const n={};function r(l,d,f,p){return ye.isPlainObject(l)&&ye.isPlainObject(d)?ye.merge.call({caseless:p},l,d):ye.isPlainObject(d)?ye.merge({},d):ye.isArray(d)?d.slice():d}function o(l,d,f,p){if(ye.isUndefined(d)){if(!ye.isUndefined(l))return r(void 0,l,f,p)}else return r(l,d,f,p)}function a(l,d){if(!ye.isUndefined(d))return r(void 0,d)}function i(l,d){if(ye.isUndefined(d)){if(!ye.isUndefined(l))return r(void 0,l)}else return r(void 0,d)}function s(l,d,f){if(f in e)return r(l,d);if(f in t)return r(void 0,l)}const u={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(l,d,f)=>o(ck(l),ck(d),f,!0)};return ye.forEach(Object.keys({...t,...e}),function(d){const f=u[d]||o,p=f(t[d],e[d],d);ye.isUndefined(p)&&f!==s||(n[d]=p)}),n}const NP=t=>{const e=zl({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:i,auth:s}=e;if(e.headers=i=bo.from(i),e.url=SP(AP(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&i.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),ye.isFormData(n)){if(jr.hasStandardBrowserEnv||jr.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(ye.isFunction(n.getHeaders)){const u=n.getHeaders(),l=["content-type","content-length"];Object.entries(u).forEach(([d,f])=>{l.includes(d.toLowerCase())&&i.set(d,f)})}}if(jr.hasStandardBrowserEnv&&(r&&ye.isFunction(r)&&(r=r(e)),r||r!==!1&&rJ(e.url))){const u=o&&a&&oJ.read(a);u&&i.set(o,u)}return e},sJ=typeof XMLHttpRequest<"u",uJ=sJ&&function(t){return new Promise(function(n,r){const o=NP(t);let a=o.data;const i=bo.from(o.headers).normalize();let{responseType:s,onUploadProgress:u,onDownloadProgress:l}=o,d,f,p,m,g;function y(){m&&m(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(o.method.toUpperCase(),o.url,!0),b.timeout=o.timeout;function C(){if(!b)return;const E=bo.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),T={data:!s||s==="text"||s==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:E,config:t,request:b};TP(function(I){n(I),y()},function(I){r(I),y()},T),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(r(new St("Request aborted",St.ECONNABORTED,t,b)),b=null)},b.onerror=function(_){const T=_&&_.message?_.message:"Network Error",D=new St(T,St.ERR_NETWORK,t,b);D.event=_||null,r(D),b=null},b.ontimeout=function(){let _=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const T=o.transitional||EP;o.timeoutErrorMessage&&(_=o.timeoutErrorMessage),r(new St(_,T.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,t,b)),b=null},a===void 0&&i.setContentType(null),"setRequestHeader"in b&&ye.forEach(i.toJSON(),function(_,T){b.setRequestHeader(T,_)}),ye.isUndefined(o.withCredentials)||(b.withCredentials=!!o.withCredentials),s&&s!=="json"&&(b.responseType=o.responseType),l&&([p,g]=Wg(l,!0),b.addEventListener("progress",p)),u&&b.upload&&([f,m]=Wg(u),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",m)),(o.cancelToken||o.signal)&&(d=E=>{b&&(r(!E||E.type?new bf(null,t,b):E),b.abort(),b=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const S=eJ(o.url);if(S&&jr.protocols.indexOf(S)===-1){r(new St("Unsupported protocol "+S+":",St.ERR_BAD_REQUEST,t));return}b.send(a||null)})},lJ=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,o;const a=function(l){if(!o){o=!0,s();const d=l instanceof Error?l:this.reason;r.abort(d instanceof St?d:new bf(d instanceof Error?d.message:d))}};let i=e&&setTimeout(()=>{i=null,a(new St(`timeout ${e} of ms exceeded`,St.ETIMEDOUT))},e);const s=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(a):l.removeEventListener("abort",a)}),t=null)};t.forEach(l=>l.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>ye.asap(s),u}},cJ=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,o;for(;r<n;)o=r+e,yield t.slice(r,o),r=o},dJ=async function*(t,e){for await(const n of fJ(t))yield*cJ(n,e)},fJ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},dk=(t,e,n,r)=>{const o=dJ(t,e);let a=0,i,s=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:l,value:d}=await o.next();if(l){s(),u.close();return}let f=d.byteLength;if(n){let p=a+=f;n(p)}u.enqueue(new Uint8Array(d))}catch(l){throw s(l),l}},cancel(u){return s(u),o.return()}},{highWaterMark:2})},fk=64*1024,{isFunction:Fv}=ye,hJ=(({Request:t,Response:e})=>({Request:t,Response:e}))(ye.global),{ReadableStream:hk,TextEncoder:pk}=ye.global,mk=(t,...e)=>{try{return!!t(...e)}catch{return!1}},pJ=t=>{t=ye.merge.call({skipUndefined:!0},hJ,t);const{fetch:e,Request:n,Response:r}=t,o=e?Fv(e):typeof fetch=="function",a=Fv(n),i=Fv(r);if(!o)return!1;const s=o&&Fv(hk),u=o&&(typeof pk=="function"?(g=>y=>g.encode(y))(new pk):async g=>new Uint8Array(await new n(g).arrayBuffer())),l=a&&s&&mk(()=>{let g=!1;const y=new n(jr.origin,{body:new hk,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!y}),d=i&&s&&mk(()=>ye.isReadableStream(new r("").body)),f={stream:d&&(g=>g.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(y,b)=>{let C=y&&y[g];if(C)return C.call(y);throw new St(`Response type '${g}' is not supported`,St.ERR_NOT_SUPPORT,b)})});const p=async g=>{if(g==null)return 0;if(ye.isBlob(g))return g.size;if(ye.isSpecCompliantForm(g))return(await new n(jr.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(g)||ye.isArrayBuffer(g))return g.byteLength;if(ye.isURLSearchParams(g)&&(g=g+""),ye.isString(g))return(await u(g)).byteLength},m=async(g,y)=>{const b=ye.toFiniteNumber(g.getContentLength());return b??p(y)};return async g=>{let{url:y,method:b,data:C,signal:S,cancelToken:E,timeout:_,onDownloadProgress:T,onUploadProgress:D,responseType:I,headers:k,withCredentials:M="same-origin",fetchOptions:O}=NP(g),F=e||fetch;I=I?(I+"").toLowerCase():"text";let j=lJ([S,E&&E.toAbortSignal()],_),G=null;const W=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let q;try{if(D&&l&&b!=="get"&&b!=="head"&&(q=await m(k,C))!==0){let $=new n(y,{method:"POST",body:C,duplex:"half"}),J;if(ye.isFormData(C)&&(J=$.headers.get("content-type"))&&k.setContentType(J),$.body){const[ne,ce]=uk(q,Wg(lk(D)));C=dk($.body,fk,ne,ce)}}ye.isString(M)||(M=M?"include":"omit");const P=a&&"credentials"in n.prototype,U={...O,signal:j,method:b.toUpperCase(),headers:k.normalize().toJSON(),body:C,duplex:"half",credentials:P?M:void 0};G=a&&new n(y,U);let z=await(a?F(G,O):F(y,U));const H=d&&(I==="stream"||I==="response");if(d&&(T||H&&W)){const $={};["status","statusText","headers"].forEach(be=>{$[be]=z[be]});const J=ye.toFiniteNumber(z.headers.get("content-length")),[ne,ce]=T&&uk(J,Wg(lk(T),!0))||[];z=new r(dk(z.body,fk,ne,()=>{ce&&ce(),W&&W()}),$)}I=I||"text";let L=await f[ye.findKey(f,I)||"text"](z,g);return!H&&W&&W(),await new Promise(($,J)=>{TP($,J,{data:L,headers:bo.from(z.headers),status:z.status,statusText:z.statusText,config:g,request:G})})}catch(P){throw W&&W(),P&&P.name==="TypeError"&&/Load failed|fetch/i.test(P.message)?Object.assign(new St("Network Error",St.ERR_NETWORK,g,G),{cause:P.cause||P}):St.from(P,P&&P.code,g,G)}}},mJ=new Map,DP=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:o}=e,a=[r,o,n];let i=a.length,s=i,u,l,d=mJ;for(;s--;)u=a[s],l=d.get(u),l===void 0&&d.set(u,l=s?new Map:pJ(e)),d=l;return l};DP();const w2={http:IQ,xhr:uJ,fetch:{get:DP}};ye.forEach(w2,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const vk=t=>`- ${t}`,vJ=t=>ye.isFunction(t)||t===null||t===!1,kP={getAdapter:(t,e)=>{t=ye.isArray(t)?t:[t];const{length:n}=t;let r,o;const a={};for(let i=0;i<n;i++){r=t[i];let s;if(o=r,!vJ(r)&&(o=w2[(s=String(r)).toLowerCase()],o===void 0))throw new St(`Unknown adapter '${s}'`);if(o&&(ye.isFunction(o)||(o=o.get(e))))break;a[s||"#"+i]=o}if(!o){const i=Object.entries(a).map(([u,l])=>`adapter ${u} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=n?i.length>1?`since :
`+i.map(vk).join(`
`):" "+vk(i[0]):"as no adapter specified";throw new St("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:w2};function W1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bf(null,t)}function gk(t){return W1(t),t.headers=bo.from(t.headers),t.data=U1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),kP.getAdapter(t.adapter||Wp.adapter,t)(t).then(function(r){return W1(t),r.data=U1.call(t,t.transformResponse,r),r.headers=bo.from(r.headers),r},function(r){return _P(r)||(W1(t),r&&r.response&&(r.response.data=U1.call(t,t.transformResponse,r.response),r.response.headers=bo.from(r.response.headers))),Promise.reject(r)})}const IP="1.12.2",T0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{T0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const yk={};T0.transitional=function(e,n,r){function o(a,i){return"[Axios v"+IP+"] Transitional option '"+a+"'"+i+(r?". "+r:"")}return(a,i,s)=>{if(e===!1)throw new St(o(i," has been removed"+(n?" in "+n:"")),St.ERR_DEPRECATED);return n&&!yk[i]&&(yk[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,i,s):!0}};T0.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function gJ(t,e,n){if(typeof t!="object")throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const a=r[o],i=e[a];if(i){const s=t[a],u=s===void 0||i(s,a,t);if(u!==!0)throw new St("option "+a+" must be "+u,St.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new St("Unknown option "+a,St.ERR_BAD_OPTION)}}const Sg={assertOptions:gJ,validators:T0},ii=Sg.validators;let Ml=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ik,response:new ik}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=zl(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:a}=n;r!==void 0&&Sg.assertOptions(r,{silentJSONParsing:ii.transitional(ii.boolean),forcedJSONParsing:ii.transitional(ii.boolean),clarifyTimeoutError:ii.transitional(ii.boolean)},!1),o!=null&&(ye.isFunction(o)?n.paramsSerializer={serialize:o}:Sg.assertOptions(o,{encode:ii.function,serialize:ii.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Sg.assertOptions(n,{baseUrl:ii.spelling("baseURL"),withXsrfToken:ii.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=a&&ye.merge(a.common,a[n.method]);a&&ye.forEach(["delete","get","head","post","put","patch","common"],g=>{delete a[g]}),n.headers=bo.concat(i,a);const s=[];let u=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(u=u&&y.synchronous,s.unshift(y.fulfilled,y.rejected))});const l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let d,f=0,p;if(!u){const g=[gk.bind(this),void 0];for(g.unshift(...s),g.push(...l),p=g.length,d=Promise.resolve(n);f<p;)d=d.then(g[f++],g[f++]);return d}p=s.length;let m=n;for(;f<p;){const g=s[f++],y=s[f++];try{m=g(m)}catch(b){y.call(this,b);break}}try{d=gk.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,p=l.length;f<p;)d=d.then(l[f++],l[f++]);return d}getUri(e){e=zl(this.defaults,e);const n=AP(e.baseURL,e.url,e.allowAbsoluteUrls);return SP(n,e.params,e.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(e){Ml.prototype[e]=function(n,r){return this.request(zl(r||{},{method:e,url:n,data:(r||{}).data}))}});ye.forEach(["post","put","patch"],function(e){function n(r){return function(a,i,s){return this.request(zl(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Ml.prototype[e]=n(),Ml.prototype[e+"Form"]=n(!0)});let yJ=class MP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const i=new Promise(s=>{r.subscribe(s),a=s}).then(o);return i.cancel=function(){r.unsubscribe(a)},i},e(function(a,i,s){r.reason||(r.reason=new bf(a,i,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new MP(function(o){e=o}),cancel:e}}};function bJ(t){return function(n){return t.apply(null,n)}}function xJ(t){return ye.isObject(t)&&t.isAxiosError===!0}const C2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(C2).forEach(([t,e])=>{C2[e]=t});function OP(t){const e=new Ml(t),n=dP(Ml.prototype.request,e);return ye.extend(n,Ml.prototype,e,{allOwnKeys:!0}),ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return OP(zl(t,o))},n}const lt=OP(Wp);lt.Axios=Ml;lt.CanceledError=bf;lt.CancelToken=yJ;lt.isCancel=_P;lt.VERSION=IP;lt.toFormData=_0;lt.AxiosError=St;lt.Cancel=lt.CanceledError;lt.all=function(e){return Promise.all(e)};lt.spread=bJ;lt.isAxiosError=xJ;lt.mergeConfig=zl;lt.AxiosHeaders=bo;lt.formToJSON=t=>RP(ye.isHTMLForm(t)?new FormData(t):t);lt.getAdapter=kP.getAdapter;lt.HttpStatusCode=C2;lt.default=lt;const{Axios:oEe,AxiosError:aEe,CanceledError:iEe,isCancel:sEe,CancelToken:uEe,VERSION:lEe,all:cEe,Cancel:dEe,isAxiosError:fEe,spread:hEe,toFormData:pEe,AxiosHeaders:mEe,HttpStatusCode:vEe,formToJSON:gEe,getAdapter:yEe,mergeConfig:bEe}=lt;/*! js-cookie v3.0.5 | MIT */function Bv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var wJ={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function S2(t,e){function n(o,a,i){if(!(typeof document>"u")){i=Bv({},e,i),typeof i.expires=="number"&&(i.expires=new Date(Date.now()+i.expires*864e5)),i.expires&&(i.expires=i.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,i[u]!==!0&&(s+="="+i[u].split(";")[0]));return document.cookie=o+"="+t.write(a,o)+s}}function r(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var a=document.cookie?document.cookie.split("; "):[],i={},s=0;s<a.length;s++){var u=a[s].split("="),l=u.slice(1).join("=");try{var d=decodeURIComponent(u[0]);if(i[d]=t.read(l,d),o===d)break}catch{}}return o?i[o]:i}}return Object.create({set:n,get:r,remove:function(o,a){n(o,"",Bv({},a,{expires:-1}))},withAttributes:function(o){return S2(this.converter,Bv({},this.attributes,o))},withConverter:function(o){return S2(Bv({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var CJ=S2(wJ,{path:"/"});const PP=A.createContext(null);function SJ({children:t}){const[e,n]=A.useState(()=>{const s=localStorage.getItem("userDetails");return s?JSON.parse(s):null}),i={user:e,isLoggedIn:!!e,login:s=>{localStorage.setItem("userDetails",JSON.stringify(s)),n(s)},logout:async()=>{try{await lt.post("http://localhost:8081/api/auth/logout",{},{withCredentials:!0})}catch(s){console.error("Logout API call failed, proceeding with client-side logout.",s)}finally{localStorage.removeItem("userDetails"),CJ.remove("isLoggedIn",{path:"/"}),n(null)}}};return w.jsx(PP.Provider,{value:i,children:t})}function A0(){return A.useContext(PP)}const EJ="_header_skw72_2",RJ="_link_skw72_9",_J="_subLink_skw72_34",si={header:EJ,link:RJ,subLink:_J},TJ=[{icon:XK,title:"Course Creation",description:"Build learning and assignment JotForms with drag-and-drop ease"},{icon:YK,title:"Group Management",description:"Create groups and assign users efficiently"},{icon:fp,title:"Course Assignment",description:"Map content to courses and assign to groups"},{icon:aY,title:"User Access",description:"Secure login and personalized course views"},{icon:UK,title:"Analytics",description:"View detailed analytics by group and course"},{icon:RY,title:"Submissions",description:"Track assignment submissions and scores"}];function AJ(){const[t,{toggle:e,close:n}]=nD(!1),[r,{toggle:o}]=nD(!1),a=$r(),{colorScheme:i}=UO(),s=i==="dark",u=Gr(),{user:l,isLoggedIn:d,logout:f}=A0(),p=async()=>{await f(),u("/login")},m=TJ.map(g=>w.jsx($a,{className:si.subLink,children:w.jsxs(Ge,{wrap:"nowrap",align:"flex-start",children:[w.jsx(ZS,{size:34,variant:"default",radius:"md",color:s?"dark.4":"gray",children:w.jsx(g.icon,{size:22,color:s?a.colors.blue[3]:a.colors.blue[6]})}),w.jsxs("div",{children:[w.jsx(we,{size:"sm",fw:500,c:s?"white":"black",children:g.title}),w.jsx(we,{size:"xs",c:s?"gray.4":"dimmed",children:g.description})]})]})},g.title));return w.jsxs(le,{children:[w.jsx("header",{className:si.header,style:{backgroundColor:s?a.colors.dark[7]:"white"},children:w.jsxs(Ge,{justify:"space-between",h:"100%",children:[w.jsx(we,{size:"xl",fw:700,children:"LMS"}),w.jsxs(Ge,{h:"100%",gap:0,visibleFrom:"sm",children:[w.jsx(ca,{to:"/",className:si.link,children:"Home"}),w.jsxs(Eu,{width:600,position:"bottom",radius:"md",shadow:"md",withinPortal:!0,children:[w.jsx(Eu.Target,{children:w.jsx("a",{href:"#",className:si.link,children:w.jsxs(Io,{inline:!0,children:[w.jsx(le,{component:"span",mr:5,children:"Features"}),w.jsx(nk,{size:16})]})})}),w.jsxs(Eu.Dropdown,{style:{overflow:"hidden",backgroundColor:s?a.colors.dark[6]:"white"},children:[w.jsxs(Ge,{justify:"space-between",px:"md",children:[w.jsx(we,{fw:500,children:"Features"}),w.jsx(t0,{href:"#",fz:"xs",children:"View all"})]}),w.jsx(go,{my:"sm"}),w.jsx(Wu,{cols:2,spacing:0,children:m})]})]}),l?.role==="ADMIN"&&w.jsx(ca,{to:"/lmsdashboard",className:si.link,children:"LMS Dashboard"}),l?.role!=="ADMIN"&&w.jsx(ca,{to:"/subject",className:si.link,children:"Subjects"})]}),w.jsx(Ge,{visibleFrom:"sm",children:d?w.jsx(Ve,{variant:"default",color:"red",onClick:p,children:"Logout"}):w.jsx(ca,{to:"/login",children:w.jsx(Ve,{variant:"default",children:"Log in"})})}),w.jsx(NS,{opened:t,onClick:e,hiddenFrom:"sm",color:s?"white":"black"})]})}),w.jsx(Ka,{opened:t,onClose:n,size:"100%",padding:"md",title:"Menu",hiddenFrom:"sm",zIndex:1e6,children:w.jsxs(Yo,{h:"calc(100vh - 60px)",mx:"-md",children:[w.jsx(go,{my:"sm"}),w.jsx(ca,{to:"/",className:si.link,onClick:n,children:"Home"}),w.jsx($a,{className:si.link,onClick:o,children:w.jsxs(Io,{inline:!0,children:[w.jsx(le,{component:"span",mr:5,children:"Features"}),w.jsx(nk,{size:16,color:s?a.colors.blue[3]:a.colors.blue[6]})]})}),w.jsx(qO,{in:r,children:m}),l?.role!=="ADMIN"&&w.jsx(ca,{to:"/lmsdashboard",className:si.link,onClick:n,children:"LMS Dashboard"}),l?.role==="ADMIN"&&w.jsx(ca,{to:"/subject",className:si.link,onClick:n,children:"Subjects"}),w.jsx(go,{my:"sm"}),w.jsx(Ge,{justify:"center",grow:!0,pb:"xl",px:"md",children:d?w.jsx(Ve,{variant:"default",color:"red",onClick:()=>{p(),n()},children:"Logout"}):w.jsxs(w.Fragment,{children:[w.jsx(ca,{to:"/login",onClick:n,children:w.jsx(Ve,{variant:"default",children:"Log in"})}),w.jsx(ca,{to:"/signup",onClick:n,children:w.jsx(Ve,{children:"Sign up"})})]})})]})})]})}const NJ="_footer_rlo55_2",DJ="_logo_rlo55_9",kJ="_description_rlo55_23",IJ="_inner_rlo55_36",MJ="_groups_rlo55_50",OJ="_wrapper_rlo55_63",PJ="_link_rlo55_67",FJ="_title_rlo55_79",BJ="_afterFooter_rlo55_87",LJ="_social_rlo55_110",ui={footer:NJ,logo:DJ,description:kJ,inner:IJ,groups:MJ,wrapper:OJ,link:PJ,title:FJ,afterFooter:BJ,social:LJ},jJ=[{title:"About",links:[{label:"Features",link:"#"},{label:"Pricing",link:"#"},{label:"Support",link:"#"},{label:"Forums",link:"#"}]},{title:"Project",links:[{label:"Contribute",link:"#"},{label:"Media assets",link:"#"},{label:"Changelog",link:"#"},{label:"Releases",link:"#"}]},{title:"Community",links:[{label:"Join Discord",link:"#"},{label:"Follow on Twitter",link:"#"},{label:"Email newsletter",link:"#"},{label:"GitHub discussions",link:"#"}]}];function zJ(){const t=jJ.map(e=>{const n=e.links.map((r,o)=>w.jsx(we,{className:ui.link,component:"a",href:r.link,onClick:a=>a.preventDefault(),children:r.label},o));return w.jsxs("div",{className:ui.wrapper,children:[w.jsx(we,{className:ui.title,children:e.title}),n]},e.title)});return w.jsxs("footer",{className:ui.footer,children:[w.jsxs(rn,{className:ui.inner,children:[w.jsxs("div",{className:ui.logo,children:[w.jsx("h2",{children:"LMS"}),w.jsx(we,{size:"xs",c:"dimmed",className:ui.description,children:"Build fully functional accessible web applications faster than ever"})]}),w.jsx("div",{className:ui.groups,children:t})]}),w.jsxs(rn,{className:ui.afterFooter,children:[w.jsx(we,{c:"dimmed",size:"sm",children:" 2020 mantine.dev. All rights reserved."}),w.jsxs(Ge,{gap:0,className:ui.social,justify:"flex-end",wrap:"nowrap",children:[w.jsx(Rn,{size:"lg",color:"gray",variant:"subtle",children:w.jsx(MK,{size:18,stroke:1.5})}),w.jsx(Rn,{size:"lg",color:"gray",variant:"subtle",children:w.jsx(PK,{size:18,stroke:1.5})}),w.jsx(Rn,{size:"lg",color:"gray",variant:"subtle",children:w.jsx(kK,{size:18,stroke:1.5})})]})]})]})}function UJ(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const WJ=typeof window<"u"?A.useLayoutEffect:A.useEffect;function Rr(t,e){WJ(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function VJ(t,e){t&&UJ(t),Rr(`mantine-form:${t}:set-field-value`,n=>e.setFieldValue(n.detail.path,n.detail.value)),Rr(`mantine-form:${t}:set-values`,n=>e.setValues(n.detail)),Rr(`mantine-form:${t}:set-initial-values`,n=>e.setInitialValues(n.detail)),Rr(`mantine-form:${t}:set-errors`,n=>e.setErrors(n.detail)),Rr(`mantine-form:${t}:set-field-error`,n=>e.setFieldError(n.detail.path,n.detail.error)),Rr(`mantine-form:${t}:clear-field-error`,n=>e.clearFieldError(n.detail)),Rr(`mantine-form:${t}:clear-errors`,e.clearErrors),Rr(`mantine-form:${t}:reset`,e.reset),Rr(`mantine-form:${t}:validate`,e.validate),Rr(`mantine-form:${t}:validate-field`,n=>e.validateField(n.detail)),Rr(`mantine-form:${t}:reorder-list-item`,n=>e.reorderListItem(n.detail.path,n.detail.payload)),Rr(`mantine-form:${t}:remove-list-item`,n=>e.removeListItem(n.detail.path,n.detail.index)),Rr(`mantine-form:${t}:insert-list-item`,n=>e.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Rr(`mantine-form:${t}:set-dirty`,n=>e.setDirty(n.detail)),Rr(`mantine-form:${t}:set-touched`,n=>e.setTouched(n.detail)),Rr(`mantine-form:${t}:reset-dirty`,n=>e.resetDirty(n.detail)),Rr(`mantine-form:${t}:reset-touched`,e.resetTouched)}function HJ(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:n}=e;n instanceof HTMLInputElement?n.type==="checkbox"?t(n.checked):t(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&t(n.value)}else t(e)}}function E2(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,n)=>{const r=t[n];return r!=null&&r!==!1&&(e[n]=r),e},{})}function GJ(t){const[e,n]=A.useState(E2(t)),r=A.useRef(e),o=A.useCallback(u=>{n(l=>{const d=E2(typeof u=="function"?u(l):u);return r.current=d,d})},[]),a=A.useCallback(()=>o({}),[]),i=A.useCallback(u=>{r.current[u]!==void 0&&o(l=>{const d={...l};return delete d[u],d})},[e]),s=A.useCallback((u,l)=>{l==null||l===!1?i(u):r.current[u]!==l&&o(d=>({...d,[u]:l}))},[e]);return{errorsState:e,setErrors:o,clearErrors:a,setFieldError:s,clearFieldError:i}}function R2(t,e){if(e===null||typeof e!="object")return{};const n={...e};return Object.keys(e).forEach(r=>{r.includes(`${String(t)}.`)&&delete n[r]}),n}function bk(t,e){const n=t.substring(e.length+1).split(".")[0];return parseInt(n,10)}function xk(t,e,n,r){if(e===void 0)return n;const o=`${String(t)}`;let a=n;r===-1&&(a=R2(`${o}.${e}`,a));const i={...a},s=new Set;return Object.entries(a).filter(([u])=>{if(!u.startsWith(`${o}.`))return!1;const l=bk(u,o);return Number.isNaN(l)?!1:l>=e}).forEach(([u,l])=>{const d=bk(u,o),f=u.replace(`${o}.${d}`,`${o}.${d+r}`);i[f]=l,s.add(f),s.has(u)||delete i[u]}),i}function $J(t,{from:e,to:n},r){const o=`${t}.${e}`,a=`${t}.${n}`,i={...r},s=new Set;return Object.keys(r).forEach(u=>{if(s.has(u))return;let l,d;if(u.startsWith(o)?(l=u,d=u.replace(o,a)):u.startsWith(a)&&(l=u.replace(a,o),d=u),l&&d){const f=i[l],p=i[d];p===void 0?delete i[l]:i[l]=p,f===void 0?delete i[d]:i[d]=f,s.add(l),s.add(d)}}),i}function wk(t,e,n){typeof n.value=="object"&&(n.value=pd(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function pd(t){if(typeof t!="object")return t;var e=0,n,r,o,a=Object.prototype.toString.call(t);if(a==="[object Object]"?o=Object.create(t.__proto__||null):a==="[object Array]"?o=Array(t.length):a==="[object Set]"?(o=new Set,t.forEach(function(i){o.add(pd(i))})):a==="[object Map]"?(o=new Map,t.forEach(function(i,s){o.set(pd(s),pd(i))})):a==="[object Date]"?o=new Date(+t):a==="[object RegExp]"?o=new RegExp(t.source,t.flags):a==="[object DataView]"?o=new t.constructor(pd(t.buffer)):a==="[object ArrayBuffer]"?o=t.slice(0):a.slice(-6)==="Array]"&&(o=new t.constructor(t)),o){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)wk(o,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(o,n=r[e])&&o[n]===t[n]||wk(o,n,Object.getOwnPropertyDescriptor(t,n))}return o||t}function FP(t){return typeof t!="string"?[]:t.split(".")}function Zn(t,e){const n=FP(t);if(n.length===0||typeof e!="object"||e===null)return;let r=e[n[0]];for(let o=1;o<n.length&&r!=null;o+=1)r=r[n[o]];return r}function Vp(t,e,n){const r=FP(t);if(r.length===0)return n;const o=pd(n);if(r.length===1)return o[r[0]]=e,o;let a=o[r[0]];for(let i=1;i<r.length-1;i+=1){if(a===void 0)return o;a=a[r[i]]}return a[r[r.length-1]]=e,o}function qJ(t,{from:e,to:n},r){const o=Zn(t,r);if(!Array.isArray(o))return r;const a=[...o],i=o[e];return a.splice(e,1),a.splice(n,0,i),Vp(t,a,r)}function XJ(t,e,n,r){const o=Zn(t,r);if(!Array.isArray(o))return r;const a=[...o];return a.splice(typeof n=="number"?n:a.length,0,e),Vp(t,a,r)}function KJ(t,e,n){const r=Zn(t,n);return Array.isArray(r)?Vp(t,r.filter((o,a)=>a!==e),n):n}function YJ(t,e,n,r){const o=Zn(t,r);if(!Array.isArray(o)||o.length<=n)return r;const a=[...o];return a[n]=e,Vp(t,a,r)}function QJ({$values:t,$errors:e,$status:n}){const r=A.useCallback((s,u)=>{n.clearFieldDirty(s),e.setErrors(l=>$J(s,u,l)),t.setValues({values:qJ(s,u,t.refValues.current),updateState:!0})},[]),o=A.useCallback((s,u)=>{n.clearFieldDirty(s),e.setErrors(l=>xk(s,u,l,-1)),t.setValues({values:KJ(s,u,t.refValues.current),updateState:!0})},[]),a=A.useCallback((s,u,l)=>{n.clearFieldDirty(s),e.setErrors(d=>xk(s,l,d,1)),t.setValues({values:XJ(s,u,l,t.refValues.current),updateState:!0})},[]),i=A.useCallback((s,u,l)=>{n.clearFieldDirty(s),t.setValues({values:YJ(s,l,u,t.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:o,insertListItem:a,replaceListItem:i}}var V1,Ck;function JJ(){return Ck||(Ck=1,V1=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;o--!==0;){var i=a[o];if(!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n}),V1}var ZJ=JJ();const Lv=tf(ZJ);function Ph(t,e){const n=Object.keys(t);if(typeof e=="string"){const r=n.filter(o=>o.startsWith(`${e}.`));return t[e]||r.some(o=>t[o])||!1}return n.some(r=>t[r])}function eZ({initialDirty:t,initialTouched:e,mode:n,$values:r}){const[o,a]=A.useState(e),[i,s]=A.useState(t),u=A.useRef(e),l=A.useRef(t),d=A.useCallback(D=>{const I=typeof D=="function"?D(u.current):D;u.current=I,n==="controlled"&&a(I)},[]),f=A.useCallback((D,I=!1)=>{const k=typeof D=="function"?D(l.current):D;l.current=k,(n==="controlled"||I)&&s(k)},[]),p=A.useCallback(()=>d({}),[]),m=A.useCallback(D=>{const I=D?{...r.refValues.current,...D}:r.refValues.current;r.setValuesSnapshot(I),f({})},[]),g=A.useCallback((D,I)=>{d(k=>Ph(k,D)===I?k:{...k,[D]:I})},[]),y=A.useCallback((D,I,k)=>{f(M=>Ph(M,D)===I?M:{...M,[D]:I},k)},[]),b=A.useCallback((D,I)=>{const k=Ph(l.current,D),M=!Lv(Zn(D,r.getValuesSnapshot()),I),O=R2(D,l.current);O[D]=M,f(O,k!==M)},[]),C=A.useCallback(D=>Ph(u.current,D),[]),S=A.useCallback(D=>f(I=>{if(typeof D!="string")return I;const k=R2(D,I);return delete k[D],Lv(k,I)?I:k}),[]),E=A.useCallback(D=>{if(D){const k=Zn(D,l.current);if(typeof k=="boolean")return k;const M=Zn(D,r.refValues.current),O=Zn(D,r.valuesSnapshot.current);return!Lv(M,O)}return Object.keys(l.current).length>0?Ph(l.current):!Lv(r.refValues.current,r.valuesSnapshot.current)},[]),_=A.useCallback(()=>l.current,[]),T=A.useCallback(()=>u.current,[]);return{touchedState:o,dirtyState:i,touchedRef:u,dirtyRef:l,setTouched:d,setDirty:f,resetDirty:m,resetTouched:p,isTouched:C,setFieldTouched:g,setFieldDirty:y,setTouchedState:a,setDirtyState:s,clearFieldDirty:S,isDirty:E,getDirty:_,getTouched:T,setCalculatedFieldDirty:b}}function tZ({initialValues:t,onValuesChange:e,mode:n}){const r=A.useRef(!1),[o,a]=A.useState(t||{}),i=A.useRef(o),s=A.useRef(o),u=A.useCallback(({values:b,subscribers:C,updateState:S=!0,mergeWithPreviousValues:E=!0})=>{const _=i.current,T=b instanceof Function?b(i.current):b,D=E?{..._,...T}:T;i.current=D,S&&(a(D),n==="uncontrolled"&&(i.current=D)),e?.(D,_),C?.filter(Boolean).forEach(I=>I({updatedValues:D,previousValues:_}))},[e]),l=A.useCallback(b=>{const C=Zn(b.path,i.current),S=b.value instanceof Function?b.value(C):b.value;if(C!==S){const E=i.current,_=Vp(b.path,S,i.current);u({values:_,updateState:b.updateState}),b.subscribers?.filter(Boolean).forEach(T=>T({path:b.path,updatedValues:_,previousValues:E}))}},[u]),d=A.useCallback(b=>{s.current=b},[]),f=A.useCallback((b,C)=>{r.current||(r.current=!0,u({values:b,updateState:n==="controlled"}),d(b),C())},[u]),p=A.useCallback(()=>{u({values:s.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),m=A.useCallback(()=>i.current,[]),g=A.useCallback(()=>s.current,[]),y=A.useCallback((b,C)=>{const S=Zn(b,s.current);typeof S>"u"||l({path:b,value:S,updateState:n==="controlled",subscribers:C})},[l,n]);return{initialized:r,stateValues:o,refValues:i,valuesSnapshot:s,setValues:u,setFieldValue:l,resetValues:p,setValuesSnapshot:d,initialize:f,getValues:m,getValuesSnapshot:g,resetField:y}}function nZ({$status:t,cascadeUpdates:e}){const n=A.useRef({}),r=A.useCallback((a,i)=>{A.useEffect(()=>(n.current[a]=n.current[a]||[],n.current[a].push(i),()=>{n.current[a]=n.current[a].filter(s=>s!==i)}),[i])},[]),o=A.useCallback(a=>{const i=n.current[a]?.map(s=>u=>s({previousValue:Zn(a,u.previousValues),value:Zn(a,u.updatedValues),touched:t.isTouched(a),dirty:t.isDirty(a)}))??[];if(e)for(const s in n.current)(s.startsWith(`${a}.`)||a.startsWith(`${s}.`))&&i.push(...n.current[s].map(u=>l=>u({previousValue:Zn(s,l.previousValues),value:Zn(s,l.updatedValues),touched:t.isTouched(s),dirty:t.isDirty(s)})));return i},[]);return{subscribers:n,watch:r,getFieldSubscribers:o}}function Sk(t,e){return t?`${t}-${e.toString()}`:e.toString()}const jv=Symbol("root-rule");function Ek(t){const e=E2(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function _2(t,e,n="",r={}){return typeof t!="object"||t===null?r:Object.keys(t).reduce((o,a)=>{const i=t[a],s=`${n===""?"":`${n}.`}${a}`,u=Zn(s,e);let l=!1;return typeof i=="function"&&(o[s]=i(u,e,s)),typeof i=="object"&&Array.isArray(u)&&(l=!0,u.forEach((d,f)=>_2(i,e,`${s}.${f}`,o)),jv in i&&(o[s]=i[jv](u,e,s))),typeof i=="object"&&typeof u=="object"&&u!==null&&(l||_2(i,e,s,o),jv in i&&(o[s]=i[jv](u,e,s))),o},r)}function T2(t,e){return Ek(typeof t=="function"?t(e):_2(t,e))}function zv(t,e,n){if(typeof t!="string")return{hasError:!1,error:null};const r=T2(e,n),o=Object.keys(r.errors).find(a=>t.split(".").every((i,s)=>i===a.split(".")[s]));return{hasError:!!o,error:o?r.errors[o]:null}}const rZ="__MANTINE_FORM_INDEX__";function Rk(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]+/g,`.${rZ}`)):!1:!1}function jd({name:t,mode:e="controlled",initialValues:n,initialErrors:r={},initialDirty:o={},initialTouched:a={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:d=b=>b,enhanceGetInputProps:f,validate:p,onSubmitPreventDefault:m="always",touchTrigger:g="change",cascadeUpdates:y=!1}={}){const b=GJ(r),C=tZ({initialValues:n,onValuesChange:l,mode:e}),S=eZ({initialDirty:o,initialTouched:a,$values:C,mode:e}),E=QJ({$values:C,$errors:b,$status:S}),_=nZ({$status:S,cascadeUpdates:y}),[T,D]=A.useState(0),[I,k]=A.useState({}),[M,O]=A.useState(!1),F=A.useCallback(()=>{C.resetValues(),b.clearErrors(),S.resetDirty(),S.resetTouched(),e==="uncontrolled"&&D(oe=>oe+1)},[]),j=A.useCallback(oe=>{i&&b.clearErrors(),e==="uncontrolled"&&D(fe=>fe+1),Object.keys(_.subscribers.current).forEach(fe=>{const me=Zn(fe,C.refValues.current),Oe=Zn(fe,oe);me!==Oe&&_.getFieldSubscribers(fe).forEach(Be=>Be({previousValues:oe,updatedValues:C.refValues.current}))})},[i]),G=A.useCallback(oe=>{const fe=C.refValues.current;C.initialize(oe,()=>e==="uncontrolled"&&D(me=>me+1)),j(fe)},[j]),W=A.useCallback((oe,fe,me)=>{const Oe=Rk(oe,s),Be=fe instanceof Function?fe(Zn(oe,C.refValues.current)):fe;S.setCalculatedFieldDirty(oe,Be),g==="change"&&S.setFieldTouched(oe,!0),!Oe&&i&&b.clearFieldError(oe),C.setFieldValue({path:oe,value:fe,updateState:e==="controlled",subscribers:[..._.getFieldSubscribers(oe),Oe?Le=>{const De=zv(oe,p,Le.updatedValues);De.hasError?b.setFieldError(oe,De.error):b.clearFieldError(oe)}:null,me?.forceUpdate!==!1&&e!=="controlled"?()=>k(Le=>({...Le,[oe]:(Le[oe]||0)+1})):null]})},[l,p]),q=A.useCallback(oe=>{const fe=C.refValues.current;C.setValues({values:oe,updateState:e==="controlled"}),j(fe)},[l,j]),P=A.useCallback(()=>{const oe=T2(p,C.refValues.current);return b.setErrors(oe.errors),oe},[p]),U=A.useCallback(oe=>{const fe=zv(oe,p,C.refValues.current);return fe.hasError?b.setFieldError(oe,fe.error):b.clearFieldError(oe),fe},[p]),z=(oe,{type:fe="input",withError:me=!0,withFocus:Oe=!0,...Be}={})=>{const De={onChange:HJ($e=>W(oe,$e,{forceUpdate:!1})),"data-path":Sk(t,oe)};return me&&(De.error=b.errorsState[oe]),fe==="checkbox"?De[e==="controlled"?"checked":"defaultChecked"]=Zn(oe,C.refValues.current):De[e==="controlled"?"value":"defaultValue"]=Zn(oe,C.refValues.current),Oe&&(De.onFocus=()=>S.setFieldTouched(oe,!0),De.onBlur=()=>{if(Rk(oe,u)){const $e=zv(oe,p,C.refValues.current);$e.hasError?b.setFieldError(oe,$e.error):b.clearFieldError(oe)}}),Object.assign(De,f?.({inputProps:De,field:oe,options:{type:fe,withError:me,withFocus:Oe,...Be},form:se}))},H=(oe,fe)=>me=>{m==="always"&&me?.preventDefault();const Oe=P();if(Oe.hasErrors)m==="validation-failed"&&me?.preventDefault(),fe?.(Oe.errors,C.refValues.current,me);else{const Be=oe?.(d(C.refValues.current),me);Be instanceof Promise&&(O(!0),Be.finally(()=>O(!1)))}},L=oe=>d(oe||C.refValues.current),$=A.useCallback(oe=>{oe.preventDefault(),F()},[]),J=A.useCallback(oe=>oe?!zv(oe,p,C.refValues.current).hasError:!T2(p,C.refValues.current).hasErrors,[p]),ne=oe=>`${T}-${String(oe)}-${I[String(oe)]||0}`,ce=A.useCallback(oe=>document.querySelector(`[data-path="${Sk(t,oe)}"]`),[]),be=A.useCallback(oe=>{C.resetField(oe,[e!=="controlled"?()=>k(fe=>({...fe,[oe]:(fe[oe]||0)+1})):null])},[C.resetField,e,k]),se={watch:_.watch,initialized:C.initialized.current,values:e==="uncontrolled"?C.refValues.current:C.stateValues,getValues:C.getValues,getInitialValues:C.getValuesSnapshot,setInitialValues:C.setValuesSnapshot,resetField:be,initialize:G,setValues:q,setFieldValue:W,submitting:M,setSubmitting:O,errors:b.errorsState,setErrors:b.setErrors,setFieldError:b.setFieldError,clearFieldError:b.clearFieldError,clearErrors:b.clearErrors,resetDirty:S.resetDirty,setTouched:S.setTouched,setDirty:S.setDirty,isTouched:S.isTouched,resetTouched:S.resetTouched,isDirty:S.isDirty,getTouched:S.getTouched,getDirty:S.getDirty,reorderListItem:E.reorderListItem,insertListItem:E.insertListItem,removeListItem:E.removeListItem,replaceListItem:E.replaceListItem,reset:F,validate:P,validateField:U,getInputProps:z,onSubmit:H,onReset:$,isValid:J,getTransformedValues:L,key:ne,getInputNode:ce};return VJ(t,se),se}function oZ(t){const[e,n]=S8(["login","register"]),[r,o]=A.useState(!1),[a,i]=A.useState(null),s=Gr(),{login:u}=A0(),l=jd({initialValues:{username:"",email:"",password:"",terms:!0},validate:{username:f=>f.length>0?null:"Username is required",email:f=>e==="register"&&/^\S+@\S+$/.test(f)?null:e==="register"?"Invalid email":null,password:f=>f.length>=6?null:"Password must be at least 6 characters"}}),d=async f=>{o(!0),i(null);const p=`http://localhost:8081/api/auth/${e}`,m=e==="register"?{username:f.username,email:f.email,password:f.password}:{username:f.username,password:f.password};try{await lt.post(p,m,{withCredentials:!0});const g=`http://localhost:8081/api/auth/${f.username}`,b=(await lt.get(g,{withCredentials:!0})).data;console.log("User Details from backend:",b),u(b),b.role==="ADMIN"?s("/lmsdashboard"):(b.role==="EMPLOYEE"||b.role==="USER")&&!b.dateOfJoining?s("/update-profile"):s("/subject")}catch(g){console.error(`${e} failed:`,g),i(g.response?.data?.message||"An unexpected error occurred.")}finally{o(!1)}};return w.jsxs(Qo,{radius:"md",p:"lg",withBorder:!0,...t,style:{maxWidth:"400px",margin:"auto",marginTop:"50px"},children:[w.jsxs(we,{size:"lg",fw:500,children:["Welcome, ",e," to continue"]}),w.jsx(go,{label:"Or continue with",labelPosition:"center",my:"lg"}),w.jsxs("form",{onSubmit:l.onSubmit(d),children:[w.jsxs(po,{children:[a&&w.jsx(vi,{icon:w.jsx(m2,{size:"1rem"}),title:"Error",color:"red",withCloseButton:!0,onClose:()=>i(null),children:a}),w.jsx(eo,{required:!0,label:"Username",placeholder:"Your username",...l.getInputProps("username"),radius:"md"}),e==="register"&&w.jsx(eo,{required:!0,label:"Email",placeholder:"hello@example.com",...l.getInputProps("email"),radius:"md"}),w.jsx($S,{required:!0,label:"Password",placeholder:"Your password",...l.getInputProps("password"),radius:"md"}),e==="register"&&w.jsx(ff,{required:!0,label:"I accept the terms and conditions",...l.getInputProps("terms",{type:"checkbox"})})]}),w.jsxs(Ge,{justify:"space-between",mt:"xl",children:[w.jsx(t0,{component:"button",type:"button",c:"dimmed",onClick:()=>{n(),i(null)},size:"xs",children:e==="register"?"Already have an account? Login":"Don't have an account? Register"}),w.jsx(Ve,{type:"submit",radius:"xl",loading:r,children:r8(e)})]})]})]})}function Uv({size:t=185,radius:e=2.5,...n}){return w.jsxs("svg",{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 185 185",width:t,height:t,...n,children:[w.jsx("rect",{width:"5",height:"5",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"180",rx:e})]})}const aZ="_wrapper_17mtv_2",iZ="_inner_17mtv_18",sZ="_dots_17mtv_23",uZ="_title_17mtv_39",lZ="_highlight_17mtv_56",cZ="_description_17mtv_60",dZ="_controls_17mtv_71",fZ="_control_17mtv_71",ua={wrapper:aZ,inner:iZ,dots:sZ,title:uZ,highlight:lZ,description:cZ,controls:dZ,control:fZ};function hZ(){return w.jsxs(rn,{className:ua.wrapper,size:1400,children:[w.jsx(Uv,{className:ua.dots,style:{left:0,top:0}}),w.jsx(Uv,{className:ua.dots,style:{left:60,top:0}}),w.jsx(Uv,{className:ua.dots,style:{left:0,top:140}}),w.jsx(Uv,{className:ua.dots,style:{right:0,top:60}}),w.jsxs("div",{className:ua.inner,children:[w.jsxs(jt,{className:ua.title,children:["AI-Automated"," ",w.jsx(we,{component:"span",className:ua.highlight,inherit:!0,children:"Learning Management"})," ","System"]}),w.jsx(rn,{p:0,size:400,children:w.jsx(we,{size:"lg",c:"dimmed",className:ua.description,children:"Streamline training with mapping, Jotforms, groups, and analytics for compliance and performance."})}),w.jsxs("div",{className:ua.controls,children:[w.jsx(Ve,{className:ua.control,size:"lg",variant:"default",color:"gray",children:"Explore"}),w.jsx(Ve,{className:ua.control,size:"lg",children:"Start"})]})]})]})}const pZ="_title_uzu5r_2",mZ="_description_uzu5r_13",vZ="_card_uzu5r_29",Wv={title:pZ,description:mZ,card:vZ},gZ=[{title:"Seamless Course Management",description:"Admins can create groups, assign users, build learning and assignment forms, map them to courses, and assign to groups effortlessly.",icon:lY},{title:"User-Centric Learning Experience",description:"Users access assigned courses via navbar, view interactive JotForms, mindmaps, embedded PDFs, and submit assignments with ease.",icon:WY},{title:"Advanced Analytics",description:"Track completion rates, submission counts, scores, and timestamps for learning and assignments per course and group.",icon:JK}];function yZ(){const t=$r(),{colorScheme:e}=UO(),n=e==="dark",r=gZ.map(o=>w.jsxs(Zr,{shadow:"md",radius:"md",className:Wv.card,padding:"xl",bg:n?"dark.6":"white",children:[w.jsx(o.icon,{size:50,stroke:1.5,color:n?t.colors.blue[3]:t.colors.blue[6]}),w.jsx(we,{fz:"lg",fw:500,className:Wv.cardTitle,mt:"md",c:n?"white":"black",children:o.title}),w.jsx(we,{fz:"sm",c:n?"gray.4":"dimmed",mt:"sm",children:o.description})]},o.title));return w.jsxs(rn,{size:"lg",py:"xl",children:[w.jsx(jt,{order:2,className:Wv.title,ta:"center",mt:"sm",c:n?"white":"black",children:"Key Features of PULSE LMS"}),w.jsx(we,{c:n?"gray.4":"dimmed",className:Wv.description,ta:"center",mt:"md",children:"Discover powerful features for admin management, user engagement, and insightful analytics in your pharmaceutical training platform."}),w.jsx(Wu,{cols:{base:1,md:3},spacing:"xl",mt:50,children:r})]})}const bZ=()=>w.jsxs("div",{children:[w.jsx(hZ,{}),w.jsx(yZ,{})]});function BP({onSuccess:t,onClose:e}){const[n,r]=A.useState(!1),[o,a]=A.useState(""),i=jd({initialValues:{email:"",group:""},validate:{email:u=>/^\S+@\S+$/.test(u)?null:"Invalid email",group:u=>u?null:"Please select a group"}}),s=async u=>{r(!0),a("");try{const l=await lt.post("http://localhost:8081/api/user-mappings",{email:u.email,groupName:u.group},{withCredentials:!0});console.log("Successfully mapped user:",l.data),t&&t(l.data)}catch(l){const d=l.response?.data||l.message||"Failed to map user.";a(d),console.error("Submission error:",l)}finally{r(!1)}};return w.jsxs(Qo,{p:"md",shadow:"none",children:[w.jsx(we,{size:"lg",fw:500,ta:"center",mb:"lg",children:"Enter User Details"}),o&&w.jsx(we,{c:"red",ta:"center",pb:"md",children:o}),w.jsxs("form",{onSubmit:i.onSubmit(s),children:[w.jsxs(po,{children:[w.jsx(eo,{required:!0,label:"User Email",placeholder:"user@example.com",...i.getInputProps("email"),radius:"md"}),w.jsx(Ru,{required:!0,label:"Select Group",placeholder:"Choose a group",data:["BL","BE","BM"],...i.getInputProps("group"),radius:"md"})]}),w.jsxs(Ge,{justify:"flex-end",mt:"xl",children:[e&&w.jsx(Ve,{variant:"default",onClick:e,children:"Cancel"}),w.jsx(Ve,{type:"submit",radius:"xl",loading:n,children:"Map User to Group"})]})]})]})}function xZ(){const t=Gr(),[e,n]=A.useState({users:0,jotforms:0,courses:0,subjects:0}),[r,o]=A.useState(!0);A.useEffect(()=>{a()},[]);const a=async()=>{try{o(!0);const[s,u,l,d]=await Promise.all([lt.get("/api/user-mappings").catch(()=>({data:[]})),lt.get("/api/jotforms").catch(()=>({data:[]})),lt.get("/api/courses").catch(()=>({data:[]})),lt.get("/api/subjects").catch(()=>({data:[]}))])}catch(s){console.error("Error fetching stats",s)}finally{o(!1)}},i=[{title:"User Management",desc:"Manage users by creating, updating, or deleting profiles and assigning them to specific learning groups.",icon:HY,color:"blue",route:"/usermanagment",manageLabel:"Manage Users"},{title:"Jotform Management",desc:"Administer learning materials and assignments by creating, editing, or removing Jotforms.",icon:sY,color:"green",route:"/jotformmanagment",manageLabel:"Manage Jotforms"},{title:"Subject Management",desc:"Group multiple courses together into subjects and organize them by learning groups (BL, BE, BM).",icon:g2,color:"purple",route:"/subjectmanagement",manageLabel:"Manage Subjects"},{title:"Course Management",desc:"Organize your curriculum by mapping Jotforms and other materials to specific courses for user groups.",icon:fp,color:"orange",route:"/coursemanagment",manageLabel:"Manage Courses"},{title:"Results Management",desc:"Track and analyze user performance, view assessment results, and generate progress reports.",icon:jK,color:"teal",route:"/resultmanagement",manageLabel:"View Results"}];return w.jsx(le,{style:{padding:"32px 0"},children:w.jsxs(rn,{size:"lg",children:[w.jsxs(Ge,{position:"center",mb:"xl",children:[w.jsx(jt,{order:1,style:{color:"var(--mantine-color-white)"},children:"PULSE LMS Dashboard"}),r&&w.jsx(Jo,{size:"sm"})]}),w.jsx(Wu,{cols:{base:1,sm:2,md:3,lg:4},spacing:"xl",mb:"xl",children:i.map(s=>w.jsx(ca,{to:s.route,style:{textDecoration:"none",height:"100%"},children:w.jsxs(Zr,{shadow:"md",radius:"md",p:"lg",style:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:u=>u.currentTarget.style.transform="translateY(-4px)",onMouseLeave:u=>u.currentTarget.style.transform="translateY(0)",children:[w.jsxs(Ge,{position:"apart",mb:"md",children:[w.jsx(s.icon,{size:32,color:`var(--mantine-color-${s.color}-6)`}),w.jsxs(Ge,{spacing:"xs",children:[s.count!==null&&w.jsxs(da,{color:s.color,variant:"light",children:[s.count," ",s.count===1?s.manageLabel.split(" ")[0]:s.manageLabel.split(" ")[0]+"s"]}),w.jsx(qo,{label:"Quick View",children:w.jsx(Rn,{variant:"subtle",color:s.color,onClick:u=>{u.preventDefault(),u.stopPropagation(),t(s.route)},children:w.jsx(nE,{size:16})})})]})]}),w.jsx(we,{size:"lg",weight:600,style:{color:"var(--mantine-color-white)"},mb:"sm",children:s.title}),w.jsx(we,{size:"sm",color:"dimmed",style:{flex:1},children:s.desc}),w.jsx(Ve,{variant:"light",color:s.color,fullWidth:!0,style:{marginTop:"auto"},children:s.manageLabel})]})},s.title))}),w.jsx(Zr,{shadow:"sm",radius:"md",p:"md",style:{backgroundColor:"#1A1B1E",border:"1px solid #2C2E33"},children:w.jsxs(Ge,{position:"center",children:[w.jsx(we,{weight:500,color:"white",children:"Quick Actions:"}),w.jsx(Ve,{variant:"light",color:"cyan",size:"sm",leftIcon:w.jsx(oE,{size:16}),onClick:()=>t("/fileupload"),children:"File Upload"}),w.jsx(Ve,{variant:"light",color:"grape",size:"sm",leftIcon:w.jsx(g2,{size:16}),onClick:()=>t("/subjectmanagement"),children:"Create Subject"}),w.jsx(Ve,{variant:"light",color:"indigo",size:"sm",leftIcon:w.jsx(fp,{size:16}),onClick:()=>t("/coursemanagment"),children:"Map Course"})]})})]})})}const wZ="_formPaper_1pd4e_2",LP={formPaper:wZ};function jP(t){const e=Gr(),n=jd({initialValues:{jotformName:""},validate:{jotformName:o=>o.length>0?null:"Please enter a Jotform name"}}),r=o=>{console.log("Creating Jotform:",o),e("/jotformbuilder",{state:{jotformName:o.jotformName}})};return w.jsxs(Qo,{className:LP.formPaper,radius:"md",p:"lg",withBorder:!0,...t,style:{maxWidth:"400px",margin:"0 auto"},children:[w.jsx(we,{size:"lg",fw:500,ta:"center",children:"Create Jotform"}),w.jsx(go,{label:"Enter Jotform details",labelPosition:"center",my:"lg"}),w.jsxs("form",{onSubmit:n.onSubmit(r),children:[w.jsx(po,{children:w.jsx(eo,{required:!0,label:"Jotform Name",placeholder:"Enter form name",value:n.values.jotformName,onChange:o=>n.setFieldValue("jotformName",o.currentTarget.value),error:n.errors.jotformName&&"Please enter a Jotform name",radius:"md"})}),w.jsx(Ge,{justify:"center",mt:"xl",children:w.jsx(Ve,{type:"submit",radius:"xl",children:"Create Form"})})]})]})}function Qr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var CZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",_k=CZ,Tk=()=>Math.random().toString(36).substring(7).split("").join("."),SZ={INIT:`@@redux/INIT${Tk()}`,REPLACE:`@@redux/REPLACE${Tk()}`},Ak=SZ;function EZ(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function zP(t,e,n){if(typeof t!="function")throw new Error(Qr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Qr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Qr(1));return n(zP)(t,e)}let r=t,o=e,a=new Map,i=a,s=0,u=!1;function l(){i===a&&(i=new Map,a.forEach((b,C)=>{i.set(C,b)}))}function d(){if(u)throw new Error(Qr(3));return o}function f(b){if(typeof b!="function")throw new Error(Qr(4));if(u)throw new Error(Qr(5));let C=!0;l();const S=s++;return i.set(S,b),function(){if(C){if(u)throw new Error(Qr(6));C=!1,l(),i.delete(S),a=null}}}function p(b){if(!EZ(b))throw new Error(Qr(7));if(typeof b.type>"u")throw new Error(Qr(8));if(typeof b.type!="string")throw new Error(Qr(17));if(u)throw new Error(Qr(9));try{u=!0,o=r(o,b)}finally{u=!1}return(a=i).forEach(S=>{S()}),b}function m(b){if(typeof b!="function")throw new Error(Qr(10));r=b,p({type:Ak.REPLACE})}function g(){const b=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Qr(11));function S(){const _=C;_.next&&_.next(d())}return S(),{unsubscribe:b(S)}},[_k](){return this}}}return p({type:Ak.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:m,[_k]:g}}function Nk(t,e){return function(...n){return e(t.apply(this,n))}}function Dk(t,e){if(typeof t=="function")return Nk(t,e);if(typeof t!="object"||t===null)throw new Error(Qr(16));const n={};for(const r in t){const o=t[r];typeof o=="function"&&(n[r]=Nk(o,e))}return n}function UP(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function RZ(...t){return e=>(n,r)=>{const o=e(n,r);let a=()=>{throw new Error(Qr(15))};const i={getState:o.getState,dispatch:(u,...l)=>a(u,...l)},s=t.map(u=>u(i));return a=UP(...s)(o.dispatch),{...o,dispatch:a}}}var H1={exports:{}},G1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function _Z(){if(kk)return G1;kk=1;var t=Ap();function e(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,o=t.useRef,a=t.useEffect,i=t.useMemo,s=t.useDebugValue;return G1.useSyncExternalStoreWithSelector=function(u,l,d,f,p){var m=o(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=i(function(){function b(T){if(!C){if(C=!0,S=T,T=f(T),p!==void 0&&g.hasValue){var D=g.value;if(p(D,T))return E=D}return E=T}if(D=E,n(S,T))return D;var I=f(T);return p!==void 0&&p(D,I)?(S=T,D):(S=T,E=I)}var C=!1,S,E,_=d===void 0?null:d;return[function(){return b(l())},_===null?void 0:function(){return b(_())}]},[l,d,f,p]);var y=r(u,m[0],m[1]);return a(function(){g.hasValue=!0,g.value=y},[y]),s(y),y},G1}var Ik;function TZ(){return Ik||(Ik=1,H1.exports=_Z()),H1.exports}TZ();var AZ=A.version.startsWith("19"),NZ=Symbol.for(AZ?"react.transitional.element":"react.element"),DZ=Symbol.for("react.portal"),kZ=Symbol.for("react.fragment"),IZ=Symbol.for("react.strict_mode"),MZ=Symbol.for("react.profiler"),OZ=Symbol.for("react.consumer"),PZ=Symbol.for("react.context"),WP=Symbol.for("react.forward_ref"),FZ=Symbol.for("react.suspense"),BZ=Symbol.for("react.suspense_list"),uE=Symbol.for("react.memo"),LZ=Symbol.for("react.lazy"),jZ=WP,zZ=uE;function UZ(t){if(typeof t=="object"&&t!==null){const{$$typeof:e}=t;switch(e){case NZ:switch(t=t.type,t){case kZ:case MZ:case IZ:case FZ:case BZ:return t;default:switch(t=t&&t.$$typeof,t){case PZ:case WP:case LZ:case uE:return t;case OZ:return t;default:return e}}case DZ:return e}}}function WZ(t){return UZ(t)===uE}function VZ(t,e,n,r,{areStatesEqual:o,areOwnPropsEqual:a,areStatePropsEqual:i}){let s=!1,u,l,d,f,p;function m(S,E){return u=S,l=E,d=t(u,l),f=e(r,l),p=n(d,f,l),s=!0,p}function g(){return d=t(u,l),e.dependsOnOwnProps&&(f=e(r,l)),p=n(d,f,l),p}function y(){return t.dependsOnOwnProps&&(d=t(u,l)),e.dependsOnOwnProps&&(f=e(r,l)),p=n(d,f,l),p}function b(){const S=t(u,l),E=!i(S,d);return d=S,E&&(p=n(d,f,l)),p}function C(S,E){const _=!a(E,l),T=!o(S,u,E,l);return u=S,l=E,_&&T?g():_?y():T?b():p}return function(E,_){return s?C(E,_):m(E,_)}}function HZ(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...o}){const a=e(t,o),i=n(t,o),s=r(t,o);return VZ(a,i,s,t,o)}function GZ(t,e){const n={};for(const r in t){const o=t[r];typeof o=="function"&&(n[r]=(...a)=>e(o(...a)))}return n}function A2(t){return function(n){const r=t(n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function Mk(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function VP(t,e){return function(r,{displayName:o}){const a=function(s,u){return a.dependsOnOwnProps?a.mapToProps(s,u):a.mapToProps(s,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(s,u){a.mapToProps=t,a.dependsOnOwnProps=Mk(t);let l=a(s,u);return typeof l=="function"&&(a.mapToProps=l,a.dependsOnOwnProps=Mk(l),l=a(s,u)),l},a}}function lE(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function $Z(t){return t&&typeof t=="object"?A2(e=>GZ(t,e)):t?typeof t=="function"?VP(t):lE(t,"mapDispatchToProps"):A2(e=>({dispatch:e}))}function qZ(t){return t?typeof t=="function"?VP(t):lE(t,"mapStateToProps"):A2(()=>({}))}function XZ(t,e,n){return{...n,...t,...e}}function KZ(t){return function(n,{displayName:r,areMergedPropsEqual:o}){let a=!1,i;return function(u,l,d){const f=t(u,l,d);return a?o(f,i)||(i=f):(a=!0,i=f),i}}}function YZ(t){return t?typeof t=="function"?KZ(t):lE(t,"mergeProps"):()=>XZ}function QZ(t){t()}function JZ(){let t=null,e=null;return{clear(){t=null,e=null},notify(){QZ(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const o=e={callback:n,next:null,prev:e};return o.prev?o.prev.next=o:t=o,function(){!r||t===null||(r=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Ok={notify(){},get:()=>[]};function HP(t,e){let n,r=Ok,o=0,a=!1;function i(y){d();const b=r.subscribe(y);let C=!1;return()=>{C||(C=!0,b(),f())}}function s(){r.notify()}function u(){g.onStateChange&&g.onStateChange()}function l(){return a}function d(){o++,n||(n=e?e.addNestedSub(u):t.subscribe(u),r=JZ())}function f(){o--,n&&o===0&&(n(),n=void 0,r.clear(),r=Ok)}function p(){a||(a=!0,d())}function m(){a&&(a=!1,f())}const g={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:u,isSubscribed:l,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>r};return g}var ZZ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eee=ZZ(),tee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nee=tee(),ree=()=>eee||nee?A.useLayoutEffect:A.useEffect,Vg=ree();function Pk(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function $1(t,e){if(Pk(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!Pk(t[n[o]],e[n[o]]))return!1;return!0}var oee={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},aee={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},iee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},GP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},see={[jZ]:iee,[zZ]:GP};function Fk(t){return WZ(t)?GP:see[t.$$typeof]||oee}var uee=Object.defineProperty,lee=Object.getOwnPropertyNames,Bk=Object.getOwnPropertySymbols,cee=Object.getOwnPropertyDescriptor,dee=Object.getPrototypeOf,Lk=Object.prototype;function N2(t,e){if(typeof e!="string"){if(Lk){const a=dee(e);a&&a!==Lk&&N2(t,a)}let n=lee(e);Bk&&(n=n.concat(Bk(e)));const r=Fk(t),o=Fk(e);for(let a=0;a<n.length;++a){const i=n[a];if(!aee[i]&&!(o&&o[i])&&!(r&&r[i])){const s=cee(e,i);try{uee(t,i,s)}catch{}}}}return t}var fee=Symbol.for("react-redux-context"),hee=typeof globalThis<"u"?globalThis:{};function pee(){if(!A.createContext)return{};const t=hee[fee]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var $P=pee(),mee=[null,null];function vee(t,e,n){Vg(()=>t(...e),n)}function gee(t,e,n,r,o,a){t.current=r,n.current=!1,o.current&&(o.current=null,a())}function yee(t,e,n,r,o,a,i,s,u,l,d){if(!t)return()=>{};let f=!1,p=null;const m=()=>{if(f||!s.current)return;const y=e.getState();let b,C;try{b=r(y,o.current)}catch(S){C=S,p=S}C||(p=null),b===a.current?i.current||l():(a.current=b,u.current=b,i.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}function bee(t,e){return t===e}function xee(t,e,n,{pure:r,areStatesEqual:o=bee,areOwnPropsEqual:a=$1,areStatePropsEqual:i=$1,areMergedPropsEqual:s=$1,forwardRef:u=!1,context:l=$P}={}){const d=l,f=qZ(t),p=$Z(e),m=YZ(n),g=!!t;return b=>{const C=b.displayName||b.name||"Component",S=`Connect(${C})`,E={shouldHandleStateChanges:g,displayName:S,wrappedComponentName:C,WrappedComponent:b,initMapStateToProps:f,initMapDispatchToProps:p,initMergeProps:m,areStatesEqual:o,areStatePropsEqual:i,areOwnPropsEqual:a,areMergedPropsEqual:s};function _(I){const[k,M,O]=A.useMemo(()=>{const{reactReduxForwardedRef:Le,...De}=I;return[I.context,Le,De]},[I]),F=A.useMemo(()=>{let Le=d;return k?.Consumer,Le},[k,d]),j=A.useContext(F),G=!!I.store&&!!I.store.getState&&!!I.store.dispatch,W=!!j&&!!j.store,q=G?I.store:j.store,P=W?j.getServerState:q.getState,U=A.useMemo(()=>HZ(q.dispatch,E),[q]),[z,H]=A.useMemo(()=>{if(!g)return mee;const Le=HP(q,G?void 0:j.subscription),De=Le.notifyNestedSubs.bind(Le);return[Le,De]},[q,G,j]),L=A.useMemo(()=>G?j:{...j,subscription:z},[G,j,z]),$=A.useRef(void 0),J=A.useRef(O),ne=A.useRef(void 0),ce=A.useRef(!1),be=A.useRef(!1),se=A.useRef(void 0);Vg(()=>(be.current=!0,()=>{be.current=!1}),[]);const oe=A.useMemo(()=>()=>ne.current&&O===J.current?ne.current:U(q.getState(),O),[q,O]),fe=A.useMemo(()=>De=>z?yee(g,q,z,U,J,$,ce,be,ne,H,De):()=>{},[z]);vee(gee,[J,$,ce,O,ne,H]);let me;try{me=A.useSyncExternalStore(fe,oe,P?()=>U(P(),O):oe)}catch(Le){throw se.current&&(Le.message+=`
The error may be correlated with this previous error:
${se.current.stack}

`),Le}Vg(()=>{se.current=void 0,ne.current=void 0,$.current=me});const Oe=A.useMemo(()=>A.createElement(b,{...me,ref:M}),[M,b,me]);return A.useMemo(()=>g?A.createElement(F.Provider,{value:L},Oe):Oe,[F,Oe,L])}const D=A.memo(_);if(D.WrappedComponent=b,D.displayName=_.displayName=S,u){const k=A.forwardRef(function(O,F){return A.createElement(D,{...O,reactReduxForwardedRef:F})});return k.displayName=S,k.WrappedComponent=b,N2(k,b)}return N2(D,b)}}var qP=xee;function wee(t){const{children:e,context:n,serverState:r,store:o}=t,a=A.useMemo(()=>{const u=HP(o);return{store:o,subscription:u,getServerState:r?()=>r:void 0}},[o,r]),i=A.useMemo(()=>o.getState(),[o]);Vg(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),i!==o.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,i]);const s=n||$P;return A.createElement(s.Provider,{value:a},e)}var Cee=wee,See="Invariant failed";function Eee(t,e){throw new Error(See)}var La=function(e){var n=e.top,r=e.right,o=e.bottom,a=e.left,i=r-a,s=o-n,u={top:n,right:r,bottom:o,left:a,width:i,height:s,x:a,y:n,center:{x:(r+a)/2,y:(o+n)/2}};return u},cE=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},jk=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},Ree=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},q1={top:0,right:0,bottom:0,left:0},dE=function(e){var n=e.borderBox,r=e.margin,o=r===void 0?q1:r,a=e.border,i=a===void 0?q1:a,s=e.padding,u=s===void 0?q1:s,l=La(cE(n,o)),d=La(jk(n,i)),f=La(jk(d,u));return{marginBox:l,borderBox:La(n),paddingBox:d,contentBox:f,margin:o,border:i,padding:u}},la=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var o=Number(n);return isNaN(o)&&Eee(),o},_ee=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Hg=function(e,n){var r=e.borderBox,o=e.border,a=e.margin,i=e.padding,s=Ree(r,n);return dE({borderBox:s,border:o,margin:a,padding:i})},Gg=function(e,n){return n===void 0&&(n=_ee()),Hg(e,n)},XP=function(e,n){var r={top:la(n.marginTop),right:la(n.marginRight),bottom:la(n.marginBottom),left:la(n.marginLeft)},o={top:la(n.paddingTop),right:la(n.paddingRight),bottom:la(n.paddingBottom),left:la(n.paddingLeft)},a={top:la(n.borderTopWidth),right:la(n.borderRightWidth),bottom:la(n.borderBottomWidth),left:la(n.borderLeftWidth)};return dE({borderBox:e,margin:r,padding:o,border:a})},KP=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return XP(n,r)},hp=function(e){var n=[],r=null,o=function(){for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];n=s,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return o.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},o};function YP(t,e){}YP.bind(null,"warn");YP.bind(null,"error");function _u(){}function Tee(t,e){return{...t,...e}}function ma(t,e,n){const r=e.map(o=>{const a=Tee(n,o.options);return t.addEventListener(o.eventName,o.fn,a),function(){t.removeEventListener(o.eventName,o.fn,a)}});return function(){r.forEach(a=>{a()})}}const Aee="Invariant failed";class $g extends Error{}$g.prototype.toString=function(){return this.message};function Ue(t,e){throw new $g(Aee)}class Nee extends bt.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=_u,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof $g&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=ma(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof $g){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Dee=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,qg=t=>t+1,kee=t=>`
  You have lifted an item in position ${qg(t.source.index)}
`,QP=(t,e)=>{const n=t.droppableId===e.droppableId,r=qg(t.index),o=qg(e.index);return n?`
      You have moved the item from position ${r}
      to position ${o}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${o}
  `},JP=(t,e,n)=>e.droppableId===n.droppableId?`
      The item ${t}
      has been combined with ${n.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Iee=t=>{const e=t.destination;if(e)return QP(t.source,e);const n=t.combine;return n?JP(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},zk=t=>`
  The item has returned to its starting position
  of ${qg(t.index)}
`,Mee=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${zk(t.source)}
    `;const e=t.destination,n=t.combine;return e?`
      You have dropped the item.
      ${QP(t.source,e)}
    `:n?`
      You have dropped the item.
      ${JP(t.draggableId,t.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${zk(t.source)}
  `},Eg={dragHandleUsageInstructions:Dee,onDragStart:kee,onDragUpdate:Iee,onDragEnd:Mee};function Oee(t,e){return!!(t===e||Number.isNaN(t)&&Number.isNaN(e))}function ZP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Oee(t[n],e[n]))return!1;return!0}function Ht(t,e){const n=A.useState(()=>({inputs:e,result:t()}))[0],r=A.useRef(!0),o=A.useRef(n),i=r.current||!!(e&&o.current.inputs&&ZP(e,o.current.inputs))?o.current:{inputs:e,result:t()};return A.useEffect(()=>{r.current=!1,o.current=i},[i]),i.result}function ut(t,e){return Ht(()=>t,e)}const xr={x:0,y:0},Nr=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),Lo=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),Tu=(t,e)=>t.x===e.x&&t.y===e.y,xf=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),Ul=(t,e,n=0)=>t==="x"?{x:e,y:n}:{x:n,y:e},pp=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),Uk=(t,e)=>Math.min(...e.map(n=>pp(t,n))),eF=t=>e=>({x:t(e.x),y:t(e.y)});var Pee=(t,e)=>{const n=La({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n};const Hp=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),Wk=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],Fee={top:0,right:0,bottom:0,left:0},Bee=(t,e)=>e?Hp(t,e.scroll.diff.displacement):t,Lee=(t,e,n)=>n&&n.increasedBy?{...t,[e.end]:t[e.end]+n.increasedBy[e.line]}:t,jee=(t,e)=>e&&e.shouldClipSubject?Pee(e.pageMarginBox,t):La(t);var zd=({page:t,withPlaceholder:e,axis:n,frame:r})=>{const o=Bee(t.marginBox,r),a=Lee(o,n,e),i=jee(a,r);return{page:t,withPlaceholder:e,active:i}},fE=(t,e)=>{t.frame||Ue();const n=t.frame,r=Lo(e,n.scroll.initial),o=xf(r),a={...n,scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:o},max:n.scroll.max}},i=zd({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a});return{...t,frame:a,subject:i}};function yr(t,e=ZP){let n=null;function r(...o){if(n&&n.lastThis===this&&e(o,n.lastArgs))return n.lastResult;const a=t.apply(this,o);return n={lastResult:a,lastArgs:o,lastThis:this},a}return r.clear=function(){n=null},r}const tF=yr(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),nF=yr(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),N0=yr(t=>Object.values(t)),zee=yr(t=>Object.values(t));var wf=yr((t,e)=>zee(e).filter(r=>t===r.descriptor.droppableId).sort((r,o)=>r.descriptor.index-o.descriptor.index));function hE(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function D0(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var k0=yr((t,e)=>e.filter(n=>n.descriptor.id!==t.descriptor.id)),Uee=({isMovingForward:t,draggable:e,destination:n,insideDestination:r,previousImpact:o})=>{if(!n.isCombineEnabled||!hE(o))return null;function i(m){const g={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...o,at:g}}const s=o.displaced.all,u=s.length?s[0]:null;if(t)return u?i(u):null;const l=k0(e,r);if(!u){if(!l.length)return null;const m=l[l.length-1];return i(m.descriptor.id)}const d=l.findIndex(m=>m.descriptor.id===u);d===-1&&Ue();const f=d-1;if(f<0)return null;const p=l[f];return i(p.descriptor.id)},Cf=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const rF={point:xr,value:0},mp={invisible:{},visible:{},all:[]},Wee={displaced:mp,displacedBy:rF,at:null};var ba=(t,e)=>n=>t<=n&&n<=e,oF=t=>{const e=ba(t.top,t.bottom),n=ba(t.left,t.right);return r=>{if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=e(r.top)||e(r.bottom),i=n(r.left)||n(r.right);if(a&&i)return!0;const u=r.top<t.top&&r.bottom>t.bottom,l=r.left<t.left&&r.right>t.right;return u&&l?!0:u&&i||l&&a}},Vee=t=>{const e=ba(t.top,t.bottom),n=ba(t.left,t.right);return r=>e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right)};const pE={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},aF={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Hee=t=>e=>{const n=ba(e.top,e.bottom),r=ba(e.left,e.right);return o=>t===pE?n(o.top)&&n(o.bottom):r(o.left)&&r(o.right)};const Gee=(t,e)=>{const n=e.frame?e.frame.scroll.diff.displacement:xr;return Hp(t,n)},$ee=(t,e,n)=>e.subject.active?n(e.subject.active)(t):!1,qee=(t,e,n)=>n(e)(t),mE=({target:t,destination:e,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:o})=>{const a=r?Gee(t,e):t;return $ee(a,e,o)&&qee(a,n,o)},Xee=t=>mE({...t,isVisibleThroughFrameFn:oF}),iF=t=>mE({...t,isVisibleThroughFrameFn:Vee}),Kee=t=>mE({...t,isVisibleThroughFrameFn:Hee(t.destination.axis)}),Yee=(t,e,n)=>{if(typeof n=="boolean")return n;if(!e)return!0;const{invisible:r,visible:o}=e;if(r[t])return!1;const a=o[t];return a?a.shouldAnimate:!0};function Qee(t,e){const n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return La(cE(n,r))}function vp({afterDragging:t,destination:e,displacedBy:n,viewport:r,forceShouldAnimate:o,last:a}){return t.reduce(function(s,u){const l=Qee(u,n),d=u.descriptor.id;if(s.all.push(d),!Xee({target:l,destination:e,viewport:r,withDroppableDisplacement:!0}))return s.invisible[u.descriptor.id]=!0,s;const p=Yee(d,a,o),m={draggableId:d,shouldAnimate:p};return s.visible[d]=m,s},{all:[],visible:{},invisible:{}})}function Jee(t,e){if(!t.length)return 0;const n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}function Vk({insideDestination:t,inHomeList:e,displacedBy:n,destination:r}){const o=Jee(t,{inHomeList:e});return{displaced:mp,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function Xg({draggable:t,insideDestination:e,destination:n,viewport:r,displacedBy:o,last:a,index:i,forceShouldAnimate:s}){const u=Cf(t,n);if(i==null)return Vk({insideDestination:e,inHomeList:u,displacedBy:o,destination:n});const l=e.find(g=>g.descriptor.index===i);if(!l)return Vk({insideDestination:e,inHomeList:u,displacedBy:o,destination:n});const d=k0(t,e),f=e.indexOf(l),p=d.slice(f);return{displaced:vp({afterDragging:p,destination:n,displacedBy:o,last:a,viewport:r.frame,forceShouldAnimate:s}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function Iu(t,e){return!!e.effected[t]}var Zee=({isMovingForward:t,destination:e,draggables:n,combine:r,afterCritical:o})=>{if(!e.isCombineEnabled)return null;const a=r.draggableId,s=n[a].descriptor.index;return Iu(a,o)?t?s:s-1:t?s+1:s},ete=({isMovingForward:t,isInHomeList:e,insideDestination:n,location:r})=>{if(!n.length)return null;const o=r.index,a=t?o+1:o-1,i=n[0].descriptor.index,s=n[n.length-1].descriptor.index,u=e?s:s+1;return a<i||a>u?null:a},tte=({isMovingForward:t,isInHomeList:e,draggable:n,draggables:r,destination:o,insideDestination:a,previousImpact:i,viewport:s,afterCritical:u})=>{const l=i.at;if(l||Ue(),l.type==="REORDER"){const f=ete({isMovingForward:t,isInHomeList:e,location:l.destination,insideDestination:a});return f==null?null:Xg({draggable:n,insideDestination:a,destination:o,viewport:s,last:i.displaced,displacedBy:i.displacedBy,index:f})}const d=Zee({isMovingForward:t,destination:o,displaced:i.displaced,draggables:r,combine:l.combine,afterCritical:u});return d==null?null:Xg({draggable:n,insideDestination:a,destination:o,viewport:s,last:i.displaced,displacedBy:i.displacedBy,index:d})},nte=({displaced:t,afterCritical:e,combineWith:n,displacedBy:r})=>{const o=!!(t.visible[n]||t.invisible[n]);return Iu(n,e)?o?xr:xf(r.point):o?r.point:xr},rte=({afterCritical:t,impact:e,draggables:n})=>{const r=D0(e);r||Ue();const o=r.draggableId,a=n[o].page.borderBox.center,i=nte({displaced:e.displaced,afterCritical:t,combineWith:o,displacedBy:e.displacedBy});return Nr(a,i)};const sF=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,ote=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,vE=(t,e,n)=>e[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2,Hk=({axis:t,moveRelativeTo:e,isMoving:n})=>Ul(t.line,e.marginBox[t.end]+sF(t,n),vE(t,e.marginBox,n)),Gk=({axis:t,moveRelativeTo:e,isMoving:n})=>Ul(t.line,e.marginBox[t.start]-ote(t,n),vE(t,e.marginBox,n)),ate=({axis:t,moveInto:e,isMoving:n})=>Ul(t.line,e.contentBox[t.start]+sF(t,n),vE(t,e.contentBox,n));var ite=({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:o})=>{const a=wf(r.descriptor.id,n),i=e.page,s=r.axis;if(!a.length)return ate({axis:s,moveInto:r.page,isMoving:i});const{displaced:u,displacedBy:l}=t,d=u.all[0];if(d){const p=n[d];if(Iu(d,o))return Gk({axis:s,moveRelativeTo:p.page,isMoving:i});const m=Hg(p.page,l.point);return Gk({axis:s,moveRelativeTo:m,isMoving:i})}const f=a[a.length-1];if(f.descriptor.id===e.descriptor.id)return i.borderBox.center;if(Iu(f.descriptor.id,o)){const p=Hg(f.page,xf(o.displacedBy.point));return Hk({axis:s,moveRelativeTo:p,isMoving:i})}return Hk({axis:s,moveRelativeTo:f.page,isMoving:i})},D2=(t,e)=>{const n=t.frame;return n?Nr(e,n.scroll.diff.displacement):e};const ste=({impact:t,draggable:e,droppable:n,draggables:r,afterCritical:o})=>{const a=e.page.borderBox.center,i=t.at;return!n||!i?a:i.type==="REORDER"?ite({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:o}):rte({impact:t,draggables:r,afterCritical:o})};var I0=t=>{const e=ste(t),n=t.droppable;return n?D2(n,e):e},uF=(t,e)=>{const n=Lo(e,t.scroll.initial),r=xf(n);return{frame:La({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}}};function $k(t,e){return t.map(n=>e[n])}function ute(t,e){for(let n=0;n<e.length;n++){const r=e[n].visible[t];if(r)return r}return null}var lte=({impact:t,viewport:e,destination:n,draggables:r,maxScrollChange:o})=>{const a=uF(e,Nr(e.scroll.current,o)),i=n.frame?fE(n,Nr(n.frame.scroll.current,o)):n,s=t.displaced,u=vp({afterDragging:$k(s.all,r),destination:n,displacedBy:t.displacedBy,viewport:a.frame,last:s,forceShouldAnimate:!1}),l=vp({afterDragging:$k(s.all,r),destination:i,displacedBy:t.displacedBy,viewport:e.frame,last:s,forceShouldAnimate:!1}),d={},f={},p=[s,u,l];return s.all.forEach(g=>{const y=ute(g,p);if(y){f[g]=y;return}d[g]=!0}),{...t,displaced:{all:s.all,invisible:d,visible:f}}},cte=(t,e)=>Nr(t.scroll.diff.displacement,e),gE=({pageBorderBoxCenter:t,draggable:e,viewport:n})=>{const r=cte(n,t),o=Lo(r,e.page.borderBox.center);return Nr(e.client.borderBox.center,o)},lF=({draggable:t,destination:e,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:o,onlyOnMainAxis:a=!1})=>{const i=Lo(n,t.page.borderBox.center),u={target:Hp(t.page.borderBox,i),destination:e,withDroppableDisplacement:o,viewport:r};return a?Kee(u):iF(u)},dte=({isMovingForward:t,draggable:e,destination:n,draggables:r,previousImpact:o,viewport:a,previousPageBorderBoxCenter:i,previousClientSelection:s,afterCritical:u})=>{if(!n.isEnabled)return null;const l=wf(n.descriptor.id,r),d=Cf(e,n),f=Uee({isMovingForward:t,draggable:e,destination:n,insideDestination:l,previousImpact:o})||tte({isMovingForward:t,isInHomeList:d,draggable:e,draggables:r,destination:n,insideDestination:l,previousImpact:o,viewport:a,afterCritical:u});if(!f)return null;const p=I0({impact:f,draggable:e,droppable:n,draggables:r,afterCritical:u});if(lF({draggable:e,destination:n,newPageBorderBoxCenter:p,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:gE({pageBorderBoxCenter:p,draggable:e,viewport:a}),impact:f,scrollJumpRequest:null};const g=Lo(p,i),y=lte({impact:f,viewport:a,destination:n,draggables:r,maxScrollChange:g});return{clientSelection:s,impact:y,scrollJumpRequest:g}};const Yr=t=>{const e=t.subject.active;return e||Ue(),e};var fte=({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:r,viewport:o})=>{const a=n.subject.active;if(!a)return null;const i=n.axis,s=ba(a[i.start],a[i.end]),u=N0(r).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>oF(o.frame)(Yr(d))).filter(d=>{const f=Yr(d);return t?a[i.crossAxisEnd]<f[i.crossAxisEnd]:f[i.crossAxisStart]<a[i.crossAxisStart]}).filter(d=>{const f=Yr(d),p=ba(f[i.start],f[i.end]);return s(f[i.start])||s(f[i.end])||p(a[i.start])||p(a[i.end])}).sort((d,f)=>{const p=Yr(d)[i.crossAxisStart],m=Yr(f)[i.crossAxisStart];return t?p-m:m-p}).filter((d,f,p)=>Yr(d)[i.crossAxisStart]===Yr(p[0])[i.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const l=u.filter(d=>ba(Yr(d)[i.start],Yr(d)[i.end])(e[i.line]));return l.length===1?l[0]:l.length>1?l.sort((d,f)=>Yr(d)[i.start]-Yr(f)[i.start])[0]:u.sort((d,f)=>{const p=Uk(e,Wk(Yr(d))),m=Uk(e,Wk(Yr(f)));return p!==m?p-m:Yr(d)[i.start]-Yr(f)[i.start]})[0]};const qk=(t,e)=>{const n=t.page.borderBox.center;return Iu(t.descriptor.id,e)?Lo(n,e.displacedBy.point):n},hte=(t,e)=>{const n=t.page.borderBox;return Iu(t.descriptor.id,e)?Hp(n,xf(e.displacedBy.point)):n};var pte=({pageBorderBoxCenter:t,viewport:e,destination:n,insideDestination:r,afterCritical:o})=>r.filter(i=>iF({target:hte(i,o),destination:n,viewport:e.frame,withDroppableDisplacement:!0})).sort((i,s)=>{const u=pp(t,D2(n,qk(i,o))),l=pp(t,D2(n,qk(s,o)));return u<l?-1:l<u?1:i.descriptor.index-s.descriptor.index})[0]||null,Gp=yr(function(e,n){const r=n[e.line];return{value:r,point:Ul(e.line,r)}});const mte=(t,e,n)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return Ul(r.line,e[r.line]);const o=t.subject.page.contentBox[r.size],u=wf(t.descriptor.id,n).reduce((l,d)=>l+d.client.marginBox[r.size],0)+e[r.line]-o;return u<=0?null:Ul(r.line,u)},cF=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),dF=(t,e,n)=>{const r=t.frame;Cf(e,t)&&Ue(),t.subject.withPlaceholder&&Ue();const o=Gp(t.axis,e.displaceBy).point,a=mte(t,o,n),i={placeholderSize:o,increasedBy:a,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const d=zd({page:t.subject.page,withPlaceholder:i,axis:t.axis,frame:t.frame});return{...t,subject:d}}const s=a?Nr(r.scroll.max,a):r.scroll.max,u=cF(r,s),l=zd({page:t.subject.page,withPlaceholder:i,axis:t.axis,frame:u});return{...t,subject:l,frame:u}},vte=t=>{const e=t.subject.withPlaceholder;e||Ue();const n=t.frame;if(!n){const i=zd({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:i}}const r=e.oldFrameMaxScroll;r||Ue();const o=cF(n,r),a=zd({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return{...t,subject:a,frame:o}};var gte=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:n,draggable:r,draggables:o,destination:a,viewport:i,afterCritical:s})=>{if(!e){if(n.length)return null;const f={displaced:mp,displacedBy:rF,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},p=I0({impact:f,draggable:r,droppable:a,draggables:o,afterCritical:s}),m=Cf(r,a)?a:dF(a,r,o);return lF({draggable:r,destination:m,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const u=t[a.axis.line]<=e.page.borderBox.center[a.axis.line],l=(()=>{const f=e.descriptor.index;return e.descriptor.id===r.descriptor.id||u?f:f+1})(),d=Gp(a.axis,r.displaceBy);return Xg({draggable:r,insideDestination:n,destination:a,viewport:i,displacedBy:d,last:mp,index:l})},yte=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:n,isOver:r,draggables:o,droppables:a,viewport:i,afterCritical:s})=>{const u=fte({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:a,viewport:i});if(!u)return null;const l=wf(u.descriptor.id,o),d=pte({pageBorderBoxCenter:e,viewport:i,destination:u,insideDestination:l,afterCritical:s}),f=gte({previousPageBorderBoxCenter:e,destination:u,draggable:n,draggables:o,moveRelativeTo:d,insideDestination:l,viewport:i,afterCritical:s});if(!f)return null;const p=I0({impact:f,draggable:n,droppable:u,draggables:o,afterCritical:s});return{clientSelection:gE({pageBorderBoxCenter:p,draggable:n,viewport:i}),impact:f,scrollJumpRequest:null}},Wo=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const bte=(t,e)=>{const n=Wo(t);return n?e[n]:null};var xte=({state:t,type:e})=>{const n=bte(t.impact,t.dimensions.droppables),r=!!n,o=t.dimensions.droppables[t.critical.droppable.id],a=n||o,i=a.axis.direction,s=i==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||i==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(s&&!r)return null;const u=e==="MOVE_DOWN"||e==="MOVE_RIGHT",l=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,{draggables:f,droppables:p}=t.dimensions;return s?dte({isMovingForward:u,previousPageBorderBoxCenter:d,draggable:l,destination:a,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):yte({isMovingForward:u,previousPageBorderBoxCenter:d,draggable:l,isOver:a,draggables:f,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function gl(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function fF(t){const e=ba(t.top,t.bottom),n=ba(t.left,t.right);return function(o){return e(o.y)&&n(o.x)}}function wte(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function Cte({pageBorderBox:t,draggable:e,candidates:n}){const r=e.page.borderBox.center,o=n.map(a=>{const i=a.axis,s=Ul(a.axis.line,t.center[i.line],a.page.borderBox.center[i.crossAxisLine]);return{id:a.descriptor.id,distance:pp(r,s)}}).sort((a,i)=>i.distance-a.distance);return o[0]?o[0].id:null}function Ste({pageBorderBox:t,draggable:e,droppables:n}){const r=N0(n).filter(o=>{if(!o.isEnabled)return!1;const a=o.subject.active;if(!a||!wte(t,a))return!1;if(fF(a)(t.center))return!0;const i=o.axis,s=a.center[i.crossAxisLine],u=t[i.crossAxisStart],l=t[i.crossAxisEnd],d=ba(a[i.crossAxisStart],a[i.crossAxisEnd]),f=d(u),p=d(l);return!f&&!p?!0:f?u<s:l>s});return r.length?r.length===1?r[0].descriptor.id:Cte({pageBorderBox:t,draggable:e,candidates:r}):null}const hF=(t,e)=>La(Hp(t,e));var Ete=(t,e)=>{const n=t.frame;return n?hF(e,n.scroll.diff.value):e};function pF({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function Rte({draggable:t,closest:e,inHomeList:n}){return e?n&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var _te=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:n,insideDestination:r,last:o,viewport:a,afterCritical:i})=>{const s=n.axis,u=Gp(n.axis,e.displaceBy),l=u.value,d=t[s.start],f=t[s.end],m=k0(e,r).find(y=>{const b=y.descriptor.id,C=y.page.borderBox.center[s.line],S=Iu(b,i),E=pF({displaced:o,id:b});return S?E?f<=C:d<C-l:E?f<=C+l:d<C})||null,g=Rte({draggable:e,closest:m,inHomeList:Cf(e,n)});return Xg({draggable:e,insideDestination:r,destination:n,viewport:a,last:o,displacedBy:u,index:g})};const Tte=4;var Ate=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:n,destination:r,insideDestination:o,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const i=r.axis,s=Gp(r.axis,t.displaceBy),u=s.value,l=e[i.start],d=e[i.end],p=k0(t,o).find(g=>{const y=g.descriptor.id,b=g.page.borderBox,S=b[i.size]/Tte,E=Iu(y,a),_=pF({displaced:n.displaced,id:y});return E?_?d>b[i.start]+S&&d<b[i.end]-S:l>b[i.start]-u+S&&l<b[i.end]-u-S:_?d>b[i.start]+u+S&&d<b[i.end]+u-S:l>b[i.start]+S&&l<b[i.end]-S});return p?{displacedBy:s,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:r.descriptor.id}}}:null},mF=({pageOffset:t,draggable:e,draggables:n,droppables:r,previousImpact:o,viewport:a,afterCritical:i})=>{const s=hF(e.page.borderBox,t),u=Ste({pageBorderBox:s,draggable:e,droppables:r});if(!u)return Wee;const l=r[u],d=wf(l.descriptor.id,n),f=Ete(l,s);return Ate({pageBorderBoxWithDroppableScroll:f,draggable:e,previousImpact:o,destination:l,insideDestination:d,afterCritical:i})||_te({pageBorderBoxWithDroppableScroll:f,draggable:e,destination:l,insideDestination:d,last:o.displaced,viewport:a,afterCritical:i})},yE=(t,e)=>({...t,[e.descriptor.id]:e});const Nte=({previousImpact:t,impact:e,droppables:n})=>{const r=Wo(t),o=Wo(e);if(!r||r===o)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const i=vte(a);return yE(n,i)};var Dte=({draggable:t,draggables:e,droppables:n,previousImpact:r,impact:o})=>{const a=Nte({previousImpact:r,impact:o,droppables:n}),i=Wo(o);if(!i)return a;const s=n[i];if(Cf(t,s)||s.subject.withPlaceholder)return a;const u=dF(s,t,e);return yE(a,u)},Kh=({state:t,clientSelection:e,dimensions:n,viewport:r,impact:o,scrollJumpRequest:a})=>{const i=r||t.viewport,s=n||t.dimensions,u=e||t.current.client.selection,l=Lo(u,t.initial.client.selection),d={offset:l,selection:u,borderBoxCenter:Nr(t.initial.client.borderBoxCenter,l)},f={selection:Nr(d.selection,i.scroll.current),borderBoxCenter:Nr(d.borderBoxCenter,i.scroll.current),offset:Nr(d.offset,i.scroll.diff.value)},p={client:d,page:f};if(t.phase==="COLLECTING")return{...t,dimensions:s,viewport:i,current:p};const m=s.draggables[t.critical.draggable.id],g=o||mF({pageOffset:f.offset,draggable:m,draggables:s.draggables,droppables:s.droppables,previousImpact:t.impact,viewport:i,afterCritical:t.afterCritical}),y=Dte({draggable:m,impact:g,previousImpact:t.impact,draggables:s.draggables,droppables:s.droppables});return{...t,current:p,dimensions:{draggables:s.draggables,droppables:y},impact:g,viewport:i,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function kte(t,e){return t.map(n=>e[n])}var vF=({impact:t,viewport:e,draggables:n,destination:r,forceShouldAnimate:o})=>{const a=t.displaced,i=kte(a.all,n),s=vp({afterDragging:i,destination:r,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:o,last:a});return{...t,displaced:s}},gF=({impact:t,draggable:e,droppable:n,draggables:r,viewport:o,afterCritical:a})=>{const i=I0({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:a});return gE({pageBorderBoxCenter:i,draggable:e,viewport:o})},yF=({state:t,dimensions:e,viewport:n})=>{t.movementMode!=="SNAP"&&Ue();const r=t.impact,o=n||t.viewport,a=e||t.dimensions,{draggables:i,droppables:s}=a,u=i[t.critical.draggable.id],l=Wo(r);l||Ue();const d=s[l],f=vF({impact:r,viewport:o,destination:d,draggables:i}),p=gF({impact:f,draggable:u,droppable:d,draggables:i,viewport:o,afterCritical:t.afterCritical});return Kh({impact:f,clientSelection:p,state:t,dimensions:a,viewport:o})},Ite=t=>({index:t.index,droppableId:t.droppableId}),bF=({draggable:t,home:e,draggables:n,viewport:r})=>{const o=Gp(e.axis,t.displaceBy),a=wf(e.descriptor.id,n),i=a.indexOf(t);i===-1&&Ue();const s=a.slice(i+1),u=s.reduce((p,m)=>(p[m.descriptor.id]=!0,p),{}),l={inVirtualList:e.descriptor.mode==="virtual",displacedBy:o,effected:u};return{impact:{displaced:vp({afterDragging:s,destination:e,displacedBy:o,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:Ite(t.descriptor)}},afterCritical:l}},Mte=(t,e)=>({draggables:t.draggables,droppables:yE(t.droppables,e)}),Ote=({draggable:t,offset:e,initialWindowScroll:n})=>{const r=Hg(t.client,e),o=Gg(r,n);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:o}},Pte=t=>{const e=t.frame;return e||Ue(),e},Fte=({additions:t,updatedDroppables:e,viewport:n})=>{const r=n.scroll.diff.value;return t.map(o=>{const a=o.descriptor.droppableId,i=e[a],u=Pte(i).scroll.diff.value,l=Nr(r,u);return Ote({draggable:o,offset:l,initialWindowScroll:n.scroll.initial})})},Bte=({state:t,published:e})=>{const n=e.modified.map(C=>{const S=t.dimensions.droppables[C.droppableId];return fE(S,C.scroll)}),r={...t.dimensions.droppables,...tF(n)},o=nF(Fte({additions:e.additions,updatedDroppables:r,viewport:t.viewport})),a={...t.dimensions.draggables,...o};e.removals.forEach(C=>{delete a[C]});const i={droppables:r,draggables:a},s=Wo(t.impact),u=s?i.droppables[s]:null,l=i.draggables[t.critical.draggable.id],d=i.droppables[t.critical.droppable.id],{impact:f,afterCritical:p}=bF({draggable:l,home:d,draggables:a,viewport:t.viewport}),m=u&&u.isCombineEnabled?t.impact:f,g=mF({pageOffset:t.current.page.offset,draggable:i.draggables[t.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:m,viewport:t.viewport,afterCritical:p}),y={...t,phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:i,afterCritical:p,forceShouldAnimate:!1};return t.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const k2=t=>t.movementMode==="SNAP",X1=(t,e,n)=>{const r=Mte(t.dimensions,e);return!k2(t)||n?Kh({state:t,dimensions:r}):yF({state:t,dimensions:r})};function K1(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const Xk={phase:"IDLE",completed:null,shouldFlush:!1};var Lte=(t=Xk,e)=>{if(e.type==="FLUSH")return{...Xk,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&Ue();const{critical:n,clientSelection:r,viewport:o,dimensions:a,movementMode:i}=e.payload,s=a.draggables[n.draggable.id],u=a.droppables[n.droppable.id],l={selection:r,borderBoxCenter:s.client.borderBox.center,offset:xr},d={client:l,page:{selection:Nr(l.selection,o.scroll.initial),borderBoxCenter:Nr(l.selection,o.scroll.initial),offset:Nr(l.selection,o.scroll.diff.value)}},f=N0(a.droppables).every(y=>!y.isFixedOnPage),{impact:p,afterCritical:m}=bF({draggable:s,home:u,draggables:a.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:a,initial:d,current:d,isWindowScrollAllowed:f,impact:p,afterCritical:m,onLiftImpact:p,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&Ue(),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||Ue(),Bte({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;gl(t)||Ue();const{client:n}=e.payload;return Tu(n,t.current.client.selection)?t:Kh({state:t,clientSelection:n,impact:k2(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return K1(t);gl(t)||Ue();const{id:n,newScroll:r}=e.payload,o=t.dimensions.droppables[n];if(!o)return t;const a=fE(o,r);return X1(t,a,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;gl(t)||Ue();const{id:n,isEnabled:r}=e.payload,o=t.dimensions.droppables[n];o||Ue(),o.isEnabled===r&&Ue();const a={...o,isEnabled:r};return X1(t,a,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;gl(t)||Ue();const{id:n,isCombineEnabled:r}=e.payload,o=t.dimensions.droppables[n];o||Ue(),o.isCombineEnabled===r&&Ue();const a={...o,isCombineEnabled:r};return X1(t,a,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;gl(t)||Ue(),t.isWindowScrollAllowed||Ue();const n=e.payload.newScroll;if(Tu(t.viewport.scroll.current,n))return K1(t);const r=uF(t.viewport,n);return k2(t)?yF({state:t,viewport:r}):Kh({state:t,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!gl(t))return t;const n=e.payload.maxScroll;if(Tu(n,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:n}};return{...t,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&Ue();const n=xte({state:t,type:e.type});return n?Kh({state:t,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const n=e.payload.reason;return t.phase!=="COLLECTING"&&Ue(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(e.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:o}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||Ue(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:o,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:n}=e.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return t};function on(t,e){return t instanceof Object&&"type"in t&&t.type===e}const jte=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),zte=t=>({type:"LIFT",payload:t}),Ute=t=>({type:"INITIAL_PUBLISH",payload:t}),Wte=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),Vte=()=>({type:"COLLECTION_STARTING",payload:null}),Hte=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),Gte=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),$te=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),xF=t=>({type:"MOVE",payload:t}),qte=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),Xte=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),Kte=()=>({type:"MOVE_UP",payload:null}),Yte=()=>({type:"MOVE_DOWN",payload:null}),Qte=()=>({type:"MOVE_RIGHT",payload:null}),Jte=()=>({type:"MOVE_LEFT",payload:null}),bE=()=>({type:"FLUSH",payload:null}),Zte=t=>({type:"DROP_ANIMATE",payload:t}),xE=t=>({type:"DROP_COMPLETE",payload:t}),wF=t=>({type:"DROP",payload:t}),ene=t=>({type:"DROP_PENDING",payload:t}),CF=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var tne=t=>({getState:e,dispatch:n})=>r=>o=>{if(!on(o,"LIFT")){r(o);return}const{id:a,clientSelection:i,movementMode:s}=o.payload,u=e();u.phase==="DROP_ANIMATING"&&n(xE({completed:u.completed})),e().phase!=="IDLE"&&Ue(),n(bE()),n(jte({draggableId:a,movementMode:s}));const d={draggableId:a,scrollOptions:{shouldPublishImmediately:s==="SNAP"}},{critical:f,dimensions:p,viewport:m}=t.startPublishing(d);n(Ute({critical:f,dimensions:p,clientSelection:i,movementMode:s,viewport:m}))},nne=t=>()=>e=>n=>{on(n,"INITIAL_PUBLISH")&&t.dragging(),on(n,"DROP_ANIMATE")&&t.dropping(n.payload.completed.result.reason),(on(n,"FLUSH")||on(n,"DROP_COMPLETE"))&&t.resting(),e(n)};const wE={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},gp={opacity:{drop:0,combining:.7},scale:{drop:.75}},SF={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},hl=`${SF.outOfTheWay}s ${wE.outOfTheWay}`,Yh={fluid:`opacity ${hl}`,snap:`transform ${hl}, opacity ${hl}`,drop:t=>{const e=`${t}s ${wE.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${hl}`,placeholder:`height ${hl}, width ${hl}, margin ${hl}`},Kk=t=>Tu(t,xr)?void 0:`translate(${t.x}px, ${t.y}px)`,I2={moveTo:Kk,drop:(t,e)=>{const n=Kk(t);if(n)return e?`${n} scale(${gp.scale.drop})`:n}},{minDropTime:M2,maxDropTime:EF}=SF,rne=EF-M2,Yk=1500,one=.6;var ane=({current:t,destination:e,reason:n})=>{const r=pp(t,e);if(r<=0)return M2;if(r>=Yk)return EF;const o=r/Yk,a=M2+rne*o,i=n==="CANCEL"?a*one:a;return Number(i.toFixed(2))},ine=({impact:t,draggable:e,dimensions:n,viewport:r,afterCritical:o})=>{const{draggables:a,droppables:i}=n,s=Wo(t),u=s?i[s]:null,l=i[e.descriptor.droppableId],d=gF({impact:t,draggable:e,draggables:a,afterCritical:o,droppable:u||l,viewport:r});return Lo(d,e.client.borderBox.center)},sne=({draggables:t,reason:e,lastImpact:n,home:r,viewport:o,onLiftImpact:a})=>!n.at||e!=="DROP"?{impact:vF({draggables:t,impact:a,destination:r,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:mp},didDropInsideDroppable:!0};const une=({getState:t,dispatch:e})=>n=>r=>{if(!on(r,"DROP")){n(r);return}const o=t(),a=r.payload.reason;if(o.phase==="COLLECTING"){e(ene({reason:a}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&Ue(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||Ue();const s=o.critical,u=o.dimensions,l=u.draggables[o.critical.draggable.id],{impact:d,didDropInsideDroppable:f}=sne({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),p=f?hE(d):null,m=f?D0(d):null,g={index:s.draggable.index,droppableId:s.droppable.id},y={draggableId:l.descriptor.id,type:l.descriptor.type,source:g,reason:a,mode:o.movementMode,destination:p,combine:m},b=ine({impact:d,draggable:l,dimensions:u,viewport:o.viewport,afterCritical:o.afterCritical}),C={critical:o.critical,afterCritical:o.afterCritical,result:y,impact:d};if(!(!Tu(o.current.client.offset,b)||!!y.combine)){e(xE({completed:C}));return}const E=ane({current:o.current.client.offset,destination:b,reason:a});e(Zte({newHomeClientOffset:b,dropDuration:E,completed:C}))};var RF=()=>({x:window.pageXOffset,y:window.pageYOffset});function lne(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function cne({onWindowScroll:t}){function e(){t(RF())}const n=hp(e),r=lne(n);let o=_u;function a(){return o!==_u}function i(){a()&&Ue(),o=ma(window,[r])}function s(){a()||Ue(),n.cancel(),o(),o=_u}return{start:i,stop:s,isActive:a}}const dne=t=>on(t,"DROP_COMPLETE")||on(t,"DROP_ANIMATE")||on(t,"FLUSH"),fne=t=>{const e=cne({onWindowScroll:n=>{t.dispatch(qte({newScroll:n}))}});return n=>r=>{!e.isActive()&&on(r,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&dne(r)&&e.stop(),n(r)}};var hne=t=>{let e=!1,n=!1;const r=setTimeout(()=>{n=!0}),o=a=>{e||n||(e=!0,t(a),clearTimeout(r))};return o.wasCalled=()=>e,o},pne=()=>{const t=[],e=o=>{const a=t.findIndex(s=>s.timerId===o);a===-1&&Ue();const[i]=t.splice(a,1);i.callback()};return{add:o=>{const a=setTimeout(()=>e(a)),i={timerId:a,callback:o};t.push(i)},flush:()=>{if(!t.length)return;const o=[...t];t.length=0,o.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const mne=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,vne=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,gne=(t,e)=>{if(t===e)return!0;const n=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return n&&r},Fh=(t,e)=>{e()},Vv=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function Y1(t,e,n,r){if(!t){n(r(e));return}const o=hne(n);t(e,{announce:o}),o.wasCalled()||n(r(e))}var yne=(t,e)=>{const n=pne();let r=null;const o=(f,p)=>{r&&Ue(),Fh("onBeforeCapture",()=>{const m=t().onBeforeCapture;m&&m({draggableId:f,mode:p})})},a=(f,p)=>{r&&Ue(),Fh("onBeforeDragStart",()=>{const m=t().onBeforeDragStart;m&&m(Vv(f,p))})},i=(f,p)=>{r&&Ue();const m=Vv(f,p);r={mode:p,lastCritical:f,lastLocation:m.source,lastCombine:null},n.add(()=>{Fh("onDragStart",()=>Y1(t().onDragStart,m,e,Eg.onDragStart))})},s=(f,p)=>{const m=hE(p),g=D0(p);r||Ue();const y=!gne(f,r.lastCritical);y&&(r.lastCritical=f);const b=!mne(r.lastLocation,m);b&&(r.lastLocation=m);const C=!vne(r.lastCombine,g);if(C&&(r.lastCombine=g),!y&&!b&&!C)return;const S={...Vv(f,r.mode),combine:g,destination:m};n.add(()=>{Fh("onDragUpdate",()=>Y1(t().onDragUpdate,S,e,Eg.onDragUpdate))})},u=()=>{r||Ue(),n.flush()},l=f=>{r||Ue(),r=null,Fh("onDragEnd",()=>Y1(t().onDragEnd,f,e,Eg.onDragEnd))};return{beforeCapture:o,beforeStart:a,start:i,update:s,flush:u,drop:l,abort:()=>{if(!r)return;const f={...Vv(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};l(f)}}},bne=(t,e)=>{const n=yne(t,e);return r=>o=>a=>{if(on(a,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(on(a,"INITIAL_PUBLISH")){const s=a.payload.critical;n.beforeStart(s,a.payload.movementMode),o(a),n.start(s,a.payload.movementMode);return}if(on(a,"DROP_COMPLETE")){const s=a.payload.completed.result;n.flush(),o(a),n.drop(s);return}if(o(a),on(a,"FLUSH")){n.abort();return}const i=r.getState();i.phase==="DRAGGING"&&n.update(i.critical,i.impact)}};const xne=t=>e=>n=>{if(!on(n,"DROP_ANIMATION_FINISHED")){e(n);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&Ue(),t.dispatch(xE({completed:r.completed}))},wne=t=>{let e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return o=>a=>{if((on(a,"FLUSH")||on(a,"DROP_COMPLETE")||on(a,"DROP_ANIMATION_FINISHED"))&&r(),o(a),!on(a,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(CF())}};n=requestAnimationFrame(()=>{n=null,e=ma(window,[i])})}};var Cne=t=>()=>e=>n=>{(on(n,"DROP_COMPLETE")||on(n,"FLUSH")||on(n,"DROP_ANIMATE"))&&t.stopPublishing(),e(n)},Sne=t=>{let e=!1;return()=>n=>r=>{if(on(r,"INITIAL_PUBLISH")){e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!e){if(on(r,"FLUSH")){e=!1,t.tryRestoreFocusRecorded();return}if(on(r,"DROP_COMPLETE")){e=!1;const o=r.payload.completed.result;o.combine&&t.tryShiftRecord(o.draggableId,o.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const Ene=t=>on(t,"DROP_COMPLETE")||on(t,"DROP_ANIMATE")||on(t,"FLUSH");var Rne=t=>e=>n=>r=>{if(Ene(r)){t.stop(),n(r);return}if(on(r,"INITIAL_PUBLISH")){n(r);const o=e.getState();o.phase!=="DRAGGING"&&Ue(),t.start(o);return}n(r),t.scroll(e.getState())};const _ne=t=>e=>n=>{if(e(n),!on(n,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(wF({reason:r.reason})))},Tne=UP;var Ane=({dimensionMarshal:t,focusMarshal:e,styleMarshal:n,getResponders:r,announce:o,autoScroller:a})=>zP(Lte,Tne(RZ(nne(n),Cne(t),tne(t),une,xne,wne,_ne,Rne(a),fne,Sne(e),bne(r,o))));const Q1=()=>({additions:{},removals:{},modified:{}});function Nne({registry:t,callbacks:e}){let n=Q1(),r=null;const o=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:l,modified:d}=n,f=Object.keys(u).map(g=>t.draggable.getById(g).getDimension(xr)).sort((g,y)=>g.descriptor.index-y.descriptor.index),p=Object.keys(d).map(g=>{const b=t.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:b}}),m={additions:f,removals:Object.keys(l),modified:p};n=Q1(),e.publish(m)}))};return{add:u=>{const l=u.descriptor.id;n.additions[l]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[l]&&delete n.removals[l],o()},remove:u=>{const l=u.descriptor;n.removals[l.id]=!0,n.modified[l.droppableId]=!0,n.additions[l.id]&&delete n.additions[l.id],o()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=Q1())}}}var _F=({scrollHeight:t,scrollWidth:e,height:n,width:r})=>{const o=Lo({x:e,y:t},{x:r,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},TF=()=>{const t=document.documentElement;return t||Ue(),t},AF=()=>{const t=TF();return _F({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},Dne=()=>{const t=RF(),e=AF(),n=t.y,r=t.x,o=TF(),a=o.clientWidth,i=o.clientHeight,s=r+a,u=n+i;return{frame:La({top:n,left:r,right:s,bottom:u}),scroll:{initial:t,current:t,max:e,diff:{value:xr,displacement:xr}}}},kne=({critical:t,scrollOptions:e,registry:n})=>{const r=Dne(),o=r.scroll.current,a=t.droppable,i=n.droppable.getAllByType(a.type).map(d=>d.callbacks.getDimensionAndWatchScroll(o,e)),s=n.draggable.getAllByType(t.draggable.type).map(d=>d.getDimension(o));return{dimensions:{draggables:nF(s),droppables:tF(i)},critical:t,viewport:r}};function Qk(t,e,n){return!(n.descriptor.id===e.id||n.descriptor.type!==e.type||t.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Ine=(t,e)=>{let n=null;const r=Nne({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),o=(p,m)=>{t.droppable.exists(p)||Ue(),n&&e.updateDroppableIsEnabled({id:p,isEnabled:m})},a=(p,m)=>{n&&(t.droppable.exists(p)||Ue(),e.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:m}))},i=(p,m)=>{n&&(t.droppable.exists(p)||Ue(),e.updateDroppableScroll({id:p,newScroll:m}))},s=(p,m)=>{n&&t.droppable.getById(p).callbacks.scroll(m)},u=()=>{if(!n)return;r.stop();const p=n.critical.droppable;t.droppable.getAllByType(p.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},l=p=>{n||Ue();const m=n.critical.draggable;p.type==="ADDITION"&&Qk(t,m,p.value)&&r.add(p.value),p.type==="REMOVAL"&&Qk(t,m,p.value)&&r.remove(p.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:a,scrollDroppable:s,updateDroppableScroll:i,startPublishing:p=>{n&&Ue();const m=t.draggable.getById(p.draggableId),g=t.droppable.getById(m.descriptor.droppableId),y={draggable:m.descriptor,droppable:g.descriptor},b=t.subscribe(l);return n={critical:y,unsubscribe:b},kne({critical:y,registry:t,scrollOptions:p.scrollOptions})},stopPublishing:u}},NF=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",Mne=t=>{window.scrollBy(t.x,t.y)};const One=yr(t=>N0(t).filter(e=>!(!e.isEnabled||!e.frame))),Pne=(t,e)=>One(e).find(r=>(r.frame||Ue(),fF(r.frame.pageMarginBox)(t)))||null;var Fne=({center:t,destination:e,droppables:n})=>{if(e){const o=n[e];return o.frame?o:null}return Pne(t,n)};const yp={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Bne=(t,e,n=()=>yp)=>{const r=n(),o=t[e.size]*r.startFromPercentage,a=t[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:a}},DF=({startOfRange:t,endOfRange:e,current:n})=>{const r=e-t;return r===0?0:(n-t)/r},CE=1,Lne=(t,e,n=()=>yp)=>{const r=n();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return r.maxPixelScroll;if(t===e.startScrollingFrom)return CE;const a=1-DF({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=r.maxPixelScroll*r.ease(a);return Math.ceil(i)},jne=(t,e,n)=>{const r=n(),o=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,i=e,s=a,l=Date.now()-i;if(l>=a)return t;if(l<o)return CE;const d=DF({startOfRange:o,endOfRange:s,current:l}),f=t*r.ease(d);return Math.ceil(f)},Jk=({distanceToEdge:t,thresholds:e,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:o})=>{const a=Lne(t,e,o);return a===0?0:r?Math.max(jne(a,n,o),CE):a},Zk=({container:t,distanceToEdges:e,dragStartTime:n,axis:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=Bne(t,r,a);return e[r.end]<e[r.start]?Jk({distanceToEdge:e[r.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a}):-1*Jk({distanceToEdge:e[r.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a})},zne=({container:t,subject:e,proposedScroll:n})=>{const r=e.height>t.height,o=e.width>t.width;return!o&&!r?n:o&&r?null:{x:o?0:n.x,y:r?0:n.y}};const Une=eF(t=>t===0?0:t);var kF=({dragStartTime:t,container:e,subject:n,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},s=Zk({container:e,distanceToEdges:i,dragStartTime:t,axis:pE,shouldUseTimeDampening:o,getAutoScrollerOptions:a}),u=Zk({container:e,distanceToEdges:i,dragStartTime:t,axis:aF,shouldUseTimeDampening:o,getAutoScrollerOptions:a}),l=Une({x:u,y:s});if(Tu(l,xr))return null;const d=zne({container:e,subject:n,proposedScroll:l});return d?Tu(d,xr)?null:d:null};const Wne=eF(t=>t===0?0:t>0?1:-1),SE=(()=>{const t=(e,n)=>e<0?e:e>n?e-n:0;return({current:e,max:n,change:r})=>{const o=Nr(e,r),a={x:t(o.x,n.x),y:t(o.y,n.y)};return Tu(a,xr)?null:a}})(),IF=({max:t,current:e,change:n})=>{const r={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},o=Wne(n),a=SE({max:r,current:e,change:o});return!a||o.x!==0&&a.x===0||o.y!==0&&a.y===0},EE=(t,e)=>IF({current:t.scroll.current,max:t.scroll.max,change:e}),Vne=(t,e)=>{if(!EE(t,e))return null;const n=t.scroll.max,r=t.scroll.current;return SE({current:r,max:n,change:e})},RE=(t,e)=>{const n=t.frame;return n?IF({current:n.scroll.current,max:n.scroll.max,change:e}):!1},Hne=(t,e)=>{const n=t.frame;return!n||!RE(t,e)?null:SE({current:n.scroll.current,max:n.scroll.max,change:e})};var Gne=({viewport:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=kF({dragStartTime:r,container:t.frame,subject:e,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a});return i&&EE(t,i)?i:null},$ne=({droppable:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=t.frame;if(!i)return null;const s=kF({dragStartTime:r,container:i.pageMarginBox,subject:e,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a});return s&&RE(t,s)?s:null},eI=({state:t,dragStartTime:e,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:o,getAutoScrollerOptions:a})=>{const i=t.current.page.borderBoxCenter,u=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const f=t.viewport,p=Gne({dragStartTime:e,viewport:f,subject:u,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(p){r(p);return}}const l=Fne({center:i,destination:Wo(t.impact),droppables:t.dimensions.droppables});if(!l)return;const d=$ne({dragStartTime:e,droppable:l,subject:u,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:a});d&&o(l.descriptor.id,d)},qne=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n=()=>yp})=>{const r=hp(t),o=hp(e);let a=null;const i=l=>{a||Ue();const{shouldUseTimeDampening:d,dragStartTime:f}=a;eI({state:l,scrollWindow:r,scrollDroppable:o,dragStartTime:f,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:l=>{a&&Ue();const d=Date.now();let f=!1;const p=()=>{f=!0};eI({state:l,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p,getAutoScrollerOptions:n}),a={dragStartTime:d,shouldUseTimeDampening:f},f&&i(l)},stop:()=>{a&&(r.cancel(),o.cancel(),a=null)},scroll:i}},Xne=({move:t,scrollDroppable:e,scrollWindow:n})=>{const r=(s,u)=>{const l=Nr(s.current.client.selection,u);t({client:l})},o=(s,u)=>{if(!RE(s,u))return u;const l=Hne(s,u);if(!l)return e(s.descriptor.id,u),null;const d=Lo(u,l);return e(s.descriptor.id,d),Lo(u,d)},a=(s,u,l)=>{if(!s||!EE(u,l))return l;const d=Vne(u,l);if(!d)return n(l),null;const f=Lo(l,d);return n(f),Lo(l,f)};return s=>{const u=s.scrollJumpRequest;if(!u)return;const l=Wo(s.impact);l||Ue();const d=o(s.dimensions.droppables[l],u);if(!d)return;const f=s.viewport,p=a(s.isWindowScrollAllowed,f,d);p&&r(s,p)}},Kne=({scrollDroppable:t,scrollWindow:e,move:n,getAutoScrollerOptions:r})=>{const o=qne({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r}),a=Xne({move:n,scrollWindow:e,scrollDroppable:t});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){o.scroll(u);return}u.scrollJumpRequest&&a(u)}},start:o.start,stop:o.stop}};const Ud="data-rfd",Wd=(()=>{const t=`${Ud}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),O2=(()=>{const t=`${Ud}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),Yne=(()=>{const t=`${Ud}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),tI={contextId:`${Ud}-scroll-container-context-id`},Qne=t=>e=>`[${e}="${t}"]`,Bh=(t,e)=>t.map(n=>{const r=n.styles[e];return r?`${n.selector} { ${r} }`:""}).join(" "),Jne="pointer-events: none;";var Zne=t=>{const e=Qne(t),n=(()=>{const s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Wd.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:Jne,dropAnimating:s}}})(),r=(()=>{const s=`
      transition: ${Yh.outOfTheWay};
    `;return{selector:e(O2.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}})(),o={selector:e(Yne.contextId),styles:{always:"overflow-anchor: none;"}},i=[r,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Bh(i,"always"),resting:Bh(i,"resting"),dragging:Bh(i,"dragging"),dropAnimating:Bh(i,"dropAnimating"),userCancel:Bh(i,"userCancel")}};const Vo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.useLayoutEffect:A.useEffect,J1=()=>{const t=document.querySelector("head");return t||Ue(),t},nI=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function ere(t,e){const n=Ht(()=>Zne(t),[t]),r=A.useRef(null),o=A.useRef(null),a=ut(yr(f=>{const p=o.current;p||Ue(),p.textContent=f}),[]),i=ut(f=>{const p=r.current;p||Ue(),p.textContent=f},[]);Vo(()=>{!r.current&&!o.current||Ue();const f=nI(e),p=nI(e);return r.current=f,o.current=p,f.setAttribute(`${Ud}-always`,t),p.setAttribute(`${Ud}-dynamic`,t),J1().appendChild(f),J1().appendChild(p),i(n.always),a(n.resting),()=>{const m=g=>{const y=g.current;y||Ue(),J1().removeChild(y),g.current=null};m(r),m(o)}},[e,i,a,n.always,n.resting,t]);const s=ut(()=>a(n.dragging),[a,n.dragging]),u=ut(f=>{if(f==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),l=ut(()=>{o.current&&a(n.resting)},[a,n.resting]);return Ht(()=>({dragging:s,dropping:u,resting:l}),[s,u,l])}function MF(t,e){return Array.from(t.querySelectorAll(e))}var OF=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function M0(t){return t instanceof OF(t).HTMLElement}function tre(t,e){const n=`[${Wd.contextId}="${t}"]`,r=MF(document,n);if(!r.length)return null;const o=r.find(a=>a.getAttribute(Wd.draggableId)===e);return!o||!M0(o)?null:o}function nre(t){const e=A.useRef({}),n=A.useRef(null),r=A.useRef(null),o=A.useRef(!1),a=ut(function(p,m){const g={id:p,focus:m};return e.current[p]=g,function(){const b=e.current;b[p]!==g&&delete b[p]}},[]),i=ut(function(p){const m=tre(t,p);m&&m!==document.activeElement&&m.focus()},[t]),s=ut(function(p,m){n.current===p&&(n.current=m)},[]),u=ut(function(){r.current||o.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const p=n.current;p&&i(p)}))},[i]),l=ut(function(p){n.current=null;const m=document.activeElement;m&&m.getAttribute(Wd.draggableId)===p&&(n.current=p)},[]);return Vo(()=>(o.current=!0,function(){o.current=!1;const p=r.current;p&&cancelAnimationFrame(p)}),[]),Ht(()=>({register:a,tryRecordFocus:l,tryRestoreFocusRecorded:u,tryShiftRecord:s}),[a,l,u,s])}function rre(){const t={draggables:{},droppables:{}},e=[];function n(f){return e.push(f),function(){const m=e.indexOf(f);m!==-1&&e.splice(m,1)}}function r(f){e.length&&e.forEach(p=>p(f))}function o(f){return t.draggables[f]||null}function a(f){const p=o(f);return p||Ue(),p}const i={register:f=>{t.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:(f,p)=>{const m=t.draggables[p.descriptor.id];m&&m.uniqueId===f.uniqueId&&(delete t.draggables[p.descriptor.id],t.draggables[f.descriptor.id]=f)},unregister:f=>{const p=f.descriptor.id,m=o(p);m&&f.uniqueId===m.uniqueId&&(delete t.draggables[p],t.droppables[f.descriptor.droppableId]&&r({type:"REMOVAL",value:f}))},getById:a,findById:o,exists:f=>!!o(f),getAllByType:f=>Object.values(t.draggables).filter(p=>p.descriptor.type===f)};function s(f){return t.droppables[f]||null}function u(f){const p=s(f);return p||Ue(),p}const l={register:f=>{t.droppables[f.descriptor.id]=f},unregister:f=>{const p=s(f.descriptor.id);p&&f.uniqueId===p.uniqueId&&delete t.droppables[f.descriptor.id]},getById:u,findById:s,exists:f=>!!s(f),getAllByType:f=>Object.values(t.droppables).filter(p=>p.descriptor.type===f)};function d(){t.draggables={},t.droppables={},e.length=0}return{draggable:i,droppable:l,subscribe:n,clean:d}}function ore(){const t=Ht(rre,[]);return A.useEffect(()=>function(){t.clean()},[t]),t}var _E=bt.createContext(null),Kg=()=>{const t=document.body;return t||Ue(),t};const are={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},ire=t=>`rfd-announcement-${t}`;function sre(t){const e=Ht(()=>ire(t),[t]),n=A.useRef(null);return A.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Bd(a.style,are),Kg().appendChild(a),function(){setTimeout(function(){const u=Kg();u.contains(a)&&u.removeChild(a),a===n.current&&(n.current=null)})}},[e]),ut(o=>{const a=n.current;if(a){a.textContent=o;return}},[])}const ure={separator:"::"};function TE(t,e=ure){const n=bt.useId();return Ht(()=>`${t}${e.separator}${n}`,[e.separator,t,n])}function lre({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function cre({contextId:t,text:e}){const n=TE("hidden-text",{separator:"-"}),r=Ht(()=>lre({contextId:t,uniqueId:n}),[n,t]);return A.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=e,a.style.display="none",Kg().appendChild(a),function(){const s=Kg();s.contains(a)&&s.removeChild(a)}},[r,e]),r}var O0=bt.createContext(null);function PF(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),e}function dre(){let t=null;function e(){return!!t}function n(i){return i===t}function r(i){t&&Ue();const s={abandon:i};return t=s,s}function o(){t||Ue(),t=null}function a(){t&&(t.abandon(),o())}return{isClaimed:e,isActive:n,claim:r,release:o,tryAbandon:a}}function bp(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const fre=9,hre=13,AE=27,FF=32,pre=33,mre=34,vre=35,gre=36,yre=37,bre=38,xre=39,wre=40,Cre={[hre]:!0,[fre]:!0};var BF=t=>{Cre[t.keyCode]&&t.preventDefault()};const P0=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),LF=0,rI=5;function Sre(t,e){return Math.abs(e.x-t.x)>=rI||Math.abs(e.y-t.y)>=rI}const oI={type:"IDLE"};function Ere({cancel:t,completed:e,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:o=>{const{button:a,clientX:i,clientY:s}=o;if(a!==LF)return;const u={x:i,y:s},l=n();if(l.type==="DRAGGING"){o.preventDefault(),l.actions.move(u);return}l.type!=="PENDING"&&Ue();const d=l.point;if(!Sre(d,u))return;o.preventDefault();const f=l.actions.fluidLift(u);r({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:o=>{const a=n();if(a.type!=="DRAGGING"){t();return}o.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){t();return}if(o.keyCode===AE){o.preventDefault(),t();return}BF(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:o=>{const a=n();if(a.type==="IDLE"&&Ue(),a.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:P0,fn:t}]}function Rre(t){const e=A.useRef(oI),n=A.useRef(_u),r=Ht(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==LF||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const p=t.findClosestDraggableId(f);if(!p)return;const m=t.tryGetLock(p,i,{sourceEvent:f});if(!m)return;f.preventDefault();const g={x:f.clientX,y:f.clientY};n.current(),l(m,g)}}),[t]),o=Ht(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const f=t.findClosestDraggableId(d);if(!f)return;const p=t.findOptionsForDraggable(f);p&&(p.shouldRespectForcePress||t.canGetLock(f)&&d.preventDefault())}}),[t]),a=ut(function(){const f={passive:!1,capture:!0};n.current=ma(window,[o,r],f)},[o,r]),i=ut(()=>{e.current.type!=="IDLE"&&(e.current=oI,n.current(),a())},[a]),s=ut(()=>{const d=e.current;i(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[i]),u=ut(function(){const f={capture:!0,passive:!1},p=Ere({cancel:s,completed:i,getPhase:()=>e.current,setPhase:m=>{e.current=m}});n.current=ma(window,p,f)},[s,i]),l=ut(function(f,p){e.current.type!=="IDLE"&&Ue(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);Vo(function(){return a(),function(){n.current()}},[a])}function _re(){}const Tre={[mre]:!0,[pre]:!0,[gre]:!0,[vre]:!0};function Are(t,e){function n(){e(),t.cancel()}function r(){e(),t.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===AE){o.preventDefault(),n();return}if(o.keyCode===FF){o.preventDefault(),r();return}if(o.keyCode===wre){o.preventDefault(),t.moveDown();return}if(o.keyCode===bre){o.preventDefault(),t.moveUp();return}if(o.keyCode===xre){o.preventDefault(),t.moveRight();return}if(o.keyCode===yre){o.preventDefault(),t.moveLeft();return}if(Tre[o.keyCode]){o.preventDefault();return}BF(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:P0,fn:n}]}function Nre(t){const e=A.useRef(_re),n=Ht(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==FF)return;const i=t.findClosestDraggableId(a);if(!i)return;const s=t.tryGetLock(i,d,{sourceEvent:a});if(!s)return;a.preventDefault();let u=!0;const l=s.snapLift();e.current();function d(){u||Ue(),u=!1,e.current(),r()}e.current=ma(window,Are(l,d),{capture:!0,passive:!1})}}),[t]),r=ut(function(){const a={passive:!1,capture:!0};e.current=ma(window,[n],a)},[n]);Vo(function(){return r(),function(){e.current()}},[r])}const Z1={type:"IDLE"},Dre=120,kre=.15;function Ire({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(e().type!=="DRAGGING"){t();return}n.keyCode===AE&&n.preventDefault(),t()}},{eventName:P0,fn:t}]}function Mre({cancel:t,completed:e,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;const{clientX:a,clientY:i}=r.touches[0],s={x:a,y:i};r.preventDefault(),o.actions.move(s)}},{eventName:"touchend",fn:r=>{const o=n();if(o.type!=="DRAGGING"){t();return}r.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const o=n();o.type==="IDLE"&&Ue();const a=r.touches[0];if(!a||!(a.force>=kre))return;const s=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){s&&t();return}if(s){if(o.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:P0,fn:t}]}function Ore(t){const e=A.useRef(Z1),n=A.useRef(_u),r=ut(function(){return e.current},[]),o=ut(function(m){e.current=m},[]),a=Ht(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const g=t.findClosestDraggableId(m);if(!g)return;const y=t.tryGetLock(g,s,{sourceEvent:m});if(!y)return;const b=m.touches[0],{clientX:C,clientY:S}=b,E={x:C,y:S};n.current(),f(y,E)}}),[t]),i=ut(function(){const m={capture:!0,passive:!1};n.current=ma(window,[a],m)},[a]),s=ut(()=>{const p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),o(Z1),n.current(),i())},[i,o]),u=ut(()=>{const p=e.current;s(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[s]),l=ut(function(){const m={capture:!0,passive:!1},g={cancel:u,completed:s,getPhase:r},y=ma(window,Mre(g),m),b=ma(window,Ire(g),m);n.current=function(){y(),b()}},[u,r,s]),d=ut(function(){const m=r();m.type!=="PENDING"&&Ue();const g=m.actions.fluidLift(m.point);o({type:"DRAGGING",actions:g,hasMoved:!1})},[r,o]),f=ut(function(m,g){r().type!=="IDLE"&&Ue();const y=setTimeout(d,Dre);o({type:"PENDING",point:g,actions:m,longPressTimerId:y}),l()},[l,r,o,d]);Vo(function(){return i(),function(){n.current();const g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),o(Z1))}},[r,i,o]),Vo(function(){return ma(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Pre=["input","button","textarea","select","option","optgroup","video","audio"];function jF(t,e){if(e==null)return!1;if(Pre.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===t?!1:jF(t,e.parentElement)}function Fre(t,e){const n=e.target;return M0(n)?jF(t,n):!1}var Bre=t=>La(t.getBoundingClientRect()).center;function Lre(t){return t instanceof OF(t).Element}const jre=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function zF(t,e){return t==null?null:t[jre](e)?t:zF(t.parentElement,e)}function zre(t,e){return t.closest?t.closest(e):zF(t,e)}function Ure(t){return`[${Wd.contextId}="${t}"]`}function Wre(t,e){const n=e.target;if(!Lre(n))return null;const r=Ure(t),o=zre(n,r);return!o||!M0(o)?null:o}function Vre(t,e){const n=Wre(t,e);return n?n.getAttribute(Wd.draggableId):null}function Hre(t,e){const n=`[${O2.contextId}="${t}"]`,o=MF(document,n).find(a=>a.getAttribute(O2.id)===e);return!o||!M0(o)?null:o}function Gre(t){t.preventDefault()}function Hv({expected:t,phase:e,isLockActive:n,shouldWarn:r}){return!(!n()||t!==e)}function UF({lockAPI:t,store:e,registry:n,draggableId:r}){if(t.isClaimed())return!1;const o=n.draggable.findById(r);return!(!o||!o.options.isEnabled||!NF(e.getState(),r))}function $re({lockAPI:t,contextId:e,store:n,registry:r,draggableId:o,forceSensorStop:a,sourceEvent:i}){if(!UF({lockAPI:t,store:n,registry:r,draggableId:o}))return null;const u=r.draggable.getById(o),l=Hre(e,u.descriptor.id);if(!l||i&&!u.options.canDragInteractiveElements&&Fre(l,i))return null;const d=t.claim(a||_u);let f="PRE_DRAG";function p(){return u.options.shouldRespectForcePress}function m(){return t.isActive(d)}function g(T,D){Hv({expected:T,phase:f,isLockActive:m,shouldWarn:!0})&&n.dispatch(D())}const y=g.bind(null,"DRAGGING");function b(T){function D(){t.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(D(),Ue()),n.dispatch(zte(T.liftActionArgs)),f="DRAGGING";function I(k,M={shouldBlockNextClick:!1}){if(T.cleanup(),M.shouldBlockNextClick){const O=ma(window,[{eventName:"click",fn:Gre,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(O)}D(),n.dispatch(wF({reason:k}))}return{isActive:()=>Hv({expected:"DRAGGING",phase:f,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:p,drop:k=>I("DROP",k),cancel:k=>I("CANCEL",k),...T.actions}}function C(T){const D=hp(k=>{y(()=>xF({client:k}))});return{...b({liftActionArgs:{id:o,clientSelection:T,movementMode:"FLUID"},cleanup:()=>D.cancel(),actions:{move:D}}),move:D}}function S(){const T={moveUp:()=>y(Kte),moveRight:()=>y(Qte),moveDown:()=>y(Yte),moveLeft:()=>y(Jte)};return b({liftActionArgs:{id:o,clientSelection:Bre(l),movementMode:"SNAP"},cleanup:_u,actions:T})}function E(){Hv({expected:"PRE_DRAG",phase:f,isLockActive:m,shouldWarn:!0})&&t.release()}return{isActive:()=>Hv({expected:"PRE_DRAG",phase:f,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:p,fluidLift:C,snapLift:S,abort:E}}const qre=[Rre,Nre,Ore];function Xre({contextId:t,store:e,registry:n,customSensors:r,enableDefaultSensors:o}){const a=[...o?qre:[],...r||[]],i=A.useState(()=>dre())[0],s=ut(function(b,C){bp(b)&&!bp(C)&&i.tryAbandon()},[i]);Vo(function(){let b=e.getState();return e.subscribe(()=>{const S=e.getState();s(b,S),b=S})},[i,e,s]),Vo(()=>i.tryAbandon,[i.tryAbandon]);const u=ut(y=>UF({lockAPI:i,registry:n,store:e,draggableId:y}),[i,n,e]),l=ut((y,b,C)=>$re({lockAPI:i,registry:n,contextId:t,store:e,draggableId:y,forceSensorStop:b||null,sourceEvent:C&&C.sourceEvent?C.sourceEvent:null}),[t,i,n,e]),d=ut(y=>Vre(t,y),[t]),f=ut(y=>{const b=n.draggable.findById(y);return b?b.options:null},[n.draggable]),p=ut(function(){i.isClaimed()&&(i.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(bE()))},[i,e]),m=ut(()=>i.isClaimed(),[i]),g=Ht(()=>({canGetLock:u,tryGetLock:l,findClosestDraggableId:d,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:m}),[u,l,d,f,p,m]);for(let y=0;y<a.length;y++)a[y](g)}const Kre=t=>({onBeforeCapture:e=>{const n=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};of.flushSync(n)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),Yre=t=>({...yp,...t.autoScrollerOptions,durationDampening:{...yp.durationDampening,...t.autoScrollerOptions}});function Lh(t){return t.current||Ue(),t.current}function Qre(t){const{contextId:e,setCallbacks:n,sensors:r,nonce:o,dragHandleUsageInstructions:a}=t,i=A.useRef(null),s=PF(t),u=ut(()=>Kre(s.current),[s]),l=ut(()=>Yre(s.current),[s]),d=sre(e),f=cre({contextId:e,text:a}),p=ere(e,o),m=ut(O=>{Lh(i).dispatch(O)},[]),g=Ht(()=>Dk({publishWhileDragging:Wte,updateDroppableScroll:Hte,updateDroppableIsEnabled:Gte,updateDroppableIsCombineEnabled:$te,collectionStarting:Vte},m),[m]),y=ore(),b=Ht(()=>Ine(y,g),[y,g]),C=Ht(()=>Kne({scrollWindow:Mne,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:l,...Dk({move:xF},m)}),[b.scrollDroppable,m,l]),S=nre(e),E=Ht(()=>Ane({announce:d,autoScroller:C,dimensionMarshal:b,focusMarshal:S,getResponders:u,styleMarshal:p}),[d,C,b,S,u,p]);i.current=E;const _=ut(()=>{const O=Lh(i);O.getState().phase!=="IDLE"&&O.dispatch(bE())},[]),T=ut(()=>{const O=Lh(i).getState();return O.phase==="DROP_ANIMATING"?!0:O.phase==="IDLE"?!1:O.isDragging},[]),D=Ht(()=>({isDragging:T,tryAbort:_}),[T,_]);n(D);const I=ut(O=>NF(Lh(i).getState(),O),[]),k=ut(()=>gl(Lh(i).getState()),[]),M=Ht(()=>({marshal:b,focus:S,contextId:e,canLift:I,isMovementAllowed:k,dragHandleUsageInstructionsId:f,registry:y}),[e,b,f,S,I,k,y]);return Xre({contextId:e,store:E,registry:y,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),A.useEffect(()=>_,[_]),bt.createElement(O0.Provider,{value:M},bt.createElement(Cee,{context:_E,store:E},t.children))}function Jre(){return bt.useId()}function Zre(t){const e=Jre(),n=t.dragHandleUsageInstructions||Eg.dragHandleUsageInstructions;return bt.createElement(Nee,null,r=>bt.createElement(Qre,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const aI={dragging:5e3,dropAnimating:4500},eoe=(t,e)=>e?Yh.drop(e.duration):t?Yh.snap:Yh.fluid,toe=(t,e)=>{if(t)return e?gp.opacity.drop:gp.opacity.combining},noe=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function roe(t){const n=t.dimension.client,{offset:r,combineWith:o,dropping:a}=t,i=!!o,s=noe(t),u=!!a,l=u?I2.drop(r,i):I2.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:eoe(s,a),transform:l,opacity:toe(i,u),zIndex:u?aI.dropAnimating:aI.dragging,pointerEvents:"none"}}function ooe(t){return{transform:I2.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function aoe(t){return t.type==="DRAGGING"?roe(t):ooe(t)}function ioe(t,e,n=xr){const r=window.getComputedStyle(e),o=e.getBoundingClientRect(),a=XP(o,r),i=Gg(a,n),s={client:a,tagName:e.tagName.toLowerCase(),display:r.display},u={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:t,placeholder:s,displaceBy:u,client:a,page:i}}function soe(t){const e=TE("draggable"),{descriptor:n,registry:r,getDraggableRef:o,canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:s}=t,u=Ht(()=>({canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:s}),[a,s,i]),l=ut(m=>{const g=o();return g||Ue(),ioe(n,g,m)},[n,o]),d=Ht(()=>({uniqueId:e,descriptor:n,options:u,getDimension:l}),[n,l,u,e]),f=A.useRef(d),p=A.useRef(!0);Vo(()=>(r.draggable.register(f.current),()=>r.draggable.unregister(f.current)),[r.draggable]),Vo(()=>{if(p.current){p.current=!1;return}const m=f.current;f.current=d,r.draggable.update(d,m)},[d,r.draggable])}var NE=bt.createContext(null);function Yg(t){const e=A.useContext(t);return e||Ue(),e}function uoe(t){t.preventDefault()}const loe=t=>{const e=A.useRef(null),n=ut((D=null)=>{e.current=D},[]),r=ut(()=>e.current,[]),{contextId:o,dragHandleUsageInstructionsId:a,registry:i}=Yg(O0),{type:s,droppableId:u}=Yg(NE),l=Ht(()=>({id:t.draggableId,index:t.index,type:s,droppableId:u}),[t.draggableId,t.index,s,u]),{children:d,draggableId:f,isEnabled:p,shouldRespectForcePress:m,canDragInteractiveElements:g,isClone:y,mapped:b,dropAnimationFinished:C}=t;if(!y){const D=Ht(()=>({descriptor:l,registry:i,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:m,isEnabled:p}),[l,i,r,g,m,p]);soe(D)}const S=Ht(()=>p?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:uoe}:null,[o,a,f,p]),E=ut(D=>{b.type==="DRAGGING"&&b.dropping&&D.propertyName==="transform"&&of.flushSync(C)},[C,b]),_=Ht(()=>{const D=aoe(b),I=b.type==="DRAGGING"&&b.dropping?E:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":f,style:D,onTransitionEnd:I},dragHandleProps:S}},[o,S,f,b,E,n]),T=Ht(()=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}),[l.droppableId,l.id,l.index,l.type]);return bt.createElement(bt.Fragment,null,d(_,b.snapshot,T))};var WF=(t,e)=>t===e,VF=t=>{const{combine:e,destination:n}=t;return n?n.droppableId:e?e.droppableId:null};const coe=t=>t.combine?t.combine.draggableId:null,doe=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function foe(){const t=yr((o,a)=>({x:o,y:a})),e=yr((o,a,i=null,s=null,u=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:o,draggingOver:i,combineWith:s,combineTargetFor:null})),n=yr((o,a,i,s,u=null,l=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:l,mode:a,offset:o,dimension:i,forceShouldAnimate:d,snapshot:e(a,s,u,l,null)}}));return(o,a)=>{if(bp(o)){if(o.critical.draggable.id!==a.draggableId)return null;const i=o.current.client.offset,s=o.dimensions.draggables[a.draggableId],u=Wo(o.impact),l=doe(o.impact),d=o.forceShouldAnimate;return n(t(i.x,i.y),o.movementMode,s,a.isClone,u,l,d)}if(o.phase==="DROP_ANIMATING"){const i=o.completed;if(i.result.draggableId!==a.draggableId)return null;const s=a.isClone,u=o.dimensions.draggables[a.draggableId],l=i.result,d=l.mode,f=VF(l),p=coe(l),g={duration:o.dropDuration,curve:wE.drop,moveTo:o.newHomeClientOffset,opacity:p?gp.opacity.drop:null,scale:p?gp.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:u,dropping:g,draggingOver:f,combineWith:p,mode:d,forceShouldAnimate:null,snapshot:e(d,s,f,p,g)}}}return null}}function HF(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const hoe={mapped:{type:"SECONDARY",offset:xr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:HF(null)}};function poe(){const t=yr((i,s)=>({x:i,y:s})),e=yr(HF),n=yr((i,s=null,u)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:s,shouldAnimateDisplacement:u,snapshot:e(s)}})),r=i=>i?n(xr,i,!0):null,o=(i,s,u,l)=>{const d=u.displaced.visible[i],f=!!(l.inVirtualList&&l.effected[i]),p=D0(u),m=p&&p.draggableId===i?s:null;if(!d){if(!f)return r(m);if(u.displaced.invisible[i])return null;const b=xf(l.displacedBy.point),C=t(b.x,b.y);return n(C,m,!0)}if(f)return r(m);const g=u.displacedBy.point,y=t(g.x,g.y);return n(y,m,d.shouldAnimate)};return(i,s)=>{if(bp(i))return i.critical.draggable.id===s.draggableId?null:o(s.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const u=i.completed;return u.result.draggableId===s.draggableId?null:o(s.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const moe=()=>{const t=foe(),e=poe();return(r,o)=>t(r,o)||e(r,o)||hoe},voe={dropAnimationFinished:CF},goe=qP(moe,voe,null,{context:_E,areStatePropsEqual:WF})(loe);function GF(t){return Yg(NE).isUsingCloneFor===t.draggableId&&!t.isClone?null:bt.createElement(goe,t)}function iI(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return bt.createElement(GF,Bd({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const $F=t=>e=>t===e,yoe=$F("scroll"),boe=$F("auto"),sI=(t,e)=>e(t.overflowX)||e(t.overflowY),xoe=t=>{const e=window.getComputedStyle(t),n={overflowX:e.overflowX,overflowY:e.overflowY};return sI(n,yoe)||sI(n,boe)},woe=()=>!1,qF=t=>t==null?null:t===document.body?woe()?t:null:t===document.documentElement?null:xoe(t)?t:qF(t.parentElement);var P2=t=>({x:t.scrollLeft,y:t.scrollTop});const XF=t=>t?window.getComputedStyle(t).position==="fixed"?!0:XF(t.parentElement):!1;var Coe=t=>{const e=qF(t),n=XF(t);return{closestScrollable:e,isFixedOnPage:n}},Soe=({descriptor:t,isEnabled:e,isCombineEnabled:n,isFixedOnPage:r,direction:o,client:a,page:i,closest:s})=>{const u=(()=>{if(!s)return null;const{scrollSize:p,client:m}=s,g=_F({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:m,scrollSize:p,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:g,diff:{value:xr,displacement:xr}}}})(),l=o==="vertical"?pE:aF,d=zd({page:i,withPlaceholder:null,axis:l,frame:u});return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:l,isEnabled:e,client:a,page:i,frame:u,subject:d}};const Eoe=(t,e)=>{const n=KP(t);if(!e||t!==e)return n;const r=n.paddingBox.top-e.scrollTop,o=n.paddingBox.left-e.scrollLeft,a=r+e.scrollHeight,i=o+e.scrollWidth,u=cE({top:r,right:i,bottom:a,left:o},n.border);return dE({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var Roe=({ref:t,descriptor:e,env:n,windowScroll:r,direction:o,isDropDisabled:a,isCombineEnabled:i,shouldClipSubject:s})=>{const u=n.closestScrollable,l=Eoe(t,u),d=Gg(l,r),f=(()=>{if(!u)return null;const m=KP(u),g={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:m,page:Gg(m,r),scroll:P2(u),scrollSize:g,shouldClipSubject:s}})();return Soe({descriptor:e,isEnabled:!a,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:o,client:l,page:d,closest:f})};const _oe={passive:!1},Toe={passive:!0};var uI=t=>t.shouldPublishImmediately?_oe:Toe;const Gv=t=>t&&t.env.closestScrollable||null;function Aoe(t){const e=A.useRef(null),n=Yg(O0),r=TE("droppable"),{registry:o,marshal:a}=n,i=PF(t),s=Ht(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),u=A.useRef(s),l=Ht(()=>yr((_,T)=>{e.current||Ue();const D={x:_,y:T};a.updateDroppableScroll(s.id,D)}),[s.id,a]),d=ut(()=>{const _=e.current;return!_||!_.env.closestScrollable?xr:P2(_.env.closestScrollable)},[]),f=ut(()=>{const _=d();l(_.x,_.y)},[d,l]),p=Ht(()=>hp(f),[f]),m=ut(()=>{const _=e.current,T=Gv(_);if(_&&T||Ue(),_.scrollOptions.shouldPublishImmediately){f();return}p()},[p,f]),g=ut((_,T)=>{e.current&&Ue();const D=i.current,I=D.getDroppableRef();I||Ue();const k=Coe(I),M={ref:I,descriptor:s,env:k,scrollOptions:T};e.current=M;const O=Roe({ref:I,descriptor:s,env:k,windowScroll:_,direction:D.direction,isDropDisabled:D.isDropDisabled,isCombineEnabled:D.isCombineEnabled,shouldClipSubject:!D.ignoreContainerClipping}),F=k.closestScrollable;return F&&(F.setAttribute(tI.contextId,n.contextId),F.addEventListener("scroll",m,uI(M.scrollOptions))),O},[n.contextId,s,m,i]),y=ut(()=>{const _=e.current,T=Gv(_);return _&&T||Ue(),P2(T)},[]),b=ut(()=>{const _=e.current;_||Ue();const T=Gv(_);e.current=null,T&&(p.cancel(),T.removeAttribute(tI.contextId),T.removeEventListener("scroll",m,uI(_.scrollOptions)))},[m,p]),C=ut(_=>{const T=e.current;T||Ue();const D=Gv(T);D||Ue(),D.scrollTop+=_.y,D.scrollLeft+=_.x},[]),S=Ht(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:y,dragStopped:b,scroll:C}),[b,g,y,C]),E=Ht(()=>({uniqueId:r,descriptor:s,callbacks:S}),[S,s,r]);Vo(()=>(u.current=E.descriptor,o.droppable.register(E),()=>{e.current&&b(),o.droppable.unregister(E)}),[S,s,b,E,a,o.droppable]),Vo(()=>{e.current&&a.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Vo(()=>{e.current&&a.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function ew(){}const lI={width:0,height:0,margin:Fee},Noe=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>t||n==="close"?lI:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},Doe=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>{const r=Noe({isAnimatingOpenOnMount:t,placeholder:e,animate:n});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Yh.placeholder:null}},koe=t=>{const e=A.useRef(null),n=ut(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:o,onClose:a,contextId:i}=t,[s,u]=A.useState(t.animate==="open");A.useEffect(()=>s?r!=="open"?(n(),u(!1),ew):e.current?ew:(e.current=setTimeout(()=>{e.current=null,u(!1)}),n):ew,[r,s,n]);const l=ut(f=>{f.propertyName==="height"&&(o(),r==="close"&&a())},[r,a,o]),d=Doe({isAnimatingOpenOnMount:s,animate:t.animate,placeholder:t.placeholder});return bt.createElement(t.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":i,onTransitionEnd:l,ref:t.innerRef})};var Ioe=bt.memo(koe);class Moe extends bt.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,n){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const Ooe=t=>{const e=A.useContext(O0);e||Ue();const{contextId:n,isMovementAllowed:r}=e,o=A.useRef(null),a=A.useRef(null),{children:i,droppableId:s,type:u,mode:l,direction:d,ignoreContainerClipping:f,isDropDisabled:p,isCombineEnabled:m,snapshot:g,useClone:y,updateViewportMaxScroll:b,getContainerForClone:C}=t,S=ut(()=>o.current,[]),E=ut((F=null)=>{o.current=F},[]);ut(()=>a.current,[]);const _=ut((F=null)=>{a.current=F},[]),T=ut(()=>{r()&&b({maxScroll:AF()})},[r,b]);Aoe({droppableId:s,type:u,mode:l,direction:d,isDropDisabled:p,isCombineEnabled:m,ignoreContainerClipping:f,getDroppableRef:S});const D=Ht(()=>bt.createElement(Moe,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:F,data:j,animate:G})=>bt.createElement(Ioe,{placeholder:j,onClose:F,innerRef:_,animate:G,contextId:n,onTransitionEnd:T})),[n,T,t.placeholder,t.shouldAnimatePlaceholder,_]),I=Ht(()=>({innerRef:E,placeholder:D,droppableProps:{"data-rfd-droppable-id":s,"data-rfd-droppable-context-id":n}}),[n,s,D,E]),k=y?y.dragging.draggableId:null,M=Ht(()=>({droppableId:s,type:u,isUsingCloneFor:k}),[s,k,u]);function O(){if(!y)return null;const{dragging:F,render:j}=y,G=bt.createElement(GF,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(W,q)=>j(W,q,F));return fd.createPortal(G,C())}return bt.createElement(NE.Provider,{value:M},i(I,g),O())};function Poe(){return document.body||Ue(),document.body}const cI={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Poe},KF=t=>{let e={...t},n;for(n in cI)t[n]===void 0&&(e={...e,[n]:cI[n]});return e},tw=(t,e)=>t===e.droppable.type,dI=(t,e)=>e.draggables[t.draggable.id],Foe=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},n=yr(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=yr((a,i,s,u,l,d)=>{const f=l.descriptor.id;if(l.descriptor.droppableId===a){const g=d?{render:d,dragging:n(l.descriptor)}:null,y={isDraggingOver:s,draggingOverWith:s?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:g}}if(!i)return e;if(!u)return t;const m={isDraggingOver:s,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(a,i)=>{const s=KF(i),u=s.droppableId,l=s.type,d=!s.isDropDisabled,f=s.renderClone;if(bp(a)){const p=a.critical;if(!tw(l,p))return e;const m=dI(p,a.dimensions),g=Wo(a.impact)===u;return r(u,d,g,g,m,f)}if(a.phase==="DROP_ANIMATING"){const p=a.completed;if(!tw(l,p.critical))return e;const m=dI(p.critical,a.dimensions);return r(u,d,VF(p.result)===u,Wo(p.impact)===u,m,f)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const p=a.completed;if(!tw(l,p.critical))return e;const m=Wo(p.impact)===u,g=!!(p.impact.at&&p.impact.at.type==="COMBINE"),y=p.critical.droppable.id===u;return m?g?t:e:y?t:e}return e}},Boe={updateViewportMaxScroll:Xte},fI=qP(Foe,Boe,(t,e,n)=>({...KF(n),...t,...e}),{context:_E,areStatePropsEqual:WF})(Ooe),hI=[{type:"heading",label:"Heading",icon:jY},{type:"paragraph",label:"Paragraph",icon:FY},{type:"image",label:"Image",icon:Ug},{type:"breakline",label:"Break Line",icon:_K},{type:"horizontalline",label:"Horizontal Line",icon:hY},{type:"audio",label:"Audio",icon:SY},{type:"video",label:"Video",icon:cP},{type:"timer",label:"Timer",icon:$K},{type:"orderedlist",label:"Ordered List",icon:vY},{type:"unorderedlist",label:"Unordered List",icon:yY},{type:"randominteger",label:"Random Integer",icon:TY},{type:"videorecording",label:"Video Recording",icon:lP},{type:"audiorecording",label:"Audio Recording",icon:rE}];function Loe({element:t,onTimeUpdate:e}){const[n,r]=A.useState(0),[o,a]=A.useState(!0);A.useEffect(()=>{let s;return o?s=setInterval(()=>{r(u=>{const l=u+1;return e&&e(l),l})},1e3):!o&&n!==0&&clearInterval(s),()=>clearInterval(s)},[o,e]);const i=s=>{const u=Math.floor(s/60),l=s%60;return`${u.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`};return w.jsxs(le,{style:{textAlign:t.align||"left",padding:8},children:[w.jsx(we,{fw:600,size:"md",mb:4,children:"Page Timer"}),w.jsx(we,{size:"lg",fw:700,style:{fontFamily:"monospace"},children:i(n)}),w.jsx(we,{size:"xs",color:"dimmed",mt:4,children:"Time spent on this page"})]})}function pI(t,e,n,r,o,a){const i={cursor:"pointer",position:"relative",marginBottom:16},s=({children:u})=>w.jsxs(le,{style:{...i,outline:n?"2px solid #2988f4":"none",outlineOffset:2},onMouseEnter:l=>{if(!n){const d=l.currentTarget.querySelector(".element-actions");d&&(d.style.display="block")}},onMouseLeave:l=>{if(!n){const d=l.currentTarget.querySelector(".element-actions");d&&(d.style.display="none")}},children:[u,w.jsx(le,{className:"element-actions",style:{position:"absolute",top:-10,right:-10,display:n?"block":"none",background:"rgba(0,0,0,0.8)",borderRadius:6,padding:4,zIndex:10},children:w.jsxs(Ge,{spacing:4,children:[!["videorecording","audiorecording"].includes(t.type)&&w.jsx(qo,{label:"Properties",position:"top",children:w.jsx(Rn,{size:"sm",variant:"subtle",color:"white",onClick:l=>{l.stopPropagation(),o()},children:w.jsx(OY,{size:14})})}),w.jsx(qo,{label:"Delete",position:"top",children:w.jsx(Rn,{size:"sm",variant:"subtle",color:"red",onClick:l=>{l.stopPropagation(),r()},children:w.jsx(Lp,{size:14})})})]})})]});switch(t.type){case"heading":return w.jsx(s,{children:w.jsx(we,{fw:700,size:t.size||"xl",style:{textAlign:t.align||"left",color:"#000",marginBottom:8},onClick:e,children:t.content||"Tap to Edit Heading"})});case"paragraph":return w.jsx(s,{children:w.jsx(we,{style:{color:"#333",textAlign:t.align||"left",lineHeight:1.6,marginBottom:8},onClick:e,children:t.content||"Tap to Edit Paragraph"})});case"image":return w.jsx(s,{children:w.jsx(le,{style:{textAlign:t.align||"left"},onClick:e,children:t.url||t.fileUrl?w.jsx("img",{src:t.url||t.fileUrl,alt:t.fileName||"Image",style:{maxWidth:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"auto"}}):w.jsx(le,{style:{width:t.width?`${t.width}px`:"300px",height:t.height?`${t.height}px`:"200px",border:"2px dashed #ddd",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:w.jsxs("div",{style:{textAlign:"center"},children:[w.jsx(Ug,{size:40,color:"#ccc"}),w.jsx(we,{color:"dimmed",size:"sm",children:"Click to upload image"})]})})})});case"breakline":return w.jsx(s,{children:w.jsx("br",{})});case"horizontalline":return w.jsx(s,{children:w.jsx(go,{color:"#ddd"})});case"audio":return w.jsx(s,{children:w.jsx(le,{style:{textAlign:t.align||"left"},onClick:e,children:t.url||t.fileUrl?w.jsxs("div",{children:[w.jsxs(we,{size:"sm",fw:500,mb:8,children:["Audio: ",t.fileName||"From URL"]}),w.jsxs("audio",{controls:!0,style:{width:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"auto"},children:[w.jsx("source",{src:t.url||t.fileUrl,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}):w.jsx(le,{style:{width:t.width?`${t.width}px`:"300px",height:t.height?`${t.height}px`:"60px",border:"1px dashed #ddd",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:w.jsx(we,{color:"dimmed",size:"sm",children:"[Audio - Upload audio file]"})})})});case"video":return w.jsx(s,{children:w.jsx(le,{style:{textAlign:t.align||"left"},onClick:e,children:t.url||t.fileUrl?w.jsxs("div",{children:[w.jsxs(we,{size:"sm",fw:500,mb:8,children:["Video: ",t.fileName||"From URL"]}),w.jsxs("video",{controls:!0,style:{width:t.width?`${t.width}px`:"400px",height:t.height?`${t.height}px`:"auto"},children:[w.jsx("source",{src:t.url||t.fileUrl,type:"video/mp4"}),"Your browser does not support the video element."]})]}):w.jsx(le,{style:{width:t.width?`${t.width}px`:"400px",height:t.height?`${t.height}px`:"250px",border:"1px dashed #ddd",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:w.jsx(we,{color:"dimmed",size:"sm",children:"[Video - Upload video file]"})})})});case"timer":return w.jsx(s,{children:w.jsx(Loe,{element:t,onTimeUpdate:u=>console.log("Time spent:",u)})});case"orderedlist":return w.jsx(s,{children:w.jsx("ol",{style:{color:"#333",textAlign:t.align||"left",marginBottom:8,paddingLeft:20},onClick:e,children:t.listItems?t.listItems.map((u,l)=>w.jsx("li",{style:{marginBottom:4},children:u},l)):w.jsxs(w.Fragment,{children:[w.jsx("li",{style:{marginBottom:4},children:"Tap to Edit Item 1"}),w.jsx("li",{style:{marginBottom:4},children:"Tap to Edit Item 2"})]})})});case"unorderedlist":return w.jsx(s,{children:w.jsx("ul",{style:{color:"#333",textAlign:t.align||"left",marginBottom:8,paddingLeft:20},onClick:e,children:t.listItems?t.listItems.map((u,l)=>w.jsx("li",{style:{marginBottom:4},children:u},l)):w.jsxs(w.Fragment,{children:[w.jsx("li",{style:{marginBottom:4},children:"Tap to Edit Item 1"}),w.jsx("li",{style:{marginBottom:4},children:"Tap to Edit Item 2"})]})})});case"randominteger":return w.jsx(s,{children:w.jsxs(le,{style:{textAlign:t.align||"left",padding:"12px",border:"1px solid #e0e0e0",borderRadius:"6px",backgroundColor:"#f8f9fa"},onClick:e,children:[w.jsx(we,{fw:500,size:"sm",mb:8,color:"#333",children:"Random Integer"}),w.jsx(we,{size:"lg",fw:700,style:{fontFamily:"monospace",color:t.content?"#007CFF":"#999"},children:t.content||"Click to set number"}),w.jsxs(we,{size:"xs",color:"dimmed",mt:4,children:["Integer value: ",t.content||"Not set"]})]})});case"videorecording":return w.jsx(s,{children:w.jsxs(le,{style:{textAlign:"center",padding:"20px",border:"2px dashed #ff6b35",borderRadius:"8px",backgroundColor:"#fff5f0"},children:[w.jsx(lP,{size:48,color:"#ff6b35",style:{marginBottom:8}}),w.jsx(we,{fw:600,size:"md",color:"#ff6b35",mb:4,children:"Video Recording"}),w.jsx(we,{size:"sm",color:"dimmed",children:"Users will be able to record video here"})]})});case"audiorecording":return w.jsx(s,{children:w.jsxs(le,{style:{textAlign:"center",padding:"20px",border:"2px dashed #007CFF",borderRadius:"8px",backgroundColor:"#f0f7ff"},children:[w.jsx(rE,{size:48,color:"#007CFF",style:{marginBottom:8}}),w.jsx(we,{fw:600,size:"md",color:"#007CFF",mb:4,children:"Audio Recording"}),w.jsx(we,{size:"sm",color:"dimmed",children:"Users will be able to record audio here"})]})});default:return w.jsx("span",{})}}function joe({selectedElement:t,onPropertyChange:e,onClose:n}){const[r,o]=A.useState(""),[a,i]=A.useState(t?.url||"");if(bt.useEffect(()=>{t?.listItems&&o(t.listItems.join(`
`)),i(t?.url||"")},[t]),!t)return w.jsxs(le,{style:{width:300,background:"#2c2c2c",color:"#fff",padding:20,height:"100%"},children:[w.jsx(we,{size:"lg",fw:600,mb:"md",children:"Properties"}),w.jsx(we,{color:"dimmed",children:"Select an element to edit its properties"})]});if(["videorecording","audiorecording"].includes(t.type))return w.jsxs(le,{style:{width:300,background:"#2c2c2c",color:"#fff",padding:20,height:"100%"},children:[w.jsx(we,{size:"lg",fw:600,mb:"md",children:"Recording Element"}),w.jsx(we,{color:"dimmed",children:"Recording elements don't have configurable properties. The recording functionality will be handled in the user dashboard."}),w.jsx(Ve,{size:"xs",variant:"subtle",onClick:n,mt:"md",children:"Close"})]});const s=f=>{if(f){const p=URL.createObjectURL(f);e("fileName",f.name),e("fileUrl",p),e("url",""),i("")}},u=f=>{i(f),e("url",f),e("fileName",null),e("fileUrl",null)},l=f=>{o(f);const p=f.split(`
`).filter(m=>m.trim()!=="");e("listItems",p)},d=()=>{switch(t.type){case"heading":return"Heading Properties";case"paragraph":return"Paragraph Properties";case"image":return"Image Properties";case"audio":return"Audio Properties";case"video":return"Video Properties";case"timer":return"Timer Properties";case"orderedlist":return"Ordered List Properties";case"unorderedlist":return"Unordered List Properties";case"randominteger":return"Random Integer Properties";default:return"Element Properties"}};return w.jsx(le,{style:{width:300,background:"#2c2c2c",color:"#fff",height:"100%"},children:w.jsx(Yo,{style:{height:"100%"},children:w.jsxs(le,{style:{padding:20},children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsx(we,{size:"lg",fw:600,children:d()}),w.jsx(Ve,{size:"xs",variant:"subtle",onClick:n,children:""})]}),w.jsxs(po,{spacing:"md",children:[["heading"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Content"}),w.jsx(eo,{value:t.content||"",onChange:f=>e("content",f.target.value),placeholder:"Enter heading text"})]}),["paragraph"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Content"}),w.jsx(up,{value:t.content||"",onChange:f=>e("content",f.target.value),placeholder:"Enter paragraph text",rows:6})]}),["randominteger"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Integer Value"}),w.jsx(Cd,{value:parseInt(t.content)||"",onChange:f=>e("content",f?f.toString():""),placeholder:"Enter an integer number",min:-999999,max:999999,stepHoldDelay:500,stepHoldInterval:100}),w.jsxs(we,{size:"xs",color:"dimmed",mt:4,children:["Enter any integer number. This will be stored as:"," ",t.content||"empty"]})]}),["orderedlist","unorderedlist"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"List Items (one per line)"}),w.jsx(up,{value:r,onChange:f=>l(f.target.value),placeholder:"Enter list items, one per line",rows:4})]}),["image","audio","video"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:t.type==="image"?"Image File or URL":t.type==="audio"?"Audio File or URL":"Video File or URL"}),w.jsx(eo,{placeholder:"Enter URL (e.g. https://example.com/media.mp4)",leftSection:w.jsx(uP,{size:16}),value:a,onChange:f=>u(f.target.value),mb:"md",disabled:!!t.fileUrl}),w.jsx(Lg,{placeholder:`Or upload ${t.type} file`,accept:t.type==="image"?"image/*":t.type==="audio"?"audio/*":"video/*",onChange:s,leftSection:w.jsx(oE,{size:14}),disabled:!!a}),t.fileName&&w.jsxs(we,{size:"xs",color:"green",mt:4,children:["Current file: ",t.fileName]}),a&&w.jsxs(we,{size:"xs",color:"green",mt:4,children:["Using URL: ",a]})]}),["image","audio","video"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Size"}),w.jsxs(Ge,{children:[w.jsx(Cd,{placeholder:"300",value:t.width||"",onChange:f=>e("width",f),size:"xs",style:{width:80}}),w.jsx(we,{size:"xs",children:"PX"}),w.jsx(Cd,{placeholder:"200",value:t.height||"",onChange:f=>e("height",f),size:"xs",style:{width:80}}),w.jsx(we,{size:"xs",children:"PX"})]}),w.jsxs(Ge,{mt:4,children:[w.jsx(we,{size:"xs",color:"dimmed",children:"Width"}),w.jsx(we,{size:"xs",color:"dimmed",ml:"auto",children:"Height"})]})]}),t.type==="heading"&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Size"}),w.jsx(Ru,{value:t.size||"xl",onChange:f=>e("size",f),data:[{value:"xs",label:"Extra Small"},{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"},{value:"xl",label:"Extra Large"}]})]}),!["breakline","horizontalline"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Alignment"}),w.jsxs(Ge,{children:[w.jsx(Ve,{size:"xs",variant:t.align==="left"?"filled":"subtle",onClick:()=>e("align","left"),children:"LEFT"}),w.jsx(Ve,{size:"xs",variant:t.align==="center"?"filled":"subtle",onClick:()=>e("align","center"),children:"CENTER"}),w.jsx(Ve,{size:"xs",variant:t.align==="right"?"filled":"subtle",onClick:()=>e("align","right"),children:"RIGHT"})]}),w.jsx(we,{size:"xs",color:"dimmed",mt:4,children:"Select how the content is aligned horizontally"})]}),w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Duplicate Field"}),w.jsx(Ve,{variant:"light",size:"sm",children:"DUPLICATE"}),w.jsx(we,{size:"xs",color:"dimmed",mt:4,children:"Duplicate this field with all saved settings"})]})]})]})})})}function zoe(){const t=Xa(),e=Gr(),[n,r]=A.useState("New Jotform"),[o,a]=A.useState([[]]),[i,s]=A.useState(0),[u,l]=A.useState(null),[d,f]=A.useState(!1),[p,m]=A.useState(!1);A.useEffect(()=>{t.state?.jotformName&&r(t.state.jotformName)},[t.state]);const g=M=>{const{source:O,destination:F}=M;if(F){if(O.droppableId==="elements"&&F.droppableId==="canvas"){const j={...hI[O.index],content:"",id:Date.now()},G=Array.from(o);G[i]=[...G[i].slice(0,F.index),j,...G[i].slice(F.index)],a(G)}else if(O.droppableId==="canvas"&&F.droppableId==="canvas"){const j=Array.from(o[i]),[G]=j.splice(O.index,1);j.splice(F.index,0,G);const W=Array.from(o);W[i]=j,a(W)}}},y=M=>{l(M);const O=o[i][M];["videorecording","audiorecording"].includes(O.type)||f(!0)},b=M=>{const O=Array.from(o);O[i].splice(M,1),a(O),l(null),f(!1)},C=(M,O)=>{if(u===null)return;const F=[...o];F[i][u]={...F[i][u],[M]:O},a(F)},S=()=>{a([...o,[]]),s(o.length)},E=()=>{i>0&&s(i-1)},_=()=>{i<o.length-1&&s(i+1)},T=()=>{console.log("Form submitted!",{jotformName:n,pages:o})},D=async()=>{const M=o.map((F,j)=>{const G=F.map((W,q)=>{let P;switch(W.type){case"heading":case"paragraph":P=W.content||`Default ${W.type} content`;break;case"randominteger":P=W.content||"0";break;case"videorecording":case"audiorecording":P="";break;case"image":case"audio":case"video":W.url?P=W.url:W.fileName?P={fileName:W.fileName,fileUrl:W.fileUrl,mimeType:W.mimeType||"application/octet-stream",size:W.fileSize||0}:P=`No content for ${W.type}`;break;case"orderedlist":case"unorderedlist":P=W.listItems?W.listItems.join(", "):`Default list items for ${W.type}`;break;case"timer":P="Timer element - tracks time spent on page";break;case"breakline":P="Line break";break;case"horizontalline":P="Horizontal divider line";break;default:P=`${W.type} element`;break}return{id:W.id||`element_${j}_${q}`,tagName:W.type,elementName:W.type,content:P,sequence:q+1,page:j+1}});return{page:j+1,totalElements:G.length,elements:G}}),O={jotformName:n,totalPages:o.length,pages:M};console.log("=== LEARNING MATERIAL DATA (ALL PAGES) ==="),console.log("Jotform Name:",n),console.log("Total Pages:",o.length),console.log("All Pages Data:",O),console.log("Detailed Pages:"),M.forEach(F=>{console.log(`
Page ${F.page} (Total Elements: ${F.totalElements}):`),console.table(F.elements)}),console.log("=======================================");try{console.log(O);const F=await lt.post("http://localhost:8081/api/jotforms",O,{headers:{"Content-Type":"application/json"},withCredentials:!0});bn.show({title:"Success!",message:"Learning material saved successfully",color:"green"}),console.log(" Saved to database:",F.data),console.log(O),e("/jotformmanagment")}catch(F){console.error(" Failed to save learning material:",F),bn.show({title:"Error",message:"Failed to save learning material. Please try again.",color:"red"})}},I=i===0,k=i===o.length-1;return w.jsxs(le,{style:{height:"100vh",display:"flex",flexDirection:"column",background:"#f0f0f0"},children:[w.jsxs(le,{style:{background:"#ff6b35",padding:"12px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsxs(Ge,{children:[w.jsx(Ve,{size:"sm",variant:"white",leftSection:w.jsx(nE,{size:16}),onClick:()=>m(!p),children:p?"Edit":"Preview"}),w.jsx(Ve,{size:"sm",variant:"white",leftSection:w.jsx(NK,{size:16}),onClick:D,style:{background:"#4CAF50",color:"white",border:"none"},children:"Create Learning Material"})]}),w.jsxs(Ge,{children:[w.jsxs(we,{size:"sm",style:{color:"white",fontWeight:600},children:["Page ",i+1," of ",o.length]}),w.jsx(Ve,{size:"sm",variant:"white",onClick:S,children:"+ Add Page"})]})]}),w.jsx(le,{style:{flex:1,display:"flex"},children:w.jsxs(Zre,{onDragEnd:g,children:[!p&&w.jsxs(le,{style:{width:200,background:"#2c2c2c",color:"#fff",padding:16,borderRight:"1px solid #444"},children:[w.jsx(we,{fw:700,size:"sm",mb:"md",style:{color:"#ff6b35"},children:"FORM ELEMENTS"}),w.jsx(fI,{droppableId:"elements",isDropDisabled:!0,children:M=>w.jsxs("div",{ref:M.innerRef,...M.droppableProps,children:[hI.map((O,F)=>w.jsx(iI,{draggableId:O.type,index:F,children:j=>w.jsxs(Ge,{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,style:{background:"#3c3c3c",borderRadius:8,padding:"8px 12px",marginBottom:8,cursor:"grab",fontSize:13,...j.draggableProps.style},spacing:8,children:[w.jsx(O.icon,{size:16}),O.label]})},O.type)),M.placeholder]})})]}),w.jsx(le,{style:{flex:1,background:"#f5f5f5",display:"flex",justifyContent:"center",padding:20},children:w.jsx(le,{style:{width:"100%",maxWidth:800,background:"#fff",minHeight:"calc(100vh - 120px)",boxShadow:"0 0 10px rgba(0,0,0,0.1)",position:"relative"},children:w.jsx(Yo,{style:{height:"calc(100vh - 120px)"},children:w.jsxs(le,{style:{padding:"40px 60px"},children:[w.jsx(we,{fw:700,size:"xl",align:"center",mb:"xl",style:{color:"#333"},children:n}),p?w.jsx("div",{children:(o[i]||[]).map((M,O)=>w.jsx(le,{mb:"md",children:pI(M,()=>{},!1,()=>{},()=>{})},O))}):w.jsx(fI,{droppableId:"canvas",children:M=>w.jsxs("div",{ref:M.innerRef,...M.droppableProps,style:{minHeight:400},children:[(o[i]||[]).length===0&&w.jsx(we,{align:"center",color:"gray",style:{padding:40},children:"Drag your first question here from the left"}),(o[i]||[]).map((O,F)=>w.jsx(iI,{draggableId:`canvas-element-${F}`,index:F,children:j=>w.jsx("div",{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,style:{...j.draggableProps.style},children:pI(O,()=>y(F),u===F,()=>b(F),()=>y(F))})},`${O.id||F}-${O.type}`)),M.placeholder]})}),w.jsxs(Ge,{justify:"center",mt:"xl",spacing:"md",style:{paddingTop:40},children:[!I&&w.jsx(Ve,{size:"md",variant:"outline",onClick:E,children:"Back"}),k?w.jsx(Ve,{size:"md",style:{background:"#00C851"},onClick:T,children:"Submit"}):w.jsx(Ve,{size:"md",style:{background:"#007CFF"},onClick:_,children:"Next"})]})]})})})}),!p&&d&&w.jsx(joe,{selectedElement:u!==null?o[i][u]:null,onPropertyChange:C,onClose:()=>f(!1)})]})})]})}function YF(t){const[e,n]=A.useState("learning"),[r,o]=A.useState(!1),[a,i]=A.useState([]),[s,u]=A.useState([]),[l,d]=A.useState(!1),f=async()=>{o(!0);try{const C=await lt.get("http://localhost:8081/api/jotforms/names",{withCredentials:!0});i(C.data)}catch(C){console.error("Error fetching jotform names",C),bn.show({title:"Fetch Error",message:"Could not load Jotform names. Please try again.",color:"red"}),i([])}finally{o(!1)}},p=async()=>{d(!0);try{const C=await lt.get("http://localhost:8081/api/courses/names",{withCredentials:!0});u(C.data)}catch(C){console.error("Error fetching existing courses",C),bn.show({title:"Fetch Error",message:"Could not load existing course names. Please try again.",color:"red"}),u([])}finally{d(!1)}};A.useEffect(()=>{f(),p()},[]);const m=jd({initialValues:{courseName:"",jotformName:"",imageFile:null,pdfFile:null},validate:{courseName:C=>C.trim().length>0?null:"Please enter a course name",jotformName:C=>C?null:"Please select a Jotform"}}),g=async C=>{try{const S=new FormData;S.append("courseName",C.courseName),S.append("jotformName",C.jotformName),C.imageFile&&S.append("imageFile",C.imageFile),C.pdfFile&&S.append("pdfFile",C.pdfFile),await lt.post("http://localhost:8081/api/courses/learning",S,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),bn.show({title:"Success",message:"Learning form mapped successfully!",color:"green"}),t.onSuccess()}catch(S){console.error("Error submitting learning form mapping",S),bn.show({title:"Submission Failed",message:"Failed to map the learning form. Please check the details and try again.",color:"red"})}},y=jd({initialValues:{courseName:"",jotformName:""},validate:{courseName:C=>C?null:"Please select a course name",jotformName:C=>C?null:"Please select a jotform"}}),b=async C=>{try{const S={courseName:C.courseName,jotformName:C.jotformName};await lt.post("http://localhost:8081/api/courses/assignment",S,{headers:{"Content-Type":"application/json"},withCredentials:!0}),bn.show({title:"Success",message:"Assignment form mapped successfully!",color:"green"}),t.onSuccess()}catch(S){console.error("Error submitting assignment mapping",S),bn.show({title:"Submission Failed",message:"Failed to map the assignment form. Please ensure the course exists.",color:"red"})}};return w.jsxs(Qo,{className:LP.formPaper,radius:"md",p:"lg",withBorder:!0,...t,style:{maxWidth:400,margin:"0 auto"},children:[w.jsx(we,{size:"lg",fw:500,ta:"center",children:"Jotform Mapping"}),w.jsx(Ge,{justify:"center",mt:"md",mb:"lg",children:w.jsx(YS,{value:e,onChange:n,data:[{label:"Jotform Learning",value:"learning"},{label:"Jotform Assignment",value:"assignment"}],color:"blue",size:"md"})}),w.jsx(go,{label:"Select mapping details",labelPosition:"center",my:"lg"}),e==="learning"?w.jsx("form",{onSubmit:m.onSubmit(g),children:w.jsxs(po,{children:[w.jsx(eo,{label:"Course Name",placeholder:"Enter new or existing course name",required:!0,...m.getInputProps("courseName"),radius:"md"}),w.jsx(Ru,{label:"Jotform Name",placeholder:r?"Loading...":"Select existing jotform",required:!0,searchable:!0,data:a,...m.getInputProps("jotformName"),radius:"md",disabled:r}),w.jsx(Lg,{label:"Upload Image (Optional)",placeholder:"Select image file",accept:"image/*",...m.getInputProps("imageFile"),radius:"md",clearable:!0}),w.jsx(Lg,{label:"Upload PDF (Optional)",placeholder:"Select PDF file",accept:"application/pdf",...m.getInputProps("pdfFile"),radius:"md",clearable:!0}),w.jsx(Ve,{type:"submit",radius:"xl",mt:"md",children:"Map Learning Jotform"})]})}):w.jsx("form",{onSubmit:y.onSubmit(b),children:w.jsxs(po,{children:[w.jsx(Ru,{label:"Course Name",placeholder:l?"Loading...":"Select existing course",required:!0,searchable:!0,data:s,...y.getInputProps("courseName"),radius:"md",disabled:l}),w.jsx(Ru,{label:"Jotform Name",placeholder:"Select jotform",required:!0,searchable:!0,data:a,...y.getInputProps("jotformName"),radius:"md",disabled:r}),w.jsx(Ve,{type:"submit",radius:"xl",mt:"md",children:"Map Assignment Jotform"})]})})]})}function Uoe(){const[t,e]=A.useState([]),[n,r]=A.useState(!1),[o,a]=A.useState(!1),[i,s]=A.useState(!1),[u,l]=A.useState(null),d=Gr(),f=async()=>{r(!0);try{const C=await lt.get("http://localhost:8081/api/courses",{withCredentials:!0});e(C.data)}catch(C){console.error("Error fetching courses:",C),e([])}finally{r(!1)}};A.useEffect(()=>{f()},[]);const p=C=>{console.log("Editing course:",C)},m=()=>{d(-1)},g=C=>{l(C),s(!0)},y=()=>{l(null),s(!1)},b=async()=>{if(u)try{await lt.delete(`http://localhost:8081/api/courses/${u.id}`,{withCredentials:!0}),e(t.filter(C=>C.id!==u.id)),y()}catch(C){console.error(`Error deleting course ${u.courseName}:`,C)}};return w.jsxs(rn,{size:"lg",py:"xl",children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsx(jt,{order:2,children:"Course Management"}),w.jsxs(Ge,{children:[w.jsx(Ve,{variant:"light",color:"blue",leftIcon:w.jsx(gs,{size:16}),onClick:m,children:"Back"}),w.jsx(Ve,{onClick:()=>a(!0),children:"Map Jotforms"})]})]}),n?w.jsx(we,{ta:"center",c:"dimmed",children:"Loading courses..."}):t.length>0?w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Course Name"}),w.jsx(Re.Th,{children:"Jotform Learning"}),w.jsx(Re.Th,{children:"Jotform Assignment"}),w.jsx(Re.Th,{children:"Mind Map"}),w.jsx(Re.Th,{children:"Actions"})]})}),w.jsx(Re.Tbody,{children:t.map(C=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:C.courseName}),w.jsx(Re.Td,{children:C.learningJotformName||"N/A"}),w.jsx(Re.Td,{children:C.assignmentJotformName||"N/A"}),w.jsx(Re.Td,{children:C.imageFileName||"N/A"}),w.jsx(Re.Td,{children:w.jsxs(Ge,{gap:"xs",justify:"center",children:[w.jsx(qo,{label:"Edit Course",children:w.jsx(Rn,{variant:"subtle",color:"blue",onClick:()=>p(C),children:w.jsx(C0,{size:18})})}),w.jsx(qo,{label:"Delete Course",children:w.jsx(Rn,{variant:"subtle",color:"red",onClick:()=>g(C),children:w.jsx(Lp,{size:18})})})]})})]},C.id))})]}):w.jsx(we,{ta:"center",c:"dimmed",children:"No courses available."}),w.jsx(kr,{opened:o,onClose:()=>a(!1),title:"Map Jotform to Course",size:"xl",children:w.jsx(YF,{onSuccess:()=>{a(!1),f()}})}),w.jsxs(kr,{opened:i,onClose:y,title:`Delete ${u?.courseName||"Course"}`,centered:!0,children:[w.jsx(we,{children:"Are you sure you want to delete this course? This action cannot be undone."}),w.jsxs(Ge,{justify:"flex-end",mt:"md",children:[w.jsx(Ve,{variant:"default",onClick:y,children:"Cancel"}),w.jsx(Ve,{color:"red",onClick:b,children:"Delete Course"})]})]})]})}const nw=[{rank:1,username:"sanskar1419",score:115},{rank:2,username:"bhav380-2",score:105},{rank:3,username:"ShabanaShaik1987",score:100},{rank:4,username:"shubham7522",score:80},{rank:5,username:"rishavd3v",score:80},{rank:6,username:"inv-amalusudhakaran",score:70},{rank:7,username:"Dev-Code24",score:65},{rank:8,username:"shubham-sanvariya",score:60},{rank:30,username:"Navya",score:10}],Woe=[...nw.slice(0,8),"SKIP",nw[nw.length-1]];function Voe({userRank:t=30,username:e="Navya",score:n=10}){return w.jsxs(rn,{size:"md",py:"xl",children:[w.jsx(Ge,{justify:"center",mb:"md",align:"center",children:w.jsx(jt,{order:2,style:{color:"#e0e8f4",letterSpacing:1,fontWeight:700},children:"Analytic Leader Dashboard"})}),w.jsx(Qo,{withBorder:!0,radius:"md",p:0,mt:"md",style:{overflow:"hidden",background:"#161c23",boxShadow:"0 2px 16px 0 rgba(36, 133, 255, 0.07)"},children:w.jsx(Yo,{type:"auto",style:{maxHeight:480},children:w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Rank"}),w.jsx(Re.Th,{children:"Username"}),w.jsx(Re.Th,{children:"Score"})]})}),w.jsx(Re.Tbody,{children:Woe.map((r,o)=>r==="SKIP"?w.jsxs(Re.Tr,{style:{background:"#212232"},children:[w.jsx(Re.Td,{align:"center",style:{color:"#444d5b",fontWeight:600,textAlign:"center"},children:"."}),w.jsx(Re.Td,{align:"center",style:{color:"#444d5b",fontWeight:600,textAlign:"center"},children:"."}),w.jsx(Re.Td,{align:"center",style:{color:"#444d5b",fontWeight:600,textAlign:"center"},children:"."})]},"skip"):w.jsxs(Re.Tr,{style:{background:r.rank===t?"linear-gradient(90deg, #13436c 0%, #2669a6 100%)":"#222733",fontWeight:r.rank===t?700:400,color:r.rank===t?"#fff":"#d4ddf3",transition:"background 0.2s"},children:[w.jsx(Re.Td,{style:{border:"none"},children:r.rank}),w.jsx(Re.Td,{style:{border:"none"},children:r.username}),w.jsx(Re.Td,{style:{border:"none"},children:r.score})]},r.rank))})]})})})]})}function Hoe({element:t}){const{content:e,tagName:n,align:r,width:o,height:a,required:i,style:s={},placeholder:u}=t,l={textAlign:r||"left",width:o||"auto",height:a||"auto",...s};switch(n){case"heading":return w.jsxs(we,{fw:700,size:t.size||"xl",mb:"md",style:l,children:[e,i&&w.jsx("span",{style:{color:"red"},children:" *"})]});case"paragraph":return w.jsx(we,{size:t.size||"md",mb:"md",style:{...l,lineHeight:1.6},children:e});case"image":return w.jsxs(le,{mb:"md",style:l,children:[w.jsx(sp,{src:typeof e=="string"?e:e.fileUrl,alt:t.elementName||u||"Image",width:o||void 0,height:a||void 0,fit:"contain"}),typeof e=="object"&&w.jsx(we,{size:"xs",mt:4,c:"dimmed",children:e.fileName})]});case"video":return w.jsx(le,{mb:"md",style:l,children:w.jsxs("video",{width:o||"100%",height:a||"auto",controls:!0,children:[w.jsx("source",{src:e,type:"video/mp4"}),"Your browser does not support the video tag."]})});case"audio":return w.jsx(le,{mb:"md",style:l,children:w.jsxs("audio",{controls:!0,children:[w.jsx("source",{src:e,type:"audio/mpeg"}),"Your browser does not support the audio element."]})});case"horizontalline":case"breakline":return w.jsx(go,{my:"md",style:l});case"orderedlist":return w.jsx("ol",{style:l,children:e.split(",").map((d,f)=>w.jsx("li",{children:d.trim()},f))});case"unorderedlist":return w.jsx("ul",{style:l,children:e.split(",").map((d,f)=>w.jsx("li",{children:d.trim()},f))});case"randominteger":return w.jsxs(le,{mb:"md",style:l,children:[w.jsx(we,{fw:500,size:"md",mb:4,children:"Random Integer"}),w.jsx(we,{size:"xl",fw:700,style:{fontFamily:"monospace",color:"#007CFF",padding:"8px 12px",background:"#f0f7ff",borderRadius:"4px",display:"inline-block"},children:e||"0"})]});case"videorecording":return w.jsx(le,{mb:"md",style:l,children:w.jsxs(le,{style:{textAlign:"center",padding:"20px",border:"2px dashed #ff6b35",borderRadius:"8px",backgroundColor:"#fff5f0"},children:[w.jsx(we,{fw:600,size:"md",color:"#ff6b35",mb:4,children:"Video Recording Element"}),w.jsx(we,{size:"sm",color:"dimmed",children:"This element will enable video recording functionality in assignments"})]})});case"audiorecording":return w.jsx(le,{mb:"md",style:l,children:w.jsxs(le,{style:{textAlign:"center",padding:"20px",border:"2px dashed #007CFF",borderRadius:"8px",backgroundColor:"#f0f7ff"},children:[w.jsx(we,{fw:600,size:"md",color:"#007CFF",mb:4,children:"Audio Recording Element"}),w.jsx(we,{size:"sm",color:"dimmed",children:"This element will enable audio recording functionality in assignments"})]})});case"timer":return w.jsx(le,{mb:"md",style:l,children:w.jsxs(le,{style:{padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#f8f9fa",textAlign:"center"},children:[w.jsx(we,{fw:600,size:"md",mb:8,children:"Page Timer"}),w.jsx(we,{size:"lg",fw:700,style:{fontFamily:"monospace"},children:"00:00"}),w.jsx(we,{size:"xs",color:"dimmed",mt:4,children:"Time tracking will be active during assignments"})]})});default:return w.jsx(we,{style:l,children:e})}}function QF({jotformName:t,onBack:e,hideBackButton:n=!1,onSubmit:r}){const[o,a]=A.useState(null),[i,s]=A.useState(!0),[u,l]=A.useState(0);A.useEffect(()=>{if(!t){s(!1),bn.show({title:"Error",message:"No Jotform name was provided.",color:"red"});return}(async()=>{s(!0),l(0);try{const C=(await lt.get("http://localhost:8081/api/jotforms",{withCredentials:!0})).data.find(S=>S.jotformName===t);C?a(C):bn.show({title:"Not Found",message:`Jotform with name "${t}" could not be found.`,color:"orange"})}catch(b){bn.show({title:"Network Error",message:"Failed to load the form. Please check your connection and try again.",color:"red"}),console.error("Fetch Jotform Error:",b)}finally{s(!1)}})()},[t]);const d=()=>{u>0&&l(u-1)},f=()=>{o&&u<o.totalPages-1&&l(u+1)},p=()=>{r?r(o):(bn.show({title:"Success!",message:"The form has been submitted successfully.",color:"green"}),console.log("Form submitted:",o))},m=()=>{if(!o||o.totalPages<=1)return null;const y=u===0,b=u===o.totalPages-1;return w.jsxs(Ge,{justify:"center",mt:"xl",children:[!y&&w.jsx(Ve,{variant:"outline",onClick:d,size:"md",children:"Back"}),b?w.jsx(Ve,{onClick:p,size:"md",color:"green",children:"Submit"}):w.jsx(Ve,{onClick:f,size:"md",children:"Next"})]})},g=()=>{if(i)return w.jsxs(le,{ta:"center",mt:"xl",children:[w.jsx(Jo,{}),w.jsx(we,{mt:"md",children:"Loading Form..."})]});if(o&&o.pages&&o.pages[u]){const y=o.pages[u];return w.jsxs(le,{style:{maxWidth:800,margin:"0 auto",padding:"40px",background:"#fff",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",minHeight:"60vh"},children:[w.jsx(we,{fw:800,size:"xl",ta:"center",mb:"md",children:o.jotformName}),o.totalPages>1&&w.jsxs(we,{ta:"center",size:"sm",color:"dimmed",mb:"xl",children:["Page ",u+1," of ",o.totalPages]}),w.jsx(le,{mb:"xl",children:y.elements.sort((b,C)=>b.sequence-C.sequence).map(b=>w.jsx(Hoe,{element:b},b.id))}),m()]})}return w.jsx(le,{ta:"center",mt:"xl",children:w.jsx(we,{color:"dimmed",children:"No content available. A notification may have indicated an error."})})};return w.jsxs(le,{p:n?"md":"xl",children:[!n&&w.jsx("button",{onClick:e,style:{background:"#333",color:"white",padding:"8px 16px",borderRadius:"6px",marginBottom:"20px",cursor:"pointer",border:"none",fontSize:"14px"},children:" Back to Courses"}),g()]})}function JF({jotformName:t,courseName:e}){const n=Gr(),r=()=>{n(`/assignment/${t}?course=${encodeURIComponent(e)}`)};return w.jsx(rn,{size:"md",py:"xl",children:w.jsxs(Zr,{shadow:"sm",padding:"xl",radius:"md",children:[w.jsxs(Ge,{mb:"md",children:[w.jsx(dY,{size:24,color:"blue"}),w.jsxs(jt,{order:2,children:["Exam Instructions - ",e]})]}),w.jsx(vi,{icon:w.jsx(m2,{size:16}),color:"blue",mb:"xl",children:"Please read all instructions carefully before proceeding."}),w.jsxs(po,{spacing:"lg",children:[w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:" General Instructions"}),w.jsxs(Un,{spacing:"sm",children:[w.jsx(Un.Item,{children:"Ensure you have a stable internet connection"}),w.jsx(Un.Item,{children:"Find a quiet, well-lit environment"}),w.jsx(Un.Item,{children:"Keep your student ID ready for verification"}),w.jsx(Un.Item,{children:"Close all other applications and browser tabs"}),w.jsx(Un.Item,{children:"Do not use any unauthorized materials during the exam"})]})]}),w.jsx(go,{}),w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:" Security & Monitoring"}),w.jsxs(Un,{spacing:"sm",children:[w.jsx(Un.Item,{children:"Your camera and microphone will be monitored throughout the exam"}),w.jsx(Un.Item,{children:"Screen recording and monitoring will be active"}),w.jsx(Un.Item,{children:"Switching tabs or applications may be flagged as suspicious"}),w.jsx(Un.Item,{children:"Any violations may result in automatic exam termination"})]})]}),w.jsx(go,{}),w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:" Identity Verification"}),w.jsxs(Un,{spacing:"sm",children:[w.jsx(Un.Item,{children:"Take a clear photo of yourself for identity verification"}),w.jsx(Un.Item,{children:"Ensure your face is clearly visible and well-lit"})]})]}),w.jsx(go,{}),w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:" Technical Requirements"}),w.jsxs(Un,{spacing:"sm",children:[w.jsx(Un.Item,{children:"Camera and microphone access is mandatory"}),w.jsx(Un.Item,{children:"Exam will run in fullscreen mode"}),w.jsx(Un.Item,{children:"Recording capabilities must be enabled"}),w.jsx(Un.Item,{children:"Modern browser with HTML5 support required"})]})]}),w.jsx(vi,{icon:w.jsx(m2,{size:16}),color:"orange",mt:"md",children:w.jsx(we,{size:"sm",weight:500,children:`By clicking "I Understand and Agree", you will proceed to the assignment where you'll complete camera setup, identity verification, and begin the exam.`})})]}),w.jsx(Ge,{justify:"center",mt:"xl",children:w.jsx(Ve,{size:"lg",onClick:r,leftSection:w.jsx(v2,{size:16}),children:"I Understand and Agree"})})]})})}const Goe="_backButton_1ne6b_57",$oe="_courseTitle_1ne6b_68",qoe="_courseGroup_1ne6b_76",Xoe="_navigationContainer_1ne6b_82",Koe="_navButton_1ne6b_91",Jc={backButton:Goe,courseTitle:$oe,courseGroup:qoe,navigationContainer:Xoe,navButton:Koe};function ZF({course:t,onBack:e}){const[n,r]=A.useState(t.learningJotformName?"learning":"assignment");return w.jsxs(le,{style:{display:"flex",height:"100vh",backgroundColor:"#f8f9fa",margin:0,padding:0,overflow:"hidden"},children:[w.jsxs(le,{style:{flex:"0 0 300px",background:"linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)",color:"white",padding:"24px",boxShadow:"2px 0 10px rgba(0, 0, 0, 0.1)",overflowY:"auto",display:"flex",flexDirection:"column",boxSizing:"border-box"},children:[w.jsx(Ve,{variant:"subtle",color:"gray",leftSection:w.jsx(gs,{size:16}),onClick:e,mb:"xl",size:"sm",className:Jc.backButton,children:"Back to Courses"}),w.jsxs(le,{mb:"xl",children:[w.jsx(jt,{order:3,className:Jc.courseTitle,children:t.courseName}),w.jsxs(we,{size:"sm",className:Jc.courseGroup,children:["Group: ",t.groupName]})]}),w.jsxs(le,{className:Jc.navigationContainer,children:[t.learningJotformName&&w.jsx(Ve,{variant:n==="learning"?"filled":"subtle",color:"blue",fullWidth:!0,leftSection:w.jsx(fp,{size:16}),onClick:()=>r("learning"),mb:"md",className:Jc.navButton,children:"Learning Material"}),t.assignmentJotformName&&w.jsx(Ve,{variant:n==="assignment"?"filled":"subtle",color:"orange",fullWidth:!0,leftSection:w.jsx(sP,{size:16}),onClick:()=>r("assignment"),mb:"md",className:Jc.navButton,children:"Assignment"})]})]}),w.jsx(le,{style:{flex:1,overflowY:"auto",backgroundColor:"#f8f9fa",padding:0,margin:0,boxSizing:"border-box"},children:w.jsxs(le,{style:{padding:"24px",minHeight:"100%"},children:[n==="learning"&&t.learningJotformName&&w.jsx(QF,{jotformName:t.learningJotformName,onBack:e,hideBackButton:!0}),n==="assignment"&&t.assignmentJotformName&&w.jsx(JF,{jotformName:t.assignmentJotformName,courseName:t.courseName})]})})]})}const Yoe="_card_1mncu_1",Qoe="_image_1mncu_13",Joe="_overlay_1mncu_26",Zoe="_content_1mncu_36",eae="_title_1mncu_45",tae="_bodyText_1mncu_50",nae="_author_1mncu_56",cu={card:Yoe,image:Qoe,overlay:Joe,content:Zoe,title:eae,bodyText:tae,author:nae};function eB({course:t,onSelectCourse:e}){const n=()=>{const o={BL:"https://images.unsplash.com/photo-1521737711867-e3b97375f902?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",BE:"https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",BM:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"};return o[t.groupName]||o.BL},r=()=>t.imageFileName&&t.imageFile?`data:image/jpeg;base64,${t.imageFile}`:(t.imageFileName,n());return w.jsxs(Zr,{p:"lg",shadow:"lg",className:cu.card,radius:"md",onClick:()=>e(t),children:[w.jsx("div",{className:cu.image,style:{backgroundImage:`url(${r()})`}}),w.jsx("div",{className:cu.overlay}),w.jsx("div",{className:cu.content,children:w.jsxs("div",{children:[w.jsx(we,{size:"lg",className:cu.title,fw:500,children:t.courseName}),w.jsxs(Ge,{justify:"space-between",gap:"xs",children:[w.jsxs(we,{size:"sm",className:cu.author,children:["Group: ",t.groupName]}),w.jsxs(Ge,{gap:"lg",children:[t.learningJotformName&&w.jsxs(Ge,{gap:4,children:[w.jsx(fp,{size:16,color:"white"}),w.jsx(we,{size:"sm",className:cu.bodyText,children:"Learning"})]}),t.assignmentJotformName&&w.jsxs(Ge,{gap:4,children:[w.jsx(sP,{size:16,color:"white"}),w.jsx(we,{size:"sm",className:cu.bodyText,children:"Assignment"})]})]})]})]})})]})}function rae(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),[o,a]=A.useState(null),[i,s]=A.useState(null);A.useEffect(()=>{(async()=>{r(!0),a(null);try{const f=await lt.get("http://localhost:8081/api/courses",{withCredentials:!0});e(f.data)}catch(f){a("Failed to fetch courses. Please try again later."),console.error(f)}finally{r(!1)}})()},[]);const u=d=>{s(d)},l=()=>{s(null)};return i?w.jsx(ZF,{course:i,onBack:l}):w.jsxs(rn,{size:"xl",py:"xl",children:[w.jsx(jt,{order:2,ta:"center",mb:"md",children:"Course Catalog"}),n?w.jsxs(Ge,{justify:"center",children:[w.jsx(Jo,{}),w.jsx(we,{children:"Loading courses..."})]}):o?w.jsx(we,{ta:"center",c:"red",children:o}):t.length>0?w.jsx(Wu,{cols:{base:1,sm:2,md:3,lg:4},spacing:"lg",children:t.map(d=>w.jsx(eB,{course:d,onSelectCourse:u},d.id))}):w.jsx(we,{ta:"center",c:"dimmed",children:"No courses available."})]})}function oae(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),o=Gr(),[a,i]=A.useState(!1),s=async()=>{r(!0);try{const g=await lt.get("http://localhost:8081/api/jotforms",{withCredentials:!0});e(g.data)}catch(g){console.error("Error fetching Jotforms:",g),bn.show({title:"Error Fetching Data",message:"Could not retrieve the list of Jotforms. Please try refreshing the page.",color:"red"}),e([])}finally{r(!1)}};A.useEffect(()=>{s()},[]);const u=g=>{console.log(`Edit Jotform with ID: ${g}`),bn.show({title:"Feature Not Available",message:"Edit functionality is yet to be implemented.",color:"blue"})},l=async g=>{try{await lt.delete(`http://localhost:8081/api/jotforms/${g.id}`,{withCredentials:!0}),e(y=>y.filter(b=>b.id!==g.id)),bn.show({title:"Jotform Deleted",message:`The form "${g.jotformName}" has been successfully deleted.`,color:"green"})}catch(y){console.error(`Error deleting jotform ${g.id}:`,y),bn.show({title:"Deletion Failed",message:"An error occurred while trying to delete the Jotform.",color:"red"})}},d=g=>{tP.openConfirmModal({title:"Delete Jotform",centered:!0,children:w.jsxs(we,{size:"sm",children:["Are you sure you want to delete the form"," ",w.jsxs(we,{span:!0,fw:700,children:['"',g.jotformName,'"']}),"? This action is permanent and cannot be undone."]}),labels:{confirm:"Delete Jotform",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:()=>l(g)})},f=()=>{o(-1)},p=t.map(g=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:g.jotformName}),w.jsx(Re.Td,{children:w.jsxs(Ge,{gap:"sm",children:[w.jsx(qo,{label:"Edit Form",children:w.jsx(Rn,{variant:"subtle",color:"blue",onClick:()=>u(g.id),children:w.jsx(C0,{size:16})})}),w.jsx(qo,{label:"Delete Form",children:w.jsx(Rn,{variant:"subtle",color:"red",onClick:()=>d(g),children:w.jsx(Lp,{size:16})})})]})})]},g.id)),m=()=>{i(!1),s()};return w.jsxs(rn,{size:"lg",py:"xl",children:[w.jsxs(Ge,{justify:"space-between",mb:"xl",children:[w.jsx(jt,{order:2,children:"Jotform Management"}),w.jsx(Ve,{variant:"light",color:"blue",size:"sm",leftIcon:w.jsx(gs,{size:16}),onClick:f,children:"Back"}),w.jsx(Ve,{onClick:()=>i(!0),children:"Create Jotform"})]}),n?w.jsx(Io,{children:w.jsx(Jo,{})}):w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Jotform Name"}),w.jsx(Re.Th,{children:"Actions"})]})}),w.jsx(Re.Tbody,{children:p.length>0?p:w.jsx(Re.Tr,{children:w.jsx(Re.Td,{colSpan:2,children:w.jsx(we,{c:"dimmed",ta:"center",children:"No Jotforms found."})})})})]}),w.jsx(kr,{opened:a,onClose:()=>i(!1),title:"Create New Jotform",centered:!0,children:w.jsx(jP,{onSuccess:m})})]})}function aae(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),[o,a]=A.useState(!1),i=Gr(),s=async()=>{r(!0);try{const m=await lt.get(" http://localhost:8081/api/user-mappings",{withCredentials:!0});e(m.data)}catch(m){console.error("Error fetching user mappings:",m),e([])}finally{r(!1)}};A.useEffect(()=>{s()},[]);const u=()=>{i(-1)},l=()=>{a(!1),s()},d=async m=>{try{await lt.delete(` http://localhost:8081/api/user-mappings/${m.id}`,{withCredentials:!0}),e(g=>g.filter(y=>y.id!==m.id))}catch(g){console.error(`Error deleting user ${m.email}:`,g)}},f=m=>{tP.openConfirmModal({title:"Delete User Mapping",centered:!0,children:w.jsxs(we,{size:"sm",children:["Are you sure you want to delete the mapping for"," ",w.jsx(we,{span:!0,fw:700,children:m.email}),"? This action cannot be undone."]}),labels:{confirm:"Delete Mapping",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:()=>d(m)})},p=t.map(m=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:m.email}),w.jsx(Re.Td,{children:m.groupName}),w.jsx(Re.Td,{children:w.jsxs(Ge,{gap:"xs",justify:"center",children:[w.jsx(qo,{label:"Edit Mapping",children:w.jsx(Rn,{variant:"subtle",color:"blue",children:w.jsx(C0,{size:18})})}),w.jsx(qo,{label:"Delete Mapping",children:w.jsx(Rn,{variant:"subtle",color:"red",onClick:()=>f(m),children:w.jsx(Lp,{size:18})})})]})})]},m.id));return w.jsxs(rn,{p:"lg",children:[w.jsx(kr,{opened:o,onClose:()=>a(!1),title:"Map New User to Group",centered:!0,children:w.jsx(BP,{onSuccess:l,onClose:()=>a(!1)})}),w.jsxs(Ge,{justify:"space-between",mb:"xl",children:[w.jsx(jt,{order:2,children:"User Management"}),w.jsx(Ve,{variant:"light",color:"blue",size:"sm",leftIcon:w.jsx(gs,{size:16}),onClick:u,children:"Back"}),w.jsx(Ve,{onClick:()=>a(!0),children:"Map User"})]}),n?w.jsx(we,{ta:"center",c:"dimmed",children:"Loading users..."}):w.jsxs(Re,{withTableBorder:!0,withColumnBorders:!0,highlightOnHover:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"User Email"}),w.jsx(Re.Th,{children:"Group"}),w.jsx(Re.Th,{ta:"center",children:"Actions"})]})}),w.jsx(Re.Tbody,{children:p.length>0?p:w.jsx(Re.Tr,{children:w.jsx(Re.Td,{colSpan:3,children:w.jsx(we,{c:"dimmed",ta:"center",children:"No users found."})})})})]})]})}function iae(){const[t,e]=A.useState([]),[n,r]=A.useState(!1),o=Gr();A.useEffect(()=>{(async()=>{r(!0);try{const u=await lt.get("http://localhost:8081/api/results",{withCredentials:!0});e(u.data)}catch(u){console.error("Error fetching results:",u),e([])}finally{r(!1)}})()},[]);const a=s=>{o(`/user-results/${s.id}`,{state:{courseName:s.courseName}})},i=()=>{o(-1)};return w.jsxs(rn,{size:"lg",py:"xl",children:[w.jsxs(Ge,{justify:"space-between",mb:"xl",children:[w.jsx(jt,{order:2,children:"Result Management"}),w.jsxs(Ge,{children:[w.jsx(Ve,{variant:"light",color:"blue",size:"sm",leftIcon:w.jsx(gs,{size:16}),onClick:i,children:"Back"}),w.jsx(Ve,{variant:"light",color:"grape",size:"sm",leftIcon:w.jsx(g2,{size:16}),onClick:()=>o("/subjectmanagement"),children:"Create Subject"})]})]}),n?w.jsx(we,{ta:"center",c:"dimmed",children:"Loading results..."}):t.length>0?w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Course Name"}),w.jsx(Re.Th,{children:"Average Score"})]})}),w.jsx(Re.Tbody,{children:t.map(s=>w.jsxs(Re.Tr,{onClick:()=>a(s),style:{cursor:"pointer"},children:[w.jsx(Re.Td,{children:s.courseName}),w.jsxs(Re.Td,{children:[s.averageScore.toFixed(2),"%"]})]},s.id))})]}):w.jsx(we,{ta:"center",c:"dimmed",children:"No results available."})]})}function sae(){const{courseId:t}=_C(),e=Xa(),n=Gr(),{courseName:r}=e.state||{courseName:"Course"},[o,a]=A.useState([]),[i,s]=A.useState(!1);A.useEffect(()=>{t&&(async()=>{s(!0);try{const d=await lt.get(`http://localhost:8081/api/results/course/${t}`,{withCredentials:!0});a(d.data)}catch(d){console.error(`Error fetching user results for course ${t}:`,d),a([])}finally{s(!1)}})()},[t]);const u=l=>{n(`/assignment-review/${t}/${l.userId}`,{state:{username:l.username}})};return w.jsxs(rn,{size:"lg",py:"xl",children:[w.jsxs(jt,{order:2,mb:"xl",children:[r," - User Results"]}),i?w.jsx(we,{ta:"center",c:"dimmed",children:"Loading user results..."}):o.length>0?w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Username"}),w.jsx(Re.Th,{children:"Average Score"}),w.jsx(Re.Th,{children:"Actions"})]})}),w.jsx(Re.Tbody,{children:o.map(l=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:l.username}),w.jsxs(Re.Td,{children:[l.score.toFixed(2),"%"]}),w.jsx(Re.Td,{children:w.jsx(Ve,{variant:"outline",size:"xs",onClick:()=>u(l),children:"View Details"})})]},`${t}-${l.userId}`))})]}):w.jsx(we,{ta:"center",c:"dimmed",children:"No user results found for this course."})]})}function uae(){const{courseId:t,userId:e}=_C(),n=Xa(),{username:r}=n.state||{username:"User"},[o,a]=A.useState([]),[i,s]=A.useState(!1);A.useEffect(()=>{t&&e&&(async()=>{s(!0);try{const y=(await lt.get(`http://localhost:8081/api/results/submissions/${t}/${e}`,{withCredentials:!0})).data.map(b=>({...b,editing:!1,tempScore:b.finalScore}));a(y)}catch(g){console.error("Error fetching assignment details:",g),a([])}finally{s(!1)}})()},[t,e]);const u=m=>{a(o.map(g=>g.id===m?{...g,editing:!g.editing,tempScore:g.finalScore}:g))},l=(m,g)=>{a(o.map(y=>y.id===m?{...y,tempScore:g}:y))},d=async m=>{const g=o.find(y=>y.id===m);if(g)try{await lt.put(`http://localhost:8081/api/results/answer/${m}`,{finalScore:g.tempScore},{withCredentials:!0}),a(o.map(y=>y.id===m?{...y,finalScore:g.tempScore,editing:!1}:y))}catch(y){console.error("Error updating score:",y)}},f=o.reduce((m,g)=>m+g.finalScore,0),p=o.length>0?f/o.length:0;return w.jsxs(rn,{size:"xl",py:"xl",children:[w.jsx(Ge,{justify:"space-between",mb:"xl",children:w.jsxs(jt,{order:3,children:["Assignment Review for: ",r]})}),i?w.jsx(we,{children:"Loading assignment details..."}):w.jsxs(Re,{withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Question"}),w.jsx(Re.Th,{children:"User Answer (Transcript)"}),w.jsx(Re.Th,{children:"Video"}),w.jsx(Re.Th,{children:"AI Score"}),w.jsx(Re.Th,{children:"Final Score"}),w.jsx(Re.Th,{children:"Actions"})]})}),w.jsx(Re.Tbody,{children:o.map(m=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:m.question}),w.jsx(Re.Td,{children:m.userAnswer}),w.jsx(Re.Td,{children:w.jsx("a",{href:m.contentLink,target:"_blank",rel:"noopener noreferrer",children:"View Video"})}),w.jsx(Re.Td,{children:m.gptScore}),w.jsx(Re.Td,{children:m.editing?w.jsx(Cd,{value:m.tempScore,onChange:g=>l(m.id,g),min:0,max:100,size:"xs",style:{width:80}}):m.finalScore.toFixed(2)}),w.jsx(Re.Td,{children:m.editing?w.jsx(Rn,{variant:"subtle",color:"green",onClick:()=>d(m.id),children:w.jsx(eY,{size:18})}):w.jsx(Rn,{variant:"subtle",color:"blue",onClick:()=>u(m.id),children:w.jsx(C0,{size:18})})})]},m.id))}),w.jsx(Re.Tfoot,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{colSpan:4,style:{textAlign:"right",fontWeight:"bold"},children:"Average Final Score"}),w.jsxs(Re.Td,{style:{fontWeight:"bold"},children:[p.toFixed(2),"%"]}),w.jsx(Re.Td,{})]})})]})]})}var Rg={exports:{}},lae=Rg.exports,mI;function cae(){return mI||(mI=1,(function(t,e){(function(r,o){t.exports=o(Ap())})(lae,function(n){return(function(r){var o={};function a(i){if(o[i])return o[i].exports;var s=o[i]={i,l:!1,exports:{}};return r[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=r,a.c=o,a.d=function(i,s,u){a.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:u})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,s){if(s&1&&(i=a(i)),s&8||s&4&&typeof i=="object"&&i&&i.__esModule)return i;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:i}),s&2&&typeof i!="string")for(var l in i)a.d(u,l,(function(d){return i[d]}).bind(null,l));return u},a.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(s,"a",s),s},a.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},a.p="",a(a.s="./src/react-webcam.tsx")})({"./src/react-webcam.tsx":(function(r,o,a){a.r(o);var i=a("react"),s=(function(){var p=function(m,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var C in b)b.hasOwnProperty(C)&&(y[C]=b[C])},p(m,g)};return function(m,g){p(m,g);function y(){this.constructor=m}m.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}})(),u=function(){return u=Object.assign||function(p){for(var m,g=1,y=arguments.length;g<y;g++){m=arguments[g];for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(p[b]=m[b])}return p},u.apply(this,arguments)},l=function(p,m){var g={};for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&m.indexOf(y)<0&&(g[y]=p[y]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,y=Object.getOwnPropertySymbols(p);b<y.length;b++)m.indexOf(y[b])<0&&Object.prototype.propertyIsEnumerable.call(p,y[b])&&(g[y[b]]=p[y[b]]);return g};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(m){var g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return g?new Promise(function(y,b){g.call(navigator,m,y,b)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function d(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var f=(function(p){s(m,p);function m(g){var y=p.call(this,g)||this;return y.canvas=null,y.ctx=null,y.requestUserMediaId=0,y.unmounted=!1,y.state={hasUserMedia:!1},y}return m.prototype.componentDidMount=function(){var g=this,y=g.state,b=g.props;if(this.unmounted=!1,!d()){b.onUserMediaError("getUserMedia not supported");return}y.hasUserMedia||this.requestUserMedia(),b.children&&typeof b.children!="function"&&console.warn("children must be a function")},m.prototype.componentDidUpdate=function(g){var y=this.props;if(!d()){y.onUserMediaError("getUserMedia not supported");return}var b=JSON.stringify(g.audioConstraints)!==JSON.stringify(y.audioConstraints),C=JSON.stringify(g.videoConstraints)!==JSON.stringify(y.videoConstraints),S=g.minScreenshotWidth!==y.minScreenshotWidth,E=g.minScreenshotHeight!==y.minScreenshotHeight;(C||S||E)&&(this.canvas=null,this.ctx=null),(b||C)&&(this.stopAndCleanup(),this.requestUserMedia())},m.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},m.stopMediaStream=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().map(function(y){g.removeTrack(y),y.stop()}),g.getAudioTracks().map(function(y){g.removeTrack(y),y.stop()})):g.stop())},m.prototype.stopAndCleanup=function(){var g=this.state;g.hasUserMedia&&(m.stopMediaStream(this.stream),g.src&&window.URL.revokeObjectURL(g.src))},m.prototype.getScreenshot=function(g){var y=this,b=y.state,C=y.props;if(!b.hasUserMedia)return null;var S=this.getCanvas(g);return S&&S.toDataURL(C.screenshotFormat,C.screenshotQuality)},m.prototype.getCanvas=function(g){var y=this,b=y.state,C=y.props;if(!this.video||!b.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var S=this.video.videoWidth,E=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var _=S/E;S=C.minScreenshotWidth||this.video.clientWidth,E=S/_,C.minScreenshotHeight&&E<C.minScreenshotHeight&&(E=C.minScreenshotHeight,S=E*_)}this.canvas=document.createElement("canvas"),this.canvas.width=g?.width||S,this.canvas.height=g?.height||E,this.ctx=this.canvas.getContext("2d")}var T=this,D=T.ctx,I=T.canvas;return D&&I&&(I.width=g?.width||I.width,I.height=g?.height||I.height,C.mirrored&&(D.translate(I.width,0),D.scale(-1,1)),D.imageSmoothingEnabled=C.imageSmoothing,D.drawImage(this.video,0,0,g?.width||I.width,g?.height||I.height),C.mirrored&&(D.scale(-1,1),D.translate(-I.width,0))),I},m.prototype.requestUserMedia=function(){var g=this,y=this.props,b=function(E,_){var T={video:typeof _<"u"?_:!0};y.audio&&(T.audio=typeof E<"u"?E:!0),g.requestUserMediaId++;var D=g.requestUserMediaId;navigator.mediaDevices.getUserMedia(T).then(function(I){g.unmounted||D!==g.requestUserMediaId?m.stopMediaStream(I):g.handleUserMedia(null,I)}).catch(function(I){g.handleUserMedia(I)})};if("mediaDevices"in navigator)b(y.audioConstraints,y.videoConstraints);else{var C=function(E){return{optional:[{sourceId:E}]}},S=function(E){var _=E.deviceId;return typeof _=="string"?_:Array.isArray(_)&&_.length>0?_[0]:typeof _=="object"&&_.ideal?_.ideal:null};MediaStreamTrack.getSources(function(E){var _=null,T=null;E.forEach(function(k){k.kind==="audio"?_=k.id:k.kind==="video"&&(T=k.id)});var D=S(y.audioConstraints);D&&(_=D);var I=S(y.videoConstraints);I&&(T=I),b(C(_),C(T))})}},m.prototype.handleUserMedia=function(g,y){var b=this.props;if(g||!y){this.setState({hasUserMedia:!1}),b.onUserMediaError(g);return}this.stream=y;try{this.video&&(this.video.srcObject=y),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(y)})}b.onUserMedia(y)},m.prototype.render=function(){var g=this,y=this,b=y.state,C=y.props,S=C.audio;C.forceScreenshotSourceSize;var E=C.disablePictureInPicture;C.onUserMedia,C.onUserMediaError,C.screenshotFormat,C.screenshotQuality,C.minScreenshotWidth,C.minScreenshotHeight,C.audioConstraints,C.videoConstraints,C.imageSmoothing;var _=C.mirrored,T=C.style,D=T===void 0?{}:T,I=C.children,k=l(C,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),M=_?u(u({},D),{transform:(D.transform||"")+" scaleX(-1)"}):D,O={getScreenshot:this.getScreenshot.bind(this)};return i.createElement(i.Fragment,null,i.createElement("video",u({autoPlay:!0,disablePictureInPicture:E,src:b.src,muted:!S,playsInline:!0,ref:function(F){g.video=F},style:M},k)),I&&I(O))},m.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},m})(i.Component);o.default=f}),react:(function(r,o){r.exports=n})}).default})})(Rg)),Rg.exports}var dae=cae();const $v=tf(dae);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F2=function(t,e){return F2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},F2(t,e)};function At(t,e){F2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ys=function(){return ys=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ys.apply(this,arguments)};function xt(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function s(d){try{l(r.next(d))}catch(f){i(f)}}function u(d){try{l(r.throw(d))}catch(f){i(f)}}function l(d){d.done?a(d.value):o(d.value).then(s,u)}l((r=r.apply(t,[])).next())})}function wt(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(d){return u([l,d])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=l[0]&2?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(d){l=[6,d],o=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var tB=function(t,e){return(tB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(t,e)};function As(t,e){function n(){this.constructor=t}tB(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function pn(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(l){try{u(r.next(l))}catch(d){a(d)}}function s(l){try{u(r.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):new n(function(d){d(l.value)}).then(i,s)}u((r=r.apply(t,[])).next())})}function mn(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return(function(d){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&d[0]?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(f){d=[6,f],r=0}finally{n=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([u,l])}}}var Sl={},rw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function fae(t,e){Sl[t]=e}function Mi(t){t in Sl||(Sl[t]=hae(t));var e=Sl[t];return e.isContextLost()?(delete Sl[t],Mi(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Sl[t])}function hae(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=document.createElement("canvas");return e.addEventListener("webglcontextlost",function(n){n.preventDefault(),delete Sl[t]},!1),t===1?e.getContext("webgl",rw)||e.getContext("experimental-webgl",rw):e.getContext("webgl2",rw)}function pae(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}function B2(t,e,n){return Math.max(t,Math.min(e,n))}function Vd(t){return t%2==0?t:t+1}function mae(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function vae(t,e){var n=Math.random();return e*n+(1-n)*t}function ee(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function vn(t,e,n){n===void 0&&(n=""),ee(no(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function Sf(t){ee(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Hd(t,e){if(e===void 0&&(e=[]),e==null&&(e=[]),Array.isArray(t)||Cs(t))for(var n=0;n<t.length;++n)Hd(t[n],e);else e.push(t);return e}function ft(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function no(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ca(t){return t%1==0}function gae(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function vI(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Sd(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function gI(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,o){var a=0,i=function(){if(t())r();else{var s=e(++a);n!=null&&a>=n?o():setTimeout(i,s)}};i()})}function yae(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function Ir(t,e){var n=e.length;return ee((t=t==null?e.map(function(r,o){return o}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),ee(t.every(function(r){return Ca(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function Ql(t,e){for(var n=[],r=[],o=e==null?null:Ir(e,t).sort(),a=0,i=0;i<t.length;++i){if(o!=null){if(o[a]===i&&t[i]!==1)throw new Error("Can't squeeze axis "+i+" since its dim '"+t[i]+"' is not 1");(o[a]==null||o[a]>i)&&t[i]===1&&(n.push(t[i]),r.push(i)),o[a]<=i&&a++}t[i]!==1&&(n.push(t[i]),r.push(i))}return{newShape:n,keptDims:r}}function L2(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function Qg(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function bae(t,e,n){if(e==="float32")for(var r=0;r<t.length;r++){var o=t[r];if(isNaN(o)||!isFinite(o))throw Error("The result of the '"+n+"' is "+o+".")}}function xae(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function wae(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function Cs(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function nB(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function Cae(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=2*n.length}),e}function rB(t){return typeof t=="string"||t instanceof String}function Sae(t){return typeof t=="boolean"}function Eae(t){return typeof t=="number"}function $p(t){return Array.isArray(t)?$p(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Eae(t)?"float32":rB(t)?"string":Sae(t)?"bool":"float32"}function j2(t){return!!(t&&t.constructor&&t.call&&t.apply)}function z2(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Jl(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function oB(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Hd(t)),n&&xae(t,e),Rae(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)Math.round(t[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function aB(t,e,n){var r=new Array;if(e.length===1)for(var o=e[0],a=0;a<o;a++)r[a]=n[t+a];else{o=e[0];var i=e.slice(1),s=i.reduce(function(u,l){return u*l});for(a=0;a<o;a++)r[a]=aB(t+a*s,i,n)}return r}function yI(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,o){return r*o});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return aB(0,t,e)}function Rae(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function iB(t,e){for(var n=qp(t,e),r=0;r<n.length;r++)n[r]=1;return n}function qp(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function Jg(){if(typeof performance<"u")return performance.now();if(typeof process<"u"){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}function sB(t){t.forEach(function(e){ee(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}var _ae=(function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Tae)}return t.prototype.profileKernel=function(e,n){var r,o=this,a=this.backendTimer.time(function(){r=n()});return(Array.isArray(r)?r:[r]).forEach(function(i){var s=i.dataSync();bae(s,i.dtype,e),a.then(function(u){var l="";u.getExtraProfileInfo!=null&&(l=u.getExtraProfileInfo()),o.logger.logKernelProfile(e,i,s,u.kernelMs,l)})}),r},t})(),Tae=(function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,o,a){var i=Sd(o+"ms",9),s=Sd(e,25),u=n.rank,l=n.size,d=Sd(n.shape.toString(),14);console.log("%c"+s+"	%c"+i+"	%c"+u+"D "+d+"	%c"+l+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green")},t})(),bI=20,jh=3,ow=7;function Aae(t,e,n,r){var o=Jl(e),a=Nae(t,e,n,o),i=e.length,s=_g(t,e,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function Nae(t,e,n,r){var o=ft(e),a=r[r.length-1],i=new Array(a).fill(0),s=e.length,u=n==="complex64"?qh(t):t;if(s>1)for(var l=0;l<o/a;l++)for(var d=l*a,f=0;f<a;f++)i[f]=Math.max(i[f],$h(u[d+f],0,n).length);return i}function $h(t,e,n){return Sd(Array.isArray(t)?parseFloat(t[0].toFixed(ow))+" + "+parseFloat(t[1].toFixed(ow))+"j":rB(t)?"'"+t+"'":n==="bool"?uB(t):parseFloat(t.toFixed(ow)).toString(),e)}function uB(t){return t===0?"false":"true"}function _g(t,e,n,r,o,a){a===void 0&&(a=!0);var i=n==="complex64"?2:1,s=e[0],u=e.length;if(u===0)return n==="complex64"?[$h(qh(t)[0],0,n)]:n==="bool"?[uB(t[0])]:[t[0].toString()];if(u===1){if(s>bI){var l=jh*i,d=Array.from(t.slice(0,l)),f=Array.from(t.slice(s-jh*i,s));return n==="complex64"&&(d=qh(d),f=qh(f)),["["+d.map(function(T,D){return $h(T,o[D],n)}).join(", ")+", ..., "+f.map(function(T,D){return $h(T,o[s-jh+D],n)}).join(", ")+"]"]}return["["+(n==="complex64"?qh(t):Array.from(t)).map(function(T,D){return $h(T,o[D],n)}).join(", ")+"]"]}var p=e.slice(1),m=r.slice(1),g=r[0]*i,y=[];if(s>bI){for(var b=0;b<jh;b++){var C=(S=b*g)+g;y.push.apply(y,_g(t.slice(S,C),p,n,m,o,!1))}for(y.push("..."),b=s-jh;b<s;b++)C=(S=b*g)+g,y.push.apply(y,_g(t.slice(S,C),p,n,m,o,b===s-1))}else for(b=0;b<s;b++){var S;C=(S=b*g)+g,y.push.apply(y,_g(t.slice(S,C),p,n,m,o,b===s-1))}var E=u===2?",":"";for(y[0]="["+y[0]+E,b=1;b<y.length-1;b++)y[b]=" "+y[b]+E;var _=`,
`;for(b=2;b<u;b++)_+=`
`;return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":_),y}function qh(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var xp=(function(){function t(e,n,r){var o=this;if(this.dtype=n,this.shape=e.slice(),this.size=ft(e),r!=null){var a=r.length;ee(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Qg(n,this.size),this.strides=Jl(e)}return t.prototype.set=function(e){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),ee(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var a=this.locToIndex(r);this.values[a]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,o=0,a=e;o<a.length;o++){var i=a[o];if(i<0||i>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return We.make(this.shape,{values:this.values},this.dtype)},t})(),fa=null,xe=null,lB=null;function Dae(t){fa=t}function kae(t){xe=t}function Iae(t){lB=t}var We=(function(){function t(e,n,r,o,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ft(e),this.strides=Jl(e),this.dataId=o??{},this.id=fa().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",fa().registerTensor(this,a),r!=null&&fa().write(this.dataId,r)}return t.make=function(e,n,r,o){return new t(e,r,n.values,n.dataId,o)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),ee(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,o){return this.throwIfDisposed(),this.reshape([e,n,r,o])},t.prototype.as5D=function(e,n,r,o,a){return this.throwIfDisposed(),this.reshape([e,n,r,o,a])},t.prototype.asType=function(e){return this.throwIfDisposed(),xe.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return pn(this,void 0,void 0,function(){var e;return mn(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,xe.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return xe.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return pn(this,void 0,void 0,function(){var e;return mn(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,yI(this.shape,e)]}})})},t.prototype.arraySync=function(){return yI(this.shape,this.dataSync())},t.prototype.data=function(){return pn(this,void 0,void 0,function(){return mn(this,function(e){return this.throwIfDisposed(),[2,fa().read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),fa().readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||(fa().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),xe.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),xe.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),xe.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),xe.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),xe.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),xe.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),xe.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),Aae(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),xe.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),xe.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),xe.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),xe.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),xe.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),xe.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),xe.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),xe.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),xe.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),xe.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),xe.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),xe.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,o,a){return r===void 0&&(r=.001),lB("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,a,o,r)},t.prototype.batchNorm=function(e,n,r,o,a){return a===void 0&&(a=.001),this.throwIfDisposed(),xe.batchNorm(this,e,n,r,o,a)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),xe.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),xe.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),xe.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),xe.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),xe.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),xe.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),xe.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),xe.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),xe.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),xe.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),xe.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),xe.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),xe.div(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),xe.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),xe.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),xe.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),xe.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),xe.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),xe.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),xe.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),xe.modStrict(this,e)},t.prototype.squaredDifference=function(e){return this.throwIfDisposed(),xe.squaredDifference(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),xe.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),xe.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),xe.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),xe.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),xe.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),xe.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),xe.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),xe.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),xe.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),xe.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),xe.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),xe.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),xe.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),xe.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),xe.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),xe.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),xe.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),xe.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),xe.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),xe.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),xe.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),xe.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),xe.sign(this)},t.prototype.exp=function(){return this.throwIfDisposed(),xe.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),xe.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),xe.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),xe.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),xe.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),xe.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),xe.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),xe.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),xe.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),xe.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),xe.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),xe.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),xe.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),xe.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),xe.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),xe.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),xe.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),xe.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),xe.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),xe.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),xe.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),xe.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),xe.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),xe.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),xe.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),xe.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),xe.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),xe.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),xe.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),xe.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),xe.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),xe.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),xe.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),xe.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),xe.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),xe.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),xe.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),xe.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),xe.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,o,a,i){return o===void 0&&(o="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),xe.conv1d(this,e,n,r,o,a,i)},t.prototype.conv2d=function(e,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),xe.conv2d(this,e,n,r,o,a,i)},t.prototype.conv2dTranspose=function(e,n,r,o,a){return this.throwIfDisposed(),xe.conv2dTranspose(this,e,n,r,o,a)},t.prototype.depthwiseConv2D=function(e,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),xe.depthwiseConv2d(this,e,n,r,o,a,i)},t.prototype.separableConv2d=function(e,n,r,o,a,i){return a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),xe.separableConv2d(this,e,n,r,o,a,i)},t.prototype.avgPool=function(e,n,r,o){return this.throwIfDisposed(),xe.avgPool(this,e,n,r,o)},t.prototype.maxPool=function(e,n,r,o){return this.throwIfDisposed(),xe.maxPool(this,e,n,r,o)},t.prototype.localResponseNormalization=function(e,n,r,o){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),xe.localResponseNormalization(this,e,n,r,o)},t.prototype.pool=function(e,n,r,o,a){return this.throwIfDisposed(),xe.pool(this,e,n,r,o,a)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Xp.variable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),xe.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),xe.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),xe.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),xe.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,o,a,i,s,u){return o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),xe.stridedSlice(this,e,n,r,o,a,i,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),xe.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),xe.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),xe.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),xe.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),xe.spectral.irfft(this)},t})();Object.defineProperty(We,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var Xp=(function(t){function e(n,r,o){r===void 0&&(r=!0);var a=t.call(this,n.shape,n.dtype,null,n.dataId)||this;a.trainable=r,a.name=o,a.name==null&&(a.name=fa().nextVariableId().toString());try{fa().registerVariable(a)}catch(i){throw fa().disposeTensor(a),i}return a}return As(e,t),e.variable=function(n,r,o,a){return r===void 0&&(r=!0),a!=null&&a!==n.dtype&&(n=n.asType(a)),new e(n,r,o)},e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!no(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");fa().disposeTensor(this),this.dataId=n.dataId,fa().registerTensor(this)},e})(We);Object.defineProperty(Xp,Symbol.hasInstance,{value:function(t){return t instanceof We&&t.assign!=null&&t.assign instanceof Function}});var xI,U2,W2,V2,H2;Xp.variable;function Mae(t,e,n){for(var r={},o={},a=0;a<e.length;a++)r[e[a].id]=!0;for(a=0;a<t.length;a++){var i=(g=t[a]).inputs;for(var s in i){for(var u=i[s],l=!1,d=0;d<e.length;d++)if(r[u.id]){g.outputs.forEach(function(S){return r[S.id]=!0}),l=!0,o[g.id]=!0;break}if(l)break}}var f={};f[n.id]=!0;var p={};for(a=t.length-1;a>=0;a--)for(i=(g=t[a]).inputs,d=0;d<g.outputs.length;d++)if(f[g.outputs[d].id]){for(var s in i)f[i[s].id]=!0,p[g.id]=!0;break}var m=[];for(a=0;a<t.length;a++){var g;if(o[(g=t[a]).id]&&p[g.id]){var y={};for(var s in g.inputs){var b=g.inputs[s];r[b.id]&&(y[s]=b)}var C=Object.assign({},g);C.inputs=y,C.outputs=g.outputs,m.push(C)}}return m}function Oae(t,e,n){for(var r=function(a){var i=e[a],s=[];if(i.outputs.forEach(function(f){var p=t[f.id];if(p!=null)s.push(p);else{var m=We.make(f.shape,{values:qp(f.size,f.dtype)},f.dtype);s.push(m)}}),i.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+i.name+".");var u=i.gradient(i.outputs.length===1?s[0]:s),l=function(f){if(!(f in u))throw new Error("Cannot backprop through input "+f+". Available gradients found: "+Object.keys(u)+".");var p=n(function(){return u[f]()});if(p.dtype!=="float32")throw new Error("Error in gradient for op "+i.name+". The gradient of input "+f+" must have 'float32' dtype, but has '"+p.dtype+"'");var m=i.inputs[f];if(!no(p.shape,m.shape))throw new Error("Error in gradient for op "+i.name+". The gradient of input '"+f+"' has shape '"+p.shape+"', which does not match the shape of the input '"+m.shape+"'");if(t[m.id]==null)t[m.id]=p;else{var g=t[m.id];t[m.id]=g.add(p),g.dispose()}};for(var d in i.inputs)l(d)},o=e.length-1;o>=0;o--)r(o)}(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(xI||(xI={})),(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(U2||(U2={})),(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(W2||(W2={})),(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(V2||(V2={})),(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(H2||(H2={}));var Pae={float32:V2,int32:U2,bool:W2,complex64:H2};function vr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return Pae[t][e]}function aw(t){return vr(t,"int32")}function cr(t,e){if(t.dtype===e.dtype)return[t,e];var n=vr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Fae(t,e){ee(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function cB(t){var e=[];return dB(t,e,new Set),e}function dB(t,e,n){if(t!=null){if(t instanceof We)e.push(t);else if(Bae(t)){var r=t;for(var o in r){var a=r[o];n.has(a)||(n.add(a),dB(a,e,n))}}}}function Bae(t){return Array.isArray(t)||typeof t=="object"}var qt,Lae=(function(){function t(e,n,r){this.backend=e,this.safeMode=n,this.debugMode=r,this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.profiling=!1,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiler=new _ae(e),this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.moveData=function(e){this.write(e,this.readSync(e))},t.prototype.tidy=function(e,n){var r,o=this,a=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(function(){return o.startScope(a)},function(){return o.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var o=r();return n(),o}catch(a){throw n(),a}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=We.make(e.shape,{dataId:e.dataId},e.dtype);return this.addTapeNode([e],n,function(r){return[r.toFloat()]}),n},t.prototype.runKernel=function(e,n,r){var o,a=this,i=[],s=this.isTapeOn(),u=this.activeScope!=null?this.activeScope.name:"",l=function(m){s&&(i=m.map(function(g){return a.keep(a.clone(g))}))},d=this.numBytes,f=this.numTensors;if(this.scopedRun(function(){return a.kernelDepth++},function(){return a.kernelDepth--},function(){o=a.debugMode()?a.profiler.profileKernel(u,function(){return e(a.backend,l)}):e(a.backend,l)}),s){var p={id:this.nextTapeNodeId++,name:u,inputs:n,outputs:Array.isArray(o)?o:[o],saved:i};r!=null&&(p.gradient=function(m){return r(m,i)}),this.activeTape.push(p)}return this.profiling&&this.activeProfile.kernels.push({name:u,bytesAdded:this.numBytes-d,totalBytesSnapshot:this.numBytes,tensorsAdded:this.numTensors-f,totalTensorsSnapshot:this.numTensors,inputShapes:Object.keys(n).map(function(m){return n[m].shape}),outputShape:Array.isArray(o)?o.map(function(m){return m.shape}):o.shape}),o},t.prototype.registerTensor=function(e,n){var r=this.tensorInfo.has(e.dataId)?this.tensorInfo.get(e.dataId).refCount:0;if(this.numTensors++,e.dtype==="string"&&this.numStringTensors++,r===0){this.numDataBuffers++;var o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*nB(e.dtype)),this.tensorInfo.set(e.dataId,{backend:n??this.backend,dtype:e.dtype,shape:e.shape,bytes:o,refCount:0}),this.numBytes+=o,n!=null?n.register(e.dataId,e.shape,e.dtype):this.backend.register(e.dataId,e.shape,e.dtype)}this.tensorInfo.get(e.dataId).refCount++,e instanceof Xp||this.track(e)},t.prototype.registerVariable=function(e){if(this.registeredVariables[e.name]!=null)throw new Error("Variable with name "+e.name+" was already registered");this.registeredVariables[e.name]=e},t.prototype.disposeTensor=function(e){if(this.tensorInfo.has(e.dataId)){this.numTensors--,e.dtype==="string"&&this.numStringTensors--;var n=this.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.numBytes-=n.bytes),this.numDataBuffers--,n.backend.disposeData(e.dataId),this.tensorInfo.delete(e.dataId)):this.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.registeredVariables){var n=this.registeredVariables[e];this.disposeTensor(n),delete this.registeredVariables[e]}},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.numTensors,e.numDataBuffers=this.numDataBuffers,e.numBytes=this.numBytes,this.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return pn(this,void 0,void 0,function(){var n,r;return mn(this,function(o){return this.profiling=!0,n=this.numBytes,r=this.numTensors,this.activeProfile.kernels=[],this.activeProfile.result=e(),this.profiling=!1,this.activeProfile.peakBytes=Math.max.apply(Math,this.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.activeProfile.newBytes=this.numBytes-n,this.activeProfile.newTensors=this.numTensors-r,[2,this.activeProfile]})})},t.prototype.isTapeOn=function(){return this.gradientDepth>0&&this.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r){var o={};e.forEach(function(i,s){o[s]=i});var a={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:o,outputs:[n],gradient:function(i){var s={};return r(i).forEach(function(u,l){s[l]=function(){return u}}),s}};this.activeTape.push(a)},t.prototype.keep=function(e){if(this.scopeStack.length===1&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return e.kept=!0,e},t.prototype.startTape=function(){this.gradientDepth===0&&(this.activeTape=[]),this.gradientDepth++},t.prototype.endTape=function(){this.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.nextScopeId++};e&&(n.name=e),this.scopeStack.push(n),this.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=cB(e),o=new Set(r.map(function(u){return u.id})),a=0;a<this.activeScope.track.length;a++){var i=this.activeScope.track[a];i.kept||o.has(i.id)||i.dispose()}var s=this.scopeStack.pop();this.activeScope=this.scopeStack.length===0?null:this.scopeStack[this.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},t.prototype.gradients=function(e,n,r,o){var a=this;if(o===void 0&&(o=!1),ee(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",e)});ee(i instanceof We,function(){return"The result y returned by f() must be a tensor."});var s=Mae(this.activeTape,n,i);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u={};u[i.id]=r??jae(i.shape),Oae(u,s,function(d){return a.tidy(d)});var l=n.map(function(d){return u[d.id]});return a.gradientDepth===0&&(a.activeTape.forEach(function(d){for(var f in d.saved)d.saved[f].dispose()}),a.activeTape=null),{value:i,grads:l}})},t.prototype.customGrad=function(e){var n=this;return ee(j2(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];ee(o.every(function(s){return s instanceof We}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i={};return o.forEach(function(s,u){i[u]=s}),n.runKernel(function(s,u){return ee((r=e.apply(void 0,o.concat([u]))).value instanceof We,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ee(j2(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},i,function(s,u){var l=r.gradFunc(s,u),d=Array.isArray(l)?l:[l];ee(d.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ee(d.every(function(p){return p instanceof We}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return d.forEach(function(p,m){f[m]=function(){return p}}),f})}},t.prototype.write=function(e,n){var r=this.tensorInfo.get(e);if(r.dtype==="string"){var o=Cae(n);this.numBytes+=o-r.bytes,r.bytes=o}this.backend!==r.backend&&(r.backend.disposeData(e),r.backend=this.backend,this.backend.register(e,r.shape,r.dtype)),this.backend.write(e,n)},t.prototype.readSync=function(e){return this.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.tensorInfo.get(e).backend.read(e)},t.prototype.fromPixels=function(e,n){return this.backend.fromPixels(e,n)},t.prototype.time=function(e){return pn(this,void 0,void 0,function(){var n,r;return mn(this,function(o){switch(o.label){case 0:return n=Jg(),[4,this.backend.time(e)];case 1:return(r=o.sent()).wallMs=Jg()-n,[2,r]}})})},t.prototype.track=function(e){if(this.scopeStack.length===1&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope!=null&&(e.scopeId=this.activeScope.id,this.activeScope.track.push(e)),e},t.nextTensorId=0,t.nextVariableId=0,t})();function jae(t){var e=iB(ft(t),"float32");return We.make(t,{values:e})}(function(t){t[t.NUMBER=0]="NUMBER",t[t.BOOLEAN=1]="BOOLEAN",t[t.STRING=2]="STRING"})(qt||(qt={}));var iw,sw,zae=[{name:"DEBUG",type:qt.BOOLEAN},{name:"IS_BROWSER",type:qt.BOOLEAN},{name:"WEBGL_LAZILY_UNPACK",type:qt.BOOLEAN},{name:"WEBGL_CPU_FORWARD",type:qt.BOOLEAN},{name:"WEBGL_PACK",type:qt.BOOLEAN},{name:"WEBGL_PACK_BATCHNORMALIZATION",type:qt.BOOLEAN},{name:"WEBGL_PACK_CLIP",type:qt.BOOLEAN},{name:"WEBGL_PACK_DEPTHWISECONV",type:qt.BOOLEAN},{name:"WEBGL_PACK_BINARY_OPERATIONS",type:qt.BOOLEAN},{name:"WEBGL_PACK_ARRAY_OPERATIONS",type:qt.BOOLEAN},{name:"WEBGL_PACK_IMAGE_OPERATIONS",type:qt.BOOLEAN},{name:"WEBGL_PACK_REDUCE",type:qt.BOOLEAN},{name:"WEBGL_CONV_IM2COL",type:qt.BOOLEAN},{name:"WEBGL_MAX_TEXTURE_SIZE",type:qt.NUMBER},{name:"WEBGL_NUM_MB_BEFORE_PAGING",type:qt.NUMBER},{name:"WEBGL_MAX_TEXTURES_IN_SHADER",type:qt.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:qt.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:qt.BOOLEAN},{name:"WEBGL_VERSION",type:qt.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:qt.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:qt.BOOLEAN},{name:"WEBGL_FENCE_API_ENABLED",type:qt.BOOLEAN},{name:"WEBGL_SIZE_UPLOAD_UNIFORM",type:qt.NUMBER},{name:"BACKEND",type:qt.STRING},{name:"EPSILON",type:qt.NUMBER},{name:"PROD",type:qt.BOOLEAN},{name:"TENSORLIKE_CHECK_SHAPE_CONSISTENCY",type:qt.BOOLEAN},{name:"DEPRECATION_WARNINGS_ENABLED",type:qt.BOOLEAN}];function wI(t){try{if(Mi(t)!=null)return!0}catch{return!1}return!1}function Uae(t){if(iw==null){var e=Mi(t);iw=e.getParameter(e.MAX_TEXTURE_SIZE)}return iw}function Wae(t){if(sw==null){var e=Mi(t);sw=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,sw)}function Vae(t){if(t===0)return 0;var e=Mi(t);return Ol(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Ol(e,"EXT_disjoint_timer_query")?1:0}function Hae(t){if(t===0)return!1;var e=Mi(t);if(t===1){if(!Ol(e,"OES_texture_float"))return!1}else if(!Ol(e,"EXT_color_buffer_float"))return!1;return hB(e,t)}function Gae(t){if(t===0)return!1;var e=Mi(t);if(t===1){if(!Ol(e,"OES_texture_float")||!Ol(e,"WEBGL_color_buffer_float"))return!1}else if(!Ol(e,"EXT_color_buffer_float"))return!1;return hB(e,t)}function $ae(t){return t===2&&Mi(t).fenceSync!=null}function qae(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}var CI="tfjsflags";function fB(){var t={};if(typeof window>"u"||window.location===void 0||window.location.search===void 0)return t;var e=Xae(window.location.search);if(CI in e){var n={};e[CI].split(",").forEach(function(r){var o=r.split(":"),a=o[0],i=o[1];n[a]=i}),zae.forEach(function(r){r.name in n&&(console.log("Setting feature override from URL "+r.name+": "+n[r.name]),r.type===qt.NUMBER?t[r.name]=+n[r.name]:r.type===qt.BOOLEAN?t[r.name]=n[r.name]==="true":r.type===qt.STRING?t[r.name]=n[r.name]:console.warn("Unknown URL param: "+r.name+"."))})}return t}function Ol(t,e){return t.getExtension(e)!=null}function hB(t,e){var n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var o=e===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,o,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(n),a}function Xae(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Kae(e,r[0],r[1]),r.join("=")}),e}function Kae(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}var Yae=600;function Qae(){return window.screen.height*window.screen.width*window.devicePixelRatio*Yae/1024}var uw,Jae=1e-4,Zae=.1,eie=1e-7,tie=.001,Oi=(function(){function t(e){this.features={},this.registry={},this.registryFactory={},e!=null&&(this.features=e),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return t.setBackend=function(e,n){if(!(e in Q.registry))throw new Error("Backend name '"+e+"' not found in registry");Q.engine.backend=Q.findBackend(e),Q.backendName=e},t.getBackend=function(){return Q.initEngine(),Q.backendName},t.disposeVariables=function(){Q.engine.disposeVariables()},t.memory=function(){return Q.engine.memory()},t.profile=function(e){return Q.engine.profile(e)},t.tidy=function(e,n){return Q.engine.tidy(e,n)},t.dispose=function(e){cB(e).forEach(function(n){return n.dispose()})},t.keep=function(e){return Q.engine.keep(e)},t.time=function(e){return Q.engine.time(e)},t.prototype.get=function(e){return e in this.features?this.features[e]:(this.features[e]=this.evaluateFeature(e),this.features[e])},t.prototype.getFeatures=function(){return this.features},t.prototype.set=function(e,n){this.features[e]=n},t.prototype.getBestBackendName=function(){var e=this;if(Object.keys(this.registry).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registry).map(function(n){return{name:n,entry:e.registry[n]}}).sort(function(n,r){return r.entry.priority-n.entry.priority})[0].name},t.prototype.evaluateFeature=function(e){if(e==="DEBUG")return!1;if(e==="IS_BROWSER")return typeof window<"u";if(e==="IS_NODE")return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0;if(e==="IS_CHROME")return qae();if(e==="WEBGL_CPU_FORWARD")return!0;if(e==="WEBGL_PACK")return this.get("WEBGL_VERSION")!==0;if(e==="WEBGL_PACK_BATCHNORMALIZATION")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_CLIP")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_DEPTHWISECONV")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_BINARY_OPERATIONS")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_ARRAY_OPERATIONS")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_IMAGE_OPERATIONS")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_REDUCE")return this.get("WEBGL_PACK");if(e==="WEBGL_LAZILY_UNPACK")return this.get("WEBGL_PACK");if(e==="WEBGL_CONV_IM2COL")return this.get("WEBGL_PACK");if(e==="WEBGL_NUM_MB_BEFORE_PAGING")return this.get("PROD")||!this.get("IS_BROWSER")?Number.POSITIVE_INFINITY:Qae();if(e==="WEBGL_MAX_TEXTURE_SIZE")return Uae(this.get("WEBGL_VERSION"));if(e==="WEBGL_MAX_TEXTURES_IN_SHADER")return Wae(this.get("WEBGL_VERSION"));if(e==="IS_TEST")return!1;if(e==="BACKEND")return this.getBestBackendName();if(e==="WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"){var n=this.get("WEBGL_VERSION");return n===0?0:Vae(n)}if(e==="WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!pae();if(e==="HAS_WEBGL")return this.get("WEBGL_VERSION")>0;if(e==="WEBGL_VERSION")return wI(2)?2:wI(1)?1:0;if(e==="WEBGL_RENDER_FLOAT32_ENABLED")return Hae(this.get("WEBGL_VERSION"));if(e==="WEBGL_DOWNLOAD_FLOAT_ENABLED")return Gae(this.get("WEBGL_VERSION"));if(e==="WEBGL_FENCE_API_ENABLED")return $ae(this.get("WEBGL_VERSION"));if(e==="WEBGL_SIZE_UPLOAD_UNIFORM")return this.get("WEBGL_RENDER_FLOAT32_ENABLED")?4:0;if(e==="TEST_EPSILON")return this.backend.floatPrecision()===32?tie:Zae;if(e==="EPSILON")return this.backend.floatPrecision()===32?eie:Jae;if(e==="PROD")return!1;if(e==="TENSORLIKE_CHECK_SHAPE_CONSISTENCY")return!this.get("PROD");if(e==="DEPRECATION_WARNINGS_ENABLED")return!0;throw new Error("Unknown feature "+e+".")},t.prototype.setFeatures=function(e){this.features=Object.assign({},e)},t.prototype.reset=function(){this.features=fB(),this.globalEngine!=null&&(this.globalEngine=null)},Object.defineProperty(t.prototype,"backend",{get:function(){return this.engine.backend},enumerable:!0,configurable:!0}),t.prototype.findBackend=function(e){return e in this.registry?this.registry[e].backend:null},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e]:null},t.prototype.registerBackend=function(e,n,r){var o=this;if(r===void 0&&(r=1),e in this.registry)return console.warn(e+" backend was already registered. Reusing existing backend"),!1;try{var a=n();return a.setDataMover({moveData:function(i){return o.engine.moveData(i)}}),this.registry[e]={backend:a,priority:r},this.registryFactory[e]=n,!0}catch(i){return console.warn("Registration of backend "+e+" failed"),console.warn(i.stack||i.message),!1}},t.prototype.removeBackend=function(e){if(!(e in this.registry))throw new Error(e+" backend not found in registry");this.registry[e].backend.dispose(),delete this.registry[e]},Object.defineProperty(t.prototype,"engine",{get:function(){return this.initEngine(),this.globalEngine},enumerable:!0,configurable:!0}),t.prototype.initEngine=function(){var e=this;if(this.globalEngine==null){this.backendName=this.get("BACKEND");var n=this.findBackend(this.backendName);this.globalEngine=new Lae(n,!1,function(){return e.get("DEBUG")})}},Object.defineProperty(t.prototype,"global",{get:function(){return pB()},enumerable:!0,configurable:!0}),t})();function pB(){if(uw==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else{if(typeof process>"u")throw new Error("Could not find a global object");t=process}uw=t}return uw}function nie(){var t=pB();return t.ENV==null&&(t.ENV=new Oi(fB())),Dae(function(){return t.ENV.engine}),t.ENV}function mB(t){Q.get("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}Iae(mB);var Q=nie();function Vu(t){var e=t;if(Cs(t))return[t.length];if(!Array.isArray(t))return[];for(var n=[];Array.isArray(e)||Cs(e);)n.push(e.length),e=e[0];return Array.isArray(t)&&Q.get("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&vB(t,n,[]),n}function vB(t,e,n){if(n=n||[],Array.isArray(t)||Cs(t)){ee(e.length>0,function(){return"Element arr["+n.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),ee(t.length===e[0],function(){return"Element arr["+n.join("][")+"] should have "+e[0]+" elements, but has "+t.length+" elements"});for(var r=e.slice(1),o=0;o<t.length;++o)vB(t[o],r,n.concat(o))}else ee(e.length===0,function(){return"Element arr["+n.join("][")+"] is a primitive, but should be an array/TypedArray of "+e[0]+" elements"})}function SI(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function Y(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof We)return SI(r,t.dtype,e,n),t;var o=$p(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),SI(r,o,e,n),t==null||!Cs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var a=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=Vu(t);Cs(t)||Array.isArray(t)||(t=[t]);var s=o!=="string"?oB(t,o,Q.get("DEBUG")):Hd(t);return We.make(i,{values:s},o)}function Zg(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(o,a){return Y(o,e+"["+a+"]",n)},r)}function rie(t,e){if(ee(j2(t),function(){return"The f passed in variableGrads(f) must be a function"}),ee(e==null||Array.isArray(e)&&e.every(function(u){return u instanceof Xp}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}),e==null)for(var n in e=[],Q.engine.registeredVariables)e.push(Q.engine.registeredVariables[n]);var r=e.length;ee((e=e.filter(function(u){return u.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable."});var o=Q.engine.gradients(t,e,null,!0),a=o.value,i=o.grads;ee(i.some(function(u){return u!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),ee(a.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var s={};return e.forEach(function(u,l){i[l]!=null&&(s[u.name]=i[l])}),{value:a,grads:s}}function Kp(t){return Q.engine.customGrad(t)}var dt=Oi.tidy,Cn=Oi.keep,oie=Oi.dispose;Oi.time;Oi.profile;function G2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Q.get("IS_TEST")||console.warn.apply(console,t)}function ey(t,e,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var a=e.length,i=0;i<a;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(a+1))}return o}function ty(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function ny(t,e,n,r){r===void 0&&(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?o.push(e[a-1]*t[a]):o.push(t[a]/e[a-1]):o.push(t[a]);return o}function gB(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function yB(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}function bB(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function aie(t,e,n){for(var r=t.length+e.length,o=[],a=0,i=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(t[a++]):o.push(e[i++]);return o}function Fr(t,e){for(var n=[],r=t.length,o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);return[n,e.map(function(a){return t[a]})]}function Sa(t,e){return aie(t,e.map(function(n){return 1}),e)}function Mo(t,e,n){ee(bB(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function Pi(t,e){if(bB(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(o){return n.push(o)}),n}function DE(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function Fi(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function iie(t,e){var n=t[0].length;t.forEach(function(o,a){ee(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+n+")"})}),ee(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(o,a){for(var i=0;i<n;i++)ee(i===e||o[i]===r[i],function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function Gd(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function xB(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=i[a],s.push(i[a]);var l=Jl(t.shape).map(function(d){return d/u}).concat([1]).slice(0,r);return[s,o,u,l]}var wB=30;function lw(t){return t<=wB?t:z2(t,Math.floor(Math.sqrt(t)))}function sie(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(a+" update.rank != "+(o+t.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+e.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+t[i+o]+")")}function uie(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}sie(n,e,t)}function ry(t,e,n){for(var r=e.rank>1?e.shape[e.rank-1]:1,o=n.length,a=1,i=r;i<o;++i)a*=n[i];var s=r<1?1:r;return{sliceRank:r,numUpdates:e.size/s,sliceSize:a,strides:Jl(n.slice(0,r)).concat([1]),outputSize:ft(n)}}function lie(t,e){var n,r=!1;for(t<=wB?(n=t,r=!0):n=z2(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=z2(t,n+1);return n}function cie(t,e,n){for(var r=[],o=t.length,a=0;a<o;a++)a!==e?r.push(t[a]):r.push(n);return r}function die(t,e,n){for(var r=t.shape[n],o=[],a=1,i=1,s=0;s<n;s++)o.push(t.shape[s]),a*=t.shape[s];for(s=0;s<e.rank;s++)o.push(e.shape[s]);for(s=n+1;s<t.rank;s++)o.push(t.shape[s]),i*=t.shape[s];return{batchSize:a,sliceSize:i,dimSize:r,outputShape:o}}function fie(t,e,n){ee(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),ee(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(a){ee(e[a]+n[a]<=t.shape[a],function(){return"Error in slice"+t.rank+"D: begin["+a+"] + size["+a+"] ("+(e[a]+n[a])+") would overflow input.shape["+a+"] ("+t.shape[a]+")"})},o=0;o<t.rank;++o)r(o)}function kE(t,e,n,r,o,a,i,s,u){if(o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),i!==0)throw new Error("ellipsis mask is not yet supported");if(s!==0)throw new Error("new axis mask is not yet supported");for(var l=[],d=[],f=[],p=0;p<t.length;p++)l[p]=hie(o,e,r,t,p),d[p]=pie(a,n,r,t,p),u&1<<p&&(d[p]=l[p]+1,f.push(p));var m=new Array(t.length).fill(0);return m=m.map(function(g,y){for(var b=0,C=r[y]||1,S=l[y];!(C>0?S>=d[y]:S<=d[y]);S+=C)b+=1;return b}),[l,m,f]}function hie(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||a==null)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=B2(0,a,s-1)}function pie(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||a==null)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=i>0?B2(0,a,s):B2(-1,a,s-1)}function CB(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function SB(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function ie(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];Q.engine.startScope(n);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Q.engine.endScope(s),s}catch(u){throw Q.engine.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function mie(t,e){e===void 0&&(e=-1);var n=Y(t,"logits","softmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return Kp(function(r,o){var a=r.logSumExp([e],!0),i=r.toFloat().sub(a).exp();return o([i]),{value:i,gradFunc:function(s,u){var l=u[0],d=s.mul(l);return d.sub(d.sum([e],!0).mul(l))}}})(n)}function vie(t,e){e===void 0&&(e=-1);var n=Y(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return Kp(function(r,o){var a=r.max(e,!0),i=r.sub(a),s=i.toFloat().sub(i.exp().sum(e,!0).log());return o([s]),{value:s,gradFunc:function(u,l){var d=l[0].exp();return u.sub(u.sum(e,!0).mul(d))}}})(n)}var Hu=ie({softmax_:mie}),gie=ie({logSoftmax_:vie});function yie(t,e){var n=Y(t,"real","complex"),r=Y(e,"imag","complex");return vn(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Q.engine.runKernel(function(o){return o.complex(n,r)},{$real:n,$imag:r})}function bie(t){var e=Y(t,"input","real");return Q.engine.runKernel(function(n){return n.real(e)},{$input:e})}function xie(t){var e=Y(t,"input","imag");return Q.engine.runKernel(function(n){return n.imag(e)},{$input:e})}var Jr=ie({complex_:yie}),bi=ie({real_:bie}),bu=ie({imag_:xie});function Jn(t,e,n){if(n==null&&(n=$p(t)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Cs(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");var r=Vu(t);if(e!=null){sB(e);var o=ft(e),a=ft(r);ee(o===a,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+a});for(var i=0;i<r.length;++i){var s=r[i],u=i!==r.length-1||s!==ft(e.slice(i));ee(r[i]===e[i]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+e+"). "})}}return Cs(t)||Array.isArray(t)||(t=[t]),e=e||r,t=n!=="string"?oB(t,n,Q.get("DEBUG")):Hd(t),We.make(e,{values:t},n)}function Pe(t,e){if((Cs(t)||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");return Jn(t,[],e)}function Fo(t,e){Sf(t);var n=Vu(t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Jn(t,n,e)}function F0(t,e,n){if(Sf(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Vu(t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Jn(t,e=e||r,n)}function IE(t,e,n){if(Sf(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Vu(t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Jn(t,e=e||r,n)}function Oa(t,e,n){if(Sf(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Vu(t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Jn(t,e=e||r,n)}function wie(t,e,n){if(Sf(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Vu(t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Jn(t,e=e||r,n)}function Cie(t,e,n){if(Sf(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Vu(t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Jn(t,e=e||r,n)}function Wl(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Wl(t,"float32"),r=Wl(t,"float32");return Jr(n,r)}var o=iB(ft(t),e);return We.make(t,{values:o},e)}function qn(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=qn(t,"float32"),r=qn(t,"float32");return Jr(n,r)}var o=qp(ft(t),e);return We.make(t,{values:o},e)}function Qh(t,e,n){return Q.engine.runKernel(function(r){return r.fill(t,e,n)},{})}function Sie(t){var e=Y(t,"x","onesLike");if(e.dtype==="complex64"){var n=RB(bi(e)),r=nn(bu(e));return Jr(n,r)}return Q.engine.runKernel(function(o){return o.onesLike(e)},{$x:e},null)}function Eie(t){var e=Y(t,"x","zerosLike");return Q.engine.runKernel(function(n){return n.zerosLike(e)},{$x:e},null)}function Rie(t,e,n){if(n===0)throw new Error("Cannot request zero samples");var r=(e-t)/(n-1),o=qp(n,"float32");o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return Fo(o,"float32")}function EB(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return qn([0],r);var o=qp(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return Fo(o,r)}var RB=ie({onesLike_:Sie}),nn=ie({zerosLike_:Eie}),_B=(function(){function t(e){this.dataMover=e,this.data=new WeakMap}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(e),this.data.get(e)},t.prototype.set=function(e,n){this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.data.delete(e)},t})();function TB(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=qn(t.shape),o=t.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!wae(t.dtype,e))return We.make(t.shape,{dataId:t.dataId},e);if(t.dtype==="complex64"){var i=n.real(t);return a=i.cast(e),i.dispose(),a}if(e==="int32")return n.int(t);if(e==="bool"){var s=Pe(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: unknown dtype argument ("+e+")")}function $2(t,e){return We.make(e,{dataId:t.dataId},t.dtype)}function AB(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function _ie(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function Tie(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function Aie(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function EI(t,e){return{real:t[2*e],imag:t[2*e+1]}}function Nie(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Die(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),o=0;o<Math.ceil(t/2);o++){var a=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}function kie(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function ME(t,e,n,r,o){for(var a=Array.from(e).map(function(m,g){return{score:m,boxIndex:g}}).filter(function(m){return m.score>o}).sort(function(m,g){return g.score-m.score}),i=[],s=0;s<a.length;s++){var u=a[s],l=u.score,d=u.boxIndex;if(l<o)break;for(var f=!1,p=i.length-1;p>=0;--p)if(Iie(t,d,i[p])>=r){f=!0;break}if(!f&&(i.push(d),i.length>=n))break}return Fo(i,"int32")}function Iie(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),d=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(s-a)*(u-i),g=(f-l)*(p-d);if(m<=0||g<=0)return 0;var y=Math.max(a,l),b=Math.max(i,d),C=Math.min(s,f),S=Math.min(u,p),E=Math.max(C-y,0)*Math.max(S-b,0);return E/(m+g-E)}function NB(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map(function(a){o[n]=a;var i=t.slice(r,o);return r[n]+=a,i})}function DB(t,e,n,r,o){for(var a=e[e.length-1],i=[t.length/a,a],s=i[0],u=i[1],l=L2(n,s*r),d=L2("int32",s*r),f=0;f<s;f++){for(var p=f*u,m=t.subarray(p,p+u),g=[],y=0;y<m.length;y++)g.push({value:m[y],index:y});g.sort(function(_,T){return T.value-_.value});var b=f*r,C=l.subarray(b,b+r),S=d.subarray(b,b+r);for(y=0;y<r;y++)C[y]=g[y].value,S[y]=g[y].index}var E=e.slice();return E[E.length-1]=r,[Jn(l,E,n),Jn(d,E,"int32")]}var Mie=(function(){return function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}})();function kB(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function Bo(t,e){return e===1?[t]:kB(t,e)}function Oie(t,e){if(t===1)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}function md(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(a)}return r}function dr(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],a=e.length-r-1,i=e[a];(o==null||o===1&&i>1)&&n.unshift(a)}return n}function Gt(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var a=t[t.length-o-1];a==null&&(a=1);var i=e[e.length-o-1];if(i==null&&(i=1),a===1)n.unshift(i);else if(i===1)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}function Bi(){var t,e,n,r,o,a,i,s,u,l;return Q.get("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=`
      const float NAN = uintBitsToFloat(uint(0x7fc00000));
    `,u=`
      const float INFINITY = uintBitsToFloat(uint(0x7f800000));
    `,l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s=`
      uniform float NAN;

      bool isnan(float val) {
        return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
      }
      bvec4 isnan(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Yp(t,e,n){n===void 0&&(n="index");var r=Jl(e);return r.map(function(o,a){return"int "+t[a]+" = "+n+" / "+o+"; "+(a===r.length-1?"int "+t[a+1]+" = "+n+" - "+t[a]+" * "+o:"index -= "+t[a]+" * "+o)+";"}).join("")}function qv(t){return t.length===1?""+t[0]:"vec"+t.length+"("+t.join(",")+")"}function Pie(t,e){if(t.length!==e.length)throw new Error("Vectors to be dotted must be of the same length -got "+t.length+" and "+e.length);for(var n=[],r=Math.floor(t.length/4),o=t.length%4,a=0;a<r;a++){var i=t.slice(4*a,4*a+4),s=e.slice(4*a,4*a+4);n.push(qv(i)+", "+qv(s))}return o!==0&&(i=t.slice(4*r),s=e.slice(4*r),i.length===1&&(i=i.map(function(u){return"float("+u+")"}),s=s.map(function(u){return"float("+u+")"})),n.push(qv(i)+", "+qv(s))),n.map(function(u,l){return"dot("+u+")"}).join("+")}function Fie(t,e,n,r){var o=[];t.forEach(function(m){var g=ft(m.shapeInfo.logicalShape);m.shapeInfo.isUniform?o.push("uniform float "+m.name+(g>1?"["+g+"]":"")+";"):(o.push("uniform sampler2D "+m.name+";"),o.push("uniform int offset"+m.name+";"))});var a,i,s=o.join(`
`),u=t.map(function(m){return Bie(m,e,r)}).join(`
`),l=e.texShape,d=Bi(),f=zie(d),p=Vie(d);return e.isPacked?(a=Lie(e.logicalShape,l),i=Wie(d)):(a=jie(e.logicalShape,l),i=Uie(d)),r&&(p+=qie),[p,f,i,s,a,u,n].join(`
`)}function Ef(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return ase(t);case 1:return sse(t);case 2:return lse(t);case 3:return dse(t);case 4:return hse(t);case 5:return pse(t);case 6:return mse(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function IB(t){switch(t.shapeInfo.logicalShape.length){case 0:return ose(t);case 1:return ise(t);case 2:return use(t);case 3:return cse(t);default:return fse(t)}}function Bie(t,e,n){n===void 0&&(n=!1);var r="";r+=n?IB(t):Ef(t);var o=t.shapeInfo.logicalShape,a=e.logicalShape;return o.length<=a.length&&(r+=n?vse(t,e):gse(t,e)),r}function Lie(t,e){switch(t.length){case 0:return MB();case 1:return Xie(t,e);case 2:return nse(t,e);case 3:return Yie(t,e);default:return Jie(t,e)}}function jie(t,e){switch(t.length){case 0:return MB();case 1:return Kie(t,e);case 2:return rse(t,e);case 3:return Qie(t,e);case 4:return Zie(t,e);case 5:return ese(t,e);case 6:return tse(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}function zie(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+t.texture2D+`(textureSampler, uv).r;
    }
  `}function Uie(t){return`
    void setOutput(float val) {
      `+t.output+` = vec4(val, 0, 0, 0);
    }
  `}function Wie(t){return`
    void setOutput(vec4 val) {
      `+t.output+` = val;
    }
  `}function Vie(t){return t.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+t.varyingFs+` vec2 resultUV;
    `+t.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    `+t.defineSpecialNaN+`
    `+t.defineSpecialInf+`
    `+t.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Hie+`
    `+Gie+`
    `+$ie+`
  `}var Hie=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Gie=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$ie=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,qie=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function MB(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Xie(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return n[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+n[1]+`.0);
      }
    `:n[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+n[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      return resTexRC.x * `+n[1]+` + resTexRC.y;
    }
  `}function Kie(t,e){return e[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+e[1]+`.0);
      }
    `:e[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+e[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      return resTexRC.x * `+e[1]+` + resTexRC.y;
    }
  `}function Yie(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      int index = resTexRC.x * `+n[1]+` + resTexRC.y;

      int b = index / `+o+`;
      index -= b * `+o+`;

      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec3(b, r, c);
    }
  `}function Qie(t,e){var n=Yp(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;
      `+n+`
      return ivec3(r, c, d);
    }
  `}function Jie(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),a=o,i="",s="b, r, c",u=2;u<t.length-1;u++)i=`
      int b`+u+" = index / "+(a*=t[t.length-u-1])+`;
      index -= b`+u+" * "+a+`;
    `+i,s="b"+u+", "+s;return`
    ivec`+t.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      int index = resTexRC.x * `+n[1]+` + resTexRC.y;

      `+i+`

      int b = index / `+o+`;
      index -= b * `+o+`;

      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec`+t.length+"("+s+`);
    }
  `}function Zie(t,e){var n=Yp(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;
      `+n+`
      return ivec4(r, c, d, d2);
    }
  `}function ese(t,e){var n=Yp(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+e[0]+`,
                             `+e[1]+`));

      int index = resTexRC.x * `+e[1]+` + resTexRC.y;

      `+n+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function tse(t,e){var n=Yp(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;

      `+n+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function nse(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(no(t,e))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+n[0]+", "+n[1]+`));
      }
    `;var r=Math.ceil(t[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));

      int index = resTexRC.x * `+n[1]+` + resTexRC.y;
      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec2(r, c);
    }
  `}function rse(t,e){return no(t,e)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+e[0]+", "+e[1]+`));
      }
    `:t[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+e[0]+", "+e[1]+`));
        int index = resTexRC.x * `+e[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+e[0]+", "+e[1]+`));
        int index = resTexRC.x * `+e[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;
      int r = index / `+t[1]+`;
      int c = index - r * `+t[1]+`;
      return ivec2(r, c);
    }
  `}function Zl(t){return"offset"+t}function ose(t){var e=t.name;return`
    vec4 `+("get"+e.charAt(0).toUpperCase()+e.slice(1))+`() {
      return `+Bi().texture2D+"("+e+`, halfCR);
    }
  `}function ase(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float "+n+"() {return "+e+";}";var r=t.shapeInfo.texShape,o=r[0],a=r[1];if(o===1&&a===1)return`
      float `+n+`() {
        return sampleTexture(`+e+`, halfCR);
      }
    `;var i=t.shapeInfo.texShape;return`
    float `+n+`() {
      vec2 uv = uvFromFlat(`+i[0]+", "+i[1]+", "+Zl(e)+`);
      return sampleTexture(`+e+`, uv);
    }
  `}function ise(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Bi();return`
    vec4 `+n+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+o[0]+", "+o[1]+`, index);
      return `+a.texture2D+"("+e+`, uv);
    }
  `}function sse(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`
      float `+n+`(int index) {
        `+Rf(t)+`
      }
    `;var r=t.shapeInfo.texShape,o=r[0],a=r[1];if(a===1&&o===1)return`
      float `+n+`(int index) {
        return sampleTexture(`+e+`, halfCR);
      }
    `;var i=Zl(e);return a===1?`
      float `+n+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+i+") + 0.5) / "+o+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:o===1?`
      float `+n+`(int index) {
        vec2 uv = vec2((float(index + `+i+") + 0.5) / "+a+`.0, 0.5);
        return sampleTexture(`+e+`, uv);
      }
    `:`
    float `+n+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+a+", index + "+i+`);
      return sampleTexture(`+e+`, uv);
    }
  `}function use(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,a=o[0],i=o[1],s=Bi();if(o!=null&&no(e,o))return`
      vec4 `+r+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+i+".0, "+a+`.0);

        return `+s.texture2D+"("+n+`, uv);
      }
    `;var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 `+r+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+Math.ceil(e[1]/2)+", "+u[0]+", "+u[1]+`, row, col);
      return `+s.texture2D+"("+n+`, uv);
    }
  `}function lse(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape;if(o!=null&&no(e,o)){var a=o[0];return`
    float `+r+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+o[1]+".0, "+a+`.0);
      return sampleTexture(`+n+`, uv);
    }
  `}var i=Ql(e),s=i.newShape,u=i.keptDims,l=s;if(l.length<e.length)return`
      `+Ef(_f(t,l))+`
      float `+r+`(int row, int col) {
        return `+r+"("+Tf(["row","col"],u)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+e[1]+`, 1)));
        `+Rf(t)+`
      }
    `;var d=o[0],f=o[1],p=Zl(n);return f===1?`
    float `+r+`(int row, int col) {
      float index = dot(vec3(row, col, `+p+"), vec3("+e[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+d+`.0);
      return sampleTexture(`+n+`, uv);
    }
  `:d===1?`
    float `+r+`(int row, int col) {
      float index = dot(vec3(row, col, `+p+"), vec3("+e[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+f+`.0, 0.5);
      return sampleTexture(`+n+`, uv);
    }
  `:`
  float `+r+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+e[1]+" + col + "+p+`;
    vec2 uv = uvFromFlat(`+d+", "+f+`, index);
    return sampleTexture(`+n+`, uv);
  }
`}function cse(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(e[0]===1)return`
        `+IB(_f(t,e.slice(1)))+`
        vec4 `+r+`(int b, int row, int col) {
          return `+r+"("+Tf(["b","row","col"],[1,2])+`);
        }
      `;var i=a[0],s=a[1],u=Math.ceil(e[2]/2);return`
    vec4 `+r+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+i+", "+s+", "+u*Math.ceil(e[1]/2)+", "+u+`, b, row, col);
      return `+Bi().texture2D+"("+n+`, uv);
    }
  `}function dse(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[1]*e[2],a=e[2],i=Ql(e),s=i.newShape,u=i.keptDims,l=s;if(l.length<e.length)return`
        `+Ef(_f(t,l))+`
        float `+r+`(int row, int col, int depth) {
          return `+r+"("+Tf(["row","col","depth"],u)+`);
        }
      `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+a+`, 1)));
        `+Rf(t)+`
      }
    `;var d=t.shapeInfo.texShape,f=d[0],p=d[1],m=t.shapeInfo.flatOffset;return p===o&&m==null?`
        float `+r+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+a+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+p+".0, "+f+`.0);
          return sampleTexture(`+n+`, uv);
        }
      `:p===a&&m==null?`
    float `+r+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+e[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+".0, "+f+`.0);
      return sampleTexture(`+n+`, uv);
    }
  `:`
      float `+r+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+a+" + depth + "+Zl(n)+`;
        vec2 uv = uvFromFlat(`+f+", "+p+`, index);
        return sampleTexture(`+n+`, uv);
      }
  `}function fse(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=i[0],u=i[1],l=Math.ceil(e[n-1]/2),d=l*Math.ceil(e[n-2]/2),f="int b, int row, int col",p="b * "+d+" + (row / 2) * "+l+" + (col / 2)",m=2;m<n-1;m++)f="int b"+m+", "+f,p="b"+m+" * "+(d*=e[n-m-1])+" + "+p;return`
    vec4 `+o+"("+f+`) {
      int index = `+p+`;
      int texR = index / `+u+`;
      int texC = index - texR * `+u+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+u+", "+s+`);
      return `+Bi().texture2D+"("+r+`, uv);
    }
  `}function hse(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[3],a=e[2]*o,i=e[1]*a,s=Ql(e),u=s.newShape,l=s.keptDims;if(u.length<e.length)return`
      `+Ef(_f(t,u))+`
      float `+r+`(int row, int col, int depth, int depth2) {
        return `+r+"("+Tf(["row","col","depth","depth2"],l)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+i+", "+a+", "+o+`, 1)));
        `+Rf(t)+`
      }
    `;var d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,p=f[0],m=f[1];return m===i&&d==null?`
      float `+r+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+a+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+p+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:m===o&&d==null?`
      float `+r+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+e[1]*e[2]+", "+e[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+p+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+i+" + col * "+a+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+p+", "+m+", index + "+Zl(n)+`);
      return sampleTexture(`+n+`, uv);
    }
  `}function pse(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],a=e[3]*o,i=e[2]*a,s=e[1]*i,u=Ql(e),l=u.newShape,d=u.keptDims;if(l.length<e.length)return`
      `+Ef(_f(t,l))+`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        return `+r+"("+Tf(["row","col","depth","depth2","depth3"],d)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+s+", "+i+", "+a+", "+o+`)) +
          depth3;
        `+Rf(t)+`
      }
    `;var f=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],g=p[1];return g===s&&f==null?`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+i+", "+a+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:g===o&&f==null?`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+e[1]*e[2]*e[3]+`,
               `+e[2]*e[3]+", "+e[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+s+" + col * "+i+" + depth * "+a+` +
          depth2 * `+o+" + depth3 + "+Zl(n)+`;
      vec2 uv = uvFromFlat(`+m+", "+g+`, index);
      return sampleTexture(`+n+`, uv);
    }
  `}function mse(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Ql(e),a=o.newShape,i=o.keptDims;if(a.length<e.length)return`
      `+Ef(_f(t,a))+`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+r+"("+Tf(["row","col","depth","depth2","depth3","depth4"],i)+`);
      }
    `;var s=e[5],u=e[4]*s,l=e[3]*u,d=e[2]*l,f=e[1]*d;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+d+", "+l+", "+u+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+s+`, 1)));
        `+Rf(t)+`
      }
    `;var p=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,g=m[0],y=m[1];return y===f&&p==null?`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+d+", "+l+", "+u+", "+s+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:y===s&&p==null?`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+e[1]*e[2]*e[3]*e[4]+`,
               `+e[2]*e[3]*e[4]+`,
               `+e[3]*e[4]+`,
               `+e[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+d+" + depth * "+l+` +
          depth2 * `+u+" + depth3 * "+s+" + depth4 + "+Zl(n)+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+n+`, uv);
    }
  `}function Rf(t){var e=t.name,n=ft(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function vse(t,e){var n,r=t.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,u=md(t.shapeInfo.logicalShape,e.logicalShape),l=_n(s),d=s-i,f=["x","y","z","w","u","v"];n=i===0?"":s<2&&u.length>=1?"coords = 0;":u.map(function(b){return"coords."+f[b+d]+" = 0;"}).join(`
`);var p="";p=s<2&&i>0?"coords":t.shapeInfo.logicalShape.map(function(b,C){return"coords."+f[C+d]}).join(", ");var m="return outputValue;";if(i===1&&s>1)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(i===0&&s>0)m=s===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(u.length){var g=i-2,y=i-1;u.indexOf(g)>-1&&u.indexOf(y)>-1?m="return vec4(outputValue.x);":u.indexOf(g)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(y)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 `+a+`() {
      `+l+` coords = getOutputCoords();
      `+n+`
      vec4 outputValue = get`+o+"("+p+`);
      `+m+`
    }
  `}function gse(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=e.texShape,i=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===u&&t.shapeInfo.flatOffset==null&&no(i,a))return`
      float `+o+`() {
        return sampleTexture(`+n+`, resultUV);
      }
    `;var l=_n(u),d=md(t.shapeInfo.logicalShape,e.logicalShape),f=u-s,p=["x","y","z","w","u","v"];return`
    float `+o+`() {
      `+l+` coords = getOutputCoords();
      `+(s===0?"":u<2&&d.length>=1?"coords = 0;":d.map(function(m){return"coords."+p[m+f]+" = 0;"}).join(`
`))+`
      return get`+r+"("+(u<2&&s>0?"coords":t.shapeInfo.logicalShape.map(function(m,g){return"coords."+p[g+f]}).join(", "))+`);
    }
  `}function _n(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function _f(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Tf(t,e){return e.map(function(n){return t[n]}).join(", ")}var yse=(function(){return function(t,e,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,ee(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=t[t.length-1],a=Math.ceil(o/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,d=_n(l),f=Bo("coords",l);if(a===1){var p=_n(s=l+1);i=`
        `+p+" sourceLocR = "+p+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+p+" sourceLocG = "+p+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+p+" sourceLocA = "+p+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+p+" sourceLocB = "+p+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,i=`
        `+d+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+d+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+d+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+d+` sourceLocB = coords;
        --`+f[l-2]+";";var m=["x","y","z","w","u","v"].slice(0,s),g="."+m[s-1],y=m.map(function(k){return"int "+k}),b=Bo("sourceLocR",s-1).concat("inIdx.r"),C=Bo("sourceLocG",s-1).concat("inIdx.g"),S=Bo("sourceLocB",s-1).concat("inIdx.b"),E=Bo("sourceLocA",s-1).concat("inIdx.a"),_=n==="max"?"greaterThan":"lessThan",T=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+E.join()+")));",D=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+E.join()+") : 0.)",I=r?"":`
      float getBestIndicesAChannel(`+y.join()+`) {
        return getChannel(getBestIndicesA(`+m.join()+`),
                                          vec2(`+m.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+y.join()+`) {
        return getChannel(getA(`+m.join()+`),
                               vec2(`+m.slice(-2).join()+`));
      }
      `+I+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+g+", sourceLocG"+g+`,
          sourceLocB`+g+", sourceLocA"+g+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+T+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+_+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}})(),bse=(function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,d=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+d+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}})(),xse=(function(){return function(t,e,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Gt(t,e),Gt(t,n);var i="0.0";r!=null&&(Gt(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";o!=null&&(Gt(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}})(),wse=(function(){return function(t,e,n,r,o,a){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],Gt(t,e),Gt(t,n);var i="vec4(0.0)";r!=null&&(Gt(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(Gt(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `}})(),RI={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},_I=(function(){return function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Gt(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}})(),OE=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,cw="return a + b;",dw="return a - b;",TI="return a * b;",Cse=`if (a == b) return 1.0;
  return a / b;`,Sse=`
  float resultSign = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  int result = ia / ib;
  int amodb = ia - ib * result;

  if (resultSign < 0.0 && amodb != 0) {
    result -= 1;
  }
  return float(result);
`,Ese=`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,AI="return (a - b) * (a - b);",Rse="return float(a == b);",_se="return float(a != b);",Tse="return float(a < b);",Ase="return float(a <= b);",Nse="return float(a > b);",Dse="return float(a >= b);",kse="return float(a >= 1.0 && b >= 1.0);",Ise="return float(a >= 1.0 || b >= 1.0);",Mse=OE+`
  return max(a, b);
`,Ose=OE+`
  return min(a, b);
`,Pse=`if (b == 0.0) return NAN;
  return mod(a, b);`,Fse=OE+`
  return atan(a, b);
`,Bse="return (b >= 1.0) ? a : a * (b + 1.0);",Lse="return (a < 0.) ? b * a : a;",jn=(function(){return function(t,e,n){this.variableNames=["A","B"],this.outputShape=Gt(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}})(),Qp=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`,jse=`
  vec4 resultSign = sign(a) * sign(b);
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  ivec4 result = ia / ib;
  ivec4 amodb = ia - ib * result;

  // Vectorize INT_DIV
  // if (resultSign < 0.0 && amodb != 0) result -= 1;
  // return float(result);
  return vec4(result -
     ivec4(lessThan(resultSign, vec4(0.0))) * ivec4(notEqual(amodb, ivec4(0))));
`,zse=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+Qp+`
  return result;
`,Use=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Wse=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Vse=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+Qp+`
  return result;
`,Hse=`
  return vec4(equal(a, b));
`,Gse=`
  return vec4(notEqual(a, b));
`,$se=`
  return vec4(lessThan(a, b));
`,qse=`
  return vec4(lessThanEqual(a, b));
`,Xse=`
  return vec4(greaterThan(a, b));
`,Kse=`
  return vec4(greaterThanEqual(a, b));
`,Yse=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Qse=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Jse=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+Qp+`
  return result;
`,Zse=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+Qp+`
  return result;
`,eue=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+Qp+`
  return result;
`,os=(function(){return function(t,e,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=Gt(e,n),this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}})(),tue=(function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float min;
      uniform float max;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, min, max));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"min"),r.maxLoc=o.getUniformLocationNoThrow(a,"max")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t})(),nue=(function(){function t(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode=`
      uniform float min;
      uniform float max;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(min), vec4(max)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"min"),r.maxLoc=o.getUniformLocationNoThrow(a,"max")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t})(),rue=(function(){return function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}})(),oue=(function(){return function(t){this.outputShape=[],this.outputShape=Gd(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var o=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=e.length,i=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `}})(),aue=(function(){return function(t,e){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=Gd(t,e);var n=this.outputShape,r=n.length,o=_n(r),a=Bo("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(y,b){return"T"+b});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=i[e],d="vec2("+i.slice(-2).join()+")",f=i.join(),p="if ("+l+" < "+s[0]+`)
          return getChannel(getT0(`+f+"), "+d+");";for(u=1;u<s.length;u++){var m=s[u-1];p+=`
        else if (`+l+" < "+s[u]+`) {
          `+l+" -= "+m+`;
          return getChannel(getT`+u+"("+f+"), "+d+`);
        }`}var g=s.length;p+=`
        else {
          `+l+" -= "+s[s.length-1]+`;
          return getChannel(getT`+g+"("+f+"), "+d+`);
        }`,this.userCode=`
      float getValue(`+i.map(function(y){return"int "+y})+`) {
        `+p+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);
        if (++`+a[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+a+`);
        }
        if (++`+a[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+a+`);
        }
        if (`+a[r-2]+" < "+n[r-2]+` &&
            --`+a[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `}})(),iue=(function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),sue=(function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, d2);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),uue=(function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,a=t.padInfo.top,i=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+o+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+a+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),lue=(function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),cue=(function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TODO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),due=(function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TODO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),fue=(function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.top,n=t.padInfo.left,r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.filterHeight,u=t.filterWidth,l=4*Math.floor(t.inChannels/4),d=t.inChannels%4;this.userCode=`
      const ivec2 strides = ivec2(`+r+", "+o+`);
      const ivec2 pads = ivec2(`+e+", "+n+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`; wR++) {
          int xR = xRCorner + wR * `+a+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+u+`; wC++) {
            int xC = xCCorner + wC * `+i+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+l+`; d1 += 4) {
              vec4 xValues = vec4(
                getX(batch, xR, xC, d1),
                getX(batch, xR, xC, d1 + 1),
                getX(batch, xR, xC, d1 + 2),
                getX(batch, xR, xC, d1 + 3)
              );
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              dotProd += dot(xValues, wValues);
            }

            if (`+(d===1)+`) {
              dotProd +=
                getX(batch, xR, xC, `+l+`) *
                getW(wR, wC, `+l+`, d2);
            } else if (`+(d===2)+`) {
              vec2 xValues = vec2(
                getX(batch, xR, xC, `+l+`),
                getX(batch, xR, xC, `+l+` + 1)
              );
              vec2 wValues = vec2(
                getW(wR, wC, `+l+`, d2),
                getW(wR, wC, `+l+` + 1, d2)
              );
              dotProd += dot(xValues, wValues);
            } else if (`+(d===3)+`) {
              vec3 xValues = vec3(
                getX(batch, xR, xC, `+l+`),
                getX(batch, xR, xC, `+l+` + 1),
                getX(batch, xR, xC, `+l+` + 2)
              );
              vec3 wValues = vec3(
                getW(wR, wC, `+l+`, d2),
                getW(wR, wC, `+l+` + 1, d2),
                getW(wR, wC, `+l+` + 2, d2)
              );
              dotProd += dot(xValues, wValues);
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),hue=(function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,m=4*Math.floor(t.inChannels/4),g=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+a+", "+i+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+p+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+m+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(g===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+m+`) *
                  getW(wF, wR, wC, `+m+`, d2);
              } else if (`+(g===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(g===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1),
                  getX(batch, xF, xR, xC, `+m+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2),
                  getW(wF, wR, wC, `+m+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),pue=(function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.dilationHeight,u=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+r+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+f+`;
        int q = d2 - d1 * `+f+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+l+`; wR++) {
          int xR = xRCorner + wR * `+s+`;

          if (xR < 0 || xR >= `+e+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+n+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }
        setOutput(dotProd);
      }
    `}})(),mue=(function(){return function(t){this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=t.outShape;for(var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.dilationHeight,u=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=d,p="int xR; int xC; int xCOffset;",m=0;m<l;m++)for(var g=0;g<d;g++)p+=`
          vec4 xTexelR`+m+"C"+2*g+` = vec4(0.);
          vec4 wR`+m+"C"+g+` = vec4(0.);
          vec4 xR`+m+"C"+g+" = vec4(0.);";for(m=0;m<l;m++)for(var y=0;y<f;y++){if(p+=`
          xR = xRCorner + `+m*s+`;
          xC = xCCorner + `+(g=2*y)*u+`;
        `,i===1){if(g<d&&(p+=o%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+e+" && xCOffset >= 0 && xCOffset < "+n+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+e+" && xCOffset >= 0 && xCOffset < "+n+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);
                  xR`+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+`.xy);
                } else {
                  xR`+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+e+" && xC >= 0 && xC < "+n+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xR`+m+"C"+g+" = xTexelR"+m+"C"+g+`;
              `,g+1<d)){var b=o%2==0?Vd(u):u;u%2==0&&o%2==1||u%2!=0&&o%2!=1?(p+=`
                  xCOffset = xC + `+o%2+" + "+b+`;

                  if(xR >= 0 && xR < `+e+` &&
                    xCOffset >= 0 && xCOffset < `+n+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,u>1&&(p+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+e+` &&
                      xCOffset >= 0 && xCOffset < `+n+`) {
                      xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+m+"C"+g+` = vec4(0.);
                    }
                  `),p+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.xy);
                `):p+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+e+` &&
                    xCOffset >= 0 && xCOffset < `+n+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+`;
                `}}else g<d&&(p+=`
              if(xR >= 0 && xR < `+e+`) {
            `,o%2==1?(p+=`
                xCOffset = xC + 1 - `+i+`;
                if(xCOffset >= 0 && xCOffset < `+n+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+n+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
              `,g+1<d&&(p+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+i+`;
                  if(xCOffset >= 0 && xCOffset < `+n+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+`.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < `+n+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+i+`;
                if(xCOffset >= 0 && xCOffset < `+n+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+`.xy);
              `,g+1<d&&(p+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
                `)),p+="}");g<d&&(p+=`
            vec4 wTexelR`+m+"C"+g+" = getW("+m+", "+g+`, d1, q);
            wR`+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+`.xz);
          `,g+1<d&&(p+=`
              vec4 wTexelR`+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+`, d1, q);
              wR`+m+"C"+(g+1)+` =
                vec4(wTexelR`+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<l;m++)for(g=0;g<d;g++)p+="result += xR"+m+"C"+g+" * wR"+m+"C"+g+";";this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+r+", "+o+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 result = vec4(0.);

        `+p+`

        setOutput(result);
      }
    `}})(),vue=(function(){return function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],i=t[1],s=t[2],u=t[3],l=e[0],d=n[0],f=n[1];this.outputShape=[l,d,f,u];var p=r==="bilinear"?1:0,m=[i-1+".0",s-1+".0"],g=m[0],y=m[1],b=d>1?[""+(i-1)/(d-1),"(y2-y1) * height_ratio","y1*"+g+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+g],C=b[0],S=b[1],E=b[2],_=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+y+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+y],T=_[0],D=_[1],I=_[2];this.userCode=`
      const float height_ratio = float(`+C+`);
      const float width_ratio = float(`+T+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+S+`;
        float width_scale = `+D+`;

        float in_y = `+E+`;
        if( in_y < 0.0 || in_y > `+g+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+I+`;
        if( in_x < 0.0 || in_x > `+y+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+p+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}})(),gue=(function(){return function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],a=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+_n(r)+` coords = getOutputCoords();
        int end = `+NI(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+NI(r,"coords")+` = idx;
          val += getX(`+yue(r,"coords")+`);
        }
        setOutput(val);
      }
    `}})();function yue(t,e){if(t===1)return""+e;if(t===2)return e+".x, "+e+".y";if(t===3)return e+".x, "+e+".y, "+e+".z";if(t===4)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}function NI(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var bue=(function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t})(),xue=(function(){return function(t){this.variableNames=["A"];var e=Bi();this.outputShape=t,this.userCode=`
      const float FLOAT_MAX = 1.70141184e38;
      const float FLOAT_MIN = 1.17549435e-38;

      lowp vec4 encode_float(highp float v) {
        if (isnan(v)) {
          return vec4(255, 255, 255, 255);
        }

        highp float av = abs(v);

        if(av < FLOAT_MIN) {
          return vec4(0.0, 0.0, 0.0, 0.0);
        } else if(v > FLOAT_MAX) {
          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
        } else if(v < -FLOAT_MAX) {
          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
        }

        highp vec4 c = vec4(0,0,0,0);

        highp float e = floor(log2(av));
        highp float m = exp2(fract(log2(av))) - 1.0;

        c[2] = floor(128.0 * m);
        m -= c[2] / 128.0;
        c[1] = floor(32768.0 * m);
        m -= c[1] / 32768.0;
        c[0] = floor(8388608.0 * m);

        highp float ebias = e + 127.0;
        c[3] = floor(ebias / 2.0);
        ebias -= c[3] * 2.0;
        c[2] += floor(ebias) * 128.0;

        c[3] += 128.0 * step(0.0, -v);

        return c / 255.0;
      }

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `}})(),DI={REAL:"return real * expR - imag * expI;",IMAG:"return real * expI + imag * expR;"},kI=(function(){return function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}})(),wue=(function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,e)}},t})(),Cue=(function(){return function(t){this.variableNames=["A"];var e=Bi(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}})(),Sue=(function(){return function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=_n(this.rank),a=Eue(t,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `}})();function Eue(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(n===1)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<t.length;a++)a===e?o.push("int(getIndices("+r[a]+"))"):o.push(""+r[a]);return o.join()}var xi,fo,Rue=(function(){return function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=_n(e.length),o=_n(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}})();function Af(t,e){return[e,t]}function Jp(t,e){return t*e}function _ue(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}function Tue(t,e,n){var r=Jp(t.length,n);if(e.length<r)throw new Error("unpackedArray length ("+e.length+") must be >= "+r);for(var o=0,a=0;a<t.length;++a)e[o]=t[a],o+=n}function OB(t,e,n){var r=_ue(t.length,n);if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var o=0,a=0;a<t.length;a+=n)e[o++]=t[a]}function ec(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function PE(t,e){var n=ec(t,e);return n[0]*n[1]*4}function Aue(t,e,n,r,o){for(var a=r%2==1,i=n%2==1,s=Math.floor(r/2),u=Math.floor(n/2),l=Math.ceil(r/2),d=l*Math.ceil(n/2),f=Vd(n)*Vd(r),p=0;p<e;p++){for(var m=p*n*r,g=p*f,y=a?4:0,b=r,C=g,S=0;S<u;++S){for(var E=2*S*r,_=0;_<s;++_){var T=m+E+2*_;o[C]=t[T],o[C+1]=t[T+1],o[C+2]=t[T+b],o[C+3]=t[T+b+1],C+=4}C+=y}if(a){T=m+r-1,C=g+4*(l-1);var D=2*r;for(y=4*l,S=0;S<u;++S)o[C]=t[T],o[C+2]=t[T+r],T+=D,C+=y}if(i){for(T=m+(n-1)*r,C=g+4*(d-l),_=0;_<s;++_)o[C++]=t[T++],o[C++]=t[T++],C+=2;a&&i&&(o[g+f-4]=t[T])}}return o}function PB(t,e,n,r,o){var a=n*r;if(o.length<a)throw new Error("matrix length ("+o.length+") must be >= "+a);for(var i=r%2==1,s=n%2==1,u=Math.floor(r/2),l=Math.floor(n/2),d=Math.ceil(r/2),f=d*Math.ceil(n/2),p=Vd(n)*Vd(r),m=0;m<e;m++){for(var g=m*n*r,y=m*p,b=i?4:0,C=r+(i?1:0),S=y,E=g,_=g+r,T=0;T<l;++T){for(var D=0;D<u;++D)o[E++]=t[S++],o[E++]=t[S++],o[_++]=t[S++],o[_++]=t[S++];S+=b,E+=C,_+=C}if(i){S=y+4*(d-1);var I=g+r-1;for(b=4*d,C=2*r,T=0;T<l;++T)o[I]=t[S],o[I+r]=t[S+2],S+=b,I+=C}if(s){for(S=y+4*(f-d),I=g+(n-1)*r,D=0;D<u;++D)o[I++]=t[S++],o[I++]=t[S++],S+=2;i&&(o[g+n*r-1]=t[S])}}return o}function tt(t,e,n){var r=n();return e&&Nue(t),r}function Nue(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Mue(t,e))}(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(xi||(xi={})),(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(fo||(fo={}));var Due=596e-10,kue=65504;function Iue(t){return!!(Q.get("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Due<Math.abs(t)&&Math.abs(t)<kue)}function Mue(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Xv(t,e,n){return Ns(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function Oue(t,e,n){var r=Ns(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(tt(t,e,function(){return t.shaderSource(r,n)}),tt(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Pue(t,e,n){var r=Ns(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(tt(t,e,function(){return t.shaderSource(r,n)}),tt(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw Bue(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Fue=/ERROR: [0-9]+:([0-9]+):/g;function Bue(t,e){var n=Fue.exec(e);if(n==null)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],o=t.split(`
`),a=o.length.toString().length+2,i=o.map(function(p,m){return Sd((m+1).toString(),a)+p}),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),d=i.slice(r-1,r),f=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log("%c "+Sd(d[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function Lue(t,e){return Ns(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function jue(t,e,n){if(tt(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function fw(t,e,n){if(tt(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function zue(t,e,n){var r=Ns(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return tt(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),tt(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Uue(t,e,n){var r=Ns(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return tt(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),tt(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Wue(){return Q.get("WEBGL_VERSION")===2?1:4}function Vue(t,e){return Ns(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function FB(t,e){var n=Q.get("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function Hue(t,e){return Ns(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function II(t,e,n,r,o,a,i,s){var u=t.getAttribLocation(n,r);return u!==-1&&(tt(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,o)}),tt(t,e,function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,i,s)}),tt(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function Gue(t,e,n,r){Yue(t,r),tt(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),tt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function $ue(t,e,n,r){return Ns(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function que(t,e,n){return t.getUniformLocation(e,n)}function Xue(t,e,n,r,o,a){tt(t,e,function(){return Gue(t,e,r,a)}),tt(t,e,function(){return t.uniform1i(o,a)})}function hw(t,e,n,r){tt(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),tt(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function MI(t,e,n){tt(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),tt(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Kv(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Kue(t,e))}function Kue(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Ns(t,e,n,r){var o=tt(t,e,function(){return n()});if(o==null)throw new Error(r);return o}function Yue(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function ad(t,e){return e===void 0&&(e=2),ft(t.slice(0,t.length-e))}function id(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Que(t,e){var n;e===void 0&&(e=!1);var r=Q.get("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,d){return d>=t.length-2?Vd(t[d]):t[d]})).length===1&&(t=[2,t[0]])),t.length!==2){var o=Ql(t);t=o.newShape}var a=ft(t);if(t.length<=1&&a<=r)return[1,a];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var i=ad(t),s=2,u=2;return t.length&&(s=(n=id(t))[0],u=n[1]),vI(a=i*(s/2)*(u/2)).map(function(l){return 2*l})}return vI(a)}function Yv(t){return t%2==0}function Qv(t,e){if(no(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Yv(n)&&Yv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Yv(t[0])&&Yv(e[0])}function Jue(t,e){var n=Bi();return Oue(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Zue(t,e){return zue(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function ele(t,e){return Uue(t,e,new Uint16Array([0,1,2,2,1,3]))}function tle(t,e){var n,r,o,a,i,s,u,l,d=t;return Q.get("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,o=d.RGBA16F,a=d.RGBA32F,i=d.RED,s=4,u=1,l=d.HALF_FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,a=d.RGBA,i=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l}}function Zp(t,e,n,r,o,a,i){FB(n,r);var s=Vue(t,e),u=t.TEXTURE_2D;return tt(t,e,function(){return t.bindTexture(u,s)}),tt(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),tt(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),tt(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),tt(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),tt(t,e,function(){return t.texImage2D(u,0,o,n,r,0,a,i,null)}),tt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function nle(t,e,n,r,o){var a=Af(n,r);return Zp(t,e,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function rle(t,e,n,r,o){var a=Af(n,r);return Zp(t,e,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function ole(t,e,n,r,o){var a=Af(n,r);return Zp(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function ale(t,e,n,r,o){var a=ec(n,r);return Zp(t,e,a[0],a[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function ile(t,e,n,r,o){var a=ec(n,r);return Zp(t,e,a[0],a[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function sle(t,e,n,r){return tt(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),II(t,e,n,"clipSpacePos",r,3,20,0)&&II(t,e,n,"uv",r,2,20,12)}function ule(t,e,n,r){tt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),tt(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),tt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function BB(t,e,n,r,o,a,i){FB(r,o),tt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),tt(t,e,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,r,o,i,t.FLOAT,a)}),tt(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function lle(t,e,n,r,o,a,i,s){var u,l=Af(r,o),d=l[0],f=l[1],p=r*o;s.defaultNumChannels===1&&p===a.length?u=a:Tue(a,u=new Float32Array(p*i),i),BB(t,e,n,d,f,u,s.textureFormatFloat)}function cle(t,e,n,r,o,a,i,s,u,l){var d=ec(i,s),f=d[0],p=d[1],m=new Float32Array(PE(i,s));Aue(u,r,o,a,m),BB(t,e,n,f,p,m,t.RGBA)}function dle(t,e,n,r,o,a){var i=n;if(Q.get("WEBGL_VERSION")===2){var s=t,u=s.createBuffer();tt(t,e,function(){return t.bindBuffer(s.PIXEL_PACK_BUFFER,u)});var l=4*Jp(r*o,a.downloadUnpackNumChannels);tt(t,e,function(){return t.bufferData(s.PIXEL_PACK_BUFFER,l,s.STREAM_READ)}),tt(t,e,function(){return s.readPixels(0,0,o,r,t.RGBA,t.FLOAT,0)}),tt(t,e,function(){return t.bindBuffer(s.PIXEL_PACK_BUFFER,null)}),i=u}return i}function fle(t,e,n,r,o){var a=t,i=new Float32Array(Jp(n*r,o.downloadUnpackNumChannels));a.bindBuffer(a.PIXEL_PACK_BUFFER,e),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,i),a.bindBuffer(a.PIXEL_PACK_BUFFER,null);var s=new Float32Array(n*r);return OB(i,s,o.downloadUnpackNumChannels),s}function hle(t,e,n,r,o){var a=Af(n,r),i=a[0],s=a[1],u=new Float32Array(Jp(n*r,o.downloadUnpackNumChannels));tt(t,e,function(){return t.readPixels(0,0,i,s,o.downloadTextureFormat,t.FLOAT,u)});var l=new Float32Array(n*r);return OB(u,l,o.downloadUnpackNumChannels),l}function ple(t,e,n,r,o){var a=Af(n,r),i=a[0],s=a[1],u=new Uint8Array(Jp(n*r,4));return tt(t,e,function(){return t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function mle(t,e,n,r,o,a,i,s){var u=t,l=new Float32Array(PE(a,i));u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null);var d=new Float32Array(ft([n,r,o]));return PB(l,n,r,o,d),d}function vle(t,e,n,r,o,a,i,s){var u=ec(a,i),l=u[0],d=u[1],f=new Float32Array(PE(a,i));tt(t,e,function(){return t.readPixels(0,0,l,d,t.RGBA,t.FLOAT,f)});var p=new Float32Array(ft([n,r,o]));return PB(f,n,r,o,p)}var gle=(function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Q.get("WEBGL_VERSION");e!=null?(this.gl=e,fae(n,e)):this.gl=Mi(n),Q.get("WEBGL_VERSION")===1?(this.textureFloatExtension=Xv(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),Q.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=Xv(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=Xv(this.gl,this.debug,"EXT_color_buffer_float"),this.vertexBuffer=Zue(this.gl,this.debug),this.indexBuffer=ele(this.gl,this.debug),this.framebuffer=Hue(this.gl,this.debug),this.textureConfig=tle(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return Q.get("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;tt(n,this.debug,function(){return n.finish()}),tt(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),tt(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),tt(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),tt(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),tt(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),nle(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),rle(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),ole(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),ule(this.gl,this.debug,e,n)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),ile(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),ale(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(MI(this.gl,this.debug,this.framebuffer),this.outputTexture=null),tt(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.uploadMatrixToTexture=function(e,n,r,o){this.throwIfDisposed();var a=Wue();return lle(this.gl,this.debug,e,n,r,o,a,this.textureConfig)},t.prototype.uploadMatrixToPackedTexture=function(e,n,r,o,a,i,s){return this.throwIfDisposed(),cle(this.gl,this.debug,e,n,r,o,a,i,s,this.textureConfig)},t.prototype.downloadFloat32MatrixFromOutputTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return hle(o.gl,o.debug,n,r,o.textureConfig)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return ple(o.gl,o.debug,n,r,o.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,o,a,i){return mle(this.gl,e,n,r,o,a,i,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n,r){return fle(this.gl,e,n,r,this.textureConfig)},t.prototype.maybeCreateBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var o=dle(this.gl,this.debug,e,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,o=this;if(Q.get("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=i}else Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r,o,a,i){var s=this;return this.downloadMatrixDriver(e,function(){return vle(s.gl,s.debug,n,r,o,a,i,s.textureConfig)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=Pue(n,this.debug,e),o=Jue(n,this.debug),a=Lue(n,this.debug);return tt(n,this.debug,function(){return n.attachShader(a,o)}),tt(n,this.debug,function(){return n.attachShader(a,r)}),jue(n,this.debug,a),this.debug&&fw(n,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=sle(n,this.debug,this.program,this.vertexBuffer)),a},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&tt(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&fw(this.gl,this.debug,this.program),tt(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?$ue(this.gl,this.debug,e,n):que(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),tt(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Xue(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var o=ec(n,r),a=o[0],i=o[1];this.setOutputMatrixTextureDriver(e,a,i)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&fw(this.gl,this.debug,this.program),Kv(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),tt(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),tt(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Xv(this.gl,this.debug,Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),a=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,a),a},t.prototype.endQuery=function(){if(Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return pn(this,void 0,void 0,function(){var n=this;return mn(this,function(r){switch(r.label){case 0:return[4,gI(function(){return n.disposed||n.isQueryAvailable(e,Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(e,o.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=yle(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||gI(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),hw(this.gl,this.debug,e,this.framebuffer),this.debug&&Kv(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(hw(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Kv(this.gl)):MI(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var o=this.gl;hw(o,this.debug,e,this.framebuffer),this.debug&&Kv(o),this.outputTexture=e,tt(o,this.debug,function(){return o.viewport(0,0,n,r)}),tt(o,this.debug,function(){return o.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,o){var a=this;this.throwIfDisposed(),tt(this.gl,this.debug,function(){return a.gl.scissor(e,n,r,o)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t})();function yle(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}function ble(t,e,n,r){var o=e.userCode,a=n.map(function(y,b){var C={logicalShape:y.shape,texShape:y.isUniform?null:y.texData.texShape,isUniform:y.isUniform,isPacked:!y.isUniform&&y.texData.isPacked,flatOffset:null};return y.texData!=null&&y.texData.slice!=null&&y.texData.slice.flatOffset>0&&(C.flatOffset=y.texData.slice.flatOffset),{name:e.variableNames[b],shapeInfo:C}}),i=a.map(function(y){return y.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Fie(a,s,o,e.usesPackedTextures),l=t.createProgram(u),d=null,f=null;Q.get("WEBGL_VERSION")===1&&(d=t.getUniformLocation(l,"INFINITY",!1),f=t.getUniformLocation(l,"NAN",!1));for(var p={},m=0;m<e.variableNames.length;m++){var g=e.variableNames[m];p[g]=t.getUniformLocation(l,g,!1),p["offset"+g]=t.getUniformLocation(l,"offset"+g,!1)}return{program:e,source:u,webGLProgram:l,uniformLocations:p,inShapeInfos:i,outShapeInfo:s,infLoc:d,nanLoc:f}}function OI(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var o=n.logicalShape,a=e[r],i=a.shape;if(!no(o,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+i+" must match");if(!n.isUniform||!a.isUniform){var s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!no(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}function xle(t,e,n,r,o){OI(e.inShapeInfos,n),OI([e.outShapeInfo],[r]);var a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a,i[0],i[1]):t.setOutputMatrixTexture(a,i[0],i[1]),t.setProgram(e.webGLProgram),Q.get("WEBGL_VERSION")===1&&(e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN)),n.forEach(function(s,u){var l=e.program.variableNames[u],d=e.uniformLocations[l],f=e.uniformLocations["offset"+l];if(d!=null)if(s.isUniform)if(ft(s.shape)<2)t.gl.uniform1f(d,s.uniformValues[0]);else{var p=s.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(d,p)}else s.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,s.texData.slice.flatOffset),t.setInputMatrixTexture(s.texData.texture,d,u)}),o?.(t,e.webGLProgram),t.executeProgram()}function wle(t,e,n){var r="";e.concat(n).forEach(function(i){var s=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0,u=i.isUniform?"uniform":i.texData.texShape;r+=i.shape+"_"+u+"_"+s});var o=t.userCode,a=t.constructor.name;return a+="_"+r+"_"+o}var Cle=(function(){return function(t,e,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,d=n.dilationHeight,f=s.left,p=s.top,m=o*r,g=Bi();this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            int blockIndex = rc.y + col;
            int pos = rc.x + row;

            if(blockIndex >= `+t[1]+" || pos >= "+t[0]+`) continue;

            int offsetY = int(blockIndex / (`+u+")) * "+i+" - "+p+`;
            int d0 = offsetY + `+d+" * (pos / "+m+`);

            if(d0 >= `+e[0]+` || d0 < 0) continue;

            int offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+f+`.);
            int d1 = offsetX + `+l+" * (int(mod(float(pos), "+m+".) / "+o+`.));

            if(d1 >= `+e[1]+` || d1 < 0) continue;

            vec2 innerDims = vec2(d1, int(mod(float(pos), `+o+`.)));
            result[row * 2 + col] = getChannel(getA(d0, int(innerDims.x),
                                              int(innerDims.y)), innerDims);
          }
        }

        `+g.output+` = result;
      }
    `}})(),Sle=(function(){return function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `}})(),Ele=(function(){return function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}})(),Rle=(function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,a=t.effectiveFilterWidth,i=o-1-t.padInfo.top,s=a-1-t.padInfo.left,u=o*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}})(),pw=(function(){return function(t,e,n,r,o,a){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),a===void 0&&(a=null),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=e;var i=n?t[1]:t[2],s=Math.ceil(i/2),u=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",m="";a&&(p=`vec4 activation(vec4 x) {
        `+a+`
      }`,m="result = activation(result);");var g=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),this.userCode=`
      `+p+`

      const float sharedDimension = `+s+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+s+`; i++) {
          vec4 a = getMatrixA(rc.x, `+u+`);
          vec4 b = getMatrixB(rc.x, `+l+`);

          result += (`+d[0]+" * "+f[0]+") + ("+d[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+g+`

        `+m+`

        setOutput(result);
      }
    `}})(),_le=(function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t})(),Tle=(function(){return function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `}})(),Ale=(function(){return function(t){this.variableNames=["A"],this.isPackShader=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Bo("rc",e),r=_n(e),o=Dle(e,t,n),a=kle(e,t[t.length-1],t[t.length-2],n),i=Ile(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+i+`));
          }
        }
      `}}})();function Nle(t,e){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var a=(r===0?"r":"rp1")+", "+(o===0?"c":"cp1"),i=2;i<t;i++)a=e[e.length-1-i]+","+a;n.push(a)}return n}function Dle(t,e,n){if(t===1)return"rc > "+e[0];for(var r="",o=t-2;o<t;o++)r+=n[o]+" >= "+e[o],o<t-1&&(r+="||");return r}function kle(t,e,n,r){if(t===1)return"";var o=r.slice(-2);return`
    int r = `+o[0]+`;
    int c = `+o[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+e+`;
    bool rEdge = rp1 >= `+n+`;
  `}function Ile(t,e){var n=t.length,r=Nle(n,e);return n===1?`getA(rc),
            rc + 1 >= `+t[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+r[0]+`),
          cEdge ? 0. : getA(`+r[1]+`),
          rEdge ? 0. : getA(`+r[2]+`),
          rEdge || cEdge ? 0. : getA(`+r[3]+")"}var Mle=(function(){return function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,o=_n(r),a=e.map(function(u){return u[0]}).join(","),i=e.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+a+`);
      `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}})(),Ole=(function(){return function(t,e,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=e.map(function(b,C){return b[0]+t[C]+b[1]});for(var r=t.length,o=_n(r),a=e.map(function(b){return b[0]}).join(","),i=e.map(function(b,C){return b[0]+t[C]}).join(","),s=Bo("rc",r),u=Bo("source",r),l=s[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],p=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",g=0,y=r===1?2:4;g<y;g++)m+=`
        `+f[g]+`
        if (`+p+`) {
          result[`+g+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+g+"] = getChannel(getX("+u.join()+"), "+d+`);
        }
      `;m+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+a+`);
      const `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+m+`
        setOutput(result);
      }
    `}})(),mw=(function(){return function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var p=e==="avg",m="0.0";if(p||(m="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+a+`);
        const ivec2 pads = ivec2(`+d+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var g=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(g="avgValue / count");var y=4*Math.floor(r/4),b=r%4,C=`
      if (`+p+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+a+`);
      const ivec2 pads = ivec2(`+d+", "+f+`);
      const float initializationValue = `+m+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+m+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+y+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+C+`
          }

          int xC = xCCorner + `+y+`;
          if (`+(b===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+C+`
          } else if (`+(b===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+C+`
          } else if (`+(b===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+C+`
          }
        }
        setOutput(`+g+`);
      }
    `}}})(),Ple=(function(){return function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";e==="prod"?i="1.0":e==="min"?(i="1.0 / 1e-20",s="min"):e==="max"&&(i="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),d=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,p="vec4";e==="all"?(i="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):e==="any"&&(i="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");var m="";o%n>0&&(m=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+m+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(d===1)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(d===2)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(d===3)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `}})(),Fle=(function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      `+Lle(e)+`
      `+Ble(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `}})();function Ble(t){return`
    int getFlatIndex(ivec3 coords) {
      return round(`+Pie(["coords.x","coords.y","coords.z"],Jl(t).map(function(e){return e.toString()}).concat(["1."]))+`);
    }
  `}function Lle(t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Yp(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  `}var jle=(function(){return function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/d[0],p=l[1]/d[1],m=1/f,g=1/p,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+g+`);

        const int winHeight = int(`+y+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}})(),zle=(function(){return function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}})(),Ule=(function(){return function(t,e,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));
        
        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`; 
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}})(),Wle=(function(){return function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/d[0],p=l[1]/d[1],m=1/f,g=1/p,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+g+`);

        const int winHeight = int(`+y+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}})(),Vle=(function(){return function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}})(),Hle=(function(){return function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(a,i){return(function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"})(i)}).join(","),o=_n(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `}})(),Gle=(function(){return function(t,e){this.variableNames=["x"],this.usesPackedTextures=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=Bo("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=_n(n);function s(u){var l=t.map(function(d,f){return(function(p,m){return e.indexOf(p)!==-1&&t[p]!==1?t[p]+" - "+m[p]+" - 1":""+m[p]})(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1), rc);
          if(`+o+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1), rc + 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(u){return s(u)})(r.slice())+`;
          if(`+o+`){
            result.g = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)})(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+(function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            if(`+o+`) {
              result.a = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `}})(),PI=(function(){return function(t,e,n,r,o,a,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=_n(o.length),u=_n(a.length),l="";n===1?l="i":n===2&&(l="i, j");var d="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var p="getUpdates("+f+")",m=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+m+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+p+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}})(),$le=(function(){return function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=t.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var f="";o%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `}})(),qle=(function(){return function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&i.push(""+a[u]);r=i.join(),o=s.join()}var l=_n(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `}})(),Xle=(function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=_n(this.rank),o="uniform int start["+this.rank+"];",a=Kle(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(i,s){return"sourceLoc."+q2[s]+" = start["+s+"] + coords."+q2[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+a+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t})(),q2=["x","y","z","w","u","v"];function Kle(t){if(t===1)return"sourceLoc";if(t<=6)return q2.slice(0,t).map(function(e){return"sourceLoc."+e}).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}var Yle=(function(){function t(e){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=e,this.rank=e.length;var n=_n(this.rank),r=Bo("coords",this.rank),o=Bo("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",i="getChannel(getSource("+o.join()+"), "+a+")",s=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+i+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(d,f){return"start["+f+"]"}).join()+");":e.map(function(d,f){return o[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+` 
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t})(),Qle=(function(){return function(t,e,n,r){this.variableNames=["x"];var o=n.filter(function(d,f){return r.indexOf(f)===-1});this.outputShape=o;var a=n.length,i=_n(n.length),s=_n(o.length),u="";if(a===1)u="coords * strides + begin";else{var l=0;u=n.map(function(d,f){return r.indexOf(f)===-1?(l++,o.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(l-1)+"] * strides["+f+"] + begin["+f+"]"):"begin["+f+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+u+`));
      }
    `}})(),Jle=(function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var o,a=FI(n,r),i=BI(e,a,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[i].shift();return this.usedTextures[i].push(s),s}return this.numUsedTextures++,this.log(),a===fo.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===fo.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===fo.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===fo.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===fo.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),o},t.prototype.releaseTexture=function(e,n,r,o){if(this.freeTextures!=null){var a=BI(n,FI(r,o),o);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],s=i.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){e.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t})();function FI(t,e){if(t===xi.UPLOAD)return e?fo.PACKED_2X2_FLOAT32:fo.UNPACKED_FLOAT32;if(t===xi.RENDER||t==null)return e?Q.get("WEBGL_RENDER_FLOAT32_ENABLED")?fo.PACKED_2X2_FLOAT32:fo.PACKED_2X2_FLOAT16:Q.get("WEBGL_RENDER_FLOAT32_ENABLED")?fo.UNPACKED_FLOAT32:fo.UNPACKED_FLOAT16;if(t===xi.DOWNLOAD||t===xi.PIXELS)return fo.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function BI(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var Zle=(function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=_n(this.rank),a=ece(t);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `}})();function ece(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(e===1)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}var tce=(function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=_n(this.rank),a=nce(e);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `}})();function nce(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}var rce=(function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=_n(this.rank),a=kB("rc",this.rank),i=new Array(this.rank);for(r=0;r<e.length;r++)i[e[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }  
      setOutput(result);
    }
    `}})(),LB=.3275911,jB=.254829592,zB=-.284496736,UB=1.421413741,WB=-1.453152027,VB=1.061405429,FE=1.7580993408473768,BE=1.0507009873554805,_t=(function(){return function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}})(),tc="if (isnan(x)) return x;",oce="return x;",ace="return abs(x);",HB=tc+`
  return (x < 0.0) ? 0.0 : x;
`,ice="return (x >= 0.0) ? x : (exp(x) - 1.0);",sce=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+FE+`;
  float scale = `+BE+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`;function uce(t){return t===void 0&&(t=0),tc+`
    return x > 0.0 ? 1.0 : float(`+t+`);
  `}var lce="return -x;",cce="return ceil(x);",dce="return floor(x);",fce=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,hce="return float(isnan(x));",pce="return float(isinf(x));",mce="return float(!isnan(x) && !isinf(x));",vce=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,LI="return exp(x);",gce="return exp(x) - 1.0;",yce=`if (x < 0.0) return NAN;
  return log(x);`,bce="return log(1.0 + x);",xce="return sqrt(x);",wce="return inversesqrt(x);",Cce="return 1.0 / (1.0 + exp(-1.0 * x));",Sce=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Ece=tc+`
  return sin(x);
`,Rce=tc+`
  return cos(x);
`,_ce="return tan(x);",Tce="return asin(x);",Ace="return acos(x);",Nce=tc+`
  return atan(x);
`,Dce=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,kce=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,Ice=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,Mce="return log(x + sqrt(x * x + 1.0));",Oce=tc+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Pce=tc+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Fce=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = `+LB+`;
  float a1 = `+jB+`;
  float a2 = `+zB+`;
  float a3 = `+UB+`;
  float a4 = `+WB+`;
  float a5 = `+VB+`;

  float t = 1.0 / (1.0 + p * x);
  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);
`,Bce="return x * x;",Lce="return 1.0 / x;",jce="return float(!(x >= 1.0));",zce="return float(int(x));",jI="return x;",Uce="return x;",Wce=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,GB=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vw=(function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}})(),Vce=(function(){return function(t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var e=t.length,n=Bo("rc",e),r=_n(e),o=Oie(e,n),a=n.slice(-2),i=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `}})();function Hce(t){return xo(t,0)}function Gce(t,e){return xo(t,e)}function $ce(t,e){return xo(t,e)}function qce(t,e){return xo(t,e)}function Xce(t,e){e===void 0&&(e=0),ee(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=Zg(t,"tensors","concat");e=Ir(e,n[0].shape)[0];var r=Gd(n.map(function(i){return i.shape}),e);if(ft(r)===0)return Jn([],r);if((n=n.filter(function(i){return i.size>0})).length===1)return n[0];var o=n.map(function(i){return i.shape});iie(o,e);var a=n;return Q.engine.runKernel(function(i){return i.concat(n,e)},a,function(i){var s=o.map(function(u){return u[e]});return LE(i,s,e).map(function(u){return function(){return u}})})}function Kce(t,e,n){n===void 0&&(n=0);var r,o=Y(t,"x","split");return n=Ir(n,o.shape)[0],typeof e=="number"?(ee(o.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(o.shape[n]/e)):(ee(o.shape[n]===e.reduce(function(a,i){return a+i}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),Q.engine.runKernel(function(a){return a.split(o,r,n)},{$x:o},function(a){return{$x:function(){return xo(a,n)}}})}var xo=ie({concat_:Xce}),Yce=ie({concat1d_:Hce}),Qce=ie({concat2d_:Gce}),Jce=ie({concat3d_:$ce}),Zce=ie({concat4d_:qce}),LE=ie({split_:Kce});function nc(t,e){return t(e={exports:{}},e.exports),e.exports}var ede=nc(function(t){(function(e,n,r){function o(i,s){return s.c=i.c,s.s0=i.s0,s.s1=i.s1,s.s2=i.s2,s}function a(i,s){var u=new function(f){var p,m=this,g=(p=4022871197,function(y){y=y.toString();for(var b=0;b<y.length;b++){var C=.02519603282416938*(p+=y.charCodeAt(b));C-=p=C>>>0,p=(C*=p)>>>0,p+=4294967296*(C-=p)}return 23283064365386963e-26*(p>>>0)});m.next=function(){var y=2091639*m.s0+23283064365386963e-26*m.c;return m.s0=m.s1,m.s1=m.s2,m.s2=y-(m.c=0|y)},m.c=1,m.s0=g(" "),m.s1=g(" "),m.s2=g(" "),m.s0-=g(f),m.s0<0&&(m.s0+=1),m.s1-=g(f),m.s1<0&&(m.s1+=1),m.s2-=g(f),m.s2<0&&(m.s2+=1),g=null}(i),l=s&&s.state,d=u.next;return d.int32=function(){return 4294967296*u.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,l&&(typeof l=="object"&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.alea=a})(0,t)}),tde=nc(function(t){(function(e,n,r){function o(i,s){return s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,s}function a(i,s){var u=new function(f){var p=this,m="";p.x=0,p.y=0,p.z=0,p.w=0,p.next=function(){var y=p.x^p.x<<11;return p.x=p.y,p.y=p.z,p.z=p.w,p.w^=p.w>>>19^y^y>>>8},f===(0|f)?p.x=f:m+=f;for(var g=0;g<m.length+64;g++)p.x^=0|m.charCodeAt(g),p.next()}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(typeof l=="object"&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.xor128=a})(0,t)}),nde=nc(function(t){(function(e,n,r){function o(i,s){return s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,s.v=i.v,s.d=i.d,s}function a(i,s){var u=new function(f){var p=this,m="";p.next=function(){var y=p.x^p.x>>>2;return p.x=p.y,p.y=p.z,p.z=p.w,p.w=p.v,(p.d=p.d+362437|0)+(p.v=p.v^p.v<<4^y^y<<1)|0},p.x=0,p.y=0,p.z=0,p.w=0,p.v=0,f===(0|f)?p.x=f:m+=f;for(var g=0;g<m.length+64;g++)p.x^=0|m.charCodeAt(g),g==m.length&&(p.d=p.x<<10^p.x>>>4),p.next()}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(typeof l=="object"&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.xorwow=a})(0,t)}),rde=nc(function(t){(function(e,n,r){function o(i,s){return s.x=i.x.slice(),s.i=i.i,s}function a(i,s){i==null&&(i=+new Date);var u=new function(f){var p=this;p.next=function(){var m,g,y=p.x,b=p.i;return m=y[b],g=(m^=m>>>7)^m<<24,g^=(m=y[b+1&7])^m>>>10,g^=(m=y[b+3&7])^m>>>3,g^=(m=y[b+4&7])^m<<7,m=y[b+7&7],g^=(m^=m<<13)^m<<9,y[b]=g,p.i=b+1&7,g},(function(m,g){var y,b=[];if(g===(0|g))b[0]=g;else for(g=""+g,y=0;y<g.length;++y)b[7&y]=b[7&y]<<15^g.charCodeAt(y)+b[y+1&7]<<13;for(;b.length<8;)b.push(0);for(y=0;y<8&&b[y]===0;++y);for(y==8?b[7]=-1:b[y],m.x=b,m.i=0,y=256;y>0;--y)m.next()})(p,f)}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(l.x&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.xorshift7=a})(0,t)}),ode=nc(function(t){(function(e,n,r){function o(i,s){return s.i=i.i,s.w=i.w,s.X=i.X.slice(),s}function a(i,s){i==null&&(i=+new Date);var u=new function(f){var p=this;p.next=function(){var m,g,y=p.w,b=p.X,C=p.i;return p.w=y=y+1640531527|0,g=b[C+34&127],m=b[C=C+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,g=b[C]=g^m,p.i=C,g+(y^y>>>16)|0},(function(m,g){var y,b,C,S,E,_=[],T=128;for(g===(0|g)?(b=g,g=null):(g+="\0",b=0,T=Math.max(T,g.length)),C=0,S=-32;S<T;++S)g&&(b^=g.charCodeAt((S+32)%g.length)),S===0&&(E=b),b^=b<<10,b^=b>>>15,b^=b<<4,b^=b>>>13,S>=0&&(E=E+1640531527|0,C=(y=_[127&S]^=b+E)==0?C+1:0);for(C>=128&&(_[127&(g&&g.length||0)]=-1),C=127,S=512;S>0;--S)b=_[C+34&127],y=_[C=C+1&127],b^=b<<13,y^=y<<17,b^=b>>>15,y^=y>>>12,_[C]=b^y;m.w=E,m.X=_,m.i=C})(p,f)}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(l.X&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.xor4096=a})(0,t)}),ade=nc(function(t){(function(e,n,r){function o(i,s){return s.a=i.a,s.b=i.b,s.c=i.c,s.d=i.d,s}function a(i,s){var u=new function(f){var p=this,m="";p.next=function(){var y=p.b,b=p.c,C=p.d,S=p.a;return y=y<<25^y>>>7^b,b=b-C|0,C=C<<24^C>>>8^S,S=S-y|0,p.b=y=y<<20^y>>>12^b,p.c=b=b-C|0,p.d=C<<16^b>>>16^S,p.a=S-y|0},p.a=0,p.b=0,p.c=-1640531527,p.d=1367130551,f===Math.floor(f)?(p.a=f/4294967296|0,p.b=0|f):m+=f;for(var g=0;g<m.length+20;g++)p.b^=0|m.charCodeAt(g),p.next()}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(typeof l=="object"&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.tychei=a})(0,t)}),yl=nc(function(t){(function(e,n){var r,o=this,a=256,i=6,s="random",u=n.pow(a,i),l=n.pow(2,52),d=2*l,f=a-1;function p(b,C,S){var E=[],_=g((function I(k,M){var O,F=[],j=typeof k;if(M&&j=="object")for(O in k)try{F.push(I(k[O],M-1))}catch{}return F.length?F:j=="string"?k:k+"\0"})((C=C==1?{entropy:!0}:C||{}).entropy?[b,y(e)]:b??(function(){try{var I;return r&&(I=r.randomBytes)?I=I(a):(I=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(I)),y(I)}catch{var k=o.navigator,M=k&&k.plugins;return[+new Date,o,M,o.screen,y(e)]}})(),3),E),T=new function(I){var k,M=I.length,O=this,F=0,j=O.i=O.j=0,G=O.S=[];for(M||(I=[M++]);F<a;)G[F]=F++;for(F=0;F<a;F++)G[F]=G[j=f&j+I[F%M]+(k=G[F])],G[j]=k;(O.g=function(W){for(var q,P=0,U=O.i,z=O.j,H=O.S;W--;)q=H[U=f&U+1],P=P*a+H[f&(H[U]=H[z=f&z+q])+(H[z]=q)];return O.i=U,O.j=z,P})(a)}(E),D=function(){for(var I=T.g(i),k=u,M=0;I<l;)I=(I+M)*a,k*=a,M=T.g(1);for(;I>=d;)I/=2,k/=2,M>>>=1;return(I+M)/k};return D.int32=function(){return 0|T.g(4)},D.quick=function(){return T.g(4)/4294967296},D.double=D,g(y(T.S),e),(C.pass||S||function(I,k,M,O){return O&&(O.S&&m(O,T),I.state=function(){return m(T,{})}),M?(n[s]=I,k):I})(D,_,"global"in C?C.global:this==n,C.state)}function m(b,C){return C.i=b.i,C.j=b.j,C.S=b.S.slice(),C}function g(b,C){for(var S,E=b+"",_=0;_<E.length;)C[f&_]=f&(S^=19*C[f&_])+E.charCodeAt(_++);return y(C)}function y(b){return String.fromCharCode.apply(0,b)}if(n["seed"+s]=p,g(n.random(),e),t.exports){t.exports=p;try{r=require("crypto")}catch{}}})([],Math)});yl.alea=ede,yl.xor128=tde,yl.xorwow=nde,yl.xorshift7=rde,yl.xor4096=ode,yl.tychei=ade;var ide=yl,$B=ide.alea,qB=(function(){function t(e,n,r,o,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=$B(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,o=!1;!o;){var a=void 0,i=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t})();function sde(t){var e=Y(t,"x","clone",null);return Q.engine.runKernel(function(n){return We.make(e.shape,{dataId:e.dataId},e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}function ude(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var o=Lt([t,e],r),a=t<=e?t:e,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return Ed(ha(s,0),[n[0],1,1]);if(n.length===2)return Ed(ha(ha(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ed(ha(ha(ha(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}function lde(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new qB(e,n,r,!1,o),i=Lt(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}function cde(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new qB(e,n,r,!0,o),i=Lt(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}function dde(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var o=Lt(t,r),a=0;a<o.values.length;a++)o.values[a]=vae(e,n);return o.toTensor()}function fde(t,e,n){var r=ft(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=e();return We.make(t,{values:o},n)}function hde(t,e,n,r){r===void 0&&(r=!1);var o=Y(t,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=i===1?o.as2D(1,-1):o,u=Q.engine.runKernel(function(l){return l.multinomial(s,r,e,n)},{logits2D:s});return i===1?u.as1D():u}function pde(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=Y(t,"indices","oneHot","int32"),a=o.shape.concat([e]);return o=o.flatten(),Q.engine.runKernel(function(i){return i.oneHot(o,e,n,r)},{$indices:o},function(i){return{$indices:function(){return qn(o.shape,"float32")}}}).reshape(a)}function mde(t,e){var n=Y(t,"x","reshape",null);return e=yae(e,n.size),ee(n.size===ft(e),function(){return"new shape and old shape must have the same number of elements."}),Q.engine.runKernel(function(r){return r.reshape(n,e)},{$x:n},function(r){return{$x:function(){return r.reshape(n.shape)}}})}function vde(t,e){var n=Y(t,"x","squeeze");return ja(n,Ql(n.shape,e).newShape)}function gde(t,e){var n=Y(t,"x","cast");return Q.engine.runKernel(function(r){return r.cast(n,e)},{$x:n},function(r){return{$x:function(){return r.clone()}}})}function yde(t,e){var n=Y(t,"x","tile");return ee(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."}),Q.engine.runKernel(function(r,o){var a=r.tile(n,e);return o([n]),a},{$x:n},function(r,o){var a=o[0];return{$x:function(){var i=nn(a);if(a.rank===1)for(var s=0;s<e[0];++s)i=i.add(r.slice([s*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(s=0;s<e[0];++s)for(var u=0;u<e[1];++u)i=i.add(r.slice([s*a.shape[0],u*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(s=0;s<e[0];++s)for(u=0;u<e[1];++u)for(var l=0;l<e[2];++l)i=i.add(r.slice([s*a.shape[0],u*a.shape[1],l*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(a.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(s=0;s<e[0];++s)for(u=0;u<e[1];++u)for(l=0;l<e[2];++l)for(var d=0;d<e[3];++d)i=i.add(r.slice([s*a.shape[0],u*a.shape[1],l*a.shape[2],d*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return i}}})}function bde(t,e,n){return n===void 0&&(n=0),ee(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),em(t,[e],n)}function xde(t,e,n){return n===void 0&&(n=0),ee(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),em(t,e,n)}function wde(t,e,n){return n===void 0&&(n=0),ee(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),em(t,e,n)}function Cde(t,e,n){return n===void 0&&(n=0),ee(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),em(t,e,n)}function Sde(t,e,n){n===void 0&&(n=0);var r=Y(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o=e.map(function(a){return a[0]});return Q.engine.runKernel(function(a){return a.pad(r,e,n)},{$x:r},function(a){return{$x:function(){return a.slice(o,r.shape)}}})}function Ede(t,e){e===void 0&&(e=0);var n=Zg(t,"tensors","stack");if(ee(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;ee(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){vn(o,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){ee(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(s){return s.expandDims(e)});return xo(i,e)}function Rde(t,e,n){var r=Y(t,"x","batchToSpaceND"),o=e.reduce(function(a,i){return a*i});return ee(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),ee(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),ee(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o}),Q.engine.runKernel(function(a){return a.batchToSpaceND(r,e,n)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(e,n)}}})}function _de(t,e,n){var r=Y(t,"x","spaceToBatchND");return ee(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),ee(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),ee(r.shape.reduce(function(o,a,i){return i>0&&i<=e.length?o&&(a+n[i-1][0]+n[i-1][1])%e[i-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),Q.engine.runKernel(function(o){return o.spaceToBatchND(r,e,n)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(e,n)}}})}function Tde(t,e){e===void 0&&(e=0),e=e||0;var n=Y(t,"x","unstack");return ee(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length),Q.engine.runKernel(function(r){return r.unstack(n,e)},{$x:n},function(r){return{$x:function(){return za(r,e)}}})}function Ade(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=Y(t,"x","cumsum"),a=Pi([e|=0],o.rank),i=o;a!=null&&(i=o.transpose(a));var s=Fi(1,o.rank)[0],u=Q.engine.runKernel(function(l){return l.cumsum(i,s,n,r)},{permutedX:i},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return a!=null&&(u=u.transpose(a)),u}function Nde(t,e){e===void 0&&(e=0);var n=Y(t,"x","expandDims");ee(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(ee(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),ja(n,r)}function Dde(t,e,n){n===void 0&&(n="NHWC");var r=Y(t,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];return ee(o*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),ee(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+` for depthToSpace with input shape
          `+r.shape}),ee(i%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+i+" for depthToSpace with input shape "+r.shape}),Q.engine.runKernel(function(s){return s.depthToSpace(r,e,n)},{$x:r})}function kde(t,e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f;return mn(this,function(p){switch(p.label){case 0:return n=Y(t,"x","setdiff1d"),r=Y(e,"y","setdiff1d"),ee(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),ee(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),ee(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=p.sent(),[4,r.data()];case 2:for(a=p.sent(),i=new Set(a),s=0,d=0;d<o.length;d++)i.has(o[d])||s++;for(u=new xp([s],n.dtype),l=new xp([s],"int32"),d=0,f=0;d<o.length;d++)i.has(o[d])||(u.values[f]=o[d],l.values[f]=d,f++);return[2,[u.toTensor(),l.toTensor()]]}})})}function Lt(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",sB(t),new xp(t,e,n)}function Ide(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var XB=ie({batchToSpaceND_:Rde}),Mde=ie({cast_:gde}),Ode=ie({clone_:sde}),Pde=ie({cumsum_:Ade}),Fde=ie({depthToSpace_:Dde}),ha=ie({expandDims_:Nde}),KB=ie({eye_:ude}),Bde=ie({multinomial_:hde}),X2=ie({oneHot_:pde}),em=ie({pad_:Sde}),Lde=ie({pad1d_:bde}),jde=ie({pad2d_:xde}),zde=ie({pad3d_:wde}),Ude=ie({pad4d_:Cde}),Wde=ie({rand_:fde}),Vde=ie({randomNormal_:lde}),Hde=ie({randomUniform_:dde}),ja=ie({reshape_:mde}),YB=ie({spaceToBatchND_:_de}),QB=ie({squeeze_:vde}),za=ie({stack_:Ede}),Ed=ie({tile_:yde}),Gde=ie({truncatedNormal_:cde}),Dr=ie({unstack_:Tde}),$de=kde;function jE(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=Lt(t,"int32"),a=Lt([n.length,t.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*t.length;a.values.set(i,s)}return a.toTensor()}var Jv={};function qde(t){return t in Jv||(Jv[t]={}),Jv[t]}function Xde(t,e){if(t==="linear")return e?Uce:oce;if(t==="relu")return e?GB:HB;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Kde=128,zI=1e3,Yde=(function(){function t(e){if(this.gpgpu=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.disposed=!1,Q.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");if(e==null){var n=Mi(Q.get("WEBGL_VERSION"));this.binaryCache=qde(Q.get("WEBGL_VERSION")),this.gpgpu=new gle(n),this.canvas=n.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;this.textureManager=new Jle(this.gpgpu)}return t.prototype.register=function(e,n,r){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:n,dtype:r})},t.prototype.setDataMover=function(e){this.texData=new _B(e)},t.prototype.fromPixels=function(e,n){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=[e.height,e.width],o=[e.height,e.width,n];if(Q.get("IS_BROWSER")){if(!(e instanceof HTMLVideoElement||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(e instanceof HTMLVideoElement){if(this.fromPixels2DContext==null){if(document.readyState!=="complete")throw new Error("The DOM is not ready yet. Please call tf.browser.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixels2DContext=document.createElement("canvas").getContext("2d")}this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),e=this.fromPixels2DContext.canvas}}var a=this.makeTensorHandle(r,"int32");this.texData.get(a.dataId).usage=xi.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(a.dataId),e);var i=new Cue(o),s=this.compileAndRun(i,[a]);return this.disposeData(a.dataId),s},t.prototype.makeTensorHandle=function(e,n){var r={};return this.register(r,e,n),{dataId:r,shape:e,dtype:n}},t.prototype.write=function(e,n){if(n==null)throw new Error("MathBackendWebGL.write(): values can not be null");if(Q.get("DEBUG"))for(var r=0;r<n.length;r++){var o=n[r];if(!Iue(o))throw Error("The value "+o+" cannot be represented on this device.")}var a=this.texData.get(e),i=a.texture,s=a.texShape,u=a.usage,l=a.dtype,d=a.isPacked;if(l==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");i!=null&&(this.releaseTexture(e,i,s,u,l,d),a.texture=null,a.texShape=null),a.usage=xi.UPLOAD,a.values=n},t.prototype.readSync=function(e){var n=this.texData.get(e),r=n.values,o=n.dtype,a=n.complexTensors,i=n.slice,s=n.shape;if(i!=null){var u=new _t(s,jI),l=this.compileAndRun(u,[{dataId:e,shape:s,dtype:o}]),d=this.readSync(l.dataId);return l.dispose(),d}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;var f,p,m=this.activeTimers!=null;return m&&(f=performance.now()),o==="complex64"?p=AB(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(e),m&&(this.downloadWaitMs+=performance.now()-f),this.convertAndCacheOnCPU(e,p)},t.prototype.read=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f,p,m,g,y,b,C,S,E,_,T,D,I,k,M;return mn(this,function(O){switch(O.label){case 0:if(this.pendingRead.has(e))return o=this.pendingRead.get(e),[2,new Promise(function(F){return o.push(F)})];if(a=this.texData.get(e),i=a.texture,s=a.values,u=a.texShape,l=a.isPacked,d=a.shape,f=a.slice,p=a.dtype,f!=null)return m=new _t(d,jI),g=this.compileAndRun(m,[{dataId:e,shape:d,dtype:p}]),y=this.read(g.dataId),g.dispose(),[2,y];if(s!=null)return[2,this.convertAndCacheOnCPU(e)];if(this.pendingRead.set(e,[]),!Q.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Q.get("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return b=u[1],C=u[0],l&&(n=ec(u[0],u[1]),b=n[0],C=n[1]),S=this.gpgpu.maybeCreateBufferFromTexture(i,C,b),[4,this.gpgpu.createAndWaitForFence()];case 1:return O.sent(),S instanceof WebGLTexture?E=this.getValuesFromTexture(e):(_=ft(d),l?(T=ad(d),D=1,I=1,d.length&&(r=id(d),D=r[0],I=r[1]),E=this.gpgpu.downloadPackedMatrixFromBuffer(S,T,D,I,u[0],u[1]).subarray(0,_)):E=this.gpgpu.downloadFloat32MatrixFromBuffer(S,u[0],u[1]).subarray(0,_)),k=this.convertAndCacheOnCPU(e,E),M=this.pendingRead.get(e),this.pendingRead.delete(e),M.forEach(function(F){return F(k)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,k]}})})},t.prototype.getValuesFromTexture=function(e){var n,r=this,o=this.texData.get(e),a=o.shape,i=o.dtype,s=o.texture,u=o.texShape,l=ft(a);if(Q.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")){if(this.texData.get(e).isPacked){var d=ad(a),f=1,p=1;return a.length&&(f=(n=id(a))[0],p=n[1]),this.gpgpu.downloadMatrixFromPackedTexture(s,d,f,p,u[0],u[1]).subarray(0,l)}return this.gpgpu.downloadFloat32MatrixFromOutputTexture(s,u[0],u[1]).subarray(0,l)}var m=this.makeTensorHandle(a,"float32");m.size=ft(a),this.texData.get(m.dataId).usage=xi.DOWNLOAD;var g=dt(function(){var C=new xue(a);return r.compileAndRun(C,[{shape:a,dtype:i,dataId:e}],m,null,!1)}),y=this.texData.get(g.dataId),b=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,l);return this.disposeData(m.dataId),b},t.prototype.time=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u;return mn(this,function(l){switch(l.label){case 0:return n=this.activeTimers,r=[],o=!1,this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e(),a=Hd(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),i=Hd(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=n,o&&(this.programTimersStack=null),[4,Promise.all(a)];case 1:return s=l.sent(),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:mae(s),getExtraProfileInfo:function(){return s.map(function(d,f){return{name:i[f],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(e){return Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},t.prototype.getQueryTime=function(e){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){return Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(n=e).endMs-n.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))this.pendingDisposal.add(e);else if(this.texData.has(e)){var n=this.texData.get(e),r=n.texture,o=n.dtype,a=n.texShape,i=n.usage,s=n.complexTensors,u=n.isPacked,l=n.slice;if(r!=null){var d=l&&l.origDataId||e,f=this.dataRefCount.get(d);f>1?this.dataRefCount.set(d,f-1):(this.dataRefCount.delete(d),this.releaseTexture(e,r,a,i,o,u),this.texData.delete(e))}s!=null&&(s.real.dispose(),s.imag.dispose())}}},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getCPUBackend=function(){return Q.get("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Q.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,n){var r=this;return n===void 0&&(n=Kde),this.getCPUBackend()!=null&&e.every(function(o){return r.texData.get(o.dataId).texture==null&&o.size<n})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.getCanvas=function(){return this.canvas},t.prototype.complex=function(e,n){var r=this.makeOutputArray(e.shape,"complex64");return this.texData.get(r.dataId).complexTensors={real:Q.engine.keep(e.clone()),imag:Q.engine.keep(n.clone())},r},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,n,r);var o=this.texData.get(e.dataId).isPacked,a=CB(e.shape,n,r);if(o||!a){var i=Q.get("WEBGL_PACK_ARRAY_OPERATIONS")?new Yle(r):new Xle(r),s=i.getCustomSetupFunc(n);return this.compileAndRun(i,[e],null,s)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,n,r)},t.prototype.shallowSlice=function(e,n,r){var o=this.texData.get(e.dataId),a=We.make(r,{},e.dtype,this),i=this.texData.get(a.dataId);Object.assign(i,o),i.shape=r,i.dtype=e.dtype;var s=SB(n,e.strides);o.slice&&(s+=o.slice.flatOffset),i.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};var u=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,u+1),a},t.prototype.stridedSlice=function(e,n,r,o,a,i,s,u,l){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,n,r,o,a,i,s,u,l);var d=kE(e.shape,n,r,o,a,i,s,u,l),f=d[0],p=d[1],m=d[2],g=p.filter(function(b,C){return m.indexOf(C)===-1});if(g.some(function(b){return b===0}))return Jn([],g);var y=new Qle(f,o,p,m);return this.compileAndRun(y,[e])},t.prototype.reverse=function(e,n){var r=Q.get("WEBGL_PACK_ARRAY_OPERATIONS")?new Gle(e.shape,n):new Hle(e.shape,n);return this.compileAndRun(r,[e])},t.prototype.concat=function(e,n){if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,n);if(e.length===1)return e[0];if(e.length>Q.get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),o=this.concat(e.slice(0,r),n),a=this.concat(e.slice(r),n);return this.concat([o,a],n)}if(Q.get("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var i=new aue(e.map(function(d){return d.shape}),n);return this.compileAndRun(i,e)}var s=Gd(e.map(function(d){return d.shape}),n),u=e.map(function(d){return d.as2D(-1,ft(d.shape.slice(n)))}),l=new oue(u.map(function(d){return d.shape}));return this.compileAndRun(l,u).reshape(s)},t.prototype.neg=function(e){var n=new _t(e.shape,lce);return this.compileAndRun(n,[e])},t.prototype.batchMatMul=function(e,n,r,o){var a=r?e.shape[2]:e.shape[1],i=o?n.shape[1]:n.shape[2],s=r?e.shape[1]:e.shape[2],u=e.shape[0];if((a===1||i===1)&&s>zI){r&&(e=e.transpose([0,2,1])),o&&(n=n.transpose([0,2,1]));var l=i===1?e:e.as3D(u,s,1),d=i===1?2:1,f=i===1?n.as3D(u,1,s):n;return this.multiply(l,f).sum(d,!0)}var p=vr(e.dtype,n.dtype),m=new pw(e.shape,[u,a,i],r,o),g=this.makePackedTensor(m.outputShape,p);return this.compileAndRun(m,[e,n],g)},t.prototype.fusedBatchMatMul=function(e,n,r,o,a,i){var s=r?e.shape[2]:e.shape[1],u=o?n.shape[1]:n.shape[2],l=e.shape[0],d=vr(e.dtype,n.dtype),f=new pw(e.shape,[l,s,u],r,o,!!a,i?Xde(i,!0):null),p=this.makePackedTensor(f.outputShape,d),m=[e,n];return a&&m.push(a),this.compileAndRun(f,m,p)},t.prototype.multiply=function(e,n){if(e.dtype==="complex64"){var r=this.texData.get(e.dataId),o=this.texData.get(n.dataId),a=new _I(RI.REAL,e.shape,n.shape),i=new _I(RI.IMAG,e.shape,n.shape),s=[this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag),this.makeComplexComponentTensorHandle(n,o.complexTensors.real),this.makeComplexComponentTensorHandle(n,o.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(i,s),d=this.complex(u,l);return u.dispose(),l.dispose(),d}if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.multiply(e,n);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,TI,e.dtype);var f=new jn(TI,e.shape,n.shape),p=this.makeOutputArray(f.outputShape,e.dtype);return this.compileAndRun(f,[e,n],p)},t.prototype.batchNormalization=function(e,n,r,o,a,i){var s=[e,n,r],u=null;i!=null&&(u=i.shape,s.push(i));var l=null;if(a!=null&&(l=a.shape,s.push(a)),Q.get("WEBGL_PACK_BATCHNORMALIZATION")){var d=new wse(e.shape,n.shape,r.shape,u,l,o);return this.compileAndRun(d,s)}var f=new xse(e.shape,n.shape,r.shape,u,l,o);return this.compileAndRun(f,s)},t.prototype.localResponseNormalization4D=function(e,n,r,o,a){var i=new Sle(e.shape,n,r,o,a);return this.compileAndRun(i,[e])},t.prototype.LRNGrad=function(e,n,r,o,a,i,s){var u=new Ele(n.shape,o,a,i,s);return this.compileAndRun(u,[n,r,e])},t.prototype.tile=function(e,n){var r=new Zle(e.shape,n);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,n,r){var o=Q.get("WEBGL_PACK_ARRAY_OPERATIONS")?new Ole(e.shape,n,r):new Mle(e.shape,n,r);return this.compileAndRun(o,[e])},t.prototype.transpose=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,n);var r=Q.get("WEBGL_PACK_ARRAY_OPERATIONS")?new rce(e.shape,n):new tce(e.shape,n);return this.compileAndRun(r,[e])},t.prototype.gather=function(e,n,r){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.gather(e,n,r);var o=new Sue(e.shape,n.size,r);return this.compileAndRun(o,[e,n])},t.prototype.batchToSpaceND=function(e,n,r){ee(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=n.reduce(function(d,f){return d*f}),a=ey(e.shape,n,o),i=ty(a.length,n.length),s=ny(e.shape,n,o),u=gB(r,n.length),l=yB(s,r,n.length);return e.reshape(a).transpose(i).reshape(s).slice(u,l)},t.prototype.spaceToBatchND=function(e,n,r){ee(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=n.reduce(function(f,p){return f*p}),a=[[0,0]];a.push.apply(a,r);for(var i=1+n.length;i<e.shape.length;++i)a.push([0,0]);var s=e.pad(a),u=ey(s.shape,n,o,!1),l=ty(u.length,n.length,!1),d=ny(s.shape,n,o,!1);return s.reshape(u).transpose(l).reshape(d)},t.prototype.reduce=function(e,n,r){var o=e.shape[0],a=e.shape[1],i=lw(a),s=new Ple({windowSize:i,inSize:a,batchSize:o},n),u=s.outputShape,l=u[0],d=u[1],f=this.makeOutputArray([l,d],r);return this.compileAndRun(s,[e],f),f.shape[1]===1?f:this.reduce(f,n,r)},t.prototype.argReduce=function(e,n,r){r===void 0&&(r=null);var o=e.shape[0],a=e.shape[1];r!=null&&(o=r.shape[0],a=r.shape[1]);var i=lw(a),s=new Mie({windowSize:i,inSize:a,batchSize:o},n,r==null),u=s.outputShape,l=u[0],d=u[1],f=this.makeOutputArray([l,d],"int32"),p=[e];return r!=null&&p.push(r),this.compileAndRun(s,p,f),f.shape[1]===1?f:this.argReduce(e,n,f)},t.prototype.argReducePacked=function(e,n,r){r===void 0&&(r=null);var o=r!=null?r.shape:e.shape,a=lw(o[o.length-1]),i=new yse(o,a,n,r==null),s=this.makePackedTensor(i.outputShape,"int32"),u=r==null?[e]:[e,r];return this.compileAndRun(i,u,s),s.rank===e.rank?this.argReducePacked(e,n,s):s},t.prototype.sum=function(e,n){Mo("sum",n,e.rank);var r=Fr(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a),s=aw(e.dtype);return this.reduce(i,"sum",s).reshape(o)},t.prototype.prod=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,n);var r=Fr(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a),s=aw(e.dtype);return this.reduce(i,"prod",s).reshape(o)},t.prototype.unsortedSegmentSum=function(e,n,r){var o=0,a=Pi([o],e.rank),i=e;a!=null&&(i=e.transpose(a),o=Fi(1,e.rank)[0]);var s=cie(i.shape,o,r),u=ft([i.shape[o]]),l=i.as2D(-1,u),d=aw(e.dtype),f=this.segOpCompute(l,"unsortedSegmentSum",n,d,r).reshape(s);return a!=null&&(f=f.transpose(DE(a))),f},t.prototype.segOpCompute=function(e,n,r,o,a){var i=e.shape[0],s=e.shape[1],u=lie(s,a),l=new $le({windowSize:u,inSize:s,batchSize:i,numSegments:a},n),d=l.outputShape,f=d[0],p=d[1],m=this.makeOutputArray([f,p],o);return this.compileAndRun(l,[e,r],m),m.shape[1]===a?m:(r=EB(0,a).tile([s/u]),this.segOpCompute(m,n,r,o,a))},t.prototype.argMinMaxReduce=function(e,n,r){var o=[n];if(Mo("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,e.rank),!Q.get("WEBGL_PACK_REDUCE")||e.rank<=2){var a=Fr(e.shape,o),i=a[0],s=ft(a[1]),u=e.as2D(-1,s);return this.argReduce(u,r).reshape(i)}return this.argReducePacked(e,r)},t.prototype.argMin=function(e,n){return this.argMinMaxReduce(e,n,"min")},t.prototype.argMax=function(e,n){return this.argMinMaxReduce(e,n,"max")},t.prototype.cumsum=function(e,n,r,o){if(n!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+n);var a=new gue(e.shape,r,o);return this.compileAndRun(a,[e])},t.prototype.equal=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Hse,"bool");var r=new jn(Rse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.notEqual=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Gse,"bool");var r=new jn(_se,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.less=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.less(e,n);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,$se,"bool");var r=new jn(Tse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.lessEqual=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,qse,"bool");var r=new jn(Ase,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.greater=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.greater(e,n);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Xse,"bool");var r=new jn(Nse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.greaterEqual=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Kse,"bool");var r=new jn(Dse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.logicalNot=function(e){var n=new _t(e.shape,jce);return this.compileAndRun(n,[e])},t.prototype.logicalAnd=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Yse,"bool");var r=new jn(kse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.logicalOr=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Qse,"bool");var r=new jn(Ise,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.select=function(e,n,r){var o=new qle(e.rank,n.shape,n.rank),a=this.makeOutputArray(o.outputShape,vr(n.dtype,r.dtype));return this.compileAndRun(o,[e,n,r],a)},t.prototype.where=function(e){G2("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var n=e.dataSync();return jE(e.shape,n)},t.prototype.topk=function(e,n,r){return DB(e.dataSync(),e.shape,e.dtype,n)},t.prototype.min=function(e,n){Mo("min",n,e.rank);var r=Fr(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(o)},t.prototype.minimum=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.minimum(e,n);var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new os(Zse,e.shape,n.shape):new jn(Ose,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.mod=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new os(eue,e.shape,n.shape):new jn(Pse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.max=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,n);Mo("max",n,e.rank);var r=Fr(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(o)},t.prototype.maximum=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.maximum(e,n);var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new os(Jse,e.shape,n.shape):new jn(Mse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.all=function(e,n){Mo("all",n,e.rank);var r=Fr(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a);return this.reduce(i,"all",i.dtype).reshape(o)},t.prototype.any=function(e,n){Mo("any",n,e.rank);var r=Fr(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a);return this.reduce(i,"any",i.dtype).reshape(o)},t.prototype.squaredDifference=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new os(AI,e.shape,n.shape):new jn(AI,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.realDivide=function(e,n){var r=new jn(Cse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e,n],o)},t.prototype.floorDiv=function(e,n){var r=Sse;if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,jse,"int32");var o=new jn(r,e.shape,n.shape),a=this.makeOutputArray(o.outputShape,"int32");return this.compileAndRun(o,[e,n],a)},t.prototype.add=function(e,n){if(e.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(e,n,cw);if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.add(e,n);var r=vr(e.dtype,n.dtype);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,cw,r);var o=new jn(cw,e.shape,n.shape),a=this.makeOutputArray(o.outputShape,r);return this.compileAndRun(o,[e,n],a)},t.prototype.packedBinaryOp=function(e,n,r,o){var a=new os(r,e.shape,n.shape),i=this.makePackedTensor(a.outputShape,o);return this.compileAndRun(a,[e,n],i)},t.prototype.complexSeparableBinaryOp=function(e,n,r){var o=this,a=this.texData.get(e.dataId),i=this.texData.get(n.dataId),s=[[a.complexTensors.real,i.complexTensors.real],[a.complexTensors.imag,i.complexTensors.imag]].map(function(f){var p=f[0],m=f[1],g=o.makeComplexComponentTensorHandle(e,p),y=o.makeComplexComponentTensorHandle(n,m),b=new jn(r,e.shape,n.shape),C=o.makeOutputArray(b.outputShape,vr(p.dtype,m.dtype));return o.compileAndRun(b,[g,y],C)}),u=s[0],l=s[1],d=this.complex(u,l);return u.dispose(),l.dispose(),d},t.prototype.makeComplexComponentTensorHandle=function(e,n){return{dataId:n.dataId,dtype:n.dtype,shape:e.shape}},t.prototype.addN=function(e){for(var n=e[0],r=1;r<e.length;r++)n=this.add(n,e[r]);return n},t.prototype.subtract=function(e,n){if(e.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(e,n,dw);if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.subtract(e,n);var r=vr(e.dtype,n.dtype);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,dw,e.dtype);var o=new jn(dw,e.shape,n.shape),a=this.makeOutputArray(o.outputShape,r);return this.compileAndRun(o,[e,n],a)},t.prototype.pow=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS"),o=r?new os(zse,e.shape,n.shape):new jn(Ese,e.shape,n.shape),a=vr(e.dtype,n.dtype),i=r?this.makePackedTensor(o.outputShape,a):this.makeOutputArray(o.outputShape,a);return this.compileAndRun(o,[e,n],i)},t.prototype.ceil=function(e){var n=new _t(e.shape,cce);return this.compileAndRun(n,[e])},t.prototype.floor=function(e){var n=new _t(e.shape,dce);return this.compileAndRun(n,[e])},t.prototype.sign=function(e){var n=new _t(e.shape,fce);return this.compileAndRun(n,[e])},t.prototype.isNaN=function(e){var n=new _t(e.shape,hce),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.isInf=function(e){var n=new _t(e.shape,pce),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.isFinite=function(e){var n=new _t(e.shape,mce),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.round=function(e){var n=new _t(e.shape,vce);return this.compileAndRun(n,[e])},t.prototype.exp=function(e){var n;return n=Q.get("WEBGL_PACK")?new vw(e.shape,LI):new _t(e.shape,LI),this.compileAndRun(n,[e])},t.prototype.expm1=function(e){var n=new _t(e.shape,gce);return this.compileAndRun(n,[e])},t.prototype.log=function(e){var n;return n=Q.get("WEBGL_PACK")?new vw(e.shape,Wce):new _t(e.shape,yce),this.compileAndRun(n,[e])},t.prototype.log1p=function(e){var n=new _t(e.shape,bce);return this.compileAndRun(n,[e])},t.prototype.sqrt=function(e){var n=new _t(e.shape,xce);return this.compileAndRun(n,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var n=new _t(e.shape,wce);return this.compileAndRun(n,[e])},t.prototype.square=function(e){var n=new _t(e.shape,Bce);return this.compileAndRun(n,[e])},t.prototype.reciprocal=function(e){var n=new _t(e.shape,Lce);return this.compileAndRun(n,[e])},t.prototype.relu=function(e){var n;return n=Q.get("WEBGL_PACK")?new vw(e.shape,GB):new _t(e.shape,HB),this.compileAndRun(n,[e])},t.prototype.prelu=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new os(Use,e.shape,n.shape):new jn(Lse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.elu=function(e){var n=new _t(e.shape,ice);return this.compileAndRun(n,[e])},t.prototype.eluDer=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new os(Wse,e.shape,n.shape):new jn(Bse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.selu=function(e){var n=new _t(e.shape,sce);return this.compileAndRun(n,[e])},t.prototype.int=function(e){var n=new _t(e.shape,zce),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[e],r)},t.prototype.clip=function(e,n,r){var o,a=(o=Q.get("WEBGL_PACK_CLIP")?new nue(e.shape):new tue(e.shape)).getCustomSetupFunc(n,r);return this.compileAndRun(o,[e],null,a)},t.prototype.abs=function(e){var n=new _t(e.shape,ace);return this.compileAndRun(n,[e])},t.prototype.complexAbs=function(e){var n=this.texData.get(e.dataId),r=new rue(e.shape),o=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag)];return this.compileAndRun(r,o)},t.prototype.sigmoid=function(e){var n=new _t(e.shape,Cce);return this.compileAndRun(n,[e])},t.prototype.softplus=function(e){var n=new _t(e.shape,Sce);return this.compileAndRun(n,[e])},t.prototype.sin=function(e){var n=new _t(e.shape,Ece);return this.compileAndRun(n,[e])},t.prototype.cos=function(e){var n=new _t(e.shape,Rce);return this.compileAndRun(n,[e])},t.prototype.tan=function(e){var n=new _t(e.shape,_ce);return this.compileAndRun(n,[e])},t.prototype.asin=function(e){var n=new _t(e.shape,Tce);return this.compileAndRun(n,[e])},t.prototype.acos=function(e){var n=new _t(e.shape,Ace);return this.compileAndRun(n,[e])},t.prototype.atan=function(e){var n=new _t(e.shape,Nce);return this.compileAndRun(n,[e])},t.prototype.atan2=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new os(Vse,e.shape,n.shape):new jn(Fse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.sinh=function(e){var n=new _t(e.shape,Dce);return this.compileAndRun(n,[e])},t.prototype.cosh=function(e){var n=new _t(e.shape,kce);return this.compileAndRun(n,[e])},t.prototype.tanh=function(e){var n=new _t(e.shape,Ice);return this.compileAndRun(n,[e])},t.prototype.asinh=function(e){var n=new _t(e.shape,Mce);return this.compileAndRun(n,[e])},t.prototype.acosh=function(e){var n=new _t(e.shape,Oce);return this.compileAndRun(n,[e])},t.prototype.atanh=function(e){var n=new _t(e.shape,Pce);return this.compileAndRun(n,[e])},t.prototype.erf=function(e){var n=new _t(e.shape,Fce);return this.compileAndRun(n,[e])},t.prototype.step=function(e,n){var r=new _t(e.shape,uce(n));return this.compileAndRun(r,[e])},t.prototype.conv2dByMatMul=function(e,n,r){var o=e.shape,a=this.texData.get(e.dataId),i=r.inChannels,s=o[0]*o[1]*o[2],u=r.outChannels,l=(s===1||u===1)&&i>zI,d=o[2]%2!=0&&!!a.isPacked;if(l||!Q.get("WEBGL_LAZILY_UNPACK")||!Q.get("WEBGL_PACK_BINARY_OPERATIONS")||!d){var f=this.reshape(e,[1,o[0]*o[1]*o[2],r.inChannels]),p=this.reshape(n,[1,r.inChannels,r.outChannels]);return this.reshape(this.batchMatMul(f,p,!1,!1),r.outShape)}var m=We.make([1,o[0]*o[1]*(o[2]+1),r.inChannels],{dataId:e.dataId},e.dtype,this),g=a.shape;a.shape=a.shape.slice(),a.shape[a.shape.length-2]++,ee(Qv(a.shape,m.shape),function(){return"packed reshape "+a.shape+" to "+m.shape+" isn't free"});var y=this.reshape(n,[1,r.inChannels,r.outChannels]),b=this.batchMatMul(m,y,!1,!1),C=this.texData.get(b.dataId);return ee(C.isPacked,function(){return"batchMatMul result is expected to be packed"}),a.shape=g,C.shape=r.outShape,We.make(r.outShape,{dataId:b.dataId},b.dtype,this)},t.prototype.conv2dWithIm2Row=function(e,n,r){var o=r.filterWidth,a=r.filterHeight,i=r.inChannels,s=r.outWidth,u=r.outHeight,l=o*a*i,d=u*s,f=[l,d],p=e.squeeze([0]),m=n.reshape([1,l,-1]),g=new Cle(f,p.shape,r),y=this.compileAndRun(g,[p]).reshape([1,f[0],f[1]]),b=new pw(y.shape,[1,d,r.outChannels],!0,!1);return this.compileAndRun(b,[y,m]).reshape([1,u,s,r.outChannels])},t.prototype.conv2d=function(e,n,r){if(r.filterHeight===1&&r.filterWidth===1&&r.dilationHeight===1&&r.dilationWidth===1&&r.strideHeight===1&&r.strideWidth===1&&(r.padInfo.type==="SAME"||r.padInfo.type==="VALID"))return this.conv2dByMatMul(e,n,r);if(Q.get("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,n,r);var o=new fue(r);return this.compileAndRun(o,[e,n])},t.prototype.conv2dDerInput=function(e,n,r){var o=new sue(r);return this.compileAndRun(o,[e,n])},t.prototype.conv2dDerFilter=function(e,n,r){var o=new iue(r);return this.compileAndRun(o,[e,n])},t.prototype.depthwiseConv2D=function(e,n,r){var o;return Q.get("WEBGL_PACK_DEPTHWISECONV")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1?(o=new mue(r),this.compileAndRun(o,[e,n],this.makePackedTensor(r.outShape,e.dtype))):(o=new pue(r),this.compileAndRun(o,[e,n]))},t.prototype.depthwiseConv2DDerInput=function(e,n,r){var o=new due(r);return this.compileAndRun(o,[e,n])},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){var o=new cue(r);return this.compileAndRun(o,[e,n])},t.prototype.conv3d=function(e,n,r){var o=new hue(r);return this.compileAndRun(o,[e,n])},t.prototype.conv3dDerInput=function(e,n,r){var o=new lue(r);return this.compileAndRun(o,[e,n])},t.prototype.conv3dDerFilter=function(e,n,r){var o=new uue(r);return this.compileAndRun(o,[e,n])},t.prototype.maxPool=function(e,n){var r=new mw(n,"max",!1),o=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[e],o)},t.prototype.avgPool=function(e,n){var r=new mw(n,"avg",!1),o=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e],o)},t.prototype.maxPoolBackprop=function(e,n,r,o){var a=new mw(o,"max",!0),i=this.compileAndRun(a,[n]),s=new Rle(o),u=this.makeOutputArray(s.outputShape,n.dtype),l=this.compileAndRun(s,[e,i],u);return i.dispose(),l},t.prototype.avgPoolBackprop=function(e,n,r){var o=new bse(r),a=this.makeOutputArray(o.outputShape,n.dtype);return this.compileAndRun(o,[e],a)},t.prototype.cast=function(e,n){return TB(e,n,this)},t.prototype.unstack=function(e,n){for(var r=e.shape[n],o=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==n&&(o[a++]=e.shape[i]);var s=new Array(e.rank).fill(0),u=e.shape.slice();u[n]=1;var l=new Array(r);for(i=0;i<l.length;i++)s[n]=i,l[i]=this.slice(e,s,u).reshape(o);return l},t.prototype.reshape=function(e,n){var r=this.texData.get(e.dataId);return!r.isPacked||Qv(e.shape,n)||r.texture!==null&&Qv(r.shape,n)?$2(e,n):this.packedReshape(e,n)},t.prototype.resizeBilinear=function(e,n,r,o){var a=Q.get("WEBGL_PACK_IMAGE_OPERATIONS")?new Ule(e.shape,n,r,o):new zle(e.shape,n,r,o);return this.compileAndRun(a,[e])},t.prototype.resizeBilinearBackprop=function(e,n,r){var o=new jle(e,n,r);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighbor=function(e,n,r,o){var a=new Vle(e.shape,n,r,o);return this.compileAndRun(a,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){var o=new Wle(e,n,r);return this.compileAndRun(o,[e])},t.prototype.multinomial=function(e,n,r,o){var a=n?e:Hu(e),i=a.shape[0],s=a.shape[1],u=new _le(i,s,r),l=this.makeOutputArray(u.outputShape,"int32"),d=u.getCustomSetupFunc(o);return this.compileAndRun(u,[a],l,d)},t.prototype.oneHot=function(e,n,r,o){var a=new Tle(e.size,n,r,o);return this.compileAndRun(a,[e])},t.prototype.nonMaxSuppression=function(e,n,r,o,a){return G2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),ME(e.dataSync(),n.dataSync(),r,o,a)},t.prototype.cropAndResize=function(e,n,r,o,a,i){var s=new vue(e.shape,n.shape,o,a,i);return this.compileAndRun(s,[e,n,r])},t.prototype.depthToSpace=function(e,n,r){ee(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});var o=e.shape[0],a=r==="NHWC"?e.shape[1]:e.shape[2],i=r==="NHWC"?e.shape[2]:e.shape[3],s=r==="NHWC"?e.shape[3]:e.shape[1],u=a*n,l=i*n,d=s/(n*n),f=new bue(r==="NHWC"?[o,u,l,d]:[o,d,u,l],n,r);return this.compileAndRun(f,[e])},t.prototype.split=function(e,n,r){return NB(e,n,r)},t.prototype.scatterND=function(e,n,r){var o=ry(n,e,r),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize,d=[l/s,s],f=e.reshape([i,a]),p=n.reshape([i,s]);if(l===0)return $2(Jn([]),r);var m=Pe(0),g=new PI(i,a,f.rank,p.rank,u,d);return this.compileAndRun(g,[p,f,m]).reshape(r)},t.prototype.sparseToDense=function(e,n,r,o){var a=ry(n,e,r),i=a.sliceRank,s=a.numUpdates,u=a.strides,l=a.outputSize,d=new PI(s,i,e.rank,n.rank,u,[l,1],!1);return this.compileAndRun(d,[n,e,o]).reshape(r)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,n){var r=this.texData.get(e.dataId),o=new kI(DI.REAL,e.shape,n),a=new kI(DI.IMAG,e.shape,n),i=[this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag)],s=this.compileAndRun(o,i),u=this.compileAndRun(a,i),l=this.complex(s,u).as2D(e.shape[0],e.shape[1]);return s.dispose(),u.dispose(),l},t.prototype.gatherND=function(e,n){var r=n.shape,o=r[r.length-1],a=xB(e,n),i=a[0],s=a[1],u=a[2],l=a[3],d=n.reshape([s,o]),f=e.reshape([e.size/u,u]),p=new Rue(o,l,[s,u]);return this.compileAndRun(p,[f,d]).reshape(i)},t.prototype.fill=function(e,n,r){if((r=r||$p(n))==="string"){var o=Qg(r,ft(e));return o.fill(n),We.make(e,{values:o},r)}var a=new wue(e,n),i=a.getCustomSetupFunc(n),s=this.makeOutputArray(e,r);return this.compileAndRun(a,[],s,i)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},t.prototype.makeOutputArray=function(e,n){return We.make(e,{},n,this)},t.prototype.makePackedTensor=function(e,n){var r=We.make(e,{},n,this);return this.texData.get(r.dataId).isPacked=!0,r},t.prototype.unpackTensor=function(e){var n=new Vce(e.shape);return this.compileAndRun(n,[e],We.make(n.outputShape,{},e.dtype,this))},t.prototype.packTensor=function(e){var n=new Ale(e.shape);return this.compileAndRun(n,[e],this.makePackedTensor(e.shape,e.dtype))},t.prototype.packedReshape=function(e,n){var r=e.reshape([ad(e.shape)].concat(id(e.shape))),o=[ad(n)].concat(id(n)),a=new Fle(o,r.shape);return this.compileAndRun(a,[r]).reshape(n)},t.prototype.compileAndRun=function(e,n,r,o,a){var i=this;if(a===void 0&&(a=!0),r==null&&(r=e.usesPackedTextures?this.makePackedTensor(e.outputShape,n[0].dtype):this.makeOutputArray(e.outputShape,n[0].dtype)),r.size===0)return this.texData.get(r.dataId).values=L2(r.dtype,0),r;var s=n.map(function(E){if(E.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var _=i.texData.get(E.dataId);if(_.texture==null){if(!e.usesPackedTextures&&ft(E.shape)<=Q.get("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:E.shape,texData:null,isUniform:!0,uniformValues:i.readSync(E.dataId)};e.usesPackedTextures&&(_.isPacked=!0,_.shape=E.shape)}else if(!!_.isPacked!=!!e.usesPackedTextures)E=_.isPacked?i.unpackTensor(E):i.packTensor(E),_=i.texData.get(E.dataId);else if(_.isPacked&&!Qv(_.shape,E.shape)){var T=E,D=E.shape;E.shape=_.shape,E=i.packedReshape(E,D),_=i.texData.get(E.dataId),T.shape=D}return i.uploadToGPU(E.dataId),{shape:E.shape,texData:_,isUniform:!1}});this.uploadToGPU(r.dataId);var u,l={shape:r.shape,texData:this.texData.get(r.dataId),isUniform:!1},d=wle(e,s,l),f=this.getAndSaveBinary(d,function(){return ble(i.gpgpu,e,s,l)}),p=this.activeTimers!=null;p&&(u=this.startTimer()),xle(this.gpgpu,f,s,l,o);var m=1024*Q.get("WEBGL_NUM_MB_BEFORE_PAGING");if(a&&this.numBytesInGPU>m)for(var g=this.numBytesInGPU-m;g>0&&this.lruDataGPU.length>0;){var y=this.lruDataGPU.shift(),b=this.texData.get(y),C=b.texShape,S=b.dtype;g-=this.computeBytes(C,S),this.read(y)}return p&&(u=this.endTimer(u),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(u)})),Q.get("WEBGL_LAZILY_UNPACK")||!this.texData.get(r.dataId).isPacked||e.isPackShader?r:this.unpackTensor(r)},t.prototype.getAndSaveBinary=function(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas.remove(),this.fromPixels2DContext!=null&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return dt(function(){var n=Q.get("DEBUG");Q.set("DEBUG",!1);var r=e.abs(Pe(1e-8)).dataSync()[0];return Q.set("DEBUG",n),r>0?32:16})},t.prototype.uploadToGPU=function(e){var n,r=this.texData.get(e),o=r.shape,a=r.dtype,i=r.values,s=r.texture,u=r.usage,l=r.isPacked;if(s==null){var d,f=this.activeTimers!=null;f&&(d=performance.now());var p=Que(o,l);r.texShape=p;var m=this.acquireTexture(e,p,u,a,l);if(r.texture=m,i!=null){if(l){var g=ad(o),y=1,b=1;o.length&&(y=(n=id(o))[0],b=n[1]),this.gpgpu.uploadMatrixToPackedTexture(m,g,y,b,p[0],p[1],UI(i))}else this.gpgpu.uploadMatrixToTexture(m,p[0],p[1],UI(i));r.values=null,f&&(this.uploadWaitMs+=performance.now()-d)}}else Q.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY&&this.lruDataGPU.indexOf(e)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(e),1),this.lruDataGPU.push(e))},t.prototype.convertAndCacheOnCPU=function(e,n){var r=this.texData.get(e),o=r.texture,a=r.texShape,i=r.dtype,s=r.usage,u=r.isPacked;return o!=null&&(this.releaseTexture(e,o,a,s,i,u),r.texture=null,r.texShape=null,r.isPacked=!1),r.usage=xi.UPLOAD,n!=null&&(r.values=Qde(n,i)),r.values},t.prototype.releaseTexture=function(e,n,r,o,a,i){if(Q.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY){var s=this.lruDataGPU.indexOf(e);s>=0&&this.lruDataGPU.splice(s,1)}this.numBytesInGPU-=this.computeBytes(r,a),this.textureManager.releaseTexture(n,r,o,i)},t.prototype.acquireTexture=function(e,n,r,o,a){return Q.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY&&this.lruDataGPU.push(e),this.numBytesInGPU+=this.computeBytes(n,o),this.textureManager.acquireTexture(n,r,a)},t.prototype.computeBytes=function(e,n){return e[0]*e[1]*nB(n)},t})();function Qde(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){for(var n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}function UI(t){return t instanceof Float32Array?t:new Float32Array(t)}function Jde(t){var e=Y(t,"x","neg");return Q.engine.runKernel(function(n){return n.neg(e)},{$x:e},function(n){return{$x:function(){return n.neg()}}})}function Zde(t){var e=Y(t,"x","ceil");return Q.engine.runKernel(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function efe(t){var e=Y(t,"x","floor");return Q.engine.runKernel(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function tfe(t){var e=Y(t,"x","sign");return Q.engine.runKernel(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function nfe(t){var e=Y(t,"x","isNaN");return Q.engine.runKernel(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function rfe(t){var e=Y(t,"x","isInf");return Q.engine.runKernel(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function ofe(t){var e=Y(t,"x","isFinite");return Q.engine.runKernel(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function afe(t){var e=Y(t,"x","round");return Q.engine.runKernel(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function ife(t){var e=Y(t,"x","exp");return Q.engine.runKernel(function(n,r){var o=n.exp(e);return r([o]),o},{$x:e},function(n,r){return{$x:function(){return n.mulStrict(r[0])}}})}function sfe(t){var e=Y(t,"x","expm1");return Q.engine.runKernel(function(n,r){var o=n.expm1(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}})}function ufe(t){var e=Y(t,"x","log");return Q.engine.runKernel(function(n,r){var o=n.log(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat())}}})}function lfe(t){var e=Y(t,"x","log1p");return Q.engine.runKernel(function(n,r){var o=n.log1p(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}})}function cfe(t){var e=Y(t,"x","sqrt");return Q.engine.runKernel(function(n,r){var o=n.sqrt(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}function dfe(t){var e=Y(t,"x","rsqrt");return Q.engine.runKernel(function(n,r){var o=n.rsqrt(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.pow(1.5).mul(2)).neg()}}})}function ffe(t){var e=Y(t,"x","square");return Q.engine.runKernel(function(n,r){return r([e]),n.square(e)},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.toFloat().mul(2))}}})}function hfe(t){var e=Y(t,"x","reciprocal");return Q.engine.runKernel(function(n,r){var o=n.reciprocal(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}})}function pfe(t){var e=Y(t,"x","abs");return e.dtype==="complex64"?Q.engine.runKernel(function(n){return n.complexAbs(e)},{$x:e}):Q.engine.runKernel(function(n,r){var o=n.abs(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.toFloat().step(-1))}}})}function mfe(t,e,n){var r=Y(t,"x","clipByValue");return ee(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."}),Q.engine.runKernel(function(o,a){var i=o.clip(r,e,n);return a([r]),i},{$x:r},function(o,a){var i=a[0];return{$x:function(){return o.where(i.greaterEqual(e).logicalAnd(i.lessEqual(n)),nn(o))}}})}function vfe(t){var e=Y(t,"x","sigmoid");return Q.engine.runKernel(function(n,r){var o=n.sigmoid(e);return r([o]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.mul(Pe(1).sub(o)))}}})}function gfe(t){var e=Y(t,"x","logSigmoid");return Q.engine.runKernel(function(n,r){var o=n.softplus(e.neg()).neg();return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}function yfe(t){var e=Y(t,"x","softplus");return Q.engine.runKernel(function(n,r){var o=n.softplus(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}})}function bfe(t){var e=Y(t,"x","sin");return Q.engine.runKernel(function(n,r){var o=n.sin(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cos().mul(n)}}})}function xfe(t){var e=Y(t,"x","cos");return Q.engine.runKernel(function(n,r){var o=n.cos(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sin().neg().mul(n)}}})}function wfe(t){var e=Y(t,"x","tan");return Q.engine.runKernel(function(n,r){var o=n.tan(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}})}function Cfe(t){var e=Y(t,"x","asin");return Q.engine.runKernel(function(n,r){var o=n.asin(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Pe(1).sub(o.toFloat().square()).sqrt())}}})}function Sfe(t){var e=Y(t,"x","acos");return Q.engine.runKernel(function(n,r){var o=n.acos(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Pe(1).sub(o.toFloat().square()).sqrt()).neg()}}})}function Efe(t){var e=Y(t,"x","atan");return Q.engine.runKernel(function(n,r){var o=n.atan(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}function Rfe(t){var e=Y(t,"x","sinh");return Q.engine.runKernel(function(n,r){var o=n.sinh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}function _fe(t){var e=Y(t,"x","cosh");return Q.engine.runKernel(function(n,r){var o=n.cosh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}function Tfe(t){var e=Y(t,"x","tanh");return Q.engine.runKernel(function(n,r){var o=n.tanh(e);return r([o]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return Pe(1).sub(o.square()).mulStrict(n)}}})}function Afe(t){var e=Y(t,"x","asinh");return Q.engine.runKernel(function(n,r){var o=n.asinh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Pe(1).add(o.toFloat().square()).sqrt())}}})}function Nfe(t){var e=Y(t,"x","acosh");return Q.engine.runKernel(function(n,r){var o=n.acosh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}function Dfe(t){var e=Y(t,"x","atanh");return Q.engine.runKernel(function(n,r){var o=n.atanh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(Pe(1).sub(o.toFloat().square()))}}})}function kfe(t){var e=Y(t,"x","erf");return ee(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),Q.engine.runKernel(function(n,r){var o=n.erf(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}function Ife(t,e){e===void 0&&(e=0);var n=Y(t,"x","step");return Q.engine.runKernel(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return nn(r)}}})}Q.get("IS_BROWSER")&&Q.registerBackend("webgl",function(){return new Yde},2);var Mfe=ie({abs_:pfe}),Ofe=ie({acos_:Sfe}),Pfe=ie({acosh_:Nfe}),Ffe=ie({asin_:Cfe}),Bfe=ie({asinh_:Afe}),Lfe=ie({atan_:Efe}),jfe=ie({atanh_:Dfe}),zfe=ie({ceil_:Zde}),zE=ie({clipByValue_:mfe}),Ufe=ie({cos_:xfe}),Wfe=ie({cosh_:_fe}),Vfe=ie({erf_:kfe}),K2=ie({exp_:ife}),Hfe=ie({expm1_:sfe}),Gfe=ie({floor_:efe}),$fe=ie({log_:ufe}),qfe=ie({log1p_:lfe}),Xfe=ie({logSigmoid_:gfe}),oy=ie({neg_:Jde}),Kfe=ie({reciprocal_:hfe}),Yfe=ie({round_:afe}),JB=ie({rsqrt_:dfe}),ZB=ie({sigmoid_:vfe}),Qfe=ie({sign_:tfe}),Jfe=ie({isNaN_:nfe}),Zfe=ie({isInf_:rfe}),ehe=ie({isFinite_:ofe}),the=ie({sin_:bfe}),nhe=ie({sinh_:Rfe}),rhe=ie({softplus_:yfe}),ohe=ie({sqrt_:cfe}),ahe=ie({square_:ffe}),ihe=ie({step_:Ife}),she=ie({tan_:wfe}),uhe=ie({tanh_:Tfe});function eL(t,e,n,r,o,a){var i,s,u=Y(t,"x","batchNorm"),l=Y(e,"mean","batchNorm"),d=Y(n,"variance","batchNorm");return o!=null&&(i=Y(o,"scale","batchNorm")),r!=null&&(s=Y(r,"offset","batchNorm")),ee(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),ee(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),ee(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),i!=null&&ee(i.rank===2||i.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),s!=null&&ee(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),tm(u,l,d,s,i,a)}function tL(t,e,n,r,o,a){var i,s,u=Y(t,"x","batchNorm"),l=Y(e,"mean","batchNorm"),d=Y(n,"variance","batchNorm");return o!=null&&(i=Y(o,"scale","batchNorm")),r!=null&&(s=Y(r,"offset","batchNorm")),ee(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),ee(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),ee(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),i!=null&&ee(i.rank===3||i.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),s!=null&&ee(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),tm(u,l,d,s,i,a)}function nL(t,e,n,r,o,a){var i,s,u=Y(t,"x","batchNorm"),l=Y(e,"mean","batchNorm"),d=Y(n,"variance","batchNorm");return o!=null&&(i=Y(o,"scale","batchNorm")),r!=null&&(s=Y(r,"offset","batchNorm")),ee(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),ee(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),ee(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),i!=null&&ee(i.rank===4||i.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),s!=null&&ee(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),tm(u,l,d,s,i,a)}function lhe(t,e,n,r,o,a){return r===void 0&&(r=.001),B0(),tm(t,e,n,a,o,r)}function tm(t,e,n,r,o,a){a==null&&(a=.001);var i,s,u,l=Y(t,"x","batchNorm"),d=Y(e,"mean","batchNorm"),f=Y(n,"variance","batchNorm");return o!=null&&(i=Y(o,"scale","batchNorm")),r!=null&&(s=Y(r,"offset","batchNorm")),ee(d.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ee(s==null||d.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ee(i==null||d.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,Q.engine.runKernel(function(p,m){var g=p.batchNormalization(u,Zv(d),Zv(f),a,Zv(i),Zv(s));return m([l,d,f,i]),g},{$x:l,$mean:d,$variance:f,$scale:i,$offset:s},function(p,m){var g=m[0],y=m[1],b=m[2],C=m[3],S=C??Pe(1),E=dr(y.shape,u.shape),_=[];if(y.rank===1){for(var T=0;T<u.shape.length-1;++T)_.push(u.shape[T]);_.push(1)}var D=g.sub(y),I=p.mul(S),k=JB(b.add(Pe(a))),M=k.mul(k).mul(k).mul(Pe(-.5));return{$x:function(){return y.rank===1?p.mul(Ed(k.as4D(1,1,1,y.shape[0]),_)).mul(S).reshape(g.shape):p.mul(k).mul(S).reshape(g.shape)},$mean:function(){var O=k.mul(Pe(-1)).mul(I);return y.rank===1&&(O=O.sum(E)),O.reshape(y.shape)},$variance:function(){var O=M.mul(D).mul(I);return y.rank===1&&(O=O.sum(E)),O.reshape(y.shape)},$scale:function(){var O=D.mul(k),F=p.mul(O);return y.rank===1&&(F=F.sum(E)),F.reshape(y.shape)},$offset:function(){var O=p;return y.rank===1&&(O=O.sum(E)),O.reshape(y.shape)}}}).reshape(l.shape)}function Zv(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function che(t,e,n,r,o,a){return r===void 0&&(r=.001),B0(),eL(t,e,n,a,o,r)}function dhe(t,e,n,r,o,a){return r===void 0&&(r=.001),B0(),tL(t,e,n,a,o,r)}function fhe(t,e,n,r,o,a){return r===void 0&&(r=.001),B0(),nL(t,e,n,a,o,r)}function B0(){mB("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var hhe=ie({batchNormalization2d_:che}),phe=ie({batchNormalization3d_:dhe}),mhe=ie({batchNormalization4d_:fhe}),vhe=ie({batchNormalization_:lhe}),rL=ie({batchNorm_:tm}),ghe=ie({batchNorm2d_:eL}),yhe=ie({batchNorm3d_:tL}),bhe=ie({batchNorm4d_:nL});function nm(t,e,n,r,o,a,i){i===void 0&&(i="channelsLast");var s,u=ay(e),l=u[0],d=u[1];if(i==="channelsLast")s=[l,d,t[3],t[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);s=[l,d,t[1],t[1]]}return rm(t,s,n,r,o,a,!1,i)}function rm(t,e,n,r,o,a,i,s){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],d=u[1],f=u[2],p=u[3];if(s==="channelsLast")l=t[0],d=t[1],f=t[2],p=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],p=t[1],d=t[2],f=t[3]}var m,g=e[0],y=e[1],b=e[3],C=ay(n),S=C[0],E=C[1],_=ay(r),T=_[0],D=_[1],I=Rd(g,T),k=Rd(y,D),M=Che(o,d,f,S,E,I,k,a),O=M.padInfo,F=M.outHeight,j=M.outWidth,G=i?b*p:b;return s==="channelsFirst"?m=[l,G,F,j]:s==="channelsLast"&&(m=[l,F,j,G]),{batchSize:l,dataFormat:s,inHeight:d,inWidth:f,inChannels:p,outHeight:F,outWidth:j,outChannels:G,padInfo:O,strideHeight:S,strideWidth:E,filterHeight:g,filterWidth:y,effectiveFilterHeight:I,effectiveFilterWidth:k,dilationHeight:T,dilationWidth:D,inShape:t,outShape:m,filterShape:e}}function UE(t,e,n,r,o,a,i){a===void 0&&(a=!1),i===void 0&&(i="channelsLast");var s=[-1,-1,-1,-1,-1],u=s[0],l=s[1],d=s[2],f=s[3],p=s[4];if(i==="channelsLast")u=t[0],l=t[1],d=t[2],f=t[3],p=t[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);u=t[0],p=t[1],l=t[2],d=t[3],f=t[4]}var m,g=e[0],y=e[1],b=e[2],C=e[4],S=WI(n),E=S[0],_=S[1],T=S[2],D=WI(r),I=D[0],k=D[1],M=D[2],O=She(o,l,d,f,E,_,T,Rd(g,I),Rd(y,k),Rd(b,M)),F=O.padInfo,j=O.outDepth,G=O.outHeight,W=O.outWidth,q=a?C*p:C;return i==="channelsFirst"?m=[u,q,j,G,W]:i==="channelsLast"&&(m=[u,j,G,W,q]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:d,inWidth:f,inChannels:p,outDepth:j,outHeight:G,outWidth:W,outChannels:q,padInfo:F,strideDepth:E,strideHeight:_,strideWidth:T,filterDepth:g,filterHeight:y,filterWidth:b,dilationDepth:I,dilationHeight:k,dilationWidth:M,inShape:t,outShape:m,filterShape:e}}function xhe(t,e,n,r,o,a){o==null&&(o=whe(t,e,r));var i=t[0],s=t[1],u=VI((i-e+2*o)/r+1,a);ee(Ca(u),function(){return"The output # of rows ("+u+") must be an integer. Change the stride and/or zero pad parameters"});var l=VI((s-e+2*o)/r+1,a);return ee(Ca(l),function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"}),[u,l,n]}function whe(t,e,n,r){r===void 0&&(r=1);var o=Rd(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function ay(t){return typeof t=="number"?[t,t]:t}function WI(t){return typeof t=="number"?[t,t,t]:t}function Rd(t,e){return e<=1?t:t+(t-1)*(e-1)}function Che(t,e,n,r,o,a,i,s){var u,l,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};var f=xhe([e,n,1],a,1,r,t,s);l=f[0],d=f[1]}else if(t==="same"){l=Math.ceil(e/r),d=Math.ceil(n/o);var p=Math.max(0,(l-1)*r+a-e),m=Math.max(0,(d-1)*o+i-n),g=Math.floor(p/2),y=p-g,b=Math.floor(m/2);u={top:g,bottom:y,left:b,right:m-b,type:"SAME"}}else{if(t!=="valid")throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-a+1)/r),d=Math.ceil((n-i+1)/o)}return{padInfo:u,outHeight:l,outWidth:d}}function She(t,e,n,r,o,a,i,s,u,l){var d,f,p,m;if(t==="same"){var g=((f=Math.ceil(e/o))-1)*o+s-e,y=((p=Math.ceil(n/a))-1)*a+u-n,b=((m=Math.ceil(r/i))-1)*i+l-r,C=Math.floor(g/2),S=g-C,E=Math.floor(y/2),_=y-E,T=Math.floor(b/2);d={top:E,bottom:_,left:T,right:b-T,front:C,back:S,type:"SAME"}}else{if(t!=="valid")throw Error("Unknown padding parameter: "+t);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((e-s+1)/o),p=Math.ceil((n-u+1)/a),m=Math.ceil((r-l+1)/i)}return{padInfo:d,outDepth:f,outHeight:p,outWidth:m}}function VI(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function iy(t){var e=ay(t),n=e[0],r=e[1];return n===1&&r===1}function Gu(t,e){return iy(t)||iy(e)}function Ehe(t,e,n,r,o,a,i){o===void 0&&(o="NWC"),a===void 0&&(a=1);var s=Y(t,"x","conv1d"),u=Y(e,"filter","conv1d"),l=s,d=!1;s.rank===2&&(d=!0,l=s.as3D(1,s.shape[0],s.shape[1])),ee(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),ee(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),i!=null&&ee(Ca(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),ee(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),ee(Gu(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),ee(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),m=Ds(p,f,[1,n],r,"NHWC",[1,a],i);return d?m.as2D(m.shape[2],m.shape[3]):m.as3D(m.shape[0],m.shape[2],m.shape[3])}function Rhe(t,e,n,r,o,a,i){o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]);var s=Y(t,"x","conv2d"),u=Y(e,"filter","conv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ee(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),ee(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),i!=null&&ee(Ca(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),ee(l.shape[3]===u.shape[2],function(){return"Error in conv2d: depth of input ("+l.shape[3]+") must match input depth for filter "+u.shape[2]+"."}),ee(Gu(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),ee(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var f=rm(l.shape,u.shape,n,a,r,i),p=Q.engine.runKernel(function(m,g){var y=m.conv2d(l,u,f);return g([u,l]),y},{x:l,$filter:u},function(m,g){var y=g,b=y[0],C=y[1];return ee(iy(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return oL(C.shape,m,b,n,r)},$filter:function(){return aL(C,m,b.shape,n,r)}}});return d?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function oL(t,e,n,r,o,a){ee(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var i=t,s=e,u=!1;e.rank===3&&(u=!0,s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),i=[1,t[0],t[1],t[2]]);var l=i[3],d=s.shape[3];ee(i.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+i.length+"."}),ee(s.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank}),ee(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}),ee(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),ee(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),a!=null&&ee(Ca(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var f=rm(i,n.shape,r,1,o,a),p=Q.engine.runKernel(function(m,g){var y=m.conv2dDerInput(s,n,f);return g([n,s]),y},{dy4D:s,filter:n},function(m,g){var y=g[0],b=g[1];return{dy4D:function(){return Ds(m,y,r,o,"NHWC",1,a)},filter:function(){return iL(m,b,y.shape,r,o,a)}}});return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function aL(t,e,n,r,o,a){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;s.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),ee(i.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+i.shape+"."}),ee(s.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."}),ee(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}),ee(i.shape[3]===n[2],function(){return"Error in conv2dDerFilter: depth of input "+i.shape[3]+") must match input depth in filter ("+n[2]+"."}),ee(s.shape[3]===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."}),a!=null&&ee(Ca(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var u=rm(i.shape,n,r,1,o,a);return Q.engine.runKernel(function(l){return l.conv2dDerFilter(i,s,u)},{x4D:i,dy4D:s})}function _he(t,e,n,r,o,a){return oL(n,Y(t,"x","conv2dTranspose"),Y(e,"filter","conv2dTranspose"),r,o,a)}function The(t,e,n,r,o,a,i){a===void 0&&(a=[1,1]);var s=Y(t,"x","depthwiseConv2d"),u=Y(e,"filter","depthwiseConv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ee(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),ee(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),ee(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),ee(Gu(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),i!=null&&ee(Ca(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var f=rm(l.shape,u.shape,n,a,r,i,!0),p=Q.engine.runKernel(function(m,g){var y=m.depthwiseConv2D(l,u,f);return g([l,u]),y},{x:l,$filter:u},function(m,g){ee(iy(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var y=g[0],b=g[1];return{x:function(){return khe(y.shape,m,b,f)},$filter:function(){return Ihe(y,m,b.shape,f)}}});return d?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Ahe(t,e,n,r,o,a,i){a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC");var s=Y(t,"x","separableConv2d"),u=Y(e,"depthwiseFilter","separableConv2d"),l=Y(n,"pointwiseFilter","separableConv2d"),d=s,f=!1;if(s.rank===3&&(f=!0,d=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ee(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),ee(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),ee(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),ee(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),ee(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var p=u.shape[2],m=u.shape[3];ee(l.shape[2]===p*m,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*m+", but got "+l.shape[2]+"."});var g=WE(d,u,r,o,i,a),y=Ds(g,l,1,"valid",i);return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function Nhe(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Y2(t){var e=Nhe(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function Dhe(t,e){return Y2(t)||Y2(e)}function khe(t,e,n,r){var o=e,a=!1;e.rank===3&&(a=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=Q.engine.runKernel(function(s){return s.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}function Ihe(t,e,n,r){var o=t;t.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return a.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Q.engine.runKernel(function(i){return i.depthwiseConv2DDerFilter(o,a,r)},{x4D:o,dy4D:a})}function Mhe(t,e,n,r,o,a){o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1,1]);var i=Y(t,"x","conv3d"),s=Y(e,"filter","conv3d"),u=i,l=!1;i.rank===4&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),ee(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),ee(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),ee(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),ee(Dhe(n,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),ee(o==="NHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NHWC is currently supported."});var d=UE(u.shape,s.shape,n,a,r),f=Q.engine.runKernel(function(p,m){var g=p.conv3d(u,s,d);return m([u,s]),g},{x:u,$filter:s},function(p,m){ee(Y2(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var g=m[0],y=m[1];return{x:function(){return Ohe(g.shape,p,y,n,r)},$filter:function(){return Phe(g,p,y.shape,n,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}function Ohe(t,e,n,r,o){ee(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,i=e,s=!1;e.rank===4&&(s=!0,i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],l=i.shape[4];ee(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),ee(i.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),ee(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),ee(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),ee(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var d=UE(a,n.shape,r,1,o),f=Q.engine.runKernel(function(p){return p.conv3dDerInput(i,n,d)},{dy5D:i});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}function Phe(t,e,n,r,o){var a=t;t.rank===4&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var i=e;i.rank===4&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),ee(a.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."}),ee(i.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."}),ee(n.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),ee(a.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."}),ee(i.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."});var s=UE(a.shape,n,r,1,o);return Q.engine.runKernel(function(u){return u.conv3dDerFilter(a,i,s)},{x5D:a,dy5D:i})}var Fhe=ie({conv1d_:Ehe}),Ds=ie({conv2d_:Rhe}),Bhe=ie({conv3d_:Mhe}),iL=ie({conv2dDerFilter_:aL}),WE=ie({depthwiseConv2d_:The}),sL=ie({separableConv2d_:Ahe}),Lhe=ie({conv2dTranspose_:_he});function jhe(t,e,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var a=Y(t,"a","matMul"),i=Y(e,"b","matMul");o=cr(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],d=r?i.shape[i.rank-2]:i.shape[i.rank-1],f=a.shape.slice(0,-2),p=i.shape.slice(0,-2),m=ft(f),g=ft(p);ee(a.rank>=2&&i.rank>=2&&a.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."}),ee(no(f,p),function(){return"Error in matMul: outer dimensions ("+f+") and ("+p+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."}),ee(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var y=a.shape.slice(0,-2).concat([l,d]),b=n?a.as3D(m,s,l):a.as3D(m,l,s),C=r?i.as3D(g,d,u):i.as3D(g,u,d);return Q.engine.runKernel(function(S,E){var _=S.batchMatMul(b,C,n,r);return E([b,C]),_},{$a:b,$b:C},function(S,E){var _=E,T=_[0],D=_[1];return n||r?!n&&r?{$a:function(){return S.matMul(D,!1,!1)},$b:function(){return S.matMul(T,!0,!1)}}:n&&!r?{$a:function(){return D.matMul(S,!1,!0)},$b:function(){return T.matMul(S,!1,!1)}}:{$a:function(){return D.matMul(S,!0,!0)},$b:function(){return S.matMul(T,!0,!0)}}:{$a:function(){return S.matMul(D,!1,!0)},$b:function(){return T.matMul(S,!0,!1)}}}).reshape(y)}function zhe(t,e){var n=Y(t,"v1","outerProduct"),r=Y(e,"v2","outerProduct");return ee(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}function Uhe(t,e){var n=Y(t,"t1","dot"),r=Y(e,"t2","dot");ee(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];return ee(o===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}var VE=ie({matMul_:jhe}),Whe=ie({dot_:Uhe}),Vhe=ie({outerProduct_:zhe});function Hhe(t){var e=Y(t,"x","reverse");return ee(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),om(e,0)}function Ghe(t,e){var n=Y(t,"x","reverse");return ee(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),om(n,e)}function $he(t,e){var n=Y(t,"x","reverse");return ee(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),om(n,e)}function qhe(t,e){var n=Y(t,"x","reverse");return ee(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),om(n,e)}function Xhe(t,e){var n=Y(t,"x","reverse");if(n.rank===0)return n.clone();var r=Ir(e,n.shape);return Q.engine.runKernel(function(o){return o.reverse(n,r)},{$x:n},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(n)}var om=ie({reverse_:Xhe}),Khe=ie({reverse1d_:Hhe}),Yhe=ie({reverse2d_:Ghe}),Qhe=ie({reverse3d_:$he}),Jhe=ie({reverse4d_:qhe});function uL(t,e,n,r,o,a){var i=Y(t,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ee(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),ee(Gu(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),a!=null&&ee(Ca(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var l=nm(s.shape,e,n,r,o,a),d=Q.engine.runKernel(function(f,p){var m=f.maxPool(s,l);return p([s,m]),m},{x:s},function(f,p){var m=p[0],g=p[1];return{x:function(){return npe(f,m,g,e,n,r,o)}}});return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function Zhe(t,e,n,r,o){return uL(t,e,n,1,r,o)}function lL(t,e,n,r,o,a){var i=Y(t,"x","avgPool","float32");ee(Gu(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ee(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&ee(Ca(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var l=nm(s.shape,e,n,r,o,a),d=Q.engine.runKernel(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return rpe(f,s,e,n,r,o)}}});return d=d.cast(i.dtype),u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function epe(t,e,n,r,o){return lL(t,e,n,1,r,o)}function tpe(t,e,n,r,o,a){o==null&&(o=[1,1]),a==null&&(a=1),r===0&&(r="valid");var i=Y(t,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ee(Gu(a,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"});var l,d=nm(s.shape,e,a,o,r),f=[d.dilationHeight,d.dilationWidth];l=r==="same"?ape([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var p=f[0]===1&&f[1]===1,m=ope([d.inHeight,d.inWidth],f,l),g=m[0],y=m[1],b=p?r:"valid",C=p?s:YB(s,f,g),S=(n==="avg"?function(){return lL(C,e,a,1,b)}:function(){return uL(C,e,a,1,b)})(),E=p?S:XB(S,f,y);return u?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}function npe(t,e,n,r,o,a,i,s){var u=Y(t,"dy","maxPoolBackprop"),l=Y(e,"input","maxPoolBackprop"),d=Y(n,"output","maxPoolBackprop");ee(l.rank===u.rank,function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"}),ee(Gu(o,a),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}),ee(u.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),ee(l.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."});var f=nm(l.shape,r,o,a,i,s);return Q.engine.runKernel(function(p){return p.maxPoolBackprop(u,l,d,f)},{$dy:u,$input:l})}function rpe(t,e,n,r,o,a){var i=Y(t,"dy","avgPoolBackprop"),s=Y(e,"input","avgPoolBackprop");ee(s.rank===i.rank,function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"}),ee(Gu(r,o),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"});var u=s,l=i,d=!1;s.rank===3&&(d=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ee(l.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."}),ee(u.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."});var f=nm(u.shape,n,r,o,a),p=Q.engine.runKernel(function(m){return m.avgPoolBackprop(l,u,f)},{dy4D:l,input4D:u});return d?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function ope(t,e,n){var r=n.map(function(u){return u[0]}),o=n.map(function(u){return u[1]}),a=t.concat(r,o),i=e.map(function(u,l){return(u-a[l]%u)%u}),s=o.map(function(u,l){return u+i[l]});return[e.map(function(u,l){return[r[l],s[l]]}),e.map(function(u,l){return[0,i[l]]})]}function ape(t,e){var n=t.map(function(a,i){return a+(a-1)*(e[i]-1)}).map(function(a){return a-1}),r=n.map(function(a){return Math.floor(a/2)}),o=n.map(function(a,i){return a-r[i]});return n.map(function(a,i){return[r[i],o[i]]})}var $d=ie({maxPool_:Zhe}),am=ie({avgPool_:epe}),ipe=ie({pool_:tpe});function spe(t,e,n){var r=Y(t,"x","slice1d");return ee(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Mu(r,[e],[n])}function upe(t,e,n){var r=Y(t,"x","slice2d");return ee(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Mu(r,e,n)}function lpe(t,e,n){var r=Y(t,"x","slice3d");return ee(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Mu(r,e,n)}function cpe(t,e,n){var r=Y(t,"x","slice4d");return ee(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Mu(r,e,n)}function dpe(t,e,n){var r,o,a=Y(t,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");r=typeof e=="number"?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice(),o=(o=n==null?new Array(a.rank).fill(-1):typeof n=="number"?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(s,u){return s>=0?s:(ee(s===-1,function(){return"Bad value in size"}),a.shape[u]-r[u])}),fie(a,r,o);var i=a.shape;return Q.engine.runKernel(function(s){return s.slice(a,r,o)},{$x:a},function(s){for(var u=[],l=0;l<s.rank;l++)u.push([r[l],i[l]-r[l]-o[l]]);return{$x:function(){return s.pad(u)}}})}var Mu=ie({slice_:dpe}),fpe=ie({slice1d_:spe}),hpe=ie({slice2d_:upe}),cL=ie({slice3d_:lpe}),ppe=ie({slice4d_:cpe});function mpe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","logSumExp"),o=Ir(e,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=Sa(s.shape,o);return s.reshape(u)}return s}function vpe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=Ir(e,r.shape);return Kp(function(a){var i=Pi(o,a.rank),s=o,u=a;i!=null&&(u=a.transpose(i),s=Fi(s.length,a.rank));var l=Q.engine.runKernel(function(f){return f.sum(u,s)},{permutedX:u});if(n){var d=Sa(l.shape,o);l=l.reshape(d)}return{value:l,gradFunc:function(f){var p=a.shape.slice();return o.forEach(function(m){p[m]=1}),f.reshape(p).mul(Wl(a.shape,"float32"))}}})(r)}function gpe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=Ir(e,r.shape),a=Pi(o,r.rank),i=o,s=r;a!=null&&(s=r.transpose(a),i=Fi(i.length,r.rank));var u=Q.engine.runKernel(function(d){return d.prod(s,i)},{permutedX:s});if(n){var l=Sa(u.shape,o);u=u.reshape(l)}return u}function ype(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","mean"),o=Ir(e,r.shape),a=ft(Fr(r.shape,o)[1]);return Kp(function(i){var s=Pe(a);return{value:(s.dtype===i.dtype?i:i.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=i.shape.slice();return o.forEach(function(d){l[d]=1}),u.reshape(l).mul(Wl(i.shape,"float32")).div(a)}}})(r)}function dL(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(Sa(e.shape,r))),t.rank<n.rank&&(t=t.reshape(Sa(t.shape,r))),{$x:function(){var a=t.mul(n.equal(e).cast(t.dtype));return o==null?a:a.transpose(o)}}}function bpe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","min"),o=r,a=Ir(e,r.shape),i=a,s=Pi(i,r.rank);s!=null&&(r=r.transpose(s),i=Fi(i.length,r.rank));var u=Q.engine.runKernel(function(d,f){var p=d.min(r,i);return f([o,p]),p},{$x:r},function(d,f){return dL(d,f[1],f[0],a,s)});if(n){var l=Sa(u.shape,a);u=u.reshape(l)}return u}function xpe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","max"),o=r,a=Ir(e,r.shape),i=a,s=Pi(i,r.rank);s!=null&&(r=r.transpose(s),i=Fi(i.length,r.rank));var u=Q.engine.runKernel(function(d,f){var p=d.max(r,i);return f([o,p]),p},{$x:r},function(d,f){return dL(d,f[1],f[0],a,s)});if(n){var l=Sa(u.shape,a);u=u.reshape(l)}return u}function wpe(t,e){e===void 0&&(e=0);var n=Y(t,"x","argMin");e==null&&(e=0);var r=Ir(e,n.shape),o=Pi(r,n.rank);return o!=null&&(n=n.transpose(o),r=Fi(r.length,n.rank)),Q.engine.runKernel(function(a,i){var s=a.argMin(n,r[0]);return i([n]),s},{$x:n},function(a,i){var s=i[0];return{$x:function(){return nn(s)}}})}function Cpe(t,e){e===void 0&&(e=0);var n=Y(t,"x","argMax");e==null&&(e=0);var r=Ir(e,n.shape),o=Pi(r,n.rank);return o!=null&&(n=n.transpose(o),r=Fi(r.length,n.rank)),Q.engine.runKernel(function(a,i){var s=a.argMax(n,r[0]);return i([n]),s},{$x:n},function(a,i){var s=i[0];return{$x:function(){return nn(s)}}})}function Spe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","all","bool"),o=Ir(e,r.shape),a=o,i=Pi(a,r.rank);i!=null&&(r=r.transpose(i),a=Fi(a.length,r.rank));var s=Q.engine.runKernel(function(l){return l.all(r,a)},{$x:r});if(n){var u=Sa(s.shape,o);return s.reshape(u)}return s}function Epe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","any","bool"),o=Ir(e,r.shape),a=o,i=Pi(a,r.rank);i!=null&&(r=r.transpose(i),a=Fi(a.length,r.rank));var s=Q.engine.runKernel(function(l){return l.any(r,a)},{$x:r});if(n){var u=Sa(s.shape,o);return s.reshape(u)}return s}function Rpe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Ir(e,(t=Y(t,"x","moments")).shape),o=t.mean(r,n),a=o.shape;return n||(a=Sa(o.shape,r)),{mean:o,variance:t.toFloat().sub(o.reshape(a)).square().mean(r,n)}}var _pe=ie({all_:Spe}),Tpe=ie({any_:Epe}),Ape=ie({argMax_:Cpe}),Npe=ie({argMin_:wpe}),Dpe=ie({logSumExp_:mpe}),L0=ie({max_:xpe}),kpe=ie({mean_:ype}),Ipe=ie({min_:bpe}),Mpe=ie({moments_:Rpe}),fL=ie({sum_:vpe}),Ope=ie({prod_:gpe});function Ppe(t,e){var n,r=Y(t,"a","notEqual"),o=Y(e,"b","notEqual");return n=cr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.notEqual(r,o)},{$a:r,$b:o})}function Fpe(t,e){var n=Y(t,"a","notEqualStrict"),r=Y(e,"b","notEqualStrict");return vn(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}function Bpe(t,e){var n,r=Y(t,"a","less"),o=Y(e,"b","less");return n=cr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.less(r,o)},{$a:r,$b:o})}function Lpe(t,e){var n=Y(t,"a","lessStrict"),r=Y(e,"b","lessStrict");return vn(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}function jpe(t,e){var n,r=Y(t,"a","equal"),o=Y(e,"b","equal");return n=cr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.equal(r,o)},{$a:r,$b:o})}function zpe(t,e){var n=Y(t,"a","equalStrict"),r=Y(e,"b","equalStrict");return vn(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}function Upe(t,e){var n,r=Y(t,"a","lessEqual"),o=Y(e,"b","lessEqual");return n=cr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.lessEqual(r,o)},{$a:r,$b:o})}function Wpe(t,e){var n=Y(t,"a","lessEqualStrict"),r=Y(e,"b","lessEqualStrict");return vn(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}function Vpe(t,e){var n,r=Y(t,"a","greater"),o=Y(e,"b","greater");return n=cr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.greater(r,o)},{$a:r,$b:o})}function Hpe(t,e){var n=Y(t,"a","greaterStrict"),r=Y(e,"b","greaterStrict");return vn(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}function Gpe(t,e){var n,r=Y(t,"a","greaterEqual"),o=Y(e,"b","greaterEqual");return n=cr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a,i){var s=a.greaterEqual(r,o);return i([r,o]),s},{$a:r,$b:o},function(a,i){var s=i[0],u=i[1];return{$a:function(){return nn(s)},$b:function(){return nn(u)}}})}function $pe(t,e){var n=Y(t,"a","greaterEqualStrict"),r=Y(e,"b","greaterEqualStrict");return vn(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}var hL=ie({equal_:jpe}),qpe=ie({equalStrict_:zpe}),Xpe=ie({greater_:Vpe}),pL=ie({greaterEqual_:Gpe}),Kpe=ie({greaterEqualStrict_:$pe}),Ype=ie({greaterStrict_:Hpe}),Qpe=ie({less_:Bpe}),Jpe=ie({lessEqual_:Upe}),Zpe=ie({lessEqualStrict_:Wpe}),eme=ie({lessStrict_:Lpe}),tme=ie({notEqual_:Ppe}),nme=ie({notEqualStrict_:Fpe});function rme(t,e){var n,r=Y(t,"a","add"),o=Y(e,"b","add");n=cr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i){return i.add(r,o)},{$a:r,$b:o},function(i){return{$a:function(){var s=i,u=dr(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},$b:function(){var s=i,u=dr(o.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(o.shape)}}})}function ome(t){ee(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ee(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(o,a){return Y(o,"tensors"+a,"addN")}),n=e[0];e.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(o){if(!no(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return Q.engine.runKernel(function(o){return o.addN(e)},r,function(o){var a={};return e.forEach(function(i,s){a[s]=function(){return o.clone()}}),a})}function ame(t,e){var n=Y(t,"a","addStrict"),r=Y(e,"b","addStrict");return vn(n.shape,r.shape,"Error in addStrict: "),n.add(r)}function ime(t,e){var n,r=Y(t,"a","sub"),o=Y(e,"b","sub");n=cr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i){return i.subtract(r,o)},{$a:r,$b:o},function(i){return{$a:function(){var s=i,u=dr(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},$b:function(){var s=i,u=dr(o.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}})}function sme(t,e){var n=Y(t,"a","subStrict"),r=Y(e,"b","subStrict");return vn(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}function ume(t,e){var n=Y(t,"base","pow"),r=Y(e,"exp","pow"),o=Gt(n.shape,r.shape);return t=n.cast(vr(n.dtype,r.dtype)),e=r.cast(vr(n.dtype,r.dtype)),Q.engine.runKernel(function(a,i){var s=a.pow(n,r);return i([n,r,s]),s},{$base:n,$exp:r},function(a,i){var s=i[0],u=i[1],l=i[2];return{$base:function(){var d=u.toFloat(),f=a.mul(d.mul(s.pow(d.sub(Pe(1))))),p=dr(s.shape,o);return p.length>0&&(f=f.sum(p)),f.reshape(s.shape)},$exp:function(){var d=s.greater(0),f=s.log().where(d,nn(s)),p=a.mul(l.mul(f)),m=dr(u.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(u.shape)}}})}function lme(t,e){return vn(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}function cme(t,e){var n,r=Y(t,"a","mul"),o=Y(e,"b","mul");n=cr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.multiply(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=i.mul(l.toFloat()),f=dr(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},$b:function(){var d=i.mul(u.toFloat()),f=dr(l.shape,a);return f.length>0?d.sum(f).reshape(l.shape):d}}})}function dme(t,e){var n=Y(t,"a","mul"),r=Y(e,"b","mul");return vn(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}function fme(t,e){var n,r=Y(t,"a","div"),o=Y(e,"b","div");if(n=cr(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return mL(r,o);var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.realDivide(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=i.div(l.toFloat()),f=dr(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},$b:function(){var d=i.mul(u.toFloat()),f=dr(l.shape,a);f.length>0&&(d=d.sum(f).reshape(l.shape));var p=l.square();return d.div(p.toFloat()).neg()}}})}function hme(t,e){var n,r=Y(t,"a","floorDiv"),o=Y(e,"b","floorDiv");n=cr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.floorDiv(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=i.div(l.toFloat()),f=dr(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},$b:function(){var d=i.mul(u.toFloat()),f=dr(l.shape,a);f.length>0&&(d=d.sum(f).reshape(l.shape));var p=l.square();return d.div(p.toFloat()).neg()}}})}function pme(t,e){var n=Y(t,"a","div"),r=Y(e,"b","div");return vn(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}function mme(t,e){var n,r=Y(t,"a","mod"),o=Y(e,"b","mod");n=cr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.mod(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=dr(u.shape,a);return d.length>0?i.sum(d).reshape(u.shape):i},$b:function(){var d=i.mul(u.div(l).floor().neg()),f=dr(l.shape,a);return f.length>0?d.sum(f).reshape(l.shape):d}}})}function vme(t,e){var n=Y(t,"a","modStrict"),r=Y(e,"b","modStrict");return vn(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}function gme(t,e){var n,r=Y(t,"a","minimum"),o=Y(e,"b","minimum");return n=cr(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Gt(r.shape,o.shape),Q.engine.runKernel(function(a,i){var s=a.minimum(r,o);return i([r,o]),s},{$a:r,$b:o},function(a,i){var s=i[0],u=i[1];return{$a:function(){return a.mul(s.lessEqual(u).toFloat())},$b:function(){return a.mul(s.greater(u).toFloat())}}})}function yme(t,e){var n=Y(t,"a","minimumStrict"),r=Y(e,"b","minimumStrict");return vn(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}function bme(t,e){var n,r=Y(t,"a","maximum"),o=Y(e,"b","maximum");return n=cr(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Gt(r.shape,o.shape),Q.engine.runKernel(function(a,i){var s=a.maximum(r,o);return i([r,o]),s},{$a:r,$b:o},function(a,i){var s=i[0],u=i[1];return{$a:function(){return a.mul(s.greaterEqual(u).toFloat())},$b:function(){return a.mul(s.less(u).toFloat())}}})}function xme(t,e){var n=Y(t,"a","maximumStrict"),r=Y(e,"b","maximumStrict");return vn(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}function wme(t,e){var n,r=Y(t,"a","squaredDifference"),o=Y(e,"b","squaredDifference");return n=cr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a,i){var s=a.squaredDifference(r,o);return i([r,o]),s},{$a:r,$b:o},function(a,i){var s=i[0],u=i[1],l=Pe(2);return{$a:function(){return a.mul(s.sub(u).mul(l))},$b:function(){return a.mul(u.sub(s).mul(l))}}})}function Cme(t,e){var n=Y(t,"a","squaredDifferenceStrict"),r=Y(e,"b","squaredDifferenceStrict");return vn(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}function Sme(t,e){var n,r=Y(t,"a","atan2"),o=Y(e,"b","atan2");n=cr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.atan2(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=en(u.square(),l.square()),f=i.mul(l.div(d)),p=dr(u.shape,a);return p.length>0&&(f=f.sum(p)),f.reshape(u.shape)},$b:function(){var d=en(u.square(),l.square()),f=oy(i.mul(u.div(d))),p=dr(l.shape,a);return p.length>0&&(f=f.sum(p)),f.reshape(l.shape)}}})}var en=ie({add_:rme}),Eme=ie({addN_:ome}),Rme=ie({addStrict_:ame}),_me=ie({atan2_:Sme}),ss=ie({div_:fme}),Tme=ie({divStrict_:pme}),mL=ie({floorDiv_:hme}),HE=ie({maximum_:bme}),Ame=ie({maximumStrict_:xme}),vL=ie({minimum_:gme}),Nme=ie({minimumStrict_:yme}),Dme=ie({mod_:mme}),kme=ie({modStrict_:vme}),fs=ie({mul_:cme}),Ime=ie({mulStrict_:dme}),gL=ie({pow_:ume}),Mme=ie({powStrict_:lme}),Ome=ie({squaredDifference_:wme}),Pme=ie({squaredDifferenceStrict_:Cme}),Ti=ie({sub_:ime}),Fme=ie({subStrict_:sme});function Bme(t){var e=Y(t,"x","logicalNot","bool");return Q.engine.runKernel(function(n){return n.logicalNot(e)},{$x:e})}function Lme(t,e){var n=Y(t,"a","logicalAnd","bool"),r=Y(e,"b","logicalAnd","bool");return Gt(n.shape,r.shape),Q.engine.runKernel(function(o){return o.logicalAnd(n,r)},{$a:n,$b:r})}function jme(t,e){var n=Y(t,"a","logicalOr","bool"),r=Y(e,"b","logicalOr","bool");return Gt(n.shape,r.shape),Q.engine.runKernel(function(o){return o.logicalOr(n,r)},{$a:n,$b:r})}function zme(t,e){var n=Y(t,"a","logicalXor","bool"),r=Y(e,"b","logicalXor","bool");return Gt(n.shape,r.shape),yL(t,e).logicalAnd(GE(t,e).logicalNot())}function Ume(t,e,n){var r=Y(e,"a","where"),o=Y(n,"b","where"),a=Y(t,"condition","where","bool");return vn(r.shape,o.shape,"Error in where: "),a.rank===1?ee(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):vn(a.shape,o.shape,"Error in where: "),Q.engine.runKernel(function(i,s){var u=i.select(a,r,o);return s([a]),u},{$condition:a,$a:r,$b:o},function(i,s){var u=s[0];return{$condition:function(){return nn(u).toFloat()},$a:function(){return i.mul(u.cast(i.dtype))},$b:function(){return i.mul(u.logicalNot().cast(i.dtype))}}})}function Wme(t){return pn(this,void 0,void 0,function(){var e,n,r;return mn(this,function(o){switch(o.label){case 0:return[4,(e=Y(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=jE(e.shape,n),t!==e&&e.dispose(),[2,r]}})})}var GE=ie({logicalAnd_:Lme}),Vme=ie({logicalNot_:Bme}),yL=ie({logicalOr_:jme}),Hme=ie({logicalXor_:zme}),wp=ie({where_:Ume}),Gme=Wme;function $me(t){var e=Y(t,"x","relu");return e.dtype==="bool"?e.toInt():Q.engine.runKernel(function(n,r){var o=n.relu(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mulStrict(o.step().toFloat())}}})}function qme(t){var e=Y(t,"x","elu");return Q.engine.runKernel(function(n,r){var o=n.elu(e);return r([o]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return Q.engine.runKernel(function(a){return a.eluDer(n,o)},{dy:n,y:o})}}})}function Xme(t){var e=Y(t,"x","selu");return Q.engine.runKernel(function(n,r){var o=n.selu(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){var a=o.greater(Pe(0)),i=Pe(FE),s=Pe(BE),u=n.mul(s),l=n.mul(i).mul(o.toFloat().exp());return wp(a,u,l)}}})}function Kme(t,e){e===void 0&&(e=.2);var n=Y(t,"x","leakyRelu");return HE(Pe(e).mul(n),n)}function Yme(t,e){var n=Y(t,"x","prelu"),r=Y(e,"alpha","prelu");return Q.engine.runKernel(function(o,a){var i=o.prelu(n,r);return a([n,r]),i},{$x:n,$alpha:r},function(o,a){var i=a[0],s=a[1],u=i.greater(0);return{$x:function(){return wp(u,o,o.mul(s))},$alpha:function(){var l=wp(u,nn(o),o.mul(i)),d=dr(s.shape,o.shape);return d.length>0&&(l=l.sum(d)),l.reshape(s.shape)}}})}var Qme=ie({elu_:qme}),Jme=ie({leakyRelu_:Kme}),Zme=ie({prelu_:Yme}),er=ie({relu_:$me}),eve=ie({selu_:Xme});function tve(t,e){var n=Y(t,"x","transpose");return e==null&&(e=n.shape.map(function(r,o){return o}).reverse()),ee(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(r){ee(r>=0&&r<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1?n.clone():Q.engine.runKernel(function(r){return r.transpose(n,e)},{$x:n},function(r){var o=DE(e);return{$x:function(){return r.transpose(o)}}})}var Ou=ie({transpose_:tve});function nve(t,e,n,r,o){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var a=Y(t,"x","localResponseNormalization");ee(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),ee(Ca(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var i=a,s=!1;a.rank===3&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=Q.engine.runKernel(function(l,d){var f=l.localResponseNormalization4D(i,e,n,r,o);return d([i,f]),f},{x4D:i},function(l,d){var f=d[0],p=d[1];return{x4D:function(){return Q.engine.runKernel(function(m){return m.LRNGrad(l,f,p,e,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var rve=ie({localResponseNormalization_:nve});function ove(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=bL(t=Y(t,"x","norm"),e,n),a=o.shape;if(r){var i=Ir(n,t.shape);a=Sa(o.shape,i)}return o.reshape(a)}function bL(t,e,n){if(n===void 0&&(n=null),t.rank===0)return t.abs();if(t.rank!==1&&n===null)return bL(t.reshape([-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return t.abs().sum(n);if(e===1/0)return t.abs().max(n);if(e===-1/0)return t.abs().min(n);if(e==="euclidean"||e===2)return t.abs().pow(Pe(2,"int32")).sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+e)}if(Array.isArray(n)&&n.length===2){if(e===1)return t.abs().sum(n[0]).max(n[1]-1);if(e===1/0)return t.abs().sum(n[1]).max(n[0]);if(e===-1/0)return t.abs().sum(n[1]).min(n[0]);if(e==="fro"||e==="euclidean")return t.square().sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+n)}var xL=ie({norm_:ove});function ave(t,e,n){var r=Y(t,"x","unsortedSegmentSum"),o=Y(e,"segmentIds","unsortedSegmentSum","int32");return ee(Ca(n),function(){return"numSegments must be of dtype int"}),Q.engine.runKernel(function(a,i){var s=a.unsortedSegmentSum(r,o,n);return i([o]),s},{$x:r},function(a,i){var s=i[0];return{$x:function(){return sve(a,s)}}})}function ive(t,e,n){n===void 0&&(n=0);var r=Y(t,"x","gather"),o=Y(e,"indices","gather","int32");n=Ir(n,r.shape)[0];var a=die(r,o,n);return Q.engine.runKernel(function(i,s){var u=i.gather(r,o.flatten(),n);return s([o]),u},{$x:r},function(i,s){var u=s[0];return{$x:function(){var l=r.shape,d=u.size,f=l.slice(0,n),p=f.length,m=l.slice(n,l.length).slice(1),g=m.length,y=HI(0,p),b=HI(p+1,p+1+g),C=GI([f,[d],m]),S=i.reshape(C),E=u.reshape([d]),_=GI([[p],y,b]),T=S.transpose(_),D=CL(T,E,r.shape[n]),I=DE(_);return D=D.transpose(I)}}}).reshape(a.outputShape)}function HI(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function GI(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}function sve(t,e){for(var n=HE(e,nn(e)),r=wL(t,n),o=pL(e,Pe(0,"int32")),a=r.rank-o.rank,i=0;i<a;++i)o=ha(o,i+1);o=GE(o,Wl(r.shape,"bool"));var s=nn(r);return wp(o,r,s)}var wL=ie({gather_:ive}),CL=ie({unsortedSegmentSum_:ave});function uve(t,e,n,r){for(var o=Y(e,"data","multiRNNCell"),a=Zg(n,"c","multiRNNCell"),i=Zg(r,"h","multiRNNCell"),s=o,u=[],l=0;l<t.length;l++){var d=t[l](s,a[l],i[l]);u.push(d[0]),u.push(d[1]),s=d[1]}var f=[],p=[];for(l=0;l<u.length;l+=2)f.push(u[l]),p.push(u[l+1]);return[f,p]}function lve(t,e,n,r,o,a){var i=Y(t,"forgetBias","basicLSTMCell"),s=Y(e,"lstmKernel","basicLSTMCell"),u=Y(n,"lstmBias","basicLSTMCell"),l=Y(r,"data","basicLSTMCell"),d=Y(o,"c","basicLSTMCell"),f=Y(a,"h","basicLSTMCell"),p=l.concat(f,1).matMul(s).add(u),m=p.shape[0],g=p.shape[1]/4,y=[m,g],b=p.slice([0,0],y),C=p.slice([0,g],y),S=p.slice([0,2*g],y),E=p.slice([0,3*g],y),_=b.sigmoid().mulStrict(C.tanh()).addStrict(d.mulStrict(i.add(S).sigmoid()));return[_,_.tanh().mulStrict(E.sigmoid())]}var cve=ie({basicLSTMCell_:lve}),dve=ie({multiRNNCell_:uve});function fve(t,e,n,r,o){o===void 0&&(o=!0);var a=Y(t,"v","movingAverage"),i=Y(e,"x","movingAverage"),s=Y(n,"decay","movingAverage");Fae(a,i),ee(no(a.shape,i.shape),function(){return"Shape mismatch in v and x"});var u=Pe(1),l=u.sub(s),d=i.sub(a).mul(l);if(o){ee(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=Y(r,"step","movingAverage");d=d.div(u.sub(gL(s,f)))}return a.add(d)}var hve=ie({movingAverage_:fve});function pve(t,e,n,r,o,a,i,s,u){if(o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),i!==0)throw new Error("ellipsis mask is not yet supported");if(s!==0)throw new Error("new axis mask is not yet supported");var l=Y(t,"x","stridedSlice");if(r.every(function(y){return y===1})){var d=kE(l.shape,e,n,r,o,a,i,s,u),f=d[0],p=d[1],m=d[2],g=p.filter(function(y,b){return m.indexOf(b)===-1});return Mu(l,f,p).reshape(g)}return Q.engine.runKernel(function(y){return y.stridedSlice(l,e,n,r,o,a,i,s,u)},{$x:l})}var mve=ie({stridedSlice_:pve});function vve(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=Y(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var a=Q.engine.runKernel(function(i){return i.topk(r,e,n)},{$x:r});return{values:a[0],indices:a[1]}}var gve=ie({topk_:vve});function yve(t,e,n){var r=Y(t,"indices","scatterND","int32"),o=Y(e,"updates","scatterND");return uie(o,r,n),Q.engine.runKernel(function(a){return a.scatterND(r,o,n)},{$indices:r,$updates:o})}var bve=ie({scatterND_:yve});function xve(t){ee(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Q.engine.runKernel(function(o){return o.fft(r)},{input:t}).reshape(t.shape)}function wve(t){ee(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Q.engine.runKernel(function(o){return o.ifft(r)},{input:t}).reshape(t.shape)}function Cve(t){ee(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.zerosLike(),o=Jr(t,r).as2D(n,e),a=$E(o),i=Math.floor(e/2)+1,s=bi(a),u=bu(a),l=s.split([i,e-i],s.shape.length-1),d=u.split([i,e-i],u.shape.length-1),f=t.shape.slice();return f[t.shape.length-1]=i,Jr(l[0],d[0]).reshape(f)}function Sve(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=sy(r);return bi(o)}var a=[n,2*(e-1)],i=bi(t).as2D(n,e),s=bu(t).as2D(n,e),u=i.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(Pe(-1)),d=i.concat(u,1),f=s.concat(l,1);return r=Jr(d,f).as2D(a[0],a[1]),o=sy(r),bi(o)}var $E=ie({fft_:xve}),sy=ie({ifft_:wve}),SL=ie({rfft_:Cve}),EL=ie({irfft_:Sve}),Eve=Object.freeze({fft:$E,ifft:sy,rfft:SL,irfft:EL});function Rve(t,e,n,r){if(t.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var o=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var i=e.size;if(e.rank!==0&&(e.rank!==1||i!==o))throw new Error("sparseValues has incorrect shape "+e.shape+", should be [] or ["+o+"]");if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function _ve(t,e,n,r){r===void 0&&(r=0);var o=Y(t,"sparseIndices","sparseToDense","int32"),a=Y(e,"sparseValues","sparseToDense"),i=Y(r,"defaultValue","sparseToDense",a.dtype);return Rve(o,a,n,i),Q.engine.runKernel(function(s){return s.sparseToDense(o,a,n,i)},{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}var Tve=ie({sparseToDense_:_ve});function Ave(t,e){var n=Y(e,"indices","gatherND","int32"),r=Y(t,"x","gatherND");return Q.engine.runKernel(function(o){return o.gatherND(r,n)},{$x:r,$indices:n})}var zr,Nve=ie({gatherND_:Ave});function Dve(t,e,n){n===void 0&&(n=zr.SUM_BY_NONZERO_WEIGHTS);var r=Y(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=Y(e,"weights","computeWeightedLoss"));var a=o==null?r:r.mul(o);if(n===zr.NONE)return a;if(n===zr.SUM)return a.sum();if(n===zr.MEAN){if(o==null)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(Pe(i)):s}if(n===zr.SUM_BY_NONZERO_WEIGHTS){if(o==null)return a.sum().div(Pe(r.size));var u=o.mul(Wl(r.shape)).notEqual(Pe(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}function kve(t,e,n,r){r===void 0&&(r=zr.SUM_BY_NONZERO_WEIGHTS);var o=Y(t,"labels","absoluteDifference"),a=Y(e,"predictions","absoluteDifference"),i=null;n!=null&&(i=Y(n,"weights","absoluteDifference")),vn(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return ks(s,i,r)}function Ive(t,e,n,r){r===void 0&&(r=zr.SUM_BY_NONZERO_WEIGHTS);var o=Y(t,"labels","meanSquaredError"),a=Y(e,"predictions","meanSquaredError"),i=null;n!=null&&(i=Y(n,"weights","meanSquaredError")),vn(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return ks(s,i,r)}function Mve(t,e,n,r,o){o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"labels","cosineDistance"),i=Y(e,"predictions","cosineDistance"),s=null;r!=null&&(s=Y(r,"weights","cosineDistance")),vn(a.shape,i.shape,"Error in cosineDistance: ");var u=Pe(1).sub(a.mul(i).sum(n,!0));return ks(u,s,o)}function Ove(t,e,n,r){r===void 0&&(r=zr.SUM_BY_NONZERO_WEIGHTS);var o=Y(t,"labels","hingeLoss"),a=Y(e,"predictions","hingeLoss"),i=null;n!=null&&(i=Y(n,"weights","hingeLoss")),vn(o.shape,a.shape,"Error in hingeLoss: ");var s=Pe(1);o=Pe(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return ks(u,i,r)}function Pve(t,e,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"labels","logLoss"),i=Y(e,"predictions","logLoss"),s=null;n!=null&&(s=Y(n,"weights","logLoss")),vn(a.shape,i.shape,"Error in logLoss: ");var u=Pe(1),l=Pe(r),d=a.mul(i.add(l).log()).neg().sub(u.sub(a).mul(u.sub(i).add(l).log()));return ks(d,s,o)}function Fve(t,e){var n=Y(t,"labels","sigmoidCrossEntropyWithLogits"),r=Y(e,"logits","sigmoidCrossEntropyWithLogits");vn(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),a=r.mul(n),i=r.abs().neg().exp().log1p();return o.sub(a).add(i)}function Bve(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"multiClassLabels","sigmoidCrossEntropy"),i=Y(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=Y(n,"weights","sigmoidCrossEntropy")),vn(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Pe(r),l=Pe(1),d=Pe(.5);a=a.mul(l.sub(u)).add(d.mul(u))}var f=Fve(a,i);return ks(f,s,o)}function Lve(t,e,n,r,o){r===void 0&&(r=1),o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"labels","huberLoss"),i=Y(e,"predictions","huberLoss"),s=null;n!=null&&(s=Y(n,"weights","huberLoss")),vn(a.shape,i.shape,"Error in huberLoss: ");var u=Pe(r),l=i.sub(a).abs(),d=vL(l,u),f=l.sub(d),p=Pe(.5).mul(d.square()).add(u.mul(f));return ks(p,s,o)}function jve(t,e,n){if(n===void 0&&(n=-1),n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return Kp(function(r,o,a){var i=o.logSumExp([n],!0),s=o.toFloat().sub(i);return a([r,s]),{value:s.mul(r).neg().sum([n]),gradFunc:function(u,l){var d=l[0],f=l[1],p=Sa(u.shape,[n]);return[u.reshape(p).mul(d.toFloat().sub(f.exp())),u.reshape(p).mul(f.exp().sub(d.toFloat()))]}}})(t,e)}function zve(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"onehotLabels","softmaxCrossEntropy"),i=Y(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=Y(n,"weights","softmaxCrossEntropy")),vn(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Pe(r),l=Pe(1),d=Pe(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(d))}var f=jve(a,i);return ks(f,s,o)}(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(zr||(zr={}));var Uve=ie({absoluteDifference_:kve}),ks=ie({computeWeightedLoss_:Dve}),Wve=ie({cosineDistance_:Mve}),Vve=ie({hingeLoss_:Ove}),Hve=ie({huberLoss_:Lve}),Gve=ie({logLoss_:Pve}),$ve=ie({meanSquaredError_:Ive}),qve=ie({sigmoidCrossEntropy_:Bve}),Xve=ie({softmaxCrossEntropy_:zve}),Kve=Object.freeze({get Reduction(){return zr},absoluteDifference:Uve,computeWeightedLoss:ks,cosineDistance:Wve,hingeLoss:Vve,huberLoss:Hve,logLoss:Gve,meanSquaredError:$ve,sigmoidCrossEntropy:qve,softmaxCrossEntropy:Xve});function Yve(t){var e;if(Array.isArray(t)){e=!1,ee(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){ee(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},o=1;o<t.length;++o)r(o)}else e=!0,t=LE(t,t.shape[0],0).map(function(u){return QB(u,[0])});ee(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var a=[],i=t,s=function(u){a.push(Q.engine.tidy(function(){var l=i[u];if(u>0)for(var d=0;d<u;++d){var f=fL(a[d].mulStrict(l)).mul(a[d]);l=l.sub(f)}return l.div(xL(l,"euclidean"))}))};for(o=0;o<t.length;++o)s(o);return e?za(a,0):a}function Qve(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return $I(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(a,i){return a*i}),r=[],o=[];return Dr(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0).forEach(function(a){var i=$I(a,e),s=i[0],u=i[1];r.push(s),o.push(u)}),[za(r,0).reshape(t.shape),za(o,0).reshape(t.shape)]}function $I(t,e){return e===void 0&&(e=!1),Q.engine.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=KB(n),a=t.clone(),i=F0([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(f){var p,m=a,g=s,y=o;p=Q.engine.tidy(function(){var b=a.slice([f,f],[n-f,1]),C=b.norm(),S=a.slice([f,f],[1,1]),E=S.sign().neg(),_=S.sub(E.mul(C)),T=b.div(_);s=T.shape[0]===1?i.clone():i.concat(T.slice([1,0],[T.shape[0]-1,T.shape[1]]),0);var D=E.matMul(_).div(C).neg(),I=a.slice([f,0],[n-f,r]),k=D.mul(s);a=f===0?I.sub(k.matMul(s.transpose().matMul(I))):a.slice([0,0],[f,r]).concat(I.sub(k.matMul(s.transpose().matMul(I))),0);var M=o.slice([0,f],[n,o.shape[1]-f]);return o=f===0?M.sub(M.matMul(s).matMul(k.transpose())):o.slice([0,0],[n,f]).concat(M.sub(M.matMul(s).matMul(k.transpose())),1),[s,a,o]}),s=p[0],a=p[1],o=p[2],oie([m,g,y])},d=0;d<u;++d)l(d);return!e&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]})}var Jve=ie({gramSchmidt_:Yve}),Zve=ie({qr_:Qve}),ege=Object.freeze({gramSchmidt:Jve,qr:Zve});function tge(t,e,n){n===void 0&&(n=!1);var r=Y(t,"images","resizeBilinear");ee(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),ee(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=Q.engine.runKernel(function(l,d){return d([o]),l.resizeBilinear(o,i,s,n)},{batchImages:o},function(l,d){return{batchImages:function(){return Q.engine.runKernel(function(f){return f.resizeBilinearBackprop(l,d[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}function nge(t,e,n){n===void 0&&(n=!1);var r=Y(t,"images","resizeNearestNeighbor");ee(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),ee(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),ee(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=Q.engine.runKernel(function(l,d){return d([o]),l.resizeNearestNeighbor(o,i,s,n)},{batchImages:o},function(l,d){return{batchImages:function(){return Q.engine.runKernel(function(f){return f.resizeNearestNeighborBackprop(l,d[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}function rge(t,e,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var a=Y(t,"boxes","nonMaxSuppression"),i=Y(e,"scores","nonMaxSuppression"),s=RL(a,i,n,r,o);return n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,Q.engine.runKernel(function(u){return u.nonMaxSuppression(a,i,n,r,o)},{$boxes:a})}function oge(t,e,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),pn(this,void 0,void 0,function(){var a,i,s,u,l,d;return mn(this,function(f){switch(f.label){case 0:return a=Y(t,"boxes","nonMaxSuppressionAsync"),i=Y(e,"scores","nonMaxSuppressionAsync"),s=RL(a,i,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,a.data()];case 1:return u=f.sent(),[4,i.data()];case 2:return l=f.sent(),d=ME(u,l,n,r,o),a!==t&&a.dispose(),i!==e&&i.dispose(),[2,d]}})})}function RL(t,e,n,r,o){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY);var a=t.shape[0];return n=Math.min(n,a),ee(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),ee(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),ee(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),ee(e.rank===1,function(){return"scores must be a 1D tensor"}),ee(e.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+e.shape[0]}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o}}function age(t,e,n,r,o,a){var i=Y(t,"image","cropAndResize","float32"),s=Y(e,"boxes","cropAndResize","float32"),u=Y(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var l=s.shape[0];return ee(i.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),ee(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),ee(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),ee(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),ee(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),ee(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),Q.engine.runKernel(function(d,f){return d.cropAndResize(i,s,u,r,o,a)},{$image:i,$boxes:s})}var ige=ie({resizeBilinear_:tge}),sge=ie({resizeNearestNeighbor_:nge}),uge=ie({nonMaxSuppression_:rge}),lge=oge,cge=ie({cropAndResize_:age}),_L=Object.freeze({resizeBilinear:ige,resizeNearestNeighbor:sge,nonMaxSuppression:uge,nonMaxSuppressionAsync:lge,cropAndResize:cge});function dge(t,e,n,r,o,a){var i;n===void 0&&(n=!1),r===void 0&&(r=!1),a===void 0&&(a="linear");var s=Y(t,"a","fused matMul"),u=Y(e,"b","fused matMul");i=cr(s,u),s=i[0],u=i[1];var l=n?s.shape[s.rank-2]:s.shape[s.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?s.shape[s.rank-1]:s.shape[s.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],m=s.shape.slice(0,-2),g=u.shape.slice(0,-2),y=ft(m),b=ft(g);ee(s.rank>=2&&u.rank>=2&&s.rank===u.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+u.rank+"."}),ee(no(m,g),function(){return"Error in fused matMul: outer dimensions ("+m+") and ("+g+") of Tensors with shapes "+s.shape+" and "+u.shape+" must match."}),ee(l===d,function(){return"Error in fused matMul: inner shapes ("+l+") and ("+d+") of Tensors with shapes "+s.shape+" and "+u.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var C,S=s.shape.slice(0,-2).concat([f,p]),E=n?s.as3D(y,l,f):s.as3D(y,f,l),_=r?u.as3D(b,p,d):u.as3D(b,d,p);o!=null&&Gt(S,(C=cr(C=Y(o,"bias","fused matMul"),s)[0]).shape);var T={$a:E,$b:_};return o!=null&&(T.$bias=C),Q.engine.runKernel(function(D,I){var k=D.fusedBatchMatMul(E,_,n,r,C,a);return I([E,_,k]),k},T,function(D,I){var k,M=I[0],O=I[1],F=I[2];if(a==null||a==="linear")k=D;else{if(a!=="relu")throw new Error("Gradient for activation "+a+" has not been implemented yet.");k=D.mul(F.step())}var j={};return o!=null&&(j={$bias:function(){var G=k,W=dr(C.shape,k.shape);return W.length>0&&(G=G.sum(W)),G.reshape(C.shape)}}),Object.assign(n||r?!n&&r?{$a:function(){return k.matMul(O,!1,!1)},$b:function(){return k.matMul(M,!0,!1)}}:n&&!r?{$a:function(){return O.matMul(k,!1,!0)},$b:function(){return M.matMul(k,!1,!1)}}:{$a:function(){return O.matMul(k,!0,!0)},$b:function(){return k.matMul(M,!0,!0)}}:{$a:function(){return k.matMul(O,!1,!0)},$b:function(){return M.matMul(k,!0,!1)}},j)}).reshape(S)}var fge=ie({matMul_:dge}),hge=Object.freeze({matMul:fge}),pge=Object.freeze({image:_L,linalg:ege,losses:Kve,spectral:Eve,fused:hge,op:ie,batchNormalization2d:hhe,batchNormalization3d:phe,batchNormalization4d:mhe,batchNormalization:vhe,batchNorm:rL,batchNorm2d:ghe,batchNorm3d:yhe,batchNorm4d:bhe,complex:Jr,real:bi,imag:bu,concat:xo,concat1d:Yce,concat2d:Qce,concat3d:Jce,concat4d:Zce,split:LE,conv1d:Fhe,conv2d:Ds,conv3d:Bhe,conv2dDerFilter:iL,depthwiseConv2d:WE,separableConv2d:sL,conv2dTranspose:Lhe,matMul:VE,dot:Whe,outerProduct:Vhe,reverse:om,reverse1d:Khe,reverse2d:Yhe,reverse3d:Qhe,reverse4d:Jhe,maxPool:$d,avgPool:am,pool:ipe,slice:Mu,slice1d:fpe,slice2d:hpe,slice3d:cL,slice4d:ppe,abs:Mfe,acos:Ofe,acosh:Pfe,asin:Ffe,asinh:Bfe,atan:Lfe,atanh:jfe,ceil:zfe,clipByValue:zE,cos:Ufe,cosh:Wfe,erf:Vfe,exp:K2,expm1:Hfe,floor:Gfe,log:$fe,log1p:qfe,logSigmoid:Xfe,neg:oy,reciprocal:Kfe,round:Yfe,rsqrt:JB,sigmoid:ZB,sign:Qfe,isNaN:Jfe,isInf:Zfe,isFinite:ehe,sin:the,sinh:nhe,softplus:rhe,sqrt:ohe,square:ahe,step:ihe,tan:she,tanh:uhe,all:_pe,any:Tpe,argMax:Ape,argMin:Npe,logSumExp:Dpe,max:L0,mean:kpe,min:Ipe,moments:Mpe,sum:fL,prod:Ope,equal:hL,equalStrict:qpe,greater:Xpe,greaterEqual:pL,greaterEqualStrict:Kpe,greaterStrict:Ype,less:Qpe,lessEqual:Jpe,lessEqualStrict:Zpe,lessStrict:eme,notEqual:tme,notEqualStrict:nme,add:en,addN:Eme,addStrict:Rme,atan2:_me,div:ss,divStrict:Tme,floorDiv:mL,maximum:HE,maximumStrict:Ame,minimum:vL,minimumStrict:Nme,mod:Dme,modStrict:kme,mul:fs,mulStrict:Ime,pow:gL,powStrict:Mme,squaredDifference:Ome,squaredDifferenceStrict:Pme,sub:Ti,subStrict:Fme,elu:Qme,leakyRelu:Jme,prelu:Zme,relu:er,selu:eve,logicalAnd:GE,logicalNot:Vme,logicalOr:yL,logicalXor:Hme,where:wp,whereAsync:Gme,buffer:Lt,print:Ide,batchToSpaceND:XB,cast:Mde,clone:Ode,cumsum:Pde,depthToSpace:Fde,expandDims:ha,eye:KB,multinomial:Bde,oneHot:X2,pad:em,pad1d:Lde,pad2d:jde,pad3d:zde,pad4d:Ude,rand:Wde,randomNormal:Vde,randomUniform:Hde,reshape:ja,spaceToBatchND:YB,squeeze:QB,stack:za,tile:Ed,truncatedNormal:Gde,unstack:Dr,setdiff1dAsync:$de,fill:Qh,linspace:Rie,ones:Wl,range:EB,scalar:Pe,tensor:Jn,tensor1d:Fo,tensor2d:F0,tensor3d:IE,tensor4d:Oa,tensor5d:wie,tensor6d:Cie,zeros:qn,onesLike:RB,zerosLike:nn,transpose:Ou,softmax:Hu,logSoftmax:gie,localResponseNormalization:rve,norm:xL,gather:wL,unsortedSegmentSum:CL,basicLSTMCell:cve,multiRNNCell:dve,movingAverage:hve,stridedSlice:mve,topk:gve,scatterND:bve,fft:$E,ifft:sy,rfft:SL,irfft:EL,sparseToDense:Tve,gatherND:Nve});function mge(t,e,n){if(e==="linear")return t.linear(n);if(e==="relu")return t.relu(n);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var vge=(function(){function t(){this.blockSize=48,this.firstUse=!0,Q.get("IS_BROWSER")&&(this.fromPixels2DContext=document.createElement("canvas").getContext("2d"))}return t.prototype.setDataMover=function(e){this.data=new _B(e)},t.prototype.register=function(e,n,r){if(this.firstUse&&(this.firstUse=!1,Q.get("IS_NODE")&&G2(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================
`)),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,{dtype:r})},t.prototype.write=function(e,n){if(n==null)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(e).values=n},t.prototype.fromPixels=function(e,n){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r,o;if(Q.get("IS_NODE")&&e.getContext==null)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(e.getContext!=null)r=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else if(e instanceof ImageData)r=e.data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(this.fromPixels2DContext==null)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),r=this.fromPixels2DContext.getImageData(0,0,e.width,e.height).data}if(n===4)o=new Int32Array(r);else{var a=e.width*e.height;o=new Int32Array(a*n);for(var i=0;i<a;i++)for(var s=0;s<n;++s)o[i*n+s]=r[4*i+s]}return IE(o,[e.height,e.width,n],"int32")},t.prototype.read=function(e){return pn(this,void 0,void 0,function(){return mn(this,function(n){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var n=this.data.get(e),r=n.dtype,o=n.complexTensors;return r==="complex64"?AB(o.real.dataSync(),o.imag.dataSync()):this.data.get(e).values},t.prototype.disposeData=function(e){if(this.data.has(e)){var n=this.data.get(e).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){return n=Jg(),e(),[2,{kernelMs:Jg()-n}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,n){var r=We.make(e.shape,{},"complex64");return this.data.get(r.dataId).complexTensors={real:Q.engine.keep(e.clone()),imag:Q.engine.keep(n.clone())},r},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.assertNotComplex=function(e,n){Array.isArray(e)||(e=[e]),e.forEach(function(r){r!=null&&ee(r.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})},t.prototype.slice=function(e,n,r){if(this.assertNotComplex(e,"slice"),CB(e.shape,n,r)){var o=SB(n,e.strides),a=ft(r);return Jn(e.dataSync().subarray(o,o+a),r,e.dtype)}for(var i=Lt(r,e.dtype),s=e.bufferSync(),u=0;u<i.size;++u){var l=i.indexToLoc(u).map(function(d,f){return d+n[f]});i.values[u]=s.get.apply(s,l)}return i.toTensor()},t.prototype.stridedSlice=function(e,n,r,o,a,i,s,u,l){this.assertNotComplex(e,"stridedSlice");var d=kE(e.shape,n,r,o,a,i,s,u,l),f=d[0],p=d[1],m=d[2],g=p.filter(function(T,D){return m.indexOf(D)===-1});if(g.some(function(T){return T===0}))return Jn([],g);for(var y=Lt(p,e.dtype),b=e.bufferSync(),C=0;C<y.size;C++){for(var S=y.indexToLoc(C),E=new Array(S.length),_=0;_<E.length;_++)E[_]=S[_]*o[_]+f[_];y.set.apply(y,[b.get.apply(b,E)].concat(S))}return y.toTensor().reshape(g)},t.prototype.unstack=function(e,n){for(var r=e.shape[n],o=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==n&&(o[a++]=e.shape[i]);var s=new Array(e.rank).fill(0),u=e.shape.slice();u[n]=1;var l=new Array(r);for(i=0;i<l.length;i++)s[n]=i,l[i]=this.slice(e,s,u).reshape(o);return l},t.prototype.reverse=function(e,n){this.assertNotComplex(e,"reverse");for(var r=Lt(e.shape,e.dtype),o=e.bufferSync(),a=function(s){var u=r.indexToLoc(s),l=u.slice();n.forEach(function(d){return l[d]=e.shape[d]-1-l[d]}),r.set.apply(r,[o.get.apply(o,l)].concat(u))},i=0;i<r.size;i++)a(i);return r.toTensor()},t.prototype.concat=function(e,n){this.assertNotComplex(e,"concat");var r=e.map(function(l){var d=ft(l.shape.slice(n));return l.as2D(-1,d)}),o=Gd(r.map(function(l){return l.shape}),1),a=Lt(o,e[0].dtype).values;if(r[0].shape[0]===1){var i=0;r.forEach(function(l){a.set(l.dataSync(),i),i+=l.size})}else{var s=0;r.forEach(function(l){for(var d=l.dataSync(),f=0,p=0;p<l.shape[0];++p)for(var m=p*o[1]+s,g=0;g<l.shape[1];++g)a[m+g]=d[f++];s+=l.shape[1]})}var u=Gd(e.map(function(l){return l.shape}),n);return Jn(a,u,e[0].dtype)},t.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(Pe(-1),e)},t.prototype.add=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,o,a,i){return{real:r+a,imag:o+i}}):this.broadcastedBinaryOp(e,n,vr(e.dtype,n.dtype),function(r,o){return r+o})},t.prototype.addN=function(e){this.assertNotComplex(e,"addN");for(var n=e.map(function(u){return u.dataSync()}),r=Lt(e[0].shape,e[0].dtype),o=r.values,a=0;a<e.length;a++)for(var i=n[a],s=0;s<o.length;s++)o[s]+=i[s];return r.toTensor()},t.prototype.subtract=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,o,a,i){return{real:r-a,imag:o-i}}):this.broadcastedBinaryOp(e,n,vr(e.dtype,n.dtype),function(r,o){return r-o})},t.prototype.pow=function(e,n){return this.assertNotComplex([e,n],"pow"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return Math.pow(r,o)})},t.prototype.batchMatMul=function(e,n,r,o){this.assertNotComplex([e,n],"matMul");for(var a=r?e.shape[1]:e.shape[2],i=r?e.shape[2]:e.shape[1],s=o?n.shape[1]:n.shape[2],u=e.shape[0],l=e.dataSync(),d=n.dataSync(),f=r?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],p=f[0],m=f[1],g=f[2],y=o?[1,n.strides[1],n.strides[0]]:[n.strides[1],1,n.strides[0]],b=y[0],C=y[1],S=y[2],E=i*s,_=Lt([u,i,s],e.dtype),T=_.values,D=this.blockSize,I=0;I<u;I++)for(var k=0;k<i;k+=D)for(var M=0;M<s;M+=D)for(var O=0;O<a;O+=D)for(var F=Math.min(k+D,i),j=Math.min(M+D,s),G=Math.min(O+D,a),W=k;W<F;W++)for(var q=M;q<j;q++){for(var P=0,U=O;U<G;U++)P+=l[I*p+W*m+U*g]*d[U*b+q*C+I*S];T[I*E+(W*s+q)]+=P}return _.toTensor()},t.prototype.fusedBatchMatMul=function(e,n,r,o,a,i){var s=this.batchMatMul(e,n,r,o);return a&&(s=this.add(s,a)),i&&(s=mge(this,i,s)),s},t.prototype.multiply=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,o,a,i){return{real:r*a-o*i,imag:r*i+o*a}}):this.broadcastedBinaryOp(e,n,vr(e.dtype,n.dtype),function(r,o){return r*o})},t.prototype.realDivide=function(e,n){return this.assertNotComplex([e,n],"realDivide"),this.broadcastedBinaryOp(e,n,"float32",function(r,o){return r/o})},t.prototype.floorDiv=function(e,n){return this.assertNotComplex([e,n],"floorDiv"),this.broadcastedBinaryOp(e,n,"int32",function(r,o){return Math.floor(r/o)})},t.prototype.sum=function(e,n){this.assertNotComplex(e,"sum"),Mo("sum",n,e.rank);for(var r=Fr(e.shape,n),o=r[0],a=r[1],i=qn(o,vr(e.dtype,"int32")),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=0,m=0;m<s;++m)p+=l[f+m];u[d]=p}return i},t.prototype.prod=function(e,n){this.assertNotComplex(e,"sum");for(var r=Fr(e.shape,n),o=r[0],a=r[1],i=qn(o,vr(e.dtype,"int32")),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=1,m=0;m<s;++m)p*=l[f+m];u[d]=p}return i},t.prototype.unsortedSegmentSum=function(e,n,r){this.assertNotComplex(e,"unsortedSegmentSum");for(var o=[],a=e.rank-n.rank,i=0;i<a;++i)n=n.expandDims(i+1);for(i=0;i<r;++i){var s=Pe(i,"int32"),u=hL(s,n).asType("float32").mul(e).sum(0);o.push(u)}return za(o)},t.prototype.argMin=function(e,n){this.assertNotComplex(e,"argMin");var r=[n];Mo("argMin",r,e.rank);for(var o=Fr(e.shape,r),a=o[0],i=o[1],s=qn(a,"int32"),u=ft(i),l=s.dataSync(),d=e.dataSync(),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0,y=0;y<u;++y){var b=d[p+y];b<m&&(m=b,g=y)}l[f]=g}return s},t.prototype.argMax=function(e,n){this.assertNotComplex(e,"argMax");var r=[n];Mo("argMax",r,e.rank);for(var o=Fr(e.shape,r),a=o[0],i=o[1],s=qn(a,"int32"),u=ft(i),l=s.dataSync(),d=e.dataSync(),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0,y=0;y<u;++y){var b=d[p+y];b>m&&(m=b,g=y)}l[f]=g}return s},t.prototype.cumsum=function(e,n,r,o){if(this.assertNotComplex(e,"cumsum"),n!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+n);for(var a=vr(e.dtype,"int32"),i=qn(e.shape,a),s=i.dataSync(),u=e.dataSync(),l=e.shape[e.rank-1],d=o?function(y,b){return y+l-b-1}:function(y,b){return y+b},f=0;f<u.length;f+=l)for(var p=0;p<l;p++){var m=d(f,p);if(p===0)s[m]=r?0:u[m];else{var g=d(f,p-1);s[m]=r?u[g]+s[g]:u[m]+s[g]}}return i},t.prototype.equal=function(e,n){return this.assertNotComplex([e,n],"equal"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r===o?1:0})},t.prototype.notEqual=function(e,n){return this.assertNotComplex([e,n],"notEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r!==o?1:0})},t.prototype.less=function(e,n){return this.assertNotComplex([e,n],"less"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r<o?1:0})},t.prototype.lessEqual=function(e,n){return this.assertNotComplex([e,n],"lessEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r<=o?1:0})},t.prototype.greater=function(e,n){return this.assertNotComplex([e,n],"greater"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r>o?1:0})},t.prototype.greaterEqual=function(e,n){return this.assertNotComplex([e,n],"greaterEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r>=o?1:0})},t.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot");for(var n=e.dataSync(),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n[o]?0:1;return We.make(e.shape,{values:r},"bool")},t.prototype.logicalAnd=function(e,n){return this.assertNotComplex([e,n],"logicalAnd"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r&&o})},t.prototype.logicalOr=function(e,n){return this.assertNotComplex([e,n],"logicalOr"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r||o})},t.prototype.select=function(e,n,r){this.assertNotComplex([e,n,r],"select");for(var o=e.dataSync(),a=n.dataSync(),i=r.dataSync(),s=qn(n.shape,vr(n.dtype,r.dtype)),u=s.dataSync(),l=0,d=e.rank===0||e.rank>1||n.rank===1?1:n.shape[1],f=0;f<o.length;f++)for(var p=0;p<d;p++)o[f]===1?u[l++]=a[f]:u[l++]=i[f];return s},t.prototype.where=function(e){this.assertNotComplex([e],"where");var n=e.dataSync();return jE(e.shape,n)},t.prototype.topk=function(e,n,r){return this.assertNotComplex(e,"topk"),DB(e.dataSync(),e.shape,e.dtype,n)},t.prototype.min=function(e,n){this.assertNotComplex(e,"min"),Mo("min",n,e.rank);for(var r=Fr(e.shape,n),o=r[0],a=r[1],i=qn(o,e.dtype),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=l[f],m=0;m<s;++m){var g=l[f+m];g<p&&(p=g)}u[d]=p}return i},t.prototype.minimum=function(e,n){return this.assertNotComplex([e,n],"minimum"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return Math.min(r,o)})},t.prototype.mod=function(e,n){return this.assertNotComplex([e,n],"mod"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){var a=r%o;return r<0&&o<0||r>=0&&o>=0?a:(a+o)%o})},t.prototype.max=function(e,n){this.assertNotComplex(e,"max"),Mo("max",n,e.rank);for(var r=Fr(e.shape,n),o=r[0],a=r[1],i=qn(o,e.dtype),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=l[f],m=0;m<s;++m){var g=l[f+m];g>p&&(p=g)}u[d]=p}return i},t.prototype.maximum=function(e,n){return this.assertNotComplex([e,n],"maximum"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return Math.max(r,o)})},t.prototype.all=function(e,n){this.assertNotComplex(e,"all"),Mo("all",n,e.rank);for(var r=Fr(e.shape,n),o=r[0],a=r[1],i=qn(o,e.dtype),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=l[f],m=0;m<s;++m){var g=l[f+m];p=p&&g}u[d]=p}return i},t.prototype.any=function(e,n){this.assertNotComplex(e,"any"),Mo("any",n,e.rank);for(var r=Fr(e.shape,n),o=r[0],a=r[1],i=qn(o,e.dtype),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=l[f],m=0;m<s;++m){var g=l[f+m];p=p||g}u[d]=p}return i},t.prototype.squaredDifference=function(e,n){return this.assertNotComplex([e,n],"squaredDifference"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){var a=r-o;return a*a})},t.prototype.ceil=function(e){this.assertNotComplex(e,"ceil");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=Math.ceil(n[o]);return We.make(e.shape,{values:r})},t.prototype.floor=function(e){this.assertNotComplex(e,"floor");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=Math.floor(n[o]);return We.make(e.shape,{values:r})},t.prototype.sign=function(e){this.assertNotComplex(e,"x");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)n[o]<0?r[o]=-1:n[o]>0?r[o]=1:r[o]=0;return We.make(e.shape,{values:r})},t.prototype.isNaN=function(e){this.assertNotComplex(e,"x");for(var n=e.dataSync(),r=new Uint8Array(n.length),o=0;o<n.length;++o)Number.isNaN(n[o])&&(r[o]=1);return We.make(e.shape,{values:r},"bool")},t.prototype.isInf=function(e){this.assertNotComplex(e,"x");for(var n=e.dataSync(),r=new Uint8Array(n.length),o=0;o<n.length;++o)Math.abs(n[o])===1/0&&(r[o]=1);return We.make(e.shape,{values:r},"bool")},t.prototype.isFinite=function(e){this.assertNotComplex(e,"x");for(var n=e.dataSync(),r=new Uint8Array(n.length),o=0;o<n.length;++o)Number.isFinite(n[o])&&(r[o]=1);return We.make(e.shape,{values:r},"bool")},t.prototype.round=function(e){this.assertNotComplex(e,"round");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=Math.floor(n[o]);n[o]-a<.5?r[o]=Math.floor(n[o]):n[o]-a>.5?r[o]=Math.ceil(n[o]):r[o]=a%2==0?a:a+1}return We.make(e.shape,{values:r})},t.prototype.exp=function(e){this.assertNotComplex(e,"exp");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=Math.exp(n[o]);return We.make(e.shape,{values:r})},t.prototype.expm1=function(e){this.assertNotComplex(e,"expm1");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=Math.expm1(n[o]);return We.make(e.shape,{values:r})},t.prototype.log=function(e){this.assertNotComplex(e,"log");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=Math.log(a)}return We.make(e.shape,{values:r})},t.prototype.log1p=function(e){this.assertNotComplex(e,"log1p");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=Math.log1p(a)}return We.make(e.shape,{values:r})},t.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=Math.sqrt(a)}return We.make(e.shape,{values:r})},t.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=1/Math.sqrt(a)}return We.make(e.shape,{values:r})},t.prototype.square=function(e){this.assertNotComplex(e,"square");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=a*a}return We.make(e.shape,{values:r})},t.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=1/n[o];return We.make(e.shape,{values:r})},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){this.assertNotComplex(e,"relu");for(var n=qn(e.shape,e.dtype),r=n.dataSync(),o=e.dataSync(),a=0;a<o.length;++a)r[a]=Math.max(0,o[a]);return n},t.prototype.prelu=function(e,n){return this.assertNotComplex([e,n],"prelu"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return r<0?o*r:r})},t.prototype.elu=function(e){this.assertNotComplex(e,"elu");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o){var a=r[o];n[o]=a>=0?a:Math.exp(a)-1}return We.make(e.shape,{values:n})},t.prototype.eluDer=function(e,n){this.assertNotComplex([e,n],"eluDer");for(var r=new Float32Array(n.size),o=n.dataSync(),a=e.dataSync(),i=0;i<o.length;++i){var s=o[i];r[i]=s>=1?a[i]:a[i]*(s+1)}return We.make(n.shape,{values:r})},t.prototype.selu=function(e){this.assertNotComplex(e,"selu");for(var n=FE,r=BE,o=new Float32Array(e.size),a=e.dataSync(),i=0;i<a.length;++i){var s=a[i];o[i]=s>=0?r*s:n*(Math.exp(s)-1)}return We.make(e.shape,{values:o})},t.prototype.clip=function(e,n,r){this.assertNotComplex(e,"clip");for(var o=new Float32Array(e.size),a=e.dataSync(),i=0;i<a.length;++i){var s=a[i];o[i]=s>r?r:s<n?n:s}return We.make(e.shape,{values:o})},t.prototype.abs=function(e){for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.abs(r[o]);return We.make(e.shape,{values:n})},t.prototype.complexAbs=function(e){for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<e.size;++o){var a=r[2*o],i=r[2*o+1];n[o]=Math.hypot(a,i)}return We.make(e.shape,{values:n})},t.prototype.int=function(e){this.assertNotComplex(e,"int");for(var n=new Int32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=r[o];return We.make(e.shape,{values:n},"int32")},t.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=1/(1+Math.exp(-r[o]));return We.make(e.shape,{values:n})},t.prototype.softplus=function(e){this.assertNotComplex(e,"softplus");for(var n=Math.log(11920928955078125e-23)+2,r=new Float32Array(e.size),o=e.dataSync(),a=0;a<o.length;++a){var i=o[a]>-n,s=o[a]<n,u=Math.exp(o[a]),l=void 0;l=s?u:i?o[a]:Math.log(1+u),r[a]=l}return We.make(e.shape,{values:r})},t.prototype.sin=function(e){this.assertNotComplex(e,"sin");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.sin(r[o]);return We.make(e.shape,{values:n})},t.prototype.cos=function(e){this.assertNotComplex(e,"cos");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.cos(r[o]);return We.make(e.shape,{values:n})},t.prototype.tan=function(e){this.assertNotComplex(e,"tan");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.tan(r[o]);return We.make(e.shape,{values:n})},t.prototype.asin=function(e){this.assertNotComplex(e,"asin");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.asin(r[o]);return We.make(e.shape,{values:n})},t.prototype.acos=function(e){this.assertNotComplex(e,"acos");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.acos(r[o]);return We.make(e.shape,{values:n})},t.prototype.atan=function(e){this.assertNotComplex(e,"atan");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.atan(r[o]);return We.make(e.shape,{values:n})},t.prototype.atan2=function(e,n){return this.assertNotComplex([e,n],"atan2"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return Math.atan2(r,o)})},t.prototype.sinh=function(e){this.assertNotComplex(e,"sinh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.sinh(r[o]);return We.make(e.shape,{values:n})},t.prototype.cosh=function(e){this.assertNotComplex(e,"cosh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.cosh(r[o]);return We.make(e.shape,{values:n})},t.prototype.tanh=function(e){this.assertNotComplex(e,"tanh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=gae(r[o]);return We.make(e.shape,{values:n})},t.prototype.asinh=function(e){this.assertNotComplex(e,"asinh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.asinh(r[o]);return We.make(e.shape,{values:n})},t.prototype.acosh=function(e){this.assertNotComplex(e,"acosh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.acosh(r[o]);return We.make(e.shape,{values:n})},t.prototype.atanh=function(e){this.assertNotComplex(e,"atanh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.atanh(r[o]);return We.make(e.shape,{values:n})},t.prototype.erf=function(e){this.assertNotComplex(e,"erf");for(var n=new Float32Array(e.size),r=e.dataSync(),o=LB,a=jB,i=zB,s=UB,u=WB,l=VB,d=0;d<r.length;++d){var f=r[d],p=1/(1+o*f);n[d]=1-((((l*p+u)*p+s)*p+i)*p+a)*p*Math.exp(-f*f)}return We.make(e.shape,{values:n})},t.prototype.step=function(e,n){n===void 0&&(n=0),this.assertNotComplex(e,"step");for(var r=new Float32Array(e.size),o=e.dataSync(),a=0;a<o.length;++a){var i=o[a];isNaN(i)?r[a]=NaN:r[a]=i>0?1:n}return We.make(e.shape,{values:r})},t.prototype.conv2d=function(e,n,r){this.assertNotComplex([e,n],"conv2d");for(var o=r.filterHeight,a=r.filterWidth,i=r.dilationHeight,s=r.dilationWidth,u=r.padInfo.left,l=r.padInfo.top,d=Lt(r.outShape,e.dtype),f=e.dataSync(),p=n.dataSync(),m=d.values,g=0;g<r.batchSize;++g)for(var y=g*e.strides[0],b=g*d.strides[0],C=0;C<r.outHeight;++C)for(var S=b+C*d.strides[1],E=C*r.strideHeight-u,_=0;_<o;_++){var T=E+_*i;if(!(T<0||T>=r.inHeight))for(var D=_*n.strides[0],I=y+T*e.strides[1],k=0;k<r.outWidth;++k)for(var M=S+k*r.outChannels,O=k*r.strideWidth-l,F=0;F<a;F++){var j=O+F*s;if(!(j<0||j>=r.inWidth))for(var G=D+F*n.strides[1],W=I+j*r.inChannels,q=G,P=0;P<r.inChannels;++P){for(var U=f[W+P],z=0;z<r.outChannels;++z)m[M+z]+=U*p[q+z];q+=r.outChannels}}}return d.toTensor()},t.prototype.conv3d=function(e,n,r){for(var o=r.filterDepth,a=r.filterHeight,i=r.filterWidth,s=r.dilationDepth,u=r.dilationHeight,l=r.dilationWidth,d=r.padInfo.front,f=r.padInfo.left,p=r.padInfo.top,m=Lt(r.outShape,e.dtype),g=e.dataSync(),y=n.dataSync(),b=m.values,C=0;C<r.batchSize;++C)for(var S=C*e.strides[0],E=C*m.strides[0],_=0;_<r.outDepth;++_)for(var T=E+_*m.strides[1],D=_*r.strideDepth-d,I=0;I<o;I++){var k=D+I*s;if(!(k<0||k>=r.inDepth))for(var M=I*n.strides[0],O=S+k*e.strides[1],F=0;F<r.outHeight;++F)for(var j=T+F*m.strides[2],G=F*r.strideHeight-p,W=0;W<a;W++){var q=G+W*u;if(!(q<0||q>=r.inHeight))for(var P=M+W*n.strides[1],U=O+q*e.strides[2],z=0;z<r.outWidth;++z)for(var H=j+z*r.outChannels,L=z*r.strideWidth-f,$=0;$<i;$++){var J=L+$*l;if(!(J<0||J>=r.inWidth))for(var ne=P+$*n.strides[2],ce=U+J*r.inChannels,be=ne,se=0;se<r.inChannels;++se){for(var oe=g[ce+se],fe=0;fe<r.outChannels;++fe)b[H+fe]+=oe*y[be+fe];be+=r.outChannels}}}}return m.toTensor()},t.prototype.conv2dDerInput=function(e,n,r){this.assertNotComplex([e,n],"conv2dDerInput");for(var o=Lt(r.inShape,"float32"),a=o.values,i=o.strides,s=i[0],u=i[1],l=i[2],d=e.dataSync(),f=e.strides,p=f[0],m=f[1],g=f[2],y=n.dataSync(),b=n.strides,C=b[0],S=b[1],E=b[2],_=r.batchSize,T=r.filterHeight,D=r.filterWidth,I=r.inChannels,k=r.inHeight,M=r.inWidth,O=r.outChannels,F=r.outHeight,j=r.outWidth,G=r.strideHeight,W=r.strideWidth,q=T-1-r.padInfo.top,P=D-1-r.padInfo.left,U=0;U<_;++U)for(var z=0;z<I;++z)for(var H=0;H<k;++H)for(var L=H-q,$=Math.max(0,Math.ceil(L/G)),J=Math.min(F,(T+L)/G),ne=0;ne<M;++ne){for(var ce=ne-P,be=Math.max(0,Math.ceil(ce/W)),se=Math.min(j,(D+ce)/W),oe=0,fe=$;fe<J;++fe)for(var me=fe*G-L,Oe=be;Oe<se;++Oe)for(var Be=p*U+m*fe+g*Oe,Le=C*(T-1-me)+S*(D-1-(Oe*W-ce))+E*z,De=0;De<O;++De)oe+=d[Be+De]*y[Le+De];a[s*U+u*H+l*ne+z]=oe}return o.toTensor()},t.prototype.conv3dDerInput=function(e,n,r){for(var o=Lt(r.inShape,"float32"),a=o.values,i=o.strides,s=i[0],u=i[1],l=i[2],d=i[3],f=e.dataSync(),p=e.strides,m=p[0],g=p[1],y=p[2],b=p[3],C=n.dataSync(),S=n.strides,E=S[0],_=S[1],T=S[2],D=S[3],I=r.batchSize,k=r.filterDepth,M=r.filterHeight,O=r.filterWidth,F=r.inChannels,j=r.inDepth,G=r.inHeight,W=r.inWidth,q=r.outChannels,P=r.outDepth,U=r.outHeight,z=r.outWidth,H=r.strideDepth,L=r.strideHeight,$=r.strideWidth,J=k-1-r.padInfo.front,ne=M-1-r.padInfo.top,ce=O-1-r.padInfo.left,be=0;be<I;++be)for(var se=0;se<F;++se)for(var oe=0;oe<j;++oe)for(var fe=oe-J,me=Math.max(0,Math.ceil(fe/H)),Oe=Math.min(P,(k+fe)/H),Be=0;Be<G;++Be)for(var Le=Be-ne,De=Math.max(0,Math.ceil(Le/L)),$e=Math.min(U,(M+Le)/L),et=0;et<W;++et){for(var ot=et-ce,Ie=Math.max(0,Math.ceil(ot/$)),Me=Math.min(z,(O+ot)/$),Fe=0,Ke=me;Ke<Oe;++Ke)for(var ct=Ke*H-fe,qe=De;qe<$e;++qe)for(var Xe=qe*L-Le,Wt=Ie;Wt<Me;++Wt)for(var je=m*be+g*Ke+y*qe+b*Wt,He=E*(k-1-ct)+_*(M-1-Xe)+T*(O-1-(Wt*$-ot))+D*se,it=0;it<q;++it)Fe+=f[je+it]*C[He+it];a[s*be+u*oe+l*Be+d*et+se]=Fe}return o.toTensor()},t.prototype.conv2dDerFilter=function(e,n,r){this.assertNotComplex([e,n],"conv2dDerFilter");for(var o=r.strideHeight,a=r.strideWidth,i=r.filterHeight,s=r.filterWidth,u=Lt(r.filterShape,"float32"),l=r.padInfo.left,d=r.padInfo.top,f=e.bufferSync(),p=n.bufferSync(),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((d-m)/o)),y=Math.min(r.outHeight,(r.inHeight+d-m)/o),b=0;b<s;++b)for(var C=Math.max(0,Math.ceil((l-b)/a)),S=Math.min(r.outWidth,(r.inWidth+l-b)/a),E=0;E<r.inChannels;++E)for(var _=0;_<r.outChannels;++_){for(var T=0,D=0;D<r.batchSize;++D)for(var I=g;I<y;++I)for(var k=m+I*o-d,M=C;M<S;++M){var O=b+M*a-l;T+=f.get(D,k,O,E)*p.get(D,I,M,_)}u.set(T,m,b,E,_)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,n,r){for(var o=r.strideDepth,a=r.strideHeight,i=r.strideWidth,s=r.filterDepth,u=r.filterHeight,l=r.filterWidth,d=Lt(r.filterShape,"float32"),f=d.values,p=d.strides,m=p[0],g=p[1],y=p[2],b=p[3],C=n.dataSync(),S=n.strides,E=S[0],_=S[1],T=S[2],D=S[3],I=e.dataSync(),k=e.strides,M=k[0],O=k[1],F=k[2],j=k[3],G=r.padInfo.front,W=r.padInfo.left,q=r.padInfo.top,P=0;P<s;++P)for(var U=Math.max(0,Math.ceil((G-P)/o)),z=Math.min(r.outDepth,(r.inDepth+G-P)/o),H=P*m,L=0;L<u;++L)for(var $=Math.max(0,Math.ceil((q-L)/a)),J=Math.min(r.outHeight,(r.inHeight+q-L)/a),ne=L*g+H,ce=0;ce<l;++ce)for(var be=Math.max(0,Math.ceil((W-ce)/i)),se=Math.min(r.outWidth,(r.inWidth+W-ce)/i),oe=ce*y+ne,fe=0;fe<r.inChannels;++fe)for(var me=fe*b+oe,Oe=0;Oe<r.outChannels;++Oe){for(var Be=0,Le=0;Le<r.batchSize;++Le)for(var De=Le*M,$e=Le*E,et=U;et<z;++et)for(var ot=(P+et*o-G)*O+De,Ie=et*_+$e,Me=$;Me<J;++Me)for(var Fe=(L+Me*a-q)*F+ot,Ke=Me*T+Ie,ct=be;ct<se;++ct){var qe=ct*D+Ke;Be+=I[(ce+ct*i-W)*j+Fe+fe]*C[qe+Oe]}f[me+Oe]=Be}return d.toTensor()},t.prototype.depthwiseConv2D=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2D");for(var o=r.filterHeight,a=r.filterWidth,i=r.dilationHeight,s=r.dilationWidth,u=r.padInfo.left,l=r.padInfo.top,d=r.outChannels/r.inChannels,f=Lt(r.outShape,e.dtype),p=e.dataSync(),m=n.dataSync(),g=f.values,y=0;y<r.batchSize;++y)for(var b=y*e.strides[0],C=y*f.strides[0],S=0;S<r.outHeight;++S)for(var E=C+S*f.strides[1],_=S*r.strideHeight-u,T=0;T<o;++T){var D=_+T*i;if(!(D<0||D>=r.inHeight))for(var I=T*n.strides[0],k=b+D*e.strides[1],M=0;M<r.outWidth;++M)for(var O=E+M*f.strides[2],F=M*r.strideWidth-l,j=0;j<a;++j){var G=F+j*s;if(!(G<0||G>=r.inWidth))for(var W=I+j*n.strides[1],q=k+G*r.inChannels,P=O,U=W,z=0;z<r.inChannels;++z){for(var H=p[q+z],L=0;L<d;++L)g[P+L]+=H*m[U+L];P+=d,U+=d}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2DDerInput");for(var o=Lt(r.inShape,"float32"),a=o.values,i=o.strides,s=i[0],u=i[1],l=i[2],d=e.dataSync(),f=e.strides,p=f[0],m=f[1],g=f[2],y=n.dataSync(),b=n.strides,C=b[0],S=b[1],E=b[2],_=r.batchSize,T=r.filterHeight,D=r.filterWidth,I=r.inChannels,k=r.inHeight,M=r.inWidth,O=r.outChannels,F=r.outHeight,j=r.outWidth,G=r.strideHeight,W=r.strideWidth,q=T-1-r.padInfo.top,P=D-1-r.padInfo.left,U=O/I,z=0;z<_;++z)for(var H=0;H<I;++H)for(var L=0;L<k;++L)for(var $=L-q,J=Math.max(0,Math.ceil($/G)),ne=Math.min(F,(T+$)/G),ce=0;ce<M;++ce){for(var be=ce-P,se=Math.max(0,Math.ceil(be/W)),oe=Math.min(j,(D+be)/W),fe=0,me=J;me<ne;++me)for(var Oe=me*G-$,Be=se;Be<oe;++Be)for(var Le=p*z+m*me+g*Be,De=C*(T-1-Oe)+S*(D-1-(Be*W-be))+E*H,$e=0;$e<U;++$e)fe+=d[Le+(H*U+$e)]*y[De+$e];a[s*z+u*L+l*ce+H]=fe}return o.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2DDerFilter");for(var o=r.strideHeight,a=r.strideWidth,i=r.filterHeight,s=r.filterWidth,u=Lt(r.filterShape,"float32"),l=r.padInfo.left,d=r.padInfo.top,f=r.outChannels/r.inChannels,p=e.bufferSync(),m=n.bufferSync(),g=0;g<i;++g)for(var y=Math.max(0,Math.ceil((d-g)/o)),b=Math.min(r.outHeight,(r.inHeight+d-g)/o),C=0;C<s;++C)for(var S=Math.max(0,Math.ceil((l-C)/a)),E=Math.min(r.outWidth,(r.inWidth+l-C)/a),_=0;_<r.outChannels;++_){for(var T=Math.trunc(_/f),D=_%f,I=0,k=0;k<r.batchSize;++k)for(var M=y;M<b;++M)for(var O=g+M*o-d,F=S;F<E;++F){var j=C+F*a-l;I+=p.get(k,O,j,T)*m.get(k,M,F,_)}u.set(I,g,C,T,D)}return u.toTensor()},t.prototype.tile=function(e,n){this.assertNotComplex(e,"tile");for(var r=new Array(e.rank),o=0;o<r.length;o++)r[o]=e.shape[o]*n[o];var a=Lt(r,e.dtype),i=e.bufferSync();for(o=0;o<a.values.length;++o){for(var s=a.indexToLoc(o),u=new Array(e.rank),l=0;l<u.length;l++)u[l]=s[l]%e.shape[l];var d=i.locToIndex(u);a.values[o]=i.values[d]}return a.toTensor()},t.prototype.pad=function(e,n,r){this.assertNotComplex(e,"pad");var o=n.map(function(f,p){return f[0]+e.shape[p]+f[1]}),a=n.map(function(f){return f[0]}),i=e.bufferSync(),s=Lt(o,e.dtype);r!==0&&s.values.fill(r);for(var u=0;u<e.size;u++){var l=i.indexToLoc(u),d=l.map(function(f,p){return f+a[p]});s.set.apply(s,[i.get.apply(i,l)].concat(d))}return s.toTensor()},t.prototype.transpose=function(e,n){this.assertNotComplex(e,"transpose");for(var r=new Array(e.rank),o=0;o<r.length;o++)r[o]=e.shape[n[o]];var a=e.dataSync(),i=Lt(r,e.dtype),s=e.bufferSync();for(o=0;o<e.size;++o){for(var u=s.indexToLoc(o),l=new Array(u.length),d=0;d<l.length;d++)l[d]=u[n[d]];var f=i.locToIndex(l);i.values[f]=a[o]}return i.toTensor()},t.prototype.gather=function(e,n,r){this.assertNotComplex([e,n],"gather");var o=e.shape.slice(),a=n.dataSync();o[r]=a.length;for(var i=Lt(o,e.dtype),s=e.bufferSync(),u=0;u<i.size;++u){var l=i.indexToLoc(u),d=l.slice();d[r]=a[l[r]];var f=s.locToIndex(d);i.values[u]=s.values[f]}return i.toTensor()},t.prototype.batchToSpaceND=function(e,n,r){this.assertNotComplex([e],"batchToSpaceND");var o=n.reduce(function(d,f){return d*f}),a=ey(e.shape,n,o),i=ty(a.length,n.length),s=ny(e.shape,n,o),u=gB(r,n.length),l=yB(s,r,n.length);return e.reshape(a).transpose(i).reshape(s).slice(u,l)},t.prototype.spaceToBatchND=function(e,n,r){this.assertNotComplex([e],"spaceToBatchND");var o=n.reduce(function(f,p){return f*p}),a=[[0,0]];a.push.apply(a,r);for(var i=1+n.length;i<e.shape.length;++i)a.push([0,0]);var s=e.pad(a),u=ey(s.shape,n,o,!1),l=ty(u.length,n.length,!1),d=ny(s.shape,n,o,!1);return s.reshape(u).transpose(l).reshape(d)},t.prototype.pool=function(e,n,r){this.assertNotComplex(e,"pool");for(var o=n.strideHeight,a=n.strideWidth,i=n.dilationHeight,s=n.dilationWidth,u=n.effectiveFilterHeight,l=n.effectiveFilterWidth,d=n.padInfo.top,f=n.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=e.dataSync(),g=Lt(n.outShape,e.dtype),y=g.values,b=n.outShape[1]*n.outShape[2]*n.outShape[3],C=n.outShape[2]*n.outShape[3],S=n.outShape[3],E=0;E<n.batchSize;++E)for(var _=E*b,T=E*e.strides[0],D=0;D<n.inChannels;++D)for(var I=0;I<n.outHeight;++I)for(var k=I*o-d,M=Math.max(0,k),O=Math.min(n.inHeight,u+k),F=_+I*C,j=0;j<n.outWidth;++j){for(var G=j*a-f,W=Math.max(0,G),q=Math.min(n.inWidth,l+G),P=p,U=0,z=0,H=M;H<O;H+=i){for(var L=T+H*e.strides[1],$=W;$<q;$+=s){var J=m[L+$*e.strides[2]+D];r==="max"&&J>P?P=J:r==="avg"&&(U+=J,z++)}if(isNaN(P))break}y[F+j*S+D]=r==="avg"?U/z:P}return g.toTensor()},t.prototype.maxPool=function(e,n){return this.pool(e,n,"max")},t.prototype.maxPoolPositions=function(e,n){for(var r=Lt(n.outShape,"int32"),o=n.strideHeight,a=n.strideWidth,i=n.dilationHeight,s=n.dilationWidth,u=n.effectiveFilterHeight,l=n.effectiveFilterWidth,d=n.padInfo.top,f=n.padInfo.left,p=e.bufferSync(),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.outHeight;++y){for(var b=y*o-d,C=b;C<0;)C+=i;for(var S=Math.min(n.inHeight,u+b),E=0;E<n.outWidth;++E){for(var _=E*a-f,T=_;T<0;)T+=s;for(var D=Math.min(n.inWidth,l+_),I=Number.NEGATIVE_INFINITY,k=-1,M=C;M<S;M+=i)for(var O=M-b,F=T;F<D;F+=s){var j=F-_,G=p.get(m,M,F,g);G>I&&(I=G,k=O*l+j)}r.set(k,m,y,E,g)}}return r.toTensor()},t.prototype.maxPoolBackprop=function(e,n,r,o){this.assertNotComplex([n,r],"maxPoolBackprop");for(var a=this.maxPoolPositions(n,o),i=o.strideHeight,s=o.strideWidth,u=o.dilationHeight,l=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,p=f-1-o.padInfo.left,m=d-1-o.padInfo.top,g=Lt(n.shape,"float32"),y=a.bufferSync(),b=e.bufferSync(),C=0;C<o.batchSize;++C)for(var S=0;S<o.inChannels;++S)for(var E=0;E<o.inHeight;++E)for(var _=0;_<o.inWidth;++_){for(var T=E-m,D=_-p,I=0,k=0;k<d;k+=u){var M=(T+k)/i;if(!(M<0||M>=o.outHeight||Math.floor(M)!==M))for(var O=0;O<f;O+=l){var F=(D+O)/s;if(!(F<0||F>=o.outWidth||Math.floor(F)!==F)){var j=d*f-1-y.get(C,M,F,S)===k*f+O?1:0;j!==0&&(I+=b.get(C,M,F,S)*j)}}}g.set(I,C,E,_,S)}return g.toTensor()},t.prototype.avgPoolBackprop=function(e,n,r){this.assertNotComplex([e,n],"avgPoolBackprop");for(var o=r.strideHeight,a=r.strideWidth,i=r.filterHeight,s=r.filterWidth,u=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=f-1-r.padInfo.left,m=d-1-r.padInfo.top,g=Lt(n.shape,"float32"),y=1/(i*s),b=e.bufferSync(),C=0;C<r.batchSize;++C)for(var S=0;S<r.inChannels;++S)for(var E=0;E<r.inHeight;++E)for(var _=0;_<r.inWidth;++_){for(var T=E-m,D=_-p,I=0,k=0;k<d;k+=u){var M=(T+k)/o;if(!(M<0||M>=r.outHeight||Math.floor(M)!==M))for(var O=0;O<f;O+=l){var F=(D+O)/a;F<0||F>=r.outWidth||Math.floor(F)!==F||(I+=b.get(C,M,F,S))}}g.set(I*y,C,E,_,S)}return g.toTensor()},t.prototype.cast=function(e,n){return TB(e,n,this)},t.prototype.reshape=function(e,n){return $2(e,n)},t.prototype.avgPool=function(e,n){return this.assertNotComplex(e,"avgPool"),this.pool(e,n,"avg").toFloat()},t.prototype.resizeBilinear=function(e,n,r,o){this.assertNotComplex(e,"resizeBilinear");for(var a=e.shape,i=a[0],s=a[1],u=a[2],l=a[3],d=e.dataSync(),f=new Float32Array(ft([i,n,r,l])),p=[o&&n>1?s-1:s,o&&r>1?u-1:u],m=[o&&n>1?n-1:n,o&&r>1?r-1:r],g=0,y=p[0]/m[0],b=p[1]/m[1],C=0;C<i;C++)for(var S=0;S<n;S++)for(var E=y*S,_=Math.floor(E),T=E-_,D=Math.min(s-1,Math.ceil(E)),I=C*e.strides[0]+_*e.strides[1],k=C*e.strides[0]+D*e.strides[1],M=0;M<r;M++)for(var O=b*M,F=Math.floor(O),j=O-F,G=Math.min(u-1,Math.ceil(O)),W=I+F*e.strides[2],q=k+F*e.strides[2],P=I+ +G*e.strides[2],U=k+G*e.strides[2],z=0;z<l;z++){var H=d[W+z],L=d[q+z],$=H+(d[P+z]-H)*j,J=$+(L+(d[U+z]-L)*j-$)*T;f[g++]=J}return Jn(f,[i,n,r,l])},t.prototype.resizeBilinearBackprop=function(e,n,r){this.assertNotComplex([e,n],"resizeBilinearBackprop");for(var o=n.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=e.shape,d=l[1],f=l[2],p=new Float32Array(a*i*s*u),m=[r&&d>1?i-1:i,r&&f>1?s-1:s],g=[r&&d>1?d-1:d,r&&f>1?f-1:f],y=m[0]/g[0],b=m[1]/g[1],C=e.dataSync(),S=0,E=0;E<a;E++)for(var _=E*n.strides[0],T=0;T<d;T++)for(var D=T*y,I=Math.floor(D),k=Math.min(Math.ceil(D),i-1),M=_+I*n.strides[1],O=_+k*n.strides[1],F=D-I,j=1-F,G=0;G<f;G++)for(var W=G*b,q=Math.floor(W),P=Math.min(Math.ceil(W),s-1),U=W-q,z=1-U,H=M+q*n.strides[2],L=M+P*n.strides[2],$=O+q*n.strides[2],J=O+P*n.strides[2],ne=j*z,ce=j*U,be=F*z,se=F*U,oe=0;oe<u;oe++){var fe=C[S++];p[H+oe]+=fe*ne,p[L+oe]+=fe*ce,p[$+oe]+=fe*be,p[J+oe]+=fe*se}return Oa(p,[a,s,i,u],n.dtype)},t.prototype.resizeNearestNeighbor=function(e,n,r,o){this.assertNotComplex(e,"resizeNearestNeighbor");for(var a=e.shape,i=a[0],s=a[1],u=a[2],l=a[3],d=e.dataSync(),f=new Float32Array(i*n*r*l),p=[o&&n>1?s-1:s,o&&r>1?u-1:u],m=[o&&n>1?n-1:n,o&&r>1?r-1:r],g=p[0]/m[0],y=p[1]/m[1],b=0,C=0;C<i;C++)for(var S=C*e.strides[0],E=0;E<n;E++)for(var _=g*E,T=S+Math.min(s-1,o?Math.round(_):Math.floor(_))*e.strides[1],D=0;D<r;D++)for(var I=y*D,k=T+Math.min(u-1,o?Math.round(I):Math.floor(I))*e.strides[2],M=0;M<l;M++){var O=d[k+M];f[b++]=O}return Jn(f,[i,n,r,l],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){this.assertNotComplex([e,n],"resizeNearestNeighborBackprop");for(var o=n.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=e.shape,d=l[1],f=l[2],p=new Float32Array(a*i*s*u),m=e.dataSync(),g=[r&&d>1?i-1:i,r&&f>1?s-1:s],y=[r&&d>1?d-1:d,r&&f>1?f-1:f],b=g[0]/y[0],C=g[1]/y[1],S=1/b,E=1/C,_=2*Math.ceil(S)+2,T=2*Math.ceil(E)+2,D=0;D<a;D++)for(var I=D*n.strides[0],k=0;k<i;k++)for(var M=I+k*n.strides[1],O=Math.floor(k*S),F=Math.floor(O-_/2),j=0;j<s;j++)for(var G=M+j*n.strides[2],W=Math.floor(j*E),q=Math.floor(W-T/2),P=0;P<u;P++){for(var U=0,z=0;z<_;z++){var H=z+F;if(!(H<0||H>=d)){var L=I+H*e.strides[1],$=H*b;if(k===Math.min(i-1,r?Math.round($):Math.floor($)))for(var J=0;J<T;J++){var ne=J+q;if(!(ne<0||ne>=f)){var ce=L+ne*e.strides[2],be=ne*C;j===Math.min(s-1,r?Math.round(be):Math.floor(be))&&(U+=m[ce+P])}}}}p[G+P]=U}return Oa(p,n.shape,n.dtype)},t.prototype.batchNormalization=function(e,n,r,o,a,i){this.assertNotComplex([e,n,r,a,i],"batchNorm");for(var s=e.dataSync(),u=n.dataSync(),l=r.dataSync(),d=a?a.dataSync():new Float32Array([1]),f=i?i.dataSync():new Float32Array([0]),p=new Float32Array(s.length),m=f.length,g=d.length,y=l.length,b=u.length,C=0,S=0,E=0,_=0,T=0;T<s.length;++T)p[T]=f[C++]+(s[T]-u[S++])*d[E++]/Math.sqrt(l[_++]+o),C>=m&&(C=0),S>=b&&(S=0),E>=g&&(E=0),_>=y&&(_=0);return Oa(p,e.shape)},t.prototype.localResponseNormalization4D=function(e,n,r,o,a){this.assertNotComplex(e,"localResponseNormalization4D");var i=e.shape[3],s=i-1,u=e.dataSync(),l=e.size,d=new Float32Array(l);function f(y){for(var b=y%i,C=y-b+Math.max(0,b-n),S=y-b+Math.min(b+n,s),E=0;C<=S;C++){var _=u[C];E+=_*_}return E}for(var p=0;p<l;p++){var m=f(p),g=u[p]*Math.pow(r+o*m,-a);d[p]=g}return Oa(d,e.shape)},t.prototype.LRNGrad=function(e,n,r,o,a,i,s){this.assertNotComplex(e,"LRNGrad");for(var u=e.shape[3],l=e.dataSync(),d=n.dataSync(),f=r.dataSync(),p=new Float32Array(e.size),m=e.size,g=0;g<m;g++){for(var y=g%u,b=g-y+Math.max(0,y-o),C=g-y+Math.min(u,y+o+1),S=0,E=b;E<C;E++)S+=Math.pow(d[E],2);for(S=i*S+a,E=b;E<C;E++){var _=-2*i*s*d[E]*f[g]/S;g===E&&(_+=Math.pow(S,-s)),_*=l[g],p[E]+=_}}return Oa(p,e.shape)},t.prototype.multinomial=function(e,n,r,o){this.assertNotComplex(e,"multinomial");for(var a=n?e:Hu(e),i=a.shape[0],s=a.shape[1],u=qn([i,r],"int32"),l=u.dataSync(),d=a.dataSync(),f=0;f<i;++f){var p=f*s,m=new Float32Array(s-1);m[0]=d[p];for(var g=1;g<m.length;++g)m[g]=m[g-1]+d[p+g];for(var y=$B(o.toString()),b=f*r,C=0;C<r;++C){var S=y();l[b+C]=m.length;for(var E=0;E<m.length;E++)if(S<m[E]){l[b+C]=E;break}}}return u},t.prototype.oneHot=function(e,n,r,o){this.assertNotComplex(e,"oneHot");var a=new Float32Array(e.size*n);a.fill(o);for(var i=e.dataSync(),s=0;s<e.size;++s)i[s]>=0&&i[s]<n&&(a[s*n+i[s]]=r);return F0(a,[e.size,n],"int32")},t.prototype.nonMaxSuppression=function(e,n,r,o,a){return this.assertNotComplex(e,"nonMaxSuppression"),ME(e.dataSync(),n.dataSync(),r,o,a)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,n){for(var r=e.shape[0],o=e.shape[1],a=Lt(e.shape,"float32"),i=Lt(e.shape,"float32"),s=bi(e).as2D(r,o),u=bu(e).as2D(r,o),l=0;l<r;l++)for(var d=s.slice([l,0],[1,o]),f=u.slice([l,0],[1,o]),p=Jr(d,f),m=this.fftImpl(p,n).dataSync(),g=0;g<o;g++){var y=EI(m,g);a.values[l*o+g]=y.real,i.values[l*o+g]=y.imag}return Jr(a.toTensor(),i.toTensor()).as2D(r,o)},t.prototype.fftImpl=function(e,n){var r=e.as1D(),o=r.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(r,o,n).as2D(e.shape[0],e.shape[1]);return n&&(a=Jr(bi(a).div(Pe(o)),bu(a).div(Pe(o)))),a}var i=e.dataSync(),s=_ie(this.fourierTransformByMatmul(i,o,n));return Jr(s.real,s.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return(e&e-1)==0},t.prototype.fftRadix2=function(e,n,r){if(n===1)return e;var o=e.dataSync(),a=n/2,i=Tie(o),s=Jr(i.real,i.imag).as1D(),u=Aie(o),l=Jr(u.real,u.imag).as1D();s=this.fftRadix2(s,a,r),l=this.fftRadix2(l,a,r);var d=Die(n,r),f=Jr(d.real,d.imag).mul(l),p=s.add(f),m=s.sub(f),g=bi(p).concat(bi(m)),y=bu(p).concat(bu(m));return Jr(g,y).as1D()},t.prototype.fourierTransformByMatmul=function(e,n,r){for(var o=new Float32Array(2*n),a=0;a<n;a++){for(var i=0,s=0,u=0;u<n;u++){var l=kie(a*u,n,r),d=EI(e,u);i+=d.real*l.real-d.imag*l.imag,s+=d.real*l.imag+d.imag*l.real}r&&(i/=n,s/=n),Nie(o,i,s,a)}return o},t.prototype.depthToSpace=function(e,n,r){ee(r==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+r}),ee(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});for(var o=e.shape[0],a=e.shape[1],i=e.shape[2],s=e.shape[3],u=a*n,l=i*n,d=s/(n*n),f=e.dataSync(),p=new Float32Array(o*u*l*d),m=0,g=0;g<o;++g)for(var y=0;y<u;++y)for(var b=Math.floor(y/n),C=y%n,S=0;S<l;++S)for(var E=Math.floor(S/n),_=(C*n+S%n)*d,T=0;T<d;++T){var D=T+_+s*(E+i*(b+a*g));p[m++]=f[D]}return Oa(p,[o,u,l,d])},t.prototype.broadcastedBinaryOp=function(e,n,r,o){var a=Gt(e.shape,n.shape),i=Lt(a,r),s=e.dataSync(),u=n.dataSync(),l=md(e.shape,a),d=md(n.shape,a),f=i.values;if(l.length+d.length===0)for(var p=0;p<f.length;++p)f[p]=o(s[p%s.length],u[p%u.length]);else{var m=e.bufferSync(),g=n.bufferSync(),y=function(b){var C=i.indexToLoc(b),S=C.slice(-e.rank);l.forEach(function(D){return S[D]=0});var E=m.locToIndex(S),_=C.slice(-n.rank);d.forEach(function(D){return _[D]=0});var T=g.locToIndex(_);f[b]=o(s[E],u[T])};for(p=0;p<f.length;++p)y(p)}return i.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,n,r){var o=Gt(e.shape,n.shape),a=Lt(o,"float32"),i=Lt(o,"float32"),s=e.dataSync(),u=n.dataSync(),l=md(e.shape,o),d=md(n.shape,o),f=a.values,p=i.values;if(l.length+d.length===0)for(var m=0;m<f.length;m++){var g=m%s.length,y=m%u.length,b=r(s[2*g],s[2*g+1],u[2*y],u[2*y+1]);f[m]=b.real,p[m]=b.imag}else{var C=this.data.get(e.dataId).complexTensors.real.bufferSync(),S=this.data.get(n.dataId).complexTensors.real.bufferSync(),E=function(_){var T=a.indexToLoc(_),D=T.slice(-e.rank);l.forEach(function(F){return D[F]=0});var I=C.locToIndex(D),k=T.slice(-n.rank);d.forEach(function(F){return k[F]=0});var M=S.locToIndex(k),O=r(s[2*I],s[2*I+1],u[2*M],u[2*M+1]);f[_]=O.real,p[_]=O.imag};for(m=0;m<f.length;m++)E(m)}return this.complex(a.toTensor(),i.toTensor())},t.prototype.split=function(e,n,r){return NB(e,n,r)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.cropAndResize=function(e,n,r,o,a,i){for(var s=e.shape,u=s[0],l=s[1],d=s[2],f=s[3],p=n.shape[0],m=o[0],g=o[1],y=Lt([p,m,g,f],e.dtype),b=n.dataSync(),C=r.dataSync(),S=e.dataSync(),E=e.strides,_=y.strides,T=0;T<p;T++){var D=4*T,I=b[D],k=b[D+1],M=b[D+2],O=b[D+3],F=C[T];if(!(F>=u))for(var j=m>1?(M-I)*(l-1)/(m-1):0,G=g>1?(O-k)*(d-1)/(g-1):0,W=0;W<m;W++){var q=m>1?I*(l-1)+W*j:.5*(I+M)*(l-1);if(q<0||q>l-1)for(var P=0;P<g;P++)for(var U=0;U<f;U++){var z=U+P*_[2]+W*_[1]+T*_[0];y.values[z]=i}else if(a==="bilinear"){var H=Math.floor(q),L=Math.ceil(q),$=q-H;for(P=0;P<g;P++)if((Oe=g>1?k*(d-1)+P*G:.5*(k+O)*(d-1))<0||Oe>d-1)for(U=0;U<f;U++)z=U+P*_[2]+W*_[1]+T*_[0],y.values[z]=i;else{var J=Math.floor(Oe),ne=Math.ceil(Oe),ce=Oe-J;for(U=0;U<f;U++){var be=S[z=U+J*E[2]+H*E[1]+F*E[0]],se=S[z=U+ne*E[2]+H*E[1]+F*E[0]],oe=S[z=U+J*E[2]+L*E[1]+F*E[0]],fe=be+(se-be)*ce,me=oe+(S[z=U+ne*E[2]+L*E[1]+F*E[0]]-oe)*ce;z=U+P*_[2]+W*_[1]+T*_[0],y.values[z]=fe+(me-fe)*$}}}else for(P=0;P<g;++P){var Oe;if((Oe=g>1?k*(d-1)+P*G:.5*(k+O)*(d-1))<0||Oe>d-1)for(U=0;U<f;U++)z=U+P*_[2]+W*_[1]+T*_[0],y.values[z]=i;else{var Be=Math.round(Oe),Le=Math.round(q);for(U=0;U<f;U++){var De=U+Be*E[2]+Le*E[1]+F*E[0],$e=U+P*_[2]+W*_[1]+T*_[0];y.values[$e]=S[De]}}}}}return y.toTensor()},t.prototype.sparseToDense=function(e,n,r,o){var a=ry(n,e,r),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,d=a.outputSize;return this.scatter(e,n,r,d,u,s,i,l,o,!1)},t.prototype.gatherND=function(e,n){var r=n.shape,o=r[r.length-1],a=xB(e,n),i=a[0],s=a[1],u=a[2],l=a[3];if(s===0)return Jn([],i,e.dtype);for(var d=new xp([s,u],e.dtype),f=n.dataSync(),p=e.dataSync(),m=0;m<s;m++){for(var g=[],y=0,b=0;b<o;b++){var C=f[m*o+b];y+=C*l[b],g.push(C)}if(y<0||y>=e.size/u)throw new Error("Invalid indices: "+g+" does not index into "+e.shape);for(var S=0;S<u;S++)d.values[m*u+S]=p[y*u+S]}return d.toTensor().reshape(i)},t.prototype.scatterND=function(e,n,r){var o=ry(n,e,r),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize,d=Pe(0);return this.scatter(e,n,r,l,s,i,a,u,d,!0)},t.prototype.fill=function(e,n,r){var o=Qg(r=r||$p(n),ft(e));return o.fill(n),We.make(e,{values:o},r)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var n=Qg(e.dtype,ft(e.shape));return We.make(e.shape,{values:n},e.dtype)},t.prototype.scatter=function(e,n,r,o,a,i,s,u,l,d){var f=[o/a,a],p=e.dataSync(),m=n.dataSync();if(o===0)return Jn([],r,n.dtype);var g=new xp(f,n.dtype);g.values.fill(l.dataSync()[0]);for(var y=0;y<i;y++){for(var b=[],C=0,S=0;S<s;S++){var E=p[y*s+S];b.push(E),C+=E*u[S]}if(C<0||C>=o/a)throw new Error("Invalid indices: "+b+" does not index into "+r);for(var _=0;_<a;_++)d?g.values[C*a+_]+=m[y*a+_]:g.values[C*a+_]=n.rank===0?m[0]:m[y*a+_]}return g.toTensor().reshape(r)},t})();Q.registerBackend("cpu",function(){return new vge},1);var qE=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function qI(t){return qE?Buffer.byteLength(t):new Blob([t]).size}function gge(t){return qE?Buffer.from(t).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(t)))}function yge(t){if(qE){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}function bge(t){var e=0;t.forEach(function(o){e+=o.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(o){n.set(new Uint8Array(o),r),r+=o.byteLength}),n.buffer}function j0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:qI(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:qI(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Vl=(function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(a){var i=a(e,r);i!==null&&o.push(i)}),o},t})(),XI="://",TL=(function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){ee(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(XI)&&(e=e.slice(0,e.indexOf(XI))),ee(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();ee(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t})(),Q2="tensorflowjs",J2=1,Al="models_store",xu="model_info_store";function AL(){if(!Q.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Z2(t){var e=t.result;e.createObjectStore(Al,{keyPath:"modelPath"}),e.createObjectStore(xu,{keyPath:"modelPath"})}var qd=(function(){function t(e){if(this.indexedDB=AL(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return pn(this,void 0,void 0,function(){return mn(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return pn(this,void 0,void 0,function(){return mn(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(o,a){var i=r.indexedDB.open(Q2,J2);i.onupgradeneeded=function(){return Z2(i)},i.onsuccess=function(){var s=i.result;if(n==null){var u=s.transaction(Al,"readonly"),l=u.objectStore(Al).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(y){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var d,f=j0(n),p=s.transaction(xu,"readwrite"),m=p.objectStore(xu),g=m.put({modelPath:r.modelPath,modelArtifactsInfo:f});g.onsuccess=function(){var y=(d=s.transaction(Al,"readwrite")).objectStore(Al).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});y.onsuccess=function(){return o({modelArtifactsInfo:f})},y.onerror=function(b){var C=(m=p.objectStore(xu)).delete(r.modelPath);C.onsuccess=function(){return s.close(),a(y.error)},C.onerror=function(S){return s.close(),a(y.error)}}},g.onerror=function(y){return s.close(),a(g.error)},p.oncomplete=function(){d==null?s.close():d.oncomplete=function(){return s.close()}}}},i.onerror=function(s){return a(i.error)}})},t.URL_SCHEME="indexeddb://",t})(),KI=function(t){return Q.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(qd.URL_SCHEME)?xge(t.slice(qd.URL_SCHEME.length)):null};function xge(t){return new qd(t)}function wge(t){return t.startsWith(qd.URL_SCHEME)?t.slice(qd.URL_SCHEME.length):t}Vl.registerSaveRouter(KI),Vl.registerLoadRouter(KI);var Cge=(function(){function t(){this.indexedDB=AL()}return t.prototype.listModels=function(){return pn(this,void 0,void 0,function(){var e=this;return mn(this,function(n){return[2,new Promise(function(r,o){var a=e.indexedDB.open(Q2,J2);a.onupgradeneeded=function(){return Z2(a)},a.onsuccess=function(){var i=a.result,s=i.transaction(xu,"readonly"),u=s.objectStore(xu).getAll();u.onsuccess=function(){for(var l={},d=0,f=u.result;d<f.length;d++){var p=f[d];l[p.modelPath]=p.modelArtifactsInfo}r(l)},u.onerror=function(l){return i.close(),o(u.error)},s.oncomplete=function(){return i.close()}},a.onerror=function(i){return o(a.error)}})]})})},t.prototype.removeModel=function(e){return pn(this,void 0,void 0,function(){var n=this;return mn(this,function(r){return e=wge(e),[2,new Promise(function(o,a){var i=n.indexedDB.open(Q2,J2);i.onupgradeneeded=function(){return Z2(i)},i.onsuccess=function(){var s,u=i.result,l=u.transaction(xu,"readwrite"),d=l.objectStore(xu),f=d.get(e);f.onsuccess=function(){if(f.result==null)return u.close(),a(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var p=d.delete(e),m=function(){var g=(s=u.transaction(Al,"readwrite")).objectStore(Al).delete(e);g.onsuccess=function(){return o(f.result.modelArtifactsInfo)},g.onerror=function(y){return a(f.error)}};p.onsuccess=m,p.onerror=function(g){return m(),u.close(),a(f.error)}},f.onerror=function(p){return u.close(),a(f.error)},l.oncomplete=function(){s==null?u.close():s.oncomplete=function(){return u.close()}}},i.onerror=function(s){return a(i.error)}})]})})},t})();if(Q.get("IS_BROWSER"))try{TL.registerManager(qd.URL_SCHEME,new Cge)}catch{}var cs="/",sd="tensorflowjs_models",NL="info",Sge="model_topology",Ege="weight_specs",Rge="weight_data",_ge="model_metadata";function DL(t){return{info:[sd,t,NL].join(cs),topology:[sd,t,Sge].join(cs),weightSpecs:[sd,t,Ege].join(cs),weightData:[sd,t,Rge].join(cs),modelMetadata:[sd,t,_ge].join(cs)}}function Tge(t){var e=t.split(cs);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(cs)}function Age(t){return t.startsWith(Xd.URL_SCHEME)?t.slice(Xd.URL_SCHEME.length):t}var Xd=(function(){function t(e){if(!Q.get("IS_BROWSER")||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=DL(this.modelPath)}return t.prototype.save=function(e){return pn(this,void 0,void 0,function(){var n,r,o;return mn(this,function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=j0(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,gge(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return pn(this,void 0,void 0,function(){var e,n,r,o,a,i,s;return mn(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(a),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=yge(s),[2,n]})})},t.URL_SCHEME="localstorage://",t})(),YI=function(t){return Q.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Xd.URL_SCHEME)?Nge(t.slice(Xd.URL_SCHEME.length)):null};function Nge(t){return new Xd(t)}Vl.registerSaveRouter(YI),Vl.registerLoadRouter(YI);var Dge=(function(){function t(){ee(Q.get("IS_BROWSER"),function(){return"Current environment is not a web browser"}),ee(window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return pn(this,void 0,void 0,function(){var e,n,r,o,a,i;return mn(this,function(s){for(e={},n=sd+cs,r=cs+NL,o=0;o<this.LS.length;++o)(a=this.LS.key(o)).startsWith(n)&&a.endsWith(r)&&(i=Tge(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]})})},t.prototype.removeModel=function(e){return pn(this,void 0,void 0,function(){var n,r;return mn(this,function(o){if(e=Age(e),n=DL(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t})();if(Q.get("IS_BROWSER"))try{TL.registerManager(Xd.URL_SCHEME,new Dge)}catch{}var kge="model",Ige=".json",Mge=".weights.bin",eC=(function(){function t(e){if(!Q.get("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=kge),this.modelTopologyFileName=e+Ige,this.weightDataFileName=e+Mge}return t.prototype.save=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s;return mn(this,function(u){if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,i.click(),e.weightData!=null&&((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,s.click()),[2,{modelArtifactsInfo:j0(e)}]})})},t.URL_SCHEME="downloads://",t})(),Oge=function(t){return Q.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(eC.URL_SCHEME)?Pge(t.slice(eC.URL_SCHEME.length)):null};function Pge(t){return t===void 0&&(t="model"),new eC(t)}function QI(t,e,n,r){(function(a){ee(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(t),(function(a,i){ee(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),ee(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i}),ee(i>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+i})})(n=n??0,r=r??1);var o=0;return Promise.all(t.map(function(a){return a.then(function(i){var s=n+ ++o/t.length*(r-n);return e(s),i}),a}))}function Fge(t,e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d;return mn(this,function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?fetch:e.fetchFunc,r=t.map(function(p){return n(p,e.requestInit)}),o=0,a=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=f.sent(),[3,4];case 2:return[4,QI(r,e.onProgress,o,a)];case 3:i=f.sent(),f.label=4;case 4:return s=i.map(function(p){return p.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return d=f.sent(),[3,8];case 6:return[4,QI(s,e.onProgress,u,l)];case 7:d=f.sent(),f.label=8;case 8:return[2,d]}})})}Vl.registerSaveRouter(Oge);var Bge="application/octet-stream",Lge="application/json",kL=(function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc==null){var r=Q.global.fetch;if(r===void 0)throw new Error("browserHTTPRequest is not supported outside the web browser without a fetch polyfill.");n.fetchFunc=r.bind(Q.global)}else ee(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"});if(this.fetchFunc=function(o,a){return n.fetchFunc(o,a).catch(function(i){throw new Error("Request for "+o+" failed due to error: "+i)})},ee(e!=null&&e.length>0,function(){return"URL path for browserHTTPRequest must not be null, undefined or empty."}),Array.isArray(e)&&ee(e.length===2,function(){return"URL paths for browserHTTPRequest must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a;return mn(this,function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:Lge}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:Bge}),"model.weights.bin"),[4,this.getFetchFunc()(this.path,n)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:j0(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},t.prototype.load=function(){return pn(this,void 0,void 0,function(){var e,n,r,o,a,i,s,u;return mn(this,function(l){switch(l.label){case 0:return[4,this.getFetchFunc()(this.path,this.requestInit)];case 1:if(!(e=l.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");l.label=2;case 2:return l.trys.push([2,4,,5]),[4,e.json()];case 3:return n=l.sent(),[3,5];case 4:throw l.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,a=n.weightsManifest,o==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:u=l.sent(),i=u[0],s=u[1],l.label=7;case 7:return[2,{modelTopology:o,weightSpecs:i,weightData:s}]}})})},t.prototype.loadWeights=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f,p;return mn(this,function(m){switch(m.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=jge(n),o=r[0],a=r[1],i=this.weightPathPrefix||o,s=[],u=0,l=e;u<l.length;u++)d=l[u],s.push.apply(s,d.weights);return f=[],e.forEach(function(g){g.paths.forEach(function(y){f.push(i+y+a)})}),[4,Fge(f,{requestInit:this.requestInit,fetchFunc:this.getFetchFunc(),onProgress:this.onProgress})];case 1:return p=m.sent(),[2,[s,bge(p)]]}})})},t.prototype.getFetchFunc=function(){return this.fetchFunc},t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function jge(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}function JI(t){return t.match(kL.URL_SCHEME_REGEX)!=null}var ZI=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return JI(n)}):JI(t))?zge(t,{onProgress:e}):null};function zge(t,e){return new kL(t,e)}Vl.registerSaveRouter(ZI),Vl.registerLoadRouter(ZI);function Uge(t,e,n){var r=Y(t,"labels","confusionMatrix"),o=Y(e,"predictions","confusionMatrix");ee(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),ee(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),ee(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),ee(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),ee(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=X2(r.asType("int32"),n),i=X2(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}ie({confusionMatrix_:Uge});function Wge(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return Q.engine.fromPixels(t,e)}function Vge(t,e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f,p,m,g,y,b,C,S,E,_,T;return mn(this,function(D){switch(D.label){case 0:if(n=Y(t,"img","toPixels"),t instanceof We||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(i=n.rank===2?1:n.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return s=n.min(),u=n.max(),[4,s.data()];case 1:return l=D.sent()[0],[4,u.data()];case 2:if(d=D.sent()[0],s.dispose(),u.dispose(),n.dtype==="float32"){if(l<0||d>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+l+" - "+d+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(l<0||d>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+l+" - "+d+"].")}return[4,n.data()];case 3:for(f=D.sent(),p=n.dtype==="float32"?255:1,m=new Uint8ClampedArray(a*o*4),g=0;g<o*a;++g)y=void 0,b=void 0,C=void 0,S=void 0,i===1?(y=f[g]*p,b=f[g]*p,C=f[g]*p,S=255):i===3?(y=f[3*g]*p,b=f[3*g+1]*p,C=f[3*g+2]*p,S=255):i===4&&(y=f[4*g]*p,b=f[4*g+1]*p,C=f[4*g+2]*p,S=f[4*g+3]*p),m[(E=4*g)+0]=Math.round(y),m[E+1]=Math.round(b),m[E+2]=Math.round(C),m[E+3]=Math.round(S);return e!=null&&(e.width=a,e.height=o,_=e.getContext("2d"),T=new ImageData(m,a,o),_.putImageData(T,0,0)),n!==t&&n.dispose(),[2,m]}})})}var Hge=ie({fromPixels_:Wge}),Gge=Object.freeze({toPixels:Vge,fromPixels:Hge}),$ge=(function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t})(),qge=(function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t})();function rc(t){ee(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),ee(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),ee(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),qge.register(t)}var oc=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return As(e,t),e.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var a=this.computeGradients(n,o),i=a.value,s=a.grads;return this.applyGradients(s),Object.keys(s).forEach(function(u){return s[u].dispose()}),r?i:(i.dispose(),null)},e.prototype.computeGradients=function(n,r){return rie(n,r)},e.prototype.dispose=function(){},e})($ge);Object.defineProperty(oc,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var Xge=(function(t){function e(n,r,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=n,a.rho=r,a.epsilon=o,a.accumulatedGrads={},a.accumulatedUpdates={},a.c=Cn(Pe(-n)),a.rhoScalar=Cn(Pe(r)),a.oneMinusRho=Cn(Pe(1-r)),o===null&&(o=Q.get("EPSILON")),a.epsilonScalar=Cn(Pe(o)),a}return As(e,t),e.prototype.applyGradients=function(n){var r=this,o=function(s){var u=Q.engine.registeredVariables[s];a.accumulatedGrads[s]==null&&dt(function(){r.accumulatedGrads[s]=nn(u).variable(!1)}),a.accumulatedUpdates[s]==null&&dt(function(){r.accumulatedUpdates[s]=nn(u).variable(!1)});var l=n[s],d=a.accumulatedGrads[s],f=a.accumulatedUpdates[s];dt(function(){var p=r.rhoScalar.mul(d).add(r.oneMinusRho.mul(l.square())),m=f.add(r.epsilonScalar).sqrt().div(d.add(r.epsilonScalar).sqrt()).mul(l),g=r.rhoScalar.mul(f).add(r.oneMinusRho.mul(m.square()));r.accumulatedGrads[s].assign(p),r.accumulatedUpdates[s].assign(g);var y=r.c.mul(m).add(u);u.assign(y)})},a=this;for(var i in n)o(i)},e.prototype.dispose=function(){var n=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),this.accumulatedUpdates!=null&&(Object.keys(this.accumulatedUpdates).forEach(function(r){return n.accumulatedUpdates[r].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(r){return n.accumulatedGrads[r].dispose()}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="AdadeltaOptimizer",e})(oc);rc(Xge);var Kge=(function(t){function e(n,r){r===void 0&&(r=.1);var o=t.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads={},o.c=Cn(Pe(-n)),o.epsilon=Cn(Pe(Q.get("EPSILON"))),o}return As(e,t),e.prototype.applyGradients=function(n){var r=this,o=function(s){var u=Q.engine.registeredVariables[s];a.accumulatedGrads[s]==null&&dt(function(){r.accumulatedGrads[s]=Qh(u.shape,r.initialAccumulatorValue).variable(!1)});var l=n[s],d=a.accumulatedGrads[s];dt(function(){var f=d.add(l.square());r.accumulatedGrads[s].assign(f);var p=r.c.mul(l.div(f.add(r.epsilon).sqrt())).add(u);u.assign(p)})},a=this;for(var i in n)o(i)},e.prototype.dispose=function(){var n=this;this.epsilon.dispose(),this.c.dispose(),this.accumulatedGrads!=null&&Object.keys(this.accumulatedGrads).forEach(function(r){return n.accumulatedGrads[r].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="AdagradOptimizer",e})(oc);rc(Kge);var Yge=(function(t){function e(n,r,o,a){a===void 0&&(a=null);var i=t.call(this)||this;return i.learningRate=n,i.beta1=r,i.beta2=o,i.epsilon=a,i.accumulatedFirstMoment={},i.accumulatedSecondMoment={},i.c=Cn(Pe(-n)),i.beta1Scalar=Cn(Pe(r)),i.beta2Scalar=Cn(Pe(o)),dt(function(){i.accBeta1=Pe(r).variable(),i.accBeta2=Pe(o).variable()}),i.oneMinusBeta1=Cn(Pe(1-r)),i.oneMinusBeta2=Cn(Pe(1-o)),i.one=Cn(Pe(1)),a===null&&(a=Q.get("EPSILON")),i.epsScalar=Cn(Pe(a)),i}return As(e,t),e.prototype.applyGradients=function(n){var r=this;dt(function(){var o=r.one.sub(r.accBeta1),a=r.one.sub(r.accBeta2);for(var i in n){var s=Q.engine.registeredVariables[i];if(r.accumulatedFirstMoment[i]==null){var u=!1;r.accumulatedFirstMoment[i]=nn(s).variable(u)}r.accumulatedSecondMoment[i]==null&&(u=!1,r.accumulatedSecondMoment[i]=nn(s).variable(u));var l=n[i],d=r.accumulatedFirstMoment[i],f=r.accumulatedSecondMoment[i],p=r.beta1Scalar.mul(d).add(r.oneMinusBeta1.mul(l)),m=r.beta2Scalar.mul(f).add(r.oneMinusBeta2.mul(l.square())),g=p.div(o),y=m.div(a);r.accumulatedFirstMoment[i].assign(p),r.accumulatedSecondMoment[i].assign(m);var b=r.c.mul(g.div(r.epsScalar.add(y.sqrt()))).add(s);s.assign(b)}r.accBeta1.assign(r.accBeta1.mul(r.beta1Scalar)),r.accBeta2.assign(r.accBeta2.mul(r.beta2Scalar))})},e.prototype.dispose=function(){var n=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),this.accumulatedFirstMoment!=null&&Object.keys(this.accumulatedFirstMoment).forEach(function(r){return n.accumulatedFirstMoment[r].dispose()}),this.accumulatedSecondMoment!=null&&Object.keys(this.accumulatedSecondMoment).forEach(function(r){return n.accumulatedSecondMoment[r].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="AdamOptimizer",e})(oc);rc(Yge);var Qge=(function(t){function e(n,r,o,a,i){a===void 0&&(a=null),i===void 0&&(i=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=a,s.decay=i,s.accumulatedFirstMoment={},s.accumulatedWeightedInfNorm={},s.c=Cn(Pe(-n)),s.beta1Scalar=Cn(Pe(r)),s.beta2Scalar=Cn(Pe(o)),s.decayScalar=Cn(Pe(i)),dt(function(){s.iteration=Pe(0).variable(),s.accBeta1=Pe(r).variable()}),s.oneMinusBeta1=Cn(Pe(1-r)),s.one=Cn(Pe(1)),a===null&&(a=Q.get("EPSILON")),s.epsScalar=Cn(Pe(a)),s}return As(e,t),e.prototype.applyGradients=function(n){var r=this;dt(function(){var o=r.one.sub(r.accBeta1),a=r.c.div(r.one.add(r.decayScalar.mul(r.iteration)));for(var i in n){var s=Q.engine.registeredVariables[i];if(r.accumulatedFirstMoment[i]==null){var u=!1;r.accumulatedFirstMoment[i]=nn(s).variable(u)}r.accumulatedWeightedInfNorm[i]==null&&(u=!1,r.accumulatedWeightedInfNorm[i]=nn(s).variable(u));var l=n[i],d=r.accumulatedFirstMoment[i],f=r.accumulatedWeightedInfNorm[i],p=r.beta1Scalar.mul(d).add(r.oneMinusBeta1.mul(l)),m=r.beta2Scalar.mul(f),g=l.abs(),y=m.maximum(g);r.accumulatedFirstMoment[i].assign(p),r.accumulatedWeightedInfNorm[i].assign(y);var b=a.div(o).mul(p.div(r.epsScalar.add(y))).add(s);s.assign(b)}r.iteration.assign(r.iteration.add(r.one)),r.accBeta1.assign(r.accBeta1.mul(r.beta1Scalar))})},e.prototype.dispose=function(){var n=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),this.accumulatedFirstMoment!=null&&Object.keys(this.accumulatedFirstMoment).forEach(function(r){return n.accumulatedFirstMoment[r].dispose()}),this.accumulatedWeightedInfNorm!=null&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(r){return n.accumulatedWeightedInfNorm[r].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="AdamaxOptimizer",e})(oc);rc(Qge);var IL=(function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return As(e,t),e.prototype.applyGradients=function(n){var r=this;Object.keys(n).forEach(function(o){var a=n[o],i=Q.engine.registeredVariables[o];dt(function(){var s=r.c.mul(a).add(i);i.assign(s)})})},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=Cn(Pe(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGDOptimizer",e})(oc);rc(IL);var Jge=(function(t){function e(n,r,o){o===void 0&&(o=!1);var a=t.call(this,n)||this;return a.learningRate=n,a.momentum=r,a.useNesterov=o,a.m=Pe(a.momentum),a.accumulations={},a}return As(e,t),e.prototype.applyGradients=function(n){var r=this,o=function(s){var u=Q.engine.registeredVariables[s];a.accumulations[s]==null&&dt(function(){r.accumulations[s]=nn(u).variable(!1)});var l=a.accumulations[s],d=n[s];dt(function(){var f,p=r.m.mul(l).add(d);f=r.useNesterov?r.c.mul(d.add(p.mul(r.m))).add(u):r.c.mul(p).add(u),r.accumulations[s].assign(p),u.assign(f)})},a=this;for(var i in n)o(i)},e.prototype.dispose=function(){if(t.prototype.dispose.call(this),this.m.dispose(),this.accumulations!=null)for(var n in this.accumulations)this.accumulations[n].dispose()},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="MomentumOptimizer",e})(IL);rc(Jge);var Zge=(function(t){function e(n,r,o,a,i){r===void 0&&(r=.9),o===void 0&&(o=0),a===void 0&&(a=null),i===void 0&&(i=!1);var s=t.call(this)||this;return s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=a,s.accumulatedMeanSquares={},s.accumulatedMeanGrads={},s.accumulatedMoments={},s.c=Cn(Pe(n)),s.decayScalar=Cn(Pe(r)),s.momentumScalar=Cn(Pe(o)),s.oneMinusDecay=Cn(Pe(1-r)),s.centered=i,a===null&&(a=Q.get("EPSILON")),s.epsilonScalar=Cn(Pe(a)),s}return As(e,t),e.prototype.applyGradients=function(n){var r=this,o=function(s){var u=Q.engine.registeredVariables[s];a.accumulatedMeanSquares[s]==null&&dt(function(){r.accumulatedMeanSquares[s]=nn(u).variable(!1)}),a.accumulatedMeanGrads[s]==null&&a.centered&&dt(function(){r.accumulatedMeanGrads[s]=nn(u).variable(!1)}),a.accumulatedMoments[s]==null&&dt(function(){r.accumulatedMoments[s]=nn(u).variable(!1)});var l=a.accumulatedMeanSquares[s],d=a.accumulatedMeanGrads[s],f=a.accumulatedMoments[s],p=n[s];dt(function(){var m=r.decayScalar.mul(l).add(r.oneMinusDecay.mul(p.square()));if(r.centered){var g=r.decayScalar.mul(d).add(r.oneMinusDecay.mul(p)),y=r.momentumScalar.mul(f).add(r.c.mul(p).div(m.sub(g.square().add(r.epsilonScalar)).sqrt()));r.accumulatedMeanSquares[s].assign(m),r.accumulatedMeanGrads[s].assign(g),r.accumulatedMoments[s].assign(y);var b=u.sub(y);u.assign(b)}else{var C=r.decayScalar.mul(l).add(r.oneMinusDecay.mul(p.square()));y=r.momentumScalar.mul(f).add(r.c.mul(p).div(C.add(r.epsilonScalar).sqrt())),r.accumulatedMeanSquares[s].assign(C),r.accumulatedMoments[s].assign(y),b=u.sub(y),u.assign(b)}})},a=this;for(var i in n)o(i)},e.prototype.dispose=function(){var n=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),this.accumulatedMeanSquares!=null&&Object.keys(this.accumulatedMeanSquares).forEach(function(r){return n.accumulatedMeanSquares[r].dispose()}),this.accumulatedMeanGrads!=null&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(r){return n.accumulatedMeanGrads[r].dispose()}),this.accumulatedMoments!=null&&Object.keys(this.accumulatedMoments).forEach(function(r){return n.accumulatedMoments[r].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSPropOptimizer",e})(oc);rc(Zge);Oi.setBackend;Oi.getBackend;Oi.disposeVariables;Oi.memory;kae(pge);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tC=function(t,e){return tC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},tC(t,e)};function im(t,e){tC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var uy=function(){return uy=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},uy.apply(this,arguments)};function va(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function s(d){try{l(r.next(d))}catch(f){i(f)}}function u(d){try{l(r.throw(d))}catch(f){i(f)}}function l(d){d.done?a(d.value):o(d.value).then(s,u)}l((r=r.apply(t,[])).next())})}function ga(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(d){return u([l,d])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=l[0]&2?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(d){l=[6,d],o=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function gw(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var a=arguments[e],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ML=function(t,e){return(ML=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(t,e)};function Qa(t,e){function n(){this.constructor=t}ML(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Je(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(l){try{u(r.next(l))}catch(d){a(d)}}function s(l){try{u(r.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):new n((function(d){d(l.value)})).then(i,s)}u((r=r.apply(t,[])).next())}))}function Ze(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return(function(d){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&d[0]?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(f){d=[6,f],r=0}finally{n=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([u,l])}}}var eye=(function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var o=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+o+"."),this.set(e,o)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,o=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return tye(r,i[0],i[1]),i.join("=")})),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach((function(a){var i=a.split(":"),s=i[0],u=i[1];e.urlFlags[s]=(function(l,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+l+".")})(s,u)}))}},t})();function tye(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Se(){return OL}var OL=null,ly=new Map,nC=new Map;function PL(t,e){var n=BL(t,e);return ly.get(n)}function eM(t){return nC.get(t)}function tM(t){for(var e=ly.entries(),n=[];;){var r=e.next(),o=r.done,a=r.value;if(o)break;var i=a[0],s=a[1];i.split("_")[0]===t&&n.push(s)}return n}function FL(t){var e=t.kernelName,n=t.backendName,r=BL(e,n);if(ly.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");ly.set(r,t)}function nye(t){var e=t.kernelName;nC.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),nC.set(e,t)}function BL(t,e){return e+"_"+t}function rC(t,e,n){return Math.max(t,Math.min(e,n))}function LL(t){return t%2==0?t:t+1}function rye(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function K(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function an(t,e,n){n===void 0&&(n=""),K(br(t,e),(function(){return n+" Shapes "+t+" and "+e+" must match"}))}function Nf(t){K(t!=null,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Kd(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||Ri(t)&&!n)for(var r=0;r<t.length;++r)Kd(t[r],e,n);else e.push(t);return e}function Qe(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function br(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Xn(t){return t%1==0}function oye(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function oC(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function _d(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function nM(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise((function(r,o){var a=0,i=function(){if(t())r();else{a++;var s=e(a);n!=null&&a>=n?o():setTimeout(i,s)}};i()}))}function aye(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function fr(t,e){var n=e.length;return K((t=t==null?e.map((function(r,o){return o})):[].concat(t)).every((function(r){return r>=-n&&r<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t})),K(t.every((function(r){return Xn(r)})),(function(){return"All values in axis param must be integers but got axis "+t})),t.map((function(r){return r<0?n+r:r}))}function El(t,e){for(var n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||o?null:fr(e,t).sort(),i=0,s=0;s<t.length;++s){if(a!=null){if(a[i]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(a[i]==null||a[i]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[i]<=s&&i++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Yd(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function cy(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function iye(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function sye(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function uye(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function Ri(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function jL(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function lye(t){if(t==null)return 0;var e=0;return t.forEach((function(n){return e+=n.length})),e}function XE(t){return typeof t=="string"||t instanceof String}function cye(t){return typeof t=="boolean"}function dye(t){return typeof t=="number"}function sm(t){return Array.isArray(t)?sm(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":dye(t)?"float32":XE(t)?"string":cye(t)?"bool":"float32"}function aC(t){return!!(t&&t.constructor&&t.call&&t.apply)}function iC(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Ho(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function zL(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Kd(t)),n&&iye(t,e),(function(a,i){return a instanceof Float32Array&&i==="float32"||a instanceof Int32Array&&i==="int32"||a instanceof Uint8Array&&i==="bool"})(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)Math.round(t[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function rM(t,e){if(t.length===0)return e[0];var n=t.reduce((function(r,o){return r*o}));if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return(function r(o,a,i){var s=new Array;if(a.length===1)for(var u=a[0],l=0;l<u;l++)s[l]=i[o+l];else{u=a[0];var d=a.slice(1),f=d.reduce((function(p,m){return p*m}));for(l=0;l<u;l++)s[l]=r(o+l*f,d,i)}return s})(0,t,e)}function UL(t,e){for(var n=um(t,e),r=0;r<n.length;r++)n[r]=1;return n}function um(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function hi(){return Se().platform.now()}function WL(t){t.forEach((function(e){K(Number.isInteger(e)&&e>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."}))}))}function fye(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",Se().platform.encode(t,e)}function dy(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",Se().platform.decode(t,e)}function sC(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function VL(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}var hye=(function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new pye)}return t.prototype.profileKernel=function(e,n,r){var o,a=this,i=this.backendTimer.time((function(){o=r()}));return o.forEach((function(s){s.data().then((function(u){(function(l,d,f){if(d!=="float32")return!1;for(var p=0;p<l.length;p++){var m=l[p];if(isNaN(m)||!isFinite(m))return console.warn("Found "+m+" in the result of '"+f+"'"),!0}})(u,s.dtype,e),i.then((function(l){var d="";l.getExtraProfileInfo!=null&&(d=l.getExtraProfileInfo()),a.logger.logKernelProfile(e,s,u,l.kernelMs,n,d)}))}))})),o},t})(),pye=(function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,o,a,i){var s=typeof o=="number"?_d(o+"ms",9):o.error,u=_d(e,25),l=n.rank,d=n.size,f=_d(n.shape.toString(),14),p="";for(var m in a){var g=a[m].shape||n.shape,y=g.length;p+=m+": "+y+"D "+(y>0?g:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+d+"	%c"+p+"	%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t})(),oM=20,zh=3,yw=7;function mye(t,e,n,r){var o=Ho(e),a=(function(l,d,f,p){var m=Qe(d),g=p[p.length-1],y=new Array(g).fill(0),b=d.length,C=f==="complex64"?Wh(l):l;if(b>1)for(var S=0;S<m/g;S++)for(var E=S*g,_=0;_<g;_++)y[_]=Math.max(y[_],Uh(C[E+_],0,f).length);return y})(t,e,n,o),i=e.length,s=(function l(d,f,p,m,g,y){y===void 0&&(y=!0);var b=p==="complex64"?2:1,C=f[0],S=f.length;if(S===0)return p==="complex64"?[Uh(Wh(d)[0],0,p)]:p==="bool"?[HL(d[0])]:[d[0].toString()];if(S===1){if(C>oM){var E=zh*b,_=Array.from(d.slice(0,E)),T=Array.from(d.slice((C-zh)*b,C*b));return p==="complex64"&&(_=Wh(_),T=Wh(T)),["["+_.map((function(q,P){return Uh(q,g[P],p)})).join(", ")+", ..., "+T.map((function(q,P){return Uh(q,g[C-zh+P],p)})).join(", ")+"]"]}return["["+(p==="complex64"?Wh(d):Array.from(d)).map((function(q,P){return Uh(q,g[P],p)})).join(", ")+"]"]}var D=f.slice(1),I=m.slice(1),k=m[0]*b,M=[];if(C>oM){for(var O=0;O<zh;O++){var F=(j=O*k)+k;M.push.apply(M,l(d.slice(j,F),D,p,I,g,!1))}for(M.push("..."),O=C-zh;O<C;O++)F=(j=O*k)+k,M.push.apply(M,l(d.slice(j,F),D,p,I,g,O===C-1))}else for(O=0;O<C;O++){var j;F=(j=O*k)+k,M.push.apply(M,l(d.slice(j,F),D,p,I,g,O===C-1))}var G=S===2?",":"";for(M[0]="["+M[0]+G,O=1;O<M.length-1;O++)M[O]=" "+M[O]+G;var W=`,
`;for(O=2;O<S;O++)W+=`
`;return M[M.length-1]=" "+M[M.length-1]+"]"+(y?"":W),M})(t,e,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map((function(l){return"    "+l})).join(`
`)),u.join(`
`)}function Uh(t,e,n){return _d(Array.isArray(t)?parseFloat(t[0].toFixed(yw))+" + "+parseFloat(t[1].toFixed(yw))+"j":XE(t)?"'"+t+"'":n==="bool"?HL(t):parseFloat(t.toFixed(yw)).toString(),e)}function HL(t){return t===0?"false":"true"}function Wh(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Cp=(function(){function t(e,n,r){var o=this;if(this.dtype=n,this.shape=e.slice(),this.size=Qe(e),r!=null){var a=r.length;K(a===this.size,(function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+o.size+"'."}))}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||cy(n,this.size),this.strides=Ho(e)}return t.prototype.set=function(e){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),K(r.length===this.rank,(function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"}));var a=this.locToIndex(r);this.values[a]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,o=0,a=e;o<a.length;o++){var i=a[o];if(i<0||i>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return gi().makeTensor(this.values,this.shape,this.dtype)},t})(),gi=null,Ce=null,GL=null,wn=(function(){function t(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Qe(e),this.strides=Ho(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),K(this.size===1,(function(){return"The array must have only 1 element."})),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,o){return this.throwIfDisposed(),this.reshape([e,n,r,o])},t.prototype.as5D=function(e,n,r,o,a){return this.throwIfDisposed(),this.reshape([e,n,r,o,a])},t.prototype.asType=function(e){return this.throwIfDisposed(),Ce.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Je(this,void 0,void 0,(function(){var e;return Ze(this,(function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,Ce.buffer(this.shape,this.dtype,e)]}}))}))},t.prototype.bufferSync=function(){return Ce.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Je(this,void 0,void 0,(function(){var e;return Ze(this,(function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,rM(this.shape,e)]}}))}))},t.prototype.arraySync=function(){return rM(this.shape,this.dataSync())},t.prototype.data=function(){return Je(this,void 0,void 0,(function(){var e,n;return Ze(this,(function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=gi().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map((function(o){return dy(o)}))]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}}))}))},t.prototype.dataSync=function(){this.throwIfDisposed();var e=gi().readSync(this.dataId);if(this.dtype==="string")try{return e.map((function(n){return dy(n)}))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return Je(this,void 0,void 0,(function(){var e;return Ze(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,gi().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},t.prototype.dispose=function(){this.isDisposed||(gi().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),Ce.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),Ce.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),Ce.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),Ce.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),Ce.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),Ce.clone(this)},t.prototype.toString=function(e){return e===void 0&&(e=!1),mye(this.dataSync(),this.shape,this.dtype,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),Ce.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),Ce.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),Ce.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),Ce.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),Ce.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),Ce.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),Ce.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),Ce.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),Ce.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),Ce.unstack(this,e)},t.prototype.batchNormalization=function(e,n,r,o,a){return r===void 0&&(r=.001),GL("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,a,o,r)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ce.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ce.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ce.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ce.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ce.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ce.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ce.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Ce.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),Ce.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),Ce.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),Ce.cast(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),Ce.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),Ce.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),Ce.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),Ce.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),Ce.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),Ce.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),Ce.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),Ce.mulStrict(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),Ce.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),Ce.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),Ce.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Ce.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),Ce.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Ce.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),Ce.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),Ce.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Ce.squaredDifferenceStrict(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),Ce.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Ce.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),Ce.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),Ce.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),Ce.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),Ce.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),Ce.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Ce.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),Ce.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Ce.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ce.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Ce.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Ce.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),Ce.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),Ce.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),Ce.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),Ce.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),Ce.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),Ce.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),Ce.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),Ce.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),Ce.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),Ce.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),Ce.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),Ce.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),Ce.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),Ce.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),Ce.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),Ce.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),Ce.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),Ce.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),Ce.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),Ce.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),Ce.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),Ce.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),Ce.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),Ce.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),Ce.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),Ce.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),Ce.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),Ce.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ce.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),Ce.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),Ce.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),Ce.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),Ce.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),Ce.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),Ce.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),Ce.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),Ce.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),Ce.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),Ce.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),Ce.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),Ce.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),Ce.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),Ce.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),Ce.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),Ce.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),Ce.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),Ce.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),Ce.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),Ce.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),Ce.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),Ce.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,o,a,i){return o===void 0&&(o="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),Ce.conv1d(this,e,n,r,o,a,i)},t.prototype.conv2d=function(e,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),Ce.conv2d(this,e,n,r,o,a,i)},t.prototype.conv2dTranspose=function(e,n,r,o,a){return this.throwIfDisposed(),Ce.conv2dTranspose(this,e,n,r,o,a)},t.prototype.depthwiseConv2D=function(e,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),Ce.depthwiseConv2d(this,e,n,r,o,a,i)},t.prototype.separableConv2d=function(e,n,r,o,a,i){return a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),Ce.separableConv2d(this,e,n,r,o,a,i)},t.prototype.avgPool=function(e,n,r,o){return this.throwIfDisposed(),Ce.avgPool(this,e,n,r,o)},t.prototype.maxPool=function(e,n,r,o){return this.throwIfDisposed(),Ce.maxPool(this,e,n,r,o)},t.prototype.localResponseNormalization=function(e,n,r,o){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),Ce.localResponseNormalization(this,e,n,r,o)},t.prototype.pool=function(e,n,r,o,a){return this.throwIfDisposed(),Ce.pool(this,e,n,r,o,a)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),gi().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),Ce.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),Ce.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),Ce.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),Ce.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,o,a,i,s,u){return o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),Ce.stridedSlice(this,e,n,r,o,a,i,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),Ce.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),Ce.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),Ce.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),Ce.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),Ce.spectral.irfft(this)},t})();Object.defineProperty(wn,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var aM,uC,lC,cC,dC,Qd=(function(t){function e(n,r,o,a){var i=t.call(this,n.shape,n.dtype,n.dataId,a)||this;return i.trainable=r,i.name=o,i}return Qa(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!br(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");gi().disposeTensor(this),this.dataId=n.dataId,gi().incRef(this,null)},e.prototype.dispose=function(){gi().disposeVariable(this),this.isDisposedInternal=!0},e})(wn);Object.defineProperty(Qd,Symbol.hasInstance,{value:function(t){return t instanceof wn&&t.assign!=null&&t.assign instanceof Function}}),(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(aM||(aM={})),(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(uC||(uC={})),(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(lC||(lC={})),(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(cC||(cC={})),(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(dC||(dC={}));var vye={float32:cC,int32:uC,bool:lC,complex64:dC};function Tr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return vye[t][e]}function bw(t){return Tr(t,"int32")}function Mn(t,e){if(t.dtype===e.dtype)return[t,e];var n=Tr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function gye(t,e){K(t.dtype===e.dtype,(function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"}))}function $L(t){var e=[];return(function n(r,o,a){if(r!=null){if(r instanceof wn)return void o.push(r);if(i=r,!(!Array.isArray(i)&&typeof i!="object")){var i,s=r;for(var u in s){var l=s[u];a.has(l)||(a.add(l),n(l,o,a))}}}})(t,e,new Set),e}var xw,iM=(function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t})(),yye=(function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new iM}return t.prototype.ready=function(){return Je(this,void 0,void 0,(function(){var e,n,r;return Ze(this,(function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then((function(){}))];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,o.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return Je(this,void 0,void 0,(function(){var n,r,o;return Ze(this,(function(a){switch(a.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return o=a.sent(),[3,3];case 2:o=r,a.label=3;case 3:if(!o)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new hye(this.backendInstance),[2,!0]}}))}))},t.prototype.setupRegisteredKernels=function(){var e=this;tM(this.backendName).forEach((function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)}))},t.prototype.disposeRegisteredKernels=function(e){var n=this;tM(e).forEach((function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])}))},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var a=++this.pendingBackendInitId,i=o.then((function(s){return!(a<n.pendingBackendInitId)&&(n.registry[e]=s,n.pendingBackendInit=null,!0)})).catch((function(s){return!(a<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority}))},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],o=this.initializeBackend(r),a=o.success,i=o.asyncInit;if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),o=r.backend,a=this.readSync(n);o.disposeData(n),r.backend=e,e.move(n,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,o=this,a=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return o.startScope(a)}),(function(){return o.endScope(r)}),(function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r}))},t.prototype.scopedRun=function(e,n,r){e();try{var o=r();return n(),o}catch(a){throw n(),a}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],(function(o){return{x:function(){return o.toFloat()}}}),[],{}),n},t.prototype.runKernel=function(e,n,r,o,a){return this.runKernelFunc(null,n,null,e,r,o,a)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var o=this.backend.numDataIds(),a=0;r.forEach((function(u){a+=u.dtype==="complex64"?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=o-n-a-i;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,o,a,i,s){var u,l=this,d=[],f=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var p,m=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var y,b=PL(o,this.backendName);if(b!=null)p=function(){var S=l.backend.numDataIds();y=b.kernelFunc({inputs:n,attrs:a,backend:l.backend});var E=Array.isArray(y)?y:[y];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,S,E);var _=E.map((function(I){var k=I.dataId,M=I.shape,O=I.dtype;return l.makeTensorFromDataId(k,M,O)}));if(f){var T=l.getTensorsForGradient(o,n,_);if(T==null){s==null&&(s=[]);var D=_.filter((function(I,k){return s[k]}));T=(i||[]).slice().concat(D)}d=l.saveTensorsForBackwardMode(T)}return _};else{var C=function(S){f&&(d=S.map((function(E){return l.keep(l.clone(E))})))};p=function(){var S=l.backend.numDataIds();y=l.tidy((function(){return e(l.backend,C)}));var E=Array.isArray(y)?y:[y];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,S,E),E}}return this.scopedRun((function(){return l.state.kernelDepth++}),(function(){return l.state.kernelDepth--}),(function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(o,n,(function(){return p()})):p()})),f&&this.addTapeNode(o,n,u,r,d,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-m,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map((function(S){return n[S].shape})),outputShapes:u.map((function(S){return S.shape}))}),Array.isArray(y)?u:u[0]},t.prototype.saveTensorsForBackwardMode=function(e){var n=this;return e.map((function(r){return n.keep(n.clone(r))}))},t.prototype.getTensorsForGradient=function(e,n,r){var o=eM(e);if(o!=null){var a=o.inputsToSave||[],i=o.outputsToSave||[],s=void 0;o.saveAllInputs?(K(Array.isArray(n),(function(){return"saveAllInputs is true, expected inputs to be an array."})),s=Object.keys(n).map((function(l){return n[l]}))):s=a.map((function(l){return n[l]}));var u=r.filter((function(l,d){return i[d]}));return s.concat(u)}return null},t.prototype.makeTensor=function(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var a=e;r==="string"&&XE(e[0])&&(a=e.map((function(d){return fye(d)})));var i=o.write(a,n,r),s=new wn(n,r,i,this.nextTensorId());if(this.incRef(s,o),r==="string"){var u=this.state.tensorInfo.get(i),l=lye(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(e,n,r,o){var a=new wn(n,r=r||"float32",e,this.nextTensorId());return this.incRef(a,o),a},t.prototype.makeVariable=function(e,n,r,o){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.asType(o));var a=new Qd(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*jL(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Qd||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return Je(this,void 0,void 0,(function(){var n,r;return Ze(this,(function(o){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(a){return a.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]}))}))},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,o,a,i){var s=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},l=eM(e);l!=null&&(o=l.gradFunc),o!=null&&(u.gradient=function(d){return d=d.map((function(f,p){if(f==null){var m=r[p],g=um(m.size,m.dtype);return s.makeTensor(g,m.shape,m.dtype)}return f})),o(d.length>1?d:d[0],a,i)}),this.state.activeTape.push(u)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=$L(e),o=new Set(r.map((function(u){return u.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||o.has(i.id)||i.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach((function(u){u.kept||u.scopeId!==s.id||n.track(u)}))},t.prototype.gradients=function(e,n,r,o){var a=this;if(o===void 0&&(o=!1),K(n.length>0,(function(){return"gradients() received an empty list of xs."})),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));K(i instanceof wn,(function(){return"The result y returned by f() must be a tensor."}));var s=(function(u,l,d){for(var f={},p={},m=0;m<l.length;m++)f[l[m].id]=!0;for(m=0;m<u.length;m++){var g=(D=u[m]).inputs;for(var y in g){for(var b=g[y],C=!1,S=0;S<l.length;S++)if(f[b.id]){D.outputs.forEach((function(O){return f[O.id]=!0})),C=!0,p[D.id]=!0;break}if(C)break}}var E={};E[d.id]=!0;var _={};for(m=u.length-1;m>=0;m--)for(g=(D=u[m]).inputs,S=0;S<D.outputs.length;S++)if(E[D.outputs[S].id]){for(var y in g)E[g[y].id]=!0,_[D.id]=!0;break}var T=[];for(m=0;m<u.length;m++){var D;if(p[(D=u[m]).id]&&_[D.id]){var I={};for(var y in D.inputs){var k=D.inputs[y];f[k.id]&&(I[y]=k)}var M=Object.assign({},D);M.inputs=I,M.outputs=D.outputs,T.push(M)}}return T})(this.state.activeTape,n,i);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var u,l,d={};d[i.id]=r??(u=i.shape,l=UL(Qe(u),"float32"),ae.makeTensor(l,u,"float32")),(function(p,m,g){for(var y=function(C){var S=m[C],E=[];if(S.outputs.forEach((function(I){var k=p[I.id];k!=null?E.push(k):E.push(null)})),S.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+S.kernelName+".");var _=S.gradient(E),T=function(I){if(!(I in _))throw new Error("Cannot backprop through input "+I+". Available gradients found: "+Object.keys(_)+".");var k=g((function(){return _[I]()}));if(k.dtype!=="float32")throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input "+I+" must have 'float32' dtype, but has '"+k.dtype+"'");var M=S.inputs[I];if(!br(k.shape,M.shape))throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input '"+I+"' has shape '"+k.shape+"', which does not match the shape of the input '"+M.shape+"'");if(p[M.id]==null)p[M.id]=k;else{var O=p[M.id];p[M.id]=O.add(k),O.dispose()}};for(var D in S.inputs)T(D)},b=m.length-1;b>=0;b--)y(b)})(d,s,(function(p){return a.tidy(p)}));var f=n.map((function(p){return d[p.id]}));return a.state.gradientDepth===0&&(a.state.activeTape.forEach((function(p){for(var m=0,g=p.saved;m<g.length;m++)g[m].dispose()})),a.state.activeTape=null),{value:i,grads:f}}))},t.prototype.customGrad=function(e){var n=this;return K(aC(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var r,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];K(o.every((function(s){return s instanceof wn})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return o.forEach((function(s,u){i[u]=s})),n.runKernelFunc((function(s,u){return K((r=e.apply(void 0,o.concat([u]))).value instanceof wn,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),K(aC(r.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),r.value}),i,(function(s,u){var l=r.gradFunc(s,u),d=Array.isArray(l)?l:[l];K(d.length===o.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),K(d.every((function(p){return p instanceof wn})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var f={};return d.forEach((function(p,m){f[m]=function(){return p}})),f}))}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return Je(this,void 0,void 0,(function(){var n,r;return Ze(this,(function(o){switch(o.label){case 0:return n=hi(),[4,this.backend.time(e)];case 1:return(r=o.sent()).wallMs=hi()-n,[2,r]}}))}))},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new iM,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t})(),ae=(function(){var t=(function(){if(xw==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}xw=n}return xw})();if(t._tfengine==null){var e=new eye(t);t._tfengine=new yye(e)}return(function(n){OL=n})(t._tfengine.ENV),gi=function(){return t._tfengine},t._tfengine})();function qL(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var as=Se();as.registerFlag("DEBUG",(function(){return!1}),(function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),as.registerFlag("IS_BROWSER",(function(){return qL()})),as.registerFlag("IS_NODE",(function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0})),as.registerFlag("IS_CHROME",(function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),as.registerFlag("PROD",(function(){return!1})),as.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return as.getBool("DEBUG")})),as.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),as.registerFlag("IS_TEST",(function(){return!1}));var Sp,jo,Po,bl={},ww={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function bye(t,e){bl[t]=e}function Li(t){t in bl||(bl[t]=(function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=(function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")})(n);return r.addEventListener("webglcontextlost",(function(o){o.preventDefault(),delete bl[n]}),!1),n===1?r.getContext("webgl",ww)||r.getContext("experimental-webgl",ww):r.getContext("webgl2",ww)})(t));var e=bl[t];return e.isContextLost()?(delete bl[t],Li(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),bl[t])}function z0(t,e){return[e,t]}function Jh(t){var e=Qe(t);return oC(Math.ceil(e/4))}function lm(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function KE(t,e){var n,r,o,a,i,s,u,l,d,f=t;return Se().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,o=f.RGBA16F,a=f.RGBA32F,i=f.RED,s=4,u=1,l=f.HALF_FLOAT,d=f.FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,a=f.RGBA,i=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:d}}function nt(t,e,n){var r=n();return e&&(function(o){var a=o.getError();if(a!==o.NO_ERROR)throw new Error("WebGL Error: "+Sye(o,a))})(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Sp||(Sp={})),(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(jo||(jo={})),(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Po||(Po={}));var xye=596e-10,wye=65504;function Cye(t){return!!(Se().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||xye<Math.abs(t)&&Math.abs(t)<wye)}function Sye(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function eg(t,e,n){return Is(t,e,(function(){return t.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function Eye(t,e,n){var r=Is(t,e,(function(){return t.createShader(t.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(nt(t,e,(function(){return t.shaderSource(r,n)})),nt(t,e,(function(){return t.compileShader(r)})),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Rye(t,e,n){var r=Is(t,e,(function(){return t.createShader(t.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(nt(t,e,(function(){return t.shaderSource(r,n)})),nt(t,e,(function(){return t.compileShader(r)})),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw(function(o,a){var i=_ye.exec(a);if(i==null)return console.log("Couldn't parse line number in error: "+a),void console.log(o);for(var s=+i[1],u=o.split(`
`),l=u.length.toString().length+2,d=u.map((function(b,C){return _d((C+1).toString(),l)+b})),f=0,p=0;p<d.length;p++)f=Math.max(d[p].length,f);var m=d.slice(0,s-1),g=d.slice(s-1,s),y=d.slice(s);console.log(m.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+_d(g[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(y.join(`
`))})(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Cw,Sw,_ye=/ERROR: [0-9]+:([0-9]+):/g;function Tye(t,e){return Is(t,e,(function(){return t.createProgram()}),"Unable to create WebGLProgram.")}function Aye(t,e,n){if(nt(t,e,(function(){return t.linkProgram(n)})),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Ew(t,e,n){if(nt(t,e,(function(){return t.validateProgram(n)})),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Nye(t,e,n){var r=Is(t,e,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return nt(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),nt(t,e,(function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)})),r}function Dye(t,e,n){var r=Is(t,e,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return nt(t,e,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)})),nt(t,e,(function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)})),r}function kye(t,e){return Is(t,e,(function(){return t.createTexture()}),"Unable to create WebGLTexture.")}function Iye(t,e){var n=Se().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function Mye(t,e){return Is(t,e,(function(){return t.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function sM(t,e,n,r,o,a,i,s){var u=t.getAttribLocation(n,r);return u!==-1&&(nt(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,o)})),nt(t,e,(function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,i,s)})),nt(t,e,(function(){return t.enableVertexAttribArray(u)})),!0)}function Oye(t,e,n,r){jye(t,r),nt(t,e,(function(){return t.activeTexture(t.TEXTURE0+r)})),nt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)}))}function Pye(t,e,n,r){return Is(t,e,(function(){return t.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function Fye(t,e,n){return t.getUniformLocation(e,n)}function Bye(t,e,n,r,o,a){nt(t,e,(function(){return Oye(t,e,r,a)})),nt(t,e,(function(){return t.uniform1i(o,a)}))}function Rw(t,e,n,r){nt(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)})),nt(t,e,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}))}function uM(t,e,n){nt(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)})),nt(t,e,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}))}function tg(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Lye(t,e))}function Lye(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Is(t,e,n,r){var o=nt(t,e,(function(){return n()}));if(o==null)throw new Error(r);return o}function jye(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function fy(t,e){return e===void 0&&(e=2),Qe(t.slice(0,t.length-e))}function hy(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function _w(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[fy(t)].concat(hy(t))),e}function zye(t,e){var n;e===void 0&&(e=!1);var r=Se().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map((function(l,d){return d>=t.length-2?LL(t[d]):t[d]}))).length===1&&(t=[2,t[0]])),t.length!==2){var o=El(t);t=o.newShape}var a=Qe(t);if(t.length<=1&&a<=r)return[1,a];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var i=fy(t),s=2,u=2;return t.length&&(s=(n=hy(t))[0],u=n[1]),oC(a=i*(s/2)*(u/2)).map((function(l){return 2*l}))}return oC(a)}function ng(t){return t%2==0}function rg(t,e){if(br(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||ng(n)&&ng(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&ng(t[0])&&ng(e[0])}function Uye(t){if(Cw==null){var e=Li(t);Cw=e.getParameter(e.MAX_TEXTURE_SIZE)}return Cw}function Wye(t){if(Sw==null){var e=Li(t);Sw=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Sw)}function Vye(t){if(t===0)return 0;var e=Li(t);return ya(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:ya(e,"EXT_disjoint_timer_query")?1:0}function ya(t,e){return t.getExtension(e)!=null}function lM(t){try{if(Li(t)!=null)return!0}catch{return!1}return!1}function Hye(t){if(t===0)return!1;var e=Li(t);if(t===1){if(!ya(e,"OES_texture_float"))return!1}else if(!ya(e,"EXT_color_buffer_float"))return!1;return fC(e)}function Gye(t){if(t===0)return!1;var e=Li(t);if(t!==1){if(ya(e,"EXT_color_buffer_float"))return fC(e);if(ya(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return(function(r,o){var a=KE(r,o),i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(i),r.deleteFramebuffer(s),u})(e,n)}return!1}return!!ya(e,"OES_texture_float")&&!!ya(e,"WEBGL_color_buffer_float")&&fC(e)}function fC(t){var e=KE(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}function $ye(t){return t===2&&Li(t).fenceSync!=null}var yt=Se();function XL(t){Se().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function tn(t,e){return ae.tidy(t,e)}function wo(t){$L(t).forEach((function(e){return e.dispose()}))}function qye(t){return ae.keep(t)}function py(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Se().getBool("IS_TEST")||console.warn.apply(console,t)}function $u(t,e){var n=t;if(Ri(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||Ri(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Se().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&(function o(a,i,s){if(s=s||[],!Array.isArray(a)&&!Ri(a))return void K(i.length===0,(function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+i[0]+" elements"}));K(i.length>0,(function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"})),K(a.length===i[0],(function(){return"Element arr["+s.join("][")+"] should have "+i[0]+" elements, but has "+a.length+" elements"}));for(var u=i.slice(1),l=0;l<a.length;++l)o(a[l],u,s.concat(l))})(t,r,[]),r}function cM(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function X(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof wn)return cM(r,t.dtype,e,n),t;var o=sm(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),cM(r,o,e,n),t==null||!Ri(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var a=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=$u(t,o);Ri(t)||Array.isArray(t)||(t=[t]);var s=o!=="string"?zL(t,o,Se().getBool("DEBUG")):Kd(t,[],!0);return ae.makeTensor(s,i,o)}function my(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map((function(o,a){return X(o,e+"["+a+"]",n)}),r)}function KL(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Xye(t,e,n){for(var r=t.length+e.length,o=[],a=0,i=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(t[a++]):o.push(e[i++]);return o}function Br(t,e){for(var n=[],r=t.length,o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);return[n,e.map((function(a){return t[a]}))]}function So(t,e){return Xye(t,e.map((function(n){return 1})),e)}function Oo(t,e,n){K(KL(e,n),(function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."}))}function ji(t,e){if(KL(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach((function(o){return n.push(o)})),n}function YE(t){return t.map((function(e,n){return[n,e]})).sort((function(e,n){return e[1]-n[1]})).map((function(e){return e[0]}))}function zi(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function Kye(t,e){var n=t[0].length;t.forEach((function(o,a){K(o.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+n+")"}))})),K(e>=0&&e<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=t[0];t.forEach((function(o,a){for(var i=0;i<n;i++)K(i===e||o[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."}))}))}function Jd(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function te(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];ae.startScope(n);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ae.endScope(s),s}catch(u){throw ae.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}yt.registerFlag("HAS_WEBGL",(function(){return yt.getNumber("WEBGL_VERSION")>0})),yt.registerFlag("WEBGL_VERSION",(function(){return lM(2)?2:lM(1)?1:0})),yt.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return yt.get("WEBGL_VERSION")===2})),yt.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),yt.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),yt.registerFlag("WEBGL_PACK",(function(){return yt.getBool("HAS_WEBGL")})),yt.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_CLIP",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),yt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_REDUCE",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_CONV_IM2COL",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Uye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Wye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var t=yt.getNumber("WEBGL_VERSION");return t===0?0:Vye(t)})),yt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return yt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t})),yt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Hye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!yt.getBool("WEBGL_FORCE_F16_TEXTURES")&&yt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),yt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Gye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return $ye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return yt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),GL=XL;var _r=te({complex_:function(t,e){var n=X(t,"real","complex"),r=X(e,"imag","complex");return an(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),ae.runKernelFunc((function(o){return o.complex(n,r)}),{$real:n,$imag:r})}}),pa=te({real_:function(t){var e=X(t,"input","real");return ae.runKernelFunc((function(n){return n.real(e)}),{$input:e})}}),yi=te({imag_:function(t){var e=X(t,"input","imag");return ae.runKernelFunc((function(n){return n.imag(e)}),{$input:e})}});function Ar(t,e,n){return qu(t,e,$u(t,n),n)}function qu(t,e,n,r){if(r==null&&(r=sm(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ri(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){WL(e);var o=Qe(e),a=Qe(n);K(o===a,(function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+a}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==Qe(e.slice(i));K(n[i]===e[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "}))}}return Ri(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?zL(t,r,Se().getBool("DEBUG")):Kd(t,[],!0),ae.makeTensor(t,e,r)}function rt(t,e){if((Ri(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ri(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return qu(t,[],[],e)}function qa(t,e){Nf(t);var n=$u(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return qu(t,null,n,e)}function Pl(t,e,n){if(Nf(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=$u(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return qu(t,e,r,n)}function YL(t,e,n){if(Nf(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=$u(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return qu(t,e,r,n)}function pi(t,e,n){if(Nf(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=$u(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return qu(t,e,r,n)}function Yye(t,e,n){if(Nf(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=$u(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return qu(t,e,r,n)}function Qye(t,e,n){if(Nf(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=$u(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return qu(t,e=e||r,r,n)}function Jye(t,e,n,r){return e===void 0&&(e=!0),ae.makeVariable(t,e,n,r)}function Df(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Df(t,"float32"),r=Vn(t,"float32");return _r(n,r)}var o=UL(Qe(t),e);return ae.makeTensor(o,t,e)}function Vn(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Vn(t,"float32"),r=Vn(t,"float32");return _r(n,r)}var o=um(Qe(t),e);return ae.makeTensor(o,t,e)}function Fl(t,e,n){return ae.runKernelFunc((function(r){return r.fill(t,e,n)}),{})}function Zye(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return ae.runKernelFunc((function(r){return r.linspace(t,e,n)}),{})}function vy(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return Vn([0],r);var o=um(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return qa(o,r)}var QL=te({onesLike_:function(t){var e=X(t,"x","onesLike");if(e.dtype==="complex64"){var n=QL(pa(e)),r=$t(yi(e));return _r(n,r)}return ae.runKernelFunc((function(o){return o.onesLike(e)}),{x:e},(function(o,a){return{x:function(){return $t(o)}}}),"OnesLike")}}),$t=te({zerosLike_:function(t){var e=X(t,"x","zerosLike");return ae.runKernelFunc((function(n){return n.zerosLike(e)}),{x:e},(function(n,r){return{x:function(){return $t(n)}}}),"ZerosLike")}}),Ea=te({concat_:function(t,e){e===void 0&&(e=0),K(t.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=my(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach((function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")})),e=fr(e,n[0].shape)[0];var r=Jd(n.map((function(s){return s.shape})),e);if(Qe(r)===0)return Ar([],r);if((n=n.filter((function(s){return s.size>0}))).length===1)return n[0];var o=n.map((function(s){return s.shape}));Kye(o,e);var a=n,i={axis:e};return ae.runKernelFunc((function(s){return s.concat(n,e)}),a,(function(s){var u=o.map((function(l){return l[e]}));return QE(s,u,e).map((function(l){return function(){return l}}))}),"Concat",i)}}),e0e=te({concat1d_:function(t){return Ea(t,0)}}),t0e=te({concat2d_:function(t,e){return Ea(t,e)}}),n0e=te({concat3d_:function(t,e){return Ea(t,e)}}),r0e=te({concat4d_:function(t,e){return Ea(t,e)}}),QE=te({split_:function(t,e,n){n===void 0&&(n=0);var r,o=X(t,"x","split");return n=fr(n,o.shape)[0],typeof e=="number"?(K(o.shape[n]%e==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(e).fill(o.shape[n]/e)):(K(o.shape[n]===e.reduce((function(a,i){return a+i})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=e),ae.runKernelFunc((function(a){return a.split(o,r,n)}),{$x:o},(function(a){return{$x:function(){return Ea(a,n)}}}))}});function Ct(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",WL(t),new Cp(t,e,n)}function o0e(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var JL=te({batchToSpaceND_:function(t,e,n){var r=X(t,"x","batchToSpaceND"),o=e.reduce((function(a,i){return a*i}));return K(r.rank>=1+e.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length})),K(n.length===e.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length})),K(r.shape[0]%o==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o})),ae.runKernelFunc((function(a){return a.batchToSpaceND(r,e,n)}),{$x:r},(function(a){return{$x:function(){return a.spaceToBatchND(e,n)}}}))}}),a0e=te({cast_:function(t,e){var n=X(t,"x","cast");if(!sye(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return ae.runKernelFunc((function(o){return o.cast(n,e)}),{x:n},(function(o){return{x:function(){return o.clone()}}}),"Cast",r)}}),i0e=te({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=X(t,"x","cumsum"),a=ji([e|=0],o.rank),i=o;a!=null&&(i=o.transpose(a));var s=zi(1,o.rank)[0],u=ae.runKernelFunc((function(l){return l.cumsum(i,s,n,r)}),{permutedX:i},(function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}}));return a!=null&&(u=u.transpose(a)),u}}),s0e=te({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=X(t,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];return K(o*e>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+`  for depthToSpace with input shape
      `+r.shape})),K(a*e>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+` for depthToSpace with input shape
          `+r.shape})),K(i%(e*e)==0,(function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+i+" for depthToSpace with input shape "+r.shape})),ae.runKernelFunc((function(s){return s.depthToSpace(r,e,n)}),{$x:r})}}),mu=te({expandDims_:function(t,e){e===void 0&&(e=0);var n=X(t,"x","expandDims",null);K(e<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return e<0&&(K(-(n.rank+1)<=e,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),e=n.rank+e+1),r.splice(e,0,1),us(n,r)}}),us=te({reshape_:function(t,e){var n=X(t,"x","reshape",null);e=aye(e,n.size),K(n.size===Qe(e),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:e};return ae.runKernelFunc((function(o){return o.reshape(n,e)}),{x:n},(function(o){return{x:function(){return o.reshape(n.shape)}}}),"Reshape",r)}}),ZL=te({spaceToBatchND_:function(t,e,n){var r=X(t,"x","spaceToBatchND");return K(r.rank>=1+e.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length})),K(n.length===e.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length})),K(r.shape.reduce((function(o,a,i){return i>0&&i<=e.length?o&&(a+n[i-1][0]+n[i-1][1])%e[i-1]==0:o}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()})),ae.runKernelFunc((function(o){return o.spaceToBatchND(r,e,n)}),{$x:r},(function(o){return{$x:function(){return o.batchToSpaceND(e,n)}}}))}}),ej=te({squeeze_:function(t,e){var n=X(t,"x","squeeze");return us(n,El(n.shape,e).newShape)}}),Pu=te({stack_:function(t,e){e===void 0&&(e=0);var n=my(t,"tensors","stack");if(K(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length===1)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;K(e<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(s){an(o,s.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(s){K(a===s.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(s){return s.expandDims(e)}));return Ea(i,e)}}),U0=te({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=X(t,"x","unstack");K(e>=-n.shape.length&&e<n.shape.length,(function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),e<0&&(e+=n.shape.length);var r={axis:e};return ae.runKernelFunc((function(o){return o.unstack(n,e)}),{x:n},(function(o){return{x:function(){return Pu(o,e)}}}),"Unpack",r)}}),u0e=function(t,e){return Je(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,d,f;return Ze(this,(function(p){switch(p.label){case 0:return n=X(t,"x","setdiff1d"),r=X(e,"y","setdiff1d"),K(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),K(n.rank===1,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),K(r.rank===1,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return o=p.sent(),[4,r.data()];case 2:for(a=p.sent(),i=new Set(a),s=0,d=0;d<o.length;d++)i.has(o[d])||s++;for(u=new Cp([s],n.dtype),l=new Cp([s],"int32"),d=0,f=0;d<o.length;d++)i.has(o[d])||(u.values[f]=o[d],l.values[f]=d,f++);return[2,[u.toTensor(),l.toTensor()]]}}))}))};function gy(t,e,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var a=e.length,i=0;i<a;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(a+1))}return o}function yy(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function by(t,e,n,r){r===void 0&&(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?o.push(e[a-1]*t[a]):o.push(t[a]/e[a-1]):o.push(t[a]);return o}function tj(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function nj(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}var rj="Add",W0="Div",V0="SquaredDifference",oj="BroadcastTo",aj="OneHot",ij="Identity",sj="Tile",uj="PadV2",Ra=te({add_:function(t,e){var n,r=X(t,"a","add"),o=X(e,"b","add");n=Mn(r,o),r=n[0],o=n[1];var a={a:r,b:o};return ae.runKernelFunc((function(i,s){var u=i.add(r,o);return s([r,o]),u}),a,null,rj)}});function wu(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(a)}return r}function sr(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],a=e.length-r-1,i=e[a];(o==null||o===1&&i>1)&&n.unshift(a)}return n}function Ot(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var a=t[t.length-o-1];a==null&&(a=1);var i=e[e.length-o-1];if(i==null&&(i=1),a===1)n.unshift(i);else if(i===1)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}var l0e=te({abs_:function(t){var e=X(t,"x","abs");return e.dtype==="complex64"?ae.runKernelFunc((function(n){return n.complexAbs(e)}),{$x:e}):ae.runKernelFunc((function(n,r){var o=n.abs(e);return r([e]),o}),{x:e},(function(n,r){var o=r[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}}),"Abs")}}),c0e=te({acos_:function(t){var e=X(t,"x","acos");return ae.runKernelFunc((function(n,r){var o=n.acos(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.divStrict(rt(1).sub(o.toFloat().square()).sqrt()).neg()}}}))}}),d0e=te({acosh_:function(t){var e=X(t,"x","acosh");return ae.runKernelFunc((function(n,r){var o=n.acosh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}}))}}),f0e=te({asin_:function(t){var e=X(t,"x","asin");return ae.runKernelFunc((function(n,r){var o=n.asin(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.divStrict(rt(1).sub(o.toFloat().square()).sqrt())}}}))}}),h0e=te({asinh_:function(t){var e=X(t,"x","asinh");return ae.runKernelFunc((function(n,r){var o=n.asinh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.divStrict(rt(1).add(o.toFloat().square()).sqrt())}}}))}}),p0e=te({atan_:function(t){var e=X(t,"x","atan");return ae.runKernelFunc((function(n,r){var o=n.atan(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}}))}}),m0e=te({atanh_:function(t){var e=X(t,"x","atanh");return ae.runKernelFunc((function(n,r){var o=n.atanh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(rt(1).sub(o.toFloat().square()))}}}))}}),v0e=te({ceil_:function(t){var e=X(t,"x","ceil");return ae.runKernelFunc((function(n){return n.ceil(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),g0e=te({clipByValue_:function(t,e,n){var r=X(t,"x","clipByValue");K(e<=n,(function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."}));var o=[r],a={min:e,max:n};return ae.runKernelFunc((function(i,s){var u=i.clip(r,e,n);return s([r]),u}),{x:r},(function(i,s){var u=s[0];return{x:function(){return i.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),$t(i))}}}),"ClipByValue",a,o)}}),y0e=te({cos_:function(t){var e=X(t,"x","cos"),n=[e];return ae.runKernelFunc((function(r,o){var a=r.cos(e);return o([e]),a}),{x:e},(function(r,o){var a=o[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}}),"Cos",{},n)}}),b0e=te({cosh_:function(t){var e=X(t,"x","cosh");return ae.runKernelFunc((function(n,r){var o=n.cosh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}}))}}),x0e=te({erf_:function(t){var e=X(t,"x","erf");return K(e.dtype==="int32"||e.dtype==="float32",(function(){return"Input dtype must be `int32` or `float32`."})),e.dtype==="int32"&&(e=e.toFloat()),ae.runKernelFunc((function(n,r){var o=n.erf(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),w0e=te({exp_:function(t){var e=X(t,"x","exp");return ae.runKernelFunc((function(n,r){var o=n.exp(e);return r([o]),o}),{x:e},(function(n,r){return{x:function(){return n.mulStrict(r[0])}}}),"Exp",{},[],[!0])}}),C0e=te({expm1_:function(t){var e=X(t,"x","expm1");return ae.runKernelFunc((function(n,r){var o=n.expm1(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}}))}}),S0e=te({floor_:function(t){var e=X(t,"x","floor");return ae.runKernelFunc((function(n){return n.floor(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),E0e=te({log_:function(t){var e=X(t,"x","log"),n=[e];return ae.runKernelFunc((function(r,o){var a=r.log(e);return o([e]),a}),{x:e},(function(r,o){var a=o[0];return{x:function(){return r.div(a.toFloat())}}}),"Log",{},n)}}),R0e=te({log1p_:function(t){var e=X(t,"x","log1p");return ae.runKernelFunc((function(n,r){var o=n.log1p(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}}))}}),_0e=te({logSigmoid_:function(t){var e=X(t,"x","logSigmoid");return ae.runKernelFunc((function(n,r){var o=n.softplus(e.neg()).neg();return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}}))}}),JE=te({neg_:function(t){var e=X(t,"x","neg"),n=[e];return ae.runKernelFunc((function(r){return r.neg(e)}),{x:e},(function(r){return{x:function(){return r.neg()}}}),"Neg",{},n)}}),T0e=te({reciprocal_:function(t){var e=X(t,"x","reciprocal");return ae.runKernelFunc((function(n,r){var o=n.reciprocal(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}}))}}),A0e=te({round_:function(t){var e=X(t,"x","round");return ae.runKernelFunc((function(n){return n.round(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),lj=te({rsqrt_:function(t){var e=X(t,"x","rsqrt"),n=[e];return ae.runKernelFunc((function(r,o){var a=r.rsqrt(e);return o([e]),a}),{x:e},(function(r,o){var a=o[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),N0e=te({sigmoid_:function(t){var e=X(t,"x","sigmoid");return ae.runKernelFunc((function(n,r){var o=n.sigmoid(e);return r([o]),o}),{x:e},(function(n,r){var o=r[0];return{x:function(){return n.mul(o.mul(rt(1).sub(o)))}}}),"Sigmoid")}}),D0e=te({sign_:function(t){var e=X(t,"x","sign");return ae.runKernelFunc((function(n){return n.sign(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),k0e=te({isNaN_:function(t){var e=X(t,"x","isNaN");return ae.runKernelFunc((function(n){return n.isNaN(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),I0e=te({isInf_:function(t){var e=X(t,"x","isInf");return ae.runKernelFunc((function(n){return n.isInf(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),M0e=te({isFinite_:function(t){var e=X(t,"x","isFinite");return ae.runKernelFunc((function(n){return n.isFinite(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),O0e=te({sin_:function(t){var e=X(t,"x","sin"),n=[e];return ae.runKernelFunc((function(r,o){var a=r.sin(e);return o([e]),a}),{x:e},(function(r,o){var a=o[0];return{x:function(){return a.toFloat().cos().mul(r)}}}),"Sin",{},n)}}),P0e=te({sinh_:function(t){var e=X(t,"x","sinh");return ae.runKernelFunc((function(n,r){var o=n.sinh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}}))}}),F0e=te({softplus_:function(t){var e=X(t,"x","softplus");return ae.runKernelFunc((function(n,r){var o=n.softplus(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}}))}}),B0e=te({sqrt_:function(t){var e=X(t,"x","sqrt");return ae.runKernelFunc((function(n,r){var o=n.sqrt(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}}))}}),L0e=te({step_:function(t,e){e===void 0&&(e=0);var n=X(t,"x","step");return ae.runKernelFunc((function(r){return r.step(n,e)}),{$x:n},(function(r){return{$x:function(){return $t(r)}}}))}}),j0e=te({tan_:function(t){var e=X(t,"x","tan");return ae.runKernelFunc((function(n,r){var o=n.tan(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}}))}}),z0e=te({tanh_:function(t){var e=X(t,"x","tanh");return ae.runKernelFunc((function(n,r){var o=n.tanh(e);return r([o]),o}),{x:e},(function(n,r){var o=r[0];return{x:function(){return rt(1).sub(o.square()).mulStrict(n)}}}),"Tanh",{},null,[!0])}}),U0e=te({addStrict_:function(t,e){var n=X(t,"a","addStrict"),r=X(e,"b","addStrict");return an(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),W0e=te({atan2_:function(t,e){var n,r=X(t,"a","atan2"),o=X(e,"b","atan2");n=Mn(r,o),r=n[0],o=n[1];var a=Ot(r.shape,o.shape);return ae.runKernelFunc((function(i,s){var u=i.atan2(r,o);return s([r,o]),u}),{$a:r,$b:o},(function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=Ra(u.square(),l.square()),f=i.mul(l.div(d)),p=sr(u.shape,a);return p.length>0&&(f=f.sum(p)),f.reshape(u.shape)},$b:function(){var d=Ra(u.square(),l.square()),f=JE(i.mul(u.div(d))),p=sr(l.shape,a);return p.length>0&&(f=f.sum(p)),f.reshape(l.shape)}}}))}}),V0e=te({divStrict_:function(t,e){var n=X(t,"a","div"),r=X(e,"b","div");return an(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),cj=te({floorDiv_:function(t,e){var n,r=X(t,"a","floorDiv"),o=X(e,"b","floorDiv");n=Mn(r,o),r=n[0],o=n[1];var a=Ot(r.shape,o.shape);return ae.runKernelFunc((function(i,s){var u=i.floorDiv(r,o);return s([r,o]),u}),{a:r,b:o},(function(i,s){var u=s[0],l=s[1];return{a:function(){var d=i.div(l.toFloat()),f=sr(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},b:function(){var d=i.mul(u.toFloat()),f=sr(l.shape,a);f.length>0&&(d=d.sum(f).reshape(l.shape));var p=l.square();return d.div(p.toFloat()).neg()}}}),"FloorDiv")}}),ZE=te({maximum_:function(t,e){var n,r=X(t,"a","maximum"),o=X(e,"b","maximum");return n=Mn(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Ot(r.shape,o.shape),ae.runKernelFunc((function(a,i){var s=a.maximum(r,o);return i([r,o]),s}),{a:r,b:o},(function(a,i){var s=i[0],u=i[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}}),"Maximum")}}),H0e=te({maximumStrict_:function(t,e){var n=X(t,"a","maximumStrict"),r=X(e,"b","maximumStrict");return an(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),dj=te({minimum_:function(t,e){var n,r=X(t,"a","minimum"),o=X(e,"b","minimum");return n=Mn(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Ot(r.shape,o.shape),ae.runKernelFunc((function(a,i){var s=a.minimum(r,o);return i([r,o]),s}),{a:r,b:o},(function(a,i){var s=i[0],u=i[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}}),"Minimum")}}),G0e=te({minimumStrict_:function(t,e){var n=X(t,"a","minimumStrict"),r=X(e,"b","minimumStrict");return an(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),$0e=te({mod_:function(t,e){var n,r=X(t,"a","mod"),o=X(e,"b","mod");n=Mn(r,o),r=n[0],o=n[1];var a=Ot(r.shape,o.shape);return ae.runKernelFunc((function(i,s){var u=i.mod(r,o);return s([r,o]),u}),{$a:r,$b:o},(function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=sr(u.shape,a);return d.length>0?i.sum(d).reshape(u.shape):i},$b:function(){var d=i.mul(u.div(l).floor().neg()),f=sr(l.shape,a);return f.length>0?d.sum(f).reshape(l.shape):d}}}))}}),q0e=te({modStrict_:function(t,e){var n=X(t,"a","modStrict"),r=X(e,"b","modStrict");return an(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Wn=te({mul_:function(t,e){var n,r=X(t,"a","mul"),o=X(e,"b","mul");n=Mn(r,o),r=n[0],o=n[1];var a=Ot(r.shape,o.shape);return ae.runKernelFunc((function(i,s){var u=i.multiply(r,o);return s([r,o]),u}),{a:r,b:o},(function(i,s){var u=s[0],l=s[1];return{a:function(){var d=i.mul(l.toFloat()),f=sr(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},b:function(){var d=i.mul(u.toFloat()),f=sr(l.shape,a);return f.length>0?d.sum(f).reshape(l.shape):d}}}),"Mul")}}),X0e=te({mulStrict_:function(t,e){var n=X(t,"a","mul"),r=X(e,"b","mul");return an(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),xy=te({pow_:function(t,e){var n,r=X(t,"base","pow"),o=X(e,"exp","pow");n=Mn(r,o),r=n[0],o=n[1];var a=Ot(r.shape,o.shape),i=[r,o];return ae.runKernelFunc((function(s,u){var l=s.pow(r,o);return u([r,o,l]),l}),{a:r,b:o},(function(s,u){var l=u[0],d=u[1],f=u[2];return{a:function(){var p=d.toFloat(),m=s.mul(p.mul(l.pow(p.sub(rt(1))))),g=sr(l.shape,a);return g.length>0&&(m=m.sum(g)),m.reshape(l.shape)},b:function(){var p=l.greater(0),m=l.log().where(p,$t(l)),g=s.mul(f.mul(m)),y=sr(d.shape,a);return y.length>0&&(g=g.sum(y)),g.reshape(d.shape)}}}),"Pow",{},i,[!0])}}),K0e=te({powStrict_:function(t,e){return an(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Y0e=te({squaredDifferenceStrict_:function(t,e){var n=X(t,"a","squaredDifferenceStrict"),r=X(e,"b","squaredDifferenceStrict");return an(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Ua=te({sub_:function(t,e){var n,r=X(t,"a","sub"),o=X(e,"b","sub");n=Mn(r,o),r=n[0],o=n[1];var a=Ot(r.shape,o.shape);return ae.runKernelFunc((function(i){return i.subtract(r,o)}),{a:r,b:o},(function(i){return{a:function(){var s=i,u=sr(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=i,u=sr(o.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}}),"Sub")}}),Q0e=te({subStrict_:function(t,e){var n=X(t,"a","subStrict"),r=X(e,"b","subStrict");return an(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Fu=te({div_:function(t,e){var n,r=X(t,"a","div"),o=X(e,"b","div");if(n=Mn(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return cj(r,o);var a={a:r,b:o};return ae.runKernelFunc((function(i,s){var u=i.realDivide(r,o);return s([r,o]),u}),a,null,W0,{})}});function fj(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=i[a],s.push(i[a]);var l=Ho(t.shape).map((function(d){return d/u})).concat([1]).slice(0,r);return[s,o,u,l]}var hj=30;function Tw(t){return t<=hj?t:iC(t,Math.floor(Math.sqrt(t)))}function J0e(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(a+" update.rank != "+(o+t.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+e.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+t[i+o]+")")}function Z0e(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}J0e(n,e,t)}function wy(t,e,n){for(var r=e.shape.length,o=r>1?e.shape[r-1]:1,a=n.length,i=1,s=o;s<a;++s)i*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:Qe(e.shape)/u,sliceSize:i,strides:Ho(n.slice(0,o)).concat([1]),outputSize:Qe(n)}}function ebe(t,e,n){K(t.rank===e.length,(function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."})),K(t.rank===n.length,(function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."}));for(var r=function(a){K(e[a]+n[a]<=t.shape[a],(function(){return"Error in slice"+t.rank+"D: begin["+a+"] + size["+a+"] ("+(e[a]+n[a])+") would overflow input.shape["+a+"] ("+t.shape[a]+")"}))},o=0;o<t.rank;++o)r(o)}function dM(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function eR(t,e,n){for(var r=[],o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function tbe(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||a==null)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=rC(0,a,s-1)}function nbe(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||a==null)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=i>0?rC(0,a,s):rC(-1,a,s-1)}function pj(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function mj(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function rbe(t,e){K(aC(t),(function(){return"The f passed in variableGrads(f) must be a function"})),K(e==null||Array.isArray(e)&&e.every((function(d){return d instanceof Qd})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=e!=null;if(!n)for(var r in e=[],ae.registeredVariables)e.push(ae.registeredVariables[r]);var o=n?e.filter((function(d){return!d.trainable})):null,a=e.length;K((e=e.filter((function(d){return d.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."}));var i=ae.gradients(t,e,null,!0),s=i.value,u=i.grads;K(u.some((function(d){return d!=null})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),K(s.rank===0,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return e.forEach((function(d,f){u[f]!=null&&(l[d.name]=u[f])})),o?.forEach((function(d){return l[d.name]=null})),{value:s,grads:l}}function H0(t){return ae.customGrad(t)}var G0=te({softmax_:function(t,e){e===void 0&&(e=-1);var n=X(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return ae.runKernelFunc((function(r,o){var a=r.softmax(n,e);return o([a]),a}),{logits:n},(function(r,o){var a=o[0],i=r.mul(a);return{logits:function(){return i.sub(i.sum([e],!0).mul(a))}}}),"Softmax",{dim:e},[],[!0])}}),obe=te({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=X(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return H0((function(r,o){var a=r.max(e,!0),i=r.sub(a),s=i.toFloat().sub(i.exp().sum(e,!0).log());return o([s]),{value:s,gradFunc:function(u,l){var d=l[0].exp();return u.sub(u.sum(e,!0).mul(d))}}}))(n)}}),Pa=te({transpose_:function(t,e){var n=X(t,"x","transpose");if(e==null&&(e=n.shape.map((function(o,a){return a})).reverse()),K(n.rank===e.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."})),e.forEach((function(o){K(o>=0&&o<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e}))})),n.rank<=1)return n.clone();var r={perm:e};return ae.runKernelFunc((function(o){return o.transpose(n,e)}),{x:n},null,"Transpose",r)}}),vj=(function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t})(),gj=(function(){function t(){}return t.prototype.time=function(e){return ge("time")},t.prototype.read=function(e){return ge("read")},t.prototype.readSync=function(e){return ge("readSync")},t.prototype.numDataIds=function(){return ge("numDataIds")},t.prototype.disposeData=function(e){return ge("disposeData")},t.prototype.write=function(e,n,r){return ge("write")},t.prototype.move=function(e,n,r,o){return ge("move")},t.prototype.memory=function(){return ge("memory")},t.prototype.floatPrecision=function(){return ge("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,o){return ge("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,ge("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return ge("slice")},t.prototype.stridedSlice=function(e,n,r,o){return ge("stridedSlice")},t.prototype.unstack=function(e,n){return ge("unstack")},t.prototype.reverse=function(e,n){return ge("reverse")},t.prototype.concat=function(e,n){return ge("concat")},t.prototype.neg=function(e){return ge("neg")},t.prototype.add=function(e,n){return ge("add")},t.prototype.addN=function(e){return ge("addN")},t.prototype.subtract=function(e,n){return ge("subtract")},t.prototype.multiply=function(e,n){return ge("multiply")},t.prototype.realDivide=function(e,n){return ge("realDivide")},t.prototype.floorDiv=function(e,n){return ge("floorDiv")},t.prototype.sum=function(e,n){return ge("sum")},t.prototype.prod=function(e,n){return ge("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return ge("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return ge("argMin")},t.prototype.argMax=function(e,n){return ge("argMax")},t.prototype.equal=function(e,n){return ge("equal")},t.prototype.notEqual=function(e,n){return ge("notEqual")},t.prototype.less=function(e,n){return ge("less")},t.prototype.lessEqual=function(e,n){return ge("lessEqual")},t.prototype.greater=function(e,n){return ge("greater")},t.prototype.greaterEqual=function(e,n){return ge("greaterEqual")},t.prototype.logicalNot=function(e){return ge("logicalNot")},t.prototype.logicalAnd=function(e,n){return ge("logicalAnd")},t.prototype.logicalOr=function(e,n){return ge("logicalOr")},t.prototype.where=function(e){return ge("where")},t.prototype.select=function(e,n,r){return ge("select")},t.prototype.topk=function(e,n,r){return ge("topk")},t.prototype.min=function(e,n){return ge("min")},t.prototype.minimum=function(e,n){return ge("minimum")},t.prototype.mod=function(e,n){return ge("mod")},t.prototype.max=function(e,n){return ge("max")},t.prototype.maximum=function(e,n){return ge("maximum")},t.prototype.all=function(e,n){return ge("all")},t.prototype.any=function(e,n){return ge("any")},t.prototype.squaredDifference=function(e,n){return ge("squaredDifference")},t.prototype.ceil=function(e){return ge("ceil")},t.prototype.floor=function(e){return ge("floor")},t.prototype.round=function(e){return ge("round")},t.prototype.sign=function(e){return ge("sign")},t.prototype.isNaN=function(e){return ge("isNaN")},t.prototype.isInf=function(e){return ge("isInf")},t.prototype.isFinite=function(e){return ge("isFinite")},t.prototype.pow=function(e,n){return ge("pow")},t.prototype.exp=function(e){return ge("exp")},t.prototype.expm1=function(e){return ge("expm1")},t.prototype.softmax=function(e,n){return ge("softmax")},t.prototype.log=function(e){return ge("log")},t.prototype.log1p=function(e){return ge("log1p")},t.prototype.sqrt=function(e){return ge("sqrt")},t.prototype.rsqrt=function(e){return ge("rsqrt")},t.prototype.square=function(e){return ge("square")},t.prototype.reciprocal=function(e){return ge("reciprocal")},t.prototype.relu=function(e){return ge("relu")},t.prototype.relu6=function(e){return ge("relu6")},t.prototype.prelu=function(e,n){return ge("prelu")},t.prototype.elu=function(e){return ge("elu")},t.prototype.eluDer=function(e,n){return ge("eluDer")},t.prototype.selu=function(e){return ge("selu")},t.prototype.int=function(e){return ge("int")},t.prototype.clip=function(e,n,r){return ge("clip")},t.prototype.abs=function(e){return ge("abs")},t.prototype.complexAbs=function(e){return ge("complexAbs")},t.prototype.sigmoid=function(e){return ge("sigmoid")},t.prototype.softplus=function(e){return ge("softplus")},t.prototype.sin=function(e){return ge("sin")},t.prototype.cos=function(e){return ge("cos")},t.prototype.tan=function(e){return ge("tan")},t.prototype.asin=function(e){return ge("asin")},t.prototype.acos=function(e){return ge("acos")},t.prototype.atan=function(e){return ge("atan")},t.prototype.atan2=function(e,n){return ge("atan2")},t.prototype.sinh=function(e){return ge("sinh")},t.prototype.cosh=function(e){return ge("cosh")},t.prototype.tanh=function(e){return ge("tanh")},t.prototype.asinh=function(e){return ge("asinh")},t.prototype.acosh=function(e){return ge("acosh")},t.prototype.atanh=function(e){return ge("atanh")},t.prototype.erf=function(e){return ge("erf")},t.prototype.step=function(e,n){return ge("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ge("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return ge("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return ge("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return ge("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ge("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return ge("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return ge("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return ge("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return ge("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return ge("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return ge("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return ge("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,o){return ge("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return ge("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return ge("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return ge("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return ge("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return ge("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,o){return ge("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return ge("reshape")},t.prototype.cast=function(e,n){return ge("cast")},t.prototype.tile=function(e,n){return ge("tile")},t.prototype.pad=function(e,n,r){return ge("pad")},t.prototype.transpose=function(e,n){return ge("transpose")},t.prototype.gather=function(e,n,r){return ge("gather")},t.prototype.gatherND=function(e,n){return ge("gatherND")},t.prototype.scatterND=function(e,n,r){return ge("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return ge("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return ge("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,o){return ge("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return ge("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,o){return ge("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return ge("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,o,a,i){return ge("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,o,a){return ge("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,o,a,i,s){return ge("LRNGrad")},t.prototype.multinomial=function(e,n,r,o){return ge("multinomial")},t.prototype.oneHot=function(e,n,r,o){return ge("oneHot")},t.prototype.cumsum=function(e,n,r,o){return ge("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,o,a){return ge("nonMaxSuppression")},t.prototype.fft=function(e){return ge("fft")},t.prototype.ifft=function(e){return ge("ifft")},t.prototype.complex=function(e,n){return ge("complex")},t.prototype.real=function(e){return ge("real")},t.prototype.imag=function(e){return ge("imag")},t.prototype.cropAndResize=function(e,n,r,o,a,i){return ge("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return ge("depthToSpace")},t.prototype.split=function(e,n,r){return ge("split")},t.prototype.sparseToDense=function(e,n,r,o){return ge("sparseToDense")},t.prototype.diag=function(e){return ge("diag")},t.prototype.fill=function(e,n,r){return ge("fill")},t.prototype.onesLike=function(e){return ge("onesLike")},t.prototype.zerosLike=function(e){return ge("zerosLike")},t.prototype.linspace=function(e,n,r){return ge("linspace")},t.prototype.dispose=function(){return ge("dispose")},t})();function ge(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Hl(t,e,n,r,o,a,i){i===void 0&&(i="channelsLast");var s,u=Ey(e),l=u[0],d=u[1];if(i==="channelsLast")s=[l,d,t[3],t[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);s=[l,d,t[1],t[1]]}return ac(t,s,n,r,o,a,!1,i)}function Cy(t,e,n,r,o,a,i){i===void 0&&(i="NDHWC");var s,u,l=hC(e),d=l[0],f=l[1],p=l[2];if(i==="NDHWC")u="channelsLast",s=[d,f,p,t[4],t[4]];else{if(i!=="NCDHW")throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[d,f,p,t[1],t[1]]}return Sy(t,s,n,r,o,!1,u,a)}function ac(t,e,n,r,o,a,i,s){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],d=u[1],f=u[2],p=u[3];if(s==="channelsLast")l=t[0],d=t[1],f=t[2],p=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],p=t[1],d=t[2],f=t[3]}var m,g=e[0],y=e[1],b=e[3],C=Ey(n),S=C[0],E=C[1],_=Ey(r),T=_[0],D=_[1],I=Td(g,T),k=Td(y,D),M=(function(W,q,P,U,z,H,L,$){var J,ne,ce;if(typeof W=="number"){J={top:W,bottom:W,left:W,right:W,type:W===0?"VALID":"NUMBER"};var be=(function(Be,Le,De,$e,et){$e==null&&($e=yj(Be,Le,De));var ot=Be[0],Ie=Be[1],Me=Zh((ot-Le+2*$e)/De+1,et);K(Xn(Me),(function(){return"The output # of rows ("+Me+") must be an integer. Change the stride and/or zero pad parameters"}));var Fe=Zh((Ie-Le+2*$e)/De+1,et);return K(Xn(Fe),(function(){return"The output # of columns ("+Fe+") must be an integer. Change the stride and/or zero pad parameters"})),[Me,Fe]})([q,P],H,U,W,$);ne=be[0],ce=be[1]}else if(W==="same"){ne=Math.ceil(q/U),ce=Math.ceil(P/z);var se=Math.max(0,(ne-1)*U+H-q),oe=Math.max(0,(ce-1)*z+L-P),fe=Math.floor(se/2),me=se-fe,Oe=Math.floor(oe/2);J={top:fe,bottom:me,left:Oe,right:oe-Oe,type:"SAME"}}else{if(W!=="valid")throw Error("Unknown padding parameter: "+W);J={top:0,bottom:0,left:0,right:0,type:"VALID"},ne=Math.ceil((q-H+1)/U),ce=Math.ceil((P-L+1)/z)}return{padInfo:J,outHeight:ne,outWidth:ce}})(o,d,f,S,E,I,k,a),O=M.padInfo,F=M.outHeight,j=M.outWidth,G=i?b*p:b;return s==="channelsFirst"?m=[l,G,F,j]:s==="channelsLast"&&(m=[l,F,j,G]),{batchSize:l,dataFormat:s,inHeight:d,inWidth:f,inChannels:p,outHeight:F,outWidth:j,outChannels:G,padInfo:O,strideHeight:S,strideWidth:E,filterHeight:g,filterWidth:y,effectiveFilterHeight:I,effectiveFilterWidth:k,dilationHeight:T,dilationWidth:D,inShape:t,outShape:m,filterShape:e}}function Sy(t,e,n,r,o,a,i,s){a===void 0&&(a=!1),i===void 0&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],d=u[1],f=u[2],p=u[3],m=u[4];if(i==="channelsLast")l=t[0],d=t[1],f=t[2],p=t[3],m=t[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);l=t[0],m=t[1],d=t[2],f=t[3],p=t[4]}var g,y=e[0],b=e[1],C=e[2],S=e[4],E=hC(n),_=E[0],T=E[1],D=E[2],I=hC(r),k=I[0],M=I[1],O=I[2],F=Td(y,k),j=Td(b,M),G=Td(C,O),W=(function(L,$,J,ne,ce,be,se,oe,fe,me,Oe){var Be,Le,De,$e;if(typeof L=="number"){Be={top:L,bottom:L,left:L,right:L,front:L,back:L,type:L===0?"VALID":"NUMBER"};var et=(function(Wt,je,He,it,zt,Pt){zt==null&&(zt=yj(Wt,je,it));var Hn=Wt[0],Qt=Wt[1],gn=Wt[2],Mr=Zh((Hn-je+2*zt)/it+1,Pt);K(Xn(Mr),(function(){return"The output # of depths ("+Mr+") must be an integer. Change the stride and/or zero pad parameters"}));var qr=Zh((Qt-je+2*zt)/it+1,Pt);K(Xn(qr),(function(){return"The output # of rows ("+qr+") must be an integer. Change the stride and/or zero pad parameters"}));var nr=Zh((gn-je+2*zt)/it+1,Pt);return K(Xn(nr),(function(){return"The output # of columns ("+nr+") must be an integer. Change the stride and/or zero pad parameters"})),[Mr,qr,nr,He]})([$,J,ne,1],oe,1,ce,L,Oe);Le=et[0],De=et[1],$e=et[2]}else if(L==="same"){Le=Math.ceil($/ce),De=Math.ceil(J/be),$e=Math.ceil(ne/se);var ot=(Le-1)*ce+oe-$,Ie=(De-1)*be+fe-J,Me=($e-1)*se+me-ne,Fe=Math.floor(ot/2),Ke=ot-Fe,ct=Math.floor(Ie/2),qe=Ie-ct,Xe=Math.floor(Me/2);Be={top:ct,bottom:qe,left:Xe,right:Me-Xe,front:Fe,back:Ke,type:"SAME"}}else{if(L!=="valid")throw Error("Unknown padding parameter: "+L);Be={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Le=Math.ceil(($-oe+1)/ce),De=Math.ceil((J-fe+1)/be),$e=Math.ceil((ne-me+1)/se)}return{padInfo:Be,outDepth:Le,outHeight:De,outWidth:$e}})(o,d,f,p,_,T,D,F,j,G,s),q=W.padInfo,P=W.outDepth,U=W.outHeight,z=W.outWidth,H=a?S*m:S;return i==="channelsFirst"?g=[l,H,P,U,z]:i==="channelsLast"&&(g=[l,P,U,z,H]),{batchSize:l,dataFormat:i,inDepth:d,inHeight:f,inWidth:p,inChannels:m,outDepth:P,outHeight:U,outWidth:z,outChannels:H,padInfo:q,strideDepth:_,strideHeight:T,strideWidth:D,filterDepth:y,filterHeight:b,filterWidth:C,effectiveFilterDepth:F,effectiveFilterHeight:j,effectiveFilterWidth:G,dilationDepth:k,dilationHeight:M,dilationWidth:O,inShape:t,outShape:g,filterShape:e}}function yj(t,e,n,r){r===void 0&&(r=1);var o=Td(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function Ey(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function hC(t){return typeof t=="number"?[t,t,t]:t}function Td(t,e){return e<=1?t:t+(t-1)*(e-1)}function Zh(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Zd(t){var e=Ey(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function ro(t,e){return Zd(t)||Zd(e)}function tR(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function bj(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=Vn(t.shape),o=t.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!uye(t.dtype,e))return ae.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var i=n.real(t);return a=i.cast(e),i.dispose(),a}if(e==="int32")return n.int(t);if(e==="bool"){var s=rt(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function pC(t,e){return ae.makeTensorFromDataId(t.dataId,e,t.dtype)}function xj(t,e,n){var r=(e-t)/(n-1),o=um(n,"float32");o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return qa(o,"float32")}function mC(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function fM(t,e){return{real:t[2*e],imag:t[2*e+1]}}function abe(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function ibe(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function sbe(t,e,n){var r=(function(a,i,s){return(function(u,l,d){for(var f=0,p=u.length,m=0,g=!1;f<p;){var y=d(l,u[m=f+(p-f>>>1)]);y>0?f=m+1:(p=m,g=!y)}return g?f:-f-1})(a,i,s||ube)})(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function ube(t,e){return t>e?1:t<e?-1:0}function nR(t,e,n,r,o){return wj(t,e,n,r,o,0).selectedIndices}function rR(t,e,n,r,o,a){var i=wj(t,e,n,r,o,a);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function wj(t,e,n,r,o,a,i,s){s===void 0&&(s=!1);for(var u=Array.from(e).map((function(_,T){return{score:_,boxIndex:T,suppressBeginIndex:0}})).filter((function(_){return _.score>o})).sort(hM),l=a>0?-.5/a:0,d=[],f=[];d.length<n&&u.length>0;){var p=u.pop(),m=p.score,g=p.boxIndex,y=p.suppressBeginIndex;if(m<o)break;for(var b=!1,C=d.length-1;C>=y;--C){var S=lbe(t,g,d[C]);if(S>=r){b=!0;break}if(p.score=p.score*cbe(r,l,S),p.score<=o)break}p.suppressBeginIndex=d.length,b||(p.score===m?(d.push(g),f.push(p.score)):p.score>o&&sbe(u,p,hM))}var E=d.length;return s&&(d.fill(0,E),f.fill(0,E)),{selectedIndices:qa(d,"int32"),selectedScores:qa(f,"float32"),numValidOutputs:rt(E,"int32")}}function lbe(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),d=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(s-a)*(u-i),g=(f-l)*(p-d);if(m<=0||g<=0)return 0;var y=Math.max(a,l),b=Math.max(i,d),C=Math.min(s,f),S=Math.min(u,p),E=Math.max(C-y,0)*Math.max(S-b,0);return E/(m+g-E)}function cbe(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function hM(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function Cj(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map((function(a){o[n]=a;var i=t.slice(r,o);return r[n]+=a,i}))}function Sj(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=Ct(n,t.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(t.rank),s=0;s<i.length;s++)i[s]=a[s]%t.shape[s];var u=t.locToIndex(i);o.values[r]=t.values[u]}return o.toTensor()}function Ej(t,e,n,r,o){for(var a=e[e.length-1],i=[t.length/a,a],s=i[0],u=i[1],l=Yd(n,s*r),d=Yd("int32",s*r),f=0;f<s;f++){for(var p=f*u,m=t.subarray(p,p+u),g=[],y=0;y<m.length;y++)g.push({value:m[y],index:y});g.sort((function(_,T){return T.value-_.value}));var b=f*r,C=l.subarray(b,b+r),S=d.subarray(b,b+r);for(y=0;y<r;y++)C[y]=g[y].value,S[y]=g[y].index}var E=e.slice();return E[E.length-1]=r,[Ar(l,E,n),Ar(d,E,"int32")]}function oR(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=Ct(t,"int32"),a=Ct([n.length,t.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*t.length;a.values.set(i,s)}return a.toTensor()}var dbe=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((function(o,a){return"T"+a}));var n=[];this.variableNames.forEach((function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")}));var r=this.variableNames.map((function(o){return"v"+o})).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},fbe=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((function(o,a){return"T"+a}));var n=[];this.variableNames.forEach((function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")}));var r=this.variableNames.map((function(o){return"v"+o})).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},hbe=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function Rj(t,e){return["x","y","z","w","u","v"].slice(0,e).map((function(n){return t+"."+n}))}function ho(t,e){return e===1?[t]:Rj(t,e)}function Ur(){var t,e,n,r,o,a,i,s,u,l;return Se().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Nl(t,e,n){n===void 0&&(n="index");var r=Ho(e);return r.map((function(o,a){return"int "+t[a]+" = "+n+" / "+o+"; "+(a===r.length-1?"int "+t[a+1]+" = "+n+" - "+t[a]+" * "+o:"index -= "+t[a]+" * "+o)+";"})).join("")}function aR(t){var e=Ho(t).map((function(n){return n.toString()}));return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var _j=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function pbe(t,e,n,r){var o=[];t.forEach((function(m){var g=Qe(m.shapeInfo.logicalShape);m.shapeInfo.isUniform?o.push("uniform float "+m.name+(g>1?"["+g+"]":"")+";"):(o.push("uniform sampler2D "+m.name+";"),o.push("uniform int offset"+m.name+";"))}));var a,i,s=o.join(`
`),u=t.map((function(m){return(function(g,y,b){b===void 0&&(b=!1);var C="";C+=b?Tj(g):ud(g);var S=g.shapeInfo.logicalShape,E=y.logicalShape;return S.length<=E.length&&(C+=b?(function(_,T){var D,I=_.name,k=I.charAt(0).toUpperCase()+I.slice(1),M="get"+k+"AtOutCoords",O=_.shapeInfo.logicalShape.length,F=T.logicalShape.length,j=wu(_.shapeInfo.logicalShape,T.logicalShape),G=Sn(F),W=F-O,q=["x","y","z","w","u","v"];D=O===0?"":F<2&&j.length>=1?"coords = 0;":j.map((function(J){return"coords."+q[J+W]+" = 0;"})).join(`
`);var P="";P=F<2&&O>0?"coords":_.shapeInfo.logicalShape.map((function(J,ne){return"coords."+q[ne+W]})).join(", ");var U="return outputValue;",z=Qe(_.shapeInfo.logicalShape)===1,H=Qe(T.logicalShape)===1;if(O!==1||z||H){if(z&&!H)U=F===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(j.length){var L=O-2,$=O-1;j.indexOf(L)>-1&&j.indexOf($)>-1?U="return vec4(outputValue.x);":j.indexOf(L)>-1?U="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":j.indexOf($)>-1&&(U="return vec4(outputValue.xx, outputValue.zz);")}}else U=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+M+`() {
      `+G+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+k+"("+P+`);
      `+U+`
    }
  `})(g,y):(function(_,T){var D=_.name,I=D.charAt(0).toUpperCase()+D.slice(1),k="get"+I+"AtOutCoords",M=T.texShape,O=_.shapeInfo.texShape,F=_.shapeInfo.logicalShape.length,j=T.logicalShape.length;if(!_.shapeInfo.isUniform&&F===j&&_.shapeInfo.flatOffset==null&&br(O,M))return`
      float `+k+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var G,W=Sn(j),q=wu(_.shapeInfo.logicalShape,T.logicalShape),P=j-F,U=["x","y","z","w","u","v"];G=F===0?"":j<2&&q.length>=1?"coords = 0;":q.map((function(H){return"coords."+U[H+P]+" = 0;"})).join(`
`);var z="";return z=j<2&&F>0?"coords":_.shapeInfo.logicalShape.map((function(H,L){return"coords."+U[L+P]})).join(", "),`
    float `+k+`() {
      `+W+` coords = getOutputCoords();
      `+G+`
      return get`+I+"("+z+`);
    }
  `})(g,y)),C})(m,e,r)})).join(`
`),l=e.texShape,d=Ur(),f=(function(m){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+m.texture2D+`(textureSampler, uv).r;
    }
  `})(d),p=(function(m){return m.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+m.varyingFs+` vec2 resultUV;
    `+m.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+m.defineSpecialNaN+`
    `+m.defineSpecialInf+`
    `+m.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+mbe+`
    `+vbe+`
    `+gbe+`
  `})(d);return e.isPacked?(a=(function(m,g){switch(m.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(_,T){var D=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `})(0,g);case 2:return(function(_,T){var D=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];if(br(_,T))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var I=Math.ceil(_[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+I+`);
      int c = imod(index, `+I+`) * 2;

      return ivec2(r, c);
    }
  `})(m,g);case 3:return y=m,b=g,C=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],S=Math.ceil(y[2]/2),E=S*Math.ceil(y[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      int b = index / `+E+`;
      index -= b * `+E+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return(function(_,T){for(var D=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)],I=Math.ceil(_[_.length-1]/2),k=I*Math.ceil(_[_.length-2]/2),M=k,O="",F="b, r, c",j=2;j<_.length-1;j++)M*=_[_.length-j-1],O=`
      int b`+j+" = index / "+M+`;
      index -= b`+j+" * "+M+`;
    `+O,F="b"+j+", "+F;return`
    ivec`+_.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+O+`

      int b = index / `+k+`;
      index -= b * `+k+`;

      int r = 2 * (index / `+I+`);
      int c = imod(index, `+I+`) * 2;

      return ivec`+_.length+"("+F+`);
    }
  `})(m,g)}var y,b,C,S,E})(e.logicalShape,l),i=(function(m){return`
    void setOutput(vec4 val) {
      `+m.output+` = val;
    }
  `})(d)):(a=(function(m,g){switch(m.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(C,S){return S[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return resTexRC.x * `+S[1]+` + resTexRC.y;
    }
  `})(0,g);case 2:return(function(C,S){return br(C,S)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `:C[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:C[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = index / `+C[1]+`;
      int c = index - r * `+C[1]+`;
      return ivec2(r, c);
    }
  `})(m,g);case 3:return y=g,b=Nl(["r","c","d"],m),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      `+b+`
      return ivec3(r, c, d);
    }
  `;case 4:return(function(C,S){var E=Nl(["r","c","d","d2"],C);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      `+E+`
      return ivec4(r, c, d, d2);
    }
  `})(m,g);case 5:return(function(C,S){var E=Nl(["r","c","d","d2","d3"],C);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+S[0]+`,
                             `+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+E+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `})(m,g);case 6:return(function(C,S){var E=Nl(["r","c","d","d2","d3","d4"],C);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+E+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `})(m,g);default:throw new Error(m.length+"-D output sampling is not yet supported")}var y,b})(e.logicalShape,l),i=(function(m){return`
    void setOutput(float val) {
      `+m.output+` = vec4(val, 0, 0, 0);
    }
  `})(d)),r&&(p+=ybe),[p,f,i,s,a,u,n].join(`
`)}function ud(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return(function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var a=n.shapeInfo.texShape,i=a[0],s=a[1];if(i===1&&s===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],d=u[1],f=pl(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+l+", "+d+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(t);case 1:return(function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+Zc(n)+`
      }
    `;var a=n.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=pl(r);return s===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+i+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:i===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+i+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(t);case 2:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=n.shapeInfo.texShape;if(i!=null&&br(r,i)){var s=i[0],u=i[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var l=El(r),d=l.newShape,f=l.keptDims,p=d;if(p.length<r.length){var m=ld(n,p);return`
      `+ud(m)+`
      float `+a+`(int row, int col) {
        return `+a+"("+cd(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Zc(n)+`
      }
    `;var g=i[0],y=i[1],b=pl(o);return y===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+g+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:g===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+y+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+b+`;
    vec2 uv = uvFromFlat(`+g+", "+y+`, index);
    return sampleTexture(`+o+`, uv);
  }
`})(t);case 3:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[1]*r[2],s=r[2],u=El(r),l=u.newShape,d=u.keptDims,f=l;if(f.length<r.length){var p=ld(n,f);return`
        `+ud(p)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+cd(["row","col","depth"],d)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+i+", "+s+`, 1)));
        `+Zc(n)+`
      }
    `;var m=n.shapeInfo.texShape,g=m[0],y=m[1],b=n.shapeInfo.flatOffset;if(y===i&&b==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+y+".0, "+g+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(y===s&&b==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+y+".0, "+g+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var C=pl(o);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+i+" + col * "+s+" + depth + "+C+`;
        vec2 uv = uvFromFlat(`+g+", "+y+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `})(t);case 4:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[3],s=r[2]*i,u=r[1]*s,l=El(r),d=l.newShape,f=l.keptDims;if(d.length<r.length){var p=ld(n,d);return`
      `+ud(p)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+cd(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+i+`, 1)));
        `+Zc(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,y=g[0],b=g[1];if(b===u&&m==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(b===i&&m==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var C=pl(o);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+i+` + depth2;
      vec2 uv = uvFromFlat(`+y+", "+b+", index + "+C+`);
      return sampleTexture(`+o+`, uv);
    }
  `})(t);case 5:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[4],s=r[3]*i,u=r[2]*s,l=r[1]*u,d=El(r),f=d.newShape,p=d.keptDims;if(f.length<r.length){var m=ld(n,f);return`
      `+ud(m)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+cd(["row","col","depth","depth2","depth3"],p)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+i+`)) +
          depth3;
        `+Zc(n)+`
      }
    `;var g=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,b=y[0],C=y[1];if(C===l&&g==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+C+".0, "+b+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(C===i&&g==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+C+".0, "+b+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var S=pl(o);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+i+" + depth3 + "+S+`;
      vec2 uv = uvFromFlat(`+b+", "+C+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `})(t);case 6:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=El(r),s=i.newShape,u=i.keptDims;if(s.length<r.length){var l=ld(n,s);return`
      `+ud(l)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+cd(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var d=r[5],f=r[4]*d,p=r[3]*f,m=r[2]*p,g=r[1]*m;if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+g+", "+m+", "+p+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Zc(n)+`
      }
    `;var y=n.shapeInfo.flatOffset,b=n.shapeInfo.texShape,C=b[0],S=b[1];if(S===g&&y==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+m+", "+p+", "+f+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+C+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(S===d&&y==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+C+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var E=pl(o);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+g+" + col * "+m+" + depth * "+p+` +
          depth2 * `+f+" + depth3 * "+d+" + depth4 + "+E+`;
      vec2 uv = uvFromFlat(`+C+", "+S+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `})(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function Tj(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Ur(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return(function(o){var a=o.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=o.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=Ur();return`
    vec4 `+i+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+a+`, uv);
    }
  `})(t);case 2:return(function(o){var a=o.shapeInfo.logicalShape,i=o.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,l=u[0],d=u[1],f=Ur();if(u!=null&&br(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+l+`.0);

        return `+f.texture2D+"("+i+`, uv);
      }
    `;var p=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],m=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+m+", "+p[0]+", "+p[1]+`, row, col);
      return `+f.texture2D+"("+i+`, uv);
    }
  `})(t);case 3:return(function(o){var a=o.shapeInfo.logicalShape,i=o.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var d=a.slice(1),f=ld(o,d);return`
        `+Tj(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+cd(["b","row","col"],[1,2])+`);
        }
      `}var p=l[0],m=l[1],g=Math.ceil(a[2]/2),y=g*Math.ceil(a[1]/2),b=Ur();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+p+", "+m+", "+y+", "+g+`, b, row, col);
      return `+b.texture2D+"("+i+`, uv);
    }
  `})(t);default:return(function(o){for(var a=o.shapeInfo.logicalShape,i=a.length,s=o.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=o.shapeInfo.texShape,d=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=d[0],p=d[1],m=Math.ceil(a[i-1]/2),g=m*Math.ceil(a[i-2]/2),y="int b, int row, int col",b="b * "+g+" + (row / 2) * "+m+" + (col / 2)",C=2;C<i-1;C++)y="int b"+C+", "+y,g*=a[i-C-1],b="b"+C+" * "+g+" + "+b;var S=Ur();return`
    vec4 `+u+"("+y+`) {
      int index = `+b+`;
      int texR = index / `+p+`;
      int texC = index - texR * `+p+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+", "+f+`);
      return `+S.texture2D+"("+s+`, uv);
    }
  `})(t)}}var mbe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,vbe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,gbe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ybe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function pl(t){return"offset"+t}function Zc(t){var e=t.name,n=Qe(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Sn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function ld(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function cd(t,e){return e.map((function(n){return t[n]})).join(", ")}var bbe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,K(t.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var o=t[t.length-1],a=Math.ceil(o/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,d=Sn(l),f=ho("coords",l);if(a===1){var p=Sn(s=l+1);i=`
        `+p+" sourceLocR = "+p+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+p+" sourceLocG = "+p+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+p+" sourceLocA = "+p+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+p+" sourceLocB = "+p+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,i=`
        `+d+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+d+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+d+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+d+` sourceLocB = coords;
        --`+f[l-2]+";";var m=["x","y","z","w","u","v"].slice(0,s),g="."+m[s-1],y=m.map((function(k){return"int "+k})),b=ho("sourceLocR",s-1).concat("inIdx.r"),C=ho("sourceLocG",s-1).concat("inIdx.g"),S=ho("sourceLocB",s-1).concat("inIdx.b"),E=ho("sourceLocA",s-1).concat("inIdx.a"),_=n==="max"?"greaterThan":"lessThan",T=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+E.join()+")));",D=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+E.join()+") : 0.)",I=r?"":`
      float getBestIndicesAChannel(`+y.join()+`) {
        return getChannel(getBestIndicesA(`+m.join()+`),
                                          vec2(`+m.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+y.join()+`) {
        return getChannel(getA(`+m.join()+`),
                               vec2(`+m.slice(-2).join()+`));
      }
      `+I+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+g+", sourceLocG"+g+`,
          sourceLocB`+g+", sourceLocA"+g+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+T+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+_+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},xbe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,d=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+d+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},wbe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth,m=d-1-t.padInfo.front,g=f-1-t.padInfo.top,y=p-1-t.padInfo.left,b=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+m+", "+g+", "+y+`);
      const float avgMultiplier = float(`+b+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+p+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Cbe=function(t,e,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Ot(t,e),Ot(t,n);var i="0.0";r!=null&&(Ot(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";o!=null&&(Ot(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Sbe=function(t,e,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ot(t,e),Ot(t,n);var i="vec4(0.0)";r!=null&&(Ot(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(Ot(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Ebe="return areal * breal - aimag * bimag;",Rbe="return areal * bimag + aimag * breal;",pM=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ot(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Aw="return a + b;",Nw="return a - b;",mM="return a * b;",_be=`
if (a == b) {
  return 1.0;
};
return a / b;`,Aj="return (a < 0.) ? b * a : a;",zn=function(t,e,n){this.variableNames=["A","B"],this.outputShape=Ot(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Tbe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Nj=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,di=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ot(e,n);var o=this.outputShape.length,a="";if(r)if(o===0||Qe(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+Sn(o)+` coords = getOutputCoords();
        `,o===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var i=ho("coords",o);a+=`
            bool nextRowOutOfBounds =
              (`+i[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+i[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},Abe=(function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(a,"maxVal")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t})(),Nbe=(function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(a,"maxVal")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t})(),Dbe=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},kbe=function(t){this.outputShape=[],this.outputShape=Jd(t,1),this.variableNames=t.map((function(s,u){return"T"+u}));var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var o=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=e.length,i=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},Ibe=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Jd(t,e);var n=this.outputShape,r=n.length,o=Sn(r),a=ho("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((function(b,C){return"T"+C}));var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=i[e],d=i.slice(-2),f=i.join(),p="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+d.join()+`));
        }`;for(u=1;u<s.length;u++){var m=s[u-1];p+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+og(i,l,m)+`),
            vec2(`+og(d,l,m)+`));
        }`}var g=s.length,y=s[s.length-1];p+=`
        return getChannel(
          getT`+g+"("+og(i,l,y)+`),
          vec2(`+og(d,l,y)+"));",this.userCode=`
      float getValue(`+i.map((function(b){return"int "+b}))+`) {
        `+p+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+n[r-2]+` &&
            `+a[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function og(t,e,n){var r=t.indexOf(e);return t.map((function(o,a){return a===r?o+" - "+n:o})).join()}var Mbe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Obe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=t.dataFormat==="channelsLast",i=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=a?1:2,l=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Pbe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,a=t.padInfo.top,i=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+o+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+a+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Fbe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Bbe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},Lbe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},vM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,a=t.padInfo.left,i=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,d=t.filterHeight,f=t.filterWidth,p=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g=t.dataFormat==="channelsLast",y=g?1:2,b=g?2:3,C=g?3:1,S="",E="";n&&(S=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,E="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+i+", "+s+`);
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+C+`];

        ivec2 xRCCorner =
            ivec2(coords[`+y+"], coords["+b+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+p+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+g+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(m===1)+`) {

              if (`+g+`) {
                dotProd +=
                    getX(batch, xR, xC, `+p+`) *
                    getW(wR, wC, `+p+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+p+`, xR, xC) *
                    getW(wR, wC, `+p+`, d2);
              }

            } else if (`+(m===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+p+`, d2),
                getW(wR, wC, `+p+` + 1, d2)
              );

              if (`+g+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+p+`),
                  getX(batch, xR, xC, `+p+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+p+`, xR, xC),
                  getX(batch, `+p+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(m===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+p+`, d2),
                getW(wR, wC, `+p+` + 1, d2),
                getW(wR, wC, `+p+` + 2, d2)
              );

              if (`+g+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+p+`),
                  getX(batch, xR, xC, `+p+` + 1),
                  getX(batch, xR, xC, `+p+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+p+`, xR, xC),
                  getX(batch, `+p+` + 1, xR, xC),
                  getX(batch, `+p+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+_+`
        `+E+`
        setOutput(result);
      }
    `},jbe=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,m=4*Math.floor(t.inChannels/4),g=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+a+", "+i+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+p+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+m+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(g===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+m+`) *
                  getW(wF, wR, wC, `+m+`, d2);
              } else if (`+(g===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(g===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1),
                  getX(batch, xF, xR, xC, `+m+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2),
                  getW(wF, wR, wC, `+m+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},gM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,a=t.inWidth,i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,d=t.dilationHeight,f=t.dilationWidth,p=t.filterHeight,m=t.filterWidth,g=t.outChannels/t.inChannels,y="",b="";n&&(y=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,b="result = activation(result);");var C=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+y+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+g+`;
        int q = d2 - d1 * `+g+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+p+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+C+`
        `+b+`
        setOutput(result);
      }
    `},yM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,a=t.inWidth,i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,d=t.dilationHeight,f=t.dilationWidth,p=t.filterHeight,m=t.filterWidth,g=m,y="int xR; int xC; int xCOffset;",b=0;b<p;b++)for(var C=0;C<m;C++)y+=`
          vec4 xTexelR`+b+"C"+2*C+` = vec4(0.);
          vec4 wR`+b+"C"+C+` = vec4(0.);
          vec4 xR`+b+"C"+C+" = vec4(0.);";for(b=0;b<p;b++)for(var S=0;S<g;S++){if(y+=`
          xR = xRCorner + `+b*d+`;
          xC = xCCorner + `+(C=2*S)*f+`;
        `,l===1){if(C<m&&(y+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+b+"C"+C+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+b+"C"+C+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+b+"C"+C+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+b+"C"+C+" = vec4(previous.zw, xTexelR"+b+"C"+C+`.xy);
                } else {
                  xR`+b+"C"+C+" = vec4(0, 0, xTexelR"+b+"C"+C+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+b+"C"+C+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+C+` = vec4(0.);
                }

                xR`+b+"C"+C+" = xTexelR"+b+"C"+C+`;
              `,C+1<m)){var E=s%2==0?LL(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(y+=`
                  xCOffset = xC + `+s%2+" + "+E+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+b+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(y+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+b+"C"+C+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+b+"C"+C+` = vec4(0.);
                    }
                  `),y+=`
                  xR`+b+"C"+(C+1)+` = vec4(
                    xTexelR`+b+"C"+C+".zw, xTexelR"+b+"C"+(C+2)+`.xy);
                `):y+=`
                  xCOffset = xC + `+E+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+b+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+b+"C"+(C+1)+" = xTexelR"+b+"C"+(C+2)+`;
                `}}else C<m&&(y+=`
              if(xR >= 0 && xR < `+o+`) {
            `,s%2==1?(y+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+b+"C"+C+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+C+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+b+"C"+(C+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+b+"C"+(C+2)+` = vec4(0.);
                }

                xR`+b+"C"+C+` = vec4(
                  xTexelR`+b+"C"+C+".zw, xTexelR"+b+"C"+(C+2)+`.zw);
              `,C+1<m&&(y+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+b+"C"+(C+1)+" = vec4(xTexelR"+b+"C"+(C+2)+`.xy, final.xy);
                `)):(y+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+b+"C"+C+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+C+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+b+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+(C+2)+` = vec4(0.);
                }

                xR`+b+"C"+C+` = vec4(
                  xTexelR`+b+"C"+C+".xy, xTexelR"+b+"C"+(C+2)+`.xy);
              `,C+1<m&&(y+=`
                  xR`+b+"C"+(C+1)+` = vec4(
                    xTexelR`+b+"C"+C+".zw, xTexelR"+b+"C"+(C+2)+`.zw);
                `)),y+="}");C<m&&(y+=`
            vec4 wTexelR`+b+"C"+C+" = getW("+b+", "+C+`, d1, q);
            wR`+b+"C"+C+" = vec4(wTexelR"+b+"C"+C+".xz, wTexelR"+b+"C"+C+`.xz);
          `,C+1<m&&(y+=`
              vec4 wTexelR`+b+"C"+(C+1)+" = getW("+b+", "+(C+1)+`, d1, q);
              wR`+b+"C"+(C+1)+` =
                vec4(wTexelR`+b+"C"+(C+1)+".xz, wTexelR"+b+"C"+(C+1)+".xz);"))}for(b=0;b<p;b++)for(C=0;C<m;C++)y+="dotProd += xR"+b+"C"+C+" * wR"+b+"C"+C+";";var _="",T="";n&&(_=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,T="result = activation(result);");var D=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+y+`

        vec4 result = dotProd;
        `+D+`
        `+T+`
        setOutput(result);
      }
    `},zbe=function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],i=t[1],s=t[2],u=t[3],l=e[0],d=n[0],f=n[1];this.outputShape=[l,d,f,u];var p=r==="bilinear"?1:0,m=[i-1+".0",s-1+".0"],g=m[0],y=m[1],b=d>1?[""+(i-1)/(d-1),"(y2-y1) * height_ratio","y1*"+g+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+g],C=b[0],S=b[1],E=b[2],_=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+y+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+y],T=_[0],D=_[1],I=_[2];this.userCode=`
      const float height_ratio = float(`+C+`);
      const float width_ratio = float(`+T+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+S+`;
        float width_scale = `+D+`;

        float in_y = `+E+`;
        if( in_y < 0.0 || in_y > `+g+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+I+`;
        if( in_x < 0.0 || in_x > `+y+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+p+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},Ube=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],a=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Sn(r)+` coords = getOutputCoords();
        int end = `+bM(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+bM(r,"coords")+` = idx;
          val += getX(`+(function(i,s){if(i===1)return""+s;if(i===2)return s+".x, "+s+".y";if(i===3)return s+".x, "+s+".y, "+s+".z";if(i===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+i+" is not yet supported")})(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function bM(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var Wbe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Sp.DENSE;var e=Jh(t),n=Ur();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Nl(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},Vbe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Sp.DENSE;var e=Jh(t),n=Ur();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Nl(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},Hbe=(function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t})(),Gbe=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},$be=function(t){this.variableNames=["A"],this.outTexUsage=jo.DOWNLOAD;var e=Ur();this.outputShape=t,this.userCode=`
      `+_j+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},qbe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=jo.DOWNLOAD;var e=Ur();this.outputShape=t,this.userCode=`
      `+_j+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},Xbe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=Ur(),o=e[0],a=e[1];this.outputShape=t;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`
      `+aR(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+i+`, 0., 0., 0.);
      }
    `},Kbe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Ur(),o=e[0],a=e[1];this.outputShape=t;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var d=2*u+l;i+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+aR(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+i+`

        `+r.output+" = "+s+`;
      }
    `},Ybe="return real * expR - imag * expI;",Qbe="return real * expI + imag * expR;",xM=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Jbe=(function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,e)}},t})(),Zbe=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=Sn(this.rank),a=(function(i,s){var u=i.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],f=0;f<i.length;f++)f===s?d.push("int(getIndices("+l[f]+"))"):d.push(""+l[f]);return d.join()})(t,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},exe=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Sn(e.length),o=Sn(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function txe(t,e){var n=Ur();return Eye(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function nxe(t,e){return Nye(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function rxe(t,e){return Dye(t,e,new Uint16Array([0,1,2,2,1,3]))}function cm(t,e,n,r,o,a,i){Iye(n,r);var s=kye(t,e),u=t.TEXTURE_2D;return nt(t,e,(function(){return t.bindTexture(u,s)})),nt(t,e,(function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)})),nt(t,e,(function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)})),nt(t,e,(function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)})),nt(t,e,(function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)})),nt(t,e,(function(){return t.texImage2D(u,0,o,n,r,0,a,i,null)})),nt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)})),s}function oxe(t,e,n,r,o){var a=z0(n,r);return cm(t,e,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function axe(t,e,n,r,o){var a=z0(n,r);return cm(t,e,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function ixe(t,e,n,r,o){var a=z0(n,r);return cm(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function sxe(t,e,n,r,o){var a=lm(n,r);return cm(t,e,a[0],a[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function uxe(t,e,n,r,o){var a=lm(n,r);return cm(t,e,a[0],a[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function lxe(t,e,n,r){return nt(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),sM(t,e,n,"clipSpacePos",r,3,20,0)&&sM(t,e,n,"uv",r,2,20,12)}function cxe(t,e,n,r,o,a,i){var s,u,l;nt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)})),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*o*4),u=t.FLOAT,l=i.internalFormatPackedFloat),s.set(a),nt(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,o,0,t.RGBA,u,s)})),nt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function dxe(t,e,n,r){nt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)})),r.data instanceof Uint8Array?nt(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)})):nt(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)})),nt(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function fxe(t,e,n,r,o){var a=t.createBuffer();nt(t,e,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)}));var i=16*n*r;return nt(t,e,(function(){return t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)})),nt(t,e,(function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)})),nt(t,e,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)})),a}function hxe(t,e,n){var r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function pxe(t,e,n,r,o){var a=z0(n,r),i=a[0],s=a[1],u=new Uint8Array(n*r*4);return nt(t,e,(function(){return t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function mxe(t,e,n,r,o,a,i,s){var u=t,l=new Float32Array((function(d,f){var p=lm(d,f);return p[0]*p[1]*4})(a,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function vxe(t,e,n,r){var o=new Float32Array(n*r*4);return nt(t,e,(function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,o)})),o}var gxe=(function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Se().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,bye(n,e)):this.gl=Li(n);var r="WEBGL_color_buffer_float";if(Se().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=eg(this.gl,this.debug,"OES_texture_float"),ya(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=eg(this.gl,this.debug,"OES_texture_half_float");else if(Se().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ya(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=eg(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Se().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ya(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ya(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=nxe(this.gl,this.debug),this.indexBuffer=rxe(this.gl,this.debug),this.framebuffer=Mye(this.gl,this.debug),this.textureConfig=KE(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return Se().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;nt(n,this.debug,(function(){return n.finish()})),nt(n,this.debug,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)})),nt(n,this.debug,(function(){return n.deleteFramebuffer(e.framebuffer)})),nt(n,this.debug,(function(){return n.bindBuffer(n.ARRAY_BUFFER,null)})),nt(n,this.debug,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)})),nt(n,this.debug,(function(){return n.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),oxe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),axe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),ixe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),dxe(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,o){this.throwIfDisposed(),cxe(this.gl,this.debug,e,n,r,o,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),uxe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),sxe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(uM(this.gl,this.debug,this.framebuffer),this.outputTexture=null),nt(this.gl,this.debug,(function(){return n.gl.deleteTexture(e)}))},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,(function(){return pxe(o.gl,o.debug,n,r,o.textureConfig)}))},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,o,a,i){return mxe(this.gl,e,0,0,0,a,i,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return hxe(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var o=fxe(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,o=this;if(Se().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=i}else Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,(function(){return vxe(o.gl,o.debug,n,r)}))},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=Rye(n,this.debug,e),o=txe(n,this.debug),a=Tye(n,this.debug);return nt(n,this.debug,(function(){return n.attachShader(a,o)})),nt(n,this.debug,(function(){return n.attachShader(a,r)})),Aye(n,this.debug,a),this.debug&&Ew(n,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=lxe(n,this.debug,this.program,this.vertexBuffer)),a},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&nt(this.gl,this.debug,(function(){return n.gl.deleteProgram(e)}))},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Ew(this.gl,this.debug,this.program),nt(this.gl,this.debug,(function(){return n.gl.useProgram(e)}))},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?Pye(this.gl,this.debug,e,n):Fye(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),nt(this.gl,this.debug,(function(){return r.gl.getAttribLocation(e,n)}))},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Bye(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var o=lm(n,r),a=o[0],i=o[1];this.setOutputMatrixTextureDriver(e,a,i)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&Ew(this.gl,this.debug,this.program),tg(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),nt(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),nt(this.gl,this.debug,(function(){return e.gl.finish()}))},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=eg(this.gl,this.debug,Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),a=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,a),a},t.prototype.endQuery=function(){if(Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return Je(this,void 0,void 0,(function(){var n=this;return Ze(this,(function(r){switch(r.label){case 0:return[4,nM((function(){return n.disposed||n.isQueryAvailable(e,Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return r.sent(),[2,this.getQueryTime(e,Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(e,o.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise((function(r){n.addItemToPoll((function(){return e.isFencePassed()}),(function(){return r()}))}))},t.prototype.pollItems=function(){for(var e=(function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1})(this.itemsToPoll.map((function(r){return r.isDoneFn}))),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||nM((function(){return r.pollItems(),r.itemsToPoll.length===0}))},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Rw(this.gl,this.debug,e,this.framebuffer),this.debug&&tg(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Rw(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&tg(this.gl)):uM(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var o=this.gl;Rw(o,this.debug,e,this.framebuffer),this.debug&&tg(o),this.outputTexture=e,nt(o,this.debug,(function(){return o.viewport(0,0,n,r)})),nt(o,this.debug,(function(){return o.scissor(0,0,n,r)}))},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,o){var a=this;this.throwIfDisposed(),nt(this.gl,this.debug,(function(){return a.gl.scissor(e,n,r,o)}))},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t})();function wM(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach((function(n,r){var o=n.logicalShape,a=e[r],i=a.shape;if(!br(o,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+i+" must match");if(!n.isUniform||!a.isUniform){var s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!br(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}}))}var yxe=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,d=n.dilationHeight,f=n.dataFormat,p=s.left,m=s.top,g=o*r,y=Ur(),b=f==="channelsLast",C=b?0:1,S=b?1:2,E="",_=0;_<=1;_++)for(var T=0;T<=1;T++)E+=`
          blockIndex = rc.y + `+T+`;
          pos = rc.x + `+_+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+i+" - "+m+`;
            d0 = offsetY + `+d+" * (pos / "+g+`);

            if(d0 < `+e[C]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+p+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+g+".) / "+o+`.));

              if(d1 < `+e[S]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+b+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*_+T)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*_+T)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+E+`

        `+y.output+` = result;
      }
    `},bxe=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},xxe=function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},wxe=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+i+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+i+"; j <= "+i+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},Cxe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,a=t.effectiveFilterWidth,i=o-1-t.padInfo.top,s=a-1-t.padInfo.left,u=o*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},Sxe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.dilationDepth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=s-1-t.padInfo.front,f=u-1-t.padInfo.top,p=l-1-t.padInfo.left,m=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+f+", "+p+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+i+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+m+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Dw=function(t,e,n,r,o,a,i){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),a===void 0&&(a=null),i===void 0&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";a&&(m=i?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+p[0]+`);
          result += (`+f[1]+" * "+p[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+y+`

        `+g+`

        setOutput(result);
      }
    `},Exe=(function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t})(),Rxe=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},_xe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=ho("rc",e),r=Sn(e),o=(function(s,u,l){if(s===1)return"rc > "+u[0];for(var d="",f=s-2;f<s;f++)d+=l[f]+" >= "+u[f],f<s-1&&(d+="||");return d})(e,t,n),a=(function(s,u,l,d){if(s===1)return"";var f=d.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `})(e,t[t.length-1],t[t.length-2],n),i=(function(s,u){var l=s.length,d=(function(f,p){for(var m=[],g=0;g<=1;g++)for(var y=0;y<=1;y++){for(var b=(g===0?"r":"rp1")+", "+(y===0?"c":"cp1"),C=2;C<f;C++)b=p[p.length-1-C]+","+b;m.push(b)}return m})(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"})(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+i+`));
          }
        }
      `}},Txe=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map((function(u,l){return u[0]+t[l]+u[1]}));var r=t.length,o=Sn(r),a=e.map((function(u){return u[0]})).join(","),i=e.map((function(u,l){return u[0]+t[l]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+a+`);
      `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},Axe=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((function(b,C){return b[0]+t[C]+b[1]}));for(var r=t.length,o=Sn(r),a=e.map((function(b){return b[0]})).join(","),i=e.map((function(b,C){return b[0]+t[C]})).join(","),s=ho("rc",r),u=ho("source",r),l=s[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],p=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",g=0,y=r===1?2:4;g<y;g++)m+=`
        `+f[g]+`
        if (`+p+`) {
          result[`+g+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+g+"] = getChannel(getX("+u.join()+"), "+d+`);
        }
      `;m+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+a+`);
      const `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+m+`
        setOutput(result);
      }
    `},ep=function(t,e,n,r,o){if(r===void 0&&(r=!1),o===void 0&&(o=!1),this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var a=t.filterWidth,i=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var g=e==="avg",y="((batch  * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + d",b="(xR * "+t.inWidth+" + xC) * "+t.inChannels+" + d",C="0.0";if(g||(C="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+s+`);
        const ivec2 pads = ivec2(`+p+", "+m+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+d+`;
              wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = `+(r?o?y:b:"wR * "+f+" + wC")+`;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var S=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(S="avgValue / count");var E=4*Math.floor(a/4),_=a%4,T=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+s+`);
      const ivec2 pads = ivec2(`+p+", "+m+`);
      const float initializationValue = `+C+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+C+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+d+`;
            wR += `+u+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+E+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+T+`
          }

          int xC = xCCorner + `+E+`;
          if (`+(_===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+T+`
          } else if (`+(_===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+T+`
          } else if (`+(_===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+T+`
          }
        }
        setOutput(`+S+`);
      }
    `}},kw=function(t,e,n,r,o){if(r===void 0&&(r=!1),o===void 0&&(o=!1),this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var a=t.filterWidth,i=t.strideDepth,s=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,p=t.effectiveFilterDepth,m=t.effectiveFilterHeight,g=t.effectiveFilterWidth,y=t.padInfo.front,b=t.padInfo.top,C=t.padInfo.left;this.outputShape=t.outShape;var S=e==="avg",E="0.0";if(S||(E="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+s+", "+u+`);
        const ivec3 pads = ivec3(`+y+", "+b+", "+C+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+p+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+m+`;
                wR += `+d+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+g+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = `+(r?o?"(((batch * "+t.inDepth+" + xD) * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"((xD * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"wD * "+m+" * "+g+` +
                      wR * `+g+" + wC")+`;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var _=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(_="avgValue / count");var T=4*Math.floor(a/4),D=a%4,I=`
      if (`+S+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+s+", "+u+`);
      const ivec3 pads = ivec3(`+y+", "+b+", "+C+`);
      const float initializationValue = `+E+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+E+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+p+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+m+`;
            wR += `+d+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+T+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+I+`
            }

            int xC = xCCorner + `+T+`;
            if (`+(D===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+I+`
            } else if (`+(D===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+I+`
            } else if (`+(D===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+I+`
            }
          }
          setOutput(`+_+`);
        }
      }
    `}},Nxe=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";e==="prod"?i="1.0":e==="min"?(i="1.0 / 1e-20",s="min"):e==="max"&&(i="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),d=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,p="vec4";e==="all"?(i="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):e==="any"&&(i="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");var m="";o%n>0&&(m=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+m+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(d===1)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(d===2)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(d===3)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},Dxe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Nl(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+aR(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},kxe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/d[0],p=l[1]/d[1],m=1/f,g=1/p,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+g+`);

        const int winHeight = int(`+y+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},Ixe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},Mxe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},Oxe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/d[0],p=l[1]/d[1],m=1/f,g=1/p,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+g+`);

        const int winHeight = int(`+y+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},Pxe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},Fxe=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map((function(a,i){return(function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"})(i)})).join(","),o=Sn(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},Bxe=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=ho("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Sn(n);function s(u){var l=t.map((function(d,f){return(function(p,m){return e.indexOf(p)!==-1&&t[p]!==1?t[p]+" - "+m[p]+" - 1":""+m[p]})(f,u)}));return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(u){return s(u)})(r.slice())+`;
          if(`+o+`){
            result.g = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)})(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+(function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            if(`+o+`) {
              result.a = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},CM=function(t,e,n,r,o,a,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=Sn(o.length),u=Sn(a.length),l="";n===1?l="i":n===2&&(l="i, j");var d="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var p="getUpdates("+f+")",m=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+m+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+p+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},Lxe=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=t.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var f="";o%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},jxe=function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&i.push(""+a[u]);r=i.join(),o=s.join()}var l=Sn(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},zxe=(function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=Sn(this.rank),o="uniform int start["+this.rank+"];",a=(function(i){if(i===1)return"sourceLoc";if(i<=6)return Iw.slice(0,i).map((function(s){return"sourceLoc."+s})).join(",");throw Error("Slicing for rank "+i+" is not yet supported")})(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map((function(i,s){return"sourceLoc."+Iw[s]+" = start["+s+"] + coords."+Iw[s]+";"})).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+a+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t})(),Iw=["x","y","z","w","u","v"],Uxe=(function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=Sn(this.rank),r=ho("coords",this.rank),o=ho("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",i="getChannel(getSource("+o.join()+"), "+a+")",s=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+i+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map((function(d,f){return"start["+f+"]"})).join()+");":e.map((function(d,f){return o[f]+" = "+r[f]+" + start["+f+"];"})).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t})(),Wxe=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Sn(n.length),a=Sn(n.length),i="";if(r===1)i="coords * strides + begin";else{var s=0;i=n.map((function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"})).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+t+`);
      `+o+" strides = "+o+"("+e+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+i+`));
      }
    `},Vxe=(function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var o,a=SM(n,r),i=EM(e,a,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[i].shift();return this.usedTextures[i].push(s),s}return this.numUsedTextures++,this.log(),a===Po.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Po.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Po.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Po.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Po.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),o},t.prototype.releaseTexture=function(e,n,r,o){if(this.freeTextures!=null){var a=EM(n,SM(r,o),o);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],s=i.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach((function(r){e.gpgpu.deleteMatrixTexture(r)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(o){e.gpgpu.deleteMatrixTexture(o)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t})();function SM(t,e){if(t===jo.UPLOAD)return Po.PACKED_2X2_FLOAT32;if(t===jo.RENDER||t==null)return(function(n){return Se().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Po.PACKED_2X2_FLOAT32:Po.UNPACKED_FLOAT32:n?Po.PACKED_2X2_FLOAT16:Po.UNPACKED_FLOAT16})(e);if(t===jo.DOWNLOAD||t===jo.PIXELS)return Po.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function EM(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var Hxe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=Sn(this.rank),a=(function(i){var s=i.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+i[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],d=0;d<i.length;d++)l.push("imod("+u[d]+", "+i[d]+")");return l.join()})(t);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},iR=1.7580993408473768,sR=1.0507009873554805,Rt=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ja="if (isnan(x)) return x;",Gxe="return x;",RM="return abs(x);",Dj=Ja+`
  return (x < 0.0) ? 0.0 : x;
`,kj=Ja+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ij="return (x >= 0.0) ? x : (exp(x) - 1.0);",$xe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+iR+`;
  float scale = `+sR+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,_M="return -x;",TM="return ceil(x);",AM="return floor(x);",NM="return exp(x);",DM="return exp(x) - 1.0;",qxe=Ja+`
  return sin(x);
`,Xxe=Ja+`
  return cos(x);
`,Kxe=Ja+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Yxe=Ja+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Qxe=Ja+`
  return atan(x);
`,Jxe=Ja+"return log(x + sqrt(x * x + 1.0));",Zxe=Ja+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,e1e=Ja+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,ag="return x;",t1e="return x;",Mj=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Oj=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Pj=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Vh=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},n1e=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=ho("rc",e),r=Sn(e),o=(function(s,u){if(s===1)return"rc";for(var l="",d=0;d<s;d++)l+=u[d],d<s-1&&(l+=",");return l})(e,n),a=n.slice(-2),i=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `},ig={};function sg(t,e){if(e===void 0&&(e=!1),t==="linear")return e?t1e:Gxe;if(t==="relu")return e?Mj:Dj;if(t==="elu")return e?Pj:Ij;if(t==="relu6")return e?Oj:kj;if(t==="prelu")return e?Nj:Aj;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var r1e=600,o1e=(function(t){function e(n){var r,o=t.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!Se().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var a=Li(Se().getNumber("WEBGL_VERSION"));o.binaryCache=((r=Se().getNumber("WEBGL_VERSION"))in ig||(ig[r]={}),ig[r]),o.gpgpu=new gxe(a),o.canvas=a.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new Vxe(o.gpgpu),o.numMBBeforeWarning=Se().global.screen==null?1024:Se().global.screen.height*Se().global.screen.width*window.devicePixelRatio*r1e/1024/1024,o.texData=new vj(o,ae),o}return Qa(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,o){if(Se().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:o,values:n,usage:jo.UPLOAD}),a},e.prototype.move=function(n,r,o,a){if(Se().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:a,values:r,usage:jo.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),o=r.values,a=r.dtype,i=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var d=void 0;d=l?new Vh(u,ag):new Rt(u,ag);var f=this.runWebGLProgram(d,[{dataId:n,shape:u,dtype:a}],a),p=this.readSync(f.dataId);return this.disposeData(f.dataId),p}if(o!=null)return this.convertAndCacheOnCPU(n);if(a==="string")return o;var m,g,y=this.activeTimers!=null;return y&&(m=hi()),a==="complex64"?g=mC(i.real.dataSync(),i.imag.dataSync()):g=this.getValuesFromTexture(n),y&&(this.downloadWaitMs+=hi()-m),this.convertAndCacheOnCPU(n,g)},e.prototype.read=function(n){return Je(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,d,f,p,m,g,y,b,C,S,E,_,T,D,I,k;return Ze(this,(function(M){switch(M.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise((function(O){return r.push(O)}))];if(o=this.texData.get(n),a=o.values,i=o.shape,s=o.slice,u=o.dtype,l=o.complexTensors,d=o.isPacked,s!=null)return f=void 0,f=d?new Vh(i,ag):new Rt(i,ag),p=this.runWebGLProgram(f,[{dataId:n,shape:i,dtype:u}],u),m=this.read(p.dataId),this.disposeData(p.dataId),[2,m];if(a!=null)return[2,this.convertAndCacheOnCPU(n)];if(!Se().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Se().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return g=null,u!=="complex64"&&Se().get("WEBGL_BUFFER_SUPPORTED")&&(y=this.decode(n),b=this.texData.get(y.dataId),g=(k=this.gpgpu).createBufferFromTexture.apply(k,[b.texture].concat(Jh(i)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:M.sent(),M.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return S=M.sent(),E=S[0],_=S[1],C=mC(E,_),[3,5];case 4:g==null?C=this.getValuesFromTexture(n):(T=Qe(i),C=this.gpgpu.downloadFloat32MatrixFromBuffer(g,T)),M.label=5;case 5:return y!=null&&this.disposeData(y.dataId),D=this.convertAndCacheOnCPU(n,C),I=this.pendingRead.get(n),this.pendingRead.delete(n),I.forEach((function(O){return O(D)})),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,D]}}))}))},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var o=n[r];if(!Cye(o))throw Se().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,o=this.texData.get(n),a=o.shape,i=o.dtype,s=o.isPacked,u=Qe(a);if(Se().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),d=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(Jh(a))).subarray(0,u);return this.disposeData(l.dataId),f}var p=Se().getBool("WEBGL_PACK")&&s===!0,m=p?_w(a):a,g=p?new qbe(m):new $be(m),y=this.runWebGLProgram(g,[{shape:m,dtype:i,dataId:n}],"float32"),b=this.texData.get(y.dataId),C=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(b.texture,b.texShape[0],b.texShape[1]).subarray(0,u);return this.disposeData(y.dataId),C},e.prototype.time=function(n){return Je(this,void 0,void 0,(function(){var r,o,a,i,s,u,l;return Ze(this,(function(d){switch(d.label){case 0:return r=this.activeTimers,o=[],a=!1,this.programTimersStack==null?(this.programTimersStack=o,a=!0):this.activeTimers.push(o),this.activeTimers=o,n(),i=Kd(this.activeTimers.map((function(f){return f.query}))).filter((function(f){return f!=null})),s=Kd(this.activeTimers.map((function(f){return f.name}))).filter((function(f){return f!=null})),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return l=d.sent(),u.kernelMs=rye(l),u.getExtraProfileInfo=function(){return l.map((function(f,p){return{name:s[p],ms:f}})).map((function(f){return f.name+": "+f.ms})).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:hi(),endMs:null}},e.prototype.endTimer=function(n){return Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=hi(),n)},e.prototype.getQueryTime=function(n){return Je(this,void 0,void 0,(function(){var r;return Ze(this,(function(o){return Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]}))}))},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),o=r.texture,a=r.dtype,i=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,d=l&&l.origDataId||n,f=this.dataRefCount.get(d);f>1?this.dataRefCount.set(d,f-1):(this.dataRefCount.delete(d),o!=null&&(this.numBytesInGPU-=this.computeBytes(i,a),this.textureManager.releaseTexture(o,i,s,u)));var p=this.texData.get(n);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return Se().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ae.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every((function(a){return o.texData.get(a.dataId).texture==null&&Qe(a.shape)<r}))},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:ae.keep(n.clone()),imag:ae.keep(r.clone())},o},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,o);if(Qe(o)===0)return Ar([],o,n.dtype);var a=this.texData.get(n.dataId).isPacked,i=pj(n.shape,r,o);if(a||!i){var s=Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Uxe(o):new zxe(o),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,o)},e.prototype.shallowSlice=function(n,r,o){var a=this.texData.get(n.dataId),i=this.makeOutput(o,n.dtype),s=this.texData.get(i.dataId);Object.assign(s,a),s.shape=o,s.dtype=n.dtype;var u=mj(r,n.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),i},e.prototype.stridedSlice=function(n,r,o,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,o,a);var i=eR(r,o,a);if(i.some((function(u){return u===0})))return Ar([],i);var s=new Wxe(r,a,i);return this.compileAndRun(s,[n])},e.prototype.reverse=function(n,r){var o=Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Bxe(n.shape,r):new Fxe(n.shape,r);return this.compileAndRun(o,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var o=n.map((function(m){return pa(m)})),a=n.map((function(m){return yi(m)}));return _r(this.concat(o,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>Se().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(n.length/2),s=this.concat(n.slice(0,i),r),u=this.concat(n.slice(i),r);return this.concat([s,u],r)}if(Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new Ibe(n.map((function(m){return m.shape})),r);return this.compileAndRun(l,n)}var d=Jd(n.map((function(m){return m.shape})),r),f=n.map((function(m){return m.as2D(-1,Qe(m.shape.slice(r)))})),p=new kbe(f.map((function(m){return m.shape})));return this.compileAndRun(p,f).reshape(d)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,_M,n.dtype);var r=new Rt(n.shape,_M);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,o,a){var i=o?n.shape[2]:n.shape[1],s=a?r.shape[1]:r.shape[2],u=o?n.shape[1]:n.shape[2],l=n.shape[0];if((i===1||s===1)&&u>1e3){o&&(n=Pa(n,[0,2,1])),a&&(r=Pa(r,[0,2,1]));var d=s===1?n:n.as3D(l,u,1),f=s===1?2:1,p=s===1?r.as3D(l,1,u):r;return this.multiply(d,p).sum(f,!0)}var m=Tr(n.dtype,r.dtype),g=new Dw(n.shape,[l,i,s],o,a);return this.compileAndRun(g,[n,r],m)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,a=n.transposeA,i=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,d=a?r.shape[2]:r.shape[1],f=i?o.shape[1]:o.shape[2],p=r.shape[0],m=Tr(r.dtype,o.dtype),g=s!=null,y=l!=null,b=u?sg(u,!0):null,C=new Dw(r.shape,[p,d,f],a,i,g,b,y),S=[r,o];return s&&S.push(s),l&&S.push(l),this.compileAndRun(C,S,m)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),a=this.texData.get(r.dataId),i=new pM(Ebe,n.shape,r.shape),s=new pM(Rbe,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],l=this.compileAndRun(i,u),d=this.compileAndRun(s,u),f=this.complex(l,d);return l.dispose(),d.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,mM,n.dtype);var p=new zn(mM,n.shape,r.shape);return this.compileAndRun(p,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,o,a,i,s){var u=[n,r,o],l=null;s!=null&&(l=s.shape,u.push(s));var d=null;if(i!=null&&(d=i.shape,u.push(i)),Se().getBool("WEBGL_PACK_NORMALIZATION")){var f=new Sbe(n.shape,r.shape,o.shape,l,d,a);return this.compileAndRun(f,u)}var p=new Cbe(n.shape,r.shape,o.shape,l,d,a);return this.compileAndRun(p,u)},e.prototype.localResponseNormalization4D=function(n,r,o,a,i){var s=Se().getBool("WEBGL_PACK_NORMALIZATION")?new wxe(n.shape,r,o,a,i):new bxe(n.shape,r,o,a,i);return this.compileAndRun(s,[n])},e.prototype.LRNGrad=function(n,r,o,a,i,s,u){var l=new xxe(r.shape,a,i,s,u);return this.compileAndRun(l,[r,o,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var o=this.readSync(n.dataId).map((function(i){return dy(i)}));return Sj(Ct(n.shape,n.dtype,o),r)}var a=new Hxe(n.shape,r);return this.compileAndRun(a,[n])},e.prototype.pad=function(n,r,o){var a=Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Axe(n.shape,r,o):new Txe(n.shape,r,o);return this.compileAndRun(a,[n])},e.prototype.gather=function(n,r,o){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,o);var a=new Zbe(n.shape,r.size,o);return this.compileAndRun(a,[n,r])},e.prototype.batchToSpaceND=function(n,r,o){K(n.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var a=r.reduce((function(f,p){return f*p})),i=gy(n.shape,r,a),s=yy(i.length,r.length),u=by(n.shape,r,a),l=tj(o,r.length),d=nj(u,o,r.length);return Pa(n.reshape(i),s).reshape(u).slice(l,d)},e.prototype.spaceToBatchND=function(n,r,o){K(n.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var a=r.reduce((function(p,m){return p*m})),i=[[0,0]];i.push.apply(i,o);for(var s=1+r.length;s<n.shape.length;++s)i.push([0,0]);var u=n.pad(i),l=gy(u.shape,r,a,!1),d=yy(l.length,r.length,!1),f=by(u.shape,r,a,!1);return Pa(u.reshape(l),d).reshape(f)},e.prototype.reduce=function(n,r,o){var a=n.shape[0],i=n.shape[1],s=Tw(i),u=new Nxe({windowSize:s,inSize:i,batchSize:a},r),l=this.compileAndRun(u,[n],o);return l.shape[1]===1?l:this.reduce(l,r,o)},e.prototype.argReduce=function(n,r,o){o===void 0&&(o=null);var a=n.shape[0],i=n.shape[1];o!=null&&(a=o.shape[0],i=o.shape[1]);var s=Tw(i),u=new hbe({windowSize:s,inSize:i,batchSize:a},r,o==null),l=[n];o!=null&&l.push(o);var d=this.compileAndRun(u,l,"int32");return d.shape[1]===1?d:this.argReduce(n,r,d)},e.prototype.argReducePacked=function(n,r,o){o===void 0&&(o=null);var a=o!=null?o.shape:n.shape,i=Tw(a[a.length-1]),s=new bbe(a,i,r,o==null),u=o==null?[n]:[n,o],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){Oo("sum",r,n.rank);var o=Br(n.shape,r),a=o[0],i=Qe(o[1]),s=n.as2D(-1,i),u=bw(n.dtype);return this.reduce(s,"sum",u).reshape(a)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var o=Br(n.shape,r),a=o[0],i=Qe(o[1]),s=n.as2D(-1,i),u=bw(n.dtype);return this.reduce(s,"prod",u).reshape(a)},e.prototype.unsortedSegmentSum=function(n,r,o){var a=0,i=ji([a],n.rank),s=n;i!=null&&(s=Pa(n,i),a=zi(1,n.rank)[0]);var u=(function(m,g,y){for(var b=[],C=m.length,S=0;S<C;S++)S!==g?b.push(m[S]):b.push(y);return b})(s.shape,a,o),l=Qe([s.shape[a]]),d=s.as2D(-1,l),f=bw(n.dtype),p=this.segOpCompute(d,"unsortedSegmentSum",r,f,o).reshape(u);return i!=null&&(p=Pa(p,YE(i))),p},e.prototype.segOpCompute=function(n,r,o,a,i){var s=n.shape[0],u=n.shape[1],l=(function(p,m){var g,y=!1;for(p<=hj?(g=p,y=!0):g=iC(p,Math.floor(Math.sqrt(p)));!y;)g>m||g===p?y=!0:g=iC(p,g+1);return g})(u,i),d=new Lxe({windowSize:l,inSize:u,batchSize:s,numSegments:i}),f=this.compileAndRun(d,[n,o],a);return f.shape[1]===i?f:(o=vy(0,i).tile([u/l]),this.segOpCompute(f,r,o,a,i))},e.prototype.argMinMaxReduce=function(n,r,o){var a=[r];if(Oo("arg"+o.charAt(0).toUpperCase()+o.slice(1),a,n.rank),!Se().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var i=Br(n.shape,a),s=i[0],u=Qe(i[1]),l=n.as2D(-1,u);return this.argReduce(l,o).reshape(s)}return this.argReducePacked(n,o)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,o,a){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var i=new Ube(n.shape,o,a);return this.compileAndRun(i,[n])},e.prototype.equal=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var o=new zn("return float(a == b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new zn("return float(a != b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new zn("return float(a < b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new zn("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new zn("return float(a > b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new zn("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new Rt(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new zn("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new zn("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.select=function(n,r,o){var a=new jxe(n.rank,r.shape,r.rank);return this.compileAndRun(a,[n,r,o],Tr(r.dtype,o.dtype))},e.prototype.where=function(n){py("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return oR(n.shape,r)},e.prototype.topk=function(n,r,o){return Ej(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){Oo("min",r,n.rank);var o=Br(n.shape,r),a=o[0],i=Qe(o[1]),s=n.as2D(-1,i);return this.reduce(s,"min",s.dtype).reshape(a)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var o=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new zn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.mod=function(n,r){var o=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new zn(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);Oo("max",r,n.rank);var o=Br(n.shape,r),a=o[0],i=Qe(o[1]),s=n.as2D(-1,i);return this.reduce(s,"max",s.dtype).reshape(a)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var o=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new zn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.all=function(n,r){Oo("all",r,n.rank);var o=Br(n.shape,r),a=o[0],i=Qe(o[1]),s=n.as2D(-1,i);return this.reduce(s,"all",s.dtype).reshape(a)},e.prototype.any=function(n,r){Oo("any",r,n.rank);var o=Br(n.shape,r),a=o[0],i=Qe(o[1]),s=n.as2D(-1,i);return this.reduce(s,"any",s.dtype).reshape(a)},e.prototype.floorDiv=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new zn(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Aw);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var o=Tr(n.dtype,r.dtype);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Aw,o);var a=new zn(Aw,n.shape,r.shape);return this.compileAndRun(a,[n,r],o)},e.prototype.packedUnaryOp=function(n,r,o){var a=new Vh(n.shape,r);return this.compileAndRun(a,[n],o)},e.prototype.packedBinaryOp=function(n,r,o,a,i){i===void 0&&(i=!1);var s=new di(o,n.shape,r.shape,i);return this.compileAndRun(s,[n,r],a)},e.prototype.complexSeparableBinaryOp=function(n,r,o){var a=this,i=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[i.complexTensors.real,s.complexTensors.real],[i.complexTensors.imag,s.complexTensors.imag]].map((function(p){var m=p[0],g=p[1],y=a.makeComplexComponentTensorInfo(n,m),b=a.makeComplexComponentTensorInfo(r,g),C=new zn(o,n.shape,r.shape);return a.compileAndRun(C,[y,b],Tr(m.dtype,g.dtype))})),l=u[0],d=u[1],f=this.complex(l,d);return l.dispose(),d.dispose(),f},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>Se().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),o=this.addN(n.slice(0,r)),a=this.addN(n.slice(r));return this.addN([o,a])}var i=n.map((function(l){return l.dtype})).reduce((function(l,d){return Tr(l,d)})),s=n.map((function(l){return l.shape})),u=Se().getBool("WEBGL_PACK")?new fbe(n[0].shape,s):new dbe(n[0].shape,s);return this.compileAndRun(u,n,i)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Nw);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var o=Tr(n.dtype,r.dtype);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Nw,n.dtype);var a=new zn(Nw,n.shape,r.shape);return this.compileAndRun(a,[n,r],o)},e.prototype.pow=function(n,r){var o=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new zn(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),a=Tr(n.dtype,r.dtype);return this.compileAndRun(o,[n,r],a)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,TM,n.dtype);var r=new Rt(n.shape,TM);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,AM,n.dtype);var r=new Rt(n.shape,AM);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new Rt(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new Rt(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new Rt(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new Rt(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new Rt(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,NM,n.dtype);var r=new Rt(n.shape,NM);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,DM,n.dtype);var r=new Rt(n.shape,DM);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var o=fr([r],n.shape),a=this.max(n,o),i=So(a.shape,o),s=this.subtract(n,a.reshape(i)),u=this.exp(s),l=this.sum(u,o).reshape(i);return Fu(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new Rt(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new Rt(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new Rt(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new Rt(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new Rt(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=Se().getBool("WEBGL_PACK")?new Vh(n.shape,Mj):new Rt(n.shape,Dj),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=Se().getBool("WEBGL_PACK")?new Vh(n.shape,Oj):new Rt(n.shape,kj),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var o=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di(Nj,n.shape,r.shape):new zn(Aj,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.elu=function(n){if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Pj,n.dtype);var r=new Rt(n.shape,Ij);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var o=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new zn("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.selu=function(n){var r=new Rt(n.shape,$xe);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new Rt(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,o){var a,i=(a=Se().getBool("WEBGL_PACK_CLIP")?new Nbe(n.shape):new Abe(n.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(a,[n],null,i)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,RM,n.dtype);var r=new Rt(n.shape,RM);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),o=new Dbe(n.shape),a=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(o,a)},e.prototype.sigmoid=function(n){var r=new Rt(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new Rt(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new Rt(n.shape,qxe);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new Rt(n.shape,Xxe);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new Rt(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new Rt(n.shape,Kxe);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new Rt(n.shape,Yxe);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new Rt(n.shape,Qxe);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var o=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new zn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.sinh=function(n){var r=new Rt(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new Rt(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new Rt(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new Rt(n.shape,Jxe);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new Rt(n.shape,Zxe);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new Rt(n.shape,e1e);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new Rt(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var o=new Rt(n.shape,(function(a){return a===void 0&&(a=0),Ja+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `})(r));return this.compileAndRun(o,[n])},e.prototype.conv2dByMatMul=function(n,r,o,a,i,s){var u=n.shape,l=this.texData.get(n.dataId),d=o.inChannels,f=u[0]*u[1]*u[2],p=o.outChannels,m=o.dataFormat==="channelsLast",g=(f===1||p===1)&&d>1e3,y=u[2]%2!=0&&!!l.isPacked;if(g||!Se().getBool("WEBGL_LAZILY_UNPACK")||!Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!y){var b=m?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],C=this.reshape(n,[1,b,o.inChannels]),S=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:C,b:S,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:s}),o.outShape)}var E=m?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),_={dataId:n.dataId,shape:[1,E,o.inChannels],dtype:n.dtype},T=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,K(rg(l.shape,_.shape),(function(){return"packed reshape "+l.shape+" to "+_.shape+" isn't free"}));var D=this.reshape(r,[1,o.inChannels,o.outChannels]),I=this.fusedBatchMatMul({a:_,b:D,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:s}),k=this.texData.get(I.dataId);return K(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),l.shape=T,k.shape=o.outShape,ae.makeTensorFromDataId(I.dataId,o.outShape,I.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,o,a,i,s){var u=o.filterWidth,l=o.filterHeight,d=o.inChannels,f=o.outWidth,p=o.outHeight,m=o.dataFormat==="channelsLast",g=u*l*d,y=p*f,b=[g,y],C=n.squeeze([0]),S=r.reshape([1,g,-1]),E=new yxe(b,C.shape,o),_=this.compileAndRun(E,[C]).reshape([1,b[0],b[1]]),T=a!=null,D=s!=null,I=i?sg(i,!0):null,k=new Dw(_.shape,[1,y,o.outChannels],!0,!1,T,I,D),M=[_,S];a&&M.push(a),D&&M.push(s);var O=this.compileAndRun(k,M);return m?O.reshape([1,p,f,o.outChannels]):O.reshape([1,o.outChannels,p,f])},e.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,a,i,s,u);if(Se().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,a,i,s,u);var l=i!=null,d=u!=null,f=s?sg(s,!1):null,p=new vM(a,l,f,d),m=[r,o];return i&&m.push(i),u&&m.push(u),this.compileAndRun(p,m)},e.prototype.conv2d=function(n,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,o);if(Se().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,o);var a=new vM(o);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerInput=function(n,r,o){var a=new Obe(o);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerFilter=function(n,r,o){var a=new Mbe(o);return this.compileAndRun(a,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,o=n.input,a=n.filter,i=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,d=Se().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,f=u?sg(u,d):null,p=[o,a],m=s!=null,g=l!=null;return m&&p.push(s),g&&p.push(l),d?(r=new yM(i,m,f,g),this.compileAndRun(r,p)):(r=new gM(i,m,f,g),this.compileAndRun(r,p))},e.prototype.depthwiseConv2D=function(n,r,o){var a;return Se().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(a=new yM(o),this.compileAndRun(a,[n,r])):(a=new gM(o),this.compileAndRun(a,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,o){var a=new Lbe(o);return this.compileAndRun(a,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,o){var a=new Bbe(o);return this.compileAndRun(a,[n,r])},e.prototype.conv3d=function(n,r,o){var a=new jbe(o);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerInput=function(n,r,o){var a=new Fbe(o);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerFilter=function(n,r,o){var a=new Pbe(o);return this.compileAndRun(a,[n,r])},e.prototype.maxPool=function(n,r){var o=new ep(r,"max",!1);return this.compileAndRun(o,[n])},e.prototype.avgPool=function(n,r){var o=new ep(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,o,a){var i=new ep(a,"max",!0),s=this.compileAndRun(i,[r]),u=new Cxe(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,o){var a=new xbe(o);return this.compileAndRun(a,[n],r.dtype)},e.prototype.cast=function(n,r){return bj(n,r,this)},e.prototype.unstack=function(n,r){for(var o=n.shape[r],a=new Array(n.rank-1),i=0,s=0;s<n.rank;s++)s!==r&&(a[i++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var d=new Array(o);for(s=0;s<d.length;s++)u[r]=s,d[s]=this.slice(n,u,l).reshape(a);return d},e.prototype.avgPool3d=function(n,r){var o=new kw(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,o){var a=new wbe(o);return this.compileAndRun(a,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var o=new kw(r,"max",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,o,a){var i=new kw(a,"max",!0),s=this.compileAndRun(i,[r]),u=new Sxe(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(n,r){var o=this.texData.get(n.dataId);if(o.isPacked&&!rg(n.shape,r)&&(o.texture===null||!rg(o.shape,r))){var a=this.packedReshape(n,r);return ae.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return pC(n,r)},e.prototype.resizeBilinear=function(n,r,o,a){var i=Se().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Mxe(n.shape,r,o,a):new Ixe(n.shape,r,o,a);return this.compileAndRun(i,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,o){var a=new kxe(n,r,o);return this.compileAndRun(a,[n])},e.prototype.resizeNearestNeighbor=function(n,r,o,a){var i=new Pxe(n.shape,r,o,a);return this.compileAndRun(i,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,o){var a=new Oxe(n,r,o);return this.compileAndRun(a,[n])},e.prototype.multinomial=function(n,r,o,a){var i=r?n:G0(n),s=i.shape[0],u=i.shape[1],l=new Exe(s,u,o),d=l.getCustomSetupFunc(a);return this.compileAndRun(l,[i],"int32",d)},e.prototype.oneHot=function(n,r,o,a){var i=new Rxe(n.size,r,o,a);return this.compileAndRun(i,[n])},e.prototype.diag=function(n){var r=new Gbe(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,o,a,i){return py("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),nR(n.dataSync(),r.dataSync(),o,a,i)},e.prototype.cropAndResize=function(n,r,o,a,i,s){var u=new zbe(n.shape,r.shape,a,i,s);return this.compileAndRun(u,[n,r,o],"float32")},e.prototype.depthToSpace=function(n,r,o){K(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));var a=n.shape[0],i=o==="NHWC"?n.shape[1]:n.shape[2],s=o==="NHWC"?n.shape[2]:n.shape[3],u=o==="NHWC"?n.shape[3]:n.shape[1],l=i*r,d=s*r,f=u/(r*r),p=new Hbe(o==="NHWC"?[a,l,d,f]:[a,f,l,d],r,o);return this.compileAndRun(p,[n])},e.prototype.split=function(n,r,o){return Cj(n,r,o)},e.prototype.scatterND=function(n,r,o){var a=wy(0,n,o),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,d=a.outputSize,f=[d/u,u],p=n.reshape([s,i]),m=r.reshape([s,u]);if(d===0)return pC(Ar([]),o);var g=rt(0),y=new CM(s,i,p.rank,m.rank,l,f);return this.compileAndRun(y,[m,p,g]).reshape(o)},e.prototype.sparseToDense=function(n,r,o,a){var i=wy(0,n,o),s=i.sliceRank,u=i.numUpdates,l=i.strides,d=i.outputSize,f=new CM(u,s,n.rank,r.rank,l,[d,1]);return this.compileAndRun(f,[r,n,a]).reshape(o)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var o=this.texData.get(n.dataId),a=new xM(Ybe,n.shape,r),i=new xM(Qbe,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(i,s),d=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),d},e.prototype.gatherND=function(n,r){var o=r.shape,a=o[o.length-1],i=fj(n,r),s=i[0],u=i[1],l=i[2],d=i[3],f=r.reshape([u,a]),p=n.reshape([n.size/l,l]),m=new exe(a,d,[u,l]);return this.compileAndRun(m,[p,f]).reshape(s)},e.prototype.fill=function(n,r,o){if((o=o||sm(r))==="string"){var a=cy(o,Qe(n));return a.fill(r),ae.makeTensor(a,n,o,this)}var i=new Jbe(n,r),s=i.getCustomSetupFunc(r);return this.compileAndRun(i,[],o,s)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,o){return xj(n,r,o)},e.prototype.makeTensorInfo=function(n,r){var o=this.write(null,n,r);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var o=this.makeTensorInfo(n,r).dataId;return ae.makeTensorFromDataId(o,n,r,this)},e.prototype.unpackTensor=function(n){var r=new n1e(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new _xe(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var o=[fy(n.shape)].concat(hy(n.shape)),a={dtype:n.dtype,shape:o,dataId:n.dataId},i=[fy(r)].concat(hy(r)),s=new Dxe(i,o),u=this.runWebGLProgram(s,[a],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,o=this.texData.get(n),a=o.isPacked,i=o.shape,s=o.dtype,u=_w(i);return r=a?new Vbe(u):new Wbe(u),{dtype:s,shape:i,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,o,a,i){var s=this;i===void 0&&(i=!1);var u=this.makeTensorInfo(n.outputShape,o),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===Sp.DENSE){var d=Jh(n.outputShape);l.texShape=d.map((function(E){return 2*E}))}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),Qe(u.shape)===0)return l.values=Yd(u.dtype,0),u;var f=[],p=r.map((function(E){if(E.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var _=s.texData.get(E.dataId);if(_.texture==null){if(!n.packedInputs&&Qe(E.shape)<=Se().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:E.shape,texData:null,isUniform:!0,uniformValues:_.values};n.packedInputs&&(_.isPacked=!0,_.shape=E.shape)}else if(!!_.isPacked!=!!n.packedInputs)E=_.isPacked?s.unpackTensor(E):s.packTensor(E),f.push(E),_=s.texData.get(E.dataId);else if(_.isPacked&&!rg(_.shape,E.shape)){var T=E,D=E.shape;E.shape=_.shape,E=s.packedReshape(E,D),f.push(E),_=s.texData.get(E.dataId),T.shape=D}return s.uploadToGPU(E.dataId),{shape:E.shape,texData:_,isUniform:!1}}));this.uploadToGPU(u.dataId);var m,g={shape:u.shape,texData:l,isUniform:!1},y=(function(E,_,T){var D="";_.concat(T).forEach((function(M){var O=M.texData!=null&&M.texData.slice!=null&&M.texData.slice.flatOffset>0,F=M.isUniform?"uniform":M.texData.texShape;D+=M.shape+"_"+F+"_"+O}));var I=E.userCode,k=E.constructor.name;return k+="_"+D+"_"+I})(n,p,g),b=this.getAndSaveBinary(y,(function(){return(function(E,_,T,D){var I=_.userCode,k=T.map((function(z,H){var L={logicalShape:z.shape,texShape:z.isUniform?null:z.texData.texShape,isUniform:z.isUniform,isPacked:!z.isUniform&&z.texData.isPacked,flatOffset:null};return z.texData!=null&&z.texData.slice!=null&&z.texData.slice.flatOffset>0&&(L.flatOffset=z.texData.slice.flatOffset),{name:_.variableNames[H],shapeInfo:L}})),M=k.map((function(z){return z.shapeInfo})),O={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},F=pbe(k,O,I,_.packedInputs),j=E.createProgram(F),G=null,W=E.getUniformLocation(j,"NAN",!1);Se().getNumber("WEBGL_VERSION")===1&&(G=E.getUniformLocation(j,"INFINITY",!1));for(var q={},P=0;P<_.variableNames.length;P++){var U=_.variableNames[P];q[U]=E.getUniformLocation(j,U,!1),q["offset"+U]=E.getUniformLocation(j,"offset"+U,!1)}return{program:_,source:F,webGLProgram:j,uniformLocations:q,inShapeInfos:M,outShapeInfo:O,infLoc:G,nanLoc:W}})(s.gpgpu,n,p,g)})),C=this.activeTimers!=null;if(C&&(m=this.startTimer()),(function(E,_,T,D,I){wM(_.inShapeInfos,T),wM([_.outShapeInfo],[D]);var k=D.texData.texture,M=D.texData.texShape;D.texData.isPacked?E.setOutputPackedMatrixTexture(k,M[0],M[1]):E.setOutputMatrixTexture(k,M[0],M[1]),E.setProgram(_.webGLProgram),Se().getNumber("WEBGL_VERSION")===1&&_.infLoc!==null&&E.gl.uniform1f(_.infLoc,1/0),_.nanLoc!==null&&E.gl.uniform1f(_.nanLoc,NaN),T.forEach((function(O,F){var j=_.program.variableNames[F],G=_.uniformLocations[j],W=_.uniformLocations["offset"+j];if(G!=null)if(O.isUniform)if(Qe(O.shape)<2)E.gl.uniform1f(G,O.uniformValues[0]);else{var q=O.uniformValues;q instanceof Float32Array||(q=new Float32Array(q)),E.gl.uniform1fv(G,q)}else O.texData.slice!=null&&W!=null&&E.gl.uniform1i(W,O.texData.slice.flatOffset),E.setInputMatrixTexture(O.texData.texture,G,F)})),I?.(E,_.webGLProgram),E.executeProgram()})(this.gpgpu,b,p,g,a),f.forEach((function(E){return s.disposeData(E.dataId)})),C&&(m=this.endTimer(m),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(m)})),!Se().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){var S=this.unpackTensor(u);return this.disposeData(u.dataId),S}return u},e.prototype.compileAndRun=function(n,r,o,a,i){i===void 0&&(i=!1),o=o||r[0].dtype;var s=this.runWebGLProgram(n,r,o,a,i);return ae.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(Se().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]})),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=tn((function(){if(!Se().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=Se().getBool("DEBUG");Se().set("DEBUG",!1);var o=n.abs(rt(1e-8)).dataSync()[0];if(Se().set("DEBUG",r),o>0)return 32}return 16}))),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,o=this.texData.get(n),a=o.shape,i=o.dtype,s=o.values,u=o.texture,l=o.usage,d=o.isPacked;if(u==null){var f,p=this.activeTimers!=null;p&&(f=hi());var m=o.texShape;if(m==null&&(m=zye(a,d),o.texShape=m),s!=null){var g=_w(a),y=void 0,b=m[1],C=m[0],S=s instanceof Uint8Array;d?(b=(r=lm(m[0],m[1]))[0],C=r[1],y=new Kbe(g,[C,b],S)):y=new Xbe(g,[C,b],S);var E=this.makeTensorInfo([C,b],i);this.texData.get(E.dataId).usage=S?jo.PIXELS:jo.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(E.dataId),b,C,s);var _=this.runWebGLProgram(y,[E],i,null,!0),T=this.texData.get(_.dataId);o.texture=T.texture,o.texShape=T.texShape,o.isPacked=T.isPacked,o.usage=T.usage,this.disposeData(E.dataId),this.texData.delete(_.dataId),o.values=null,p&&(this.uploadWaitMs+=hi()-f)}else{var D=this.acquireTexture(m,l,i,d);o.texture=D}}},e.prototype.convertAndCacheOnCPU=function(n,r){var o=this.texData.get(n),a=o.dtype;return this.releaseGPUData(n),r!=null&&(o.values=(function(i,s){if(s==="float32"||s==="complex64")return i;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(i.length):new Uint8Array(i.length),l=0;l<u.length;++l)u[l]=Math.round(i[l]);return u}throw new Error("Unknown dtype "+s)})(r,a)),o.values},e.prototype.acquireTexture=function(n,r,o,a){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,a)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*jL(r)},e})(gj);qL()&&ae.registerBackend("webgl",(function(){return new o1e}),2);function ic(t,e){return t(e={exports:{}},e.exports),e.exports}var a1e=ic((function(t){(function(e,n,r){function o(s){var u,l=this,d=(u=4022871197,function(f){f=f.toString();for(var p=0;p<f.length;p++){var m=.02519603282416938*(u+=f.charCodeAt(p));m-=u=m>>>0,u=(m*=u)>>>0,u+=4294967296*(m-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=d(" "),l.s1=d(" "),l.s2=d(" "),l.s0-=d(s),l.s0<0&&(l.s0+=1),l.s1-=d(s),l.s1<0&&(l.s1+=1),l.s2-=d(s),l.s2<0&&(l.s2+=1),d=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function i(s,u){var l=new o(s),d=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,d&&(typeof d=="object"&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.alea=i})(0,t)})),i1e=ic((function(t){(function(e,n,r){function o(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var d=0;d<l.length+64;d++)u.x^=0|l.charCodeAt(d),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function i(s,u){var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(typeof d=="object"&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.xor128=i})(0,t)})),s1e=ic((function(t){(function(e,n,r){function o(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var d=0;d<l.length+64;d++)u.x^=0|l.charCodeAt(d),d==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function i(s,u){var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(typeof d=="object"&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.xorwow=i})(0,t)})),u1e=ic((function(t){(function(e,n,r){function o(s){var u=this;u.next=function(){var l,d,f=u.x,p=u.i;return l=f[p],d=(l^=l>>>7)^l<<24,d^=(l=f[p+1&7])^l>>>10,d^=(l=f[p+3&7])^l>>>3,d^=(l=f[p+4&7])^l<<7,l=f[p+7&7],d^=(l^=l<<13)^l<<9,f[p]=d,u.i=p+1&7,d},(function(l,d){var f,p=[];if(d===(0|d))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[7&f]=p[7&f]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],l.x=p,l.i=0,f=256;f>0;--f)l.next()})(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function i(s,u){s==null&&(s=+new Date);var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(d.x&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.xorshift7=i})(0,t)})),l1e=ic((function(t){(function(e,n,r){function o(s){var u=this;u.next=function(){var l,d,f=u.w,p=u.X,m=u.i;return u.w=f=f+1640531527|0,d=p[m+34&127],l=p[m=m+1&127],d^=d<<13,l^=l<<17,d^=d>>>15,l^=l>>>12,d=p[m]=d^l,u.i=m,d+(f^f>>>16)|0},(function(l,d){var f,p,m,g,y,b=[],C=128;for(d===(0|d)?(p=d,d=null):(d+="\0",p=0,C=Math.max(C,d.length)),m=0,g=-32;g<C;++g)d&&(p^=d.charCodeAt((g+32)%d.length)),g===0&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,g>=0&&(y=y+1640531527|0,m=(f=b[127&g]^=p+y)==0?m+1:0);for(m>=128&&(b[127&(d&&d.length||0)]=-1),m=127,g=512;g>0;--g)p=b[m+34&127],f=b[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,b[m]=p^f;l.w=y,l.X=b,l.i=m})(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function i(s,u){s==null&&(s=+new Date);var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(d.X&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.xor4096=i})(0,t)})),c1e=ic((function(t){(function(e,n,r){function o(s){var u=this,l="";u.next=function(){var f=u.b,p=u.c,m=u.d,g=u.a;return f=f<<25^f>>>7^p,p=p-m|0,m=m<<24^m>>>8^g,g=g-f|0,u.b=f=f<<20^f>>>12^p,u.c=p=p-m|0,u.d=m<<16^p>>>16^g,u.a=g-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var d=0;d<l.length+20;d++)u.b^=0|l.charCodeAt(d),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function i(s,u){var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(typeof d=="object"&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.tychei=i})(0,t)})),xl=ic((function(t){(function(e,n){var r,o=this,a=256,i=6,s="random",u=n.pow(a,i),l=n.pow(2,52),d=2*l,f=a-1;function p(C,S,E){var _=[],T=y((function k(M,O){var F,j=[],G=typeof M;if(O&&G=="object")for(F in M)try{j.push(k(M[F],O-1))}catch{}return j.length?j:G=="string"?M:M+"\0"})((S=S==1?{entropy:!0}:S||{}).entropy?[C,b(e)]:C??(function(){try{var k;return r&&(k=r.randomBytes)?k=k(a):(k=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(k)),b(k)}catch{var M=o.navigator,O=M&&M.plugins;return[+new Date,o,O,o.screen,b(e)]}})(),3),_),D=new m(_),I=function(){for(var k=D.g(i),M=u,O=0;k<l;)k=(k+O)*a,M*=a,O=D.g(1);for(;k>=d;)k/=2,M/=2,O>>>=1;return(k+O)/M};return I.int32=function(){return 0|D.g(4)},I.quick=function(){return D.g(4)/4294967296},I.double=I,y(b(D.S),e),(S.pass||E||function(k,M,O,F){return F&&(F.S&&g(F,D),k.state=function(){return g(D,{})}),O?(n[s]=k,M):k})(I,T,"global"in S?S.global:this==n,S.state)}function m(C){var S,E=C.length,_=this,T=0,D=_.i=_.j=0,I=_.S=[];for(E||(C=[E++]);T<a;)I[T]=T++;for(T=0;T<a;T++)I[T]=I[D=f&D+C[T%E]+(S=I[T])],I[D]=S;(_.g=function(k){for(var M,O=0,F=_.i,j=_.j,G=_.S;k--;)M=G[F=f&F+1],O=O*a+G[f&(G[F]=G[j=f&j+M])+(G[j]=M)];return _.i=F,_.j=j,O})(a)}function g(C,S){return S.i=C.i,S.j=C.j,S.S=C.S.slice(),S}function y(C,S){for(var E,_=C+"",T=0;T<_.length;)S[f&T]=f&(E^=19*S[f&T])+_.charCodeAt(T++);return b(S)}function b(C){return String.fromCharCode.apply(0,C)}if(n["seed"+s]=p,y(n.random(),e),t.exports){t.exports=p;try{r=require("crypto")}catch{}}})([],Math)}));xl.alea=a1e,xl.xor128=i1e,xl.xorwow=s1e,xl.xorshift7=u1e,xl.xor4096=l1e,xl.tychei=c1e;var $0=xl.alea,d1e=te({addN_:function(t){K(Array.isArray(t),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),K(t.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length}));var e=t.map((function(o,a){return X(o,"tensors"+a,"addN")})),n=e[0];e.forEach((function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),e.forEach((function(o){if(!br(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=e;return ae.runKernelFunc((function(o,a){return o.addN(e)}),r,null,"AddN")}});function q0(){XL("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function Fj(t){return t.rank===0||t.rank===1?t.as4D(1,1,1,t.size):t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Bj(t,e,n,r,o,a){a==null&&(a=.001);var i,s,u=X(t,"x","batchNorm"),l=X(e,"mean","batchNorm"),d=X(n,"variance","batchNorm");o!=null&&(i=X(o,"scale","batchNorm")),r!=null&&(s=X(r,"offset","batchNorm")),K(l.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),K(s==null||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),K(i==null||l.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f={x:u,scale:i,offset:s,mean:l,variance:d},p={varianceEpsilon:a};return ae.runKernelFunc((function(m,g){var y=Fj(u),b=m.batchNormalization(y,ug(l),ug(d),a,ug(i),ug(s));return g([u,l,d,i]),b}),f,null,"FusedBatchNorm",p).reshape(u.shape)}function ug(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}var f1e=te({batchNormalization_:function(t,e,n,r,o,a){return r===void 0&&(r=.001),q0(),Bj(t,e,n,a,o,r)}}),dm=te({batchNorm_:Bj});function Lj(t,e,n,r,o,a){var i,s,u=X(t,"x","batchNorm"),l=X(e,"mean","batchNorm"),d=X(n,"variance","batchNorm");return o!=null&&(i=X(o,"scale","batchNorm")),r!=null&&(s=X(r,"offset","batchNorm")),K(u.rank===2,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),K(l.rank===2||l.rank===1,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),K(d.rank===2||d.rank===1,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."})),i!=null&&K(i.rank===2||i.rank===1,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."})),s!=null&&K(s.rank===2||s.rank===1,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),dm(u,l,d,s,i,a)}var h1e=te({batchNormalization2d_:function(t,e,n,r,o,a){return r===void 0&&(r=.001),q0(),Lj(t,e,n,a,o,r)}}),p1e=te({batchNorm2d_:Lj});function jj(t,e,n,r,o,a){var i,s,u=X(t,"x","batchNorm"),l=X(e,"mean","batchNorm"),d=X(n,"variance","batchNorm");return o!=null&&(i=X(o,"scale","batchNorm")),r!=null&&(s=X(r,"offset","batchNorm")),K(u.rank===3,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),K(l.rank===3||l.rank===1,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),K(d.rank===3||d.rank===1,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."})),i!=null&&K(i.rank===3||i.rank===1,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."})),s!=null&&K(s.rank===3||s.rank===1,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),dm(u,l,d,s,i,a)}var m1e=te({batchNormalization3d_:function(t,e,n,r,o,a){return r===void 0&&(r=.001),q0(),jj(t,e,n,a,o,r)}}),v1e=te({batchNorm3d_:jj});function zj(t,e,n,r,o,a){var i,s,u=X(t,"x","batchNorm"),l=X(e,"mean","batchNorm"),d=X(n,"variance","batchNorm");return o!=null&&(i=X(o,"scale","batchNorm")),r!=null&&(s=X(r,"offset","batchNorm")),K(u.rank===4,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),K(l.rank===4||l.rank===1,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),K(d.rank===4||d.rank===1,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."})),i!=null&&K(i.rank===4||i.rank===1,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."})),s!=null&&K(s.rank===4||s.rank===1,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),dm(u,l,d,s,i,a)}var g1e=te({batchNormalization4d_:function(t,e,n,r,o,a){return r===void 0&&(r=.001),q0(),zj(t,e,n,a,o,r)}}),y1e=te({batchNorm4d_:zj}),Uj=te({broadcastTo_:function(t,e){var n=X(t,"broadcastTo","x"),r=n.shape;if(e.some((function(f){return!(f>0)||f%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var o=n.shape.slice();o.length<e.length;)o.unshift(1);n=n.reshape(o)}for(var a=n.shape,i=Array.from(e),s=e.length-1;s>=0;s--)if(a[s]===e[s])i[s]=1;else if(n.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var u=i.map((function(f,p){return f>1?p:-1})).filter((function(f){return f>=0}));if(u.length===0)return n.clone();var l={x:n},d={shape:e,inputShape:a};return ae.runKernelFunc((function(f){return f.tile(n,i)}),l,(function(f){return{x:function(){return f.sum(u,!0)}}}),oj,d)}}),b1e=te({clone_:function(t){var e=X(t,"x","clone",null);return ae.runKernelFunc((function(){return ae.makeTensorFromDataId(e.dataId,e.shape,e.dtype)}),{x:e},null,ij)}}),X0=te({logicalAnd_:function(t,e){var n=X(t,"a","logicalAnd","bool"),r=X(e,"b","logicalAnd","bool");return Ot(n.shape,r.shape),ae.runKernelFunc((function(o){return o.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),x1e=te({logicalNot_:function(t){var e=X(t,"x","logicalNot","bool");return ae.runKernelFunc((function(n){return n.logicalNot(e)}),{$x:e})}}),Wj=te({logicalOr_:function(t,e){var n=X(t,"a","logicalOr","bool"),r=X(e,"b","logicalOr","bool");return Ot(n.shape,r.shape),ae.runKernelFunc((function(o){return o.logicalOr(n,r)}),{$a:n,$b:r})}}),w1e=te({logicalXor_:function(t,e){var n=X(t,"a","logicalXor","bool"),r=X(e,"b","logicalXor","bool");return Ot(n.shape,r.shape),Wj(t,e).logicalAnd(X0(t,e).logicalNot())}}),Gl=te({where_:function(t,e,n){var r=X(e,"a","where"),o=X(n,"b","where"),a=X(t,"condition","where","bool");return an(r.shape,o.shape,"Error in where: "),a.rank===1?K(a.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):an(a.shape,o.shape,"Error in where: "),ae.runKernelFunc((function(i,s){var u=i.select(a,r,o);return s([a]),u}),{$condition:a,$a:r,$b:o},(function(i,s){var u=s[0];return{$condition:function(){return $t(u).toFloat()},$a:function(){return i.mul(u.cast(i.dtype))},$b:function(){return i.mul(u.logicalNot().cast(i.dtype))}}}))}}),Vj=function(t){return Je(this,void 0,void 0,(function(){var e,n,r;return Ze(this,(function(o){switch(o.label){case 0:return[4,(e=X(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=oR(e.shape,n),t!==e&&e.dispose(),[2,r]}}))}))},Hj=te({divNoNan_:function(t,e){var n,r=X(t,"a","div"),o=X(e,"b","div");r=(n=Mn(r,o))[0],o=n[1];var a=Fu(r,o),i=$t(a),s=o.equal(i);return Gl(s,i,a)}}),Ad=te({tile_:function(t,e){var n=X(t,"x","tile",null);K(n.rank===e.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."}));var r=[n],o={x:n},a={reps:e};return ae.runKernelFunc((function(i,s){var u=i.tile(n,e);return s([n]),u}),o,null,sj,a,r)}}),Gj=te({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var o=Ct([t,e],r),a=t<=e?t:e,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return Ad(mu(s,0),[n[0],1,1]);if(n.length===2)return Ad(mu(mu(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ad(mu(mu(mu(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),C1e=te({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var o=X(t,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=i===1?o.as2D(1,-1):o,u=ae.runKernelFunc((function(l){return l.multinomial(s,r,e,n)}),{logits2D:s});return i===1?u.as1D():u}}),Ry=te({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=X(t,"indices","oneHot","int32"),a=o.shape.concat([e]),i={indices:o=o.flatten()},s={depth:e,onValue:n,offValue:r};return ae.runKernelFunc((function(u,l){return l([o]),u.oneHot(o,e,n,r)}),i,null,aj,s).reshape(a)}}),Ms=te({pad_:function(t,e,n){n===void 0&&(n=0);var r=X(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:e,constantValue:n},a={x:r};return ae.runKernelFunc((function(i,s){return s([r]),i.pad(r,e,n)}),a,null,uj,o)}}),S1e=te({pad1d_:function(t,e,n){return n===void 0&&(n=0),K(e.length===2,(function(){return"Invalid number of paddings. Must be length of 2."})),Ms(t,[e],n)}}),E1e=te({pad2d_:function(t,e,n){return n===void 0&&(n=0),K(e.length===2&&e[0].length===2&&e[1].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Ms(t,e,n)}}),R1e=te({pad3d_:function(t,e,n){return n===void 0&&(n=0),K(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Ms(t,e,n)}}),_1e=te({pad4d_:function(t,e,n){return n===void 0&&(n=0),K(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Ms(t,e,n)}}),T1e=te({rand_:function(t,e,n){var r=Qe(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=e();return ae.makeTensor(o,t,n)}}),uR=(function(){function t(e,n,r,o,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=$0(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,o=!1;!o;){var a=void 0,i=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t})(),A1e=(function(){function t(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;var a=o||Math.random();this.randu=$0(a.toString()),this.randn=new uR(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,o,a,i;;){do o=this.randn.nextValue(),i=1+this.c*o;while(i<=0);if(i*=i*i,n=1-.331*(e=o*o)*e,r=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<n||Math.log(a)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t})(),N1e=(function(){function t(e,n,r,o){var a=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=$0(o)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t})(),D1e=te({randomGamma_:function(t,e,n,r,o){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new A1e(e,n,r,o),i=Ct(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),k1e=te({randomNormal_:function(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new uR(e,n,r,!1,o),i=Ct(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),$j=te({randomUniform_:function(t,e,n,r,o){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var a=Ct(t,r),i=new N1e(e,n,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),qj=te({square_:function(t){var e=X(t,"x","square"),n=[e];return ae.runKernelFunc((function(r,o){return o([e]),r.square(e)}),{x:e},null,"Square",{},n,[])}}),Xj=te({squaredDifference_:function(t,e){var n,r=X(t,"a","squaredDifference"),o=X(e,"b","squaredDifference");n=Mn(r,o),r=n[0],o=n[1],Ot(r.shape,o.shape);var a={a:r,b:o},i=[r,o];return ae.runKernelFunc((function(s,u){var l=s.squaredDifference(r,o);return u([r,o]),l}),a,(function(s,u){var l=u[0],d=u[1],f=rt(2);return{a:function(){return s.mul(l.sub(d).mul(f))},b:function(){return s.mul(d.sub(l).mul(f))}}}),V0,{},i,[])}}),I1e=te({truncatedNormal_:function(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");for(var a=new uR(e,n,r,!0,o),i=Ct(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Kj=te({equal_:function(t,e){var n,r=X(t,"a","equal"),o=X(e,"b","equal");return n=Mn(r,o),r=n[0],o=n[1],Ot(r.shape,o.shape),ae.runKernelFunc((function(a){return a.equal(r,o)}),{$a:r,$b:o})}}),M1e=te({equalStrict_:function(t,e){var n=X(t,"a","equalStrict"),r=X(e,"b","equalStrict");return an(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),O1e=te({greater_:function(t,e){var n,r=X(t,"a","greater"),o=X(e,"b","greater");return n=Mn(r,o),r=n[0],o=n[1],Ot(r.shape,o.shape),ae.runKernelFunc((function(a){return a.greater(r,o)}),{a:r,b:o},null,"Greater")}}),Yj=te({greaterEqual_:function(t,e){var n,r=X(t,"a","greaterEqual"),o=X(e,"b","greaterEqual");return n=Mn(r,o),r=n[0],o=n[1],Ot(r.shape,o.shape),ae.runKernelFunc((function(a,i){var s=a.greaterEqual(r,o);return i([r,o]),s}),{a:r,b:o},(function(a,i){var s=i[0],u=i[1];return{a:function(){return $t(s)},b:function(){return $t(u)}}}),"GreaterEqual")}}),P1e=te({greaterEqualStrict_:function(t,e){var n=X(t,"a","greaterEqualStrict"),r=X(e,"b","greaterEqualStrict");return an(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),F1e=te({greaterStrict_:function(t,e){var n=X(t,"a","greaterStrict"),r=X(e,"b","greaterStrict");return an(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),B1e=te({less_:function(t,e){var n,r=X(t,"a","less"),o=X(e,"b","less");return n=Mn(r,o),r=n[0],o=n[1],Ot(r.shape,o.shape),ae.runKernelFunc((function(a){return a.less(r,o)}),{a:r,b:o},null,"Less")}}),L1e=te({lessEqual_:function(t,e){var n,r=X(t,"a","lessEqual"),o=X(e,"b","lessEqual");return n=Mn(r,o),r=n[0],o=n[1],Ot(r.shape,o.shape),ae.runKernelFunc((function(a,i){var s=a.lessEqual(r,o);return i([r,o]),s}),{a:r,b:o},null,"LessEqual")}}),j1e=te({lessEqualStrict_:function(t,e){var n=X(t,"a","lessEqualStrict"),r=X(e,"b","lessEqualStrict");return an(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),z1e=te({lessStrict_:function(t,e){var n=X(t,"a","lessStrict"),r=X(e,"b","lessStrict");return an(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),U1e=te({notEqual_:function(t,e){var n,r=X(t,"a","notEqual"),o=X(e,"b","notEqual");return n=Mn(r,o),r=n[0],o=n[1],Ot(r.shape,o.shape),ae.runKernelFunc((function(a){return a.notEqual(r,o)}),{a:r,b:o},null,"NotEqual")}}),W1e=te({notEqualStrict_:function(t,e){var n=X(t,"a","notEqualStrict"),r=X(e,"b","notEqualStrict");return an(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function kM(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function IM(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var lR=te({gather_:function(t,e,n){n===void 0&&(n=0);var r=X(t,"x","gather"),o=X(e,"indices","gather","int32");n=fr(n,r.shape)[0];var a=(function(i,s,u){for(var l=i.shape[u],d=[],f=1,p=1,m=0;m<u;m++)d.push(i.shape[m]),f*=i.shape[m];for(m=0;m<s.rank;m++)d.push(s.shape[m]);for(m=u+1;m<i.rank;m++)d.push(i.shape[m]),p*=i.shape[m];return{batchSize:f,sliceSize:p,dimSize:l,outputShape:d}})(r,o,n);return ae.runKernelFunc((function(i,s){var u=i.gather(r,o.flatten(),n);return s([o]),u}),{x:r,indices:o},(function(i,s){var u=s[0];return{x:function(){var l=r.shape,d=u.size,f=l.slice(0,n),p=f.length,m=l.slice(n,l.length).slice(1),g=m.length,y=kM(0,p),b=kM(p+1,p+1+g),C=IM([f,[d],m]),S=i.reshape(C),E=u.reshape([d]),_=IM([[p],y,b]),T=S.transpose(_),D=Qj(T,E,r.shape[n]),I=YE(_);return D=D.transpose(I)},indices:function(){return u}}}),"Gather",{axis:n}).reshape(a.outputShape)}}),Qj=te({unsortedSegmentSum_:function(t,e,n){var r=X(t,"x","unsortedSegmentSum"),o=X(e,"segmentIds","unsortedSegmentSum","int32");return K(Xn(n),(function(){return"numSegments must be of dtype int"})),ae.runKernelFunc((function(a,i){var s=a.unsortedSegmentSum(r,o,n);return i([o]),s}),{$x:r},(function(a,i){var s=i[0];return{$x:function(){return(function(u,l){for(var d=ZE(l,$t(l)),f=lR(u,d),p=Yj(l,rt(0,"int32")),m=f.rank-p.rank,g=0;g<m;++g)p=mu(p,g+1);p=X0(p,Df(f.shape,"bool"));var y=$t(f);return Gl(p,f,y)})(a,s)}}}))}}),V1e=function(t,e,n){return Je(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,d,f,p,m,g,y;return Ze(this,(function(b){switch(b.label){case 0:for(r=X(t,"tensor","boolMask"),o=X(e,"mask","boolMask","bool"),a=n??0,i=o.rank,s=r.shape,K(i>0,(function(){return"mask cannot be scalar"})),an(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=a;l<a+i;l++)u*=s[l];return d=s.slice(0,a).concat([u],s.slice(a+i)),f=r.reshape(d),p=o.reshape([-1]),[4,Vj(p)];case 1:return m=b.sent(),g=m.squeeze([1]),y=lR(f,g,a),t!==r&&r.dispose(),e!==o&&o.dispose(),g.dispose(),f.dispose(),p.dispose(),m.dispose(),[2,y]}}))}))};function Jj(t,e,n,r,o,a,i){a===void 0&&(a="NHWC"),K(t.length===e.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"}));var s=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),K(s.length===4,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),K(u.rank===4,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),K(n.rank===4,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var d=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];K(d===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+n.shape[2]+"."})),K(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."})),i!=null&&K(Xn(o),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var p=tR(a),m=ac(s,n.shape,r,1,o,i,!1,p),g=ae.runKernelFunc((function(y,b){var C=y.conv2dDerInput(u,n,m);return b([n,u]),C}),{dy4D:u,filter:n},(function(y,b){var C=b[0],S=b[1];return{dy4D:function(){return sc(y,C,r,o,a,1,i)},filter:function(){return cR(y,S,C.shape,r,o,a,i)}}}));return l?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}function Mw(t){var e=(function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a})(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function Zj(t,e,n,r,o){K(t.length===e.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"}));var a=t,i=e,s=!1;e.rank===4&&(s=!0,i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],l=i.shape[4];K(a.length===5,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."})),K(i.rank===5,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank})),K(n.rank===5,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),K(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),K(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var d=Sy(a,n.shape,r,1,o),f=ae.runKernelFunc((function(p){return p.conv3dDerInput(i,n,d)}),{dy5D:i});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var H1e=te({conv1d_:function(t,e,n,r,o,a,i){o===void 0&&(o="NWC"),a===void 0&&(a=1);var s=X(t,"x","conv1d"),u=X(e,"filter","conv1d"),l=s,d=!1;s.rank===2&&(d=!0,l=s.as3D(1,s.shape[0],s.shape[1])),K(l.rank===3,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),K(u.rank===3,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),i!=null&&K(Xn(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),K(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),K(ro(n,a),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"})),K(o==="NWC",(function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."}));var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),m=sc(p,f,[1,n],r,"NHWC",[1,a],i);return d?m.as2D(m.shape[2],m.shape[3]):m.as3D(m.shape[0],m.shape[2],m.shape[3])}}),sc=te({conv2d_:function(t,e,n,r,o,a,i){o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]);var s=X(t,"x","conv2d"),u=X(e,"filter","conv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),K(l.rank===4,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),K(u.rank===4,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),i!=null&&K(Xn(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var f=o==="NHWC"?l.shape[3]:l.shape[1];K(f===u.shape[2],(function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."})),K(ro(n,a),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}));var p=tR(o),m=ac(l.shape,u.shape,n,a,r,i,!1,p),g=[u,l],y=ae.runKernelFunc((function(b,C){var S=b.conv2d(l,u,m);return C([u,l]),S}),{x:l,filter:u},(function(b,C){var S=C,E=S[0],_=S[1];return K(Zd(a),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"})),{x:function(){return ez(_.shape,b,E,n,r,o)},filter:function(){return cR(_,b,E.shape,n,r,o)}}}),"Conv2D",m,g);return d?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),G1e=te({conv3d_:function(t,e,n,r,o,a){o===void 0&&(o="NDHWC"),a===void 0&&(a=[1,1,1]);var i=X(t,"x","conv3d"),s=X(e,"filter","conv3d"),u=i,l=!1;i.rank===4&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),K(u.rank===5,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),K(s.rank===5,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),K(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),K((function(p,m){return Mw(p)||Mw(m)})(n,a),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),K(o==="NDHWC",(function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."}));var d=Sy(u.shape,s.shape,n,a,r),f=ae.runKernelFunc((function(p,m){var g=p.conv3d(u,s,d);return m([u,s]),g}),{x:u,$filter:s},(function(p,m){K(Mw(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}));var g=m[0],y=m[1];return{x:function(){return Zj(g.shape,p,y,n,r)},$filter:function(){return(function(b,C,S,E,_){var T=b;b.rank===4&&(T=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]));var D=C;D.rank===4&&(D=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3])),K(T.rank===5,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+T.shape+"."})),K(D.rank===5,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."})),K(S.length===5,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+S+"."})),K(T.shape[4]===S[3],(function(){return"Error in conv3dDerFilter: depth of input "+T.shape[4]+") must match input depth in filter ("+S[3]+"."})),K(D.shape[4]===S[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+S[4]+")."}));var I=Sy(T.shape,S,E,1,_);return ae.runKernelFunc((function(k){return k.conv3dDerFilter(T,D,I)}),{x5D:T,dy5D:D})})(g,p,y.shape,n,r)}}}));return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),cR=te({conv2dDerFilter_:function(t,e,n,r,o,a,i){a===void 0&&(a="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),K(s.rank===4,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),K(u.rank===4,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),K(n.length===4,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l=a==="NHWC"?s.shape[3]:s.shape[1],d=a==="NHWC"?u.shape[3]:u.shape[1];K(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),K(d===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+n[3]+")."})),i!=null&&K(Xn(o),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var f=tR(a),p=ac(s.shape,n,r,1,o,i,!1,f);return ae.runKernelFunc((function(m){return m.conv2dDerFilter(s,u,p)}),{x4D:s,dy4D:u})}}),ez=te({conv2dDerInput_:Jj}),dR=te({depthwiseConv2d_:function(t,e,n,r,o,a,i){a===void 0&&(a=[1,1]);var s=X(t,"x","depthwiseConv2d"),u=X(e,"filter","depthwiseConv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),K(l.rank===4,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),K(u.rank===4,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),K(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),a==null&&(a=[1,1]),K(ro(n,a),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),i!=null&&K(Xn(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var f=ac(l.shape,u.shape,n,a,r,i,!0),p=[l,u],m=ae.runKernelFunc((function(g,y){var b=g.depthwiseConv2D(l,u,f);return y([l,u]),b}),{x:l,filter:u},(function(g,y){K(Zd(a),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var b=y[0],C=y[1];return{x:function(){return tz(b.shape,g,C,f)},filter:function(){return nz(b,g,C.shape,f)}}}),"DepthwiseConv2dNative",f,p);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),tz=te({depthwiseConv2dDerInput_:function(t,e,n,r){var o=e,a=!1;e.rank===3&&(a=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=ae.runKernelFunc((function(s){return s.depthwiseConv2DDerInput(o,n,r)}),{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),nz=te({depthwiseConv2dDerFilter_:function(t,e,n,r){var o=t;t.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return a.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),ae.runKernelFunc((function(i){return i.depthwiseConv2DDerFilter(o,a,r)}),{x4D:o,dy4D:a})}}),rz=te({separableConv2d_:function(t,e,n,r,o,a,i){a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC");var s=X(t,"x","separableConv2d"),u=X(e,"depthwiseFilter","separableConv2d"),l=X(n,"pointwiseFilter","separableConv2d"),d=s,f=!1;if(s.rank===3&&(f=!0,d=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");K(d.rank===4,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."})),K(u.rank===4,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),K(l.rank===4,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),K(l.shape[0]===1,(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),K(l.shape[1]===1,(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var p=u.shape[2],m=u.shape[3];K(l.shape[2]===p*m,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*m+", but got "+l.shape[2]+"."}));var g=dR(d,u,r,o,i,a),y=sc(g,l,1,"valid",i);return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),$1e=te({conv2dTranspose_:function(t,e,n,r,o,a){return Jj(n,X(t,"x","conv2dTranspose"),X(e,"filter","conv2dTranspose"),r,o,"NHWC",a)}}),q1e=te({conv3dTranspose_:function(t,e,n,r,o){return Zj(n,X(t,"x","conv3dTranspose"),X(e,"filter","conv3dTranspose"),r,o)}}),oz=te({matMul_:function(t,e,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var a=X(t,"a","matMul"),i=X(e,"b","matMul");o=Mn(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],d=r?i.shape[i.rank-2]:i.shape[i.rank-1],f=a.shape.slice(0,-2),p=i.shape.slice(0,-2),m=Qe(f),g=Qe(p);K(a.rank>=2&&i.rank>=2&&a.rank===i.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."})),K(br(f,p),(function(){return"Error in matMul: outer dimensions ("+f+") and ("+p+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."})),K(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var y=a.shape.slice(0,-2).concat([l,d]),b=n?a.as3D(m,s,l):a.as3D(m,l,s),C=r?i.as3D(g,d,u):i.as3D(g,u,d),S={transposeA:n,transposeB:r};return ae.runKernelFunc((function(E,_){var T=E.batchMatMul(b,C,n,r);return _([b,C]),T}),{a:b,b:C},(function(E,_){var T=_,D=T[0],I=T[1];return n||r?!n&&r?{a:function(){return E.matMul(I,!1,!1)},b:function(){return E.matMul(D,!0,!1)}}:n&&!r?{a:function(){return I.matMul(E,!1,!0)},b:function(){return D.matMul(E,!1,!1)}}:{a:function(){return I.matMul(E,!0,!0)},b:function(){return E.matMul(D,!0,!0)}}:{a:function(){return E.matMul(I,!1,!0)},b:function(){return D.matMul(E,!0,!1)}}}),"BatchMatMul",S).reshape(y)}}),X1e=te({dot_:function(t,e){var n=X(t,"t1","dot"),r=X(e,"t2","dot");K(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var o=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];return K(o===a,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."})),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),K1e=te({outerProduct_:function(t,e){var n=X(t,"v1","outerProduct"),r=X(e,"v2","outerProduct");return K(n.rank===1&&r.rank===1,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),fm=te({reverse_:function(t,e){var n=X(t,"x","reverse");if(n.rank===0)return n.clone();var r=fr(e,n.shape);return ae.runKernelFunc((function(o){return o.reverse(n,r)}),{$x:n},(function(o){return{$x:function(){return o.reverse(r)}}})).reshapeAs(n)}}),Y1e=te({reverse1d_:function(t){var e=X(t,"x","reverse");return K(e.rank===1,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."})),fm(e,0)}}),Q1e=te({reverse2d_:function(t,e){var n=X(t,"x","reverse");return K(n.rank===2,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),fm(n,e)}}),J1e=te({reverse3d_:function(t,e){var n=X(t,"x","reverse");return K(n.rank===3,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),fm(n,e)}}),Z1e=te({reverse4d_:function(t,e){var n=X(t,"x","reverse");return K(n.rank===4,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),fm(n,e)}});function az(t,e,n,r,o,a){var i=X(t,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),K(s.rank===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),K(ro(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),a!=null&&K(Xn(o),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=Hl(s.shape,e,n,r,o,a);if(l.filterWidth===1&&l.filterHeight===1&&br(l.inShape,l.outShape))return i.clone();var d=[s],f=ae.runKernelFunc((function(p,m){var g=p.maxPool(s,l);return m([s,g]),g}),{x:s},(function(p,m){var g=m[0],y=m[1];return{x:function(){return(function(b,C,S,E,_,T,D,I){var k=X(b,"dy","maxPoolBackprop"),M=X(C,"input","maxPoolBackprop"),O=X(S,"output","maxPoolBackprop");K(M.rank===k.rank,(function(){return"Rank of input ("+M.rank+") does not match rank of dy ("+k.rank+")"})),K(ro(_,T),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+T+"'"})),K(k.rank===4,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+k.rank+"."})),K(M.rank===4,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+M.rank+"."}));var F=Hl(M.shape,E,_,T,D,I);return ae.runKernelFunc((function(j){return j.maxPoolBackprop(k,M,O,F)}),{$dy:k,$input:M})})(p,g,y,e,n,r,o)}}}),"MaxPool",l,d);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function iz(t,e,n,r,o,a){var i=X(t,"x","avgPool","float32");K(ro(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),K(s.rank===4,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),a!=null&&K(Xn(o),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=Hl(s.shape,e,n,r,o,a);if(l.filterWidth===1&&l.filterHeight===1&&br(l.inShape,l.outShape))return i.clone();var d=ae.runKernelFunc((function(f){return f.avgPool(s,l)}),{x:s},(function(f){return{x:function(){return(function(p,m,g,y,b,C){var S=X(p,"dy","avgPoolBackprop"),E=X(m,"input","avgPoolBackprop");K(E.rank===S.rank,(function(){return"Rank of input ("+E.rank+") does not match rank of dy ("+S.rank+")"})),K(ro(y,b),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+b+"'"}));var _=E,T=S,D=!1;E.rank===3&&(D=!0,_=E.as4D(1,E.shape[0],E.shape[1],E.shape[2]),T=S.as4D(1,S.shape[0],S.shape[1],S.shape[2])),K(T.rank===4,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."})),K(_.rank===4,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+_.rank+"."}));var I=Hl(_.shape,g,y,b,C),k=ae.runKernelFunc((function(M){return M.avgPoolBackprop(T,_,I)}),{dy4D:T,input4D:_});return D?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k})(f,s,e,n,r,o)}}}),"AvgPool",l);return d=d.cast(i.dtype),u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var ko=te({maxPool_:function(t,e,n,r,o){return az(t,e,n,1,r,o)}}),ewe=te({avgPool_:function(t,e,n,r,o){return iz(t,e,n,1,r,o)}}),twe=te({pool_:function(t,e,n,r,o,a){o==null&&(o=[1,1]),a==null&&(a=1),r===0&&(r="valid");var i=X(t,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),K(ro(a,o),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"}));var l,d=Hl(s.shape,e,a,o,r),f=[d.dilationHeight,d.dilationWidth];l=r==="same"?(function(_,T){var D=_.map((function(M,O){return M+(M-1)*(T[O]-1)})).map((function(M){return M-1})),I=D.map((function(M){return Math.floor(M/2)})),k=D.map((function(M,O){return M-I[O]}));return D.map((function(M,O){return[I[O],k[O]]}))})([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var p=f[0]===1&&f[1]===1,m=(function(_,T,D){var I=D.map((function(W){return W[0]})),k=D.map((function(W){return W[1]})),M=_.concat(I,k),O=T.map((function(W,q){return(W-M[q]%W)%W})),F=k.map((function(W,q){return W+O[q]})),j=T.map((function(W,q){return[I[q],F[q]]})),G=T.map((function(W,q){return[0,O[q]]}));return[j,G]})([d.inHeight,d.inWidth],f,l),g=m[0],y=m[1],b=p?r:"valid",C=p?s:ZL(s,f,g),S=(n==="avg"?function(){return iz(C,e,a,1,b)}:function(){return az(C,e,a,1,b)})(),E=p?S:JL(S,f,y);return u?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),nwe=te({maxPool3d_:function(t,e,n,r,o,a,i){a===void 0&&(a="NDHWC");var s=X(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),K(u.rank===5,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),K(a==="NDHWC",(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),K(ro(n,i),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),o!=null&&K(Xn(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var d=Cy(u.shape,e,n,i,r,o,a),f=ae.runKernelFunc((function(p,m){var g=p.maxPool3d(u,d);return m([u,g]),g}),{x:u},(function(p,m){var g=m[0],y=m[1];return{x:function(){return(function(b,C,S,E,_,T,D,I){var k=X(b,"dy","maxPool3dBackprop"),M=X(C,"input","maxPool3dBackprop"),O=X(S,"output","maxPool3dBackprop"),F=k,j=M,G=O,W=!1;M.rank===4&&(W=!0,F=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),j=M.as5D(1,M.shape[0],M.shape[1],M.shape[2],M.shape[3]),G=O.as5D(1,O.shape[0],O.shape[1],O.shape[2],O.shape[3])),K(F.rank===5,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+F.rank+"."})),K(j.rank===5,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+j.rank+"."})),K(G.rank===5,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+G.rank+"."})),T==null&&(T=[1,1,1]),K(ro(_,T),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+T+"'"})),I!=null&&K(Xn(D),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+I+" but got pad "+D+"."}));var q=Cy(j.shape,E,_,T,D,I),P=ae.runKernelFunc((function(U){return U.maxPool3dBackprop(F,j,G,q)}),{dy5D:F,input5D:j});return W?P.as4D(P.shape[1],P.shape[2],P.shape[3],P.shape[4]):P})(p,g,y,e,n,i,r,o)}}}));return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),rwe=te({avgPool3d_:function(t,e,n,r,o,a,i){a===void 0&&(a="NDHWC");var s=X(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),K(u.rank===5,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),K(a==="NDHWC",(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),K(ro(n,i),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),o!=null&&K(Xn(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var d=Cy(u.shape,e,n,i,r,o,a),f=ae.runKernelFunc((function(p){return p.avgPool3d(u,d)}),{x:u},(function(p){return{x:function(){return(function(m,g,y,b,C,S,E){var _=X(m,"dy","avgPool3dBackprop"),T=X(g,"input","avgPool3dBackprop"),D=_,I=T,k=!1;T.rank===4&&(k=!0,D=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]),I=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),K(D.rank===5,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."})),K(I.rank===5,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+I.rank+"."})),C==null&&(C=[1,1,1]),K(ro(b,C),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+C+"'"})),E!=null&&K(Xn(S),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+S+"."}));var M=Cy(I.shape,y,b,C,S,E),O=ae.runKernelFunc((function(F){return F.avgPool3dBackprop(D,I,M)}),{dy5D:D,input5D:I});return k?O.as4D(O.shape[1],O.shape[2],O.shape[3],O.shape[4]):O})(p,u,e,n,i,r,o)}}}));return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),owe=te({maxPoolWithArgmax_:function(t,e,n,r,o){o===void 0&&(o=!1);var a=X(t,"x","maxPoolWithArgmax"),i={filterSize:e,strides:n,pad:r,includeBatchInIndex:o},s=ae.runKernel("MaxPoolWithArgmax",{x:a},i);return{result:s[0],indexes:s[1]}}}),Bu=te({slice_:function(t,e,n){var r,o,a=X(t,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach((function(u){K(u!==-1,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=n==null?new Array(a.rank).fill(-1):typeof n=="number"?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map((function(u,l){return u>=0?u:(K(u===-1,(function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."})),a.shape[l]-r[l])})),ebe(a,r,o);var i=a.shape,s={begin:r,size:o};return ae.runKernelFunc((function(u){return u.slice(a,r,o)}),{x:a},(function(u){for(var l=[],d=0;d<u.rank;d++)l.push([r[d],i[d]-r[d]-o[d]]);return{x:function(){return Ms(u,l)}}}),"Slice",s)}}),awe=te({slice1d_:function(t,e,n){var r=X(t,"x","slice1d");return K(r.rank===1,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Bu(r,[e],[n])}}),iwe=te({slice2d_:function(t,e,n){var r=X(t,"x","slice2d");return K(r.rank===2,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Bu(r,e,n)}}),swe=te({slice3d_:function(t,e,n){var r=X(t,"x","slice3d");return K(r.rank===3,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Bu(r,e,n)}}),uwe=te({slice4d_:function(t,e,n){var r=X(t,"x","slice4d");return K(r.rank===4,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Bu(r,e,n)}});function sz(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(So(e.shape,r))),t.rank<n.rank&&(t=t.reshape(So(t.shape,r))),{x:function(){var a=t.mul(n.equal(e).cast(t.dtype));return o==null?a:a.transpose(o)}}}var lwe=te({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","all","bool"),o=fr(e,r.shape),a=o,i=ji(a,r.rank);i!=null&&(r=r.transpose(i),a=zi(a.length,r.rank));var s=ae.runKernelFunc((function(l){return l.all(r,a)}),{$x:r});if(n){var u=So(s.shape,o);return s.reshape(u)}return s}}),cwe=te({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","any","bool"),o=fr(e,r.shape),a=o,i=ji(a,r.rank);i!=null&&(r=r.transpose(i),a=zi(a.length,r.rank));var s=ae.runKernelFunc((function(l){return l.any(r,a)}),{$x:r});if(n){var u=So(s.shape,o);return s.reshape(u)}return s}}),dwe=te({argMax_:function(t,e){e===void 0&&(e=0);var n=X(t,"x","argMax");e==null&&(e=0);var r=fr(e,n.shape),o=ji(r,n.rank);o!=null&&(n=n.transpose(o),r=zi(r.length,n.rank));var a={axis:r[0]},i=[n];return ae.runKernelFunc((function(s,u){var l=s.argMax(n,r[0]);return u([n]),l}),{x:n},(function(s,u){var l=u[0];return{x:function(){return $t(l)}}}),"ArgMax",a,i)}}),fwe=te({argMin_:function(t,e){e===void 0&&(e=0);var n=X(t,"x","argMin");e==null&&(e=0);var r=fr(e,n.shape),o=ji(r,n.rank);return o!=null&&(n=n.transpose(o),r=zi(r.length,n.rank)),ae.runKernelFunc((function(a,i){var s=a.argMin(n,r[0]);return i([n]),s}),{$x:n},(function(a,i){var s=i[0];return{$x:function(){return $t(s)}}}))}}),hwe=te({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","logSumExp"),o=fr(e,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=So(s.shape,o);return s.reshape(u)}return s}}),pwe=te({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","max"),o=r,a=fr(e,r.shape),i=a,s=ji(i,r.rank);s!=null&&(r=r.transpose(s),i=zi(i.length,r.rank));var u=[r],l=ae.runKernelFunc((function(f,p){var m=f.max(r,i);return p([o,m]),m}),{x:r},(function(f,p){return sz(f,p[1],p[0],a,s)}),"Max",{axes:i},u,[!0]);if(n){var d=So(l.shape,a);l=l.reshape(d)}return l}}),mwe=te({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","mean"),o=fr(e,r.shape),a=Qe(Br(r.shape,o)[1]);return H0((function(i){var s=rt(a);return{value:(s.dtype===i.dtype?i:i.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=i.shape.slice();return o.forEach((function(d){l[d]=1})),u.reshape(l).mul(Df(i.shape,"float32")).div(a)}}}))(r)}}),vwe=te({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","min"),o=r,a=fr(e,r.shape),i=a,s=ji(i,r.rank);s!=null&&(r=r.transpose(s),i=zi(i.length,r.rank));var u=[r],l=ae.runKernelFunc((function(f,p){var m=f.min(r,i);return p([o,m]),m}),{x:r},(function(f,p){return sz(f,p[1],p[0],a,s)}),"Min",{axes:i},u,[!0]);if(n){var d=So(l.shape,a);l=l.reshape(d)}return l}}),gwe=te({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=fr(e,(t=X(t,"x","moments")).shape),o=t.mean(r,n),a=o.shape;n||(a=So(o.shape,r));var i=t.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,n)}}}),vu=te({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=fr(e,r.shape);return H0((function(a){var i=ji(o,a.rank),s=o,u=a;i!=null&&(u=a.transpose(i),s=zi(s.length,a.rank));var l=function(m){var g=a.shape.slice();return o.forEach((function(y){g[y]=1})),m.reshape(g).mul(Df(a.shape,"float32"))},d={axes:s},f=ae.runKernelFunc((function(m){return m.sum(u,s)}),{x:u},(function(m){return{x:function(){return l(m)}}}),"Sum",d);if(n){var p=So(f.shape,o);f=f.reshape(p)}return{value:f,gradFunc:l}}))(r)}}),ywe=te({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=fr(e,r.shape),a=ji(o,r.rank),i=o,s=r;a!=null&&(s=r.transpose(a),i=zi(i.length,r.rank));var u=ae.runKernelFunc((function(d){return d.prod(s,i)}),{permutedX:s});if(n){var l=So(u.shape,o);u=u.reshape(l)}return u}}),uz=te({elu_:function(t){var e=X(t,"x","elu");return ae.runKernelFunc((function(n,r){var o=n.elu(e);return r([o]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return ae.runKernelFunc((function(a){return a.eluDer(n,o)}),{dy:n,y:o})}}}))}}),bwe=te({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=X(t,"x","leakyRelu");return ZE(rt(e).mul(n),n)}}),lz=te({prelu_:function(t,e){var n=X(t,"x","prelu"),r=X(e,"alpha","prelu");return ae.runKernelFunc((function(o,a){var i=o.prelu(n,r);return a([n,r]),i}),{x:n,alpha:r},(function(o,a){var i=a[0],s=a[1],u=i.greater(0);return{x:function(){return Gl(u,o,o.mul(s))},alpha:function(){var l=Gl(u,$t(o),o.mul(i)),d=sr(s.shape,o.shape);return d.length>0&&(l=l.sum(d)),l.reshape(s.shape)}}}),"Prelu")}}),K0=te({relu_:function(t){var e=X(t,"x","relu");return e.dtype==="bool"?e.toInt():ae.runKernelFunc((function(n,r){var o=n.relu(e);return r([e]),o}),{x:e},(function(n,r){var o=r[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}}),"Relu")}}),cz=te({relu6_:function(t){var e=X(t,"x","relu6");return e.dtype==="bool"?e.toInt():ae.runKernelFunc((function(n,r){var o=n.relu6(e);return r([e]),o}),{x:e},(function(n,r){var o=r[0],a=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(a.toFloat())}}}),"Relu6")}}),xwe=te({selu_:function(t){var e=X(t,"x","selu");return ae.runKernelFunc((function(n,r){var o=n.selu(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){var a=o.greater(rt(0)),i=rt(iR),s=rt(sR),u=n.mul(s),l=n.mul(i).mul(o.toFloat().exp());return Gl(a,u,l)}}}))}}),wwe=te({localResponseNormalization_:function(t,e,n,r,o){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var a=X(t,"x","localResponseNormalization");K(a.rank===4||a.rank===3,(function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."})),K(Xn(e),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."}));var i=a,s=!1;a.rank===3&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=ae.runKernelFunc((function(l,d){var f=l.localResponseNormalization4D(i,e,n,r,o);return d([i,f]),f}),{x4D:i},(function(l,d){var f=d[0],p=d[1];return{x4D:function(){return ae.runKernelFunc((function(m){return m.LRNGrad(l,f,p,e,n,r,o)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),dz=te({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=(function s(u,l,d){if(d===void 0&&(d=null),u.rank===0)return u.abs();if(u.rank!==1&&d===null)return s(u.reshape([-1]),l,d);if(u.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(l===1)return u.abs().sum(d);if(l===1/0)return u.abs().max(d);if(l===-1/0)return u.abs().min(d);if(l==="euclidean"||l===2)return u.abs().pow(rt(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(d)&&d.length===2){if(l===1)return u.abs().sum(d[0]).max(d[1]-1);if(l===1/0)return u.abs().sum(d[1]).max(d[0]);if(l===-1/0)return u.abs().sum(d[1]).min(d[0]);if(l==="fro"||l==="euclidean")return u.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+d)})(t=X(t,"x","norm"),e,n),a=o.shape;if(r){var i=fr(n,t.shape);a=So(o.shape,i)}return o.reshape(a)}}),Cwe=te({basicLSTMCell_:function(t,e,n,r,o,a){var i=X(t,"forgetBias","basicLSTMCell"),s=X(e,"lstmKernel","basicLSTMCell"),u=X(n,"lstmBias","basicLSTMCell"),l=X(r,"data","basicLSTMCell"),d=X(o,"c","basicLSTMCell"),f=X(a,"h","basicLSTMCell"),p=l.concat(f,1).matMul(s).add(u),m=p.shape[0],g=p.shape[1]/4,y=[m,g],b=p.slice([0,0],y),C=p.slice([0,g],y),S=p.slice([0,2*g],y),E=p.slice([0,3*g],y),_=b.sigmoid().mulStrict(C.tanh()).addStrict(d.mulStrict(i.add(S).sigmoid())),T=_.tanh().mulStrict(E.sigmoid());return[_,T]}}),Swe=te({multiRNNCell_:function(t,e,n,r){for(var o=X(e,"data","multiRNNCell"),a=my(n,"c","multiRNNCell"),i=my(r,"h","multiRNNCell"),s=o,u=[],l=0;l<t.length;l++){var d=t[l](s,a[l],i[l]);u.push(d[0]),u.push(d[1]),s=d[1]}var f=[],p=[];for(l=0;l<u.length;l+=2)f.push(u[l]),p.push(u[l+1]);return[f,p]}}),Ewe=te({movingAverage_:function(t,e,n,r,o){o===void 0&&(o=!0);var a=X(t,"v","movingAverage"),i=X(e,"x","movingAverage"),s=X(n,"decay","movingAverage");gye(a,i),K(br(a.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=rt(1),l=u.sub(s),d=i.sub(a).mul(l);if(o){K(r!=null,(function(){return"When using zeroDebias: true, step is required."}));var f=X(r,"step","movingAverage");d=d.div(u.sub(xy(s,f)))}return a.add(d)}}),Rwe=te({stridedSlice_:function(t,e,n,r,o,a,i,s,u){if(o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),i!==0)throw new Error("ellipsis mask is not yet supported");var l=X(t,"x","stridedSlice"),d=dM(s),f=l.shape.slice();d.forEach((function(b){e[b]=0,n[b]=1,f.splice(b,0,1)})),l=l.reshape(f);for(var p=0;p<l.rank;p++)e[p]=tbe(o,e,r,l.shape,p),n[p]=nbe(a,n,r,l.shape,p),r[p]=r[p]||1;var m=dM(u);m.forEach((function(b){n[b]=e[b]+1,r[b]=1}));var g=eR(e,n,r),y=g.filter((function(b,C){return m.indexOf(C)===-1}));return r.every((function(b){return b===1}))?Bu(l,e,g).reshape(y):ae.runKernelFunc((function(b){return b.stridedSlice(l,e,n,r)}),{$x:l}).reshape(y)}}),_we=te({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=X(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var a=ae.runKernelFunc((function(i){return i.topk(r,e,n)}),{$x:r});return{values:a[0],indices:a[1]}}}),Twe=te({scatterND_:function(t,e,n){var r=X(t,"indices","scatterND","int32"),o=X(e,"updates","scatterND");return Z0e(o,r,n),ae.runKernelFunc((function(a){return a.scatterND(r,o,n)}),{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),fR=te({fft_:function(t){K(t.dtype==="complex64",(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."}));var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return ae.runKernelFunc((function(o){return o.fft(r)}),{input:t}).reshape(t.shape)}}),_y=te({ifft_:function(t){K(t.dtype==="complex64",(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."}));var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return ae.runKernelFunc((function(o){return o.ifft(r)}),{input:t}).reshape(t.shape)}}),hR=te({rfft_:function(t,e){K(t.dtype==="float32",(function(){return"The dtype for rfft() must be real value but got "+t.dtype}));var n,r=t.shape[t.shape.length-1],o=t.size/r;if(e!=null&&e<r){var a=t.shape.map((function(C){return 0})),i=t.shape.map((function(C){return C}));i[t.shape.length-1]=e,n=t.slice(a,i),r=e}else if(e!=null&&e>r){var s=t.shape.map((function(C){return C}));s[t.shape.length-1]=e-r,n=t.concat(Vn(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=_r(n,u).as2D(o,r),d=fR(l),f=Math.floor(r/2)+1,p=pa(d),m=yi(d),g=p.split([f,r-f],p.shape.length-1),y=m.split([f,r-f],m.shape.length-1),b=n.shape.slice();return b[n.shape.length-1]=f,_r(g[0],y[0]).reshape(b)}}),fz=te({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=_y(r);return pa(o)}var a=[n,2*(e-1)],i=pa(t).as2D(n,e),s=yi(t).as2D(n,e),u=i.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(rt(-1)),d=i.concat(u,1),f=s.concat(l,1);return r=_r(d,f).as2D(a[0],a[1]),o=_y(r),pa(o)}}),Awe=Object.freeze({fft:fR,ifft:_y,rfft:hR,irfft:fz}),Nwe=te({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var o=X(t,"sparseIndices","sparseToDense","int32"),a=X(e,"sparseValues","sparseToDense"),i=X(r,"defaultValue","sparseToDense",a.dtype);return(function(s,u,l,d){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,p=s.rank>1?s.shape[1]:1;if(l.length!==p)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+p+".");var m=u.size;if(u.rank!==0&&(u.rank!==1||m!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")})(o,a,n,i),ae.runKernelFunc((function(s){return s.sparseToDense(o,a,n,i)}),{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}}),Dwe=te({gatherND_:function(t,e){var n=X(e,"indices","gatherND","int32"),r=X(t,"x","gatherND");return ae.runKernelFunc((function(o){return o.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),kwe=te({diag_:function(t){var e=X(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return ae.runKernelFunc((function(r){return r.diag(e)}),{$x:e}).reshape(n)}}),Iwe=te({dropout_:function(t,e,n,r){var o=X(t,"x","dropout");if(K(o.dtype==="float32",(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."})),K(e>=0&&e<1,(function(){return"rate must be a float in the range [0, 1), but got "+e+"."})),e===0)return t instanceof wn?o.clone():o;var a=(function(u,l){if(l==null)return u.shape.slice();if(br(u.shape,l))return l;if(u.shape.length===l.length){for(var d=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?d.push(u.shape[f]):d.push(l[f]);return d}return l})(o,n),i=1-e,s=$j(a,0,1,"float32",r).add(i).floor().div(i);return o.mul(s)}});function hz(t,e,n){for(var r=1-t%2,o=new Float32Array(t),a=0;a<t;++a){var i=2*Math.PI*a/(t+r-1);o[a]=e-n*Math.cos(i)}return qa(o,"float32")}var pR=te({hannWindow_:function(t){return hz(t,.5,.5)}}),pz=te({hammingWindow_:function(t){return hz(t,.54,.46)}}),mR=te({frame_:function(t,e,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var a=0,i=[];a+e<=t.size;)i.push(Bu(t,a,e)),a+=n;if(r)for(;a<t.size;){var s=a+e-t.size,u=Ea([Bu(t,a,e-s),Fl([s],o)]);i.push(u),a+=n}return i.length===0?Pl([],[0,e]):Ea(i).as2D(i.length,e)}}),mz=te({stft_:function(t,e,n,r,o){var a;o===void 0&&(o=pR),r==null&&(a=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=mR(t,e,n),s=Wn(i,o(e)),u=[],l=0;l<i.shape[0];l++)u.push(hR(s.slice([l,0],[1,e]),r));return Ea(u)}}),Mwe=Object.freeze({hannWindow:pR,hammingWindow:pz,frame:mR,stft:mz}),Wr,Owe=function(t,e,n){return n===void 0&&(n=1),Je(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,d,f,p,m,g,y,b;return Ze(this,(function(C){switch(C.label){case 0:return r=X(t,"predictions","inTopK"),o=X(e,"targets","inTopK"),K(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),K(r.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank})),an(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],K(n>0&&n<=a,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n})),[4,r.data()];case 1:return i=C.sent(),[4,o.data()];case 2:for(s=C.sent(),u=[i.length/a,a],d=u[1],f=Yd("bool",l=u[0]),p=0;p<l;p++){for(m=p*d,g=i.subarray(m,m+d),y=[],b=0;b<g.length;b++)y.push({value:g[b],index:b});for(y.sort((function(S,E){return E.value-S.value})),f[p]=0,b=0;b<n;b++)if(y[b].index===s[p]){f[p]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),[2,Ar(f,o.shape,"bool")]}}))}))};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Wr||(Wr={}));var Pwe=te({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=Wr.SUM_BY_NONZERO_WEIGHTS);var o=X(t,"labels","absoluteDifference"),a=X(e,"predictions","absoluteDifference"),i=null;n!=null&&(i=X(n,"weights","absoluteDifference")),an(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return Os(s,i,r)}}),Os=te({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=Wr.SUM_BY_NONZERO_WEIGHTS);var r=X(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=X(e,"weights","computeWeightedLoss"));var a=o==null?r:r.mul(o);if(n===Wr.NONE)return a;if(n===Wr.SUM)return a.sum();if(n===Wr.MEAN){if(o==null)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(rt(i)):s}if(n===Wr.SUM_BY_NONZERO_WEIGHTS){if(o==null)return a.sum().div(rt(r.size));var u=o.mul(Df(r.shape)).notEqual(rt(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Fwe=te({cosineDistance_:function(t,e,n,r,o){o===void 0&&(o=Wr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"labels","cosineDistance"),i=X(e,"predictions","cosineDistance"),s=null;r!=null&&(s=X(r,"weights","cosineDistance")),an(a.shape,i.shape,"Error in cosineDistance: ");var u=rt(1).sub(a.mul(i).sum(n,!0));return Os(u,s,o)}}),Bwe=te({hingeLoss_:function(t,e,n,r){r===void 0&&(r=Wr.SUM_BY_NONZERO_WEIGHTS);var o=X(t,"labels","hingeLoss"),a=X(e,"predictions","hingeLoss"),i=null;n!=null&&(i=X(n,"weights","hingeLoss")),an(o.shape,a.shape,"Error in hingeLoss: ");var s=rt(1);o=rt(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return Os(u,i,r)}}),Lwe=te({huberLoss_:function(t,e,n,r,o){r===void 0&&(r=1),o===void 0&&(o=Wr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"labels","huberLoss"),i=X(e,"predictions","huberLoss"),s=null;n!=null&&(s=X(n,"weights","huberLoss")),an(a.shape,i.shape,"Error in huberLoss: ");var u=rt(r),l=i.sub(a).abs(),d=dj(l,u),f=l.sub(d),p=rt(.5).mul(d.square()).add(u.mul(f));return Os(p,s,o)}}),jwe=te({logLoss_:function(t,e,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=Wr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"labels","logLoss"),i=X(e,"predictions","logLoss"),s=null;n!=null&&(s=X(n,"weights","logLoss")),an(a.shape,i.shape,"Error in logLoss: ");var u=rt(1),l=rt(r),d=a.mul(i.add(l).log()).neg().sub(u.sub(a).mul(u.sub(i).add(l).log()));return Os(d,s,o)}}),zwe=te({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=Wr.SUM_BY_NONZERO_WEIGHTS);var o=X(t,"labels","meanSquaredError"),a=X(e,"predictions","meanSquaredError"),i=null;n!=null&&(i=X(n,"weights","meanSquaredError")),an(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return Os(s,i,r)}}),Uwe=te({sigmoidCrossEntropy_:function(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=Wr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"multiClassLabels","sigmoidCrossEntropy"),i=X(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=X(n,"weights","sigmoidCrossEntropy")),an(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=rt(r),l=rt(1),d=rt(.5);a=a.mul(l.sub(u)).add(d.mul(u))}var f=(function(p,m){var g=X(p,"labels","sigmoidCrossEntropyWithLogits"),y=X(m,"logits","sigmoidCrossEntropyWithLogits");an(g.shape,y.shape,"Error in sigmoidCrossEntropyWithLogits: ");var b=y.relu(),C=y.mul(g),S=y.abs().neg().exp().log1p();return b.sub(C).add(S)})(a,i);return Os(f,s,o)}}),Wwe=te({softmaxCrossEntropy_:function(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=Wr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"onehotLabels","softmaxCrossEntropy"),i=X(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=X(n,"weights","softmaxCrossEntropy")),an(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=rt(r),l=rt(1),d=rt(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(d))}var f=(function(p,m,g){if(g===void 0&&(g=-1),g===-1&&(g=m.rank-1),g!==m.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+m.rank+" and dim was "+g);return H0((function(y,b,C){var S=b.logSumExp([g],!0),E=b.toFloat().sub(S);return C([y,E]),{value:E.mul(y).neg().sum([g]),gradFunc:function(_,T){var D=T[0],I=T[1],k=So(_.shape,[g]);return[_.reshape(k).mul(D.toFloat().sub(I.exp())),_.reshape(k).mul(I.exp().sub(D.toFloat()))]}}}))(p,m)})(a,i);return Os(f,s,o)}}),Vwe=Object.freeze({get Reduction(){return Wr},absoluteDifference:Pwe,computeWeightedLoss:Os,cosineDistance:Fwe,hingeLoss:Bwe,huberLoss:Lwe,logLoss:jwe,meanSquaredError:zwe,sigmoidCrossEntropy:Uwe,softmaxCrossEntropy:Wwe});function MM(t,e){return e===void 0&&(e=!1),ae.tidy((function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=Gj(n),a=t.clone(),i=Pl([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(f){var p,m=a,g=s,y=o;p=ae.tidy((function(){var b=a.slice([f,f],[n-f,1]),C=b.norm(),S=a.slice([f,f],[1,1]),E=Pl([[-1]]).where(S.greater(0),Pl([[1]])),_=S.sub(E.mul(C)),T=b.div(_);s=T.shape[0]===1?i.clone():i.concat(T.slice([1,0],[T.shape[0]-1,T.shape[1]]),0);var D=E.matMul(_).div(C).neg(),I=a.slice([f,0],[n-f,r]),k=D.mul(s),M=s.transpose();if(f===0)a=I.sub(k.matMul(M.matMul(I)));else{var O=I.sub(k.matMul(M.matMul(I)));a=a.slice([0,0],[f,r]).concat(O,0)}var F=k.transpose(),j=o.slice([0,f],[n,o.shape[1]-f]);if(f===0)o=j.sub(j.matMul(s).matMul(F));else{var G=j.sub(j.matMul(s).matMul(F));o=o.slice([0,0],[n,f]).concat(G,1)}return[s,a,o]})),s=p[0],a=p[1],o=p[2],wo([m,g,y])},d=0;d<u;++d)l(d);return!e&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]}))}var Hwe=te({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=X(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,a=r.shape.slice(-2),i=a[0],s=a[1];if(!(e<=i))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=i),n<0&&(n=s);var u=vy(0,i,1,"int32").reshape([-1,1]),l=vy(0,s,1,"int32"),d=Ua(u,l),f=X0(d.lessEqual(rt(+e,"int32")),d.greaterEqual(rt(-n,"int32"))),p=Vn([i,s],r.dtype);return Pu(U0(r.reshape([-1,i,s])).map((function(m){return Gl(f,m,p)}))).reshape(o)}}),Gwe=te({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,K(t!=null&&t.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=t[0].shape[0],r=function(u){K(t[u].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"}))},o=1;o<t.length;++o)r(o)}else e=!0,t=QE(t,t.shape[0],0).map((function(u){return ej(u,[0])}));K(t.length<=t[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."}));var a=[],i=t,s=function(u){a.push(ae.tidy((function(){var l=i[u];if(u>0)for(var d=0;d<u;++d){var f=vu(a[d].mulStrict(l)).mul(a[d]);l=l.sub(f)}return l.div(dz(l,"euclidean"))})))};for(o=0;o<t.length;++o)s(o);return e?Pu(a,0):a}}),$we=te({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return MM(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce((function(i,s){return i*s})),r=U0(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],a=[];return r.forEach((function(i){var s=MM(i,e),u=s[0],l=s[1];o.push(u),a.push(l)})),[Pu(o,0).reshape(t.shape),Pu(a,0).reshape(t.shape)]}}),qwe=Object.freeze({bandPart:Hwe,gramSchmidt:Gwe,qr:$we});function Y0(t,e,n,r,o,a){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),a==null&&(a=0);var i=t.shape[0];return n=Math.min(n,i),K(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),K(t.rank===2,(function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"})),K(t.shape[1]===4,(function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]})),K(e.rank===1,(function(){return"scores must be a 1D tensor"})),K(e.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+e.shape[0]})),K(0<=a&&a<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}var Xwe=te({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=X(t,"images","resizeBilinear");K(r.rank===3||r.rank===4,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),K(e.length===2,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."}));var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=ae.runKernelFunc((function(l,d){return d([o]),l.resizeBilinear(o,i,s,n)}),{x:o},(function(l,d){return{x:function(){return ae.runKernelFunc((function(f){return f.resizeBilinearBackprop(l,d[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Kwe=te({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=X(t,"images","resizeNearestNeighbor");K(r.rank===3||r.rank===4,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),K(e.length===2,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."})),K(r.dtype==="float32"||r.dtype==="int32",(function(){return"`images` must have `int32` or `float32` as dtype"}));var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=ae.runKernelFunc((function(l,d){return d([o]),l.resizeNearestNeighbor(o,i,s,n)}),{batchImages:o},(function(l,d){return{batchImages:function(){return ae.runKernelFunc((function(f){return f.resizeNearestNeighborBackprop(l,d[0],n)}),{})}}}));return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Ywe=te({nonMaxSuppression_:function(t,e,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var a=X(t,"boxes","nonMaxSuppression"),i=X(e,"scores","nonMaxSuppression"),s=Y0(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return ae.runKernelFunc((function(l){return l.nonMaxSuppression(a,i,n,r,o)}),{boxes:a,scores:i},null,"NonMaxSuppressionV3",u)}}),Qwe=function(t,e,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),Je(this,void 0,void 0,(function(){var a,i,s,u,l,d,f;return Ze(this,(function(p){switch(p.label){case 0:return a=X(t,"boxes","nonMaxSuppressionAsync"),i=X(e,"scores","nonMaxSuppressionAsync"),s=Y0(a,i,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([a.data(),i.data()])];case 1:return u=p.sent(),l=u[0],d=u[1],f=nR(l,d,n,r,o),a!==t&&a.dispose(),i!==e&&i.dispose(),[2,f]}}))}))},Jwe=te({nonMaxSuppressionWithScore_:function(t,e,n,r,o,a){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var i=X(t,"boxes","nonMaxSuppression"),s=X(e,"scores","nonMaxSuppression"),u=Y0(i,s,n,r,o,a),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},d=ae.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},l);return{selectedIndices:d[0],selectedScores:d[1]}}}),Zwe=function(t,e,n,r,o,a){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),Je(this,void 0,void 0,(function(){var i,s,u,l,d,f,p;return Ze(this,(function(m){switch(m.label){case 0:return i=X(t,"boxes","nonMaxSuppressionAsync"),s=X(e,"scores","nonMaxSuppressionAsync"),u=Y0(i,s,n,r,o,a),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([i.data(),s.data()])];case 1:return l=m.sent(),d=l[0],f=l[1],p=rR(d,f,n,r,o,a),i!==t&&i.dispose(),s!==e&&s.dispose(),[2,p]}}))}))},e2e=te({cropAndResize_:function(t,e,n,r,o,a){var i=X(t,"image","cropAndResize"),s=X(e,"boxes","cropAndResize","float32"),u=X(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var l=s.shape[0];return K(i.rank===4,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."})),K(s.rank===2&&s.shape[1]===4,(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),K(u.rank===1&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),K(r.length===2,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),K(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),K(o==="bilinear"||o==="nearest",(function(){return"method must be bilinear or nearest, but was "+o})),ae.runKernelFunc((function(d,f){return d.cropAndResize(i,s,u,r,o,a)}),{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:a,cropSize:r})}}),vz=Object.freeze({resizeBilinear:Xwe,resizeNearestNeighbor:Kwe,nonMaxSuppression:Ywe,nonMaxSuppressionAsync:Qwe,nonMaxSuppressionWithScore:Jwe,nonMaxSuppressionWithScoreAsync:Zwe,cropAndResize:e2e}),vR=function(t,e){return!(t>0)||e==="linear"},gR=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},yR=function(t,e){var n=e,r=sr(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},bR=function(t,e,n){if(e==="linear")return t;if(e==="relu")return K0(t);if(e==="elu")return uz(t);if(e==="relu6")return cz(t);if(e==="prelu")return lz(t,n);throw new Error("Unknown fused activation "+e+".")},t2e=te({fusedMatMul_:function(t){var e,n=t.a,r=t.b,o=t.transposeA,a=o!==void 0&&o,i=t.transposeB,s=i!==void 0&&i,u=t.bias,l=t.activation,d=l===void 0?"linear":l,f=t.preluActivationWeights;if(vR(ae.state.gradientDepth,d)===!1){var p=oz(n,r,a,s);return u!=null&&(p=Ra(p,u)),bR(p,d,f)}var m=X(n,"a","fused matMul"),g=X(r,"b","fused matMul");e=Mn(m,g),m=e[0],g=e[1];var y=a?m.shape[m.rank-2]:m.shape[m.rank-1],b=s?g.shape[g.rank-1]:g.shape[g.rank-2],C=a?m.shape[m.rank-1]:m.shape[m.rank-2],S=s?g.shape[g.rank-2]:g.shape[g.rank-1],E=m.shape.slice(0,-2),_=g.shape.slice(0,-2),T=Qe(E),D=Qe(_);K(m.rank>=2&&g.rank>=2&&m.rank===g.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+m.rank+" and "+g.rank+"."})),K(br(E,_),(function(){return"Error in fused matMul: outer dimensions ("+E+") and ("+_+") of Tensors with shapes "+m.shape+" and "+g.shape+" must match."})),K(y===b,(function(){return"Error in fused matMul: inner shapes ("+y+") and ("+b+") of Tensors with shapes "+m.shape+" and "+g.shape+" and transposeA="+a+" and transposeB="+s+" must match."}));var I,k,M=m.shape.slice(0,-2).concat([C,S]),O=a?m.as3D(T,y,C):m.as3D(T,C,y),F=s?g.as3D(D,S,b):g.as3D(D,b,S);u!=null&&Ot(M,(I=Mn(I=X(u,"bias","fused matMul"),m)[0]).shape),f!=null&&(k=X(f,"prelu weights","fused matMul"));var j={a:O,b:F};u!=null&&(j.bias=I),f!=null&&(j.preluActivationWeights=k);var G=[O,F];return ae.runKernelFunc((function(W,q){var P=W.fusedBatchMatMul({a:O,b:F,transposeA:a,transposeB:s,bias:I,activation:d,preluActivationWeights:k});return q([O,F,P]),P}),j,(function(W,q){var P=q[0],U=q[1],z=q[2],H=gR(W,z,d),L={};return u!=null&&(L={bias:function(){return yR(I,H)}}),Object.assign(a||s?!a&&s?{a:function(){return H.matMul(U,!1,!1)},b:function(){return H.matMul(P,!0,!1)}}:a&&!s?{a:function(){return U.matMul(H,!1,!0)},b:function(){return P.matMul(H,!1,!1)}}:{a:function(){return U.matMul(H,!0,!0)},b:function(){return H.matMul(P,!0,!0)}}:{a:function(){return H.matMul(U,!1,!0)},b:function(){return P.matMul(H,!0,!1)}},L)}),"_FusedMatMul",{transposeA:a,transposeB:s,activation:d},G,[!0]).reshape(M)}}),n2e=te({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,a=t.dataFormat,i=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,d=t.bias,f=t.activation,p=f===void 0?"linear":f,m=t.preluActivationWeights;if(p=p||"linear",vR(ae.state.gradientDepth,p)===!1){var g=sc(e,n,r,o,i,u,l);return d!=null&&(g=Ra(g,d)),bR(g,p,m)}var y=X(e,"x","conv2d"),b=X(n,"filter","conv2d"),C=y,S=!1;y.rank===3&&(S=!0,C=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),K(C.rank===4,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+C.rank+"."})),K(b.rank===4,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."})),l!=null&&K(Xn(o),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."})),K(C.shape[3]===b.shape[2],(function(){return"Error in conv2d: depth of input ("+C.shape[3]+") must match input depth for filter "+b.shape[2]+"."})),K(ro(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),K(i==="NHWC",(function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."}));var E,_,T=ac(C.shape,b.shape,r,u,o,l);d!=null&&(E=Mn(E=X(d,"bias","fused conv2d"),y)[0],Ot(T.outShape,E.shape)),m!=null&&(_=X(m,"prelu weights","fused conv2d"));var D={x:C,filter:b};d!=null&&(D.bias=E),m!=null&&(D.preluActivationWeights=_);var I=[b,C],k=ae.runKernelFunc((function(M,O){var F=M.fusedConv2d({input:C,filter:b,convInfo:T,bias:E,activation:p,preluActivationWeights:_});return O([b,C,F]),F}),D,(function(M,O){var F=O,j=F[0],G=F[1],W=F[2],q=gR(M,W,p);K(Zd(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var P={};return d!=null&&(P={bias:function(){return yR(E,q)}}),Object.assign({x:function(){return ez(G.shape,q,j,r,o)},filter:function(){return cR(G,q,j.shape,r,o)}},P)}),"FusedConv2D",{convInfo:T,activation:p},I,[!0]);return S?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),r2e=te({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,a=t.dataFormat,i=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,d=t.bias,f=t.activation,p=f===void 0?"linear":f,m=t.preluActivationWeights;if(vR(ae.state.gradientDepth,p)===!1){var g=dR(e,n,r,o,i,u,l);return d!=null&&(g=Ra(g,d)),bR(g,p,m)}var y=X(e,"x","depthwiseConv2d"),b=X(n,"filter","depthwiseConv2d"),C=y,S=!1;y.rank===3&&(S=!0,C=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),K(C.rank===4,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+C.rank+"."})),K(b.rank===4,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+b.rank+"."})),K(C.shape[3]===b.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+C.shape[3]+") must match the inChannels dimension in filter "+b.shape[2]+"."})),u==null&&(u=[1,1]),K(ro(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),l!=null&&K(Xn(o),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."}));var E,_,T=ac(C.shape,b.shape,r,u,o,l,!0);d!=null&&(E=Mn(E=X(d,"bias","fused conv2d"),y)[0],Ot(T.outShape,E.shape)),m!=null&&(_=X(m,"prelu weights","fused depthwiseConv2d"));var D={x:C,filter:b};d!=null&&(D.bias=E),m!=null&&(D.preluActivationWeights=_);var I=[b,C],k=ae.runKernelFunc((function(M,O){var F=M.fusedDepthwiseConv2D({input:C,filter:b,convInfo:T,bias:E,activation:p,preluActivationWeights:_});return O([b,C,F]),F}),D,(function(M,O){K(Zd(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var F=O[0],j=O[1],G=O[2],W=gR(M,G,p),q={};return d!=null&&(q={bias:function(){return yR(E,W)}}),Object.assign({x:function(){return tz(j.shape,W,F,T)},filter:function(){return nz(j,W,F.shape,T)}},q)}),"FusedDepthwiseConv2D",{convInfo:T,activation:p},I,[!0]);return S?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),o2e=Object.freeze({matMul:t2e,conv2d:n2e,depthwiseConv2d:r2e}),a2e=Object.freeze({image:vz,linalg:qwe,losses:Vwe,spectral:Awe,fused:o2e,signal:Mwe,add:Ra,addN:d1e,batchNorm:dm,batchNormalization:f1e,batchNorm2d:p1e,batchNormalization2d:h1e,batchNorm3d:v1e,batchNormalization3d:m1e,batchNorm4d:y1e,batchNormalization4d:g1e,broadcastTo:Uj,clone:b1e,div:Fu,divNoNan:Hj,eye:Gj,multinomial:C1e,oneHot:Ry,pad:Ms,pad1d:S1e,pad2d:E1e,pad3d:R1e,pad4d:_1e,rand:T1e,randomGamma:D1e,randomNormal:k1e,randomUniform:$j,square:qj,squaredDifference:Xj,tile:Ad,truncatedNormal:I1e,conv1d:H1e,conv2d:sc,conv3d:G1e,depthwiseConv2d:dR,separableConv2d:rz,conv2dTranspose:$1e,conv3dTranspose:q1e,op:te,booleanMaskAsync:V1e,complex:_r,real:pa,imag:yi,concat:Ea,concat1d:e0e,concat2d:t0e,concat3d:n0e,concat4d:r0e,split:QE,matMul:oz,dot:X1e,outerProduct:K1e,reverse:fm,reverse1d:Y1e,reverse2d:Q1e,reverse3d:J1e,reverse4d:Z1e,maxPool:ko,avgPool:ewe,pool:twe,maxPool3d:nwe,avgPool3d:rwe,maxPoolWithArgmax:owe,slice:Bu,slice1d:awe,slice2d:iwe,slice3d:swe,slice4d:uwe,abs:l0e,acos:c0e,acosh:d0e,asin:f0e,asinh:h0e,atan:p0e,atanh:m0e,ceil:v0e,clipByValue:g0e,cos:y0e,cosh:b0e,erf:x0e,exp:w0e,expm1:C0e,floor:S0e,log:E0e,log1p:R0e,logSigmoid:_0e,neg:JE,reciprocal:T0e,round:A0e,rsqrt:lj,sigmoid:N0e,sign:D0e,isNaN:k0e,isInf:I0e,isFinite:M0e,sin:O0e,sinh:P0e,softplus:F0e,sqrt:B0e,step:L0e,tan:j0e,tanh:z0e,all:lwe,any:cwe,argMax:dwe,argMin:fwe,logSumExp:hwe,max:pwe,mean:mwe,min:vwe,moments:gwe,sum:vu,prod:ywe,equal:Kj,equalStrict:M1e,greater:O1e,greaterEqual:Yj,greaterEqualStrict:P1e,greaterStrict:F1e,less:B1e,lessEqual:L1e,lessEqualStrict:j1e,lessStrict:z1e,notEqual:U1e,notEqualStrict:W1e,addStrict:U0e,atan2:W0e,divStrict:V0e,floorDiv:cj,maximum:ZE,maximumStrict:H0e,minimum:dj,minimumStrict:G0e,mod:$0e,modStrict:q0e,mul:Wn,mulStrict:X0e,pow:xy,powStrict:K0e,squaredDifferenceStrict:Y0e,sub:Ua,subStrict:Q0e,elu:uz,leakyRelu:bwe,prelu:lz,relu:K0,relu6:cz,selu:xwe,logicalAnd:X0,logicalNot:x1e,logicalOr:Wj,logicalXor:w1e,where:Gl,whereAsync:Vj,buffer:Ct,print:o0e,batchToSpaceND:JL,cast:a0e,cumsum:i0e,depthToSpace:s0e,expandDims:mu,reshape:us,spaceToBatchND:ZL,squeeze:ej,stack:Pu,unstack:U0,setdiff1dAsync:u0e,fill:Fl,linspace:Zye,ones:Df,range:vy,scalar:rt,tensor:Ar,tensor1d:qa,tensor2d:Pl,tensor3d:YL,tensor4d:pi,tensor5d:Yye,tensor6d:Qye,variable:Jye,zeros:Vn,onesLike:QL,zerosLike:$t,transpose:Pa,softmax:G0,logSoftmax:obe,localResponseNormalization:wwe,norm:dz,gather:lR,unsortedSegmentSum:Qj,basicLSTMCell:Cwe,multiRNNCell:Swe,movingAverage:Ewe,stridedSlice:Rwe,topk:_we,scatterND:Twe,fft:fR,ifft:_y,rfft:hR,irfft:fz,sparseToDense:Nwe,gatherND:Dwe,diag:kwe,dropout:Iwe,hannWindow:pR,hammingWindow:pz,frame:mR,stft:mz,inTopKAsync:Owe});function ke(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(n){n!=null&&K(n.dtype!=="complex64",(function(){return e+" does not support complex64 tensors."}))}))}function vC(t,e,n,r,o,a){for(var i=o.strideHeight,s=o.strideWidth,u=o.dilationHeight,l=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,p=o.padInfo.top,m=o.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Ct(o.outShape,n),b=y.values,C=o.outShape[1]*o.outShape[2]*o.outShape[3],S=o.outShape[2]*o.outShape[3],E=o.outShape[3],_=0;_<o.batchSize;++_)for(var T=_*C,D=_*r[0],I=0;I<o.inChannels;++I)for(var k=0;k<o.outHeight;++k)for(var M=k*i-p,O=Math.max(0,M),F=Math.min(o.inHeight,d+M),j=T+k*S,G=0;G<o.outWidth;++G){for(var W=G*s-m,q=Math.max(0,W),P=Math.min(o.inWidth,f+W),U=g,z=0,H=0,L=O;L<F;L+=u){for(var $=D+L*r[1],J=q;J<P;J+=l){var ne=t[$+J*r[2]+I];a==="max"&&ne>U?U=ne:a==="avg"&&(z+=ne,H++)}if(isNaN(U))break}b[j+G*E+I]=a==="avg"?z/H:U}return y}function gz(t,e,n,r,o,a){o===void 0&&(o=!1),a===void 0&&(a=!1);for(var i=Ct(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,m=r.padInfo.top,g=r.padInfo.left,y=Ct(e,n,t),b=0;b<r.batchSize;++b)for(var C=0;C<r.inChannels;++C)for(var S=0;S<r.outHeight;++S){for(var E=S*s-m,_=E;_<0;)_+=l;for(var T=Math.min(r.inHeight,f+E),D=0;D<r.outWidth;++D){for(var I=D*u-g,k=I;k<0;)k+=d;for(var M=Math.min(r.inWidth,p+I),O=Number.NEGATIVE_INFINITY,F=-1,j=_;j<T;j+=l)for(var G=j-E,W=k;W<M;W+=d){var q=W-I,P=y.get(b,j,W,C);P>O&&(O=P,F=o?a?((b*r.inHeight+j)*r.inWidth+W)*r.inChannels+C:(j*r.inWidth+W)*r.inChannels+C:G*p+q)}i.set(F,b,S,D,C)}}return i}function Ow(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var i2e=(function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new vj(n,ae),n}return Qa(e,t),e.prototype.write=function(n,r,o){this.firstUse&&(this.firstUse=!1,Se().get("IS_NODE")&&py(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:n,dtype:o}),a},e.prototype.move=function(n,r,o,a){this.data.set(n,{values:r,dtype:a})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return Je(this,void 0,void 0,(function(){return Ze(this,(function(r){return[2,this.readSync(n)]}))}))},e.prototype.readSync=function(n){var r=this.data.get(n),o=r.dtype,a=r.complexTensors;return o==="complex64"?mC(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),o=r;if(n.dtype==="string")try{o=r.map((function(a){return dy(a)}))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ct(n.shape,n.dtype,o)},e.prototype.makeOutput=function(n,r,o){var a=this.write(n,r,o);return ae.makeTensorFromDataId(a,r,o,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return Je(this,void 0,void 0,(function(){var r;return Ze(this,(function(o){return r=hi(),n(),[2,{kernelMs:hi()-r}]}))}))},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:ae.keep(n.clone()),imag:ae.keep(r.clone())},o},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,o){if(ke(n,"slice"),pj(n.shape,r,o)){var a=mj(r,n.strides),i=Qe(o);return Ar(this.readSync(n.dataId).subarray(a,a+i),o,n.dtype)}for(var s=Ct(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var d=s.indexToLoc(l).map((function(f,p){return f+r[p]}));s.values[l]=u.get.apply(u,d)}return s.toTensor()},e.prototype.stridedSlice=function(n,r,o,a){ke(n,"stridedSlice");var i=eR(r,o,a);if(i.some((function(m){return m===0})))return Ar([],i);for(var s=Ct(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var d=s.indexToLoc(l),f=new Array(d.length),p=0;p<f.length;p++)f[p]=d[p]*a[p]+r[p];s.set.apply(s,[u.get.apply(u,f)].concat(d))}return s.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),o=Ct([n.size,n.size],n.dtype),a=o.values,i=0;i<r.length;i++)a[i*n.size+i]=r[i];return o.toTensor()},e.prototype.unstack=function(n,r){for(var o=n.shape[r],a=new Array(n.rank-1),i=0,s=0;s<n.rank;s++)s!==r&&(a[i++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var d=new Array(o);for(s=0;s<d.length;s++)u[r]=s,d[s]=this.slice(n,u,l).reshape(a);return d},e.prototype.reverse=function(n,r){ke(n,"reverse");for(var o=Ct(n.shape,n.dtype),a=this.bufferSync(n),i=function(u){var l=o.indexToLoc(u),d=l.slice();r.forEach((function(f){return d[f]=n.shape[f]-1-d[f]})),o.set.apply(o,[a.get.apply(a,d)].concat(l))},s=0;s<o.size;s++)i(s);return o.toTensor()},e.prototype.concat=function(n,r){var o=this;if(n[0].dtype==="complex64"){var a=n.map((function(m){return pa(m)})),i=n.map((function(m){return yi(m)}));return _r(this.concat(a,r),this.concat(i,r))}var s=n.map((function(m){var g=Qe(m.shape.slice(r));return m.as2D(-1,g)})),u=Jd(s.map((function(m){return m.shape})),1),l=Ct(u,n[0].dtype).values;if(s[0].shape[0]===1){var d=0;s.forEach((function(m){l.set(o.readSync(m.dataId),d),d+=m.size}))}else{var f=0;s.forEach((function(m){for(var g=o.readSync(m.dataId),y=0,b=0;b<m.shape[0];++b)for(var C=b*u[1]+f,S=0;S<m.shape[1];++S)l[C+S]=g[y++];f+=m.shape[1]}))}var p=Jd(n.map((function(m){return m.shape})),r);return Ar(l,p,n[0].dtype)},e.prototype.neg=function(n){return ke(n,"neg"),this.multiply(rt(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(o,a,i,s){return{real:o+i,imag:a+s}})):this.broadcastedBinaryOp(n,r,Tr(n.dtype,r.dtype),(function(o,a){return o+a}))},e.prototype.addN=function(n){var r=this;ke(n,"addN");for(var o=n.map((function(d){return r.readSync(d.dataId)})),a=Ct(n[0].shape,n[0].dtype),i=a.values,s=0;s<n.length;s++)for(var u=o[s],l=0;l<i.length;l++)i[l]+=u[l];return a.toTensor()},e.prototype.softmax=function(n,r){var o=fr([r],n.shape),a=this.max(n,o),i=So(a.shape,o),s=this.subtract(n,a.reshape(i)),u=this.exp(s),l=this.sum(u,o).reshape(i);return Fu(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(o,a,i,s){return{real:o-i,imag:a-s}})):this.broadcastedBinaryOp(n,r,Tr(n.dtype,r.dtype),(function(o,a){return o-a}))},e.prototype.pow=function(n,r){return ke([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return Math.pow(o,a)}))},e.prototype.batchMatMul=function(n,r,o,a){ke([n,r],"matMul");for(var i=o?n.shape[1]:n.shape[2],s=o?n.shape[2]:n.shape[1],u=a?r.shape[1]:r.shape[2],l=n.shape[0],d=this.readSync(n.dataId),f=this.readSync(r.dataId),p=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],m=p[0],g=p[1],y=p[2],b=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],C=b[0],S=b[1],E=b[2],_=s*u,T=Ct([l,s,u],n.dtype),D=T.values,I=this.blockSize,k=0;k<l;k++)for(var M=0;M<s;M+=I)for(var O=0;O<u;O+=I)for(var F=0;F<i;F+=I)for(var j=Math.min(M+I,s),G=Math.min(O+I,u),W=Math.min(F+I,i),q=M;q<j;q++)for(var P=O;P<G;P++){for(var U=0,z=F;z<W;z++)U+=d[k*m+q*g+z*y]*f[z*C+P*S+k*E];D[k*_+(q*u+P)]+=U}return T.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,a=n.transposeA,i=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,d=this.batchMatMul(r,o,a,i);return s&&(d=this.add(d,s)),u&&(d=Ow(this,d,u,l)),d},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(o,a,i,s){return{real:o*i-a*s,imag:o*s+a*i}})):this.broadcastedBinaryOp(n,r,Tr(n.dtype,r.dtype),(function(o,a){return o*a}))},e.prototype.floorDiv=function(n,r){return ke([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",(function(o,a){return Math.floor(o/a)}))},e.prototype.sum=function(n,r){ke(n,"sum"),Oo("sum",r,n.rank);for(var o=Br(n.shape,r),a=o[0],i=o[1],s=Vn(a,Tr(n.dtype,"int32")),u=Qe(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=0,g=0;g<u;++g)m+=d[p+g];l[f]=m}return s},e.prototype.prod=function(n,r){ke(n,"sum");for(var o=Br(n.shape,r),a=o[0],i=o[1],s=Vn(a,Tr(n.dtype,"int32")),u=Qe(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=1,g=0;g<u;++g)m*=d[p+g];l[f]=m}return s},e.prototype.unsortedSegmentSum=function(n,r,o){ke(n,"unsortedSegmentSum");for(var a=[],i=n.rank-r.rank,s=0;s<i;++s)r=r.expandDims(s+1);for(s=0;s<o;++s){var u=rt(s,"int32"),l=Kj(u,r).asType("float32").mul(n).sum(0);a.push(l)}return Pu(a)},e.prototype.argMin=function(n,r){ke(n,"argMin");var o=[r];Oo("argMin",o,n.rank);for(var a=Br(n.shape,o),i=a[0],s=a[1],u=Vn(i,"int32"),l=Qe(s),d=this.readSync(u.dataId),f=this.readSync(n.dataId),p=0;p<d.length;++p){for(var m=p*l,g=f[m],y=0,b=0;b<l;++b){var C=f[m+b];C<g&&(g=C,y=b)}d[p]=y}return u},e.prototype.argMax=function(n,r){ke(n,"argMax");var o=[r];Oo("argMax",o,n.rank);for(var a=Br(n.shape,o),i=a[0],s=a[1],u=Vn(i,"int32"),l=Qe(s),d=this.readSync(u.dataId),f=this.readSync(n.dataId),p=0;p<d.length;++p){for(var m=p*l,g=f[m],y=0,b=0;b<l;++b){var C=f[m+b];C>g&&(g=C,y=b)}d[p]=y}return u},e.prototype.cumsum=function(n,r,o,a){if(ke(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var i=Tr(n.dtype,"int32"),s=Vn(n.shape,i),u=this.readSync(s.dataId),l=this.readSync(n.dataId),d=n.shape[n.rank-1],f=a?function(b,C){return b+d-C-1}:function(b,C){return b+C},p=0;p<l.length;p+=d)for(var m=0;m<d;m++){var g=f(p,m);if(m===0)u[g]=o?0:l[g];else{var y=f(p,m-1);u[g]=o?l[y]+u[y]:l[g]+u[y]}}return s},e.prototype.equal=function(n,r){return ke([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o===a?1:0}))},e.prototype.notEqual=function(n,r){return ke([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o!==a?1:0}))},e.prototype.less=function(n,r){return ke([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o<a?1:0}))},e.prototype.lessEqual=function(n,r){return ke([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o<=a?1:0}))},e.prototype.greater=function(n,r){return ke([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o>a?1:0}))},e.prototype.greaterEqual=function(n,r){return ke([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o>=a?1:0}))},e.prototype.logicalNot=function(n){ke(n,"logicalNot");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)o[a]=r[a]?0:1;return this.makeOutput(o,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return ke([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o&&a}))},e.prototype.logicalOr=function(n,r){return ke([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o||a}))},e.prototype.select=function(n,r,o){ke([n,r,o],"select");for(var a=this.readSync(n.dataId),i=this.readSync(r.dataId),s=this.readSync(o.dataId),u=Vn(r.shape,Tr(r.dtype,o.dtype)),l=this.readSync(u.dataId),d=0,f=n.rank===0||n.rank>1||r.rank===1?1:Qe(r.shape.slice(1)),p=0;p<a.length;p++)for(var m=0;m<f;m++)a[p]===1?l[d++]=i[p]:l[d++]=s[p];return u},e.prototype.where=function(n){ke([n],"where");var r=this.readSync(n.dataId);return oR(n.shape,r)},e.prototype.topk=function(n,r,o){return ke(n,"topk"),Ej(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){ke(n,"min"),Oo("min",r,n.rank);for(var o=Br(n.shape,r),a=o[0],i=o[1],s=Vn(a,n.dtype),u=Qe(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0;g<u;++g){var y=d[p+g];y<m&&(m=y)}l[f]=m}return s},e.prototype.minimum=function(n,r){return ke([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return Math.min(o,a)}))},e.prototype.mod=function(n,r){return ke([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){var i=o%a;return o<0&&a<0||o>=0&&a>=0?i:(i+a)%a}))},e.prototype.max=function(n,r){ke(n,"max"),Oo("max",r,n.rank);for(var o=Br(n.shape,r),a=o[0],i=o[1],s=Vn(a,n.dtype),u=Qe(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0;g<u;++g){var y=d[p+g];y>m&&(m=y)}l[f]=m}return s},e.prototype.maximum=function(n,r){return ke([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return Math.max(o,a)}))},e.prototype.all=function(n,r){ke(n,"all"),Oo("all",r,n.rank);for(var o=Br(n.shape,r),a=o[0],i=o[1],s=Vn(a,n.dtype),u=Qe(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0;g<u;++g){var y=d[p+g];m=m&&y}l[f]=m}return s},e.prototype.any=function(n,r){ke(n,"any"),Oo("any",r,n.rank);for(var o=Br(n.shape,r),a=o[0],i=o[1],s=Vn(a,n.dtype),u=Qe(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0;g<u;++g){var y=d[p+g];m=m||y}l[f]=m}return s},e.prototype.squaredDifference=function(n,r){return ke([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){var i=o-a;return i*i}))},e.prototype.ceil=function(n){ke(n,"ceil");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.ceil(r[a]);return this.makeOutput(o,n.shape,"float32")},e.prototype.floor=function(n){ke(n,"floor");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.floor(r[a]);return this.makeOutput(o,n.shape,"float32")},e.prototype.sign=function(n){ke(n,"x");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?o[a]=-1:r[a]>0?o[a]=1:o[a]=0;return this.makeOutput(o,n.shape,"float32")},e.prototype.isNaN=function(n){ke(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.isInf=function(n){ke(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.isFinite=function(n){ke(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.round=function(n){ke(n,"round");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=Math.floor(r[a]);r[a]-i<.5?o[a]=Math.floor(r[a]):r[a]-i>.5?o[a]=Math.ceil(r[a]):o[a]=i%2==0?i:i+1}return this.makeOutput(o,n.shape,"float32")},e.prototype.exp=function(n){ke(n,"exp");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.exp(r[a]);return this.makeOutput(o,n.shape,"float32")},e.prototype.expm1=function(n){ke(n,"expm1");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.expm1(r[a]);return this.makeOutput(o,n.shape,"float32")},e.prototype.log=function(n){ke(n,"log");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.log(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.log1p=function(n){ke(n,"log1p");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.log1p(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.sqrt=function(n){ke(n,"sqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.sqrt(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.rsqrt=function(n){ke(n,"rsqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=1/Math.sqrt(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.reciprocal=function(n){ke(n,"reciprocal");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=1/r[a];return this.makeOutput(o,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){ke(n,"relu");for(var r=Vn(n.shape,n.dtype),o=this.readSync(r.dataId),a=this.readSync(n.dataId),i=0;i<a.length;++i)o[i]=Math.max(0,a[i]);return r},e.prototype.relu6=function(n){ke(n,"relu");for(var r=Vn(n.shape,n.dtype),o=this.readSync(r.dataId),a=this.readSync(n.dataId),i=0;i<a.length;++i)o[i]=Math.min(Math.max(0,a[i]),6);return r},e.prototype.prelu=function(n,r){return ke([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return o<0?a*o:o}))},e.prototype.elu=function(n){ke(n,"elu");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?i:Math.exp(i)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){ke([n,r],"eluDer");for(var o=new Float32Array(r.size),a=this.readSync(r.dataId),i=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>=1?i[s]:i[s]*(u+1)}return this.makeOutput(o,r.shape,"float32")},e.prototype.selu=function(n){ke(n,"selu");for(var r=iR,o=sR,a=new Float32Array(n.size),i=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];a[s]=u>=0?o*u:r*(Math.exp(u)-1)}return this.makeOutput(a,n.shape,"float32")},e.prototype.clip=function(n,r,o){ke(n,"clip");for(var a=new Float32Array(n.size),i=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];a[s]=u>o?o:u<r?r:u}return this.makeOutput(a,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.abs(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<n.size;++a){var i=o[2*a],s=o[2*a+1];r[a]=Math.hypot(i,s)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){ke(n,"int");for(var r=new Int32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=o[a];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){ke(n,"sigmoid");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=1/(1+Math.exp(-o[a]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){ke(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var s=a[i]>-r,u=a[i]<r,l=Math.exp(a[i]),d=void 0;d=u?l:s?a[i]:Math.log(1+l),o[i]=d}return this.makeOutput(o,n.shape,"float32")},e.prototype.sin=function(n){ke(n,"sin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.sin(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){ke(n,"cos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.cos(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){ke(n,"tan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.tan(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){ke(n,"asin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.asin(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){ke(n,"acos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.acos(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){ke(n,"atan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.atan(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return ke([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return Math.atan2(o,a)}))},e.prototype.sinh=function(n){ke(n,"sinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.sinh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){ke(n,"cosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.cosh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){ke(n,"tanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=oye(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){ke(n,"asinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.asinh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){ke(n,"acosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.acosh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){ke(n,"atanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.atanh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){ke(n,"erf");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var i=Math.sign(o[a]),s=Math.abs(o[a]),u=1/(1+.3275911*s);r[a]=i*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),ke(n,"step");for(var o=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var s=a[i];isNaN(s)?o[i]=NaN:o[i]=s>0?1:r}return this.makeOutput(o,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,o,a);return i&&(l=this.add(l,i)),s&&(l=Ow(this,l,s,u)),l},e.prototype.conv2d=function(n,r,o){ke([n,r],"conv2d");for(var a=o.filterHeight,i=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,d=o.padInfo.top,f=o.dataFormat==="channelsLast",p=Ct(o.outShape,n.dtype),m=n.strides[0],g=f?n.strides[1]:n.strides[2],y=f?n.strides[2]:1,b=f?1:n.strides[1],C=p.strides[0],S=f?p.strides[1]:p.strides[2],E=f?p.strides[2]:1,_=f?1:p.strides[1],T=this.readSync(n.dataId),D=this.readSync(r.dataId),I=p.values,k=0;k<o.batchSize;++k)for(var M=k*m,O=k*C,F=0;F<o.outHeight;++F)for(var j=O+F*S,G=F*o.strideHeight-d,W=0;W<a;W++){var q=G+W*s;if(!(q<0||q>=o.inHeight))for(var P=W*r.strides[0],U=M+q*g,z=0;z<o.outWidth;++z)for(var H=j+z*E,L=z*o.strideWidth-l,$=0;$<i;$++){var J=L+$*u;if(!(J<0||J>=o.inWidth))for(var ne=U+J*y,ce=P+$*r.strides[1],be=0;be<o.inChannels;++be){for(var se=T[ne+be*b],oe=0;oe<o.outChannels;++oe)I[H+oe*_]+=se*D[ce+oe];ce+=o.outChannels}}}return p.toTensor()},e.prototype.conv3d=function(n,r,o){for(var a=o.filterDepth,i=o.filterHeight,s=o.filterWidth,u=o.dilationDepth,l=o.dilationHeight,d=o.dilationWidth,f=o.padInfo.front,p=o.padInfo.left,m=o.padInfo.top,g=Ct(o.outShape,n.dtype),y=this.readSync(n.dataId),b=this.readSync(r.dataId),C=g.values,S=0;S<o.batchSize;++S)for(var E=S*n.strides[0],_=S*g.strides[0],T=0;T<o.outDepth;++T)for(var D=_+T*g.strides[1],I=T*o.strideDepth-f,k=0;k<a;k++){var M=I+k*u;if(!(M<0||M>=o.inDepth))for(var O=k*r.strides[0],F=E+M*n.strides[1],j=0;j<o.outHeight;++j)for(var G=D+j*g.strides[2],W=j*o.strideHeight-m,q=0;q<i;q++){var P=W+q*l;if(!(P<0||P>=o.inHeight))for(var U=O+q*r.strides[1],z=F+P*n.strides[2],H=0;H<o.outWidth;++H)for(var L=G+H*o.outChannels,$=H*o.strideWidth-p,J=0;J<s;J++){var ne=$+J*d;if(!(ne<0||ne>=o.inWidth))for(var ce=U+J*r.strides[2],be=z+ne*o.inChannels,se=ce,oe=0;oe<o.inChannels;++oe){for(var fe=y[be+oe],me=0;me<o.outChannels;++me)C[L+me]+=fe*b[se+me];se+=o.outChannels}}}}return g.toTensor()},e.prototype.conv2dDerInput=function(n,r,o){ke([n,r],"conv2dDerInput");for(var a=Ct(o.inShape,"float32"),i=a.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,d=l[0],f=l[1],p=l[2],m=o.batchSize,g=o.filterHeight,y=o.filterWidth,b=o.inChannels,C=o.inHeight,S=o.inWidth,E=o.outChannels,_=o.outHeight,T=o.outWidth,D=o.strideHeight,I=o.strideWidth,k=o.dataFormat,M=g-1-o.padInfo.top,O=y-1-o.padInfo.left,F=k==="channelsLast",j=a.strides[0],G=F?a.strides[1]:a.strides[2],W=F?a.strides[2]:1,q=F?1:a.strides[1],P=n.strides[0],U=F?n.strides[1]:n.strides[2],z=F?n.strides[2]:1,H=F?1:n.strides[1],L=0;L<m;++L)for(var $=0;$<b;++$)for(var J=0;J<C;++J)for(var ne=J-M,ce=Math.max(0,Math.ceil(ne/D)),be=Math.min(_,(g+ne)/D),se=0;se<S;++se){for(var oe=se-O,fe=Math.max(0,Math.ceil(oe/I)),me=Math.min(T,(y+oe)/I),Oe=0,Be=ce;Be<be;++Be)for(var Le=Be*D-ne,De=fe;De<me;++De)for(var $e=P*L+U*Be+z*De,et=d*(g-1-Le)+f*(y-1-(De*I-oe))+p*$,ot=0;ot<E;++ot)Oe+=s[$e+H*ot]*u[et+ot];i[j*L+G*J+W*se+q*$]=Oe}return a.toTensor()},e.prototype.conv3dDerInput=function(n,r,o){for(var a=Ct(o.inShape,"float32"),i=a.values,s=a.strides,u=s[0],l=s[1],d=s[2],f=s[3],p=this.readSync(n.dataId),m=n.strides,g=m[0],y=m[1],b=m[2],C=m[3],S=this.readSync(r.dataId),E=r.strides,_=E[0],T=E[1],D=E[2],I=E[3],k=o.batchSize,M=o.filterDepth,O=o.filterHeight,F=o.filterWidth,j=o.inChannels,G=o.inDepth,W=o.inHeight,q=o.inWidth,P=o.outChannels,U=o.outDepth,z=o.outHeight,H=o.outWidth,L=o.strideDepth,$=o.strideHeight,J=o.strideWidth,ne=M-1-o.padInfo.front,ce=O-1-o.padInfo.top,be=F-1-o.padInfo.left,se=0;se<k;++se)for(var oe=0;oe<j;++oe)for(var fe=0;fe<G;++fe)for(var me=fe-ne,Oe=Math.max(0,Math.ceil(me/L)),Be=Math.min(U,(M+me)/L),Le=0;Le<W;++Le)for(var De=Le-ce,$e=Math.max(0,Math.ceil(De/$)),et=Math.min(z,(O+De)/$),ot=0;ot<q;++ot){for(var Ie=ot-be,Me=Math.max(0,Math.ceil(Ie/J)),Fe=Math.min(H,(F+Ie)/J),Ke=0,ct=Oe;ct<Be;++ct)for(var qe=ct*L-me,Xe=$e;Xe<et;++Xe)for(var Wt=Xe*$-De,je=Me;je<Fe;++je)for(var He=g*se+y*ct+b*Xe+C*je,it=_*(M-1-qe)+T*(O-1-Wt)+D*(F-1-(je*J-Ie))+I*oe,zt=0;zt<P;++zt)Ke+=p[He+zt]*S[it+zt];i[u*se+l*fe+d*Le+f*ot+oe]=Ke}return a.toTensor()},e.prototype.conv2dDerFilter=function(n,r,o){ke([n,r],"conv2dDerFilter");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dataFormat==="channelsLast",d=Ct(o.filterShape,"float32"),f=o.padInfo.left,p=o.padInfo.top,m=this.bufferSync(n),g=this.bufferSync(r),y=0;y<s;++y)for(var b=Math.max(0,Math.ceil((p-y)/a)),C=Math.min(o.outHeight,(o.inHeight+p-y)/a),S=0;S<u;++S)for(var E=Math.max(0,Math.ceil((f-S)/i)),_=Math.min(o.outWidth,(o.inWidth+f-S)/i),T=0;T<o.inChannels;++T)for(var D=0;D<o.outChannels;++D){for(var I=0,k=0;k<o.batchSize;++k)for(var M=b;M<C;++M)for(var O=y+M*a-p,F=E;F<_;++F){var j=S+F*i-f;I+=l?m.get(k,O,j,T)*g.get(k,M,F,D):m.get(k,T,O,j)*g.get(k,D,M,F)}d.set(I,y,S,T,D)}return d.toTensor()},e.prototype.conv3dDerFilter=function(n,r,o){for(var a=o.strideDepth,i=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,d=o.filterWidth,f=Ct(o.filterShape,"float32"),p=f.values,m=f.strides,g=m[0],y=m[1],b=m[2],C=m[3],S=this.readSync(r.dataId),E=r.strides,_=E[0],T=E[1],D=E[2],I=E[3],k=this.readSync(n.dataId),M=n.strides,O=M[0],F=M[1],j=M[2],G=M[3],W=o.padInfo.front,q=o.padInfo.left,P=o.padInfo.top,U=0;U<u;++U)for(var z=Math.max(0,Math.ceil((W-U)/a)),H=Math.min(o.outDepth,(o.inDepth+W-U)/a),L=U*g,$=0;$<l;++$)for(var J=Math.max(0,Math.ceil((P-$)/i)),ne=Math.min(o.outHeight,(o.inHeight+P-$)/i),ce=$*y+L,be=0;be<d;++be)for(var se=Math.max(0,Math.ceil((q-be)/s)),oe=Math.min(o.outWidth,(o.inWidth+q-be)/s),fe=be*b+ce,me=0;me<o.inChannels;++me)for(var Oe=me*C+fe,Be=0;Be<o.outChannels;++Be){for(var Le=0,De=0;De<o.batchSize;++De)for(var $e=De*O,et=De*_,ot=z;ot<H;++ot)for(var Ie=(U+ot*a-W)*F+$e,Me=ot*T+et,Fe=J;Fe<ne;++Fe)for(var Ke=($+Fe*i-P)*j+Ie,ct=Fe*D+Me,qe=se;qe<oe;++qe){var Xe=qe*I+ct;Le+=k[(be+qe*s-q)*G+Ke+me]*S[Xe+Be]}p[Oe+Be]=Le}return f.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,o,a);return i&&(l=this.add(l,i)),s&&(l=Ow(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(n,r,o){ke([n,r],"depthwiseConv2D");for(var a=o.filterHeight,i=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,d=o.padInfo.top,f=o.outChannels/o.inChannels,p=Ct(o.outShape,n.dtype),m=this.readSync(n.dataId),g=this.readSync(r.dataId),y=p.values,b=0;b<o.batchSize;++b)for(var C=b*n.strides[0],S=b*p.strides[0],E=0;E<o.outHeight;++E)for(var _=S+E*p.strides[1],T=E*o.strideHeight-l,D=0;D<a;++D){var I=T+D*s;if(!(I<0||I>=o.inHeight))for(var k=D*r.strides[0],M=C+I*n.strides[1],O=0;O<o.outWidth;++O)for(var F=_+O*p.strides[2],j=O*o.strideWidth-d,G=0;G<i;++G){var W=j+G*u;if(!(W<0||W>=o.inWidth))for(var q=k+G*r.strides[1],P=M+W*o.inChannels,U=F,z=q,H=0;H<o.inChannels;++H){for(var L=m[P+H],$=0;$<f;++$)y[U+$]+=L*g[z+$];U+=f,z+=f}}}return p.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,o){ke([n,r],"depthwiseConv2DDerInput");for(var a=Ct(o.inShape,"float32"),i=a.values,s=a.strides,u=s[0],l=s[1],d=s[2],f=this.readSync(n.dataId),p=n.strides,m=p[0],g=p[1],y=p[2],b=this.readSync(r.dataId),C=r.strides,S=C[0],E=C[1],_=C[2],T=o.batchSize,D=o.filterHeight,I=o.filterWidth,k=o.inChannels,M=o.inHeight,O=o.inWidth,F=o.outChannels,j=o.outHeight,G=o.outWidth,W=o.strideHeight,q=o.strideWidth,P=D-1-o.padInfo.top,U=I-1-o.padInfo.left,z=F/k,H=0;H<T;++H)for(var L=0;L<k;++L)for(var $=0;$<M;++$)for(var J=$-P,ne=Math.max(0,Math.ceil(J/W)),ce=Math.min(j,(D+J)/W),be=0;be<O;++be){for(var se=be-U,oe=Math.max(0,Math.ceil(se/q)),fe=Math.min(G,(I+se)/q),me=0,Oe=ne;Oe<ce;++Oe)for(var Be=Oe*W-J,Le=oe;Le<fe;++Le)for(var De=m*H+g*Oe+y*Le,$e=S*(D-1-Be)+E*(I-1-(Le*q-se))+_*L,et=0;et<z;++et)me+=f[De+(L*z+et)]*b[$e+et];i[u*H+l*$+d*be+L]=me}return a.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,o){ke([n,r],"depthwiseConv2DDerFilter");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=Ct(o.filterShape,"float32"),d=o.padInfo.left,f=o.padInfo.top,p=o.outChannels/o.inChannels,m=this.bufferSync(n),g=this.bufferSync(r),y=0;y<s;++y)for(var b=Math.max(0,Math.ceil((f-y)/a)),C=Math.min(o.outHeight,(o.inHeight+f-y)/a),S=0;S<u;++S)for(var E=Math.max(0,Math.ceil((d-S)/i)),_=Math.min(o.outWidth,(o.inWidth+d-S)/i),T=0;T<o.outChannels;++T){for(var D=Math.trunc(T/p),I=T%p,k=0,M=0;M<o.batchSize;++M)for(var O=b;O<C;++O)for(var F=y+O*a-f,j=E;j<_;++j){var G=S+j*i-d;k+=m.get(M,F,G,D)*g.get(M,O,j,T)}l.set(k,y,S,D,I)}return l.toTensor()},e.prototype.tile=function(n,r){return ke(n,"tile"),Sj(this.bufferSync(n),r)},e.prototype.pad=function(n,r,o){ke(n,"pad");var a=r.map((function(p,m){return p[0]+n.shape[m]+p[1]})),i=r.map((function(p){return p[0]})),s=this.bufferSync(n),u=Ct(a,n.dtype);o!==0&&u.values.fill(o);for(var l=0;l<n.size;l++){var d=s.indexToLoc(l),f=d.map((function(p,m){return p+i[m]}));u.set.apply(u,[s.get.apply(s,d)].concat(f))}return u.toTensor()},e.prototype.gather=function(n,r,o){ke([n,r],"gather");var a=n.shape.slice(),i=this.readSync(r.dataId);a[o]=i.length;for(var s=Ct(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var d=s.indexToLoc(l),f=d.slice();f[o]=i[d[o]];var p=u.locToIndex(f);s.values[l]=u.values[p]}return s.toTensor()},e.prototype.batchToSpaceND=function(n,r,o){ke([n],"batchToSpaceND");var a=r.reduce((function(f,p){return f*p})),i=gy(n.shape,r,a),s=yy(i.length,r.length),u=by(n.shape,r,a),l=tj(o,r.length),d=nj(u,o,r.length);return Pa(n.reshape(i),s).reshape(u).slice(l,d)},e.prototype.spaceToBatchND=function(n,r,o){ke([n],"spaceToBatchND");var a=r.reduce((function(p,m){return p*m})),i=[[0,0]];i.push.apply(i,o);for(var s=1+r.length;s<n.shape.length;++s)i.push([0,0]);var u=n.pad(i),l=gy(u.shape,r,a,!1),d=yy(l.length,r.length,!1),f=by(u.shape,r,a,!1);return Pa(u.reshape(l),d).reshape(f)},e.prototype.maxPool=function(n,r){return ke(n,"maxPool"),vC(this.readSync(n.dataId),n.shape,n.dtype,n.strides,r,"max").toTensor()},e.prototype.maxPoolBackprop=function(n,r,o,a){ke([r,o],"maxPoolBackprop");for(var i=this.readSync(r.dataId),s=Ct(a.outShape,r.dtype,gz(i,r.shape,r.dtype,a).values),u=a.strideHeight,l=a.strideWidth,d=a.dilationHeight,f=a.dilationWidth,p=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=m-1-a.padInfo.left,y=p-1-a.padInfo.top,b=Ct(r.shape,"float32"),C=this.bufferSync(n),S=0;S<a.batchSize;++S)for(var E=0;E<a.inChannels;++E)for(var _=0;_<a.inHeight;++_)for(var T=0;T<a.inWidth;++T){for(var D=_-y,I=T-g,k=0,M=0;M<p;M+=d){var O=(D+M)/u;if(!(O<0||O>=a.outHeight||Math.floor(O)!==O))for(var F=0;F<m;F+=f){var j=(I+F)/l;if(!(j<0||j>=a.outWidth||Math.floor(j)!==j)){var G=p*m-1-s.get(S,O,j,E)===M*m+F?1:0;G!==0&&(k+=C.get(S,O,j,E)*G)}}}b.set(k,S,_,T,E)}return b.toTensor()},e.prototype.avgPoolBackprop=function(n,r,o){ke([n,r],"avgPoolBackprop");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=p-1-o.padInfo.left,g=f-1-o.padInfo.top,y=Ct(r.shape,"float32"),b=1/(s*u),C=this.bufferSync(n),S=0;S<o.batchSize;++S)for(var E=0;E<o.inChannels;++E)for(var _=0;_<o.inHeight;++_)for(var T=0;T<o.inWidth;++T){for(var D=_-g,I=T-m,k=0,M=0;M<f;M+=l){var O=(D+M)/a;if(!(O<0||O>=o.outHeight||Math.floor(O)!==O))for(var F=0;F<p;F+=d){var j=(I+F)/i;j<0||j>=o.outWidth||Math.floor(j)!==j||(k+=C.get(S,O,j,E))}}y.set(k*b,S,_,T,E)}return y.toTensor()},e.prototype.pool3d=function(n,r,o){ke(n,"pool3d");for(var a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,m=r.effectiveFilterWidth,g=r.padInfo.front,y=r.padInfo.top,b=r.padInfo.left,C=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=this.readSync(n.dataId),E=Ct(r.outShape,n.dtype),_=E.values,T=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[2]*r.outShape[3]*r.outShape[4],I=r.outShape[3]*r.outShape[4],k=r.outShape[4],M=0;M<r.batchSize;++M)for(var O=M*T,F=M*n.strides[0],j=0;j<r.inChannels;++j)for(var G=0;G<r.outDepth;++G){for(var W=G*a-g,q=W;q<0;)q+=u;for(var P=Math.min(r.inDepth,f+W),U=O+G*D,z=0;z<r.outHeight;++z){for(var H=z*i-y,L=H;L<0;)L+=l;for(var $=Math.min(r.inHeight,p+H),J=U+z*I,ne=0;ne<r.outWidth;++ne){for(var ce=ne*s-b,be=ce;be<0;)be+=d;for(var se=Math.min(r.inWidth,m+ce),oe=J+ne*k,fe=C,me=0,Oe=0,Be=q;Be<P;Be+=u){for(var Le=F+Be*n.strides[1],De=L;De<$;De+=l){for(var $e=Le+De*n.strides[2],et=be;et<se;et+=d){var ot=S[$e+et*n.strides[3]+j];if(o==="max"&&ot>fe?fe=ot:o==="avg"&&(me+=ot,Oe++),isNaN(fe))break}if(isNaN(fe))break}if(isNaN(fe))break}_[oe+j]=o==="avg"?me/Oe:fe}}}return E.toTensor()},e.prototype.avgPool3d=function(n,r){return ke(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,o){ke([n,r],"avgPool3dBackprop");for(var a=o.strideDepth,i=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,d=o.filterWidth,f=o.dilationDepth,p=o.dilationHeight,m=o.dilationWidth,g=o.effectiveFilterDepth,y=o.effectiveFilterHeight,b=o.effectiveFilterWidth,C=g-1-o.padInfo.front,S=b-1-o.padInfo.left,E=y-1-o.padInfo.top,_=Ct(r.shape,"float32"),T=1/(u*l*d),D=this.bufferSync(n),I=0;I<o.batchSize;++I)for(var k=0;k<o.inChannels;++k)for(var M=0;M<o.inDepth;++M)for(var O=0;O<o.inHeight;++O)for(var F=0;F<o.inWidth;++F){for(var j=M-C,G=O-E,W=F-S,q=0,P=0;P<g;P+=f){var U=(j+P)/a;if(!(U<0||U>=o.outDepth||Math.floor(U)!==U))for(var z=0;z<y;z+=p){var H=(G+z)/i;if(!(H<0||H>=o.outHeight||Math.floor(H)!==H))for(var L=0;L<b;L+=m){var $=(W+L)/s;$<0||$>=o.outWidth||Math.floor($)!==$||(q+=D.get(I,U,H,$,k))}}}_.set(q*T,I,M,O,F,k)}return _.toTensor()},e.prototype.maxPool3d=function(n,r){return ke(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var o=Ct(r.outShape,"int32"),a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,m=r.effectiveFilterWidth,g=r.padInfo.front,y=r.padInfo.top,b=r.padInfo.left,C=this.bufferSync(n),S=0;S<r.batchSize;++S)for(var E=0;E<r.inChannels;++E)for(var _=0;_<r.outDepth;++_){for(var T=_*a-g,D=T;D<0;)D+=u;for(var I=Math.min(r.inDepth,f+T),k=0;k<r.outHeight;++k){for(var M=k*i-y,O=M;O<0;)O+=l;for(var F=Math.min(r.inHeight,p+M),j=0;j<r.outWidth;++j){for(var G=j*s-b,W=G;W<0;)W+=d;for(var q=Math.min(r.inWidth,m+G),P=Number.NEGATIVE_INFINITY,U=-1,z=D;z<I;z+=u)for(var H=z-T,L=O;L<F;L+=l)for(var $=L-M,J=W;J<q;J+=d){var ne=J-G,ce=C.get(S,z,L,J,E);ce>=P&&(P=ce,U=H*p*m+$*p+ne)}o.set(U,S,_,k,j,E)}}}return o.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,o,a){ke([r,o],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,l=a.strideWidth,d=a.dilationDepth,f=a.dilationHeight,p=a.dilationWidth,m=a.effectiveFilterDepth,g=a.effectiveFilterHeight,y=a.effectiveFilterWidth,b=m-1-a.padInfo.front,C=y-1-a.padInfo.left,S=g-1-a.padInfo.top,E=Ct(r.shape,"float32"),_=this.bufferSync(i),T=this.bufferSync(n),D=0;D<a.batchSize;++D)for(var I=0;I<a.inChannels;++I)for(var k=0;k<a.inDepth;++k)for(var M=0;M<a.inHeight;++M)for(var O=0;O<a.inWidth;++O){for(var F=k-b,j=M-S,G=O-C,W=0,q=0;q<m;q+=d){var P=(F+q)/s;if(!(P<0||P>=a.outDepth||Math.floor(P)!==P))for(var U=0;U<g;U+=f){var z=(j+U)/u;if(!(z<0||z>=a.outHeight||Math.floor(z)!==z))for(var H=0;H<y;H+=p){var L=(G+H)/l;if(!(L<0||L>=a.outWidth||Math.floor(L)!==L)){var $=m*g*y-1-_.get(D,P,z,L,I)===q*g*y+U*y+H?1:0;$!==0&&(W+=T.get(D,P,z,L,I)*$)}}}}E.set(W,D,k,M,O,I)}return E.toTensor()},e.prototype.cast=function(n,r){return bj(n,r,this)},e.prototype.reshape=function(n,r){return pC(n,r)},e.prototype.avgPool=function(n,r){return ke(n,"avgPool"),ke(n,"maxPool"),vC(this.readSync(n.dataId),n.shape,n.dtype,n.strides,r,"avg").toTensor().toFloat()},e.prototype.resizeBilinear=function(n,r,o,a){ke(n,"resizeBilinear");for(var i=n.shape,s=i[0],u=i[1],l=i[2],d=i[3],f=this.readSync(n.dataId),p=new Float32Array(Qe([s,r,o,d])),m=[a&&r>1?u-1:u,a&&o>1?l-1:l],g=[a&&r>1?r-1:r,a&&o>1?o-1:o],y=0,b=m[0]/g[0],C=m[1]/g[1],S=0;S<s;S++)for(var E=0;E<r;E++)for(var _=b*E,T=Math.floor(_),D=_-T,I=Math.min(u-1,Math.ceil(_)),k=S*n.strides[0]+T*n.strides[1],M=S*n.strides[0]+I*n.strides[1],O=0;O<o;O++)for(var F=C*O,j=Math.floor(F),G=F-j,W=Math.min(l-1,Math.ceil(F)),q=k+j*n.strides[2],P=M+j*n.strides[2],U=k+W*n.strides[2],z=M+W*n.strides[2],H=0;H<d;H++){var L=f[q+H],$=f[P+H],J=L+(f[U+H]-L)*G,ne=J+($+(f[z+H]-$)*G-J)*D;p[y++]=ne}return Ar(p,[s,r,o,d])},e.prototype.resizeBilinearBackprop=function(n,r,o){ke([n,r],"resizeBilinearBackprop");for(var a=r.shape,i=a[0],s=a[1],u=a[2],l=a[3],d=n.shape,f=d[1],p=d[2],m=new Float32Array(i*s*u*l),g=[o&&f>1?s-1:s,o&&p>1?u-1:u],y=[o&&f>1?f-1:f,o&&p>1?p-1:p],b=g[0]/y[0],C=g[1]/y[1],S=this.readSync(n.dataId),E=0,_=0;_<i;_++)for(var T=_*r.strides[0],D=0;D<f;D++)for(var I=D*b,k=Math.floor(I),M=Math.min(Math.ceil(I),s-1),O=T+k*r.strides[1],F=T+M*r.strides[1],j=I-k,G=1-j,W=0;W<p;W++)for(var q=W*C,P=Math.floor(q),U=Math.min(Math.ceil(q),u-1),z=q-P,H=1-z,L=O+P*r.strides[2],$=O+U*r.strides[2],J=F+P*r.strides[2],ne=F+U*r.strides[2],ce=G*H,be=G*z,se=j*H,oe=j*z,fe=0;fe<l;fe++){var me=S[E++];m[L+fe]+=me*ce,m[$+fe]+=me*be,m[J+fe]+=me*se,m[ne+fe]+=me*oe}return pi(m,[i,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,o,a){ke(n,"resizeNearestNeighbor");for(var i=n.shape,s=i[0],u=i[1],l=i[2],d=i[3],f=this.readSync(n.dataId),p=new Float32Array(s*r*o*d),m=[a&&r>1?u-1:u,a&&o>1?l-1:l],g=[a&&r>1?r-1:r,a&&o>1?o-1:o],y=m[0]/g[0],b=m[1]/g[1],C=0,S=0;S<s;S++)for(var E=S*n.strides[0],_=0;_<r;_++)for(var T=y*_,D=E+Math.min(u-1,a?Math.round(T):Math.floor(T))*n.strides[1],I=0;I<o;I++)for(var k=b*I,M=D+Math.min(l-1,a?Math.round(k):Math.floor(k))*n.strides[2],O=0;O<d;O++){var F=f[M+O];p[C++]=F}return Ar(p,[s,r,o,d],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,o){ke([n,r],"resizeNearestNeighborBackprop");for(var a=r.shape,i=a[0],s=a[1],u=a[2],l=a[3],d=n.shape,f=d[1],p=d[2],m=new Float32Array(i*s*u*l),g=this.readSync(n.dataId),y=[o&&f>1?s-1:s,o&&p>1?u-1:u],b=[o&&f>1?f-1:f,o&&p>1?p-1:p],C=y[0]/b[0],S=y[1]/b[1],E=1/C,_=1/S,T=2*Math.ceil(E)+2,D=2*Math.ceil(_)+2,I=0;I<i;I++)for(var k=I*r.strides[0],M=0;M<s;M++)for(var O=k+M*r.strides[1],F=Math.floor(M*E),j=Math.floor(F-T/2),G=0;G<u;G++)for(var W=O+G*r.strides[2],q=Math.floor(G*_),P=Math.floor(q-D/2),U=0;U<l;U++){for(var z=0,H=0;H<T;H++){var L=H+j;if(!(L<0||L>=f)){var $=k+L*n.strides[1],J=L*C;if(M===Math.min(s-1,o?Math.round(J):Math.floor(J)))for(var ne=0;ne<D;ne++){var ce=ne+P;if(!(ce<0||ce>=p)){var be=$+ce*n.strides[2],se=ce*S;G===Math.min(u-1,o?Math.round(se):Math.floor(se))&&(z+=g[be+U])}}}}m[W+U]=z}return pi(m,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,o,a,i,s){ke([n,r,o,i,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),d=this.readSync(o.dataId),f=i?this.readSync(i.dataId):new Float32Array([1]),p=s?this.readSync(s.dataId):new Float32Array([0]),m=new Float32Array(u.length),g=p.length,y=f.length,b=d.length,C=l.length,S=0,E=0,_=0,T=0,D=0;D<u.length;++D)m[D]=p[S++]+(u[D]-l[E++])*f[_++]/Math.sqrt(d[T++]+a),S>=g&&(S=0),E>=C&&(E=0),_>=y&&(_=0),T>=b&&(T=0);return pi(m,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,o,a,i){ke(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),d=n.size,f=new Float32Array(d);function p(b){for(var C=b%s,S=b-C+Math.max(0,C-r),E=b-C+Math.min(C+r,u),_=0;S<=E;S++){var T=l[S];_+=T*T}return _}for(var m=0;m<d;m++){var g=p(m),y=l[m]*Math.pow(o+a*g,-i);f[m]=y}return pi(f,n.shape)},e.prototype.LRNGrad=function(n,r,o,a,i,s,u){ke(n,"LRNGrad");for(var l=n.shape[3],d=this.readSync(n.dataId),f=this.readSync(r.dataId),p=this.readSync(o.dataId),m=new Float32Array(n.size),g=n.size,y=0;y<g;y++){for(var b=y%l,C=y-b+Math.max(0,b-a),S=y-b+Math.min(l,b+a+1),E=0,_=C;_<S;_++)E+=Math.pow(f[_],2);for(E=s*E+i,_=C;_<S;_++){var T=-2*s*u*f[_]*p[y]/E;y===_&&(T+=Math.pow(E,-u)),T*=d[y],m[_]+=T}}return pi(m,n.shape)},e.prototype.multinomial=function(n,r,o,a){ke(n,"multinomial");for(var i=r?n:G0(n),s=i.shape[0],u=i.shape[1],l=Vn([s,o],"int32"),d=this.readSync(l.dataId),f=this.readSync(i.dataId),p=0;p<s;++p){var m=p*u,g=new Float32Array(u-1);g[0]=f[m];for(var y=1;y<g.length;++y)g[y]=g[y-1]+f[m+y];for(var b=$0(a.toString()),C=p*o,S=0;S<o;++S){var E=b();d[C+S]=g.length;for(var _=0;_<g.length;_++)if(E<g[_]){d[C+S]=_;break}}}return l},e.prototype.oneHot=function(n,r,o,a){ke(n,"oneHot");var i=new Float32Array(n.size*r);i.fill(a);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(i[u*r+s[u]]=o);return Pl(i,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,o,a,i){return ke(n,"nonMaxSuppression"),nR(this.readSync(n.dataId),this.readSync(r.dataId),o,a,i)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var o=n.shape[0],a=n.shape[1],i=Ct(n.shape,"float32"),s=Ct(n.shape,"float32"),u=pa(n).as2D(o,a),l=yi(n).as2D(o,a),d=0;d<o;d++)for(var f=u.slice([d,0],[1,a]),p=l.slice([d,0],[1,a]),m=_r(f,p),g=this.readSync(this.fftImpl(m,r).dataId),y=0;y<a;y++){var b=fM(g,y);i.values[d*a+y]=b.real,s.values[d*a+y]=b.imag}return _r(i.toTensor(),s.toTensor()).as2D(o,a)},e.prototype.fftImpl=function(n,r){var o=n.as1D(),a=o.size;if(this.isExponentOf2(a)){var i=this.fftRadix2(o,a,r).as2D(n.shape[0],n.shape[1]);return r&&(i=_r(pa(i).div(rt(a)),yi(i).div(rt(a)))),i}var s=this.readSync(n.dataId),u=(function(l){for(var d=new Float32Array(l.length/2),f=new Float32Array(l.length/2),p=0;p<l.length;p+=2)d[p/2]=l[p],f[p/2]=l[p+1];return{real:d,imag:f}})(this.fourierTransformByMatmul(s,a,r));return _r(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,o){if(r===1)return n;var a=this.readSync(n.dataId),i=r/2,s=(function(C){for(var S=Math.ceil(C.length/4),E=new Float32Array(S),_=new Float32Array(S),T=0;T<C.length;T+=4)E[Math.floor(T/4)]=C[T],_[Math.floor(T/4)]=C[T+1];return{real:E,imag:_}})(a),u=_r(s.real,s.imag).as1D(),l=(function(C){for(var S=Math.floor(C.length/4),E=new Float32Array(S),_=new Float32Array(S),T=2;T<C.length;T+=4)E[Math.floor(T/4)]=C[T],_[Math.floor(T/4)]=C[T+1];return{real:E,imag:_}})(a),d=_r(l.real,l.imag).as1D();u=this.fftRadix2(u,i,o),d=this.fftRadix2(d,i,o);var f=(function(C,S){for(var E=new Float32Array(C/2),_=new Float32Array(C/2),T=0;T<Math.ceil(C/2);T++){var D=(S?2:-2)*Math.PI*(T/C);E[T]=Math.cos(D),_[T]=Math.sin(D)}return{real:E,imag:_}})(r,o),p=_r(f.real,f.imag).mul(d),m=u.add(p),g=u.sub(p),y=pa(m).concat(pa(g)),b=yi(m).concat(yi(g));return _r(y,b).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,o){for(var a=new Float32Array(2*r),i=0;i<r;i++){for(var s=0,u=0,l=0;l<r;l++){var d=ibe(i*l,r,o),f=fM(n,l);s+=f.real*d.real-f.imag*d.imag,u+=f.real*d.imag+f.imag*d.real}o&&(s/=r,u/=r),abe(a,s,u,i)}return a},e.prototype.depthToSpace=function(n,r,o){K(o==="NHWC",(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o})),K(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));for(var a=n.shape[0],i=n.shape[1],s=n.shape[2],u=n.shape[3],l=i*r,d=s*r,f=u/(r*r),p=this.readSync(n.dataId),m=new Float32Array(a*l*d*f),g=0,y=0;y<a;++y)for(var b=0;b<l;++b)for(var C=Math.floor(b/r),S=b%r,E=0;E<d;++E)for(var _=Math.floor(E/r),T=(S*r+E%r)*f,D=0;D<f;++D){var I=D+T+u*(_+s*(C+i*y));m[g++]=p[I]}return pi(m,[a,l,d,f])},e.prototype.broadcastedBinaryOp=function(n,r,o,a){var i=Ot(n.shape,r.shape),s=Ct(i,o),u=this.readSync(n.dataId),l=this.readSync(r.dataId),d=wu(n.shape,i),f=wu(r.shape,i),p=s.values;if(d.length+f.length===0)for(var m=0;m<p.length;++m)p[m]=a(u[m%u.length],l[m%l.length]);else{var g=this.bufferSync(n),y=this.bufferSync(r),b=function(C){var S=s.indexToLoc(C),E=S.slice(-n.rank);d.forEach((function(I){return E[I]=0}));var _=g.locToIndex(E),T=S.slice(-r.rank);f.forEach((function(I){return T[I]=0}));var D=y.locToIndex(T);p[C]=a(u[_],l[D])};for(m=0;m<p.length;++m)b(m)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,o){var a=Ot(n.shape,r.shape),i=Ct(a,"float32"),s=Ct(a,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),d=wu(n.shape,a),f=wu(r.shape,a),p=i.values,m=s.values;if(d.length+f.length===0)for(var g=0;g<p.length;g++){var y=g%u.length,b=g%l.length,C=o(u[2*y],u[2*y+1],l[2*b],l[2*b+1]);p[g]=C.real,m[g]=C.imag}else{var S=this.bufferSync(this.data.get(n.dataId).complexTensors.real),E=this.bufferSync(this.data.get(r.dataId).complexTensors.real),_=function(T){var D=i.indexToLoc(T),I=D.slice(-n.rank);d.forEach((function(j){return I[j]=0}));var k=S.locToIndex(I),M=D.slice(-r.rank);f.forEach((function(j){return M[j]=0}));var O=E.locToIndex(M),F=o(u[2*k],u[2*k+1],l[2*O],l[2*O+1]);p[T]=F.real,m[T]=F.imag};for(g=0;g<p.length;g++)_(g)}return this.complex(i.toTensor(),s.toTensor())},e.prototype.split=function(n,r,o){return Cj(n,r,o)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,o,a,i,s){for(var u=n.shape,l=u[0],d=u[1],f=u[2],p=u[3],m=r.shape[0],g=a[0],y=a[1],b=Ct([m,g,y,p],"float32"),C=this.readSync(r.dataId),S=this.readSync(o.dataId),E=this.readSync(n.dataId),_=n.strides,T=b.strides,D=0;D<m;D++){var I=4*D,k=C[I],M=C[I+1],O=C[I+2],F=C[I+3],j=S[D];if(!(j>=l))for(var G=g>1?(O-k)*(d-1)/(g-1):0,W=y>1?(F-M)*(f-1)/(y-1):0,q=0;q<g;q++){var P=g>1?k*(d-1)+q*G:.5*(k+O)*(d-1);if(P<0||P>d-1)for(var U=0;U<y;U++)for(var z=0;z<p;z++){var H=z+U*T[2]+q*T[1]+D*T[0];b.values[H]=s}else if(i==="bilinear"){var L=Math.floor(P),$=Math.ceil(P),J=P-L;for(U=0;U<y;U++)if((Be=y>1?M*(f-1)+U*W:.5*(M+F)*(f-1))<0||Be>f-1)for(z=0;z<p;z++)H=z+U*T[2]+q*T[1]+D*T[0],b.values[H]=s;else{var ne=Math.floor(Be),ce=Math.ceil(Be),be=Be-ne;for(z=0;z<p;z++){var se=E[H=z+ne*_[2]+L*_[1]+j*_[0]],oe=E[H=z+ce*_[2]+L*_[1]+j*_[0]],fe=E[H=z+ne*_[2]+$*_[1]+j*_[0]],me=se+(oe-se)*be,Oe=fe+(E[H=z+ce*_[2]+$*_[1]+j*_[0]]-fe)*be;H=z+U*T[2]+q*T[1]+D*T[0],b.values[H]=me+(Oe-me)*J}}}else for(U=0;U<y;++U){var Be;if((Be=y>1?M*(f-1)+U*W:.5*(M+F)*(f-1))<0||Be>f-1)for(z=0;z<p;z++)H=z+U*T[2]+q*T[1]+D*T[0],b.values[H]=s;else{var Le=Math.round(Be),De=Math.round(P);for(z=0;z<p;z++){var $e=z+Le*_[2]+De*_[1]+j*_[0],et=z+U*T[2]+q*T[1]+D*T[0];b.values[et]=E[$e]}}}}}return b.toTensor()},e.prototype.sparseToDense=function(n,r,o,a){var i=wy(0,n,o),s=i.sliceRank,u=i.numUpdates,l=i.sliceSize,d=i.strides,f=i.outputSize;return this.scatter(n,r,o,f,l,u,s,d,a,!1)},e.prototype.gatherND=function(n,r){var o=r.shape,a=o[o.length-1],i=fj(n,r),s=i[0],u=i[1],l=i[2],d=i[3];if(u===0)return Ar([],s,n.dtype);for(var f=new Cp([u,l],n.dtype),p=this.readSync(r.dataId),m=this.readSync(n.dataId),g=0;g<u;g++){for(var y=[],b=0,C=0;C<a;C++){var S=p[g*a+C];b+=S*d[C],y.push(S)}if(b<0||b>=n.size/l)throw new Error("Invalid indices: "+y+" does not index into "+n.shape);for(var E=0;E<l;E++)f.values[g*l+E]=m[b*l+E]}return f.toTensor().reshape(s)},e.prototype.scatterND=function(n,r,o){var a=wy(0,n,o),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,d=a.outputSize,f=rt(0);return this.scatter(n,r,o,d,u,s,i,l,f,!0)},e.prototype.fill=function(n,r,o){var a=cy(o=o||sm(r),Qe(n));return a.fill(r),ae.makeTensor(a,n,o,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=cy(n.dtype,Qe(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,o){return xj(n,r,o)},e.prototype.scatter=function(n,r,o,a,i,s,u,l,d,f){var p=[a/i,i],m=this.readSync(n.dataId),g=this.readSync(r.dataId);if(a===0)return Ar([],o,r.dtype);var y=new Cp(p,r.dtype);y.values.fill(this.readSync(d.dataId)[0]);for(var b=0;b<s;b++){for(var C=[],S=0,E=0;E<u;E++){var _=m[b*u+E];C.push(_),S+=_*l[E]}if(S<0||S>=a/i)throw new Error("Invalid indices: "+C+" does not index into "+o);for(var T=0;T<i;T++)f?y.values[S*i+T]+=g[b*i+T]:y.values[S*i+T]=r.rank===0?g[0]:g[b*i+T]}return y.toTensor().reshape(o)},e})(gj);function yz(t,e){return{kernelName:t,backendName:"cpu",kernelFunc:function(n){var r=n.inputs,o=n.backend,a=r,i=a.a,s=a.b,u=o;ke([i,s],t);var l=u.data.get(i.dataId).values,d=u.data.get(s.dataId).values,f=e(i.shape,s.shape,l,d,i.dtype),p=f[0],m=f[1];return{dataId:u.write(p,m,i.dtype),shape:m,dtype:i.dtype}}}}function bz(t){return function(e,n,r,o,a){var i=Ot(e,n),s=i.length,u=Ho(i),l=Yd(a,Qe(i)),d=e.length,f=n.length,p=Ho(e),m=Ho(n),g=wu(e,i),y=wu(n,i);if(g.length+y.length===0)for(var b=0;b<l.length;++b)l[b]=t(r[b%r.length],o[b%o.length]);else{var C=function(S){var E=VL(S,s,u),_=E.slice(-d);g.forEach((function(k){return _[k]=0}));var T=sC(_,d,p),D=E.slice(-f);y.forEach((function(k){return D[k]=0}));var I=sC(D,f,m);l[S]=t(r[T],o[I])};for(b=0;b<l.length;++b)C(b)}return[l,i]}}ae.registerBackend("cpu",(function(){return new i2e}),1);var s2e=bz((function(t,e){return t/e})),u2e=yz(W0,s2e),l2e={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n,i=a.filterSize,s=a.strides,u=a.pad,l=a.includeBatchInIndex,d=r;ke(o,"MaxPoolWithArgmax");var f=d.data.get(o.dataId).values,p=Hl(o.shape,i,s,[1,1],u),m=(function(S,E,_,T,D){var I=vC(S,0,_,Ho(E),D,"max"),k=gz(S,E,_,D,!0,T);return[I.values,k.values]})(f,o.shape,o.dtype,l,p),g=m[0],y=m[1],b=d.write(g,p.outShape,o.dtype),C=d.write(y,p.outShape,o.dtype);return[{dataId:b,shape:p.outShape,dtype:o.dtype},{dataId:C,shape:p.outShape,dtype:"int32"}]}},c2e={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,d=s.scoreThreshold,f=s.softNmsSigma,p=n;ke(a,"NonMaxSuppressionWithScore");var m=rR(p.data.get(a.dataId).values,p.data.get(i.dataId).values,u,l,d,f);return[m.selectedIndices,m.selectedScores]}},d2e={kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n;ke(r,"square");for(var a=o.data.get(r.dataId).values,i=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];i[s]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},f2e=bz((function(t,e){var n=t-e;return n*n}));function xz(t,e,n,r,o){for(var a=Qe(e),i=e.length,s=Ho(e),u=Ho(o),l=Yd(n,Qe(o)),d=0;d<a;++d){for(var f=VL(d,i,s),p=new Array(f.length),m=0;m<p.length;m++)p[m]=f[r[m]];l[sC(p,i,u)]=t[d]}return l}for(var Pw=0,OM=[c2e,d2e,yz(V0,f2e),u2e,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n.perm,i=r;ke(o,"transpose");for(var s=o.shape.length,u=new Array(s),l=0;l<u.length;l++)u[l]=o.shape[a[l]];var d=xz(i.data.get(o.dataId).values,o.shape,o.dtype,a,u);return{dataId:i.write(d,u,o.dtype),shape:u,dtype:o.dtype}}},l2e];Pw<OM.length;Pw++)FL(OM[Pw]);var ed,h2e=function(t){this.variableNames=["A"];var e=Ur(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},p2e=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Ur(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `},m2e=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=Sn(this.rank),a=(function(i){var s=i.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),d=0;d<i.length;d++)l[i[d]]=u[d];return l.join()})(e);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},v2e=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Sn(this.rank),a=Rj("rc",this.rank),i=new Array(this.rank);for(r=0;r<e.length;r++)i[e[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `};for(var Fw=0,PM=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.pixels,a=r.numChannels,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],d=u[1],f=[d,l],p=[d,l,a];(s||i)&&(ed==null&&(ed=document.createElement("canvas").getContext("2d")),ed.canvas.width=l,ed.canvas.height=d,ed.drawImage(o,0,0,l,d),o=ed.canvas);var m=n.makeTensorInfo(f,"int32");n.texData.get(m.dataId).usage=jo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),o);var g=Se().getBool("WEBGL_PACK")?new p2e(p):new h2e(p),y=n.runWebGLProgram(g,[m],"int32");return n.disposeData(m.dataId),y}},{kernelName:W0,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e;return(function(o,a,i){var s=new zn(_be,o.shape,a.shape);return Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(s=new di(Tbe,o.shape,a.shape,!0)),i.runWebGLProgram(s,[o,a],"float32")})(r.a,r.b,n)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;py("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=e,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,d=s.scoreThreshold,f=s.softNmsSigma,p=n,m=rR(p.readSync(a.dataId),p.readSync(i.dataId),u,l,d,f);return[m.selectedIndices,m.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n,a=new Rt(r.shape,"return x * x;");return o.runWebGLProgram(a,[r],r.dtype)}},{kernelName:V0,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,a=r.b,i=n,s=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new di("return (a - b) * (a - b);",o.shape,a.shape):new zn("return (a - b) * (a - b);",o.shape,a.shape);return i.compileAndRun(s,[o,a])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(t){for(var e,n=t.inputs,r=t.attrs,o=t.backend,a=n.x,i=r.perm,s=o,u=a.shape.length,l=new Array(u),d=0;d<l.length;d++)l[d]=a.shape[i[d]];if(s.shouldExecuteOnCPU([a])){var f=xz(s.texData.get(a.dataId).values,a.shape,a.dtype,i,l);e=s.makeTensorInfo(l,a.dtype),s.texData.get(e.dataId).values=f}else e=(function(p,m,g){var y=Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new v2e(p.shape,m):new m2e(p.shape,m);return g.runWebGLProgram(y,[p],p.dtype)})(a,i,s);return e}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n,i=a.filterSize,s=a.strides,u=a.pad,l=a.includeBatchInIndex,d=r;K(o.shape.length===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+o.shape.length+"."}));var f=[1,1];K(ro(s,f),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+f+"'"}));var p=Hl(o.shape,i,s,f,u),m=(function(g,y,b,C){var S=new ep(b,"max",!1),E=C.runWebGLProgram(S,[g],"float32");return S=new ep(b,"max",!0,!0,y),[E,C.runWebGLProgram(S,[g],"float32")]})(o,l,p,d);return[m[0],m[1]]}}];Fw<PM.length;Fw++)FL(PM[Fw]);for(var Bw=0,FM=[{kernelName:rj,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=Ot(n.shape,r.shape);return{a:function(){var a=t,i=sr(n.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(n.shape)},b:function(){var a=t,i=sr(r.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(t,e){var n={};return e.forEach((function(r,o){n[o]=function(){return t.clone()}})),n}},{kernelName:oj,gradFunc:function(t,e,n){for(var r=n,o=r.inputShape,a=r.shape,i=Array.from(a),s=o.length-1;s>=0;s--)if(o[s]===a[s])i[s]=1;else if(o[s]!==1)throw new Error("broadcastTo(): ["+o+"] cannot be broadcast to ["+a+"].");var u=[];for(s=0;s<i.length;s++)i[s]>1&&u.push(s);return{x:function(){return t.sum(u,!0)}}}},{kernelName:W0,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=Ot(n.shape,r.shape);return{a:function(){var a=Fu(t,r.toFloat()),i=sr(n.shape,o);return i.length>0?vu(a,i).reshape(n.shape):a},b:function(){var a=t.mul(n.toFloat()),i=sr(r.shape,o);i.length>0&&(a=vu(a,i).reshape(r.shape));var s=qj(r);return JE(Fu(a,s.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(t,e,n){var r=n.varianceEpsilon,o=e[0],a=e[1],i=e[2],s=e[3],u=Fj(o),l=s??rt(1),d=sr(a.shape,u.shape),f=[];if(a.rank===1){for(var p=0;p<u.shape.length-1;++p)f.push(u.shape[p]);f.push(1)}var m=Ua(o,a),g=Wn(t,l),y=lj(Ra(i,rt(r))),b=Wn(Wn(Wn(y,y),y),rt(-.5));return{x:function(){return a.rank===1?us(Wn(Wn(t,Ad(y.as4D(1,1,1,a.shape[0]),f)),l),o.shape):us(Wn(Wn(t,y),l),o.shape)},mean:function(){var C=Wn(Wn(y,rt(-1)),g);return a.rank===1&&(C=vu(C,d)),us(C,a.shape)},variance:function(){var C=Wn(Wn(b,m),g);return a.rank===1&&(C=vu(C,d)),us(C,a.shape)},scale:function(){var C=Wn(m,y),S=Wn(t,C);return a.rank===1&&(S=vu(S,d)),us(S,a.shape)},offset:function(){var C=t;return a.rank===1&&(C=vu(C,d)),us(C,a.shape)}}}},{kernelName:ij,gradFunc:function(t){return{x:function(){return t.toFloat()}}}},{kernelName:aj,inputsToSave:["indices"],gradFunc:function(t,e){var n=e[0];return{indices:function(){return Vn(n.shape,"float32")}}}},{kernelName:uj,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],o=n.paddings.map((function(a){return a[0]}));return{x:function(){return t.slice(o,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:V0,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=rt(2);return{a:function(){return Wn(t,Wn(o,Ua(n,r)))},b:function(){return Wn(t,Wn(o,Ua(r,n)))}}}},{kernelName:sj,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],o=n.reps;return{x:function(){var a=$t(r);if(r.rank===1)for(var i=0;i<o[0];++i)a=a.add(t.slice([i*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(i=0;i<o[0];++i)for(var s=0;s<o[1];++s)a=a.add(t.slice([i*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(i=0;i<o[0];++i)for(s=0;s<o[1];++s)for(var u=0;u<o[2];++u)a=a.add(t.slice([i*r.shape[0],s*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(r.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(i=0;i<o[0];++i)for(s=0;s<o[1];++s)for(u=0;u<o[2];++u)for(var l=0;l<o[3];++l)a=a.add(t.slice([i*r.shape[0],s*r.shape[1],u*r.shape[2],l*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return a}}}},{kernelName:"Transpose",gradFunc:function(t,e,n){var r=YE(n.perm);return{x:function(){return Pa(t,r)}}}}];Bw<FM.length;Bw++)nye(FM[Bw]);var g2e=(function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t})();Se().get("IS_BROWSER")&&Se().setPlatform("browser",new g2e);var Lw,y2e=function(){return require("node-fetch")},b2e=(function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return Se().global.fetch!=null?Se().global.fetch(e,n):(Lw==null&&(Lw=y2e()),Lw(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t})();Se().get("IS_NODE")&&Se().setPlatform("node",new b2e);var gC={float32:4,int32:4,uint16:2,uint8:1,bool:1},Ty=4;function wz(t,e){for(var n={},r=0,o=function(s){var u=s.name,l=s.dtype,d=s.shape,f=Qe(d),p=void 0;if("quantization"in s){var m=s.quantization;if(m.dtype!=="uint8"&&m.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+m.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var g=gC[m.dtype],y=t.slice(r,r+f*g),b=m.dtype==="uint8"?new Uint8Array(y):new Uint16Array(y);if(l==="float32")p=Float32Array.from(b,(function(D){return D*m.scale+m.min}));else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);p=Int32Array.from(b,(function(D){return Math.round(D*m.scale+m.min)}))}r+=f*g}else if(l==="string"){var C=Qe(s.shape);p=[];for(var S=0;S<C;S++){var E=new Uint32Array(t.slice(r,r+Ty))[0];r+=Ty;var _=new Uint8Array(t.slice(r,r+E));p.push(_),r+=E}}else{var T=gC[l];if(y=t.slice(r,r+f*T),l==="float32")p=new Float32Array(y);else if(l==="int32")p=new Int32Array(y);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);p=new Uint8Array(y)}r+=f*T}n[u]=Ar(p,d,l)},a=0,i=e;a<i.length;a++)o(i[a]);return n}function x2e(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach((function(a){if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)}));var r=new Uint8Array(e),o=0;return n.forEach((function(a){r.set(new Uint8Array(a.buffer),o),o+=a.byteLength})),r.buffer}var yC=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function BM(t){return yC?Buffer.byteLength(t):new Blob([t]).size}function xR(t){var e=0;t.forEach((function(o){e+=o.byteLength}));var n=new Uint8Array(e),r=0;return t.forEach((function(o){n.set(new Uint8Array(o),r),r+=o.byteLength})),n.buffer}function LM(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function hm(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:BM(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:BM(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var zo=(function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach((function(a){var i=a(e,r);i!==null&&o.push(i)})),o},t})(),Nd="://",Au=(function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){K(e!=null,(function(){return"scheme must not be undefined or null."})),e.endsWith(Nd)&&(e=e.slice(0,e.indexOf(Nd))),K(e.length>0,(function(){return"scheme must not be an empty string."}));var r=t.getInstance();K(r.managers[e]==null,(function(){return"A model store manager is already registered for scheme '"+e+"'."})),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t})();function Tg(t){if(t.indexOf(Nd)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Au.getSchemes().join(","));return{scheme:t.split(Nd)[0],path:t.split(Nd)[1]}}function jM(t,e,n){return n===void 0&&(n=!1),Je(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,d,f;return Ze(this,(function(p){switch(p.label){case 0:return K(t!==e,(function(){return"Old path and new path are the same: '"+t+"'"})),K((r=zo.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+t+"."})),K(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."})),o=r[0],K((a=zo.getSaveHandlers(e)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+e+"."})),K(a.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."})),i=a[0],s=Tg(t).scheme,u=Tg(t).path,l=s===Tg(t).scheme,[4,o.load()];case 1:return d=p.sent(),n&&l?[4,Au.getManager(s).removeModel(u)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[4,i.save(d)];case 4:return f=p.sent(),!n||l?[3,6]:[4,Au.getManager(s).removeModel(u)];case 5:p.sent(),p.label=6;case 6:return[2,f.modelArtifactsInfo]}}))}))}var Dl="models_store",Cu="model_info_store";function Cz(){if(!Se().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function bC(t){var e=t.result;e.createObjectStore(Dl,{keyPath:"modelPath"}),e.createObjectStore(Cu,{keyPath:"modelPath"})}var Dd=(function(){function t(e){if(this.indexedDB=Cz(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},t.prototype.load=function(){return Je(this,void 0,void 0,(function(){return Ze(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},t.prototype.databaseAction=function(e,n){var r=this;return new Promise((function(o,a){var i=r.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return bC(i)},i.onsuccess=function(){var s=i.result;if(n==null){var u=s.transaction(Dl,"readonly"),l=u.objectStore(Dl).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(y){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var d,f=hm(n),p=s.transaction(Cu,"readwrite"),m=p.objectStore(Cu),g=m.put({modelPath:r.modelPath,modelArtifactsInfo:f});g.onsuccess=function(){var y=(d=s.transaction(Dl,"readwrite")).objectStore(Dl).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});y.onsuccess=function(){return o({modelArtifactsInfo:f})},y.onerror=function(b){var C=(m=p.objectStore(Cu)).delete(r.modelPath);C.onsuccess=function(){return s.close(),a(y.error)},C.onerror=function(S){return s.close(),a(y.error)}}},g.onerror=function(y){return s.close(),a(g.error)},p.oncomplete=function(){d==null?s.close():d.oncomplete=function(){return s.close()}}}},i.onerror=function(s){return a(i.error)}}))},t.URL_SCHEME="indexeddb://",t})(),zM=function(t){return Se().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Dd.URL_SCHEME)?(e=t.slice(Dd.URL_SCHEME.length),new Dd(e)):null;var e};zo.registerSaveRouter(zM),zo.registerLoadRouter(zM);var w2e=(function(){function t(){this.indexedDB=Cz()}return t.prototype.listModels=function(){return Je(this,void 0,void 0,(function(){var e=this;return Ze(this,(function(n){return[2,new Promise((function(r,o){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return bC(a)},a.onsuccess=function(){var i=a.result,s=i.transaction(Cu,"readonly"),u=s.objectStore(Cu).getAll();u.onsuccess=function(){for(var l={},d=0,f=u.result;d<f.length;d++){var p=f[d];l[p.modelPath]=p.modelArtifactsInfo}r(l)},u.onerror=function(l){return i.close(),o(u.error)},s.oncomplete=function(){return i.close()}},a.onerror=function(i){return o(a.error)}}))]}))}))},t.prototype.removeModel=function(e){return Je(this,void 0,void 0,(function(){var n=this;return Ze(this,(function(r){var o;return e=(o=e).startsWith(Dd.URL_SCHEME)?o.slice(Dd.URL_SCHEME.length):o,[2,new Promise((function(a,i){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return bC(s)},s.onsuccess=function(){var u,l=s.result,d=l.transaction(Cu,"readwrite"),f=d.objectStore(Cu),p=f.get(e);p.onsuccess=function(){if(p.result==null)return l.close(),i(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var m=f.delete(e),g=function(){var y=(u=l.transaction(Dl,"readwrite")).objectStore(Dl).delete(e);y.onsuccess=function(){return a(p.result.modelArtifactsInfo)},y.onerror=function(b){return i(p.error)}};m.onsuccess=g,m.onerror=function(y){return g(),l.close(),i(p.error)}},p.onerror=function(m){return l.close(),i(p.error)},d.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return i(s.error)}}))]}))}))},t})();if(Se().getBool("IS_BROWSER"))try{Au.registerManager(Dd.URL_SCHEME,new w2e)}catch{}var ds="/",dd="tensorflowjs_models",Sz="info",C2e="model_topology",S2e="weight_specs",E2e="weight_data",R2e="model_metadata";function Ez(t){return{info:[dd,t,Sz].join(ds),topology:[dd,t,C2e].join(ds),weightSpecs:[dd,t,S2e].join(ds),weightData:[dd,t,E2e].join(ds),modelMetadata:[dd,t,R2e].join(ds)}}function _2e(t){var e=t.split(ds);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(ds)}var kd=(function(){function t(e){if(!Se().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Ez(this.modelPath)}return t.prototype.save=function(e){return Je(this,void 0,void 0,(function(){var n,r,o;return Ze(this,(function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=hm(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(function(i){if(yC)return Buffer.from(i).toString("base64");for(var s=new Uint8Array(i),u="",l=0,d=s.length;l<d;l++)u+=String.fromCharCode(s[l]);return btoa(u)})(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]}))}))},t.prototype.load=function(){return Je(this,void 0,void 0,(function(){var e,n,r,o,a,i,s;return Ze(this,(function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(a),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,n.userDefinedMetadata=i.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=(function(l){if(yC){var d=Buffer.from(l,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var f=atob(l),p=new Uint8Array(f.length),m=0;m<f.length;++m)p.set([f.charCodeAt(m)],m);return p.buffer})(s),[2,n]}))}))},t.URL_SCHEME="localstorage://",t})(),UM=function(t){return Se().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(kd.URL_SCHEME)?(e=t.slice(kd.URL_SCHEME.length),new kd(e)):null;var e};zo.registerSaveRouter(UM),zo.registerLoadRouter(UM);var T2e=(function(){function t(){K(Se().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),K(typeof window>"u"||window.localStorage!==void 0,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return t.prototype.listModels=function(){return Je(this,void 0,void 0,(function(){var e,n,r,o,a,i;return Ze(this,(function(s){for(e={},n=dd+ds,r=ds+Sz,o=0;o<this.LS.length;++o)(a=this.LS.key(o)).startsWith(n)&&a.endsWith(r)&&(i=_2e(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]}))}))},t.prototype.removeModel=function(e){return Je(this,void 0,void 0,(function(){var n,r;return Ze(this,(function(o){var a;if(e=(a=e).startsWith(kd.URL_SCHEME)?a.slice(kd.URL_SCHEME.length):a,n=Ez(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]}))}))},t})();if(Se().getBool("IS_BROWSER"))try{Au.registerManager(kd.URL_SCHEME,new T2e)}catch{}var A2e="model",N2e=".json",D2e=".weights.bin";function WM(t){return new Promise((function(e){return setTimeout(e)})).then(t)}var jw=(function(){function t(e){if(!Se().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=A2e),this.modelTopologyFileName=e+N2e,this.weightDataFileName=e+D2e}return t.prototype.save=function(e){return Je(this,void 0,void 0,(function(){var n,r,o,a,i,s;return Ze(this,(function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,[4,WM((function(){return i.dispatchEvent(new MouseEvent("click"))}))];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,WM((function(){return s.dispatchEvent(new MouseEvent("click"))}))]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:hm(e)}]}}))}))},t.URL_SCHEME="downloads://",t})(),k2e=(function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return Je(this,void 0,void 0,(function(){var e,n,r=this;return Ze(this,(function(o){return e=this.files[0],n=this.files.slice(1),[2,new Promise((function(a,i){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),d=l.modelTopology;if(d!=null){n.length===0&&a({modelTopology:d});var f=l.weightsManifest;if(f!=null){var p;try{p=r.checkManifestAndWeightFiles(f,n)}catch(b){return void i(b)}var m=[],g=[],y=[];f.forEach((function(b){b.paths.forEach((function(C){g.push(C),y.push(null)})),m.push.apply(m,b.weights)})),f.forEach((function(b){b.paths.forEach((function(C){var S=new FileReader;S.onload=function(E){var _=E.target.result,T=g.indexOf(C);y[T]=_,y.indexOf(null)===-1&&a({modelTopology:d,weightSpecs:m,weightData:xR(y),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},S.onerror=function(E){return i("Failed to weights data from file of path '"+C+"'.")},S.readAsArrayBuffer(p[C])}))}))}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)}))]}))}))},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],o=n.map((function(u){return LM(u.name)})),a={},i=0,s=e;i<s.length;i++)s[i].paths.forEach((function(u){var l=LM(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),o.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");a[u]=n[o.indexOf(l)]}));if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return a},t})();function VM(t,e,n,r){(function(a){K(a!=null&&Array.isArray(a)&&a.length>0,(function(){return"promises must be a none empty array"}))})(t),(function(a,i){K(a>=0&&a<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a})),K(i>=0&&i<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i})),K(i>=a,(function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+i}))})(n=n??0,r=r??1);var o=0;return Promise.all(t.map((function(a){return a.then((function(i){var s=n+ ++o/t.length*(r-n);return e(s),i})),a})))}function Rz(t,e){return Je(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,d;return Ze(this,(function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?Se().platform.fetch:e.fetchFunc,r=t.map((function(p){return n(p,e.requestInit,{isBinary:!0})})),o=0,a=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=f.sent(),[3,4];case 2:return[4,VM(r,e.onProgress,o,a)];case 3:i=f.sent(),f.label=4;case 4:return s=i.map((function(p){return p.arrayBuffer()})),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return d=f.sent(),[3,8];case 6:return[4,VM(s,e.onProgress,u,l)];case 7:d=f.sent(),f.label=8;case 8:return[2,d]}}))}))}function HM(t){var e=this;return function(n,r,o){return r===void 0&&(r=""),Je(e,void 0,void 0,(function(){var a,i,s,u,l,d,f,p,m,g;return Ze(this,(function(y){switch(y.label){case 0:if(a=n.map((function(){return!1})),i={},s=o!=null?o.map((function(){return!1})):[],u=[],n.forEach((function(b,C){var S=0;b.weights.forEach((function(E){var _="quantization"in E?E.quantization.dtype:E.dtype,T=gC[_]*Qe(E.shape),D=function(){a[C]=!0,i[C]==null&&(i[C]=[]),i[C].push({manifestEntry:E,groupOffset:S,sizeBytes:T})};o!=null?o.forEach((function(I,k){I===E.name&&(D(),s[k]=!0)})):D(),u.push(E.name),S+=T}))})),!s.every((function(b){return b})))throw l=o.filter((function(b,C){return!s[C]})),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return d=a.reduce((function(b,C,S){return C&&b.push(S),b}),[]),f=[],d.forEach((function(b){n[b].paths.forEach((function(C){var S=r+(r.endsWith("/")?"":"/")+C;f.push(S)}))})),[4,t(f)];case 1:return p=y.sent(),m={},g=0,d.forEach((function(b){for(var C=n[b].paths.length,S=0,E=0;E<C;E++)S+=p[g+E].byteLength;for(var _=new ArrayBuffer(S),T=new Uint8Array(_),D=0,I=0;I<C;I++){var k=new Uint8Array(p[g+I]);T.set(k,D),D+=k.byteLength}i[b].forEach((function(M){var O=wz(_.slice(M.groupOffset,M.groupOffset+M.sizeBytes),[M.manifestEntry]);for(var F in O)m[F]=O[F]})),g+=C})),[2,m]}}))}))}}zo.registerSaveRouter((function(t){return Se().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(jw.URL_SCHEME)?(function(e){return e===void 0&&(e="model"),new jw(e)})(t.slice(jw.URL_SCHEME.length)):null}));var _z=(function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(K(typeof n.fetchFunc=="function",(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Se().platform.fetch,K(e!=null&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&K(e.length===2,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return Je(this,void 0,void 0,(function(){var n,r,o,a;return Ze(this,(function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:hm(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}}))}))},t.prototype.load=function(){return Je(this,void 0,void 0,(function(){var e,n,r,o,a,i,s,u,l,d,f,p;return Ze(this,(function(m){switch(m.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=m.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");m.label=2;case 2:return m.trys.push([2,4,,5]),[4,e.json()];case 3:return n=m.sent(),[3,5];case 4:throw m.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,a=n.weightsManifest,i=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,o==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:p=m.sent(),d=p[0],f=p[1],m.label=7;case 7:return[2,{modelTopology:o,weightSpecs:d,weightData:f,userDefinedMetadata:l,generatedBy:i,convertedBy:s,format:u}]}}))}))},t.prototype.loadWeights=function(e){return Je(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,d,f,p;return Ze(this,(function(m){switch(m.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=(function(g){var y=g.lastIndexOf("/"),b=g.lastIndexOf("?"),C=g.substring(0,y),S=b>y?g.substring(b):"";return[C+"/",S]})(n),o=r[0],a=r[1],i=this.weightPathPrefix||o,s=[],u=0,l=e;u<l.length;u++)d=l[u],s.push.apply(s,d.weights);return f=[],e.forEach((function(g){g.paths.forEach((function(y){f.push(i+y+a)}))})),[4,Rz(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return p=m.sent(),[2,[s,xR(p)]]}}))}))},t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function xC(t){return t.match(_z.URL_SCHEME_REGEX)!=null}var GM=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every((function(n){return xC(n)})):xC(t))?wC(t,{onProgress:e}):null};function wC(t,e){return new _z(t,e)}zo.registerSaveRouter(GM),zo.registerLoadRouter(GM);var zw=(function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return Je(this,void 0,void 0,(function(){return Ze(this,(function(e){return[2,this.modelArtifacts]}))}))},t})(),I2e=(function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){return[2,this.saveHandler(e)]}))}))},t})(),Tz=Object.freeze({browserFiles:function(t){return new k2e(t)},browserHTTPRequest:function(t,e){return wC(t,e)},concatenateArrayBuffers:xR,decodeWeights:wz,encodeWeights:function(t,e){return Je(this,void 0,void 0,(function(){var n,r,o,a,i,s=this;return Ze(this,(function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(t)?t.map((function(l){return l.name})):Object.keys(t),a=function(l){var d=o[l],f=Array.isArray(t)?t[l].tensor:t[d];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+f.dtype);var p={name:d,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var m=new Promise((function(g){return Je(s,void 0,void 0,(function(){var y,b,C,S,E,_,T;return Ze(this,(function(D){switch(D.label){case 0:return[4,f.bytes()];case 1:for(y=D.sent(),b=y.reduce((function(I,k){return I+k.length}),0)+Ty*y.length,C=new Uint8Array(b),S=0,E=0;E<y.length;E++)_=y[E],T=new Uint8Array(new Uint32Array([_.length]).buffer),C.set(T,S),S+=Ty,C.set(_,S),S+=_.length;return g(C),[2]}}))}))}));r.push(m)}else r.push(f.data());e!=null&&(p.group=e),n.push(p)},i=0;i<o.length;++i)a(i);return[4,Promise.all(r)];case 1:return[2,{data:x2e(u.sent()),specs:n}]}}))}))},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new zw(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new zw({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new zw({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return zo.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:hm,getSaveHandlers:function(t){return zo.getSaveHandlers(t)},http:wC,isHTTPScheme:xC,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),Je(this,void 0,void 0,(function(){return Ze(this,(function(o){return[2,HM((function(a){return Rz(a,{requestInit:r})}))(t,e,n)]}))}))},registerLoadRouter:function(t){return zo.registerLoadRouter(t)},registerSaveRouter:function(t){return zo.registerSaveRouter(t)},weightsLoaderFactory:HM,withSaveHandler:function(t){return new I2e(t)},copyModel:function(t,e){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){return[2,jM(t,e,!1)]}))}))},listModels:function(){return Je(this,void 0,void 0,(function(){var t,e,n,r,o,a,i;return Ze(this,(function(s){switch(s.label){case 0:t=Au.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(o=r[n],[4,Au.getManager(o).listModels()]):[3,4];case 2:for(i in a=s.sent())e[o+Nd+i]=a[i];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}}))}))},moveModel:function(t,e){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){return[2,jM(t,e,!0)]}))}))},removeModel:function(t){return Je(this,void 0,void 0,(function(){var e;return Ze(this,(function(n){return e=Tg(t),[2,Au.getManager(e.scheme).removeModel(e.path)]}))}))}}),td;te({confusionMatrix_:function(t,e,n){var r=X(t,"labels","confusionMatrix"),o=X(e,"predictions","confusionMatrix");K(n==null||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),K(r.rank===1,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),K(o.rank===1,(function(){return"Expected the rank of predictions to be 1, but got "+o.rank})),K(r.shape[0]===o.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."})),K(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var a=Ry(r.asType("int32"),n),i=Ry(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}});var M2e=te({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,a=!1,i=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)a=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);i=!0}if(o&&o&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(PL("FromPixels",ae.backendName)!=null)return ae.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],d=l[0],f=l[1];if(i?s=t.getContext("2d").getImageData(0,0,d,f).data:r||n?s=t.data:(a||o)&&(td==null&&(td=document.createElement("canvas").getContext("2d")),td.canvas.width=d,td.canvas.height=f,td.drawImage(t,0,0,d,f),s=td.getImageData(0,0,d,f).data),e===4)u=new Int32Array(s);else{var p=d*f;u=new Int32Array(p*e);for(var m=0;m<p;m++)for(var g=0;g<e;++g)u[m*e+g]=s[4*m+g]}return YL(u,[f,d,e],"int32")}}),Az=Object.freeze({toPixels:function(t,e){return Je(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,d,f,p,m,g,y,b,C,S,E,_,T,D,I,k;return Ze(this,(function(M){switch(M.label){case 0:if(n=X(t,"img","toPixels"),t instanceof wn||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(i=n.rank===2?1:n.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return s=M.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(d=M.sent(),f=d[0],p=d[1],m=f[0],g=p[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(m<0||g>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+m+" - "+g+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(m<0||g>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+m+" - "+g+"].")}for(y=n.dtype==="float32"?255:1,b=new Uint8ClampedArray(a*o*4),C=0;C<o*a;++C)S=void 0,E=void 0,_=void 0,T=void 0,i===1?(S=s[C]*y,E=s[C]*y,_=s[C]*y,T=255):i===3?(S=s[3*C]*y,E=s[3*C+1]*y,_=s[3*C+2]*y,T=255):i===4&&(S=s[4*C]*y,E=s[4*C+1]*y,_=s[4*C+2]*y,T=s[4*C+3]*y),b[(D=4*C)+0]=Math.round(S),b[D+1]=Math.round(E),b[D+2]=Math.round(_),b[D+3]=Math.round(T);return e!=null&&(e.width=a,e.height=o,I=e.getContext("2d"),k=new ImageData(b,a,o),I.putImageData(k,0,0)),n!==t&&n.dispose(),[2,b]}}))}))},fromPixels:M2e}),O2e=(function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t})(),P2e=(function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t})();function uc(t){K(t.className!=null,(function(){return"Class being registered does not have the static className property defined."})),K(typeof t.className=="string",(function(){return"className is required to be a string, but got type "+typeof t.className})),K(t.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),P2e.register(t)}var lc=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Qa(e,t),e.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var a=this.computeGradients(n,o),i=a.value,s=a.grads;if(o!=null){var u=o.map((function(l){return{name:l.name,tensor:s[l.name]}}));this.applyGradients(u)}else this.applyGradients(s);return wo(s),r?i:(i.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return rbe(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&wo(this.iterations_)},e.prototype.saveIterations=function(){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:rt(this.iterations_,"int32")}]}))}))},e.prototype.getWeights=function(){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},e.prototype.setWeights=function(n){return Je(this,void 0,void 0,(function(){return Ze(this,(function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},e.prototype.extractIterations=function(n){return Je(this,void 0,void 0,(function(){var r;return Ze(this,(function(o){switch(o.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,n.slice(1)]}}))}))},e})(O2e);Object.defineProperty(lc,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var F2e=(function(t){function e(n,r,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=n,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],o==null&&(a.epsilon=ae.backend.epsilon()),a}return Qa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=ae.registeredVariables[o];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:o+"/accum_grad",variable:tn((function(){return $t(i).variable(!1)}))}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:o+"/accum_var",variable:tn((function(){return $t(i).variable(!1)}))});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[a].variable,l=r.accumulatedUpdates[a].variable;tn((function(){var d=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),p=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(d),l.assign(p);var m=f.mul(-r.learningRate).add(i);i.assign(m)}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(wo(this.accumulatedGrads.map((function(n){return n.variable}))),wo(this.accumulatedUpdates.map((function(n){return n.variable}))))},e.prototype.getWeights=function(){return Je(this,void 0,void 0,(function(){var n;return Ze(this,(function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(o){return{name:o.originalName,tensor:o.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Je(this,void 0,void 0,(function(){var r;return Ze(this,(function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),this.accumulatedUpdates=n.slice(r,2*r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e})(lc);uc(F2e);var B2e=(function(t){function e(n,r){r===void 0&&(r=.1);var o=t.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return Qa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=ae.registeredVariables[o];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:o+"/accumulator",variable:tn((function(){return Fl(i.shape,r.initialAccumulatorValue).variable(!1)}))});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[a].variable;tn((function(){var l=u.add(s.square());u.assign(l);var d=s.div(l.add(ae.backend.epsilon()).sqrt()).mul(-r.learningRate).add(i);i.assign(d)}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&wo(this.accumulatedGrads.map((function(n){return n.variable})))},e.prototype.getWeights=function(){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Je(this,void 0,void 0,(function(){return Ze(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e})(lc);uc(B2e);var L2e=(function(t){function e(n,r,o,a){a===void 0&&(a=null);var i=t.call(this)||this;return i.learningRate=n,i.beta1=r,i.beta2=o,i.epsilon=a,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],tn((function(){i.accBeta1=rt(r).variable(),i.accBeta2=rt(o).variable()})),a==null&&(i.epsilon=ae.backend.epsilon()),i}return Qa(e,t),e.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n);tn((function(){var a=Ua(1,r.accBeta1),i=Ua(1,r.accBeta2);o.forEach((function(s,u){var l=ae.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:tn((function(){return $t(l).variable(!1)}))}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:tn((function(){return $t(l).variable(!1)}))});var d=Array.isArray(n)?n[u].tensor:n[s];if(d!=null){var f=r.accumulatedFirstMoment[u].variable,p=r.accumulatedSecondMoment[u].variable,m=f.mul(r.beta1).add(d.mul(1-r.beta1)),g=p.mul(r.beta2).add(d.square().mul(1-r.beta2)),y=m.div(a),b=g.div(i);f.assign(m),p.assign(g);var C=y.div(b.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(C)}})),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&wo(this.accumulatedFirstMoment.map((function(n){return n.variable}))),this.accumulatedSecondMoment!=null&&wo(this.accumulatedSecondMoment.map((function(n){return n.variable})))},e.prototype.getWeights=function(){return Je(this,void 0,void 0,(function(){var n;return Ze(this,(function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(o){return{name:o.originalName,tensor:o.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Je(this,void 0,void 0,(function(){var r,o=this;return Ze(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),tn((function(){o.accBeta1.assign(xy(o.beta1,o.iterations_+1)),o.accBeta2.assign(xy(o.beta2,o.iterations_+1))})),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),this.accumulatedSecondMoment=n.slice(r,2*r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e})(lc);uc(L2e);var j2e=(function(t){function e(n,r,o,a,i){a===void 0&&(a=null),i===void 0&&(i=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=a,s.decay=i,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],tn((function(){s.iteration=rt(0).variable(),s.accBeta1=rt(r).variable()})),a==null&&(s.epsilon=ae.backend.epsilon()),s}return Qa(e,t),e.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n);tn((function(){var a=Ua(1,r.accBeta1),i=Fu(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach((function(s,u){var l=ae.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:$t(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:$t(l).variable(!1)});var d=Array.isArray(n)?n[u].tensor:n[s];if(d!=null){var f=r.accumulatedFirstMoment[u].variable,p=r.accumulatedWeightedInfNorm[u].variable,m=f.mul(r.beta1).add(d.mul(1-r.beta1)),g=p.mul(r.beta2),y=d.abs(),b=g.maximum(y);f.assign(m),p.assign(b);var C=i.div(a).mul(m.div(b.add(r.epsilon))).add(l);l.assign(C)}})),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&wo(this.accumulatedFirstMoment.map((function(n){return n.variable}))),this.accumulatedWeightedInfNorm!=null&&wo(this.accumulatedWeightedInfNorm.map((function(n){return n.variable})))},e.prototype.getWeights=function(){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},e.prototype.setWeights=function(n){return Je(this,void 0,void 0,(function(){return Ze(this,(function(r){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e})(lc);uc(j2e);var Nz=(function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Qa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=Array.isArray(n)?n[a].tensor:n[o];if(i!=null){var s=ae.registeredVariables[o];tn((function(){var u=r.c.mul(i).add(s);s.assign(u)}))}})),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=qye(rt(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}}))}))},e.prototype.setWeights=function(n){return Je(this,void 0,void 0,(function(){return Ze(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e})(lc);uc(Nz);var z2e=(function(t){function e(n,r,o){o===void 0&&(o=!1);var a=t.call(this,n)||this;return a.learningRate=n,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=rt(a.momentum),a}return Qa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=ae.registeredVariables[o];r.accumulations[a]==null&&(r.accumulations[a]={originalName:o+"/momentum",variable:tn((function(){return $t(i).variable(!1)}))});var s=r.accumulations[a].variable,u=Array.isArray(n)?n[a].tensor:n[o];u!=null&&tn((function(){var l,d=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(d.mul(r.m))).add(i):r.c.mul(d).add(i),s.assign(d),i.assign(l)}))})),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&wo(this.accumulations.map((function(n){return n.variable})))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return Je(this,void 0,void 0,(function(){return Ze(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Je(this,void 0,void 0,(function(){return Ze(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e})(Nz);uc(z2e);var U2e=(function(t){function e(n,r,o,a,i){r===void 0&&(r=.9),o===void 0&&(o=0),a===void 0&&(a=null),i===void 0&&(i=!1);var s=t.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=i,a==null&&(s.epsilon=ae.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Qa(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=ae.registeredVariables[o];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:o+"/rms",variable:tn((function(){return $t(i).variable(!1)}))}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:o+"/momentum",variable:tn((function(){return $t(i).variable(!1)}))}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:o+"/mg",variable:tn((function(){return $t(i).variable(!1)}))});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,l=r.accumulatedMoments[a].variable;tn((function(){var d=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[a].variable,p=f.mul(r.decay).add(s.mul(1-r.decay)),m=l.mul(r.momentum).add(s.mul(r.learningRate).div(d.sub(p.square().add(r.epsilon)).sqrt()));u.assign(d),f.assign(p),l.assign(m);var g=i.sub(m);i.assign(g)}else{var y=u.mul(r.decay).add(s.square().mul(1-r.decay));m=l.mul(r.momentum).add(s.mul(r.learningRate).div(y.add(r.epsilon).sqrt())),u.assign(y),l.assign(m),g=i.sub(m),i.assign(g)}}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&wo(this.accumulatedMeanSquares.map((function(n){return n.variable}))),this.accumulatedMeanGrads!=null&&this.centered&&wo(this.accumulatedMeanGrads.map((function(n){return n.variable}))),this.accumulatedMoments!=null&&wo(this.accumulatedMoments.map((function(n){return n.variable})))},e.prototype.getWeights=function(){return Je(this,void 0,void 0,(function(){var n;return Ze(this,(function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(o){return{name:o.originalName,tensor:o.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Je(this,void 0,void 0,(function(){var r;return Ze(this,(function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),this.accumulatedMoments=n.slice(r,2*r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}))),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e})(lc);uc(U2e);wn.prototype.add=function(t){return Ra(this,t)},wn.prototype.broadcastTo=function(t){return Uj(this,t)},wn.prototype.div=function(t){return Fu(this,t)},wn.prototype.divNoNan=function(t){return Hj(this,t)},wn.prototype.squaredDifference=function(t){return Xj(this,t)},wn.prototype.tile=function(t){return Ad(this,t)},wn.prototype.oneHot=function(t,e,n){return e===void 0&&(e=1),n===void 0&&(n=0),Ry(this,t,e,n)},wn.prototype.transpose=function(t){return Pa(this,t)},wn.prototype.pad=function(t,e){return Ms(this,t,e)},wn.prototype.batchNorm=function(t,e,n,r,o){return dm(this,t,e,n,r,o)},Ce=a2e;var Bl=(function(){function t(e,n){if(!Ll(e)||!Ll(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t})(),Yt=(function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t})();function Q0(t,e){return t instanceof wn&&t.shape.length===e}function W2e(t){return Q0(t,2)}function J0(t){return Q0(t,3)}function Nu(t){return Q0(t,4)}function V2e(t){return t%1!==0}function $M(t){return t%2===0}function wR(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function qM(t){return t&&t.width&&t.height}function H2e(t,e){var n=t.width,r=t.height,o=e/Math.max(r,n);return new Bl(Math.round(n*o),Math.round(r*o))}function CR(t){return t.reduce(function(e,n){return e.add(n)},new Yt(0,0)).div(new Yt(t.length,t.length))}function Ep(t,e,n){return Array(t).fill(0).map(function(r,o){return e+o*n})}function Ll(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function XM(t){return Ll(t)&&0<=t&&t<=1}var Ai=(function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},o=[r.left,r.top,r.right,r.bottom].every(Ll),a=[r.x,r.y,r.width,r.height].every(Ll);if(!a&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=i[0],u=i[1],l=i[2],d=i[3];t.assertIsValidBox({x:s,y:u,width:l,height:d},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=d}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Ll)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new Yt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new Yt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new Yt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new Yt(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(i){return Math.round(i)}),n=e[0],r=e[1],o=e[2],a=e[3];return new t({x:n,y:r,width:o,height:a})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(i){return Math.floor(i)}),n=e[0],r=e[1],o=e[2],a=e[3];return new t({x:n,y:r,width:o,height:a})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,o=e.width,a=e.height,i=Math.abs(o-a);return o<a&&(n-=i/2,o+=i),a<o&&(r-=i/2,a+=i),new t({x:n,y:r,width:o,height:a})},t.prototype.rescale=function(e){var n=qM(e)?e.width:e,r=qM(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],o=r[0],a=r[1],i=r[2],s=r[3];return new t({x:o,y:a,width:i,height:s})},t.prototype.clipAtImageBorders=function(e,n){var r=this,o=r.x,a=r.y,i=r.right,s=r.bottom,u=Math.max(o,0),l=Math.max(a,0),d=i-u,f=s-l,p=Math.min(d,e-u),m=Math.min(f,n-l);return new t({x:u,y:l,width:p,height:m}).floor()},t.prototype.shift=function(e,n){var r=this,o=r.width,a=r.height,i=this.x+e,s=this.y+n;return new t({x:i,y:s,width:o,height:a})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,o=this.height+1,a=1,i=1,s=r,u=o,l=this.left,d=this.top,f=this.right,p=this.bottom;return f>n&&(s=-f+n+r,f=n),p>e&&(u=-p+e+o,p=e),l<1&&(u=2-l,l=1),d<1&&(u=2-d,d=1),{dy:i,edy:u,dx:a,edx:s,y:d,ey:p,x:l,ex:f,w:r,h:o}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t})(),Z0=(function(t){im(e,t);function e(n,r,o,a,i){return i===void 0&&(i=!1),t.call(this,{left:n,top:r,right:o,bottom:a},i)||this}return e})(Ai),KM=(function(t){im(e,t);function e(n,r){var o=t.call(this,n)||this;return o._label=r,o}return e.assertIsValidLabeledBox=function(n,r){if(Ai.assertIsValidBox(n,r),!Ll(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e})(Ai),Dz=(function(){function t(e,n,r,o,a){this._imageDims=new Bl(a.width,a.height),this._score=e,this._classScore=n,this._className=r,this._box=new Ai(o).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new Ai(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t})();(function(t){im(e,t);function e(n,r,o,a){var i=t.call(this,n,r)||this;return i._score=o,i._classScore=a,i}return e.assertIsValidPredictedBox=function(n,r){if(KM.assertIsValidLabeledBox(n,r),!XM(n.score)||!XM(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(KM);var SR=(function(t){im(e,t);function e(n,r,o,a,i){return i===void 0&&(i=!1),t.call(this,{x:n,y:r,width:o,height:a},i)||this}return e})(Ai);function kz(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function Iz(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(o,a){t.readFile(r,function(i,s){return i?a(i):o(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function Mz(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=Iz();return uy({Canvas:t||(function(){function i(){}return i})(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||(function(){function i(){}return i})(),Image:e||(function(){function i(){}return i})(),ImageData:global.ImageData||(function(){function i(){}return i})(),Video:global.HTMLVideoElement||(function(){function i(){}return i})(),createCanvasElement:n,createImageElement:r,fetch:o},a)}function Oz(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function Pz(){return typeof global=="object"&&typeof require=="function"&&typeof C5<"u"&&typeof process<"u"&&!!process.version}var ir;function G2e(){if(!ir)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return ir}function CC(t){ir=t}function ER(){Oz()&&CC(kz()),Pz()&&CC(Mz())}function $2e(t){if(ir||ER(),!ir)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?ir.Canvas:e,r=t.Image,o=r===void 0?ir.Image:r;ir.Canvas=n,ir.Image=o,ir.createCanvasElement=t.createCanvasElement||(function(){return new n}),ir.createImageElement=t.createImageElement||(function(){return new o}),ir.ImageData=t.ImageData||ir.ImageData,ir.Video=t.Video||ir.Video,ir.fetch=t.fetch||ir.fetch,ir.readFile=t.readFile||ir.readFile}var Hr={getEnv:G2e,setEnv:CC,initialize:ER,createBrowserEnv:kz,createFileSystem:Iz,createNodejsEnv:Mz,monkeyPatch:$2e,isBrowser:Oz,isNodejs:Pz};ER();function RR(t){return!Hr.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function Ni(t){var e=Hr.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var o=RR(t);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=o.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var hs;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(hs||(hs={}));var _R=(function(){function t(e){e===void 0&&(e={});var n=e.anchorPosition,r=e.backgroundColor,o=e.fontColor,a=e.fontSize,i=e.fontStyle,s=e.padding;this.anchorPosition=n||hs.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=o||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=s||4}return t})(),TR=(function(){function t(e,n,r){r===void 0&&(r={}),this.text=typeof e=="string"?[e]:e instanceof t?e.text:e,this.anchor=n,this.options=new _R(r)}return t.prototype.measureWidth=function(e){var n=this.options.padding;return this.text.map(function(r){return e.measureText(r).width}).reduce(function(r,o){return r<o?o:r},0)+2*n},t.prototype.measureHeight=function(){var e=this.options,n=e.fontSize,r=e.padding;return this.text.length*n+2*r},t.prototype.getUpperLeft=function(e,n){var r=this.options.anchorPosition,o=r===hs.BOTTOM_RIGHT||r===hs.TOP_RIGHT,a=r===hs.BOTTOM_LEFT||r===hs.BOTTOM_RIGHT,i=this.measureWidth(e),s=this.measureHeight(),u=o?this.anchor.x-i:this.anchor.x,l=a?this.anchor.y-s:this.anchor.y;if(n){var d=n.width,f=n.height,p=Math.max(Math.min(u,d-i),0),m=Math.max(Math.min(l,f-s),0);return{x:p,y:m}}return{x:u,y:l}},t.prototype.draw=function(e){var n=RR(e),r=Ni(n),o=this.options,a=o.backgroundColor,i=o.fontColor,s=o.fontSize,u=o.fontStyle,l=o.padding;r.font=s+"px "+u;var d=this.measureWidth(r),f=this.measureHeight();r.fillStyle=a;var p=this.getUpperLeft(r,n);r.fillRect(p.x,p.y,d,f),r.fillStyle=i,this.text.forEach(function(m,g){var y=l+p.x,b=l+p.y+(g+1)*s;r.fillText(m,y,b)})},t})(),Fz=(function(){function t(e){e===void 0&&(e={});var n=e.boxColor,r=e.lineWidth,o=e.label,a=e.drawLabelOptions;this.boxColor=n||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=o;var i={anchorPosition:hs.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new _R(Object.assign({},i,a))}return t})(),Bz=(function(){function t(e,n){n===void 0&&(n={}),this.box=new Ai(e),this.options=new Fz(n)}return t.prototype.draw=function(e){var n=Ni(e),r=this.options,o=r.boxColor,a=r.lineWidth,i=this.box,s=i.x,u=i.y,l=i.width,d=i.height;n.strokeStyle=o,n.lineWidth=a,n.strokeRect(s,u,l,d);var f=this.options.label;f&&new TR([f],{x:s-a/2,y:u},this.options.drawLabelOptions).draw(e)},t})();const q2e=Object.freeze(Object.defineProperty({__proto__:null,get AnchorPosition(){return hs},DrawBox:Bz,DrawBoxOptions:Fz,DrawTextField:TR,DrawTextFieldOptions:_R},Symbol.toStringTag,{value:"Module"}));function Wa(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),tn(function(){var o=Ra(sc(t,e.filters,[1,1],n),e.bias);return r?K0(o):o})}function Ps(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function eb(t,e){return function(n,r,o,a){var i=pi(t(n*r*o*o),[o,o,n,r]),s=qa(t(r));return e.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:s}}}function AR(t,e){return function(n,r,o){var a=Pl(t(n*r),[n,r]),i=qa(t(r));return e.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:a,bias:i}}}var Lz=(function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t})();function NR(t,e){return function(n,r,o){var a=pi(t(9*n),[3,3,n,1]),i=pi(t(n*r),[1,1,n,r]),s=qa(t(r));return e.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new Lz(a,i,s)}}function DR(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),o=t(e+"/bias",1);return new Lz(n,r,o)}}function Xu(t,e){return function(n,r,o){var a=t[n];if(!Q0(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return e.push({originalPath:n,paramPath:o||n}),a}}function Fs(t){var e=t;function n(o){var a=e.slice(0,o);return e=e.slice(o),a}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function jz(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var o=t.split("/").filter(function(s){return s}),a=t.endsWith(".json")?o[o.length-1]:n,i=r+(t.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return i=t.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:i==="/"?"/"+a:i+"/"+a}}function zz(t){var e=Hr.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function X2e(t){return new Promise(function(e,n){if(t instanceof Hr.getEnv().Canvas||zz(t))return e();function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",o),e(a))}function o(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",o),n(a))}t.addEventListener("load",r),t.addEventListener("error",o)})}function Uz(t){var e=Hr.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new Bl(t.naturalWidth,t.naturalHeight):t instanceof r?new Bl(t.videoWidth,t.videoHeight):new Bl(t.width,t.height)}function tb(t){var e=t.width,n=t.height,r=Hr.getEnv().createCanvasElement,o=r();return o.width=e,o.height=n,o}function kR(t,e){var n=Hr.getEnv().ImageData;if(!(t instanceof n)&&!zz(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=Uz(t),o=r.width,a=r.height,i=tb({width:o,height:a});return t instanceof n?Ni(i).putImageData(t,0,0):Ni(i).drawImage(t,0,0,o,a),i}function K2e(t,e){return va(this,void 0,void 0,function(){var n,r;return ga(this,function(o){switch(o.label){case 0:return n=Hr.getEnv().fetch,[4,n(t,e)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Y2e(t){return va(this,void 0,void 0,function(){return ga(this,function(e){switch(e.label){case 0:return[4,K2e(t)];case 1:return[2,e.sent().json()]}})})}function Q2e(t,e){return va(this,void 0,void 0,function(){var n,r,o,a,i,s;return ga(this,function(u){switch(u.label){case 0:return n=Hr.getEnv().createCanvasElement(),r=t.shape.slice(Nu(t)?1:0),o=r[0],a=r[1],i=r[2],s=tn(function(){return t.as3D(o,a,i).toInt()}),[4,Az.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function J2e(t,e,n){n===void 0&&(n=!1);var r=Hr.getEnv(),o=r.Image,a=r.Canvas;if(!(t instanceof o||t instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=Uz(t),s=e/Math.max(i.height,i.width),u=s*i.width,l=s*i.height,d=tb({width:e,height:e}),f=t instanceof a?t:kR(t),p=Math.abs(u-l)/2,m=n&&u<l?p:0,g=n&&l<u?p:0;return Ni(d).drawImage(f,m,g,u,l),d}function YM(t){var e=Hr.getEnv(),n=e.Image,r=e.Canvas,o=e.Video;return t instanceof n||t instanceof r||t instanceof o}function Z2e(t,e){return va(this,void 0,void 0,function(){var n,r,o,a;return ga(this,function(i){switch(i.label){case 0:return n=jz(t,e),r=n.manifestUri,o=n.modelBaseUri,[4,Y2e(r)];case 1:return a=i.sent(),[2,Tz.loadWeights(a,o)]}})})}function eCe(t,e){return e===void 0&&(e=!1),tn(function(){var n=t.shape.slice(1),r=n[0],o=n[1];if(r===o)return t;var a=Math.abs(r-o),i=Math.round(a*(e?.5:1)),s=r>o?2:1,u=function(m){var g=t.shape.slice();return g[s]=m,Fl(g,0)},l=u(i),d=a-l.shape[s],f=e&&d?u(d):null,p=[f,t,l].filter(function(m){return!!m}).map(function(m){return m.toFloat()});return Ea(p,s)})}var Ay=(function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(o,a){if(J0(o)){r._imageTensors[a]=o,r._inputDimensions[a]=o.shape;return}if(Nu(o)){var i=o.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+i+" passed, but not supported in input array");r._imageTensors[a]=o,r._inputDimensions[a]=o.shape.slice(1);return}var s=o instanceof Hr.getEnv().Canvas?o:kR(o);r._canvases[a]=s,r._inputDimensions[a]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Ep(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return H2e({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,tn(function(){var o=Ep(r.batchSize,0,1).map(function(i){var s=r.getInput(i);if(s instanceof wn){var u=Nu(s)?s:s.expandDims();return u=eCe(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=vz.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(s instanceof Hr.getEnv().Canvas)return Az.fromPixels(J2e(s,e,n));throw new Error("toBatchTensor - at batchIdx "+i+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),a=Pu(o.map(function(i){return i.toFloat()})).as4D(r.batchSize,e,e,3);return a})},t})();function wr(t){return va(this,void 0,void 0,function(){var e,n,r;return ga(this,function(o){switch(o.label){case 0:if(t instanceof Ay)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(a){return Array.isArray(t)?" at input index "+a+":":""},r=e.map(RR),r.forEach(function(a,i){if(!YM(a)&&!J0(a)&&!Nu(a))throw typeof e[i]=="string"?new Error("toNetInput -"+n(i)+" string passed, but could not resolve HTMLElement for element id "+e[i]):new Error("toNetInput -"+n(i)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Nu(a)){var s=a.shape[0];if(s!==1)throw new Error("toNetInput -"+n(i)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(a){return YM(a)&&X2e(a)}))];case 1:return o.sent(),[2,new Ay(r,Array.isArray(t))]}})})}var Bs=(function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;return r[o]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),o=r.obj,a=r.objProp;o[a].dispose(),o[a]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof Qd})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof Qd)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,o=n.tensor;e.reassignParamFromPath(r,o.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,o=n.tensor,a=Ar(o.dataSync());o.dispose(),e.reassignParamFromPath(r,a)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return va(this,void 0,void 0,function(){return ga(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return va(this,void 0,void 0,function(){var n;return ga(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Z2e(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return va(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f;return ga(this,function(p){switch(p.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Hr.getEnv().readFile,r=jz(e,this.getDefaultModelName()),o=r.manifestUri,a=r.modelBaseUri,i=function(m){return Promise.all(m.map(function(g){return n(g).then(function(y){return y.buffer})}))},s=Tz.weightsLoaderFactory(i),d=(l=JSON).parse,[4,n(o)];case 1:return u=d.apply(l,[p.sent().toString()]),[4,s(u,a)];case 2:return f=p.sent(),this.loadFromWeightMap(f),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(a,i){if(!a.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property "+i+", for path "+e);return{obj:a.nextObj,objProp:i,nextObj:a.nextObj[i]}},{nextObj:this.params}),r=n.obj,o=n.objProp;if(!r||!o||!(r[o]instanceof wn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:o}},t})();function tCe(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),o=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),a=r*o;return n?a/(t.area+e.area-a):a/Math.min(t.area,e.area)}function Rp(t,e,n,r){r===void 0&&(r=!0);for(var o=e.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),a=[],i=function(){var s=o.pop();a.push(s);for(var u=o,l=[],d=0;d<u.length;d++){var f=u[d],p=t[s],m=t[f];l.push(tCe(p,m,r))}o=o.filter(function(g,y){return l[y]<=n})};o.length>0;)i();return a}function pm(t,e){return tn(function(){var n=e[0],r=e[1],o=e[2],a=Fl(gw(t.shape.slice(0,3),[1]),n),i=Fl(gw(t.shape.slice(0,3),[1]),r),s=Fl(gw(t.shape.slice(0,3),[1]),o),u=Ea([a,i,s],3);return Ua(t,u)})}function Uw(t){return 1/(1+Math.exp(-t))}var lg=function(t){return typeof t=="number"};function nCe(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!lg(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return lg(e.x)&&lg(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(lg)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function IR(t){return tn(function(){var e=Wn(t,rt(.10000000149011612));return Ra(K0(Ua(t,e)),e)})}function du(t,e){return tn(function(){var n=Ms(t,[[0,0],[1,1],[1,1],[0,0]]);return n=sc(n,e.conv.filters,[1,1],"valid"),n=Ua(n,e.bn.sub),n=Wn(n,e.bn.truediv),n=Ra(n,e.conv.bias),IR(n)})}function fu(t,e){return tn(function(){var n=Ms(t,[[0,0],[1,1],[1,1],[0,0]]);return n=rz(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=Ra(n,e.bias),IR(n)})}function rCe(t,e){var n=eb(t,e);function r(i,s){var u=qa(t(i)),l=qa(t(i));return e.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function o(i,s,u){var l=n(i,s,3,u+"/conv"),d=r(s,u+"/bn");return{conv:l,bn:d}}var a=NR(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function oCe(t,e,n,r){var o=Fs(t),a=o.extractWeights,i=o.getRemainingWeights,s=[],u=rCe(a,s),l=u.extractConvParams,d=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,p;if(e.withSeparableConvs){var m=r[0],g=r[1],y=r[2],b=r[3],C=r[4],S=r[5],E=r[6],_=r[7],T=r[8],D=e.isFirstLayerConv2d?l(m,g,3,"conv0"):f(m,g,"conv0"),I=f(g,y,"conv1"),k=f(y,b,"conv2"),M=f(b,C,"conv3"),O=f(C,S,"conv4"),F=f(S,E,"conv5"),j=_?f(E,_,"conv6"):void 0,G=T?f(_,T,"conv7"):void 0,W=l(T||_||E,5*n,1,"conv8");p={conv0:D,conv1:I,conv2:k,conv3:M,conv4:O,conv5:F,conv6:j,conv7:G,conv8:W}}else{var m=r[0],g=r[1],y=r[2],b=r[3],C=r[4],S=r[5],E=r[6],_=r[7],T=r[8],D=d(m,g,"conv0"),I=d(g,y,"conv1"),k=d(y,b,"conv2"),M=d(b,C,"conv3"),O=d(C,S,"conv4"),F=d(S,E,"conv5"),j=d(E,_,"conv6"),G=d(_,T,"conv7"),W=l(T,5*n,1,"conv8");p={conv0:D,conv1:I,conv2:k,conv3:M,conv4:O,conv5:F,conv6:j,conv7:G,conv8:W}}if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:p,paramMappings:s}}function aCe(t,e){var n=Xu(t,e);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function o(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function a(s){var u=o(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var i=DR(n);return{extractConvParams:o,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function iCe(t,e){var n=[],r=aCe(t,n),o=r.extractConvParams,a=r.extractConvWithBatchNormParams,i=r.extractSeparableConvParams,s;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;s={conv0:e.isFirstLayerConv2d?o("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:u>7?i("conv6"):void 0,conv7:u>8?i("conv7"):void 0,conv8:o("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:o("conv8")};return Ps(t,n),{params:s,paramMappings:n}}var QM;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(QM||(QM={}));var MR=(function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t})(),Wz=(function(t){im(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return nCe(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var o=du(n,r.conv0);return o=ko(o,[2,2],[2,2],"same"),o=du(o,r.conv1),o=ko(o,[2,2],[2,2],"same"),o=du(o,r.conv2),o=ko(o,[2,2],[2,2],"same"),o=du(o,r.conv3),o=ko(o,[2,2],[2,2],"same"),o=du(o,r.conv4),o=ko(o,[2,2],[2,2],"same"),o=du(o,r.conv5),o=ko(o,[2,2],[1,1],"same"),o=du(o,r.conv6),o=du(o,r.conv7),Wa(o,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var o=this.config.isFirstLayerConv2d?IR(Wa(n,r.conv0,"valid",!1)):fu(n,r.conv0);return o=ko(o,[2,2],[2,2],"same"),o=fu(o,r.conv1),o=ko(o,[2,2],[2,2],"same"),o=fu(o,r.conv2),o=ko(o,[2,2],[2,2],"same"),o=fu(o,r.conv3),o=ko(o,[2,2],[2,2],"same"),o=fu(o,r.conv4),o=ko(o,[2,2],[2,2],"same"),o=fu(o,r.conv5),o=ko(o,[2,2],[1,1],"same"),o=r.conv6?fu(o,r.conv6):o,o=r.conv7?fu(o,r.conv7):o,Wa(o,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var o=this,a=this.params;if(!a)throw new Error("TinyYolov2 - load model before inference");return tn(function(){var i=n.toBatchTensor(r,!1).toFloat();return i=o.config.meanRgb?pm(i,o.config.meanRgb):i,i=i.div(rt(256)),o.config.withSeparableConvs?o.runMobilenet(i,a):o.runTinyYolov2(i,a)})},e.prototype.forward=function(n,r){return va(this,void 0,void 0,function(){var o;return ga(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,wr(n)];case 1:return[4,o.apply(this,[a.sent(),r])];case 2:return[2,a.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),va(this,void 0,void 0,function(){var o,a,i,s,u,l,d,f,p,m,g,y,b,C,S=this;return ga(this,function(E){switch(E.label){case 0:return o=new MR(r),a=o.inputSize,i=o.scoreThreshold,[4,wr(n)];case 1:return s=E.sent(),[4,this.forwardInput(s,a)];case 2:return u=E.sent(),l=tn(function(){return U0(u)[0].expandDims()}),d={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),i)];case 3:return f=E.sent(),u.dispose(),l.dispose(),p=f.map(function(_){return _.box}),m=f.map(function(_){return _.score}),g=f.map(function(_){return _.classScore}),y=f.map(function(_){return S.config.classes[_.label]}),b=Rp(p.map(function(_){return _.rescale(a)}),m,this.config.iouThreshold,!0),C=b.map(function(_){return new Dz(m[_],g[_],y[_],p[_],d)}),[2,C]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return iCe(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return oCe(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,o){return va(this,void 0,void 0,function(){var a,i,s,u,l,d,f,p,m,g,y,b,C,S,E,_,T,D,I,k,M,O,F,j,G,W,q,P,U,z=this;return ga(this,function(H){switch(H.label){case 0:return a=r.width,i=r.height,s=Math.max(a,i),u=s/a,l=s/i,d=n.shape[1],f=this.config.anchors.length,p=tn(function(){var L=n.reshape([d,d,f,z.boxEncodingSize]),$=L.slice([0,0,0,0],[d,d,f,4]),J=L.slice([0,0,0,4],[d,d,f,1]),ne=z.withClassScores?G0(L.slice([0,0,0,5],[d,d,f,z.config.classes.length]),3):rt(0);return[$,J,ne]}),m=p[0],g=p[1],y=p[2],b=[],[4,g.array()];case 1:return C=H.sent(),[4,m.array()];case 2:S=H.sent(),E=0,H.label=3;case 3:if(!(E<d))return[3,12];_=0,H.label=4;case 4:if(!(_<d))return[3,11];T=0,H.label=5;case 5:return T<f?(D=Uw(C[E][_][T][0]),!o||D>o?(I=(_+Uw(S[E][_][T][0]))/d*u,k=(E+Uw(S[E][_][T][1]))/d*l,M=Math.exp(S[E][_][T][2])*this.config.anchors[T].x/d*u,O=Math.exp(S[E][_][T][3])*this.config.anchors[T].y/d*l,F=I-M/2,j=k-O/2,G={row:E,col:_,anchor:T},this.withClassScores?[4,this.extractPredictedClass(y,G)]:[3,7]):[3,9]):[3,10];case 6:return U=H.sent(),[3,8];case 7:U={classScore:1,label:0},H.label=8;case 8:W=U,q=W.classScore,P=W.label,b.push(uy({box:new Z0(F,j,F+M,j+O),score:D,classScore:D*q,label:P},G)),H.label=9;case 9:return T++,[3,5];case 10:return _++,[3,4];case 11:return E++,[3,3];case 12:return m.dispose(),g.dispose(),y.dispose(),[2,b]}})})},e.prototype.extractPredictedClass=function(n,r){return va(this,void 0,void 0,function(){var o,a,i,s;return ga(this,function(u){switch(u.label){case 0:return o=r.row,a=r.col,i=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,d){return s[o][a][i][d]}).map(function(l,d){return{classScore:l,label:d}}).reduce(function(l,d){return l.classScore>d.classScore?l:d})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e})(Bs);function hu(t,e,n){if(n===void 0&&(n=!1),t.beginPath(),e.slice(1).forEach(function(a,i){var s=a.x,u=a.y,l=e[i];t.moveTo(l.x,l.y),t.lineTo(s,u)}),n){var r=e[e.length-1],o=e[0];if(!r||!o)return;t.moveTo(r.x,r.y),t.lineTo(o.x,o.y)}t.stroke()}var Xo=(function(t){At(e,t);function e(n,r,o){return t.call(this,n,n,"",r,o)||this}return e.prototype.forSize=function(n,r){var o=t.prototype.forSize.call(this,n,r),a=o.score,i=o.relativeBox,s=o.imageDims;return new e(a,i,s)},e})(Dz);function _p(t){return t.detection instanceof Xo}function Tp(t,e){var n={detection:e};return Object.assign({},t,n)}function sCe(t,e){var n=Array.isArray(e)?e:[e];n.forEach(function(r){var o=r instanceof Xo?r.score:_p(r)?r.detection.score:void 0,a=r instanceof Xo?r.box:_p(r)?r.detection.box:new Ai(r),i=o?""+wR(o):void 0;new Bz(a,{label:i}).draw(t)})}function Uo(t,e,n){return dt(function(){var r=sL(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=en(r,e.bias),r})}function Ww(t,e,n){return n===void 0&&(n=!1),dt(function(){var r=er(n?en(Ds(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):Uo(t,e.conv0,[2,2])),o=Uo(r,e.conv1,[1,1]),a=er(en(r,o)),i=Uo(a,e.conv2,[1,1]);return er(en(r,en(o,i)))})}function cg(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),dt(function(){var o=er(n?en(Ds(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Uo(t,e.conv0,r?[2,2]:[1,1])),a=Uo(o,e.conv1,[1,1]),i=er(en(o,a)),s=Uo(i,e.conv2,[1,1]),u=er(en(o,en(a,s))),l=Uo(u,e.conv3,[1,1]);return er(en(o,en(a,en(s,l))))})}function Vz(t,e){var n=eb(t,e),r=NR(t,e);function o(i,s,u,l){l===void 0&&(l=!1);var d=l?n(i,s,3,u+"/conv0"):r(i,s,u+"/conv0"),f=r(s,s,u+"/conv1"),p=r(s,s,u+"/conv2");return{conv0:d,conv1:f,conv2:p}}function a(i,s,u,l){l===void 0&&(l=!1);var d=o(i,s,u,l),f=d.conv0,p=d.conv1,m=d.conv2,g=r(s,s,u+"/conv3");return{conv0:f,conv1:p,conv2:m,conv3:g}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function uCe(t){var e=[],n=Fs(t),r=n.extractWeights,o=n.getRemainingWeights,a=Vz(r,e).extractDenseBlock4Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{dense0:i,dense1:s,dense2:u,dense3:l}}}function Hz(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function Gz(t,e){var n=Xu(t,e),r=Hz(n),o=DR(n);function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),d=o(s+"/conv1"),f=o(s+"/conv2");return{conv0:l,conv1:d,conv2:f}}function i(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),d=o(s+"/conv1"),f=o(s+"/conv2"),p=o(s+"/conv3");return{conv0:l,conv1:d,conv2:f,conv3:p}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function lCe(t){var e=[],n=Gz(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Ps(t,e),{params:r,paramMappings:e}}var $z=(function(t){At(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return dt(function(){var o=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],i=pm(o,a).div(Pe(255)),s=cg(i,r.dense0,!0);return s=cg(s,r.dense1),s=cg(s,r.dense2),s=cg(s,r.dense3),s=am(s,[7,7],[2,2],"valid"),s})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,wr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return lCe(n)},e.prototype.extractParams=function(n){return uCe(n)},e})(Bs);function wi(t,e){return dt(function(){return en(VE(t,e.weights),e.bias)})}function cCe(t,e,n){var r=[],o=Fs(t),a=o.extractWeights,i=o.getRemainingWeights,s=AR(a,r),u=s(e,n,"fc");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:u}}}function dCe(t){var e=[],n=Xu(t,e);function r(a){var i=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:i,bias:s}}var o={fc:r("fc")};return Ps(t,e),{params:o,paramMappings:e}}function qz(t){var e={},n={};return Object.keys(t).forEach(function(r){var o=r.startsWith("fc")?n:e;o[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var Xz=(function(t){At(e,t);function e(n,r){var o=t.call(this,n)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return dt(function(){var a=n instanceof Ay?r.faceFeatureExtractor.forwardInput(n):n;return wi(a.as2D(a.shape[0],-1),o.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,a=r.paramMappings;this._params=o,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return cCe(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=qz(n),o=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),dCe(a)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),a=o*r+o,i=n.slice(0,n.length-a),s=n.slice(n.length-a);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(s)},e})(Bs),JM=["neutral","happy","sad","angry","fearful","disgusted","surprised"],OR=(function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);JM.forEach(function(r,o){n[r]=e[o]})}return t.prototype.asSortedArray=function(){var e=this;return JM.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t})(),fCe=(function(t){At(e,t);function e(n){return n===void 0&&(n=new $z),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return dt(function(){return Hu(r.runNet(n))})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,wr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.predictExpressions=function(n){return xt(this,void 0,void 0,function(){var r,o,a,i,s=this;return wt(this,function(u){switch(u.label){case 0:return[4,wr(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return o=u.sent(),[4,Promise.all(Dr(o).map(function(l){return xt(s,void 0,void 0,function(){var d;return wt(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return d=f.sent(),l.dispose(),[2,d]}})})}))];case 3:return a=u.sent(),o.dispose(),i=a.map(function(l){return new OR(l)}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e})(Xz);function hCe(t){return t.expressions instanceof OR}function Kz(t,e){var n={expressions:e};return Object.assign({},t,n)}function pCe(t,e,n,r){n===void 0&&(n=.1);var o=Array.isArray(e)?e:[e];o.forEach(function(a){var i=a instanceof OR?a:hCe(a)?a.expressions:void 0;if(!i)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var s=i.asSortedArray(),u=s.filter(function(f){return f.probability>n}),l=_p(a)?a.detection.box.bottomLeft:r||new Yt(0,0),d=new TR(u.map(function(f){return f.expression+" ("+wR(f.probability)+")"}),l);d.draw(t)})}function mCe(t){var e=t.map(function(s){return s.x}),n=t.map(function(s){return s.y}),r=e.reduce(function(s,u){return u<s?u:s},1/0),o=n.reduce(function(s,u){return u<s?u:s},1/0),a=e.reduce(function(s,u){return s<u?u:s},0),i=n.reduce(function(s,u){return s<u?u:s},0);return new Z0(r,o,a,i)}var vCe=.5,gCe=.43,yCe=.45,ef=(function(){function t(e,n,r){r===void 0&&(r=new Yt(0,0));var o=n.width,a=n.height;this._imgDims=new Bl(o,a),this._shift=r,this._positions=e.map(function(i){return i.mul(new Yt(o,a)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new Yt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new Yt(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new Yt(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof Xo?e.box.floor():new Ai(e);return this.shiftBy(r.x,r.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),a=o.useDlibAlignment,i=o.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(i)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],o=e[2],a=function(f){return o.sub(f).magnitude()},i=(a(n)+a(r))/2,s=Math.floor(i/yCe),u=CR(e),l=Math.floor(Math.max(0,u.x-vCe*s)),d=Math.floor(Math.max(0,u.y-gCe*s));return new SR(l,d,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+d))},t.prototype.alignMinBbox=function(e){var n=mCe(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t})(),Yz=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(CR)},e})(ef);function PR(t){return _p(t)&&t.landmarks instanceof ef&&t.unshiftedLandmarks instanceof ef&&t.alignedRect instanceof Xo}function nb(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),o=r.align(),a=t.detection.imageDims,i=new Xo(t.detection.score,o.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:e,alignedRect:i};return Object.assign({},t,s)}var Qz=(function(){function t(e){e===void 0&&(e={});var n=e.drawLines,r=n===void 0?!0:n,o=e.drawPoints,a=o===void 0?!0:o,i=e.lineWidth,s=e.lineColor,u=e.pointSize,l=e.pointColor;this.drawLines=r,this.drawPoints=a,this.lineWidth=i||1,this.pointSize=u||2,this.lineColor=s||"rgba(0, 255, 255, 1)",this.pointColor=l||"rgba(255, 0, 255, 1)"}return t})(),Jz=(function(){function t(e,n){n===void 0&&(n={}),this.faceLandmarks=e,this.options=new Qz(n)}return t.prototype.draw=function(e){var n=Ni(e),r=this.options,o=r.drawLines,a=r.drawPoints,i=r.lineWidth,s=r.lineColor,u=r.pointSize,l=r.pointColor;if(o&&this.faceLandmarks instanceof Yz&&(n.strokeStyle=s,n.lineWidth=i,hu(n,this.faceLandmarks.getJawOutline()),hu(n,this.faceLandmarks.getLeftEyeBrow()),hu(n,this.faceLandmarks.getRightEyeBrow()),hu(n,this.faceLandmarks.getNose()),hu(n,this.faceLandmarks.getLeftEye(),!0),hu(n,this.faceLandmarks.getRightEye(),!0),hu(n,this.faceLandmarks.getMouth(),!0)),a){n.strokeStyle=l,n.fillStyle=l;var d=function(f){n.beginPath(),n.arc(f.x,f.y,u,0,2*Math.PI),n.fill()};this.faceLandmarks.positions.forEach(d)}},t})();function bCe(t,e){var n=Array.isArray(e)?e:[e];n.forEach(function(r){var o=r instanceof ef?r:PR(r)?r.landmarks:void 0;if(!o)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new Jz(o).draw(t)})}const xCe=Object.freeze(Object.defineProperty({__proto__:null,DrawFaceLandmarks:Jz,DrawFaceLandmarksOptions:Qz,drawContour:hu,drawDetections:sCe,drawFaceExpressions:pCe,drawFaceLandmarks:bCe},Symbol.toStringTag,{value:"Module"}));function wCe(t,e){var n=eb(t,e),r=NR(t,e);function o(i,s,u){var l=r(i,s,u+"/separable_conv0"),d=r(s,s,u+"/separable_conv1"),f=n(i,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:d,expansion_conv:f}}function a(i,s){var u=r(i,i,s+"/separable_conv0"),l=r(i,i,s+"/separable_conv1"),d=r(i,i,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:d}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:a}}function CCe(t,e){var n=[],r=Fs(t),o=r.extractWeights,a=r.getRemainingWeights,i=wCe(o,n),s=i.extractConvParams,u=i.extractSeparableConvParams,l=i.extractReductionBlockParams,d=i.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),p=l(32,64,"entry_flow/reduction_block_0"),m=l(64,128,"entry_flow/reduction_block_1"),g={conv_in:f,reduction_block_0:p,reduction_block_1:m},y={};Ep(e,0,1).forEach(function(E){y["main_block_"+E]=d(128,"middle_flow/main_block_"+E)});var b=l(128,256,"exit_flow/reduction_block"),C=u(256,512,"exit_flow/separable_conv"),S={reduction_block:b,separable_conv:C};if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:g,middle_flow:y,exit_flow:S}}}function SCe(t,e){var n=Xu(t,e),r=Hz(n),o=DR(n);function a(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),d=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:d}}function i(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),d=o(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:a,extractMainBlockParams:i}}function ECe(t,e){var n=[],r=SCe(t,n),o=r.extractConvParams,a=r.extractSeparableConvParams,i=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=o("entry_flow/conv_in"),l=i("entry_flow/reduction_block_0"),d=i("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:d},p={};Ep(e,0,1).forEach(function(b){p["main_block_"+b]=s("middle_flow/main_block_"+b)});var m=i("exit_flow/reduction_block"),g=a("exit_flow/separable_conv"),y={reduction_block:m,separable_conv:g};return Ps(t,n),{params:{entry_flow:f,middle_flow:p,exit_flow:y},paramMappings:n}}function Zz(t,e,n){return en(Ds(t,e.filters,n,"same"),e.bias)}function Vw(t,e,n){n===void 0&&(n=!0);var r=n?er(t):t;return r=Uo(r,e.separable_conv0,[1,1]),r=Uo(er(r),e.separable_conv1,[1,1]),r=$d(r,[3,3],[2,2],"same"),r=en(r,Zz(t,e.expansion_conv,[2,2])),r}function RCe(t,e){var n=Uo(er(t),e.separable_conv0,[1,1]);return n=Uo(er(n),e.separable_conv1,[1,1]),n=Uo(er(n),e.separable_conv2,[1,1]),n=en(n,t),n}var _Ce=(function(t){At(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return dt(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=pm(a,i).div(Pe(256)),u=er(Zz(s,o.entry_flow.conv_in,[2,2]));return u=Vw(u,o.entry_flow.reduction_block_0,!1),u=Vw(u,o.entry_flow.reduction_block_1),Ep(r._numMainBlocks,0,1).forEach(function(l){u=RCe(u,o.middle_flow["main_block_"+l])}),u=Vw(u,o.exit_flow.reduction_block),u=er(Uo(u,o.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,wr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return ECe(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return CCe(n,this._numMainBlocks)},e})(Bs);function TCe(t){var e=[],n=Fs(t),r=n.extractWeights,o=n.getRemainingWeights,a=AR(r,e),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{fc:{age:i,gender:s}}}}function ACe(t){var e=[],n=Xu(t,e);function r(a){var i=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:i,bias:s}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Ps(t,e),{params:o,paramMappings:e}}var Ny;(function(t){t.FEMALE="female",t.MALE="male"})(Ny||(Ny={}));var NCe=(function(t){At(e,t);function e(n){n===void 0&&(n=new _Ce(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return dt(function(){var a=n instanceof Ay?r.faceFeatureExtractor.forwardInput(n):n,i=am(a,[7,7],[2,2],"valid").as2D(a.shape[0],-1),s=wi(i,o.fc.age).as1D(),u=wi(i,o.fc.gender);return{age:s,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return dt(function(){var o=r.runNet(n),a=o.age,i=o.gender;return{age:a,gender:Hu(i)}})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,wr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return xt(this,void 0,void 0,function(){var r,o,a,i,s,u,l=this;return wt(this,function(d){switch(d.label){case 0:return[4,wr(n)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return o=d.sent(),a=Dr(o.age),i=Dr(o.gender),s=a.map(function(f,p){return{ageTensor:f,genderTensor:i[p]}}),[4,Promise.all(s.map(function(f){var p=f.ageTensor,m=f.genderTensor;return xt(l,void 0,void 0,function(){var g,y,b,C,S;return wt(this,function(E){switch(E.label){case 0:return[4,p.data()];case 1:return g=E.sent()[0],[4,m.data()];case 2:return y=E.sent()[0],b=y>.5,C=b?Ny.MALE:Ny.FEMALE,S=b?y:1-y,p.dispose(),m.dispose(),[2,{age:g,gender:C,genderProbability:S}]}})})}))];case 3:return u=d.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,a=r.paramMappings;this._params=o,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return TCe(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=qz(n),o=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),ACe(a)},e.prototype.extractParams=function(n){var r=1539,o=n.slice(0,n.length-r),a=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(a)},e})(Bs),DCe=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],CR([n[3],n[4]])]},e})(ef),ZM=(function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+wR(this.distance)+")":"")},t})(),Hw=(function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t})();function FR(t,e){return xt(this,void 0,void 0,function(){var n,r,o,a,i,s,u;return wt(this,function(l){switch(l.label){case 0:return n=Hr.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,wr(t)];case 1:if(o=l.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=o.getInput(0),a instanceof n?(i=a,[3,4]):[3,2];case 2:return[4,Q2e(a)];case 3:i=l.sent(),l.label=4;case 4:r=i,l.label=5;case 5:return s=Ni(r),u=e.map(function(d){return d instanceof Xo?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(d){var f=d.x,p=d.y,m=d.width,g=d.height,y=tb({width:m,height:g});return Ni(y).putImageData(s.getImageData(f,p,m,g),0,0),y})]}})})}function BR(t,e){return xt(this,void 0,void 0,function(){return wt(this,function(n){if(!J0(t)&&!Nu(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Nu(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,dt(function(){var r=t.shape.slice(Nu(t)?1:0),o=r[0],a=r[1],i=r[2],s=e.map(function(l){return l instanceof Xo?l.forSize(a,o).box:l}).map(function(l){return l.clipAtImageBorders(a,o)}),u=s.map(function(l){var d=l.x,f=l.y,p=l.width,m=l.height;return cL(t.as3D(o,a,i),[f,d,0],[m,p,i])});return u})]})})}var e5=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,o){var a=o.map(function(s){var u=s.width,l=s.height,d=r/Math.max(l,u);return{width:u*d,height:l*d}}),i=a.length;return dt(function(){var s=function(p,m){return za([Qh([68],p),Qh([68],m)],1).as2D(1,136).as1D()},u=function(p,m){var g=a[p],y=g.width,b=g.height;return m(y,b)?Math.abs(y-b)/2:0},l=function(p){return u(p,function(m,g){return m<g})},d=function(p){return u(p,function(m,g){return g<m})},f=n.mul(Qh([i,136],r)).sub(za(Array.from(Array(i),function(p,m){return s(l(m),d(m))}))).div(za(Array.from(Array(i),function(p,m){return s(a[m].width,a[m].height)})));return f})},e.prototype.forwardInput=function(n){var r=this;return dt(function(){var o=r.runNet(n);return r.postProcess(o,n.inputSize,n.inputDimensions.map(function(a){var i=a[0],s=a[1];return{height:i,width:s}}))})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,wr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.detectLandmarks=function(n){return xt(this,void 0,void 0,function(){var r,o,a,i=this;return wt(this,function(s){switch(s.label){case 0:return[4,wr(n)];case 1:return r=s.sent(),o=dt(function(){return Dr(i.forwardInput(r))}),[4,Promise.all(o.map(function(u,l){return xt(i,void 0,void 0,function(){var d,f,p,m,g;return wt(this,function(y){switch(y.label){case 0:return p=(f=Array).from,[4,u.data()];case 1:return d=p.apply(f,[y.sent()]),m=d.filter(function(b,C){return $M(C)}),g=d.filter(function(b,C){return!$M(C)}),[2,new Yz(Array(68).fill(0).map(function(b,C){return new Yt(m[C],g[C])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return a=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e})(Xz),t5=(function(t){At(e,t);function e(n){return n===void 0&&(n=new $z),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e})(e5);function kCe(t){var e=[],n=Gz(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Ps(t,e),{params:r,paramMappings:e}}function ICe(t){var e=[],n=Fs(t),r=n.extractWeights,o=n.getRemainingWeights,a=Vz(r,e).extractDenseBlock3Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{dense0:i,dense1:s,dense2:u}}}var MCe=(function(t){At(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return dt(function(){var o=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],i=pm(o,a).div(Pe(255)),s=Ww(i,r.dense0,!0);return s=Ww(s,r.dense1),s=Ww(s,r.dense2),s=am(s,[14,14],[2,2],"valid"),s})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,wr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return kCe(n)},e.prototype.extractParams=function(n){return ICe(n)},e})(Bs),OCe=(function(t){At(e,t);function e(n){return n===void 0&&(n=new MCe),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e})(e5);(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(t5);function PCe(t,e){return en(fs(t,e.weights),e.biases)}function LR(t,e,n,r,o){o===void 0&&(o="same");var a=e.conv,i=a.filters,s=a.bias,u=Ds(t,i,n,o);return u=en(u,s),u=PCe(u,e.scale),r?er(u):u}function FCe(t,e){return LR(t,e,[1,1],!0)}function n5(t,e){return LR(t,e,[1,1],!1)}function r5(t,e){return LR(t,e,[2,2],!0,"valid")}function BCe(t,e){function n(s,u,l){var d=t(s),f=d.length/(u*l*l);if(V2e(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+d.length+", numFilters: "+u+", filterSize: "+l);return dt(function(){return Ou(Oa(d,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,d){var f=n(s,u,l),p=Fo(t(u));return e.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:f,bias:p}}function o(s,u){var l=Fo(t(s)),d=Fo(t(s));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:d}}function a(s,u,l,d){var f=r(s,u,l,d+"/conv"),p=o(u,d+"/scale");return{conv:f,scale:p}}function i(s,u,l,d,f){f===void 0&&(f=!1);var p=a((f?.5:1)*s,u,l,d+"/conv1"),m=a(s,u,l,d+"/conv2");return{conv1:p,conv2:m}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function LCe(t){var e=Fs(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],a=BCe(n,o),i=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),d=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),p=s(36864,64,3,"conv64_down",!0),m=s(36864,64,3,"conv64_1"),g=s(36864,64,3,"conv64_2"),y=s(36864,64,3,"conv64_3"),b=s(147456,128,3,"conv128_down",!0),C=s(147456,128,3,"conv128_1"),S=s(147456,128,3,"conv128_2"),E=s(589824,256,3,"conv256_down",!0),_=s(589824,256,3,"conv256_1"),T=s(589824,256,3,"conv256_2"),D=s(589824,256,3,"conv256_down_out"),I=dt(function(){return Ou(F0(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var k={conv32_down:u,conv32_1:l,conv32_2:d,conv32_3:f,conv64_down:p,conv64_1:m,conv64_2:g,conv64_3:y,conv128_down:b,conv128_1:C,conv128_2:S,conv256_down:E,conv256_1:_,conv256_2:T,conv256_down_out:D,fc:I};return{params:k,paramMappings:o}}function jCe(t,e){var n=Xu(t,e);function r(i){var s=n(i+"/scale/weights",1),u=n(i+"/scale/biases",1);return{weights:s,biases:u}}function o(i){var s=n(i+"/conv/filters",4),u=n(i+"/conv/bias",1),l=r(i);return{conv:{filters:s,bias:u},scale:l}}function a(i){return{conv1:o(i+"/conv1"),conv2:o(i+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function zCe(t){var e=[],n=jCe(t,e),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,a=r("conv32_down"),i=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),d=o("conv64_1"),f=o("conv64_2"),p=o("conv64_3"),m=o("conv128_down"),g=o("conv128_1"),y=o("conv128_2"),b=o("conv256_down"),C=o("conv256_1"),S=o("conv256_2"),E=o("conv256_down_out"),_=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!W2e(_))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+_);var T={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:d,conv64_2:f,conv64_3:p,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:C,conv256_2:S,conv256_down_out:E,fc:_};return Ps(t,e),{params:T,paramMappings:e}}function li(t,e){var n=FCe(t,e.conv1);return n=n5(n,e.conv2),n=en(n,t),n=er(n),n}function dg(t,e){var n=r5(t,e.conv1);n=n5(n,e.conv2);var r=am(t,2,2,"valid"),o=qn(r.shape),a=r.shape[3]!==n.shape[3],i=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(i){var s=n.shape.slice();s[1]=1;var u=qn(s);n=xo([n,u],1);var l=n.shape.slice();l[2]=1;var d=qn(l);n=xo([n,d],2)}return r=a?xo([r,o],3):r,n=en(r,n),n=er(n),n}var UCe=(function(t){At(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return dt(function(){var o=n.toBatchTensor(150,!0).toFloat(),a=[122.782,117.001,104.298],i=pm(o,a).div(Pe(256)),s=r5(i,r.conv32_down);s=$d(s,3,2,"valid"),s=li(s,r.conv32_1),s=li(s,r.conv32_2),s=li(s,r.conv32_3),s=dg(s,r.conv64_down),s=li(s,r.conv64_1),s=li(s,r.conv64_2),s=li(s,r.conv64_3),s=dg(s,r.conv128_down),s=li(s,r.conv128_1),s=li(s,r.conv128_2),s=dg(s,r.conv256_down),s=li(s,r.conv256_1),s=li(s,r.conv256_2),s=dg(s,r.conv256_down_out);var u=s.mean([1,2]),l=VE(u,r.fc);return l})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,wr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return xt(this,void 0,void 0,function(){var r,o,a,i=this;return wt(this,function(s){switch(s.label){case 0:return[4,wr(n)];case 1:return r=s.sent(),o=dt(function(){return Dr(i.forwardInput(r))}),[4,Promise.all(o.map(function(u){return u.data()}))];case 2:return a=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return zCe(n)},e.prototype.extractParams=function(n){return LCe(n)},e})(Bs);function o5(t,e){var n={descriptor:e};return Object.assign({},t,n)}var a5=(function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,o=n.scaleFactor,a=n.maxNumScales,i=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=a||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t})();function WCe(t,e){function n(u,l){var d=Oa(t(9*u),[3,3,u,1]),f=Fo(t(u)),p=Fo(t(u)),m=Fo(t(u)),g=Fo(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:d,batch_norm_scale:f,batch_norm_offset:p,batch_norm_mean:m,batch_norm_variance:g}}function r(u,l,d,f,p){var m=Oa(t(u*l*d*d),[d,d,u,l]),g=Fo(t(l));return e.push({paramPath:f+"/filters"},{paramPath:f+"/"+(p?"batch_norm_offset":"bias")}),{filters:m,bias:g}}function o(u,l,d,f){var p=r(u,l,d,f,!0),m=p.filters,g=p.bias;return{filters:m,batch_norm_offset:g}}function a(u,l,d){var f=n(u,d+"/depthwise_conv"),p=o(u,l,1,d+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:p}}function i(){var u=o(3,32,3,"mobilenetv1/conv_0"),l=a(32,64,"mobilenetv1/conv_1"),d=a(64,128,"mobilenetv1/conv_2"),f=a(128,128,"mobilenetv1/conv_3"),p=a(128,256,"mobilenetv1/conv_4"),m=a(256,256,"mobilenetv1/conv_5"),g=a(256,512,"mobilenetv1/conv_6"),y=a(512,512,"mobilenetv1/conv_7"),b=a(512,512,"mobilenetv1/conv_8"),C=a(512,512,"mobilenetv1/conv_9"),S=a(512,512,"mobilenetv1/conv_10"),E=a(512,512,"mobilenetv1/conv_11"),_=a(512,1024,"mobilenetv1/conv_12"),T=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:d,conv_3:f,conv_4:p,conv_5:m,conv_6:g,conv_7:y,conv_8:b,conv_9:C,conv_10:S,conv_11:E,conv_12:_,conv_13:T}}function s(){var u=o(1024,256,1,"prediction_layer/conv_0"),l=o(256,512,3,"prediction_layer/conv_1"),d=o(512,128,1,"prediction_layer/conv_2"),f=o(128,256,3,"prediction_layer/conv_3"),p=o(256,128,1,"prediction_layer/conv_4"),m=o(128,256,3,"prediction_layer/conv_5"),g=o(256,64,1,"prediction_layer/conv_6"),y=o(64,128,3,"prediction_layer/conv_7"),b=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),C=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),S=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),E=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),_=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),T=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),I=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),M=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),O=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),F=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),j={box_encoding_predictor:b,class_predictor:C},G={box_encoding_predictor:S,class_predictor:E},W={box_encoding_predictor:_,class_predictor:T},q={box_encoding_predictor:D,class_predictor:I},P={box_encoding_predictor:k,class_predictor:M},U={box_encoding_predictor:O,class_predictor:F};return{conv_0:u,conv_1:l,conv_2:d,conv_3:f,conv_4:p,conv_5:m,conv_6:g,conv_7:y,box_predictor_0:j,box_predictor_1:G,box_predictor_2:W,box_predictor_3:q,box_predictor_4:P,box_predictor_5:U}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:s}}function VCe(t){var e=[],n=Fs(t),r=n.extractWeights,o=n.getRemainingWeights,a=WCe(r,e),i=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=i(),l=s(),d=IE(r(5118*4),[1,5118,4]),f={extra_dim:d};if(e.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:e}}function HCe(t,e){var n=Xu(t,e);function r(l,d,f){var p=n(l+"/Conv2d_"+d+"_pointwise/weights",4,f+"/filters"),m=n(l+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:p,batch_norm_offset:m}}function o(l){var d="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",p=d+"/depthwise_conv",m=d+"/pointwise_conv",g=n(f+"/depthwise_weights",4,p+"/filters"),y=n(f+"/BatchNorm/gamma",1,p+"/batch_norm_scale"),b=n(f+"/BatchNorm/beta",1,p+"/batch_norm_offset"),C=n(f+"/BatchNorm/moving_mean",1,p+"/batch_norm_mean"),S=n(f+"/BatchNorm/moving_variance",1,p+"/batch_norm_variance");return{depthwise_conv:{filters:g,batch_norm_scale:y,batch_norm_offset:b,batch_norm_mean:C,batch_norm_variance:S},pointwise_conv:r("MobilenetV1",l,m)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function i(l,d){var f=n(l+"/weights",4,d+"/filters"),p=n(l+"/biases",1,d+"/bias");return{filters:f,bias:p}}function s(l){var d=i("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=i("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:d,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function GCe(t){var e=[],n=HCe(t,e),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,a=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!J0(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var i={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:a}};return Ps(t,e),{params:i,paramMappings:e}}function fi(t,e,n){return dt(function(){var r=Ds(t,e.filters,n,"same");return r=en(r,e.batch_norm_offset),zE(r,0,6)})}var $Ce=.0010000000474974513;function qCe(t,e,n){return dt(function(){var r=WE(t,e.filters,n,"same");return r=rL(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,$Ce),zE(r,0,6)})}function XCe(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function KCe(t,e){return dt(function(){var n=null,r=fi(t,e.conv_0,[2,2]),o=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(o.forEach(function(a,i){var s=i+1,u=XCe(s);r=qCe(r,a.depthwise_conv,u),r=fi(r,a.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function YCe(t,e,n,r,o){var a=t.shape[0],i=Math.min(n,a),s=e.map(function(d,f){return{score:d,boxIndex:f}}).filter(function(d){return d.score>o}).sort(function(d,f){return f.score-d.score}),u=function(d){return d<=r?1:0},l=[];return s.forEach(function(d){if(!(l.length>=i)){for(var f=d.score,p=l.length-1;p>=0;--p){var m=QCe(t,d.boxIndex,l[p]);if(m!==0&&(d.score*=u(m),d.score<=o))break}f===d.score&&l.push(d.boxIndex)}}),l}function QCe(t,e,n){var r=t.arraySync(),o=Math.min(r[e][0],r[e][2]),a=Math.min(r[e][1],r[e][3]),i=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),d=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),p=(i-o)*(s-a),m=(d-u)*(f-l);if(p<=0||m<=0)return 0;var g=Math.max(o,u),y=Math.max(a,l),b=Math.min(i,d),C=Math.min(s,f),S=Math.max(b-g,0)*Math.max(C-y,0);return S/(p+m-S)}function JCe(t){var e=Dr(Ou(t,[1,0])),n=[Ti(e[2],e[0]),Ti(e[3],e[1])],r=[en(e[0],ss(n[0],Pe(2))),en(e[1],ss(n[1],Pe(2)))];return{sizes:n,centers:r}}function ZCe(t,e){var n=JCe(t),r=n.sizes,o=n.centers,a=Dr(Ou(e,[1,0])),i=ss(fs(K2(ss(a[2],Pe(5))),r[0]),Pe(2)),s=en(fs(ss(a[0],Pe(10)),r[0]),o[0]),u=ss(fs(K2(ss(a[3],Pe(5))),r[1]),Pe(2)),l=en(fs(ss(a[1],Pe(10)),r[1]),o[1]);return Ou(za([Ti(s,i),Ti(l,u),en(s,i),en(l,u)]),[1,0])}function eSe(t,e,n){return dt(function(){var r=t.shape[0],o=ZCe(ja(Ed(n.extra_dim,[r,1,1]),[-1,4]),ja(t,[-1,4]));o=ja(o,[r,o.shape[0]/r,4]);var a=ZB(Mu(e,[0,0,1],[-1,-1,-1])),i=Mu(a,[0,0,0],[-1,-1,1]);i=ja(i,[r,i.shape[1]]);var s=Dr(o),u=Dr(i);return{boxes:s,scores:u}})}function nd(t,e){return dt(function(){var n=t.shape[0],r=ja(Wa(t,e.box_encoding_predictor),[n,-1,1,4]),o=ja(Wa(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function tSe(t,e,n){return dt(function(){var r=fi(t,n.conv_0,[1,1]),o=fi(r,n.conv_1,[2,2]),a=fi(o,n.conv_2,[1,1]),i=fi(a,n.conv_3,[2,2]),s=fi(i,n.conv_4,[1,1]),u=fi(s,n.conv_5,[2,2]),l=fi(u,n.conv_6,[1,1]),d=fi(l,n.conv_7,[2,2]),f=nd(e,n.box_predictor_0),p=nd(t,n.box_predictor_1),m=nd(o,n.box_predictor_2),g=nd(i,n.box_predictor_3),y=nd(u,n.box_predictor_4),b=nd(d,n.box_predictor_5),C=xo([f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding,b.boxPredictionEncoding],1),S=xo([f.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction,y.classPrediction,b.classPrediction],1);return{boxPredictions:C,classPredictions:S}})}var rb=(function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t})(),i5=(function(t){At(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return dt(function(){var o=n.toBatchTensor(512,!1).toFloat(),a=Ti(fs(o,Pe(.007843137718737125)),Pe(1)),i=KCe(a,r.mobilenetv1),s=tSe(i.out,i.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return eSe(u,l,r.output_layer)})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,wr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var o,a,i,s,u,l,d,f,p,m,g,y,b,C,S,E,_,T,D,I,k;return wt(this,function(M){switch(M.label){case 0:return o=new rb(r),a=o.maxResults,i=o.minConfidence,[4,wr(n)];case 1:for(s=M.sent(),u=this.forwardInput(s),l=u.boxes,d=u.scores,f=l[0],p=d[0],m=1;m<l.length;m++)l[m].dispose(),d[m].dispose();return b=(y=Array).from,[4,p.data()];case 2:return g=b.apply(y,[M.sent()]),C=.5,S=YCe(f,g,a,C,i),E=s.getReshapedInputDimensions(0),_=s.inputSize,T=_/E.width,D=_/E.height,I=f.arraySync(),k=S.map(function(O){var F=[Math.max(0,I[O][0]),Math.min(1,I[O][2])].map(function(U){return U*D}),j=F[0],G=F[1],W=[Math.max(0,I[O][1]),Math.min(1,I[O][3])].map(function(U){return U*T}),q=W[0],P=W[1];return new Xo(g[O],new SR(q,j,P-q,G-j),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),p.dispose(),[2,k]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return GCe(n)},e.prototype.extractParams=function(n){return VCe(n)},e})(Bs);(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(i5);var s5=(function(t){At(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e})(MR),mm=(function(){function t(){}return t.prototype.then=function(e){return xt(this,void 0,void 0,function(){var n;return wt(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return xt(this,void 0,void 0,function(){return wt(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t})();function ob(t,e,n,r,o){return o===void 0&&(o=function(a){var i=a.alignedRect;return i}),xt(this,void 0,void 0,function(){var a,i,s,u,l;return wt(this,function(d){switch(d.label){case 0:return a=t.map(function(f){return PR(f)?o(f):f.detection}),s=r,s?[3,5]:e instanceof We?[4,BR(e,a)]:[3,2];case 1:return u=d.sent(),[3,4];case 2:return[4,FR(e,a)];case 3:u=d.sent(),d.label=4;case 4:s=u,d.label=5;case 5:return i=s,[4,n(i)];case 6:return l=d.sent(),i.forEach(function(f){return f instanceof We&&f.dispose()}),[2,l]}})})}function jR(t,e,n,r,o){return xt(this,void 0,void 0,function(){var a=this;return wt(this,function(i){return[2,ob([t],e,function(s){return xt(a,void 0,void 0,function(){return wt(this,function(u){return[2,n(s[0])]})})},r,o)]})})}function nSe(t){return dt(function(){return za(Dr(t,3).reverse(),3)})}var fg=2,Dy=12;function rSe(t,e){var n=eb(t,e),r=AR(t,e);function o(l,d){var f=Fo(t(l));return e.push({paramPath:d}),f}function a(l,d,f){f===void 0&&(f=!1);var p=n(l[0],l[1],3,d+"/conv1"),m=o(l[1],d+"/prelu1_alpha"),g=n(l[1],l[2],3,d+"/conv2"),y=o(l[2],d+"/prelu2_alpha"),b=n(l[2],l[3],f?2:3,d+"/conv3"),C=o(l[3],d+"/prelu3_alpha");return{conv1:p,prelu1_alpha:m,conv2:g,prelu2_alpha:y,conv3:b,prelu3_alpha:C}}function i(){var l=a([3,10,16,32],"pnet"),d=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return ys({},l,{conv4_1:d,conv4_2:f})}function s(){var l=a([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),f=o(128,"rnet/prelu4_alpha"),p=r(128,2,"rnet/fc2_1"),m=r(128,4,"rnet/fc2_2");return ys({},l,{fc1:d,prelu4_alpha:f,fc2_1:p,fc2_2:m})}function u(){var l=a([3,32,64,64],"onet"),d=n(64,128,2,"onet/conv4"),f=o(128,"onet/prelu4_alpha"),p=r(1152,256,"onet/fc1"),m=o(256,"onet/prelu5_alpha"),g=r(256,2,"onet/fc2_1"),y=r(256,4,"onet/fc2_2"),b=r(256,10,"onet/fc2_3");return ys({},l,{conv4:d,prelu4_alpha:f,fc1:p,prelu5_alpha:m,fc2_1:g,fc2_2:y,fc2_3:b})}return{extractPNetParams:i,extractRNetParams:s,extractONetParams:u}}function oSe(t){var e=Fs(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],a=rSe(n,o),i=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,l=i(),d=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:d,onet:f},paramMappings:o}}function aSe(t,e){var n=Xu(t,e);function r(d){var f=n(d+"/weights",4,d+"/filters"),p=n(d+"/bias",1);return{filters:f,bias:p}}function o(d){var f=n(d+"/weights",2),p=n(d+"/bias",1);return{weights:f,bias:p}}function a(d){return n(d,1)}function i(d){var f=r(d+"/conv1"),p=a(d+"/prelu1_alpha"),m=r(d+"/conv2"),g=a(d+"/prelu2_alpha"),y=r(d+"/conv3"),b=a(d+"/prelu3_alpha");return{conv1:f,prelu1_alpha:p,conv2:m,prelu2_alpha:g,conv3:y,prelu3_alpha:b}}function s(){var d=i("pnet"),f=r("pnet/conv4_1"),p=r("pnet/conv4_2");return ys({},d,{conv4_1:f,conv4_2:p})}function u(){var d=i("rnet"),f=o("rnet/fc1"),p=a("rnet/prelu4_alpha"),m=o("rnet/fc2_1"),g=o("rnet/fc2_2");return ys({},d,{fc1:f,prelu4_alpha:p,fc2_1:m,fc2_2:g})}function l(){var d=i("onet"),f=r("onet/conv4"),p=a("onet/prelu4_alpha"),m=o("onet/fc1"),g=a("onet/prelu5_alpha"),y=o("onet/fc2_1"),b=o("onet/fc2_2"),C=o("onet/fc2_3");return ys({},d,{conv4:f,prelu4_alpha:p,fc1:m,prelu5_alpha:g,fc2_1:y,fc2_2:b,fc2_3:C})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function iSe(t){var e=[],n=aSe(t,e),r=n.extractPNetParams,o=n.extractRNetParams,a=n.extractONetParams,i=r(),s=o(),u=a();return Ps(t,e),{params:{pnet:i,rnet:s,onet:u},paramMappings:e}}function SC(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function sSe(t,e,n){for(var r=n[0],o=n[1],a=Dy/t,i=[],s=Math.min(r,o)*a,u=0;s>=12;)i.push(a*Math.pow(e,u)),s=s*e,u+=1;return i}var zR=(function(t){At(e,t);function e(n,r,o,a){return t.call(this,{left:n,top:r,right:o,bottom:a},!0)||this}return e})(Ai);function u5(t){return dt(function(){return fs(Ti(t,Pe(127.5)),Pe(.0078125))})}function Id(t,e){return dt(function(){return en(er(t),fs(e,oy(er(oy(t)))))})}function UR(t,e,n){return n===void 0&&(n=!1),dt(function(){var r=Wa(t,e.conv1,"valid");return r=Id(r,e.prelu1_alpha),r=$d(r,n?[2,2]:[3,3],[2,2],"same"),r=Wa(r,e.conv2,"valid"),r=Id(r,e.prelu2_alpha),r=n?r:$d(r,[3,3],[2,2],"valid"),r=Wa(r,e.conv3,"valid"),r=Id(r,e.prelu3_alpha),r})}function uSe(t,e){return dt(function(){var n=UR(t,e,!0),r=Wa(n,e.conv4_1,"valid"),o=ha(L0(r,3),3),a=Hu(Ti(r,o),3),i=Wa(n,e.conv4_2,"valid");return{prob:a,regions:i}})}function lSe(t,e){return dt(function(){var n=SC(e,t.shape.slice(1)),r=n.height,o=n.width,a=_L.resizeBilinear(t,[r,o]),i=u5(a);return Ou(i,[0,2,1,3])})}function cSe(t,e,n,r){for(var o=[],a=t.arraySync(),i=0;i<t.shape[0];i++)for(var s=0;s<t.shape[1];s++)a[i][s]>=r&&o.push(new Yt(s,i));var u=o.map(function(l){var d=new Z0(Math.round((l.y*fg+1)/n),Math.round((l.x*fg+1)/n),Math.round((l.y*fg+Dy)/n),Math.round((l.x*fg+Dy)/n)),f=a[l.y][l.x],p=e.arraySync(),m=new zR(p[l.y][l.x][0],p[l.y][l.x][1],p[l.y][l.x][2],p[l.y][l.x][3]);return{cell:d,score:f,region:m}});return u}function dSe(t,e,n,r,o){o.stage1=[];var a=e.map(function(p){return dt(function(){var m={scale:p},g=lSe(t,p),y=Date.now(),b=uSe(g,r),C=b.prob,S=b.regions;m.pnet=Date.now()-y;var E=Dr(Dr(C,3)[1])[0],_=Dr(S)[0];return{scoresTensor:E,regionsTensor:_,scale:p,statsForScale:m}})}),i=a.map(function(p){var m=p.scoresTensor,g=p.regionsTensor,y=p.scale,b=p.statsForScale,C=cSe(m,g,y,n);if(m.dispose(),g.dispose(),!C.length)return o.stage1.push(b),[];var S=Date.now(),E=Rp(C.map(function(_){return _.cell}),C.map(function(_){return _.score}),.5);return b.nms=Date.now()-S,b.numBoxes=E.length,o.stage1.push(b),E.map(function(_){return C[_]})}),s=i.reduce(function(p,m){return p.concat(m)},[]),u=[],l=[];if(s.length>0){var d=Date.now(),f=Rp(s.map(function(p){return p.cell}),s.map(function(p){return p.score}),.7);o.stage1_nms=Date.now()-d,l=f.map(function(p){return s[p].score}),u=f.map(function(p){return s[p]}).map(function(p){var m=p.cell,g=p.region;return new Z0(m.left+g.left*m.width,m.top+g.top*m.height,m.right+g.right*m.width,m.bottom+g.bottom*m.height).toSquare().round()})}return{boxes:u,scores:l}}function l5(t,e,n){var r=n.width,o=n.height;return xt(this,void 0,void 0,function(){var a,i,s,u=this;return wt(this,function(l){switch(l.label){case 0:return a=Ni(t),[4,Promise.all(e.map(function(d){return xt(u,void 0,void 0,function(){var f,p,m,g,y,b,C,S;return wt(this,function(E){return f=d.padAtBorders(t.height,t.width),p=f.y,m=f.ey,g=f.x,y=f.ex,b=g-1,C=p-1,S=a.getImageData(b,C,y-b,m-C),[2,Hr.isNodejs()?kR(S):createImageBitmap(S)]})})}))];case 1:return i=l.sent(),s=[],i.forEach(function(d){var f=tb({width:r,height:o}),p=Ni(f);p.drawImage(d,0,0,r,o);for(var m=p.getImageData(0,0,r,o).data,g=[],y=0;y<m.length;y+=4)g.push(m[y+2]),g.push(m[y+1]),g.push(m[y]);s.push(g)}),[2,s.map(function(d){var f=dt(function(){var p=Ou(Oa(d,[1,r,o,3]),[0,2,1,3]).toFloat();return u5(p)});return f})]}})})}function fSe(t,e){return dt(function(){var n=UR(t,e),r=ja(n,[n.shape[0],e.fc1.weights.shape[0]]),o=wi(r,e.fc1),a=Id(o,e.prelu4_alpha),i=wi(a,e.fc2_1),s=ha(L0(i,1),1),u=Hu(Ti(i,s),1),l=wi(a,e.fc2_2),d=Dr(u,1)[1];return{scores:d,regions:l}})}function hSe(t,e,n,r,o){return xt(this,void 0,void 0,function(){var a,i,s,u,l,d,f,p,m,g,y,b,C,S;return wt(this,function(E){switch(E.label){case 0:return a=Date.now(),[4,l5(t,e,{width:24,height:24})];case 1:return i=E.sent(),o.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map(function(_){var T=fSe(_,r);return _.dispose(),T}),o.stage2_rnet=Date.now()-a,u=s.length>1?xo(s.map(function(_){return _.scores})):s[0].scores,f=(d=Array).from,[4,u.data()];case 2:return l=f.apply(d,[E.sent()]),u.dispose(),p=l.map(function(_,T){return{score:_,idx:T}}).filter(function(_){return _.score>n}).map(function(_){var T=_.idx;return T}),m=p.map(function(_){return e[_]}),g=p.map(function(_){return l[_]}),y=[],b=[],m.length>0&&(a=Date.now(),C=Rp(m,g,.7),o.stage2_nms=Date.now()-a,S=C.map(function(_){var T=s[p[_]].regions.arraySync();return new zR(T[0][0],T[0][1],T[0][2],T[0][3])}),b=C.map(function(_){return g[_]}),y=C.map(function(_,T){return m[_].calibrate(S[T])})),s.forEach(function(_){_.regions.dispose(),_.scores.dispose()}),[2,{boxes:y,scores:b}]}})})}function pSe(t,e){return dt(function(){var n=UR(t,e);n=$d(n,[2,2],[2,2],"same"),n=Wa(n,e.conv4,"valid"),n=Id(n,e.prelu4_alpha);var r=ja(n,[n.shape[0],e.fc1.weights.shape[0]]),o=wi(r,e.fc1),a=Id(o,e.prelu5_alpha),i=wi(a,e.fc2_1),s=ha(L0(i,1),1),u=Hu(Ti(i,s),1),l=wi(a,e.fc2_2),d=wi(a,e.fc2_3),f=Dr(u,1)[1];return{scores:f,regions:l,points:d}})}function mSe(t,e,n,r,o){return xt(this,void 0,void 0,function(){var a,i,s,u,l,d,f,p,m,g,y,b,C,S,E;return wt(this,function(_){switch(_.label){case 0:return a=Date.now(),[4,l5(t,e,{width:48,height:48})];case 1:return i=_.sent(),o.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map(function(T){var D=pSe(T,r);return T.dispose(),D}),o.stage3_onet=Date.now()-a,u=s.length>1?xo(s.map(function(T){return T.scores})):s[0].scores,f=(d=Array).from,[4,u.data()];case 2:return l=f.apply(d,[_.sent()]),u.dispose(),p=l.map(function(T,D){return{score:T,idx:D}}).filter(function(T){return T.score>n}).map(function(T){var D=T.idx;return D}),m=p.map(function(T){var D=s[T].regions.arraySync();return new zR(D[0][0],D[0][1],D[0][2],D[0][3])}),g=p.map(function(T,D){return e[T].calibrate(m[D])}),y=p.map(function(T){return l[T]}),b=[],C=[],S=[],g.length>0&&(a=Date.now(),E=Rp(g,y,.7,!1),o.stage3_nms=Date.now()-a,b=E.map(function(T){return g[T]}),C=E.map(function(T){return y[T]}),S=E.map(function(T,D){return Array(5).fill(0).map(function(I,k){var M=s[T].points.arraySync();return new Yt(M[0][k]*(b[D].width+1)+b[D].left,M[0][k+5]*(b[D].height+1)+b[D].top)})})),s.forEach(function(T){T.regions.dispose(),T.scores.dispose(),T.points.dispose()}),[2,{boxes:b,scores:C,points:S}]}})})}var vSe=(function(t){At(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var o,a,i,s,u,l,d,f,p,m,g,y,b,C,S,E,_,T,D,I,k;return wt(this,function(M){switch(M.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(a=n.canvases[0],!a)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},s=Date.now(),u=dt(function(){return nSe(ha(Gge.fromPixels(a)).toFloat())}),l=function(O){return u.dispose(),i.total=Date.now()-s,O},d=u.shape.slice(1),f=d[0],p=d[1],m=new a5(r),g=m.minFaceSize,y=m.scaleFactor,b=m.maxNumScales,C=m.scoreThresholds,S=m.scaleSteps,E=(S||sSe(g,y,[f,p])).filter(function(O){var F=SC(O,[f,p]);return Math.min(F.width,F.height)>Dy}).slice(0,b),i.scales=E,i.pyramid=E.map(function(O){return SC(O,[f,p])}),_=Date.now(),[4,dSe(u,E,C[0],o.pnet,i)];case 1:return T=M.sent(),i.total_stage1=Date.now()-_,T.boxes.length?(i.stage2_numInputBoxes=T.boxes.length,_=Date.now(),[4,hSe(a,T.boxes,C[1],o.rnet,i)]):[2,l({results:[],stats:i})];case 2:return D=M.sent(),i.total_stage2=Date.now()-_,D.boxes.length?(i.stage3_numInputBoxes=D.boxes.length,_=Date.now(),[4,mSe(a,D.boxes,C[2],o.onet,i)]):[2,l({results:[],stats:i})];case 3:return I=M.sent(),i.total_stage3=Date.now()-_,k=I.boxes.map(function(O,F){return nb(Tp({},new Xo(I.scores[F],new SR(O.left/p,O.top/f,O.width/p,O.height/f),{height:f,width:p})),new DCe(I.points[F].map(function(j){return j.sub(new Yt(O.left,O.top)).div(new Yt(O.width,O.height))}),{width:O.width,height:O.height}))}),[2,l({results:k,stats:i})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,wr(n)];case 1:return[4,o.apply(this,[a.sent(),r])];case 2:return[2,a.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,wr(n)];case 1:return[2,o.apply(this,[a.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return iSe(n)},e.prototype.extractParams=function(n){return oSe(n)},e})(Bs),gSe=.4,ySe=[new Yt(1.603231,2.094468),new Yt(6.041143,7.080126),new Yt(2.882459,3.518061),new Yt(4.266906,5.178857),new Yt(9.041765,10.66308)],bSe=[117.001,114.697,97.404],xSe=(function(t){At(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:gSe,classes:["face"],anchors:ySe,meanRgb:bSe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return xt(this,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return o=a.sent(),[2,o.map(function(i){return new Xo(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e})(Wz),wSe=.4,CSe=[new Yt(.738768,.874946),new Yt(2.42204,2.65704),new Yt(4.30971,7.04493),new Yt(10.246,4.59428),new Yt(12.6868,11.8741)],SSe=[new Yt(1.603231,2.094468),new Yt(6.041143,7.080126),new Yt(2.882459,3.518061),new Yt(4.266906,5.178857),new Yt(9.041765,10.66308)],ESe=[117.001,114.697,97.404],RSe="tiny_yolov2_model",_Se="tiny_yolov2_separable_conv_model",TSe=(function(t){At(e,t);function e(n){n===void 0&&(n=!0);var r=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:wSe,classes:["face"]},n?{anchors:SSe,meanRgb:ESe}:{anchors:CSe,withClassScores:!0});return r=t.call(this,o)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return xt(this,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return o=a.sent(),[2,o.map(function(i){return new Xo(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?_Se:RSe},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e})(Wz),to={ssdMobilenetv1:new i5,tinyFaceDetector:new xSe,tinyYolov2:new TSe,mtcnn:new vSe,faceLandmark68Net:new t5,faceLandmark68TinyNet:new OCe,faceRecognitionNet:new UCe,faceExpressionNet:new fCe,ageGenderNet:new NCe};function c5(t,e){var n={age:e};return Object.assign({},t,n)}function d5(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var f5=(function(t){At(e,t);function e(n,r,o){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=o,a}return e})(mm),WR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o=this;return wt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,ob(n,this.input,function(i){return xt(o,void 0,void 0,function(){return wt(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return to.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(i,s){return Kz(i,r[s])})]}})})},e.prototype.withAgeAndGender=function(){return new $R(this,this.input)},e})(f5),VR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r;return wt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,jR(n,this.input,function(a){return to.faceExpressionNet.predictExpressions(a)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,Kz(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new qR(this,this.input)},e})(f5),HR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new XR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new YR(this,this.input)},e})(WR),GR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new KR(this,this.input)},e.prototype.withFaceDescriptor=function(){return new QR(this,this.input)},e})(VR),h5=(function(t){At(e,t);function e(n,r,o){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=o,a}return e})(mm),$R=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o=this;return wt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,ob(n,this.input,function(i){return xt(o,void 0,void 0,function(){return wt(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return to.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(i,s){var u=r[s],l=u.age,d=u.gender,f=u.genderProbability;return c5(d5(i,d,f),l)})]}})})},e.prototype.withFaceExpressions=function(){return new WR(this,this.input)},e})(h5),qR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o,a,i;return wt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,jR(n,this.input,function(u){return to.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),o=r.age,a=r.gender,i=r.genderProbability,[2,c5(d5(n,a,i),o)]}})})},e.prototype.withFaceExpressions=function(){return new VR(this,this.input)},e})(h5),XR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new HR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new YR(this,this.input)},e})($R),KR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new GR(this,this.input)},e.prototype.withFaceDescriptor=function(){return new QR(this,this.input)},e})(qR),p5=(function(t){At(e,t);function e(n,r){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o}return e})(mm),YR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r;return wt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,ob(n,this.input,function(a){return Promise.all(a.map(function(i){return to.faceRecognitionNet.computeFaceDescriptor(i)}))},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(a,i){return o5(n[i],a)})]}})})},e.prototype.withFaceExpressions=function(){return new HR(this,this.input)},e.prototype.withAgeAndGender=function(){return new XR(this,this.input)},e})(p5),QR=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r;return wt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,jR(n,this.input,function(a){return to.faceRecognitionNet.computeFaceDescriptor(a)},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,o5(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new GR(this,this.input)},e.prototype.withAgeAndGender=function(){return new KR(this,this.input)},e})(p5),m5=(function(t){At(e,t);function e(n,r,o){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.useTinyLandmarkNet=o,a}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?to.faceLandmark68TinyNet:to.faceLandmark68Net},enumerable:!0,configurable:!0}),e})(mm),ASe=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o,a,i,s=this;return wt(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof We?[4,BR(this.input,r)]:[3,3];case 2:return a=u.sent(),[3,5];case 3:return[4,FR(this.input,r)];case 4:a=u.sent(),u.label=5;case 5:return o=a,[4,Promise.all(o.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return i=u.sent(),o.forEach(function(l){return l instanceof We&&l.dispose()}),[2,n.map(function(l,d){return nb(l,i[d])})]}})})},e.prototype.withFaceExpressions=function(){return new HR(this,this.input)},e.prototype.withAgeAndGender=function(){return new XR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new YR(this,this.input)},e})(m5),NSe=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o,a,i;return wt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof We?[4,BR(this.input,[r])]:[3,3]):[2];case 2:return a=s.sent(),[3,5];case 3:return[4,FR(this.input,[r])];case 4:a=s.sent(),s.label=5;case 5:return o=a,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return i=s.sent(),o.forEach(function(u){return u instanceof We&&u.dispose()}),[2,nb(n,i)]}})})},e.prototype.withFaceExpressions=function(){return new GR(this,this.input)},e.prototype.withAgeAndGender=function(){return new KR(this,this.input)},e.prototype.withFaceDescriptor=function(){return new QR(this,this.input)},e})(m5),v5=(function(t){At(e,t);function e(n,r){r===void 0&&(r=new rb);var o=t.call(this)||this;return o.input=n,o.options=r,o}return e})(mm),g5=(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o,a;return wt(this,function(i){switch(i.label){case 0:return n=this,r=n.input,o=n.options,o instanceof a5?[4,to.mtcnn.forward(r,o)]:[3,2];case 1:return[2,i.sent().map(function(s){return s.detection})];case 2:if(a=o instanceof s5?function(s){return to.tinyFaceDetector.locateFaces(s,o)}:o instanceof rb?function(s){return to.ssdMobilenetv1.locateFaces(s,o)}:o instanceof MR?function(s){return to.tinyYolov2.locateFaces(s,o)}:null,!a)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,a(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return xt(n,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return o=a.sent(),[2,r(o.map(function(i){return Tp({},i)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new ASe(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new WR(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new $R(this.runAndExtendWithFaceDetections(),this.input)},e})(v5);(function(t){At(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r;return wt(this,function(o){switch(o.label){case 0:return[4,new g5(this.input,this.options)];case 1:return n=o.sent(),r=n[0],n.forEach(function(a){a.score>r.score&&(r=a)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return xt(n,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return o=a.sent(),[2,r(o?Tp({},o):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new NSe(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new VR(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new qR(this.runAndExtendWithFaceDetection(),this.input)},e})(v5);function DSe(t,e){return e===void 0&&(e=new rb),new g5(t,e)}function kSe(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(o,a){return o-r[a]}).reduce(function(o,a){return o+Math.pow(a,2)},0))}(function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,a=function(){return"person "+o++};this._labeledDescriptors=r.map(function(i){if(i instanceof Hw)return i;if(i instanceof Float32Array)return new Hw(a(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new Hw(a(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return kSe(r,e)}).reduce(function(r,o){return r+o},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,a=r.label;return new ZM(a,n.computeMeanDistance(e,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new ZM("unknown",n.distance)},t})();function y5(t,e){var n=new Bl(e.width,e.height),r=n.width,o=n.height;if(r<=0||o<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:o}));if(Array.isArray(t))return t.map(function(s){return y5(s,{width:r,height:o})});if(PR(t)){var a=t.detection.forSize(r,o),i=t.unshiftedLandmarks.forSize(a.box.width,a.box.height);return nb(Tp(t,a),i)}return _p(t)?Tp(t,t.detection.forSize(r,o)):t instanceof ef||t instanceof Xo?t.forSize(r,o):t}var ISe=ys({},q2e,xCe);function eO(t,e,n,r,o,a,i){try{var s=t[a](i),u=s.value}catch(l){n(l);return}s.done?e(u):Promise.resolve(u).then(r,o)}function kl(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(u){eO(a,r,o,i,s,"next",u)}function s(u){eO(a,r,o,i,s,"throw",u)}i(void 0)})}}var Gw,tO;function MSe(){if(tO)return Gw;tO=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,u=typeof Av=="object"&&Av&&Av.Object===Object&&Av,l=typeof self=="object"&&self&&self.Object===Object&&self,d=u||l||Function("return this")(),f=Object.prototype,p=f.toString,m=Math.max,g=Math.min,y=function(){return d.Date.now()};function b(T,D,I){var k,M,O,F,j,G,W=0,q=!1,P=!1,U=!0;if(typeof T!="function")throw new TypeError(t);D=_(D)||0,C(I)&&(q=!!I.leading,P="maxWait"in I,O=P?m(_(I.maxWait)||0,D):O,U="trailing"in I?!!I.trailing:U);function z(oe){var fe=k,me=M;return k=M=void 0,W=oe,F=T.apply(me,fe),F}function H(oe){return W=oe,j=setTimeout(J,D),q?z(oe):F}function L(oe){var fe=oe-G,me=oe-W,Oe=D-fe;return P?g(Oe,O-me):Oe}function $(oe){var fe=oe-G,me=oe-W;return G===void 0||fe>=D||fe<0||P&&me>=O}function J(){var oe=y();if($(oe))return ne(oe);j=setTimeout(J,L(oe))}function ne(oe){return j=void 0,U&&k?z(oe):(k=M=void 0,F)}function ce(){j!==void 0&&clearTimeout(j),W=0,k=G=M=j=void 0}function be(){return j===void 0?F:ne(y())}function se(){var oe=y(),fe=$(oe);if(k=arguments,M=this,G=oe,fe){if(j===void 0)return H(G);if(P)return j=setTimeout(J,D),z(G)}return j===void 0&&(j=setTimeout(J,D)),F}return se.cancel=ce,se.flush=be,se}function C(T){var D=typeof T;return!!T&&(D=="object"||D=="function")}function S(T){return!!T&&typeof T=="object"}function E(T){return typeof T=="symbol"||S(T)&&p.call(T)==n}function _(T){if(typeof T=="number")return T;if(E(T))return e;if(C(T)){var D=typeof T.valueOf=="function"?T.valueOf():T;T=C(D)?D+"":D}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var I=a.test(T);return I||i.test(T)?s(T.slice(2),I?2:8):o.test(T)?e:+T}return Gw=b,Gw}var OSe=MSe();const PSe=tf(OSe),vd=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),FSe=t=>t===vd;var ky=(()=>/(android)/i.test(typeof navigator<"u"?navigator.userAgent:""));const Iy=(...t)=>t.map(e=>e.trim()).join(" ").trim(),BSe=/\s*\((.*?)\)\s*/g,LSe=/(\(\?:[^)]+\))\?/g,jSe=/(\(\?)?:\w+/g,zSe=/\*/g,USe=/[-{}[\]+?.,\\^$|#]/g,WSe=t=>t instanceof RegExp?new RegExp(t.source,"i"):(t=t.replace(USe,"\\$&").replace(BSe,"(?:$1)?").replace(jSe,(e,n)=>n?e:"([^\\s]+)").replace(zSe,"(.*?)").replace(LSe,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i")),VSe=(t,e)=>{if(t=t.replace(/\s+/g,"").toLowerCase(),e=e.replace(/\s+/g,"").toLowerCase(),!t.length&&!e.length)return 1;if(!t.length||!e.length)return 0;if(t===e)return 1;if(t.length===1&&e.length===1||t.length<2||e.length<2)return 0;const n=new Map;for(let o=0;o<t.length-1;o++){const a=t.substring(o,o+2),i=n.has(a)?n.get(a)+1:1;n.set(a,i)}let r=0;for(let o=0;o<e.length-1;o++){const a=e.substring(o,o+2),i=n.has(a)?n.get(a):0;i>0&&(n.set(a,i-1),r++)}return 2*r/(t.length+e.length-2)},b5=()=>typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0);class $w{setSpeechRecognition(e){const n=!!e&&(FSe(e)||b5());n&&(this.disableRecognition(),this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(n)}subscribe(e,n){this.subscribers[e]=n}unsubscribe(e){delete this.subscribers[e]}emitListeningChange(e){this.listening=e,Object.keys(this.subscribers).forEach(n=>{const{onListeningChange:r}=this.subscribers[n];r(e)})}emitMicrophoneAvailabilityChange(e){this.isMicrophoneAvailable=e,Object.keys(this.subscribers).forEach(n=>{const{onMicrophoneAvailabilityChange:r}=this.subscribers[n];r(e)})}emitTranscriptChange(e,n){Object.keys(this.subscribers).forEach(r=>{const{onTranscriptChange:o}=this.subscribers[r];o(e,n)})}emitClearTranscript(){Object.keys(this.subscribers).forEach(e=>{const{onClearTranscript:n}=this.subscribers[e];n()})}emitBrowserSupportsSpeechRecognitionChange(e){Object.keys(this.subscribers).forEach(n=>{const{onBrowserSupportsSpeechRecognitionChange:r,onBrowserSupportsContinuousListeningChange:o}=this.subscribers[n];r(e),o(e)})}disconnect(e){if(this.recognition&&this.listening)switch(e){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}disableRecognition(){this.recognition&&(this.recognition.onresult=()=>{},this.recognition.onend=()=>{},this.recognition.onerror=()=>{},this.listening&&this.stopListening())}onError(e){e&&e.error&&e.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}onRecognitionDisconnect(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}updateTranscript({results:e,resultIndex:n}){const r=n===void 0?e.length-1:n;this.interimTranscript="",this.finalTranscript="";for(let a=r;a<e.length;++a)e[a].isFinal&&(!ky()||e[a][0].confidence>0)?this.updateFinalTranscript(e[a][0].transcript):this.interimTranscript=Iy(this.interimTranscript,e[a][0].transcript);let o=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(o=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,o||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}updateFinalTranscript(e){this.finalTranscript=Iy(this.finalTranscript,e)}resetTranscript(){this.disconnect("RESET")}startListening(){return kl(function*({continuous:e=!1,language:n}={}){if(!this.recognition)return;const r=e!==this.recognition.continuous,o=n&&n!==this.recognition.lang;if((r||o)&&(this.listening&&(yield this.stopListening()),this.recognition.continuous=r?e:this.recognition.continuous,this.recognition.lang=o?n:this.recognition.lang),!this.listening){this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript());try{yield this.start(),this.emitListeningChange(!0)}catch(a){a instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1)}}}).apply(this,arguments)}abortListening(){return kl(function*(){this.disconnect("ABORT"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}stopListening(){return kl(function*(){this.disconnect("STOP"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}getRecognition(){return this.recognition}start(){return kl(function*(){this.recognition&&!this.listening&&(yield this.recognition.start(),this.listening=!0)}).call(this)}stop(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}abort(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}constructor(e){this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=()=>{},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(e),ky()&&(this.updateFinalTranscript=PSe(this.updateFinalTranscript,250,{leading:!0}))}}const x5="CLEAR_TRANSCRIPT",w5="APPEND_TRANSCRIPT",HSe=()=>({type:x5}),GSe=(t,e)=>({type:w5,payload:{interimTranscript:t,finalTranscript:e}}),$Se=(t,e)=>{switch(e.type){case x5:return{interimTranscript:"",finalTranscript:""};case w5:return{interimTranscript:e.payload.interimTranscript,finalTranscript:Iy(t.finalTranscript,e.payload.finalTranscript)};default:throw new Error}};let gd=!!vd,Ag=gd&&!ky(),is;const qSe=({transcribing:t=!0,clearTranscriptOnListen:e=!0,commands:n=[]}={})=>{const[r]=A.useState(ps.getRecognitionManager()),[o,a]=A.useState(gd),[i,s]=A.useState(Ag),[{interimTranscript:u,finalTranscript:l},d]=A.useReducer($Se,{interimTranscript:r.interimTranscript,finalTranscript:""}),[f,p]=A.useState(r.listening),[m,g]=A.useState(r.isMicrophoneAvailable),y=A.useRef(n);y.current=n;const b=()=>{d(HSe())},C=A.useCallback(()=>{r.resetTranscript(),b()},[r]),S=(k,M,O)=>{const j=(typeof k=="object"?k.toString():k).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),G=VSe(j,M);return G>=O?{command:k,commandWithoutSpecials:j,howSimilar:G,isFuzzyMatch:!0}:null},E=(k,M)=>{const F=WSe(k).exec(M);return F?{command:k,parameters:F.slice(1)}:null},_=A.useCallback((k,M)=>{y.current.forEach(({command:O,callback:F,matchInterim:j=!1,isFuzzyMatch:G=!1,fuzzyMatchingThreshold:W=.8,bestMatchOnly:q=!1})=>{const P=!M&&j?k.trim():M.trim(),z=(Array.isArray(O)?O:[O]).map(H=>G?S(H,P,W):E(H,P)).filter(H=>H);if(G&&q&&z.length>=2){z.sort((J,ne)=>ne.howSimilar-J.howSimilar);const{command:H,commandWithoutSpecials:L,howSimilar:$}=z[0];F(L,P,$,{command:H,resetTranscript:C})}else z.forEach(H=>{if(H.isFuzzyMatch){const{command:L,commandWithoutSpecials:$,howSimilar:J}=H;F($,P,J,{command:L,resetTranscript:C})}else{const{command:L,parameters:$}=H;F(...$,{command:L,resetTranscript:C})}})})},[C]),T=A.useCallback((k,M)=>{t&&d(GSe(k,M)),_(k,M)},[_,t]),D=A.useCallback(()=>{e&&b()},[e]);return A.useEffect(()=>{const k=ps.counter;ps.counter+=1;const M={onListeningChange:p,onMicrophoneAvailabilityChange:g,onTranscriptChange:T,onClearTranscript:D,onBrowserSupportsSpeechRecognitionChange:a,onBrowserSupportsContinuousListeningChange:s};return r.subscribe(k,M),()=>{r.unsubscribe(k)}},[t,e,r,T,D]),{transcript:Iy(l,u),interimTranscript:u,finalTranscript:l,listening:f,isMicrophoneAvailable:m,resetTranscript:C,browserSupportsSpeechRecognition:o,browserSupportsContinuousListening:i}},ps={counter:0,applyPolyfill:t=>{is?is.setSpeechRecognition(t):is=new $w(t);const e=!!t&&b5();gd=e,Ag=e},removePolyfill:()=>{is?is.setSpeechRecognition(vd):is=new $w(vd),gd=!!vd,Ag=gd&&!ky()},getRecognitionManager:()=>(is||(is=new $w(vd)),is),getRecognition:()=>ps.getRecognitionManager().getRecognition(),startListening:({continuous:t,language:e}={})=>kl(function*(){yield ps.getRecognitionManager().startListening({continuous:t,language:e})})(),stopListening:()=>kl(function*(){yield ps.getRecognitionManager().stopListening()})(),abortListening:()=>kl(function*(){yield ps.getRecognitionManager().abortListening()})(),browserSupportsSpeechRecognition:()=>gd,browserSupportsContinuousListening:()=>Ag};function XSe(){const{jotformId:t}=_C(),[e]=uV(),n=Gr(),r=e.get("course"),[o,a]=A.useState("setup"),[i,s]=A.useState(0),[u,l]=A.useState(!1),[d,f]=A.useState(null),[p,m]=A.useState(!1),[g,y]=A.useState(null),[b,C]=A.useState(null),[S,E]=A.useState(null),[_,T]=A.useState(!1),[D,I]=A.useState(null),[k,M]=A.useState(null),[O,F]=A.useState(null),[j,G]=A.useState([]),[W,q]=A.useState(null),[P,U]=A.useState([]),[z,H]=A.useState(!1),[L,$]=A.useState(!1),[J,ne]=A.useState(!0),[ce,be]=A.useState(!1),[se,oe]=A.useState(!1),[fe,me]=A.useState(!1),[Oe,Be]=A.useState(!1),{transcript:Le,listening:De,resetTranscript:$e,browserSupportsSpeechRecognition:et}=qSe(),ot=A.useRef(null),Ie=A.useRef(null),Me=A.useRef(null),Fe=A.useRef(null),Ke=A.useRef(null),ct=A.useRef("");A.useEffect(()=>{ct.current=Le},[Le]);const qe={width:640,height:480,facingMode:"user"},Xe={width:220,height:165,facingMode:"user",frameRate:30};A.useEffect(()=>((async()=>{try{const Ft="/models";await Promise.all([to.tinyFaceDetector.loadFromUri(Ft),to.faceLandmark68Net.loadFromUri(Ft),to.faceRecognitionNet.loadFromUri(Ft)]),be(!0),console.log("Face recognition models loaded")}catch(Ft){console.error("Error loading face models:",Ft)}})(),()=>{Ke.current&&Ke.current.getTracks().forEach(Ft=>Ft.stop()),document.removeEventListener("fullscreenchange",Mr)}),[]),A.useEffect(()=>{if(ce&&o==="exam"){const Ft=setInterval(async()=>{if(Ie.current&&Ie.current.video&&Ie.current.video.readyState===4){const kt=Ie.current.video,Bt=Me.current;if(Bt){const sn=await DSe(kt,new s5({inputSize:224,scoreThreshold:.5}));Bt.getContext("2d").clearRect(0,0,Bt.width,Bt.height);const Jt=await Wt(kt);Be(Jt<50),sn.length===0?(oe(!1),me(!1)):sn.length>1?(oe(!0),me(!0)):(oe(!0),me(!1));const Ui=y5(sn,{width:kt.videoWidth,height:kt.videoHeight});Bt.width=kt.videoWidth,Bt.height=kt.videoHeight,ISe.drawDetections(Bt,Ui)}}},2e3);return()=>clearInterval(Ft)}},[ce,o,Oe]);const Wt=async mt=>{const Ft=document.createElement("canvas"),kt=Ft.getContext("2d");Ft.width=mt.videoWidth,Ft.height=mt.videoHeight,kt.drawImage(mt,0,0);const sn=kt.getImageData(0,0,Ft.width,Ft.height).data;let un=0;for(let Jt=0;Jt<sn.length;Jt+=4)un+=(sn[Jt]+sn[Jt+1]+sn[Jt+2])/3;return un/(sn.length/4)},je=mt=>{l(!0),Ke.current=mt,f(null)},He=mt=>{f(mt.message),l(!1)},it=()=>{if(ot.current){const mt=ot.current.getScreenshot();mt&&(y(mt),m(!0))}},zt=()=>{y(null),m(!1)},Pt=async()=>{try{T(!0),I(null);const Ft=(await lt.get("http://localhost:8081/api/jotforms",{withCredentials:!0})).data.find(kt=>kt.jotformName===t);if(Ft){C(Ft);let kt=null;for(const Bt of Ft.pages){for(const sn of Bt.elements)if(sn.tagName==="randominteger"){kt=parseInt(sn.content);break}if(kt)break}if(kt){M(kt);const Bt=Math.floor(Math.random()*kt)+1;F(Bt);const sn=Ft.pages.map(un=>{const Jt=un.elements.filter(ei=>ei.tagName==="paragraph").sort((ei,kf)=>ei.sequence-kf.sequence),Ui=un.elements.find(ei=>ei.tagName==="videorecording"),cc=Jt[Bt-1];return{pageNumber:un.page,selectedParagraph:cc||null,hasVideoRecording:!!Ui,totalParagraphs:Jt.length}});G(sn),s(0),E({title:Ft.title||`Assignment - ${r}`,pages:sn,randomNumber:Bt,...Ft})}else throw new Error("No randominteger element found in the form")}else throw new Error(`No jotform found with name: ${t}`);T(!1)}catch(mt){I(mt.message),T(!1)}},Hn=()=>{i<j.length-1&&s(i+1)},Qt=()=>ne(!J),gn=()=>{document.documentElement.requestFullscreen&&(document.documentElement.requestFullscreen(),H(!0),$(!0),document.addEventListener("fullscreenchange",Mr))},Mr=()=>{document.fullscreenElement||(H(!1),bn.show({title:"Warning: Fullscreen Exited",message:"Exiting fullscreen mode may be flagged.",color:"orange"}))},qr=async()=>{if(Ke.current&&!W)try{$e(),ps.startListening({continuous:!0,language:"en-US"});const mt=new MediaRecorder(Ke.current,{mimeType:"video/webm; codecs=vp9,opus",audioBitsPerSecond:128e3,videoBitsPerSecond:25e5}),Ft=[];mt.ondataavailable=kt=>{kt.data&&kt.data.size>0&&Ft.push(kt.data)},mt.onstop=()=>{ps.stopListening();const kt=new Blob(Ft,{type:"video/webm"}),Bt=URL.createObjectURL(kt),sn=j[i],un={id:Date.now(),blob:kt,url:Bt,pageNumber:i+1,questionText:sn.selectedParagraph?.content||"No question text",transcript:ct.current,timestamp:new Date().toISOString(),randomQuestionNumber:O};U(Jt=>[...Jt,un]),q(null),bn.show({title:"Recording Saved",message:`Answer for page ${i+1} recorded.`,color:"green"})},Fe.current=mt,mt.start(),q({startTime:Date.now(),pageNumber:i+1}),bn.show({title:"Recording Started",message:"Speak your answer now...",color:"blue"})}catch{bn.show({title:"Recording Failed",message:"Could not start recording.",color:"red"})}},nr=()=>{Fe.current&&W&&Fe.current.stop()},Da=mt=>{const Ft=mt.split(","),kt=Ft[0].match(/:(.*?);/)[1],Bt=atob(Ft[1]);let sn=Bt.length;const un=new Uint8Array(sn);for(;sn--;)un[sn]=Bt.charCodeAt(sn);return new Blob([un],{type:kt})},Tn=async()=>{try{const kt={jotformId:t,username:"rahul",userId:"user101",warnings:[`MultipleFaces Detected: ${fe}`,`Lighting Issue: ${Oe}`],answers:P.map(un=>({questionText:un.questionText,transcript:un.transcript}))},Bt=new FormData;if(Bt.append("submission",JSON.stringify(kt)),g){const un=Da(g);Bt.append("photo",un,"identity-photo.jpg")}P.forEach((un,Jt)=>{Bt.append("videos",un.blob,`answer-video-${Jt+1}.webm`)}),await lt.post("http://localhost:8081/api/assignment/submit-answer",Bt,{withCredentials:!0}),a("completed")}catch(mt){console.error(" SUBMISSION ERROR:",mt.response?mt.response.data:mt.message),bn.show({title:"Submission Failed",message:mt.response?`Server Error: ${mt.response.statusText}`:"An unexpected error occurred.",color:"red"})}},Za=()=>{window.confirm("Exit assignment? Progress will be lost.")&&n(-1)};if(o==="setup")return w.jsxs(rn,{size:"md",py:"xl",children:[w.jsxs(jt,{order:2,ta:"center",mb:"xl",children:["Assignment Setup - ",r]}),w.jsxs(Zr,{shadow:"sm",padding:"lg",radius:"md",mb:"xl",children:[w.jsx(jt,{order:4,mb:"md",children:"Camera & Proctoring Setup"}),w.jsx(we,{size:"sm",color:"dimmed",mb:"md",children:"Please allow camera and microphone access."}),w.jsxs(po,{children:[w.jsx(Ge,{justify:"space-between",children:w.jsxs(Ge,{children:[w.jsx(BK,{size:20}),w.jsx(we,{children:"Camera & Microphone"}),u&&w.jsx(da,{color:"green",children:"Ready"}),d&&w.jsx(da,{color:"red",children:"Error"})]})}),d&&w.jsxs(vi,{color:"red",size:"sm",children:[w.jsx("strong",{children:"Error:"})," ",d]}),w.jsx(Io,{children:w.jsx($v,{audio:!0,ref:ot,screenshotFormat:"image/jpeg",width:300,height:200,videoConstraints:qe,onUserMedia:je,onUserMediaError:He,style:{borderRadius:8,backgroundColor:"#000",border:u?"2px solid #51cf66":"2px solid #868e96"}})})]})]}),w.jsxs(Ge,{justify:"space-between",children:[w.jsx(Ve,{variant:"outline",onClick:Za,leftSection:w.jsx(gs,{size:16}),children:"Back"}),u&&w.jsx(Ve,{onClick:()=>a("photo"),size:"lg",children:"Continue"})]})]});if(o==="photo")return w.jsxs(rn,{size:"md",py:"xl",children:[w.jsx(jt,{order:2,ta:"center",mb:"xl",children:"Identity Photo Capture"}),w.jsxs(Zr,{shadow:"sm",padding:"lg",radius:"md",mb:"xl",children:[w.jsx(jt,{order:4,mb:"md",children:"Take Your Photo"}),w.jsx(Io,{mb:"lg",children:p?w.jsxs(le,{ta:"center",children:[w.jsx(sp,{src:g,alt:"Identity",style:{width:400,height:300,borderRadius:8,marginBottom:16}}),w.jsxs(Ge,{justify:"center",children:[w.jsx(Ve,{variant:"outline",onClick:zt,children:"Retake"}),w.jsx(Ve,{onClick:()=>a("verification"),color:"green",children:"Use Photo"})]})]}):w.jsxs(le,{ta:"center",children:[w.jsx($v,{audio:!1,ref:ot,screenshotFormat:"image/jpeg",width:400,height:300,videoConstraints:qe,style:{borderRadius:8,marginBottom:16,backgroundColor:"#000"}}),w.jsx(Ve,{leftSection:w.jsx(Ug,{size:16}),onClick:it,size:"lg",disabled:!u,children:"Take Photo"})]})})]}),w.jsx(Ge,{justify:"space-between",children:w.jsx(Ve,{variant:"outline",onClick:()=>a("setup"),leftSection:w.jsx(gs,{size:16}),children:"Back"})})]});if(o==="verification")return w.jsxs(rn,{size:"md",py:"xl",children:[w.jsx(jt,{order:2,ta:"center",mb:"xl",children:"Identity Verification"}),w.jsxs(po,{children:[w.jsxs(Zr,{shadow:"sm",padding:"lg",radius:"md",children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsxs(Ge,{children:[w.jsx(Ug,{size:20}),w.jsx(we,{children:"Identity Photo"}),p&&w.jsx(da,{color:"green",children:"Captured"})]}),w.jsx(Ve,{size:"sm",variant:"outline",onClick:()=>a("photo"),children:"Change"})]}),g&&w.jsx(Io,{children:w.jsx(sp,{src:g,alt:"Identity",style:{width:200,height:150,borderRadius:8}})})]}),p&&w.jsxs(Zr,{shadow:"sm",padding:"lg",radius:"md",children:[w.jsx(vi,{color:"orange",mb:"md",children:"The exam will start in fullscreen with live monitoring. You cannot go back."}),w.jsx(Io,{children:w.jsx(Ve,{onClick:()=>{Pt(),a("exam"),setTimeout(gn,1e3)},size:"lg",color:"green",children:"Start Assignment"})})]})]}),w.jsx(Ge,{justify:"space-between",mt:"md",children:w.jsx(Ve,{variant:"outline",onClick:()=>a("photo"),leftSection:w.jsx(gs,{size:16}),children:"Back"})})]});if(o==="exam"){if(!et)return w.jsx(rn,{size:"md",py:"xl",children:w.jsx(vi,{color:"red",children:"Speech recognition not supported. Please use Chrome."})});if(_)return w.jsx(rn,{size:"xl",py:"xl",children:w.jsx(Io,{children:w.jsxs(po,{align:"center",children:[w.jsx(Jo,{}),w.jsx(we,{children:"Loading..."})]})})});if(D)return w.jsx(rn,{size:"md",py:"xl",children:w.jsxs(vi,{color:"red",children:["Error: ",D,w.jsx(Ve,{mt:"md",onClick:Pt,children:"Retry"})]})});if(!j.length)return w.jsx(rn,{size:"md",py:"xl",children:w.jsx(Io,{children:w.jsx(we,{children:"No pages to display."})})});const mt=j[i],Ft=i===j.length-1,kt=(i+1)/j.length*100;return w.jsxs(le,{children:[w.jsx("style",{children:"@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }"}),w.jsxs(le,{style:{position:"fixed",top:0,left:0,right:0,background:"#1a1a1a",color:"white",padding:"8px 16px",zIndex:1001,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsxs(Ge,{children:[w.jsx(da,{color:"red",variant:"dot",children:"MONITORING"}),w.jsx(da,{color:De?"orange":"blue",variant:"dot",children:De?"LISTENING":"READY"})]}),w.jsxs(Ge,{children:[w.jsx(da,{color:se?"green":"red",children:se?"Face OK":"No Face"}),w.jsxs(Ve,{size:"xs",variant:"subtle",onClick:Qt,children:[w.jsx(nE,{size:14})," ",J?"Hide":"Show"]}),!z&&w.jsx(Ve,{size:"xs",onClick:gn,children:"Go Fullscreen"})]})]}),J&&w.jsxs(le,{style:{position:"fixed",top:60,right:20,width:220,height:165,zIndex:1e3,border:`3px solid ${se?"#51cf66":"#ff6b6b"}`,borderRadius:12,overflow:"hidden",background:"#000"},children:[w.jsx($v,{audio:!1,ref:Ie,mirrored:!0,muted:!0,videoConstraints:Xe,style:{width:"100%",height:"100%",objectFit:"cover"}}),w.jsx("canvas",{ref:Me,style:{position:"absolute",inset:0,width:"100%",height:"100%"}}),w.jsxs(le,{style:{position:"absolute",top:8,left:8,background:"#ff4757",color:"white",padding:"4px 8px",borderRadius:4,fontSize:"11px",display:"flex",alignItems:"center",gap:4},children:[w.jsx("div",{style:{width:8,height:8,background:"white",borderRadius:"50%",animation:"pulse 2s infinite"}}),"LIVE"]}),W&&w.jsxs(le,{style:{position:"absolute",top:8,right:8,background:"#ff4757",color:"white",padding:"4px 8px",borderRadius:4,fontSize:"11px"},children:["REC ",Math.floor((Date.now()-W.startTime)/1e3),"s"]})]}),w.jsx(le,{style:{position:"fixed",top:-1e3,left:-1e3},children:w.jsx($v,{audio:!0,muted:!0,ref:ot,onUserMedia:je,videoConstraints:qe})}),w.jsxs(rn,{size:"xl",py:"md",pt:60,style:{paddingRight:J?260:20},children:[w.jsxs(jt,{order:3,mb:"md",ta:"center",children:["Assignment: ",S.title]}),w.jsxs(Zr,{shadow:"sm",p:"sm",radius:"md",mb:"lg",children:[w.jsxs(Ge,{justify:"space-between",mb:"xs",children:[w.jsx(we,{size:"sm",weight:500,children:"Progress"}),w.jsxs(we,{size:"sm",color:"dimmed",children:["Page ",i+1,"/",j.length]})]}),w.jsx(vf,{value:kt,color:"blue"})]}),w.jsxs(Zr,{shadow:"lg",p:"xl",radius:"md",mb:"lg",children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsxs(jt,{order:4,children:["Page ",mt.pageNumber]}),w.jsxs(da,{color:"blue",size:"lg",children:["Q",O,"/",mt.totalParagraphs]})]}),mt.selectedParagraph?w.jsx(we,{size:"lg",mb:"md",style:{lineHeight:1.8},children:mt.selectedParagraph.content}):w.jsx(vi,{color:"orange",children:"No question available."}),mt.hasVideoRecording&&w.jsxs(le,{children:[w.jsx(go,{my:"lg"}),w.jsx(we,{weight:600,size:"md",mb:"md",children:"Record your answer:"}),w.jsxs(le,{p:"xl",style:{border:"2px dashed #dee2e6",borderRadius:12,textAlign:"center",background:"#f8f9fa"},children:[w.jsx(cP,{size:56,color:"#868e96",style:{marginBottom:16}}),P.some(Bt=>Bt.pageNumber===i+1)&&w.jsxs(da,{color:"green",size:"lg",children:[w.jsx(v2,{size:14})," Answer Recorded"]})]}),De&&w.jsxs(le,{mt:"lg",p:"md",style:{border:"1px solid #ced4da",borderRadius:8,background:"#f1f3f5"},children:[w.jsxs(Ge,{mb:"xs",children:[w.jsx(rE,{size:16}),w.jsx(we,{size:"sm",weight:500,children:"Live Transcript..."})]}),w.jsx(we,{color:"dimmed",children:Le||"Start speaking..."})]}),w.jsx(Io,{mt:"xl",children:W?w.jsxs(Ve,{onClick:nr,color:"green",size:"xl",children:["Stop Recording (",Math.floor((Date.now()-W.startTime)/1e3),"s)"]}):w.jsx(Ve,{onClick:qr,color:"red",size:"xl",children:"Record Answer"})})]})]}),w.jsx(Zr,{shadow:"sm",p:"lg",radius:"md",style:{background:"#f8f9fa"},children:w.jsxs(Ge,{justify:"space-between",children:[w.jsxs(we,{size:"sm",color:"dimmed",children:["Page ",i+1," of ",j.length]}),Ft?w.jsx(Ve,{onClick:Tn,size:"lg",color:"green",children:"Submit Assignment"}):w.jsx(Ve,{onClick:Hn,size:"lg",color:"blue",children:"Next Page"})]})})]})]})}return o==="completed"?w.jsx(rn,{size:"md",py:"xl",children:w.jsx(Io,{children:w.jsxs(po,{align:"center",children:[w.jsx(v2,{size:64,color:"green"}),w.jsx(jt,{order:2,children:"Assignment Completed"}),w.jsx(we,{color:"dimmed",children:"Your assignment has been submitted successfully."}),w.jsx(Ve,{onClick:()=>n("/dashboard"),mt:"lg",size:"lg",children:"Return to Dashboard"})]})})}):null}function EC(){const[t,e]=A.useState(!1),[n,r]=A.useState(""),[o,a]=A.useState([]),[i,s]=A.useState(!1),[u,l]=A.useState(""),d=A.useRef(null),f=()=>{d.current?.scrollTo({top:d.current.scrollHeight,behavior:"smooth"})};A.useEffect(()=>{f()},[o]);const p=async()=>{if(!n.trim())return;const g={sender:"user",text:n};a(y=>[...y,g]),r(""),s(!0),l("");try{const b={sender:"bot",text:(await lt.post("http://localhost:8081/api/gemini/ask",n,{headers:{"Content-Type":"text/plain"},withCredentials:!0})).data};a(C=>[...C,b])}catch(y){const b=y.response?.data||y.message||"An unexpected error occurred.";l(b);const C={sender:"bot",text:"Sorry, I ran into an error. Please try again."};a(S=>[...S,C])}finally{s(!1)}},m=(g,y)=>w.jsx(Qo,{p:"sm",radius:"lg",withBorder:!0,mb:"sm",style:{backgroundColor:g.sender==="user"?"#e7f5ff":"#f8f9fa",alignSelf:g.sender==="user"?"flex-end":"flex-start",maxWidth:"80%"},children:w.jsx(we,{size:"sm",style:{whiteSpace:"pre-wrap"},children:g.text})},y);return w.jsxs(w.Fragment,{children:[w.jsx(Rn,{variant:"filled",color:"blue",size:"xl",radius:"xl",style:{position:"fixed",bottom:20,right:20,zIndex:1e3},onClick:()=>e(!0),children:w.jsx(xY,{size:24})}),w.jsx(kr,{opened:t,onClose:()=>e(!1),title:w.jsx(jt,{order:4,children:"Chat with AI Assistant"}),size:"lg",children:w.jsxs(le,{style:{display:"flex",flexDirection:"column",height:"60vh"},children:[w.jsx(Yo,{viewportRef:d,style:{flex:1,marginBottom:"1rem"},children:w.jsxs(le,{style:{display:"flex",flexDirection:"column",padding:"0 1rem"},children:[o.map(m),i&&w.jsx(Jo,{size:"sm",style:{alignSelf:"flex-start"}})]})}),w.jsxs(le,{children:[u&&w.jsx(we,{c:"red",size:"xs",mb:"xs",children:u}),w.jsx(up,{placeholder:"Ask me anything...",value:n,onChange:g=>r(g.currentTarget.value),onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),p())},autosize:!0,minRows:2,rightSection:w.jsx(Rn,{onClick:p,loading:i,size:32,radius:"xl",variant:"filled",children:w.jsx(IY,{size:18})})})]})]})})]})}function KSe(){const[t,e]=A.useState(null),[n,r]=A.useState(""),[o,a]=A.useState(""),[i,s]=A.useState(!1),[u,l]=A.useState(""),d=async()=>{if(!t){a("Please select a file first.");return}s(!0),a(`Uploading ${t.name}...`);const p=new FormData;p.append("file",t);try{const g=(await lt.post("http://localhost:8081/upload",p,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data;a(`Upload successful! File key: ${g}`),r(g)}catch(m){const g=m.response?.data||m.message||"Upload failed.";a(`Error: ${g}`)}finally{s(!1)}},f=async()=>{if(!n){a("Please upload a file or enter a key first.");return}a(`Generating URL for key: ${n}...`);try{const m=(await lt.get(`http://localhost:8081/generate-presigned-url/${n}`,{withCredentials:!0})).data;l(m),a("URL generated successfully!")}catch(p){const m=p.response?.data||p.message||"Failed to generate URL.";a(`Error: ${m}`)}};return w.jsxs(Qo,{shadow:"md",p:"xl",withBorder:!0,children:[w.jsxs(le,{maw:600,mx:"auto",children:[w.jsx(jt,{order:2,ta:"center",mb:"lg",children:"S3 File URL Generator"}),w.jsxs(le,{mb:"xl",children:[w.jsx(jt,{order:4,mb:"sm",children:"1. Upload a File"}),w.jsxs(Ge,{children:[w.jsx(Lg,{placeholder:"Select a file (video, PDF, etc.)",value:t,onChange:e,style:{flex:1},clearable:!0}),w.jsx(Ve,{onClick:d,leftSection:w.jsx(oE,{size:14}),loading:i,disabled:!t,children:"Upload"})]})]}),w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:"2. Generate URL"}),w.jsxs(Ge,{children:[w.jsx(eo,{placeholder:"File key will appear here after upload",value:n,onChange:p=>r(p.currentTarget.value),style:{flex:1}}),w.jsx(Ve,{onClick:f,leftSection:w.jsx(uP,{size:14}),disabled:!n,children:"Get URL"})]})]}),w.jsxs(le,{mt:"lg",children:[o&&w.jsx(we,{c:"dimmed",ta:"center",children:o}),u&&w.jsxs(le,{mt:"sm",children:[w.jsx(we,{fw:500,children:"Shareable URL (valid for 10 minutes):"}),w.jsx(we,{c:"blue",component:"a",href:u,target:"_blank",rel:"noopener noreferrer",style:{wordBreak:"break-all"},children:u})]})]})]}),w.jsx(EC,{})]})}const Hh="http://localhost:8081/api",YSe=()=>{const[t,e]=A.useState({}),[n,r]=A.useState([]),[o,a]=A.useState(!1),[i,s]=A.useState(!1),[u,l]=A.useState(null),d=Gr(),[f,p]=A.useState(""),[m,g]=A.useState("bl"),[y,b]=A.useState([]),C=()=>{d(-1)},S=async()=>{try{const k=await lt.get(`${Hh}/subjects`,{withCredentials:!0});e(k.data)}catch(k){console.error("Error fetching subjects:",k)}},E=async()=>{try{const k=await lt.get(`${Hh}/courses`,{withCredentials:!0});r(k.data.map(M=>({value:M.id.toString(),label:M.courseName})))}catch(k){console.error("Error fetching courses:",k)}};A.useEffect(()=>{S(),E()},[]);const _=async k=>{k.preventDefault();const M={subjectName:f,groupName:m,courseIds:y.map(O=>parseInt(O))};try{i?await lt.put(`${Hh}/subjects/${u}`,M,{withCredentials:!0}):await lt.post(`${Hh}/subjects`,M,{withCredentials:!0}),S(),a(!1),p(""),g("bl"),b([]),s(!1),l(null)}catch(O){console.error(`Error ${i?"updating":"creating"} subject:`,O)}},T=k=>{s(!0),l(k.id),p(k.subjectName),g(k.groupName),b(k.courses.map(M=>M.id.toString())),a(!0)},D=async k=>{if(window.confirm("Are you sure you want to delete this subject?"))try{await lt.delete(`${Hh}/subjects/${k}`,{withCredentials:!0}),S()}catch(M){console.error("Error deleting subject:",M)}},I={bl:"Group BL",bh:"Group BH",bm:"Group BM"};return w.jsxs(rn,{size:"lg",children:[w.jsxs(Ge,{position:"apart",mb:"xl",children:[w.jsx(jt,{order:2,children:"Subject Management"}),w.jsx(Ve,{variant:"light",color:"blue",size:"sm",leftIcon:w.jsx(gs,{size:16}),onClick:C,children:"Back"}),w.jsx(Ve,{onClick:()=>{s(!1),p(""),g("bl"),b([]),a(!0)},children:"Map Subject"})]}),Object.keys(I).map(k=>t[k]&&t[k].length>0&&w.jsxs(le,{mb:"xl",children:[w.jsx(jt,{order:3,mb:"md",children:I[k]}),w.jsx(Wu,{cols:3,spacing:"lg",children:t[k].map(M=>w.jsxs(Qo,{shadow:"sm",p:"md",withBorder:!0,children:[w.jsxs(Ge,{position:"apart",children:[w.jsx(we,{weight:500,children:M.subjectName}),w.jsxs(Ge,{children:[w.jsx(Rn,{color:"blue",onClick:()=>T(M),children:w.jsx(nY,{size:16})}),w.jsx(Rn,{color:"red",onClick:()=>D(M.id),children:w.jsx(Lp,{size:16})})]})]}),w.jsx(we,{size:"sm",color:"dimmed",mt:4,children:"Courses:"}),w.jsx(Ge,{mt:5,children:M.courses.map(O=>w.jsx(da,{variant:"light",children:O.courseName},O.id))})]},M.id))})]},k)),w.jsx(kr,{opened:o,onClose:()=>{a(!1),s(!1),p(""),g("bl"),b([]),l(null)},title:i?"Edit Subject":"Create a New Subject",children:w.jsxs("form",{onSubmit:_,children:[w.jsx(eo,{label:"Subject Name",placeholder:"Enter subject name",required:!0,value:f,onChange:k=>p(k.currentTarget.value),mb:"md"}),w.jsx(Ru,{label:"Group",required:!0,data:[{value:"bl",label:"BL Group"},{value:"bh",label:"BH Group"},{value:"bm",label:"BM Group"}],value:m,onChange:g,mb:"md"}),w.jsx(VS,{label:"Select Courses",placeholder:"Pick all courses you like",data:n,value:y,onChange:b,searchable:!0,nothingFound:"Nothing found",mb:"xl"}),w.jsx(Ve,{type:"submit",fullWidth:!0,children:i?"Update Subject":"Create Subject"})]})})]})};function QSe(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[o,a]=A.useState(!0),[i,s]=A.useState(null),[u,l]=A.useState(null),[d,f]=A.useState(null),{user:p}=A0(),m=p?.groupName??"";A.useEffect(()=>{(async()=>{a(!0),s(null);try{const _=(await lt.get("http://localhost:8081/api/subjects",{withCredentials:!0})).data[m]||[];e(_)}catch(E){s("Failed to fetch subjects. Please try again later."),console.error(E)}finally{a(!1)}})()},[m]);const g=S=>{l(S),r(S.courses||[])},y=()=>{l(null),r([]),f(null)},b=S=>{f(S)},C=()=>{f(null)};return d?w.jsx(ZF,{course:d,onBack:C}):u?w.jsxs(rn,{size:"xl",py:"xl",children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsxs(jt,{order:2,children:[u.subjectName," Courses"]}),w.jsx(Rn,{onClick:y,variant:"outline",color:"blue",children:w.jsx(tk,{style:{transform:"rotate(180deg)"}})})]}),n.length>0?w.jsx(Wu,{cols:{base:1,sm:2,md:3,lg:4},spacing:"lg",children:n.map(S=>w.jsx(eB,{course:S,onSelectCourse:b},S.id))}):w.jsxs(we,{ta:"center",c:"dimmed",children:["No courses available for ",u.subjectName,"."]})]}):w.jsxs(rn,{size:"xl",py:"xl",children:[w.jsxs(jt,{order:2,ta:"center",mb:"md",children:["Subject Catalog (",m.toUpperCase()," Group)"]}),o?w.jsxs(Ge,{justify:"center",children:[w.jsx(Jo,{}),w.jsx(we,{children:"Loading subjects..."})]}):i?w.jsx(we,{ta:"center",c:"red",children:i}):t.length>0?w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Subject Name"}),w.jsx(Re.Th,{children:"Courses"}),w.jsx(Re.Th,{children:"Action"})]})}),w.jsx(Re.Tbody,{children:t.map(S=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:S.subjectName}),w.jsx(Re.Td,{children:S.courses.length}),w.jsx(Re.Td,{children:w.jsx(Rn,{onClick:()=>g(S),variant:"filled",color:"blue",children:w.jsx(tk,{})})})]},S.id))})]}):w.jsxs(we,{ta:"center",c:"dimmed",children:["No subjects available for the ",m.toUpperCase()," group."]})]})}function JSe(){const{user:t,login:e}=A0(),n=Gr(),r=jd({initialValues:{firstName:t?.firstName||"",lastName:t?.lastName||"",phoneNumber:t?.phoneNumber||"",dateOfJoining:t?.dateOfJoining||""},validate:{firstName:a=>a.trim().length>0?null:"First name is required",lastName:a=>a.trim().length>0?null:"Last name is required",dateOfJoining:a=>a?null:"Date of joining is required"}}),o=async a=>{try{const i=await lt.put("http://localhost:8081/api/auth/profile",a,{withCredentials:!0});e(i.data),n("/subject")}catch(i){console.error("Profile update failed:",i)}};return w.jsx(rn,{size:"xs",p:"md",children:w.jsxs(Qo,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:[w.jsx(jt,{order:2,ta:"center",children:"Complete Your Profile"}),w.jsx(we,{c:"dimmed",ta:"center",mb:"xl",children:"Please fill in your details to continue."}),w.jsx("form",{onSubmit:r.onSubmit(o),children:w.jsxs(po,{children:[w.jsxs(Ge,{grow:!0,children:[w.jsx(eo,{required:!0,label:"First Name",placeholder:"Your first name",...r.getInputProps("firstName")}),w.jsx(eo,{required:!0,label:"Last Name",placeholder:"Your last name",...r.getInputProps("lastName")})]}),w.jsx(eo,{label:"Phone Number",placeholder:"Your phone number",...r.getInputProps("phoneNumber")}),w.jsx(eo,{required:!0,type:"date",label:"Date of Joining",placeholder:"Select date",...r.getInputProps("dateOfJoining")}),w.jsx(Ve,{type:"submit",mt:"md",fullWidth:!0,children:"Save and Continue"})]})})]})})}function ZSe(){const[t,e]=A.useState(0);return w.jsxs("div",{children:[w.jsx(AJ,{}),w.jsxs(MW,{children:[w.jsx(Dn,{path:"/",element:w.jsx(bZ,{})}),w.jsx(Dn,{path:"/login",element:w.jsx(oZ,{})}),w.jsx(Dn,{path:"/mapuser",element:w.jsx(BP,{})}),w.jsx(Dn,{path:"/lmsdashboard",element:w.jsx(xZ,{})}),w.jsx(Dn,{path:"/createjotform",element:w.jsx(jP,{})}),w.jsx(Dn,{path:"/jotformbuilder",element:w.jsx(zoe,{})}),w.jsx(Dn,{path:"/jotformmapping",element:w.jsx(YF,{})}),w.jsx(Dn,{path:"/coursemanagment",element:w.jsx(Uoe,{})}),w.jsx(Dn,{path:"/analyticdashboard",element:w.jsx(Voe,{})}),w.jsx(Dn,{path:"/course",element:w.jsx(rae,{})}),w.jsx(Dn,{path:"/jotformviewer",element:w.jsx(QF,{})}),w.jsx(Dn,{path:"/jotformmanagment",element:w.jsx(oae,{})}),w.jsx(Dn,{path:"/usermanagment",element:w.jsx(aae,{})}),w.jsx(Dn,{path:"/resultmanagement",element:w.jsx(iae,{})}),w.jsx(Dn,{path:"/user-results/:courseId",element:w.jsx(sae,{})}),w.jsx(Dn,{path:"/assignment-review/:courseId/:userId",element:w.jsx(uae,{})}),w.jsx(Dn,{path:"/course/:courseId/assignment",element:w.jsx(JF,{})}),w.jsx(Dn,{path:"/assignment/:jotformId",element:w.jsx(XSe,{})}),w.jsx(Dn,{path:"/fileupload",element:w.jsx(KSe,{})}),w.jsx(Dn,{path:"/chatmodal",element:w.jsx(EC,{})}),w.jsx(Dn,{path:"/subjectmanagement",element:w.jsx(YSe,{})}),w.jsx(Dn,{path:"/subject",element:w.jsx(QSe,{})}),w.jsx(Dn,{path:"/update-profile",element:w.jsx(JSe,{})})]}),w.jsx(zJ,{}),w.jsx(EC,{})]})}VU.createRoot(document.getElementById("root")).render(w.jsx(bt.StrictMode,{children:w.jsxs(rV,{children:[" ",w.jsx(zO,{children:w.jsxs(QX,{children:[w.jsx(Ts,{}),w.jsx(SJ,{children:w.jsx(ZSe,{})})]})})]})}))});export default eEe();
