var v6=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _Ce=v6(($Ce,s5)=>{function g6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u1={exports:{}},wh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN;function y6(){if(RN)return wh;RN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,a){var i=null;if(a!==void 0&&(i=""+a),o.key!==void 0&&(i=""+o.key),"key"in o){a={};for(var s in o)s!=="key"&&(a[s]=o[s])}else a=o;return o=a.ref,{$$typeof:t,type:r,key:i,ref:o!==void 0?o:null,props:a}}return wh.Fragment=e,wh.jsx=n,wh.jsxs=n,wh}var _N;function b6(){return _N||(_N=1,u1.exports=y6()),u1.exports}var w=b6(),l1={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TN;function x6(){if(TN)return Et;TN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=f&&L[f]||L["@@iterator"],typeof L=="function"?L:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function b(L,$,J){this.props=L,this.context=$,this.refs=y,this.updater=J||m}b.prototype.isReactComponent={},b.prototype.setState=function(L,$){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,$,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function S(){}S.prototype=b.prototype;function C(L,$,J){this.props=L,this.context=$,this.refs=y,this.updater=J||m}var E=C.prototype=new S;E.constructor=C,g(E,b.prototype),E.isPureReactComponent=!0;var _=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function k(L,$,J,ne,ce,be){return J=be.ref,{$$typeof:t,type:L,key:$,ref:J!==void 0?J:null,props:be}}function I(L,$){return k(L.type,$,void 0,void 0,void 0,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function O(L){var $={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(J){return $[J]})}var F=/\/+/g;function j(L,$){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):$.toString(36)}function G(){}function W(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(G,G):(L.status="pending",L.then(function($){L.status==="pending"&&(L.status="fulfilled",L.value=$)},function($){L.status==="pending"&&(L.status="rejected",L.reason=$)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function q(L,$,J,ne,ce){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var se=!1;if(L===null)se=!0;else switch(be){case"bigint":case"string":case"number":se=!0;break;case"object":switch(L.$$typeof){case t:case e:se=!0;break;case d:return se=L._init,q(se(L._payload),$,J,ne,ce)}}if(se)return ce=ce(L),se=ne===""?"."+j(L,0):ne,_(ce)?(J="",se!=null&&(J=se.replace(F,"$&/")+"/"),q(ce,$,J,"",function(ge){return ge})):ce!=null&&(M(ce)&&(ce=I(ce,J+(ce.key==null||L&&L.key===ce.key?"":(""+ce.key).replace(F,"$&/")+"/")+se)),$.push(ce)),1;se=0;var ie=ne===""?".":ne+":";if(_(L))for(var fe=0;fe<L.length;fe++)ne=L[fe],be=ie+j(ne,fe),se+=q(ne,$,J,be,ce);else if(fe=p(L),typeof fe=="function")for(L=fe.call(L),fe=0;!(ne=L.next()).done;)ne=ne.value,be=ie+j(ne,fe++),se+=q(ne,$,J,be,ce);else if(be==="object"){if(typeof L.then=="function")return q(W(L),$,J,ne,ce);throw $=String(L),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return se}function P(L,$,J){if(L==null)return L;var ne=[],ce=0;return q(L,ne,"","",function(be){return $.call(J,be,ce++)}),ne}function z(L){if(L._status===-1){var $=L._result;$=$(),$.then(function(J){(L._status===0||L._status===-1)&&(L._status=1,L._result=J)},function(J){(L._status===0||L._status===-1)&&(L._status=2,L._result=J)}),L._status===-1&&(L._status=0,L._result=$)}if(L._status===1)return L._result.default;throw L._result}var U=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function H(){}return Et.Children={map:P,forEach:function(L,$,J){P(L,function(){$.apply(this,arguments)},J)},count:function(L){var $=0;return P(L,function(){$++}),$},toArray:function(L){return P(L,function($){return $})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Et.Component=b,Et.Fragment=n,Et.Profiler=o,Et.PureComponent=C,Et.StrictMode=r,Et.Suspense=u,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Et.__COMPILER_RUNTIME={__proto__:null,c:function(L){return T.H.useMemoCache(L)}},Et.cache=function(L){return function(){return L.apply(null,arguments)}},Et.cloneElement=function(L,$,J){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ne=g({},L.props),ce=L.key,be=void 0;if($!=null)for(se in $.ref!==void 0&&(be=void 0),$.key!==void 0&&(ce=""+$.key),$)!D.call($,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&$.ref===void 0||(ne[se]=$[se]);var se=arguments.length-2;if(se===1)ne.children=J;else if(1<se){for(var ie=Array(se),fe=0;fe<se;fe++)ie[fe]=arguments[fe+2];ne.children=ie}return k(L.type,ce,void 0,void 0,be,ne)},Et.createContext=function(L){return L={$$typeof:i,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},Et.createElement=function(L,$,J){var ne,ce={},be=null;if($!=null)for(ne in $.key!==void 0&&(be=""+$.key),$)D.call($,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ce[ne]=$[ne]);var se=arguments.length-2;if(se===1)ce.children=J;else if(1<se){for(var ie=Array(se),fe=0;fe<se;fe++)ie[fe]=arguments[fe+2];ce.children=ie}if(L&&L.defaultProps)for(ne in se=L.defaultProps,se)ce[ne]===void 0&&(ce[ne]=se[ne]);return k(L,be,void 0,void 0,null,ce)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(L){return{$$typeof:s,render:L}},Et.isValidElement=M,Et.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:z}},Et.memo=function(L,$){return{$$typeof:l,type:L,compare:$===void 0?null:$}},Et.startTransition=function(L){var $=T.T,J={};T.T=J;try{var ne=L(),ce=T.S;ce!==null&&ce(J,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(H,U)}catch(be){U(be)}finally{T.T=$}},Et.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Et.use=function(L){return T.H.use(L)},Et.useActionState=function(L,$,J){return T.H.useActionState(L,$,J)},Et.useCallback=function(L,$){return T.H.useCallback(L,$)},Et.useContext=function(L){return T.H.useContext(L)},Et.useDebugValue=function(){},Et.useDeferredValue=function(L,$){return T.H.useDeferredValue(L,$)},Et.useEffect=function(L,$,J){var ne=T.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(L,$)},Et.useId=function(){return T.H.useId()},Et.useImperativeHandle=function(L,$,J){return T.H.useImperativeHandle(L,$,J)},Et.useInsertionEffect=function(L,$){return T.H.useInsertionEffect(L,$)},Et.useLayoutEffect=function(L,$){return T.H.useLayoutEffect(L,$)},Et.useMemo=function(L,$){return T.H.useMemo(L,$)},Et.useOptimistic=function(L,$){return T.H.useOptimistic(L,$)},Et.useReducer=function(L,$,J){return T.H.useReducer(L,$,J)},Et.useRef=function(L){return T.H.useRef(L)},Et.useState=function(L){return T.H.useState(L)},Et.useSyncExternalStore=function(L,$,J){return T.H.useSyncExternalStore(L,$,J)},Et.useTransition=function(){return T.H.useTransition()},Et.version="19.1.1",Et}var AN;function Cp(){return AN||(AN=1,l1.exports=x6()),l1.exports}var A=Cp();const bt=Qd(A),w6=g6({__proto__:null,default:bt},[A]);var c1={exports:{}},Sh={},d1={exports:{}},f1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN;function S6(){return NN||(NN=1,(function(t){function e(P,z){var U=P.length;P.push(z);e:for(;0<U;){var H=U-1>>>1,L=P[H];if(0<o(L,z))P[H]=z,P[U]=L,U=H;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var z=P[0],U=P.pop();if(U!==z){P[0]=U;e:for(var H=0,L=P.length,$=L>>>1;H<$;){var J=2*(H+1)-1,ne=P[J],ce=J+1,be=P[ce];if(0>o(ne,U))ce<L&&0>o(be,ne)?(P[H]=be,P[ce]=U,H=ce):(P[H]=ne,P[J]=U,H=J);else if(ce<L&&0>o(be,U))P[H]=be,P[ce]=U,H=ce;else break e}}return z}function o(P,z){var U=P.sortIndex-z.sortIndex;return U!==0?U:P.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,s=i.now();t.unstable_now=function(){return i.now()-s}}var u=[],l=[],d=1,f=null,p=3,m=!1,g=!1,y=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function _(P){for(var z=n(l);z!==null;){if(z.callback===null)r(l);else if(z.startTime<=P)r(l),z.sortIndex=z.expirationTime,e(u,z);else break;z=n(l)}}function T(P){if(y=!1,_(P),!g)if(n(u)!==null)g=!0,D||(D=!0,j());else{var z=n(l);z!==null&&q(T,z.startTime-P)}}var D=!1,k=-1,I=5,M=-1;function O(){return b?!0:!(t.unstable_now()-M<I)}function F(){if(b=!1,D){var P=t.unstable_now();M=P;var z=!0;try{e:{g=!1,y&&(y=!1,C(k),k=-1),m=!0;var U=p;try{t:{for(_(P),f=n(u);f!==null&&!(f.expirationTime>P&&O());){var H=f.callback;if(typeof H=="function"){f.callback=null,p=f.priorityLevel;var L=H(f.expirationTime<=P);if(P=t.unstable_now(),typeof L=="function"){f.callback=L,_(P),z=!0;break t}f===n(u)&&r(u),_(P)}else r(u);f=n(u)}if(f!==null)z=!0;else{var $=n(l);$!==null&&q(T,$.startTime-P),z=!1}}break e}finally{f=null,p=U,m=!1}z=void 0}}finally{z?j():D=!1}}}var j;if(typeof E=="function")j=function(){E(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=F,j=function(){W.postMessage(null)}}else j=function(){S(F,0)};function q(P,z){k=S(function(){P(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var U=p;p=z;try{return P()}finally{p=U}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=p;p=P;try{return z()}finally{p=U}},t.unstable_scheduleCallback=function(P,z,U){var H=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?H+U:H):U=H,P){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=U+L,P={id:d++,callback:z,priorityLevel:P,startTime:U,expirationTime:L,sortIndex:-1},U>H?(P.sortIndex=U,e(l,P),n(u)===null&&P===n(l)&&(y?(C(k),k=-1):y=!0,q(T,U-H))):(P.sortIndex=L,e(u,P),g||m||(g=!0,D||(D=!0,j()))),P},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(P){var z=p;return function(){var U=p;p=z;try{return P.apply(this,arguments)}finally{p=U}}}})(f1)),f1}var DN;function C6(){return DN||(DN=1,d1.exports=S6()),d1.exports}var h1={exports:{}},Mr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kN;function E6(){if(kN)return Mr;kN=1;var t=Cp();function e(u){var l="https://react.dev/errors/"+u;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(u,l,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:f==null?null:""+f,children:u,containerInfo:l,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,l){if(u==="font")return"";if(typeof l=="string")return l==="use-credentials"?l:""}return Mr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mr.createPortal=function(u,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)throw Error(e(299));return a(u,l,null,d)},Mr.flushSync=function(u){var l=i.T,d=r.p;try{if(i.T=null,r.p=2,u)return u()}finally{i.T=l,r.p=d,r.d.f()}},Mr.preconnect=function(u,l){typeof u=="string"&&(l?(l=l.crossOrigin,l=typeof l=="string"?l==="use-credentials"?l:"":void 0):l=null,r.d.C(u,l))},Mr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Mr.preinit=function(u,l){if(typeof u=="string"&&l&&typeof l.as=="string"){var d=l.as,f=s(d,l.crossOrigin),p=typeof l.integrity=="string"?l.integrity:void 0,m=typeof l.fetchPriority=="string"?l.fetchPriority:void 0;d==="style"?r.d.S(u,typeof l.precedence=="string"?l.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:m}):d==="script"&&r.d.X(u,{crossOrigin:f,integrity:p,fetchPriority:m,nonce:typeof l.nonce=="string"?l.nonce:void 0})}},Mr.preinitModule=function(u,l){if(typeof u=="string")if(typeof l=="object"&&l!==null){if(l.as==null||l.as==="script"){var d=s(l.as,l.crossOrigin);r.d.M(u,{crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0})}}else l==null&&r.d.M(u)},Mr.preload=function(u,l){if(typeof u=="string"&&typeof l=="object"&&l!==null&&typeof l.as=="string"){var d=l.as,f=s(d,l.crossOrigin);r.d.L(u,d,{crossOrigin:f,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0,type:typeof l.type=="string"?l.type:void 0,fetchPriority:typeof l.fetchPriority=="string"?l.fetchPriority:void 0,referrerPolicy:typeof l.referrerPolicy=="string"?l.referrerPolicy:void 0,imageSrcSet:typeof l.imageSrcSet=="string"?l.imageSrcSet:void 0,imageSizes:typeof l.imageSizes=="string"?l.imageSizes:void 0,media:typeof l.media=="string"?l.media:void 0})}},Mr.preloadModule=function(u,l){if(typeof u=="string")if(l){var d=s(l.as,l.crossOrigin);r.d.m(u,{as:typeof l.as=="string"&&l.as!=="script"?l.as:void 0,crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0})}else r.d.m(u)},Mr.requestFormReset=function(u){r.d.r(u)},Mr.unstable_batchedUpdates=function(u,l){return u(l)},Mr.useFormState=function(u,l,d){return i.H.useFormState(u,l,d)},Mr.useFormStatus=function(){return i.H.useHostTransitionStatus()},Mr.version="19.1.1",Mr}var IN;function KM(){if(IN)return h1.exports;IN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),h1.exports=E6(),h1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN;function R6(){if(MN)return Sh;MN=1;var t=C6(),e=Cp(),n=KM();function r(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function a(c){var h=c,v=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(v=h.return),c=h.return;while(c)}return h.tag===3?v:null}function i(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function s(c){if(a(c)!==c)throw Error(r(188))}function u(c){var h=c.alternate;if(!h){if(h=a(c),h===null)throw Error(r(188));return h!==c?null:c}for(var v=c,x=h;;){var R=v.return;if(R===null)break;var N=R.alternate;if(N===null){if(x=R.return,x!==null){v=x;continue}break}if(R.child===N.child){for(N=R.child;N;){if(N===v)return s(R),c;if(N===x)return s(R),h;N=N.sibling}throw Error(r(188))}if(v.return!==x.return)v=R,x=N;else{for(var B=!1,V=R.child;V;){if(V===v){B=!0,v=R,x=N;break}if(V===x){B=!0,x=R,v=N;break}V=V.sibling}if(!B){for(V=N.child;V;){if(V===v){B=!0,v=N,x=R;break}if(V===x){B=!0,x=N,v=R;break}V=V.sibling}if(!B)throw Error(r(189))}}if(v.alternate!==x)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?c:h}function l(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=l(c),h!==null)return h;c=c.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function j(c){return c===null||typeof c!="object"?null:(c=F&&c[F]||c["@@iterator"],typeof c=="function"?c:null)}var G=Symbol.for("react.client.reference");function W(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===G?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case g:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList";case M:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case m:return"Portal";case E:return(c.displayName||"Context")+".Provider";case C:return(c._context.displayName||"Context")+".Consumer";case _:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case k:return h=c.displayName||null,h!==null?h:W(c.type)||"Memo";case I:h=c._payload,c=c._init;try{return W(c(h))}catch{}}return null}var q=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},H=[],L=-1;function $(c){return{current:c}}function J(c){0>L||(c.current=H[L],H[L]=null,L--)}function ne(c,h){L++,H[L]=c.current,c.current=h}var ce=$(null),be=$(null),se=$(null),ie=$(null);function fe(c,h){switch(ne(se,h),ne(be,c),ne(ce,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?ZA(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=ZA(h),c=eN(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}J(ce),ne(ce,c)}function ge(){J(ce),J(be),J(se)}function Oe(c){c.memoizedState!==null&&ne(ie,c);var h=ce.current,v=eN(h,c.type);h!==v&&(ne(be,c),ne(ce,v))}function je(c){be.current===c&&(J(ce),J(be)),ie.current===c&&(J(ie),vh._currentValue=U)}var Le=Object.prototype.hasOwnProperty,ke=t.unstable_scheduleCallback,qe=t.unstable_cancelCallback,nt=t.unstable_shouldYield,it=t.unstable_requestPaint,Ie=t.unstable_now,Me=t.unstable_getCurrentPriorityLevel,Be=t.unstable_ImmediatePriority,Je=t.unstable_UserBlockingPriority,ct=t.unstable_NormalPriority,st=t.unstable_LowPriority,$e=t.unstable_IdlePriority,Wt=t.log,Fe=t.unstable_setDisableYieldValue,Ve=null,rt=null;function Lt(c){if(typeof Wt=="function"&&Fe(c),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Ve,c)}catch{}}var Ot=Math.clz32?Math.clz32:gn,Vn=Math.log,Qt=Math.LN2;function gn(c){return c>>>=0,c===0?32:31-(Vn(c)/Qt|0)|0}var kr=256,Hr=4194304;function tr(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Aa(c,h,v){var x=c.pendingLanes;if(x===0)return 0;var R=0,N=c.suspendedLanes,B=c.pingedLanes;c=c.warmLanes;var V=x&134217727;return V!==0?(x=V&~N,x!==0?R=tr(x):(B&=V,B!==0?R=tr(B):v||(v=V&~c,v!==0&&(R=tr(v))))):(V=x&~N,V!==0?R=tr(V):B!==0?R=tr(B):v||(v=x&~c,v!==0&&(R=tr(v)))),R===0?0:h!==0&&h!==R&&(h&N)===0&&(N=R&-R,v=h&-h,N>=v||N===32&&(v&4194048)!==0)?h:R}function _n(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function Qa(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var c=kr;return kr<<=1,(kr&4194048)===0&&(kr=256),c}function Pt(){var c=Hr;return Hr<<=1,(Hr&62914560)===0&&(Hr=4194304),c}function Dt(c){for(var h=[],v=0;31>v;v++)h.push(c);return h}function Ft(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function an(c,h,v,x,R,N){var B=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var V=c.entanglements,Z=c.expirationTimes,he=c.hiddenUpdates;for(v=B&~v;0<v;){var Ee=31-Ot(v),Ae=1<<Ee;V[Ee]=0,Z[Ee]=-1;var pe=he[Ee];if(pe!==null)for(he[Ee]=null,Ee=0;Ee<pe.length;Ee++){var me=pe[Ee];me!==null&&(me.lane&=-536870913)}v&=~Ae}x!==0&&sn(c,x,0),N!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=N&~(B&~h))}function sn(c,h,v){c.pendingLanes|=h,c.suspendedLanes&=~h;var x=31-Ot(h);c.entangledLanes|=h,c.entanglements[x]=c.entanglements[x]|1073741824|v&4194090}function Jt(c,h){var v=c.entangledLanes|=h;for(c=c.entanglements;v;){var x=31-Ot(v),R=1<<x;R&h|c[x]&h&&(c[x]|=h),v&=~R}}function Li(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function sc(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Ja(){var c=z.p;return c!==0?c:(c=window.event,c===void 0?32:bN(c.type))}function Rf(c,h){var v=z.p;try{return z.p=c,h()}finally{z.p=v}}var Tn=Math.random().toString(36).slice(2),On="__reactFiber$"+Tn,nr="__reactProps$"+Tn,Bs="__reactContainer$"+Tn,Ls="__reactEvents$"+Tn,_f="__reactListeners$"+Tn,fm="__reactHandles$"+Tn,Tf="__reactResources$"+Tn,qu="__reactMarker$"+Tn;function Af(c){delete c[On],delete c[nr],delete c[Ls],delete c[_f],delete c[fm]}function ji(c){var h=c[On];if(h)return h;for(var v=c.parentNode;v;){if(h=v[Bs]||v[On]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(c=oN(c);c!==null;){if(v=c[On])return v;c=oN(c)}return h}c=v,v=c.parentNode}return null}function js(c){if(c=c[On]||c[Bs]){var h=c.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return c}return null}function zs(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(r(33))}function Xt(c){var h=c[Tf];return h||(h=c[Tf]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Pn(c){c[qu]=!0}var hm=new Set,VR={};function Xu(c,h){uc(c,h),uc(c+"Capture",h)}function uc(c,h){for(VR[c]=h,c=0;c<h.length;c++)hm.add(h[c])}var u5=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),HR={},GR={};function l5(c){return Le.call(GR,c)?!0:Le.call(HR,c)?!1:u5.test(c)?GR[c]=!0:(HR[c]=!0,!1)}function pm(c,h,v){if(l5(h))if(v===null)c.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var x=h.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+v)}}function mm(c,h,v){if(v===null)c.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+v)}}function zi(c,h,v,x){if(x===null)c.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(v);return}c.setAttributeNS(h,v,""+x)}}var nb,$R;function lc(c){if(nb===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);nb=h&&h[1]||"",$R=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nb+c+$R}var rb=!1;function ob(c,h){if(!c||rb)return"";rb=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(me){var pe=me}Reflect.construct(c,[],Ae)}else{try{Ae.call()}catch(me){pe=me}c.call(Ae.prototype)}}else{try{throw Error()}catch(me){pe=me}(Ae=c())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(me){if(me&&pe&&typeof me.stack=="string")return[me.stack,pe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=x.DetermineComponentFrameRoot(),B=N[0],V=N[1];if(B&&V){var Z=B.split(`
`),he=V.split(`
`);for(R=x=0;x<Z.length&&!Z[x].includes("DetermineComponentFrameRoot");)x++;for(;R<he.length&&!he[R].includes("DetermineComponentFrameRoot");)R++;if(x===Z.length||R===he.length)for(x=Z.length-1,R=he.length-1;1<=x&&0<=R&&Z[x]!==he[R];)R--;for(;1<=x&&0<=R;x--,R--)if(Z[x]!==he[R]){if(x!==1||R!==1)do if(x--,R--,0>R||Z[x]!==he[R]){var Ee=`
`+Z[x].replace(" at new "," at ");return c.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",c.displayName)),Ee}while(1<=x&&0<=R);break}}}finally{rb=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?lc(v):""}function c5(c){switch(c.tag){case 26:case 27:case 5:return lc(c.type);case 16:return lc("Lazy");case 13:return lc("Suspense");case 19:return lc("SuspenseList");case 0:case 15:return ob(c.type,!1);case 11:return ob(c.type.render,!1);case 1:return ob(c.type,!0);case 31:return lc("Activity");default:return""}}function qR(c){try{var h="";do h+=c5(c),c=c.return;while(c);return h}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Yo(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function XR(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function d5(c){var h=XR(c)?"checked":"value",v=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),x=""+c[h];if(!c.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var R=v.get,N=v.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return R.call(this)},set:function(B){x=""+B,N.call(this,B)}}),Object.defineProperty(c,h,{enumerable:v.enumerable}),{getValue:function(){return x},setValue:function(B){x=""+B},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function vm(c){c._valueTracker||(c._valueTracker=d5(c))}function KR(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var v=h.getValue(),x="";return c&&(x=XR(c)?c.checked?"true":"false":c.value),c=x,c!==v?(h.setValue(c),!0):!1}function gm(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var f5=/[\n"\\]/g;function Qo(c){return c.replace(f5,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function ab(c,h,v,x,R,N,B,V){c.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?c.type=B:c.removeAttribute("type"),h!=null?B==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+Yo(h)):c.value!==""+Yo(h)&&(c.value=""+Yo(h)):B!=="submit"&&B!=="reset"||c.removeAttribute("value"),h!=null?ib(c,B,Yo(h)):v!=null?ib(c,B,Yo(v)):x!=null&&c.removeAttribute("value"),R==null&&N!=null&&(c.defaultChecked=!!N),R!=null&&(c.checked=R&&typeof R!="function"&&typeof R!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?c.name=""+Yo(V):c.removeAttribute("name")}function YR(c,h,v,x,R,N,B,V){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(c.type=N),h!=null||v!=null){if(!(N!=="submit"&&N!=="reset"||h!=null))return;v=v!=null?""+Yo(v):"",h=h!=null?""+Yo(h):v,V||h===c.value||(c.value=h),c.defaultValue=h}x=x??R,x=typeof x!="function"&&typeof x!="symbol"&&!!x,c.checked=V?c.checked:!!x,c.defaultChecked=!!x,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(c.name=B)}function ib(c,h,v){h==="number"&&gm(c.ownerDocument)===c||c.defaultValue===""+v||(c.defaultValue=""+v)}function cc(c,h,v,x){if(c=c.options,h){h={};for(var R=0;R<v.length;R++)h["$"+v[R]]=!0;for(v=0;v<c.length;v++)R=h.hasOwnProperty("$"+c[v].value),c[v].selected!==R&&(c[v].selected=R),R&&x&&(c[v].defaultSelected=!0)}else{for(v=""+Yo(v),h=null,R=0;R<c.length;R++){if(c[R].value===v){c[R].selected=!0,x&&(c[R].defaultSelected=!0);return}h!==null||c[R].disabled||(h=c[R])}h!==null&&(h.selected=!0)}}function QR(c,h,v){if(h!=null&&(h=""+Yo(h),h!==c.value&&(c.value=h),v==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=v!=null?""+Yo(v):""}function JR(c,h,v,x){if(h==null){if(x!=null){if(v!=null)throw Error(r(92));if(q(x)){if(1<x.length)throw Error(r(93));x=x[0]}v=x}v==null&&(v=""),h=v}v=Yo(h),c.defaultValue=v,x=c.textContent,x===v&&x!==""&&x!==null&&(c.value=x)}function dc(c,h){if(h){var v=c.firstChild;if(v&&v===c.lastChild&&v.nodeType===3){v.nodeValue=h;return}}c.textContent=h}var h5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ZR(c,h,v){var x=h.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?x?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":x?c.setProperty(h,v):typeof v!="number"||v===0||h5.has(h)?h==="float"?c.cssFloat=v:c[h]=(""+v).trim():c[h]=v+"px"}function e_(c,h,v){if(h!=null&&typeof h!="object")throw Error(r(62));if(c=c.style,v!=null){for(var x in v)!v.hasOwnProperty(x)||h!=null&&h.hasOwnProperty(x)||(x.indexOf("--")===0?c.setProperty(x,""):x==="float"?c.cssFloat="":c[x]="");for(var R in h)x=h[R],h.hasOwnProperty(R)&&v[R]!==x&&ZR(c,R,x)}else for(var N in h)h.hasOwnProperty(N)&&ZR(c,N,h[N])}function sb(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),m5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ym(c){return m5.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var ub=null;function lb(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var fc=null,hc=null;function t_(c){var h=js(c);if(h&&(c=h.stateNode)){var v=c[nr]||null;e:switch(c=h.stateNode,h.type){case"input":if(ab(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),h=v.name,v.type==="radio"&&h!=null){for(v=c;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Qo(""+h)+'"][type="radio"]'),h=0;h<v.length;h++){var x=v[h];if(x!==c&&x.form===c.form){var R=x[nr]||null;if(!R)throw Error(r(90));ab(x,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(h=0;h<v.length;h++)x=v[h],x.form===c.form&&KR(x)}break e;case"textarea":QR(c,v.value,v.defaultValue);break e;case"select":h=v.value,h!=null&&cc(c,!!v.multiple,h,!1)}}}var cb=!1;function n_(c,h,v){if(cb)return c(h,v);cb=!0;try{var x=c(h);return x}finally{if(cb=!1,(fc!==null||hc!==null)&&(rv(),fc&&(h=fc,c=hc,hc=fc=null,t_(h),c)))for(h=0;h<c.length;h++)t_(c[h])}}function Nf(c,h){var v=c.stateNode;if(v===null)return null;var x=v[nr]||null;if(x===null)return null;v=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(c=c.type,x=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!x;break e;default:c=!1}if(c)return null;if(v&&typeof v!="function")throw Error(r(231,h,typeof v));return v}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),db=!1;if(Ui)try{var Df={};Object.defineProperty(Df,"passive",{get:function(){db=!0}}),window.addEventListener("test",Df,Df),window.removeEventListener("test",Df,Df)}catch{db=!1}var Us=null,fb=null,bm=null;function r_(){if(bm)return bm;var c,h=fb,v=h.length,x,R="value"in Us?Us.value:Us.textContent,N=R.length;for(c=0;c<v&&h[c]===R[c];c++);var B=v-c;for(x=1;x<=B&&h[v-x]===R[N-x];x++);return bm=R.slice(c,1<x?1-x:void 0)}function xm(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function wm(){return!0}function o_(){return!1}function oo(c){function h(v,x,R,N,B){this._reactName=v,this._targetInst=R,this.type=x,this.nativeEvent=N,this.target=B,this.currentTarget=null;for(var V in c)c.hasOwnProperty(V)&&(v=c[V],this[V]=v?v(N):N[V]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?wm:o_,this.isPropagationStopped=o_,this}return d(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=wm)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=wm)},persist:function(){},isPersistent:wm}),h}var Ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sm=oo(Ku),kf=d({},Ku,{view:0,detail:0}),v5=oo(kf),hb,pb,If,Cm=d({},kf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vb,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==If&&(If&&c.type==="mousemove"?(hb=c.screenX-If.screenX,pb=c.screenY-If.screenY):pb=hb=0,If=c),hb)},movementY:function(c){return"movementY"in c?c.movementY:pb}}),a_=oo(Cm),g5=d({},Cm,{dataTransfer:0}),y5=oo(g5),b5=d({},kf,{relatedTarget:0}),mb=oo(b5),x5=d({},Ku,{animationName:0,elapsedTime:0,pseudoElement:0}),w5=oo(x5),S5=d({},Ku,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),C5=oo(S5),E5=d({},Ku,{data:0}),i_=oo(E5),R5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A5(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=T5[c])?!!h[c]:!1}function vb(){return A5}var N5=d({},kf,{key:function(c){if(c.key){var h=R5[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=xm(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?_5[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vb,charCode:function(c){return c.type==="keypress"?xm(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?xm(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),D5=oo(N5),k5=d({},Cm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s_=oo(k5),I5=d({},kf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vb}),M5=oo(I5),O5=d({},Ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),P5=oo(O5),F5=d({},Cm,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),B5=oo(F5),L5=d({},Ku,{newState:0,oldState:0}),j5=oo(L5),z5=[9,13,27,32],gb=Ui&&"CompositionEvent"in window,Mf=null;Ui&&"documentMode"in document&&(Mf=document.documentMode);var U5=Ui&&"TextEvent"in window&&!Mf,u_=Ui&&(!gb||Mf&&8<Mf&&11>=Mf),l_=" ",c_=!1;function d_(c,h){switch(c){case"keyup":return z5.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f_(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var pc=!1;function W5(c,h){switch(c){case"compositionend":return f_(h);case"keypress":return h.which!==32?null:(c_=!0,l_);case"textInput":return c=h.data,c===l_&&c_?null:c;default:return null}}function V5(c,h){if(pc)return c==="compositionend"||!gb&&d_(c,h)?(c=r_(),bm=fb=Us=null,pc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return u_&&h.locale!=="ko"?null:h.data;default:return null}}var H5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h_(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!H5[c.type]:h==="textarea"}function p_(c,h,v,x){fc?hc?hc.push(x):hc=[x]:fc=x,h=lv(h,"onChange"),0<h.length&&(v=new Sm("onChange","change",null,v,x),c.push({event:v,listeners:h}))}var Of=null,Pf=null;function G5(c){XA(c,0)}function Em(c){var h=zs(c);if(KR(h))return c}function m_(c,h){if(c==="change")return h}var v_=!1;if(Ui){var yb;if(Ui){var bb="oninput"in document;if(!bb){var g_=document.createElement("div");g_.setAttribute("oninput","return;"),bb=typeof g_.oninput=="function"}yb=bb}else yb=!1;v_=yb&&(!document.documentMode||9<document.documentMode)}function y_(){Of&&(Of.detachEvent("onpropertychange",b_),Pf=Of=null)}function b_(c){if(c.propertyName==="value"&&Em(Pf)){var h=[];p_(h,Pf,c,lb(c)),n_(G5,h)}}function $5(c,h,v){c==="focusin"?(y_(),Of=h,Pf=v,Of.attachEvent("onpropertychange",b_)):c==="focusout"&&y_()}function q5(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Em(Pf)}function X5(c,h){if(c==="click")return Em(h)}function K5(c,h){if(c==="input"||c==="change")return Em(h)}function Y5(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var xo=typeof Object.is=="function"?Object.is:Y5;function Ff(c,h){if(xo(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var v=Object.keys(c),x=Object.keys(h);if(v.length!==x.length)return!1;for(x=0;x<v.length;x++){var R=v[x];if(!Le.call(h,R)||!xo(c[R],h[R]))return!1}return!0}function x_(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function w_(c,h){var v=x_(c);c=0;for(var x;v;){if(v.nodeType===3){if(x=c+v.textContent.length,c<=h&&x>=h)return{node:v,offset:h-c};c=x}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=x_(v)}}function S_(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?S_(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function C_(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=gm(c.document);h instanceof c.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)c=h.contentWindow;else break;h=gm(c.document)}return h}function xb(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var Q5=Ui&&"documentMode"in document&&11>=document.documentMode,mc=null,wb=null,Bf=null,Sb=!1;function E_(c,h,v){var x=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Sb||mc==null||mc!==gm(x)||(x=mc,"selectionStart"in x&&xb(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Bf&&Ff(Bf,x)||(Bf=x,x=lv(wb,"onSelect"),0<x.length&&(h=new Sm("onSelect","select",null,h,v),c.push({event:h,listeners:x}),h.target=mc)))}function Yu(c,h){var v={};return v[c.toLowerCase()]=h.toLowerCase(),v["Webkit"+c]="webkit"+h,v["Moz"+c]="moz"+h,v}var vc={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionrun:Yu("Transition","TransitionRun"),transitionstart:Yu("Transition","TransitionStart"),transitioncancel:Yu("Transition","TransitionCancel"),transitionend:Yu("Transition","TransitionEnd")},Cb={},R_={};Ui&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete vc.animationend.animation,delete vc.animationiteration.animation,delete vc.animationstart.animation),"TransitionEvent"in window||delete vc.transitionend.transition);function Qu(c){if(Cb[c])return Cb[c];if(!vc[c])return c;var h=vc[c],v;for(v in h)if(h.hasOwnProperty(v)&&v in R_)return Cb[c]=h[v];return c}var __=Qu("animationend"),T_=Qu("animationiteration"),A_=Qu("animationstart"),J5=Qu("transitionrun"),Z5=Qu("transitionstart"),eU=Qu("transitioncancel"),N_=Qu("transitionend"),D_=new Map,Eb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Eb.push("scrollEnd");function Na(c,h){D_.set(c,h),Xu(h,[c])}var k_=new WeakMap;function Jo(c,h){if(typeof c=="object"&&c!==null){var v=k_.get(c);return v!==void 0?v:(h={value:c,source:h,stack:qR(h)},k_.set(c,h),h)}return{value:c,source:h,stack:qR(h)}}var Zo=[],gc=0,Rb=0;function Rm(){for(var c=gc,h=Rb=gc=0;h<c;){var v=Zo[h];Zo[h++]=null;var x=Zo[h];Zo[h++]=null;var R=Zo[h];Zo[h++]=null;var N=Zo[h];if(Zo[h++]=null,x!==null&&R!==null){var B=x.pending;B===null?R.next=R:(R.next=B.next,B.next=R),x.pending=R}N!==0&&I_(v,R,N)}}function _m(c,h,v,x){Zo[gc++]=c,Zo[gc++]=h,Zo[gc++]=v,Zo[gc++]=x,Rb|=x,c.lanes|=x,c=c.alternate,c!==null&&(c.lanes|=x)}function _b(c,h,v,x){return _m(c,h,v,x),Tm(c)}function yc(c,h){return _m(c,null,null,h),Tm(c)}function I_(c,h,v){c.lanes|=v;var x=c.alternate;x!==null&&(x.lanes|=v);for(var R=!1,N=c.return;N!==null;)N.childLanes|=v,x=N.alternate,x!==null&&(x.childLanes|=v),N.tag===22&&(c=N.stateNode,c===null||c._visibility&1||(R=!0)),c=N,N=N.return;return c.tag===3?(N=c.stateNode,R&&h!==null&&(R=31-Ot(v),c=N.hiddenUpdates,x=c[R],x===null?c[R]=[h]:x.push(h),h.lane=v|536870912),N):null}function Tm(c){if(50<uh)throw uh=0,Ix=null,Error(r(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var bc={};function tU(c,h,v,x){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wo(c,h,v,x){return new tU(c,h,v,x)}function Tb(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Wi(c,h){var v=c.alternate;return v===null?(v=wo(c.tag,h,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=h,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&65011712,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,h=c.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function M_(c,h){c.flags&=65011714;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,h=v.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function Am(c,h,v,x,R,N){var B=0;if(x=c,typeof c=="function")Tb(c)&&(B=1);else if(typeof c=="string")B=r6(c,v,ce.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case M:return c=wo(31,v,h,R),c.elementType=M,c.lanes=N,c;case g:return Ju(v.children,R,N,h);case y:B=8,R|=24;break;case b:return c=wo(12,v,h,R|2),c.elementType=b,c.lanes=N,c;case T:return c=wo(13,v,h,R),c.elementType=T,c.lanes=N,c;case D:return c=wo(19,v,h,R),c.elementType=D,c.lanes=N,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case S:case E:B=10;break e;case C:B=9;break e;case _:B=11;break e;case k:B=14;break e;case I:B=16,x=null;break e}B=29,v=Error(r(130,c===null?"null":typeof c,"")),x=null}return h=wo(B,v,h,R),h.elementType=c,h.type=x,h.lanes=N,h}function Ju(c,h,v,x){return c=wo(7,c,x,h),c.lanes=v,c}function Ab(c,h,v){return c=wo(6,c,null,h),c.lanes=v,c}function Nb(c,h,v){return h=wo(4,c.children!==null?c.children:[],c.key,h),h.lanes=v,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var xc=[],wc=0,Nm=null,Dm=0,ea=[],ta=0,Zu=null,Vi=1,Hi="";function el(c,h){xc[wc++]=Dm,xc[wc++]=Nm,Nm=c,Dm=h}function O_(c,h,v){ea[ta++]=Vi,ea[ta++]=Hi,ea[ta++]=Zu,Zu=c;var x=Vi;c=Hi;var R=32-Ot(x)-1;x&=~(1<<R),v+=1;var N=32-Ot(h)+R;if(30<N){var B=R-R%5;N=(x&(1<<B)-1).toString(32),x>>=B,R-=B,Vi=1<<32-Ot(h)+R|v<<R|x,Hi=N+c}else Vi=1<<N|v<<R|x,Hi=c}function Db(c){c.return!==null&&(el(c,1),O_(c,1,0))}function kb(c){for(;c===Nm;)Nm=xc[--wc],xc[wc]=null,Dm=xc[--wc],xc[wc]=null;for(;c===Zu;)Zu=ea[--ta],ea[ta]=null,Hi=ea[--ta],ea[ta]=null,Vi=ea[--ta],ea[ta]=null}var Gr=null,Fn=null,Zt=!1,tl=null,Za=!1,Ib=Error(r(519));function nl(c){var h=Error(r(418,""));throw zf(Jo(h,c)),Ib}function P_(c){var h=c.stateNode,v=c.type,x=c.memoizedProps;switch(h[On]=c,h[nr]=x,v){case"dialog":It("cancel",h),It("close",h);break;case"iframe":case"object":case"embed":It("load",h);break;case"video":case"audio":for(v=0;v<ch.length;v++)It(ch[v],h);break;case"source":It("error",h);break;case"img":case"image":case"link":It("error",h),It("load",h);break;case"details":It("toggle",h);break;case"input":It("invalid",h),YR(h,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),vm(h);break;case"select":It("invalid",h);break;case"textarea":It("invalid",h),JR(h,x.value,x.defaultValue,x.children),vm(h)}v=x.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||h.textContent===""+v||x.suppressHydrationWarning===!0||JA(h.textContent,v)?(x.popover!=null&&(It("beforetoggle",h),It("toggle",h)),x.onScroll!=null&&It("scroll",h),x.onScrollEnd!=null&&It("scrollend",h),x.onClick!=null&&(h.onclick=cv),h=!0):h=!1,h||nl(c)}function F_(c){for(Gr=c.return;Gr;)switch(Gr.tag){case 5:case 13:Za=!1;return;case 27:case 3:Za=!0;return;default:Gr=Gr.return}}function Lf(c){if(c!==Gr)return!1;if(!Zt)return F_(c),Zt=!0,!1;var h=c.tag,v;if((v=h!==3&&h!==27)&&((v=h===5)&&(v=c.type,v=!(v!=="form"&&v!=="button")||Xx(c.type,c.memoizedProps)),v=!v),v&&Fn&&nl(c),F_(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8)if(v=c.data,v==="/$"){if(h===0){Fn=ka(c.nextSibling);break e}h--}else v!=="$"&&v!=="$!"&&v!=="$?"||h++;c=c.nextSibling}Fn=null}}else h===27?(h=Fn,ru(c.type)?(c=Jx,Jx=null,Fn=c):Fn=h):Fn=Gr?ka(c.stateNode.nextSibling):null;return!0}function jf(){Fn=Gr=null,Zt=!1}function B_(){var c=tl;return c!==null&&(so===null?so=c:so.push.apply(so,c),tl=null),c}function zf(c){tl===null?tl=[c]:tl.push(c)}var Mb=$(null),rl=null,Gi=null;function Ws(c,h,v){ne(Mb,h._currentValue),h._currentValue=v}function $i(c){c._currentValue=Mb.current,J(Mb)}function Ob(c,h,v){for(;c!==null;){var x=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),c===v)break;c=c.return}}function Pb(c,h,v,x){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var N=R.dependencies;if(N!==null){var B=R.child;N=N.firstContext;e:for(;N!==null;){var V=N;N=R;for(var Z=0;Z<h.length;Z++)if(V.context===h[Z]){N.lanes|=v,V=N.alternate,V!==null&&(V.lanes|=v),Ob(N.return,v,c),x||(B=null);break e}N=V.next}}else if(R.tag===18){if(B=R.return,B===null)throw Error(r(341));B.lanes|=v,N=B.alternate,N!==null&&(N.lanes|=v),Ob(B,v,c),B=null}else B=R.child;if(B!==null)B.return=R;else for(B=R;B!==null;){if(B===c){B=null;break}if(R=B.sibling,R!==null){R.return=B.return,B=R;break}B=B.return}R=B}}function Uf(c,h,v,x){c=null;for(var R=h,N=!1;R!==null;){if(!N){if((R.flags&524288)!==0)N=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var B=R.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var V=R.type;xo(R.pendingProps.value,B.value)||(c!==null?c.push(V):c=[V])}}else if(R===ie.current){if(B=R.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(vh):c=[vh])}R=R.return}c!==null&&Pb(h,c,v,x),h.flags|=262144}function km(c){for(c=c.firstContext;c!==null;){if(!xo(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function ol(c){rl=c,Gi=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Ir(c){return L_(rl,c)}function Im(c,h){return rl===null&&ol(c),L_(c,h)}function L_(c,h){var v=h._currentValue;if(h={context:h,memoizedValue:v,next:null},Gi===null){if(c===null)throw Error(r(308));Gi=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else Gi=Gi.next=h;return v}var nU=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(v,x){c.push(x)}};this.abort=function(){h.aborted=!0,c.forEach(function(v){return v()})}},rU=t.unstable_scheduleCallback,oU=t.unstable_NormalPriority,rr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fb(){return{controller:new nU,data:new Map,refCount:0}}function Wf(c){c.refCount--,c.refCount===0&&rU(oU,function(){c.controller.abort()})}var Vf=null,Bb=0,Sc=0,Cc=null;function aU(c,h){if(Vf===null){var v=Vf=[];Bb=0,Sc=jx(),Cc={status:"pending",value:void 0,then:function(x){v.push(x)}}}return Bb++,h.then(j_,j_),h}function j_(){if(--Bb===0&&Vf!==null){Cc!==null&&(Cc.status="fulfilled");var c=Vf;Vf=null,Sc=0,Cc=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function iU(c,h){var v=[],x={status:"pending",value:null,reason:null,then:function(R){v.push(R)}};return c.then(function(){x.status="fulfilled",x.value=h;for(var R=0;R<v.length;R++)(0,v[R])(h)},function(R){for(x.status="rejected",x.reason=R,R=0;R<v.length;R++)(0,v[R])(void 0)}),x}var z_=P.S;P.S=function(c,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&aU(c,h),z_!==null&&z_(c,h)};var al=$(null);function Lb(){var c=al.current;return c!==null?c:xn.pooledCache}function Mm(c,h){h===null?ne(al,al.current):ne(al,h.pool)}function U_(){var c=Lb();return c===null?null:{parent:rr._currentValue,pool:c}}var Hf=Error(r(460)),W_=Error(r(474)),Om=Error(r(542)),jb={then:function(){}};function V_(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Pm(){}function H_(c,h,v){switch(v=c[v],v===void 0?c.push(h):v!==h&&(h.then(Pm,Pm),h=v),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,$_(c),c;default:if(typeof h.status=="string")h.then(Pm,Pm);else{if(c=xn,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=h,c.status="pending",c.then(function(x){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=x}},function(x){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,$_(c),c}throw Gf=h,Hf}}var Gf=null;function G_(){if(Gf===null)throw Error(r(459));var c=Gf;return Gf=null,c}function $_(c){if(c===Hf||c===Om)throw Error(r(483))}var Vs=!1;function zb(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ub(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Hs(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Gs(c,h,v){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,(un&2)!==0){var R=x.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),x.pending=h,h=Tm(c),I_(c,null,v),h}return _m(c,x,h,v),Tm(c)}function $f(c,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194048)!==0)){var x=h.lanes;x&=c.pendingLanes,v|=x,h.lanes=v,Jt(c,v)}}function Wb(c,h){var v=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,v===x)){var R=null,N=null;if(v=v.firstBaseUpdate,v!==null){do{var B={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};N===null?R=N=B:N=N.next=B,v=v.next}while(v!==null);N===null?R=N=h:N=N.next=h}else R=N=h;v={baseState:x.baseState,firstBaseUpdate:R,lastBaseUpdate:N,shared:x.shared,callbacks:x.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=h:c.next=h,v.lastBaseUpdate=h}var Vb=!1;function qf(){if(Vb){var c=Cc;if(c!==null)throw c}}function Xf(c,h,v,x){Vb=!1;var R=c.updateQueue;Vs=!1;var N=R.firstBaseUpdate,B=R.lastBaseUpdate,V=R.shared.pending;if(V!==null){R.shared.pending=null;var Z=V,he=Z.next;Z.next=null,B===null?N=he:B.next=he,B=Z;var Ee=c.alternate;Ee!==null&&(Ee=Ee.updateQueue,V=Ee.lastBaseUpdate,V!==B&&(V===null?Ee.firstBaseUpdate=he:V.next=he,Ee.lastBaseUpdate=Z))}if(N!==null){var Ae=R.baseState;B=0,Ee=he=Z=null,V=N;do{var pe=V.lane&-536870913,me=pe!==V.lane;if(me?(Vt&pe)===pe:(x&pe)===pe){pe!==0&&pe===Sc&&(Vb=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var vt=c,ht=V;pe=h;var hn=v;switch(ht.tag){case 1:if(vt=ht.payload,typeof vt=="function"){Ae=vt.call(hn,Ae,pe);break e}Ae=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=ht.payload,pe=typeof vt=="function"?vt.call(hn,Ae,pe):vt,pe==null)break e;Ae=d({},Ae,pe);break e;case 2:Vs=!0}}pe=V.callback,pe!==null&&(c.flags|=64,me&&(c.flags|=8192),me=R.callbacks,me===null?R.callbacks=[pe]:me.push(pe))}else me={lane:pe,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ee===null?(he=Ee=me,Z=Ae):Ee=Ee.next=me,B|=pe;if(V=V.next,V===null){if(V=R.shared.pending,V===null)break;me=V,V=me.next,me.next=null,R.lastBaseUpdate=me,R.shared.pending=null}}while(!0);Ee===null&&(Z=Ae),R.baseState=Z,R.firstBaseUpdate=he,R.lastBaseUpdate=Ee,N===null&&(R.shared.lanes=0),Zs|=B,c.lanes=B,c.memoizedState=Ae}}function q_(c,h){if(typeof c!="function")throw Error(r(191,c));c.call(h)}function X_(c,h){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)q_(v[c],h)}var Ec=$(null),Fm=$(0);function K_(c,h){c=Zi,ne(Fm,c),ne(Ec,h),Zi=c|h.baseLanes}function Hb(){ne(Fm,Zi),ne(Ec,Ec.current)}function Gb(){Zi=Fm.current,J(Ec),J(Fm)}var $s=0,At=null,dn=null,Xn=null,Bm=!1,Rc=!1,il=!1,Lm=0,Kf=0,_c=null,sU=0;function Hn(){throw Error(r(321))}function $b(c,h){if(h===null)return!1;for(var v=0;v<h.length&&v<c.length;v++)if(!xo(c[v],h[v]))return!1;return!0}function qb(c,h,v,x,R,N){return $s=N,At=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,P.H=c===null||c.memoizedState===null?IT:MT,il=!1,N=v(x,R),il=!1,Rc&&(N=Q_(h,v,x,R)),Y_(c),N}function Y_(c){P.H=Hm;var h=dn!==null&&dn.next!==null;if($s=0,Xn=dn=At=null,Bm=!1,Kf=0,_c=null,h)throw Error(r(300));c===null||cr||(c=c.dependencies,c!==null&&km(c)&&(cr=!0))}function Q_(c,h,v,x){At=c;var R=0;do{if(Rc&&(_c=null),Kf=0,Rc=!1,25<=R)throw Error(r(301));if(R+=1,Xn=dn=null,c.updateQueue!=null){var N=c.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}P.H=pU,N=h(v,x)}while(Rc);return N}function uU(){var c=P.H,h=c.useState()[0];return h=typeof h.then=="function"?Yf(h):h,c=c.useState()[0],(dn!==null?dn.memoizedState:null)!==c&&(At.flags|=1024),h}function Xb(){var c=Lm!==0;return Lm=0,c}function Kb(c,h,v){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~v}function Yb(c){if(Bm){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Bm=!1}$s=0,Xn=dn=At=null,Rc=!1,Kf=Lm=0,_c=null}function ao(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xn===null?At.memoizedState=Xn=c:Xn=Xn.next=c,Xn}function Kn(){if(dn===null){var c=At.alternate;c=c!==null?c.memoizedState:null}else c=dn.next;var h=Xn===null?At.memoizedState:Xn.next;if(h!==null)Xn=h,dn=c;else{if(c===null)throw At.alternate===null?Error(r(467)):Error(r(310));dn=c,c={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},Xn===null?At.memoizedState=Xn=c:Xn=Xn.next=c}return Xn}function Qb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yf(c){var h=Kf;return Kf+=1,_c===null&&(_c=[]),c=H_(_c,c,h),h=At,(Xn===null?h.memoizedState:Xn.next)===null&&(h=h.alternate,P.H=h===null||h.memoizedState===null?IT:MT),c}function jm(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Yf(c);if(c.$$typeof===E)return Ir(c)}throw Error(r(438,String(c)))}function Jb(c){var h=null,v=At.updateQueue;if(v!==null&&(h=v.memoCache),h==null){var x=At.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),v===null&&(v=Qb(),At.updateQueue=v),v.memoCache=h,v=h.data[h.index],v===void 0)for(v=h.data[h.index]=Array(c),x=0;x<c;x++)v[x]=O;return h.index++,v}function qi(c,h){return typeof h=="function"?h(c):h}function zm(c){var h=Kn();return Zb(h,dn,c)}function Zb(c,h,v){var x=c.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=v;var R=c.baseQueue,N=x.pending;if(N!==null){if(R!==null){var B=R.next;R.next=N.next,N.next=B}h.baseQueue=R=N,x.pending=null}if(N=c.baseState,R===null)c.memoizedState=N;else{h=R.next;var V=B=null,Z=null,he=h,Ee=!1;do{var Ae=he.lane&-536870913;if(Ae!==he.lane?(Vt&Ae)===Ae:($s&Ae)===Ae){var pe=he.revertLane;if(pe===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ae===Sc&&(Ee=!0);else if(($s&pe)===pe){he=he.next,pe===Sc&&(Ee=!0);continue}else Ae={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(V=Z=Ae,B=N):Z=Z.next=Ae,At.lanes|=pe,Zs|=pe;Ae=he.action,il&&v(N,Ae),N=he.hasEagerState?he.eagerState:v(N,Ae)}else pe={lane:Ae,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(V=Z=pe,B=N):Z=Z.next=pe,At.lanes|=Ae,Zs|=Ae;he=he.next}while(he!==null&&he!==h);if(Z===null?B=N:Z.next=V,!xo(N,c.memoizedState)&&(cr=!0,Ee&&(v=Cc,v!==null)))throw v;c.memoizedState=N,c.baseState=B,c.baseQueue=Z,x.lastRenderedState=N}return R===null&&(x.lanes=0),[c.memoizedState,x.dispatch]}function ex(c){var h=Kn(),v=h.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=c;var x=v.dispatch,R=v.pending,N=h.memoizedState;if(R!==null){v.pending=null;var B=R=R.next;do N=c(N,B.action),B=B.next;while(B!==R);xo(N,h.memoizedState)||(cr=!0),h.memoizedState=N,h.baseQueue===null&&(h.baseState=N),v.lastRenderedState=N}return[N,x]}function J_(c,h,v){var x=At,R=Kn(),N=Zt;if(N){if(v===void 0)throw Error(r(407));v=v()}else v=h();var B=!xo((dn||R).memoizedState,v);B&&(R.memoizedState=v,cr=!0),R=R.queue;var V=tT.bind(null,x,R,c);if(Qf(2048,8,V,[c]),R.getSnapshot!==h||B||Xn!==null&&Xn.memoizedState.tag&1){if(x.flags|=2048,Tc(9,Um(),eT.bind(null,x,R,v,h),null),xn===null)throw Error(r(349));N||($s&124)!==0||Z_(x,h,v)}return v}function Z_(c,h,v){c.flags|=16384,c={getSnapshot:h,value:v},h=At.updateQueue,h===null?(h=Qb(),At.updateQueue=h,h.stores=[c]):(v=h.stores,v===null?h.stores=[c]:v.push(c))}function eT(c,h,v,x){h.value=v,h.getSnapshot=x,nT(h)&&rT(c)}function tT(c,h,v){return v(function(){nT(h)&&rT(c)})}function nT(c){var h=c.getSnapshot;c=c.value;try{var v=h();return!xo(c,v)}catch{return!0}}function rT(c){var h=yc(c,2);h!==null&&_o(h,c,2)}function tx(c){var h=ao();if(typeof c=="function"){var v=c;if(c=v(),il){Lt(!0);try{v()}finally{Lt(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:c},h}function oT(c,h,v,x){return c.baseState=v,Zb(c,dn,typeof x=="function"?x:qi)}function lU(c,h,v,x,R){if(Vm(c))throw Error(r(485));if(c=h.action,c!==null){var N={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){N.listeners.push(B)}};P.T!==null?v(!0):N.isTransition=!1,x(N),v=h.pending,v===null?(N.next=h.pending=N,aT(h,N)):(N.next=v.next,h.pending=v.next=N)}}function aT(c,h){var v=h.action,x=h.payload,R=c.state;if(h.isTransition){var N=P.T,B={};P.T=B;try{var V=v(R,x),Z=P.S;Z!==null&&Z(B,V),iT(c,h,V)}catch(he){nx(c,h,he)}finally{P.T=N}}else try{N=v(R,x),iT(c,h,N)}catch(he){nx(c,h,he)}}function iT(c,h,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(x){sT(c,h,x)},function(x){return nx(c,h,x)}):sT(c,h,v)}function sT(c,h,v){h.status="fulfilled",h.value=v,uT(h),c.state=v,h=c.pending,h!==null&&(v=h.next,v===h?c.pending=null:(v=v.next,h.next=v,aT(c,v)))}function nx(c,h,v){var x=c.pending;if(c.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=v,uT(h),h=h.next;while(h!==x)}c.action=null}function uT(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function lT(c,h){return h}function cT(c,h){if(Zt){var v=xn.formState;if(v!==null){e:{var x=At;if(Zt){if(Fn){t:{for(var R=Fn,N=Za;R.nodeType!==8;){if(!N){R=null;break t}if(R=ka(R.nextSibling),R===null){R=null;break t}}N=R.data,R=N==="F!"||N==="F"?R:null}if(R){Fn=ka(R.nextSibling),x=R.data==="F!";break e}}nl(x)}x=!1}x&&(h=v[0])}}return v=ao(),v.memoizedState=v.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lT,lastRenderedState:h},v.queue=x,v=NT.bind(null,At,x),x.dispatch=v,x=tx(!1),N=sx.bind(null,At,!1,x.queue),x=ao(),R={state:h,dispatch:null,action:c,pending:null},x.queue=R,v=lU.bind(null,At,R,N,v),R.dispatch=v,x.memoizedState=c,[h,v,!1]}function dT(c){var h=Kn();return fT(h,dn,c)}function fT(c,h,v){if(h=Zb(c,h,lT)[0],c=zm(qi)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var x=Yf(h)}catch(B){throw B===Hf?Om:B}else x=h;h=Kn();var R=h.queue,N=R.dispatch;return v!==h.memoizedState&&(At.flags|=2048,Tc(9,Um(),cU.bind(null,R,v),null)),[x,N,c]}function cU(c,h){c.action=h}function hT(c){var h=Kn(),v=dn;if(v!==null)return fT(h,v,c);Kn(),h=h.memoizedState,v=Kn();var x=v.queue.dispatch;return v.memoizedState=c,[h,x,!1]}function Tc(c,h,v,x){return c={tag:c,create:v,deps:x,inst:h,next:null},h=At.updateQueue,h===null&&(h=Qb(),At.updateQueue=h),v=h.lastEffect,v===null?h.lastEffect=c.next=c:(x=v.next,v.next=c,c.next=x,h.lastEffect=c),c}function Um(){return{destroy:void 0,resource:void 0}}function pT(){return Kn().memoizedState}function Wm(c,h,v,x){var R=ao();x=x===void 0?null:x,At.flags|=c,R.memoizedState=Tc(1|h,Um(),v,x)}function Qf(c,h,v,x){var R=Kn();x=x===void 0?null:x;var N=R.memoizedState.inst;dn!==null&&x!==null&&$b(x,dn.memoizedState.deps)?R.memoizedState=Tc(h,N,v,x):(At.flags|=c,R.memoizedState=Tc(1|h,N,v,x))}function mT(c,h){Wm(8390656,8,c,h)}function vT(c,h){Qf(2048,8,c,h)}function gT(c,h){return Qf(4,2,c,h)}function yT(c,h){return Qf(4,4,c,h)}function bT(c,h){if(typeof h=="function"){c=c();var v=h(c);return function(){typeof v=="function"?v():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function xT(c,h,v){v=v!=null?v.concat([c]):null,Qf(4,4,bT.bind(null,h,c),v)}function rx(){}function wT(c,h){var v=Kn();h=h===void 0?null:h;var x=v.memoizedState;return h!==null&&$b(h,x[1])?x[0]:(v.memoizedState=[c,h],c)}function ST(c,h){var v=Kn();h=h===void 0?null:h;var x=v.memoizedState;if(h!==null&&$b(h,x[1]))return x[0];if(x=c(),il){Lt(!0);try{c()}finally{Lt(!1)}}return v.memoizedState=[x,h],x}function ox(c,h,v){return v===void 0||($s&1073741824)!==0?c.memoizedState=h:(c.memoizedState=v,c=RA(),At.lanes|=c,Zs|=c,v)}function CT(c,h,v,x){return xo(v,h)?v:Ec.current!==null?(c=ox(c,v,x),xo(c,h)||(cr=!0),c):($s&42)===0?(cr=!0,c.memoizedState=v):(c=RA(),At.lanes|=c,Zs|=c,h)}function ET(c,h,v,x,R){var N=z.p;z.p=N!==0&&8>N?N:8;var B=P.T,V={};P.T=V,sx(c,!1,h,v);try{var Z=R(),he=P.S;if(he!==null&&he(V,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ee=iU(Z,x);Jf(c,h,Ee,Ro(c))}else Jf(c,h,x,Ro(c))}catch(Ae){Jf(c,h,{then:function(){},status:"rejected",reason:Ae},Ro())}finally{z.p=N,P.T=B}}function dU(){}function ax(c,h,v,x){if(c.tag!==5)throw Error(r(476));var R=RT(c).queue;ET(c,R,h,U,v===null?dU:function(){return _T(c),v(x)})}function RT(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:U},next:null};var v={};return h.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:v},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function _T(c){var h=RT(c).next.queue;Jf(c,h,{},Ro())}function ix(){return Ir(vh)}function TT(){return Kn().memoizedState}function AT(){return Kn().memoizedState}function fU(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var v=Ro();c=Hs(v);var x=Gs(h,c,v);x!==null&&(_o(x,h,v),$f(x,h,v)),h={cache:Fb()},c.payload=h;return}h=h.return}}function hU(c,h,v){var x=Ro();v={lane:x,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Vm(c)?DT(h,v):(v=_b(c,h,v,x),v!==null&&(_o(v,c,x),kT(v,h,x)))}function NT(c,h,v){var x=Ro();Jf(c,h,v,x)}function Jf(c,h,v,x){var R={lane:x,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Vm(c))DT(h,R);else{var N=c.alternate;if(c.lanes===0&&(N===null||N.lanes===0)&&(N=h.lastRenderedReducer,N!==null))try{var B=h.lastRenderedState,V=N(B,v);if(R.hasEagerState=!0,R.eagerState=V,xo(V,B))return _m(c,h,R,0),xn===null&&Rm(),!1}catch{}finally{}if(v=_b(c,h,R,x),v!==null)return _o(v,c,x),kT(v,h,x),!0}return!1}function sx(c,h,v,x){if(x={lane:2,revertLane:jx(),action:x,hasEagerState:!1,eagerState:null,next:null},Vm(c)){if(h)throw Error(r(479))}else h=_b(c,v,x,2),h!==null&&_o(h,c,2)}function Vm(c){var h=c.alternate;return c===At||h!==null&&h===At}function DT(c,h){Rc=Bm=!0;var v=c.pending;v===null?h.next=h:(h.next=v.next,v.next=h),c.pending=h}function kT(c,h,v){if((v&4194048)!==0){var x=h.lanes;x&=c.pendingLanes,v|=x,h.lanes=v,Jt(c,v)}}var Hm={readContext:Ir,use:jm,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useLayoutEffect:Hn,useInsertionEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useSyncExternalStore:Hn,useId:Hn,useHostTransitionStatus:Hn,useFormState:Hn,useActionState:Hn,useOptimistic:Hn,useMemoCache:Hn,useCacheRefresh:Hn},IT={readContext:Ir,use:jm,useCallback:function(c,h){return ao().memoizedState=[c,h===void 0?null:h],c},useContext:Ir,useEffect:mT,useImperativeHandle:function(c,h,v){v=v!=null?v.concat([c]):null,Wm(4194308,4,bT.bind(null,h,c),v)},useLayoutEffect:function(c,h){return Wm(4194308,4,c,h)},useInsertionEffect:function(c,h){Wm(4,2,c,h)},useMemo:function(c,h){var v=ao();h=h===void 0?null:h;var x=c();if(il){Lt(!0);try{c()}finally{Lt(!1)}}return v.memoizedState=[x,h],x},useReducer:function(c,h,v){var x=ao();if(v!==void 0){var R=v(h);if(il){Lt(!0);try{v(h)}finally{Lt(!1)}}}else R=h;return x.memoizedState=x.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},x.queue=c,c=c.dispatch=hU.bind(null,At,c),[x.memoizedState,c]},useRef:function(c){var h=ao();return c={current:c},h.memoizedState=c},useState:function(c){c=tx(c);var h=c.queue,v=NT.bind(null,At,h);return h.dispatch=v,[c.memoizedState,v]},useDebugValue:rx,useDeferredValue:function(c,h){var v=ao();return ox(v,c,h)},useTransition:function(){var c=tx(!1);return c=ET.bind(null,At,c.queue,!0,!1),ao().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,v){var x=At,R=ao();if(Zt){if(v===void 0)throw Error(r(407));v=v()}else{if(v=h(),xn===null)throw Error(r(349));(Vt&124)!==0||Z_(x,h,v)}R.memoizedState=v;var N={value:v,getSnapshot:h};return R.queue=N,mT(tT.bind(null,x,N,c),[c]),x.flags|=2048,Tc(9,Um(),eT.bind(null,x,N,v,h),null),v},useId:function(){var c=ao(),h=xn.identifierPrefix;if(Zt){var v=Hi,x=Vi;v=(x&~(1<<32-Ot(x)-1)).toString(32)+v,h="«"+h+"R"+v,v=Lm++,0<v&&(h+="H"+v.toString(32)),h+="»"}else v=sU++,h="«"+h+"r"+v.toString(32)+"»";return c.memoizedState=h},useHostTransitionStatus:ix,useFormState:cT,useActionState:cT,useOptimistic:function(c){var h=ao();h.memoizedState=h.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=v,h=sx.bind(null,At,!0,v),v.dispatch=h,[c,h]},useMemoCache:Jb,useCacheRefresh:function(){return ao().memoizedState=fU.bind(null,At)}},MT={readContext:Ir,use:jm,useCallback:wT,useContext:Ir,useEffect:vT,useImperativeHandle:xT,useInsertionEffect:gT,useLayoutEffect:yT,useMemo:ST,useReducer:zm,useRef:pT,useState:function(){return zm(qi)},useDebugValue:rx,useDeferredValue:function(c,h){var v=Kn();return CT(v,dn.memoizedState,c,h)},useTransition:function(){var c=zm(qi)[0],h=Kn().memoizedState;return[typeof c=="boolean"?c:Yf(c),h]},useSyncExternalStore:J_,useId:TT,useHostTransitionStatus:ix,useFormState:dT,useActionState:dT,useOptimistic:function(c,h){var v=Kn();return oT(v,dn,c,h)},useMemoCache:Jb,useCacheRefresh:AT},pU={readContext:Ir,use:jm,useCallback:wT,useContext:Ir,useEffect:vT,useImperativeHandle:xT,useInsertionEffect:gT,useLayoutEffect:yT,useMemo:ST,useReducer:ex,useRef:pT,useState:function(){return ex(qi)},useDebugValue:rx,useDeferredValue:function(c,h){var v=Kn();return dn===null?ox(v,c,h):CT(v,dn.memoizedState,c,h)},useTransition:function(){var c=ex(qi)[0],h=Kn().memoizedState;return[typeof c=="boolean"?c:Yf(c),h]},useSyncExternalStore:J_,useId:TT,useHostTransitionStatus:ix,useFormState:hT,useActionState:hT,useOptimistic:function(c,h){var v=Kn();return dn!==null?oT(v,dn,c,h):(v.baseState=c,[c,v.queue.dispatch])},useMemoCache:Jb,useCacheRefresh:AT},Ac=null,Zf=0;function Gm(c){var h=Zf;return Zf+=1,Ac===null&&(Ac=[]),H_(Ac,c,h)}function eh(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function $m(c,h){throw h.$$typeof===f?Error(r(525)):(c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function OT(c){var h=c._init;return h(c._payload)}function PT(c){function h(ue,re){if(c){var de=ue.deletions;de===null?(ue.deletions=[re],ue.flags|=16):de.push(re)}}function v(ue,re){if(!c)return null;for(;re!==null;)h(ue,re),re=re.sibling;return null}function x(ue){for(var re=new Map;ue!==null;)ue.key!==null?re.set(ue.key,ue):re.set(ue.index,ue),ue=ue.sibling;return re}function R(ue,re){return ue=Wi(ue,re),ue.index=0,ue.sibling=null,ue}function N(ue,re,de){return ue.index=de,c?(de=ue.alternate,de!==null?(de=de.index,de<re?(ue.flags|=67108866,re):de):(ue.flags|=67108866,re)):(ue.flags|=1048576,re)}function B(ue){return c&&ue.alternate===null&&(ue.flags|=67108866),ue}function V(ue,re,de,_e){return re===null||re.tag!==6?(re=Ab(de,ue.mode,_e),re.return=ue,re):(re=R(re,de),re.return=ue,re)}function Z(ue,re,de,_e){var Xe=de.type;return Xe===g?Ee(ue,re,de.props.children,_e,de.key):re!==null&&(re.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===I&&OT(Xe)===re.type)?(re=R(re,de.props),eh(re,de),re.return=ue,re):(re=Am(de.type,de.key,de.props,null,ue.mode,_e),eh(re,de),re.return=ue,re)}function he(ue,re,de,_e){return re===null||re.tag!==4||re.stateNode.containerInfo!==de.containerInfo||re.stateNode.implementation!==de.implementation?(re=Nb(de,ue.mode,_e),re.return=ue,re):(re=R(re,de.children||[]),re.return=ue,re)}function Ee(ue,re,de,_e,Xe){return re===null||re.tag!==7?(re=Ju(de,ue.mode,_e,Xe),re.return=ue,re):(re=R(re,de),re.return=ue,re)}function Ae(ue,re,de){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=Ab(""+re,ue.mode,de),re.return=ue,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case p:return de=Am(re.type,re.key,re.props,null,ue.mode,de),eh(de,re),de.return=ue,de;case m:return re=Nb(re,ue.mode,de),re.return=ue,re;case I:var _e=re._init;return re=_e(re._payload),Ae(ue,re,de)}if(q(re)||j(re))return re=Ju(re,ue.mode,de,null),re.return=ue,re;if(typeof re.then=="function")return Ae(ue,Gm(re),de);if(re.$$typeof===E)return Ae(ue,Im(ue,re),de);$m(ue,re)}return null}function pe(ue,re,de,_e){var Xe=re!==null?re.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Xe!==null?null:V(ue,re,""+de,_e);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case p:return de.key===Xe?Z(ue,re,de,_e):null;case m:return de.key===Xe?he(ue,re,de,_e):null;case I:return Xe=de._init,de=Xe(de._payload),pe(ue,re,de,_e)}if(q(de)||j(de))return Xe!==null?null:Ee(ue,re,de,_e,null);if(typeof de.then=="function")return pe(ue,re,Gm(de),_e);if(de.$$typeof===E)return pe(ue,re,Im(ue,de),_e);$m(ue,de)}return null}function me(ue,re,de,_e,Xe){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return ue=ue.get(de)||null,V(re,ue,""+_e,Xe);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case p:return ue=ue.get(_e.key===null?de:_e.key)||null,Z(re,ue,_e,Xe);case m:return ue=ue.get(_e.key===null?de:_e.key)||null,he(re,ue,_e,Xe);case I:var Nt=_e._init;return _e=Nt(_e._payload),me(ue,re,de,_e,Xe)}if(q(_e)||j(_e))return ue=ue.get(de)||null,Ee(re,ue,_e,Xe,null);if(typeof _e.then=="function")return me(ue,re,de,Gm(_e),Xe);if(_e.$$typeof===E)return me(ue,re,de,Im(re,_e),Xe);$m(re,_e)}return null}function vt(ue,re,de,_e){for(var Xe=null,Nt=null,ot=re,pt=re=0,fr=null;ot!==null&&pt<de.length;pt++){ot.index>pt?(fr=ot,ot=null):fr=ot.sibling;var Kt=pe(ue,ot,de[pt],_e);if(Kt===null){ot===null&&(ot=fr);break}c&&ot&&Kt.alternate===null&&h(ue,ot),re=N(Kt,re,pt),Nt===null?Xe=Kt:Nt.sibling=Kt,Nt=Kt,ot=fr}if(pt===de.length)return v(ue,ot),Zt&&el(ue,pt),Xe;if(ot===null){for(;pt<de.length;pt++)ot=Ae(ue,de[pt],_e),ot!==null&&(re=N(ot,re,pt),Nt===null?Xe=ot:Nt.sibling=ot,Nt=ot);return Zt&&el(ue,pt),Xe}for(ot=x(ot);pt<de.length;pt++)fr=me(ot,ue,pt,de[pt],_e),fr!==null&&(c&&fr.alternate!==null&&ot.delete(fr.key===null?pt:fr.key),re=N(fr,re,pt),Nt===null?Xe=fr:Nt.sibling=fr,Nt=fr);return c&&ot.forEach(function(uu){return h(ue,uu)}),Zt&&el(ue,pt),Xe}function ht(ue,re,de,_e){if(de==null)throw Error(r(151));for(var Xe=null,Nt=null,ot=re,pt=re=0,fr=null,Kt=de.next();ot!==null&&!Kt.done;pt++,Kt=de.next()){ot.index>pt?(fr=ot,ot=null):fr=ot.sibling;var uu=pe(ue,ot,Kt.value,_e);if(uu===null){ot===null&&(ot=fr);break}c&&ot&&uu.alternate===null&&h(ue,ot),re=N(uu,re,pt),Nt===null?Xe=uu:Nt.sibling=uu,Nt=uu,ot=fr}if(Kt.done)return v(ue,ot),Zt&&el(ue,pt),Xe;if(ot===null){for(;!Kt.done;pt++,Kt=de.next())Kt=Ae(ue,Kt.value,_e),Kt!==null&&(re=N(Kt,re,pt),Nt===null?Xe=Kt:Nt.sibling=Kt,Nt=Kt);return Zt&&el(ue,pt),Xe}for(ot=x(ot);!Kt.done;pt++,Kt=de.next())Kt=me(ot,ue,pt,Kt.value,_e),Kt!==null&&(c&&Kt.alternate!==null&&ot.delete(Kt.key===null?pt:Kt.key),re=N(Kt,re,pt),Nt===null?Xe=Kt:Nt.sibling=Kt,Nt=Kt);return c&&ot.forEach(function(m6){return h(ue,m6)}),Zt&&el(ue,pt),Xe}function hn(ue,re,de,_e){if(typeof de=="object"&&de!==null&&de.type===g&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case p:e:{for(var Xe=de.key;re!==null;){if(re.key===Xe){if(Xe=de.type,Xe===g){if(re.tag===7){v(ue,re.sibling),_e=R(re,de.props.children),_e.return=ue,ue=_e;break e}}else if(re.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===I&&OT(Xe)===re.type){v(ue,re.sibling),_e=R(re,de.props),eh(_e,de),_e.return=ue,ue=_e;break e}v(ue,re);break}else h(ue,re);re=re.sibling}de.type===g?(_e=Ju(de.props.children,ue.mode,_e,de.key),_e.return=ue,ue=_e):(_e=Am(de.type,de.key,de.props,null,ue.mode,_e),eh(_e,de),_e.return=ue,ue=_e)}return B(ue);case m:e:{for(Xe=de.key;re!==null;){if(re.key===Xe)if(re.tag===4&&re.stateNode.containerInfo===de.containerInfo&&re.stateNode.implementation===de.implementation){v(ue,re.sibling),_e=R(re,de.children||[]),_e.return=ue,ue=_e;break e}else{v(ue,re);break}else h(ue,re);re=re.sibling}_e=Nb(de,ue.mode,_e),_e.return=ue,ue=_e}return B(ue);case I:return Xe=de._init,de=Xe(de._payload),hn(ue,re,de,_e)}if(q(de))return vt(ue,re,de,_e);if(j(de)){if(Xe=j(de),typeof Xe!="function")throw Error(r(150));return de=Xe.call(de),ht(ue,re,de,_e)}if(typeof de.then=="function")return hn(ue,re,Gm(de),_e);if(de.$$typeof===E)return hn(ue,re,Im(ue,de),_e);$m(ue,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,re!==null&&re.tag===6?(v(ue,re.sibling),_e=R(re,de),_e.return=ue,ue=_e):(v(ue,re),_e=Ab(de,ue.mode,_e),_e.return=ue,ue=_e),B(ue)):v(ue,re)}return function(ue,re,de,_e){try{Zf=0;var Xe=hn(ue,re,de,_e);return Ac=null,Xe}catch(ot){if(ot===Hf||ot===Om)throw ot;var Nt=wo(29,ot,null,ue.mode);return Nt.lanes=_e,Nt.return=ue,Nt}finally{}}}var Nc=PT(!0),FT=PT(!1),na=$(null),ei=null;function qs(c){var h=c.alternate;ne(or,or.current&1),ne(na,c),ei===null&&(h===null||Ec.current!==null||h.memoizedState!==null)&&(ei=c)}function BT(c){if(c.tag===22){if(ne(or,or.current),ne(na,c),ei===null){var h=c.alternate;h!==null&&h.memoizedState!==null&&(ei=c)}}else Xs()}function Xs(){ne(or,or.current),ne(na,na.current)}function Xi(c){J(na),ei===c&&(ei=null),J(or)}var or=$(0);function qm(c){for(var h=c;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||Qx(v)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function ux(c,h,v,x){h=c.memoizedState,v=v(x,h),v=v==null?h:d({},h,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var lx={enqueueSetState:function(c,h,v){c=c._reactInternals;var x=Ro(),R=Hs(x);R.payload=h,v!=null&&(R.callback=v),h=Gs(c,R,x),h!==null&&(_o(h,c,x),$f(h,c,x))},enqueueReplaceState:function(c,h,v){c=c._reactInternals;var x=Ro(),R=Hs(x);R.tag=1,R.payload=h,v!=null&&(R.callback=v),h=Gs(c,R,x),h!==null&&(_o(h,c,x),$f(h,c,x))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var v=Ro(),x=Hs(v);x.tag=2,h!=null&&(x.callback=h),h=Gs(c,x,v),h!==null&&(_o(h,c,v),$f(h,c,v))}};function LT(c,h,v,x,R,N,B){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,N,B):h.prototype&&h.prototype.isPureReactComponent?!Ff(v,x)||!Ff(R,N):!0}function jT(c,h,v,x){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,x),h.state!==c&&lx.enqueueReplaceState(h,h.state,null)}function sl(c,h){var v=h;if("ref"in h){v={};for(var x in h)x!=="ref"&&(v[x]=h[x])}if(c=c.defaultProps){v===h&&(v=d({},v));for(var R in c)v[R]===void 0&&(v[R]=c[R])}return v}var Xm=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function zT(c){Xm(c)}function UT(c){console.error(c)}function WT(c){Xm(c)}function Km(c,h){try{var v=c.onUncaughtError;v(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function VT(c,h,v){try{var x=c.onCaughtError;x(v.value,{componentStack:v.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function cx(c,h,v){return v=Hs(v),v.tag=3,v.payload={element:null},v.callback=function(){Km(c,h)},v}function HT(c){return c=Hs(c),c.tag=3,c}function GT(c,h,v,x){var R=v.type.getDerivedStateFromError;if(typeof R=="function"){var N=x.value;c.payload=function(){return R(N)},c.callback=function(){VT(h,v,x)}}var B=v.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(c.callback=function(){VT(h,v,x),typeof R!="function"&&(eu===null?eu=new Set([this]):eu.add(this));var V=x.stack;this.componentDidCatch(x.value,{componentStack:V!==null?V:""})})}function mU(c,h,v,x,R){if(v.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=v.alternate,h!==null&&Uf(h,v,R,!0),v=na.current,v!==null){switch(v.tag){case 13:return ei===null?Ox():v.alternate===null&&Bn===0&&(Bn=3),v.flags&=-257,v.flags|=65536,v.lanes=R,x===jb?v.flags|=16384:(h=v.updateQueue,h===null?v.updateQueue=new Set([x]):h.add(x),Fx(c,x,R)),!1;case 22:return v.flags|=65536,x===jb?v.flags|=16384:(h=v.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},v.updateQueue=h):(v=h.retryQueue,v===null?h.retryQueue=new Set([x]):v.add(x)),Fx(c,x,R)),!1}throw Error(r(435,v.tag))}return Fx(c,x,R),Ox(),!1}if(Zt)return h=na.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,x!==Ib&&(c=Error(r(422),{cause:x}),zf(Jo(c,v)))):(x!==Ib&&(h=Error(r(423),{cause:x}),zf(Jo(h,v))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,x=Jo(x,v),R=cx(c.stateNode,x,R),Wb(c,R),Bn!==4&&(Bn=2)),!1;var N=Error(r(520),{cause:x});if(N=Jo(N,v),sh===null?sh=[N]:sh.push(N),Bn!==4&&(Bn=2),h===null)return!0;x=Jo(x,v),v=h;do{switch(v.tag){case 3:return v.flags|=65536,c=R&-R,v.lanes|=c,c=cx(v.stateNode,x,c),Wb(v,c),!1;case 1:if(h=v.type,N=v.stateNode,(v.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(eu===null||!eu.has(N))))return v.flags|=65536,R&=-R,v.lanes|=R,R=HT(R),GT(R,c,v,x),Wb(v,R),!1}v=v.return}while(v!==null);return!1}var $T=Error(r(461)),cr=!1;function br(c,h,v,x){h.child=c===null?FT(h,null,v,x):Nc(h,c.child,v,x)}function qT(c,h,v,x,R){v=v.render;var N=h.ref;if("ref"in x){var B={};for(var V in x)V!=="ref"&&(B[V]=x[V])}else B=x;return ol(h),x=qb(c,h,v,B,N,R),V=Xb(),c!==null&&!cr?(Kb(c,h,R),Ki(c,h,R)):(Zt&&V&&Db(h),h.flags|=1,br(c,h,x,R),h.child)}function XT(c,h,v,x,R){if(c===null){var N=v.type;return typeof N=="function"&&!Tb(N)&&N.defaultProps===void 0&&v.compare===null?(h.tag=15,h.type=N,KT(c,h,N,x,R)):(c=Am(v.type,null,x,h,h.mode,R),c.ref=h.ref,c.return=h,h.child=c)}if(N=c.child,!yx(c,R)){var B=N.memoizedProps;if(v=v.compare,v=v!==null?v:Ff,v(B,x)&&c.ref===h.ref)return Ki(c,h,R)}return h.flags|=1,c=Wi(N,x),c.ref=h.ref,c.return=h,h.child=c}function KT(c,h,v,x,R){if(c!==null){var N=c.memoizedProps;if(Ff(N,x)&&c.ref===h.ref)if(cr=!1,h.pendingProps=x=N,yx(c,R))(c.flags&131072)!==0&&(cr=!0);else return h.lanes=c.lanes,Ki(c,h,R)}return dx(c,h,v,x,R)}function YT(c,h,v){var x=h.pendingProps,R=x.children,N=c!==null?c.memoizedState:null;if(x.mode==="hidden"){if((h.flags&128)!==0){if(x=N!==null?N.baseLanes|v:v,c!==null){for(R=h.child=c.child,N=0;R!==null;)N=N|R.lanes|R.childLanes,R=R.sibling;h.childLanes=N&~x}else h.childLanes=0,h.child=null;return QT(c,h,x,v)}if((v&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&Mm(h,N!==null?N.cachePool:null),N!==null?K_(h,N):Hb(),BT(h);else return h.lanes=h.childLanes=536870912,QT(c,h,N!==null?N.baseLanes|v:v,v)}else N!==null?(Mm(h,N.cachePool),K_(h,N),Xs(),h.memoizedState=null):(c!==null&&Mm(h,null),Hb(),Xs());return br(c,h,R,v),h.child}function QT(c,h,v,x){var R=Lb();return R=R===null?null:{parent:rr._currentValue,pool:R},h.memoizedState={baseLanes:v,cachePool:R},c!==null&&Mm(h,null),Hb(),BT(h),c!==null&&Uf(c,h,x,!0),null}function Ym(c,h){var v=h.ref;if(v===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(r(284));(c===null||c.ref!==v)&&(h.flags|=4194816)}}function dx(c,h,v,x,R){return ol(h),v=qb(c,h,v,x,void 0,R),x=Xb(),c!==null&&!cr?(Kb(c,h,R),Ki(c,h,R)):(Zt&&x&&Db(h),h.flags|=1,br(c,h,v,R),h.child)}function JT(c,h,v,x,R,N){return ol(h),h.updateQueue=null,v=Q_(h,x,v,R),Y_(c),x=Xb(),c!==null&&!cr?(Kb(c,h,N),Ki(c,h,N)):(Zt&&x&&Db(h),h.flags|=1,br(c,h,v,N),h.child)}function ZT(c,h,v,x,R){if(ol(h),h.stateNode===null){var N=bc,B=v.contextType;typeof B=="object"&&B!==null&&(N=Ir(B)),N=new v(x,N),h.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=lx,h.stateNode=N,N._reactInternals=h,N=h.stateNode,N.props=x,N.state=h.memoizedState,N.refs={},zb(h),B=v.contextType,N.context=typeof B=="object"&&B!==null?Ir(B):bc,N.state=h.memoizedState,B=v.getDerivedStateFromProps,typeof B=="function"&&(ux(h,v,B,x),N.state=h.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(B=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),B!==N.state&&lx.enqueueReplaceState(N,N.state,null),Xf(h,x,N,R),qf(),N.state=h.memoizedState),typeof N.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(c===null){N=h.stateNode;var V=h.memoizedProps,Z=sl(v,V);N.props=Z;var he=N.context,Ee=v.contextType;B=bc,typeof Ee=="object"&&Ee!==null&&(B=Ir(Ee));var Ae=v.getDerivedStateFromProps;Ee=typeof Ae=="function"||typeof N.getSnapshotBeforeUpdate=="function",V=h.pendingProps!==V,Ee||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V||he!==B)&&jT(h,N,x,B),Vs=!1;var pe=h.memoizedState;N.state=pe,Xf(h,x,N,R),qf(),he=h.memoizedState,V||pe!==he||Vs?(typeof Ae=="function"&&(ux(h,v,Ae,x),he=h.memoizedState),(Z=Vs||LT(h,v,Z,x,pe,he,B))?(Ee||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(h.flags|=4194308)):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=he),N.props=x,N.state=he,N.context=B,x=Z):(typeof N.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{N=h.stateNode,Ub(c,h),B=h.memoizedProps,Ee=sl(v,B),N.props=Ee,Ae=h.pendingProps,pe=N.context,he=v.contextType,Z=bc,typeof he=="object"&&he!==null&&(Z=Ir(he)),V=v.getDerivedStateFromProps,(he=typeof V=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(B!==Ae||pe!==Z)&&jT(h,N,x,Z),Vs=!1,pe=h.memoizedState,N.state=pe,Xf(h,x,N,R),qf();var me=h.memoizedState;B!==Ae||pe!==me||Vs||c!==null&&c.dependencies!==null&&km(c.dependencies)?(typeof V=="function"&&(ux(h,v,V,x),me=h.memoizedState),(Ee=Vs||LT(h,v,Ee,x,pe,me,Z)||c!==null&&c.dependencies!==null&&km(c.dependencies))?(he||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(x,me,Z),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(x,me,Z)),typeof N.componentDidUpdate=="function"&&(h.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof N.componentDidUpdate!="function"||B===c.memoizedProps&&pe===c.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===c.memoizedProps&&pe===c.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=me),N.props=x,N.state=me,N.context=Z,x=Ee):(typeof N.componentDidUpdate!="function"||B===c.memoizedProps&&pe===c.memoizedState||(h.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||B===c.memoizedProps&&pe===c.memoizedState||(h.flags|=1024),x=!1)}return N=x,Ym(c,h),x=(h.flags&128)!==0,N||x?(N=h.stateNode,v=x&&typeof v.getDerivedStateFromError!="function"?null:N.render(),h.flags|=1,c!==null&&x?(h.child=Nc(h,c.child,null,R),h.child=Nc(h,null,v,R)):br(c,h,v,R),h.memoizedState=N.state,c=h.child):c=Ki(c,h,R),c}function eA(c,h,v,x){return jf(),h.flags|=256,br(c,h,v,x),h.child}var fx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hx(c){return{baseLanes:c,cachePool:U_()}}function px(c,h,v){return c=c!==null?c.childLanes&~v:0,h&&(c|=ra),c}function tA(c,h,v){var x=h.pendingProps,R=!1,N=(h.flags&128)!==0,B;if((B=N)||(B=c!==null&&c.memoizedState===null?!1:(or.current&2)!==0),B&&(R=!0,h.flags&=-129),B=(h.flags&32)!==0,h.flags&=-33,c===null){if(Zt){if(R?qs(h):Xs(),Zt){var V=Fn,Z;if(Z=V){e:{for(Z=V,V=Za;Z.nodeType!==8;){if(!V){V=null;break e}if(Z=ka(Z.nextSibling),Z===null){V=null;break e}}V=Z}V!==null?(h.memoizedState={dehydrated:V,treeContext:Zu!==null?{id:Vi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},Z=wo(18,null,null,0),Z.stateNode=V,Z.return=h,h.child=Z,Gr=h,Fn=null,Z=!0):Z=!1}Z||nl(h)}if(V=h.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return Qx(V)?h.lanes=32:h.lanes=536870912,null;Xi(h)}return V=x.children,x=x.fallback,R?(Xs(),R=h.mode,V=Qm({mode:"hidden",children:V},R),x=Ju(x,R,v,null),V.return=h,x.return=h,V.sibling=x,h.child=V,R=h.child,R.memoizedState=hx(v),R.childLanes=px(c,B,v),h.memoizedState=fx,x):(qs(h),mx(h,V))}if(Z=c.memoizedState,Z!==null&&(V=Z.dehydrated,V!==null)){if(N)h.flags&256?(qs(h),h.flags&=-257,h=vx(c,h,v)):h.memoizedState!==null?(Xs(),h.child=c.child,h.flags|=128,h=null):(Xs(),R=x.fallback,V=h.mode,x=Qm({mode:"visible",children:x.children},V),R=Ju(R,V,v,null),R.flags|=2,x.return=h,R.return=h,x.sibling=R,h.child=x,Nc(h,c.child,null,v),x=h.child,x.memoizedState=hx(v),x.childLanes=px(c,B,v),h.memoizedState=fx,h=R);else if(qs(h),Qx(V)){if(B=V.nextSibling&&V.nextSibling.dataset,B)var he=B.dgst;B=he,x=Error(r(419)),x.stack="",x.digest=B,zf({value:x,source:null,stack:null}),h=vx(c,h,v)}else if(cr||Uf(c,h,v,!1),B=(v&c.childLanes)!==0,cr||B){if(B=xn,B!==null&&(x=v&-v,x=(x&42)!==0?1:Li(x),x=(x&(B.suspendedLanes|v))!==0?0:x,x!==0&&x!==Z.retryLane))throw Z.retryLane=x,yc(c,x),_o(B,c,x),$T;V.data==="$?"||Ox(),h=vx(c,h,v)}else V.data==="$?"?(h.flags|=192,h.child=c.child,h=null):(c=Z.treeContext,Fn=ka(V.nextSibling),Gr=h,Zt=!0,tl=null,Za=!1,c!==null&&(ea[ta++]=Vi,ea[ta++]=Hi,ea[ta++]=Zu,Vi=c.id,Hi=c.overflow,Zu=h),h=mx(h,x.children),h.flags|=4096);return h}return R?(Xs(),R=x.fallback,V=h.mode,Z=c.child,he=Z.sibling,x=Wi(Z,{mode:"hidden",children:x.children}),x.subtreeFlags=Z.subtreeFlags&65011712,he!==null?R=Wi(he,R):(R=Ju(R,V,v,null),R.flags|=2),R.return=h,x.return=h,x.sibling=R,h.child=x,x=R,R=h.child,V=c.child.memoizedState,V===null?V=hx(v):(Z=V.cachePool,Z!==null?(he=rr._currentValue,Z=Z.parent!==he?{parent:he,pool:he}:Z):Z=U_(),V={baseLanes:V.baseLanes|v,cachePool:Z}),R.memoizedState=V,R.childLanes=px(c,B,v),h.memoizedState=fx,x):(qs(h),v=c.child,c=v.sibling,v=Wi(v,{mode:"visible",children:x.children}),v.return=h,v.sibling=null,c!==null&&(B=h.deletions,B===null?(h.deletions=[c],h.flags|=16):B.push(c)),h.child=v,h.memoizedState=null,v)}function mx(c,h){return h=Qm({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function Qm(c,h){return c=wo(22,c,null,h),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function vx(c,h,v){return Nc(h,c.child,null,v),c=mx(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function nA(c,h,v){c.lanes|=h;var x=c.alternate;x!==null&&(x.lanes|=h),Ob(c.return,h,v)}function gx(c,h,v,x,R){var N=c.memoizedState;N===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:v,tailMode:R}:(N.isBackwards=h,N.rendering=null,N.renderingStartTime=0,N.last=x,N.tail=v,N.tailMode=R)}function rA(c,h,v){var x=h.pendingProps,R=x.revealOrder,N=x.tail;if(br(c,h,x.children,v),x=or.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&nA(c,v,h);else if(c.tag===19)nA(c,v,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}x&=1}switch(ne(or,x),R){case"forwards":for(v=h.child,R=null;v!==null;)c=v.alternate,c!==null&&qm(c)===null&&(R=v),v=v.sibling;v=R,v===null?(R=h.child,h.child=null):(R=v.sibling,v.sibling=null),gx(h,!1,R,v,N);break;case"backwards":for(v=null,R=h.child,h.child=null;R!==null;){if(c=R.alternate,c!==null&&qm(c)===null){h.child=R;break}c=R.sibling,R.sibling=v,v=R,R=c}gx(h,!0,v,null,N);break;case"together":gx(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Ki(c,h,v){if(c!==null&&(h.dependencies=c.dependencies),Zs|=h.lanes,(v&h.childLanes)===0)if(c!==null){if(Uf(c,h,v,!1),(v&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,v=Wi(c,c.pendingProps),h.child=v,v.return=h;c.sibling!==null;)c=c.sibling,v=v.sibling=Wi(c,c.pendingProps),v.return=h;v.sibling=null}return h.child}function yx(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&km(c)))}function vU(c,h,v){switch(h.tag){case 3:fe(h,h.stateNode.containerInfo),Ws(h,rr,c.memoizedState.cache),jf();break;case 27:case 5:Oe(h);break;case 4:fe(h,h.stateNode.containerInfo);break;case 10:Ws(h,h.type,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(qs(h),h.flags|=128,null):(v&h.child.childLanes)!==0?tA(c,h,v):(qs(h),c=Ki(c,h,v),c!==null?c.sibling:null);qs(h);break;case 19:var R=(c.flags&128)!==0;if(x=(v&h.childLanes)!==0,x||(Uf(c,h,v,!1),x=(v&h.childLanes)!==0),R){if(x)return rA(c,h,v);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),ne(or,or.current),x)break;return null;case 22:case 23:return h.lanes=0,YT(c,h,v);case 24:Ws(h,rr,c.memoizedState.cache)}return Ki(c,h,v)}function oA(c,h,v){if(c!==null)if(c.memoizedProps!==h.pendingProps)cr=!0;else{if(!yx(c,v)&&(h.flags&128)===0)return cr=!1,vU(c,h,v);cr=(c.flags&131072)!==0}else cr=!1,Zt&&(h.flags&1048576)!==0&&O_(h,Dm,h.index);switch(h.lanes=0,h.tag){case 16:e:{c=h.pendingProps;var x=h.elementType,R=x._init;if(x=R(x._payload),h.type=x,typeof x=="function")Tb(x)?(c=sl(x,c),h.tag=1,h=ZT(null,h,x,c,v)):(h.tag=0,h=dx(null,h,x,c,v));else{if(x!=null){if(R=x.$$typeof,R===_){h.tag=11,h=qT(null,h,x,c,v);break e}else if(R===k){h.tag=14,h=XT(null,h,x,c,v);break e}}throw h=W(x)||x,Error(r(306,h,""))}}return h;case 0:return dx(c,h,h.type,h.pendingProps,v);case 1:return x=h.type,R=sl(x,h.pendingProps),ZT(c,h,x,R,v);case 3:e:{if(fe(h,h.stateNode.containerInfo),c===null)throw Error(r(387));x=h.pendingProps;var N=h.memoizedState;R=N.element,Ub(c,h),Xf(h,x,null,v);var B=h.memoizedState;if(x=B.cache,Ws(h,rr,x),x!==N.cache&&Pb(h,[rr],v,!0),qf(),x=B.element,N.isDehydrated)if(N={element:x,isDehydrated:!1,cache:B.cache},h.updateQueue.baseState=N,h.memoizedState=N,h.flags&256){h=eA(c,h,x,v);break e}else if(x!==R){R=Jo(Error(r(424)),h),zf(R),h=eA(c,h,x,v);break e}else{switch(c=h.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Fn=ka(c.firstChild),Gr=h,Zt=!0,tl=null,Za=!0,v=FT(h,null,x,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(jf(),x===R){h=Ki(c,h,v);break e}br(c,h,x,v)}h=h.child}return h;case 26:return Ym(c,h),c===null?(v=uN(h.type,null,h.pendingProps,null))?h.memoizedState=v:Zt||(v=h.type,c=h.pendingProps,x=dv(se.current).createElement(v),x[On]=h,x[nr]=c,wr(x,v,c),Pn(x),h.stateNode=x):h.memoizedState=uN(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return Oe(h),c===null&&Zt&&(x=h.stateNode=aN(h.type,h.pendingProps,se.current),Gr=h,Za=!0,R=Fn,ru(h.type)?(Jx=R,Fn=ka(x.firstChild)):Fn=R),br(c,h,h.pendingProps.children,v),Ym(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&Zt&&((R=x=Fn)&&(x=HU(x,h.type,h.pendingProps,Za),x!==null?(h.stateNode=x,Gr=h,Fn=ka(x.firstChild),Za=!1,R=!0):R=!1),R||nl(h)),Oe(h),R=h.type,N=h.pendingProps,B=c!==null?c.memoizedProps:null,x=N.children,Xx(R,N)?x=null:B!==null&&Xx(R,B)&&(h.flags|=32),h.memoizedState!==null&&(R=qb(c,h,uU,null,null,v),vh._currentValue=R),Ym(c,h),br(c,h,x,v),h.child;case 6:return c===null&&Zt&&((c=v=Fn)&&(v=GU(v,h.pendingProps,Za),v!==null?(h.stateNode=v,Gr=h,Fn=null,c=!0):c=!1),c||nl(h)),null;case 13:return tA(c,h,v);case 4:return fe(h,h.stateNode.containerInfo),x=h.pendingProps,c===null?h.child=Nc(h,null,x,v):br(c,h,x,v),h.child;case 11:return qT(c,h,h.type,h.pendingProps,v);case 7:return br(c,h,h.pendingProps,v),h.child;case 8:return br(c,h,h.pendingProps.children,v),h.child;case 12:return br(c,h,h.pendingProps.children,v),h.child;case 10:return x=h.pendingProps,Ws(h,h.type,x.value),br(c,h,x.children,v),h.child;case 9:return R=h.type._context,x=h.pendingProps.children,ol(h),R=Ir(R),x=x(R),h.flags|=1,br(c,h,x,v),h.child;case 14:return XT(c,h,h.type,h.pendingProps,v);case 15:return KT(c,h,h.type,h.pendingProps,v);case 19:return rA(c,h,v);case 31:return x=h.pendingProps,v=h.mode,x={mode:x.mode,children:x.children},c===null?(v=Qm(x,v),v.ref=h.ref,h.child=v,v.return=h,h=v):(v=Wi(c.child,x),v.ref=h.ref,h.child=v,v.return=h,h=v),h;case 22:return YT(c,h,v);case 24:return ol(h),x=Ir(rr),c===null?(R=Lb(),R===null&&(R=xn,N=Fb(),R.pooledCache=N,N.refCount++,N!==null&&(R.pooledCacheLanes|=v),R=N),h.memoizedState={parent:x,cache:R},zb(h),Ws(h,rr,R)):((c.lanes&v)!==0&&(Ub(c,h),Xf(h,null,null,v),qf()),R=c.memoizedState,N=h.memoizedState,R.parent!==x?(R={parent:x,cache:x},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),Ws(h,rr,x)):(x=N.cache,Ws(h,rr,x),x!==R.cache&&Pb(h,[rr],v,!0))),br(c,h,h.pendingProps.children,v),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Yi(c){c.flags|=4}function aA(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!hN(h)){if(h=na.current,h!==null&&((Vt&4194048)===Vt?ei!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||h!==ei))throw Gf=jb,W_;c.flags|=8192}}function Jm(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?Pt():536870912,c.lanes|=h,Mc|=h)}function th(c,h){if(!Zt)switch(c.tailMode){case"hidden":h=c.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function Dn(c){var h=c.alternate!==null&&c.alternate.child===c.child,v=0,x=0;if(h)for(var R=c.child;R!==null;)v|=R.lanes|R.childLanes,x|=R.subtreeFlags&65011712,x|=R.flags&65011712,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)v|=R.lanes|R.childLanes,x|=R.subtreeFlags,x|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=x,c.childLanes=v,h}function gU(c,h,v){var x=h.pendingProps;switch(kb(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(h),null;case 1:return Dn(h),null;case 3:return v=h.stateNode,x=null,c!==null&&(x=c.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),$i(rr),ge(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(Lf(h)?Yi(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,B_())),Dn(h),null;case 26:return v=h.memoizedState,c===null?(Yi(h),v!==null?(Dn(h),aA(h,v)):(Dn(h),h.flags&=-16777217)):v?v!==c.memoizedState?(Yi(h),Dn(h),aA(h,v)):(Dn(h),h.flags&=-16777217):(c.memoizedProps!==x&&Yi(h),Dn(h),h.flags&=-16777217),null;case 27:je(h),v=se.current;var R=h.type;if(c!==null&&h.stateNode!=null)c.memoizedProps!==x&&Yi(h);else{if(!x){if(h.stateNode===null)throw Error(r(166));return Dn(h),null}c=ce.current,Lf(h)?P_(h):(c=aN(R,x,v),h.stateNode=c,Yi(h))}return Dn(h),null;case 5:if(je(h),v=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==x&&Yi(h);else{if(!x){if(h.stateNode===null)throw Error(r(166));return Dn(h),null}if(c=ce.current,Lf(h))P_(h);else{switch(R=dv(se.current),c){case 1:c=R.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:c=R.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":c=R.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":c=R.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":c=R.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof x.is=="string"?R.createElement("select",{is:x.is}):R.createElement("select"),x.multiple?c.multiple=!0:x.size&&(c.size=x.size);break;default:c=typeof x.is=="string"?R.createElement(v,{is:x.is}):R.createElement(v)}}c[On]=h,c[nr]=x;e:for(R=h.child;R!==null;){if(R.tag===5||R.tag===6)c.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===h)break e;for(;R.sibling===null;){if(R.return===null||R.return===h)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}h.stateNode=c;e:switch(wr(c,v,x),v){case"button":case"input":case"select":case"textarea":c=!!x.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Yi(h)}}return Dn(h),h.flags&=-16777217,null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==x&&Yi(h);else{if(typeof x!="string"&&h.stateNode===null)throw Error(r(166));if(c=se.current,Lf(h)){if(c=h.stateNode,v=h.memoizedProps,x=null,R=Gr,R!==null)switch(R.tag){case 27:case 5:x=R.memoizedProps}c[On]=h,c=!!(c.nodeValue===v||x!==null&&x.suppressHydrationWarning===!0||JA(c.nodeValue,v)),c||nl(h)}else c=dv(c).createTextNode(x),c[On]=h,h.stateNode=c}return Dn(h),null;case 13:if(x=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=Lf(h),x!==null&&x.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[On]=h}else jf(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Dn(h),R=!1}else R=B_(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=R),R=!0;if(!R)return h.flags&256?(Xi(h),h):(Xi(h),null)}if(Xi(h),(h.flags&128)!==0)return h.lanes=v,h;if(v=x!==null,c=c!==null&&c.memoizedState!==null,v){x=h.child,R=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(R=x.alternate.memoizedState.cachePool.pool);var N=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(N=x.memoizedState.cachePool.pool),N!==R&&(x.flags|=2048)}return v!==c&&v&&(h.child.flags|=8192),Jm(h,h.updateQueue),Dn(h),null;case 4:return ge(),c===null&&Vx(h.stateNode.containerInfo),Dn(h),null;case 10:return $i(h.type),Dn(h),null;case 19:if(J(or),R=h.memoizedState,R===null)return Dn(h),null;if(x=(h.flags&128)!==0,N=R.rendering,N===null)if(x)th(R,!1);else{if(Bn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(N=qm(c),N!==null){for(h.flags|=128,th(R,!1),c=N.updateQueue,h.updateQueue=c,Jm(h,c),h.subtreeFlags=0,c=v,v=h.child;v!==null;)M_(v,c),v=v.sibling;return ne(or,or.current&1|2),h.child}c=c.sibling}R.tail!==null&&Ie()>tv&&(h.flags|=128,x=!0,th(R,!1),h.lanes=4194304)}else{if(!x)if(c=qm(N),c!==null){if(h.flags|=128,x=!0,c=c.updateQueue,h.updateQueue=c,Jm(h,c),th(R,!0),R.tail===null&&R.tailMode==="hidden"&&!N.alternate&&!Zt)return Dn(h),null}else 2*Ie()-R.renderingStartTime>tv&&v!==536870912&&(h.flags|=128,x=!0,th(R,!1),h.lanes=4194304);R.isBackwards?(N.sibling=h.child,h.child=N):(c=R.last,c!==null?c.sibling=N:h.child=N,R.last=N)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=Ie(),h.sibling=null,c=or.current,ne(or,x?c&1|2:c&1),h):(Dn(h),null);case 22:case 23:return Xi(h),Gb(),x=h.memoizedState!==null,c!==null?c.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(v&536870912)!==0&&(h.flags&128)===0&&(Dn(h),h.subtreeFlags&6&&(h.flags|=8192)):Dn(h),v=h.updateQueue,v!==null&&Jm(h,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==v&&(h.flags|=2048),c!==null&&J(al),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),$i(rr),Dn(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function yU(c,h){switch(kb(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return $i(rr),ge(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return je(h),null;case 13:if(Xi(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));jf()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return J(or),null;case 4:return ge(),null;case 10:return $i(h.type),null;case 22:case 23:return Xi(h),Gb(),c!==null&&J(al),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return $i(rr),null;case 25:return null;default:return null}}function iA(c,h){switch(kb(h),h.tag){case 3:$i(rr),ge();break;case 26:case 27:case 5:je(h);break;case 4:ge();break;case 13:Xi(h);break;case 19:J(or);break;case 10:$i(h.type);break;case 22:case 23:Xi(h),Gb(),c!==null&&J(al);break;case 24:$i(rr)}}function nh(c,h){try{var v=h.updateQueue,x=v!==null?v.lastEffect:null;if(x!==null){var R=x.next;v=R;do{if((v.tag&c)===c){x=void 0;var N=v.create,B=v.inst;x=N(),B.destroy=x}v=v.next}while(v!==R)}}catch(V){yn(h,h.return,V)}}function Ks(c,h,v){try{var x=h.updateQueue,R=x!==null?x.lastEffect:null;if(R!==null){var N=R.next;x=N;do{if((x.tag&c)===c){var B=x.inst,V=B.destroy;if(V!==void 0){B.destroy=void 0,R=h;var Z=v,he=V;try{he()}catch(Ee){yn(R,Z,Ee)}}}x=x.next}while(x!==N)}}catch(Ee){yn(h,h.return,Ee)}}function sA(c){var h=c.updateQueue;if(h!==null){var v=c.stateNode;try{X_(h,v)}catch(x){yn(c,c.return,x)}}}function uA(c,h,v){v.props=sl(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(x){yn(c,h,x)}}function rh(c,h){try{var v=c.ref;if(v!==null){switch(c.tag){case 26:case 27:case 5:var x=c.stateNode;break;case 30:x=c.stateNode;break;default:x=c.stateNode}typeof v=="function"?c.refCleanup=v(x):v.current=x}}catch(R){yn(c,h,R)}}function ti(c,h){var v=c.ref,x=c.refCleanup;if(v!==null)if(typeof x=="function")try{x()}catch(R){yn(c,h,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(R){yn(c,h,R)}else v.current=null}function lA(c){var h=c.type,v=c.memoizedProps,x=c.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":v.autoFocus&&x.focus();break e;case"img":v.src?x.src=v.src:v.srcSet&&(x.srcset=v.srcSet)}}catch(R){yn(c,c.return,R)}}function bx(c,h,v){try{var x=c.stateNode;jU(x,c.type,v,h),x[nr]=h}catch(R){yn(c,c.return,R)}}function cA(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&ru(c.type)||c.tag===4}function xx(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||cA(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&ru(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function wx(c,h,v){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(c,h):(h=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,h.appendChild(c),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=cv));else if(x!==4&&(x===27&&ru(c.type)&&(v=c.stateNode,h=null),c=c.child,c!==null))for(wx(c,h,v),c=c.sibling;c!==null;)wx(c,h,v),c=c.sibling}function Zm(c,h,v){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?v.insertBefore(c,h):v.appendChild(c);else if(x!==4&&(x===27&&ru(c.type)&&(v=c.stateNode),c=c.child,c!==null))for(Zm(c,h,v),c=c.sibling;c!==null;)Zm(c,h,v),c=c.sibling}function dA(c){var h=c.stateNode,v=c.memoizedProps;try{for(var x=c.type,R=h.attributes;R.length;)h.removeAttributeNode(R[0]);wr(h,x,v),h[On]=c,h[nr]=v}catch(N){yn(c,c.return,N)}}var Qi=!1,Gn=!1,Sx=!1,fA=typeof WeakSet=="function"?WeakSet:Set,dr=null;function bU(c,h){if(c=c.containerInfo,$x=gv,c=C_(c),xb(c)){if("selectionStart"in c)var v={start:c.selectionStart,end:c.selectionEnd};else e:{v=(v=c.ownerDocument)&&v.defaultView||window;var x=v.getSelection&&v.getSelection();if(x&&x.rangeCount!==0){v=x.anchorNode;var R=x.anchorOffset,N=x.focusNode;x=x.focusOffset;try{v.nodeType,N.nodeType}catch{v=null;break e}var B=0,V=-1,Z=-1,he=0,Ee=0,Ae=c,pe=null;t:for(;;){for(var me;Ae!==v||R!==0&&Ae.nodeType!==3||(V=B+R),Ae!==N||x!==0&&Ae.nodeType!==3||(Z=B+x),Ae.nodeType===3&&(B+=Ae.nodeValue.length),(me=Ae.firstChild)!==null;)pe=Ae,Ae=me;for(;;){if(Ae===c)break t;if(pe===v&&++he===R&&(V=B),pe===N&&++Ee===x&&(Z=B),(me=Ae.nextSibling)!==null)break;Ae=pe,pe=Ae.parentNode}Ae=me}v=V===-1||Z===-1?null:{start:V,end:Z}}else v=null}v=v||{start:0,end:0}}else v=null;for(qx={focusedElem:c,selectionRange:v},gv=!1,dr=h;dr!==null;)if(h=dr,c=h.child,(h.subtreeFlags&1024)!==0&&c!==null)c.return=h,dr=c;else for(;dr!==null;){switch(h=dr,N=h.alternate,c=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&N!==null){c=void 0,v=h,R=N.memoizedProps,N=N.memoizedState,x=v.stateNode;try{var vt=sl(v.type,R,v.elementType===v.type);c=x.getSnapshotBeforeUpdate(vt,N),x.__reactInternalSnapshotBeforeUpdate=c}catch(ht){yn(v,v.return,ht)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,v=c.nodeType,v===9)Yx(c);else if(v===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Yx(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=h.sibling,c!==null){c.return=h.return,dr=c;break}dr=h.return}}function hA(c,h,v){var x=v.flags;switch(v.tag){case 0:case 11:case 15:Ys(c,v),x&4&&nh(5,v);break;case 1:if(Ys(c,v),x&4)if(c=v.stateNode,h===null)try{c.componentDidMount()}catch(B){yn(v,v.return,B)}else{var R=sl(v.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(R,h,c.__reactInternalSnapshotBeforeUpdate)}catch(B){yn(v,v.return,B)}}x&64&&sA(v),x&512&&rh(v,v.return);break;case 3:if(Ys(c,v),x&64&&(c=v.updateQueue,c!==null)){if(h=null,v.child!==null)switch(v.child.tag){case 27:case 5:h=v.child.stateNode;break;case 1:h=v.child.stateNode}try{X_(c,h)}catch(B){yn(v,v.return,B)}}break;case 27:h===null&&x&4&&dA(v);case 26:case 5:Ys(c,v),h===null&&x&4&&lA(v),x&512&&rh(v,v.return);break;case 12:Ys(c,v);break;case 13:Ys(c,v),x&4&&vA(c,v),x&64&&(c=v.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(v=AU.bind(null,v),$U(c,v))));break;case 22:if(x=v.memoizedState!==null||Qi,!x){h=h!==null&&h.memoizedState!==null||Gn,R=Qi;var N=Gn;Qi=x,(Gn=h)&&!N?Qs(c,v,(v.subtreeFlags&8772)!==0):Ys(c,v),Qi=R,Gn=N}break;case 30:break;default:Ys(c,v)}}function pA(c){var h=c.alternate;h!==null&&(c.alternate=null,pA(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&Af(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var An=null,io=!1;function Ji(c,h,v){for(v=v.child;v!==null;)mA(c,h,v),v=v.sibling}function mA(c,h,v){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Ve,v)}catch{}switch(v.tag){case 26:Gn||ti(v,h),Ji(c,h,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Gn||ti(v,h);var x=An,R=io;ru(v.type)&&(An=v.stateNode,io=!1),Ji(c,h,v),fh(v.stateNode),An=x,io=R;break;case 5:Gn||ti(v,h);case 6:if(x=An,R=io,An=null,Ji(c,h,v),An=x,io=R,An!==null)if(io)try{(An.nodeType===9?An.body:An.nodeName==="HTML"?An.ownerDocument.body:An).removeChild(v.stateNode)}catch(N){yn(v,h,N)}else try{An.removeChild(v.stateNode)}catch(N){yn(v,h,N)}break;case 18:An!==null&&(io?(c=An,rN(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,v.stateNode),xh(c)):rN(An,v.stateNode));break;case 4:x=An,R=io,An=v.stateNode.containerInfo,io=!0,Ji(c,h,v),An=x,io=R;break;case 0:case 11:case 14:case 15:Gn||Ks(2,v,h),Gn||Ks(4,v,h),Ji(c,h,v);break;case 1:Gn||(ti(v,h),x=v.stateNode,typeof x.componentWillUnmount=="function"&&uA(v,h,x)),Ji(c,h,v);break;case 21:Ji(c,h,v);break;case 22:Gn=(x=Gn)||v.memoizedState!==null,Ji(c,h,v),Gn=x;break;default:Ji(c,h,v)}}function vA(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{xh(c)}catch(v){yn(h,h.return,v)}}function xU(c){switch(c.tag){case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new fA),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new fA),h;default:throw Error(r(435,c.tag))}}function Cx(c,h){var v=xU(c);h.forEach(function(x){var R=NU.bind(null,c,x);v.has(x)||(v.add(x),x.then(R,R))})}function So(c,h){var v=h.deletions;if(v!==null)for(var x=0;x<v.length;x++){var R=v[x],N=c,B=h,V=B;e:for(;V!==null;){switch(V.tag){case 27:if(ru(V.type)){An=V.stateNode,io=!1;break e}break;case 5:An=V.stateNode,io=!1;break e;case 3:case 4:An=V.stateNode.containerInfo,io=!0;break e}V=V.return}if(An===null)throw Error(r(160));mA(N,B,R),An=null,io=!1,N=R.alternate,N!==null&&(N.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)gA(h,c),h=h.sibling}var Da=null;function gA(c,h){var v=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:So(h,c),Co(c),x&4&&(Ks(3,c,c.return),nh(3,c),Ks(5,c,c.return));break;case 1:So(h,c),Co(c),x&512&&(Gn||v===null||ti(v,v.return)),x&64&&Qi&&(c=c.updateQueue,c!==null&&(x=c.callbacks,x!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?x:v.concat(x))));break;case 26:var R=Da;if(So(h,c),Co(c),x&512&&(Gn||v===null||ti(v,v.return)),x&4){var N=v!==null?v.memoizedState:null;if(x=c.memoizedState,v===null)if(x===null)if(c.stateNode===null){e:{x=c.type,v=c.memoizedProps,R=R.ownerDocument||R;t:switch(x){case"title":N=R.getElementsByTagName("title")[0],(!N||N[qu]||N[On]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=R.createElement(x),R.head.insertBefore(N,R.querySelector("head > title"))),wr(N,x,v),N[On]=c,Pn(N),x=N;break e;case"link":var B=dN("link","href",R).get(x+(v.href||""));if(B){for(var V=0;V<B.length;V++)if(N=B[V],N.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&N.getAttribute("rel")===(v.rel==null?null:v.rel)&&N.getAttribute("title")===(v.title==null?null:v.title)&&N.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){B.splice(V,1);break t}}N=R.createElement(x),wr(N,x,v),R.head.appendChild(N);break;case"meta":if(B=dN("meta","content",R).get(x+(v.content||""))){for(V=0;V<B.length;V++)if(N=B[V],N.getAttribute("content")===(v.content==null?null:""+v.content)&&N.getAttribute("name")===(v.name==null?null:v.name)&&N.getAttribute("property")===(v.property==null?null:v.property)&&N.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&N.getAttribute("charset")===(v.charSet==null?null:v.charSet)){B.splice(V,1);break t}}N=R.createElement(x),wr(N,x,v),R.head.appendChild(N);break;default:throw Error(r(468,x))}N[On]=c,Pn(N),x=N}c.stateNode=x}else fN(R,c.type,c.stateNode);else c.stateNode=cN(R,x,c.memoizedProps);else N!==x?(N===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):N.count--,x===null?fN(R,c.type,c.stateNode):cN(R,x,c.memoizedProps)):x===null&&c.stateNode!==null&&bx(c,c.memoizedProps,v.memoizedProps)}break;case 27:So(h,c),Co(c),x&512&&(Gn||v===null||ti(v,v.return)),v!==null&&x&4&&bx(c,c.memoizedProps,v.memoizedProps);break;case 5:if(So(h,c),Co(c),x&512&&(Gn||v===null||ti(v,v.return)),c.flags&32){R=c.stateNode;try{dc(R,"")}catch(me){yn(c,c.return,me)}}x&4&&c.stateNode!=null&&(R=c.memoizedProps,bx(c,R,v!==null?v.memoizedProps:R)),x&1024&&(Sx=!0);break;case 6:if(So(h,c),Co(c),x&4){if(c.stateNode===null)throw Error(r(162));x=c.memoizedProps,v=c.stateNode;try{v.nodeValue=x}catch(me){yn(c,c.return,me)}}break;case 3:if(pv=null,R=Da,Da=fv(h.containerInfo),So(h,c),Da=R,Co(c),x&4&&v!==null&&v.memoizedState.isDehydrated)try{xh(h.containerInfo)}catch(me){yn(c,c.return,me)}Sx&&(Sx=!1,yA(c));break;case 4:x=Da,Da=fv(c.stateNode.containerInfo),So(h,c),Co(c),Da=x;break;case 12:So(h,c),Co(c);break;case 13:So(h,c),Co(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Nx=Ie()),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,Cx(c,x)));break;case 22:R=c.memoizedState!==null;var Z=v!==null&&v.memoizedState!==null,he=Qi,Ee=Gn;if(Qi=he||R,Gn=Ee||Z,So(h,c),Gn=Ee,Qi=he,Co(c),x&8192)e:for(h=c.stateNode,h._visibility=R?h._visibility&-2:h._visibility|1,R&&(v===null||Z||Qi||Gn||ul(c)),v=null,h=c;;){if(h.tag===5||h.tag===26){if(v===null){Z=v=h;try{if(N=Z.stateNode,R)B=N.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{V=Z.stateNode;var Ae=Z.memoizedProps.style,pe=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;V.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(me){yn(Z,Z.return,me)}}}else if(h.tag===6){if(v===null){Z=h;try{Z.stateNode.nodeValue=R?"":Z.memoizedProps}catch(me){yn(Z,Z.return,me)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}x&4&&(x=c.updateQueue,x!==null&&(v=x.retryQueue,v!==null&&(x.retryQueue=null,Cx(c,v))));break;case 19:So(h,c),Co(c),x&4&&(x=c.updateQueue,x!==null&&(c.updateQueue=null,Cx(c,x)));break;case 30:break;case 21:break;default:So(h,c),Co(c)}}function Co(c){var h=c.flags;if(h&2){try{for(var v,x=c.return;x!==null;){if(cA(x)){v=x;break}x=x.return}if(v==null)throw Error(r(160));switch(v.tag){case 27:var R=v.stateNode,N=xx(c);Zm(c,N,R);break;case 5:var B=v.stateNode;v.flags&32&&(dc(B,""),v.flags&=-33);var V=xx(c);Zm(c,V,B);break;case 3:case 4:var Z=v.stateNode.containerInfo,he=xx(c);wx(c,he,Z);break;default:throw Error(r(161))}}catch(Ee){yn(c,c.return,Ee)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function yA(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;yA(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function Ys(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)hA(c,h.alternate,h),h=h.sibling}function ul(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:Ks(4,h,h.return),ul(h);break;case 1:ti(h,h.return);var v=h.stateNode;typeof v.componentWillUnmount=="function"&&uA(h,h.return,v),ul(h);break;case 27:fh(h.stateNode);case 26:case 5:ti(h,h.return),ul(h);break;case 22:h.memoizedState===null&&ul(h);break;case 30:ul(h);break;default:ul(h)}c=c.sibling}}function Qs(c,h,v){for(v=v&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,R=c,N=h,B=N.flags;switch(N.tag){case 0:case 11:case 15:Qs(R,N,v),nh(4,N);break;case 1:if(Qs(R,N,v),x=N,R=x.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(he){yn(x,x.return,he)}if(x=N,R=x.updateQueue,R!==null){var V=x.stateNode;try{var Z=R.shared.hiddenCallbacks;if(Z!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Z.length;R++)q_(Z[R],V)}catch(he){yn(x,x.return,he)}}v&&B&64&&sA(N),rh(N,N.return);break;case 27:dA(N);case 26:case 5:Qs(R,N,v),v&&x===null&&B&4&&lA(N),rh(N,N.return);break;case 12:Qs(R,N,v);break;case 13:Qs(R,N,v),v&&B&4&&vA(R,N);break;case 22:N.memoizedState===null&&Qs(R,N,v),rh(N,N.return);break;case 30:break;default:Qs(R,N,v)}h=h.sibling}}function Ex(c,h){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&Wf(v))}function Rx(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Wf(c))}function ni(c,h,v,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)bA(c,h,v,x),h=h.sibling}function bA(c,h,v,x){var R=h.flags;switch(h.tag){case 0:case 11:case 15:ni(c,h,v,x),R&2048&&nh(9,h);break;case 1:ni(c,h,v,x);break;case 3:ni(c,h,v,x),R&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Wf(c)));break;case 12:if(R&2048){ni(c,h,v,x),c=h.stateNode;try{var N=h.memoizedProps,B=N.id,V=N.onPostCommit;typeof V=="function"&&V(B,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Z){yn(h,h.return,Z)}}else ni(c,h,v,x);break;case 13:ni(c,h,v,x);break;case 23:break;case 22:N=h.stateNode,B=h.alternate,h.memoizedState!==null?N._visibility&2?ni(c,h,v,x):oh(c,h):N._visibility&2?ni(c,h,v,x):(N._visibility|=2,Dc(c,h,v,x,(h.subtreeFlags&10256)!==0)),R&2048&&Ex(B,h);break;case 24:ni(c,h,v,x),R&2048&&Rx(h.alternate,h);break;default:ni(c,h,v,x)}}function Dc(c,h,v,x,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var N=c,B=h,V=v,Z=x,he=B.flags;switch(B.tag){case 0:case 11:case 15:Dc(N,B,V,Z,R),nh(8,B);break;case 23:break;case 22:var Ee=B.stateNode;B.memoizedState!==null?Ee._visibility&2?Dc(N,B,V,Z,R):oh(N,B):(Ee._visibility|=2,Dc(N,B,V,Z,R)),R&&he&2048&&Ex(B.alternate,B);break;case 24:Dc(N,B,V,Z,R),R&&he&2048&&Rx(B.alternate,B);break;default:Dc(N,B,V,Z,R)}h=h.sibling}}function oh(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var v=c,x=h,R=x.flags;switch(x.tag){case 22:oh(v,x),R&2048&&Ex(x.alternate,x);break;case 24:oh(v,x),R&2048&&Rx(x.alternate,x);break;default:oh(v,x)}h=h.sibling}}var ah=8192;function kc(c){if(c.subtreeFlags&ah)for(c=c.child;c!==null;)xA(c),c=c.sibling}function xA(c){switch(c.tag){case 26:kc(c),c.flags&ah&&c.memoizedState!==null&&a6(Da,c.memoizedState,c.memoizedProps);break;case 5:kc(c);break;case 3:case 4:var h=Da;Da=fv(c.stateNode.containerInfo),kc(c),Da=h;break;case 22:c.memoizedState===null&&(h=c.alternate,h!==null&&h.memoizedState!==null?(h=ah,ah=16777216,kc(c),ah=h):kc(c));break;default:kc(c)}}function wA(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function ih(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var x=h[v];dr=x,CA(x,c)}wA(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)SA(c),c=c.sibling}function SA(c){switch(c.tag){case 0:case 11:case 15:ih(c),c.flags&2048&&Ks(9,c,c.return);break;case 3:ih(c);break;case 12:ih(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,ev(c)):ih(c);break;default:ih(c)}}function ev(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var x=h[v];dr=x,CA(x,c)}wA(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:Ks(8,h,h.return),ev(h);break;case 22:v=h.stateNode,v._visibility&2&&(v._visibility&=-3,ev(h));break;default:ev(h)}c=c.sibling}}function CA(c,h){for(;dr!==null;){var v=dr;switch(v.tag){case 0:case 11:case 15:Ks(8,v,h);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var x=v.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Wf(v.memoizedState.cache)}if(x=v.child,x!==null)x.return=v,dr=x;else e:for(v=c;dr!==null;){x=dr;var R=x.sibling,N=x.return;if(pA(x),x===v){dr=null;break e}if(R!==null){R.return=N,dr=R;break e}dr=N}}}var wU={getCacheForType:function(c){var h=Ir(rr),v=h.data.get(c);return v===void 0&&(v=c(),h.data.set(c,v)),v}},SU=typeof WeakMap=="function"?WeakMap:Map,un=0,xn=null,kt=null,Vt=0,ln=0,Eo=null,Js=!1,Ic=!1,_x=!1,Zi=0,Bn=0,Zs=0,ll=0,Tx=0,ra=0,Mc=0,sh=null,so=null,Ax=!1,Nx=0,tv=1/0,nv=null,eu=null,xr=0,tu=null,Oc=null,Pc=0,Dx=0,kx=null,EA=null,uh=0,Ix=null;function Ro(){if((un&2)!==0&&Vt!==0)return Vt&-Vt;if(P.T!==null){var c=Sc;return c!==0?c:jx()}return Ja()}function RA(){ra===0&&(ra=(Vt&536870912)===0||Zt?mt():536870912);var c=na.current;return c!==null&&(c.flags|=32),ra}function _o(c,h,v){(c===xn&&(ln===2||ln===9)||c.cancelPendingCommit!==null)&&(Fc(c,0),nu(c,Vt,ra,!1)),Ft(c,v),((un&2)===0||c!==xn)&&(c===xn&&((un&2)===0&&(ll|=v),Bn===4&&nu(c,Vt,ra,!1)),ri(c))}function _A(c,h,v){if((un&6)!==0)throw Error(r(327));var x=!v&&(h&124)===0&&(h&c.expiredLanes)===0||_n(c,h),R=x?RU(c,h):Px(c,h,!0),N=x;do{if(R===0){Ic&&!x&&nu(c,h,0,!1);break}else{if(v=c.current.alternate,N&&!CU(v)){R=Px(c,h,!1),N=!1;continue}if(R===2){if(N=h,c.errorRecoveryDisabledLanes&N)var B=0;else B=c.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){h=B;e:{var V=c;R=sh;var Z=V.current.memoizedState.isDehydrated;if(Z&&(Fc(V,B).flags|=256),B=Px(V,B,!1),B!==2){if(_x&&!Z){V.errorRecoveryDisabledLanes|=N,ll|=N,R=4;break e}N=so,so=R,N!==null&&(so===null?so=N:so.push.apply(so,N))}R=B}if(N=!1,R!==2)continue}}if(R===1){Fc(c,0),nu(c,h,0,!0);break}e:{switch(x=c,N=R,N){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:nu(x,h,ra,!Js);break e;case 2:so=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(R=Nx+300-Ie(),10<R)){if(nu(x,h,ra,!Js),Aa(x,0,!0)!==0)break e;x.timeoutHandle=tN(TA.bind(null,x,v,so,nv,Ax,h,ra,ll,Mc,Js,N,2,-0,0),R);break e}TA(x,v,so,nv,Ax,h,ra,ll,Mc,Js,N,0,-0,0)}}break}while(!0);ri(c)}function TA(c,h,v,x,R,N,B,V,Z,he,Ee,Ae,pe,me){if(c.timeoutHandle=-1,Ae=h.subtreeFlags,(Ae&8192||(Ae&16785408)===16785408)&&(mh={stylesheets:null,count:0,unsuspend:o6},xA(h),Ae=i6(),Ae!==null)){c.cancelPendingCommit=Ae(OA.bind(null,c,h,N,v,x,R,B,V,Z,Ee,1,pe,me)),nu(c,N,B,!he);return}OA(c,h,N,v,x,R,B,V,Z)}function CU(c){for(var h=c;;){var v=h.tag;if((v===0||v===11||v===15)&&h.flags&16384&&(v=h.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var x=0;x<v.length;x++){var R=v[x],N=R.getSnapshot;R=R.value;try{if(!xo(N(),R))return!1}catch{return!1}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function nu(c,h,v,x){h&=~Tx,h&=~ll,c.suspendedLanes|=h,c.pingedLanes&=~h,x&&(c.warmLanes|=h),x=c.expirationTimes;for(var R=h;0<R;){var N=31-Ot(R),B=1<<N;x[N]=-1,R&=~B}v!==0&&sn(c,v,h)}function rv(){return(un&6)===0?(lh(0),!1):!0}function Mx(){if(kt!==null){if(ln===0)var c=kt.return;else c=kt,Gi=rl=null,Yb(c),Ac=null,Zf=0,c=kt;for(;c!==null;)iA(c.alternate,c),c=c.return;kt=null}}function Fc(c,h){var v=c.timeoutHandle;v!==-1&&(c.timeoutHandle=-1,UU(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),Mx(),xn=c,kt=v=Wi(c.current,null),Vt=h,ln=0,Eo=null,Js=!1,Ic=_n(c,h),_x=!1,Mc=ra=Tx=ll=Zs=Bn=0,so=sh=null,Ax=!1,(h&8)!==0&&(h|=h&32);var x=c.entangledLanes;if(x!==0)for(c=c.entanglements,x&=h;0<x;){var R=31-Ot(x),N=1<<R;h|=c[R],x&=~N}return Zi=h,Rm(),v}function AA(c,h){At=null,P.H=Hm,h===Hf||h===Om?(h=G_(),ln=3):h===W_?(h=G_(),ln=4):ln=h===$T?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Eo=h,kt===null&&(Bn=1,Km(c,Jo(h,c.current)))}function NA(){var c=P.H;return P.H=Hm,c===null?Hm:c}function DA(){var c=P.A;return P.A=wU,c}function Ox(){Bn=4,Js||(Vt&4194048)!==Vt&&na.current!==null||(Ic=!0),(Zs&134217727)===0&&(ll&134217727)===0||xn===null||nu(xn,Vt,ra,!1)}function Px(c,h,v){var x=un;un|=2;var R=NA(),N=DA();(xn!==c||Vt!==h)&&(nv=null,Fc(c,h)),h=!1;var B=Bn;e:do try{if(ln!==0&&kt!==null){var V=kt,Z=Eo;switch(ln){case 8:Mx(),B=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(h=!0);var he=ln;if(ln=0,Eo=null,Bc(c,V,Z,he),v&&Ic){B=0;break e}break;default:he=ln,ln=0,Eo=null,Bc(c,V,Z,he)}}EU(),B=Bn;break}catch(Ee){AA(c,Ee)}while(!0);return h&&c.shellSuspendCounter++,Gi=rl=null,un=x,P.H=R,P.A=N,kt===null&&(xn=null,Vt=0,Rm()),B}function EU(){for(;kt!==null;)kA(kt)}function RU(c,h){var v=un;un|=2;var x=NA(),R=DA();xn!==c||Vt!==h?(nv=null,tv=Ie()+500,Fc(c,h)):Ic=_n(c,h);e:do try{if(ln!==0&&kt!==null){h=kt;var N=Eo;t:switch(ln){case 1:ln=0,Eo=null,Bc(c,h,N,1);break;case 2:case 9:if(V_(N)){ln=0,Eo=null,IA(h);break}h=function(){ln!==2&&ln!==9||xn!==c||(ln=7),ri(c)},N.then(h,h);break e;case 3:ln=7;break e;case 4:ln=5;break e;case 7:V_(N)?(ln=0,Eo=null,IA(h)):(ln=0,Eo=null,Bc(c,h,N,7));break;case 5:var B=null;switch(kt.tag){case 26:B=kt.memoizedState;case 5:case 27:var V=kt;if(!B||hN(B)){ln=0,Eo=null;var Z=V.sibling;if(Z!==null)kt=Z;else{var he=V.return;he!==null?(kt=he,ov(he)):kt=null}break t}}ln=0,Eo=null,Bc(c,h,N,5);break;case 6:ln=0,Eo=null,Bc(c,h,N,6);break;case 8:Mx(),Bn=6;break e;default:throw Error(r(462))}}_U();break}catch(Ee){AA(c,Ee)}while(!0);return Gi=rl=null,P.H=x,P.A=R,un=v,kt!==null?0:(xn=null,Vt=0,Rm(),Bn)}function _U(){for(;kt!==null&&!nt();)kA(kt)}function kA(c){var h=oA(c.alternate,c,Zi);c.memoizedProps=c.pendingProps,h===null?ov(c):kt=h}function IA(c){var h=c,v=h.alternate;switch(h.tag){case 15:case 0:h=JT(v,h,h.pendingProps,h.type,void 0,Vt);break;case 11:h=JT(v,h,h.pendingProps,h.type.render,h.ref,Vt);break;case 5:Yb(h);default:iA(v,h),h=kt=M_(h,Zi),h=oA(v,h,Zi)}c.memoizedProps=c.pendingProps,h===null?ov(c):kt=h}function Bc(c,h,v,x){Gi=rl=null,Yb(h),Ac=null,Zf=0;var R=h.return;try{if(mU(c,R,h,v,Vt)){Bn=1,Km(c,Jo(v,c.current)),kt=null;return}}catch(N){if(R!==null)throw kt=R,N;Bn=1,Km(c,Jo(v,c.current)),kt=null;return}h.flags&32768?(Zt||x===1?c=!0:Ic||(Vt&536870912)!==0?c=!1:(Js=c=!0,(x===2||x===9||x===3||x===6)&&(x=na.current,x!==null&&x.tag===13&&(x.flags|=16384))),MA(h,c)):ov(h)}function ov(c){var h=c;do{if((h.flags&32768)!==0){MA(h,Js);return}c=h.return;var v=gU(h.alternate,h,Zi);if(v!==null){kt=v;return}if(h=h.sibling,h!==null){kt=h;return}kt=h=c}while(h!==null);Bn===0&&(Bn=5)}function MA(c,h){do{var v=yU(c.alternate,c);if(v!==null){v.flags&=32767,kt=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!h&&(c=c.sibling,c!==null)){kt=c;return}kt=c=v}while(c!==null);Bn=6,kt=null}function OA(c,h,v,x,R,N,B,V,Z){c.cancelPendingCommit=null;do av();while(xr!==0);if((un&6)!==0)throw Error(r(327));if(h!==null){if(h===c.current)throw Error(r(177));if(N=h.lanes|h.childLanes,N|=Rb,an(c,v,N,B,V,Z),c===xn&&(kt=xn=null,Vt=0),Oc=h,tu=c,Pc=v,Dx=N,kx=R,EA=x,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,DU(ct,function(){return jA(),null})):(c.callbackNode=null,c.callbackPriority=0),x=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||x){x=P.T,P.T=null,R=z.p,z.p=2,B=un,un|=4;try{bU(c,h,v)}finally{un=B,z.p=R,P.T=x}}xr=1,PA(),FA(),BA()}}function PA(){if(xr===1){xr=0;var c=tu,h=Oc,v=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||v){v=P.T,P.T=null;var x=z.p;z.p=2;var R=un;un|=4;try{gA(h,c);var N=qx,B=C_(c.containerInfo),V=N.focusedElem,Z=N.selectionRange;if(B!==V&&V&&V.ownerDocument&&S_(V.ownerDocument.documentElement,V)){if(Z!==null&&xb(V)){var he=Z.start,Ee=Z.end;if(Ee===void 0&&(Ee=he),"selectionStart"in V)V.selectionStart=he,V.selectionEnd=Math.min(Ee,V.value.length);else{var Ae=V.ownerDocument||document,pe=Ae&&Ae.defaultView||window;if(pe.getSelection){var me=pe.getSelection(),vt=V.textContent.length,ht=Math.min(Z.start,vt),hn=Z.end===void 0?ht:Math.min(Z.end,vt);!me.extend&&ht>hn&&(B=hn,hn=ht,ht=B);var ue=w_(V,ht),re=w_(V,hn);if(ue&&re&&(me.rangeCount!==1||me.anchorNode!==ue.node||me.anchorOffset!==ue.offset||me.focusNode!==re.node||me.focusOffset!==re.offset)){var de=Ae.createRange();de.setStart(ue.node,ue.offset),me.removeAllRanges(),ht>hn?(me.addRange(de),me.extend(re.node,re.offset)):(de.setEnd(re.node,re.offset),me.addRange(de))}}}}for(Ae=[],me=V;me=me.parentNode;)me.nodeType===1&&Ae.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<Ae.length;V++){var _e=Ae[V];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}gv=!!$x,qx=$x=null}finally{un=R,z.p=x,P.T=v}}c.current=h,xr=2}}function FA(){if(xr===2){xr=0;var c=tu,h=Oc,v=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||v){v=P.T,P.T=null;var x=z.p;z.p=2;var R=un;un|=4;try{hA(c,h.alternate,h)}finally{un=R,z.p=x,P.T=v}}xr=3}}function BA(){if(xr===4||xr===3){xr=0,it();var c=tu,h=Oc,v=Pc,x=EA;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?xr=5:(xr=0,Oc=tu=null,LA(c,c.pendingLanes));var R=c.pendingLanes;if(R===0&&(eu=null),sc(v),h=h.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Ve,h,void 0,(h.current.flags&128)===128)}catch{}if(x!==null){h=P.T,R=z.p,z.p=2,P.T=null;try{for(var N=c.onRecoverableError,B=0;B<x.length;B++){var V=x[B];N(V.value,{componentStack:V.stack})}}finally{P.T=h,z.p=R}}(Pc&3)!==0&&av(),ri(c),R=c.pendingLanes,(v&4194090)!==0&&(R&42)!==0?c===Ix?uh++:(uh=0,Ix=c):uh=0,lh(0)}}function LA(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,Wf(h)))}function av(c){return PA(),FA(),BA(),jA()}function jA(){if(xr!==5)return!1;var c=tu,h=Dx;Dx=0;var v=sc(Pc),x=P.T,R=z.p;try{z.p=32>v?32:v,P.T=null,v=kx,kx=null;var N=tu,B=Pc;if(xr=0,Oc=tu=null,Pc=0,(un&6)!==0)throw Error(r(331));var V=un;if(un|=4,SA(N.current),bA(N,N.current,B,v),un=V,lh(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Ve,N)}catch{}return!0}finally{z.p=R,P.T=x,LA(c,h)}}function zA(c,h,v){h=Jo(v,h),h=cx(c.stateNode,h,2),c=Gs(c,h,2),c!==null&&(Ft(c,2),ri(c))}function yn(c,h,v){if(c.tag===3)zA(c,c,v);else for(;h!==null;){if(h.tag===3){zA(h,c,v);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(eu===null||!eu.has(x))){c=Jo(v,c),v=HT(2),x=Gs(h,v,2),x!==null&&(GT(v,x,h,c),Ft(x,2),ri(x));break}}h=h.return}}function Fx(c,h,v){var x=c.pingCache;if(x===null){x=c.pingCache=new SU;var R=new Set;x.set(h,R)}else R=x.get(h),R===void 0&&(R=new Set,x.set(h,R));R.has(v)||(_x=!0,R.add(v),c=TU.bind(null,c,h,v),h.then(c,c))}function TU(c,h,v){var x=c.pingCache;x!==null&&x.delete(h),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,xn===c&&(Vt&v)===v&&(Bn===4||Bn===3&&(Vt&62914560)===Vt&&300>Ie()-Nx?(un&2)===0&&Fc(c,0):Tx|=v,Mc===Vt&&(Mc=0)),ri(c)}function UA(c,h){h===0&&(h=Pt()),c=yc(c,h),c!==null&&(Ft(c,h),ri(c))}function AU(c){var h=c.memoizedState,v=0;h!==null&&(v=h.retryLane),UA(c,v)}function NU(c,h){var v=0;switch(c.tag){case 13:var x=c.stateNode,R=c.memoizedState;R!==null&&(v=R.retryLane);break;case 19:x=c.stateNode;break;case 22:x=c.stateNode._retryCache;break;default:throw Error(r(314))}x!==null&&x.delete(h),UA(c,v)}function DU(c,h){return ke(c,h)}var iv=null,Lc=null,Bx=!1,sv=!1,Lx=!1,cl=0;function ri(c){c!==Lc&&c.next===null&&(Lc===null?iv=Lc=c:Lc=Lc.next=c),sv=!0,Bx||(Bx=!0,IU())}function lh(c,h){if(!Lx&&sv){Lx=!0;do for(var v=!1,x=iv;x!==null;){if(c!==0){var R=x.pendingLanes;if(R===0)var N=0;else{var B=x.suspendedLanes,V=x.pingedLanes;N=(1<<31-Ot(42|c)+1)-1,N&=R&~(B&~V),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(v=!0,GA(x,N))}else N=Vt,N=Aa(x,x===xn?N:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(N&3)===0||_n(x,N)||(v=!0,GA(x,N));x=x.next}while(v);Lx=!1}}function kU(){WA()}function WA(){sv=Bx=!1;var c=0;cl!==0&&(zU()&&(c=cl),cl=0);for(var h=Ie(),v=null,x=iv;x!==null;){var R=x.next,N=VA(x,h);N===0?(x.next=null,v===null?iv=R:v.next=R,R===null&&(Lc=v)):(v=x,(c!==0||(N&3)!==0)&&(sv=!0)),x=R}lh(c)}function VA(c,h){for(var v=c.suspendedLanes,x=c.pingedLanes,R=c.expirationTimes,N=c.pendingLanes&-62914561;0<N;){var B=31-Ot(N),V=1<<B,Z=R[B];Z===-1?((V&v)===0||(V&x)!==0)&&(R[B]=Qa(V,h)):Z<=h&&(c.expiredLanes|=V),N&=~V}if(h=xn,v=Vt,v=Aa(c,c===h?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),x=c.callbackNode,v===0||c===h&&(ln===2||ln===9)||c.cancelPendingCommit!==null)return x!==null&&x!==null&&qe(x),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||_n(c,v)){if(h=v&-v,h===c.callbackPriority)return h;switch(x!==null&&qe(x),sc(v)){case 2:case 8:v=Je;break;case 32:v=ct;break;case 268435456:v=$e;break;default:v=ct}return x=HA.bind(null,c),v=ke(v,x),c.callbackPriority=h,c.callbackNode=v,h}return x!==null&&x!==null&&qe(x),c.callbackPriority=2,c.callbackNode=null,2}function HA(c,h){if(xr!==0&&xr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var v=c.callbackNode;if(av()&&c.callbackNode!==v)return null;var x=Vt;return x=Aa(c,c===xn?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),x===0?null:(_A(c,x,h),VA(c,Ie()),c.callbackNode!=null&&c.callbackNode===v?HA.bind(null,c):null)}function GA(c,h){if(av())return null;_A(c,h,!0)}function IU(){WU(function(){(un&6)!==0?ke(Be,kU):WA()})}function jx(){return cl===0&&(cl=mt()),cl}function $A(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:ym(""+c)}function qA(c,h){var v=h.ownerDocument.createElement("input");return v.name=h.name,v.value=h.value,c.id&&v.setAttribute("form",c.id),h.parentNode.insertBefore(v,h),c=new FormData(c),v.parentNode.removeChild(v),c}function MU(c,h,v,x,R){if(h==="submit"&&v&&v.stateNode===R){var N=$A((R[nr]||null).action),B=x.submitter;B&&(h=(h=B[nr]||null)?$A(h.formAction):B.getAttribute("formAction"),h!==null&&(N=h,B=null));var V=new Sm("action","action",null,x,R);c.push({event:V,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(cl!==0){var Z=B?qA(R,B):new FormData(R);ax(v,{pending:!0,data:Z,method:R.method,action:N},null,Z)}}else typeof N=="function"&&(V.preventDefault(),Z=B?qA(R,B):new FormData(R),ax(v,{pending:!0,data:Z,method:R.method,action:N},N,Z))},currentTarget:R}]})}}for(var zx=0;zx<Eb.length;zx++){var Ux=Eb[zx],OU=Ux.toLowerCase(),PU=Ux[0].toUpperCase()+Ux.slice(1);Na(OU,"on"+PU)}Na(__,"onAnimationEnd"),Na(T_,"onAnimationIteration"),Na(A_,"onAnimationStart"),Na("dblclick","onDoubleClick"),Na("focusin","onFocus"),Na("focusout","onBlur"),Na(J5,"onTransitionRun"),Na(Z5,"onTransitionStart"),Na(eU,"onTransitionCancel"),Na(N_,"onTransitionEnd"),uc("onMouseEnter",["mouseout","mouseover"]),uc("onMouseLeave",["mouseout","mouseover"]),uc("onPointerEnter",["pointerout","pointerover"]),uc("onPointerLeave",["pointerout","pointerover"]),Xu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xu("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ch));function XA(c,h){h=(h&4)!==0;for(var v=0;v<c.length;v++){var x=c[v],R=x.event;x=x.listeners;e:{var N=void 0;if(h)for(var B=x.length-1;0<=B;B--){var V=x[B],Z=V.instance,he=V.currentTarget;if(V=V.listener,Z!==N&&R.isPropagationStopped())break e;N=V,R.currentTarget=he;try{N(R)}catch(Ee){Xm(Ee)}R.currentTarget=null,N=Z}else for(B=0;B<x.length;B++){if(V=x[B],Z=V.instance,he=V.currentTarget,V=V.listener,Z!==N&&R.isPropagationStopped())break e;N=V,R.currentTarget=he;try{N(R)}catch(Ee){Xm(Ee)}R.currentTarget=null,N=Z}}}}function It(c,h){var v=h[Ls];v===void 0&&(v=h[Ls]=new Set);var x=c+"__bubble";v.has(x)||(KA(h,c,2,!1),v.add(x))}function Wx(c,h,v){var x=0;h&&(x|=4),KA(v,c,x,h)}var uv="_reactListening"+Math.random().toString(36).slice(2);function Vx(c){if(!c[uv]){c[uv]=!0,hm.forEach(function(v){v!=="selectionchange"&&(FU.has(v)||Wx(v,!1,c),Wx(v,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[uv]||(h[uv]=!0,Wx("selectionchange",!1,h))}}function KA(c,h,v,x){switch(bN(h)){case 2:var R=l6;break;case 8:R=c6;break;default:R=r1}v=R.bind(null,h,v,c),R=void 0,!db||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(R=!0),x?R!==void 0?c.addEventListener(h,v,{capture:!0,passive:R}):c.addEventListener(h,v,!0):R!==void 0?c.addEventListener(h,v,{passive:R}):c.addEventListener(h,v,!1)}function Hx(c,h,v,x,R){var N=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var B=x.tag;if(B===3||B===4){var V=x.stateNode.containerInfo;if(V===R)break;if(B===4)for(B=x.return;B!==null;){var Z=B.tag;if((Z===3||Z===4)&&B.stateNode.containerInfo===R)return;B=B.return}for(;V!==null;){if(B=ji(V),B===null)return;if(Z=B.tag,Z===5||Z===6||Z===26||Z===27){x=N=B;continue e}V=V.parentNode}}x=x.return}n_(function(){var he=N,Ee=lb(v),Ae=[];e:{var pe=D_.get(c);if(pe!==void 0){var me=Sm,vt=c;switch(c){case"keypress":if(xm(v)===0)break e;case"keydown":case"keyup":me=D5;break;case"focusin":vt="focus",me=mb;break;case"focusout":vt="blur",me=mb;break;case"beforeblur":case"afterblur":me=mb;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=a_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=y5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=M5;break;case __:case T_:case A_:me=w5;break;case N_:me=P5;break;case"scroll":case"scrollend":me=v5;break;case"wheel":me=B5;break;case"copy":case"cut":case"paste":me=C5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=s_;break;case"toggle":case"beforetoggle":me=j5}var ht=(h&4)!==0,hn=!ht&&(c==="scroll"||c==="scrollend"),ue=ht?pe!==null?pe+"Capture":null:pe;ht=[];for(var re=he,de;re!==null;){var _e=re;if(de=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||de===null||ue===null||(_e=Nf(re,ue),_e!=null&&ht.push(dh(re,_e,de))),hn)break;re=re.return}0<ht.length&&(pe=new me(pe,vt,null,v,Ee),Ae.push({event:pe,listeners:ht}))}}if((h&7)===0){e:{if(pe=c==="mouseover"||c==="pointerover",me=c==="mouseout"||c==="pointerout",pe&&v!==ub&&(vt=v.relatedTarget||v.fromElement)&&(ji(vt)||vt[Bs]))break e;if((me||pe)&&(pe=Ee.window===Ee?Ee:(pe=Ee.ownerDocument)?pe.defaultView||pe.parentWindow:window,me?(vt=v.relatedTarget||v.toElement,me=he,vt=vt?ji(vt):null,vt!==null&&(hn=a(vt),ht=vt.tag,vt!==hn||ht!==5&&ht!==27&&ht!==6)&&(vt=null)):(me=null,vt=he),me!==vt)){if(ht=a_,_e="onMouseLeave",ue="onMouseEnter",re="mouse",(c==="pointerout"||c==="pointerover")&&(ht=s_,_e="onPointerLeave",ue="onPointerEnter",re="pointer"),hn=me==null?pe:zs(me),de=vt==null?pe:zs(vt),pe=new ht(_e,re+"leave",me,v,Ee),pe.target=hn,pe.relatedTarget=de,_e=null,ji(Ee)===he&&(ht=new ht(ue,re+"enter",vt,v,Ee),ht.target=de,ht.relatedTarget=hn,_e=ht),hn=_e,me&&vt)t:{for(ht=me,ue=vt,re=0,de=ht;de;de=jc(de))re++;for(de=0,_e=ue;_e;_e=jc(_e))de++;for(;0<re-de;)ht=jc(ht),re--;for(;0<de-re;)ue=jc(ue),de--;for(;re--;){if(ht===ue||ue!==null&&ht===ue.alternate)break t;ht=jc(ht),ue=jc(ue)}ht=null}else ht=null;me!==null&&YA(Ae,pe,me,ht,!1),vt!==null&&hn!==null&&YA(Ae,hn,vt,ht,!0)}}e:{if(pe=he?zs(he):window,me=pe.nodeName&&pe.nodeName.toLowerCase(),me==="select"||me==="input"&&pe.type==="file")var Xe=m_;else if(h_(pe))if(v_)Xe=K5;else{Xe=q5;var Nt=$5}else me=pe.nodeName,!me||me.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?he&&sb(he.elementType)&&(Xe=m_):Xe=X5;if(Xe&&(Xe=Xe(c,he))){p_(Ae,Xe,v,Ee);break e}Nt&&Nt(c,pe,he),c==="focusout"&&he&&pe.type==="number"&&he.memoizedProps.value!=null&&ib(pe,"number",pe.value)}switch(Nt=he?zs(he):window,c){case"focusin":(h_(Nt)||Nt.contentEditable==="true")&&(mc=Nt,wb=he,Bf=null);break;case"focusout":Bf=wb=mc=null;break;case"mousedown":Sb=!0;break;case"contextmenu":case"mouseup":case"dragend":Sb=!1,E_(Ae,v,Ee);break;case"selectionchange":if(Q5)break;case"keydown":case"keyup":E_(Ae,v,Ee)}var ot;if(gb)e:{switch(c){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else pc?d_(c,v)&&(pt="onCompositionEnd"):c==="keydown"&&v.keyCode===229&&(pt="onCompositionStart");pt&&(u_&&v.locale!=="ko"&&(pc||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&pc&&(ot=r_()):(Us=Ee,fb="value"in Us?Us.value:Us.textContent,pc=!0)),Nt=lv(he,pt),0<Nt.length&&(pt=new i_(pt,c,null,v,Ee),Ae.push({event:pt,listeners:Nt}),ot?pt.data=ot:(ot=f_(v),ot!==null&&(pt.data=ot)))),(ot=U5?W5(c,v):V5(c,v))&&(pt=lv(he,"onBeforeInput"),0<pt.length&&(Nt=new i_("onBeforeInput","beforeinput",null,v,Ee),Ae.push({event:Nt,listeners:pt}),Nt.data=ot)),MU(Ae,c,he,v,Ee)}XA(Ae,h)})}function dh(c,h,v){return{instance:c,listener:h,currentTarget:v}}function lv(c,h){for(var v=h+"Capture",x=[];c!==null;){var R=c,N=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||N===null||(R=Nf(c,v),R!=null&&x.unshift(dh(c,R,N)),R=Nf(c,h),R!=null&&x.push(dh(c,R,N))),c.tag===3)return x;c=c.return}return[]}function jc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function YA(c,h,v,x,R){for(var N=h._reactName,B=[];v!==null&&v!==x;){var V=v,Z=V.alternate,he=V.stateNode;if(V=V.tag,Z!==null&&Z===x)break;V!==5&&V!==26&&V!==27||he===null||(Z=he,R?(he=Nf(v,N),he!=null&&B.unshift(dh(v,he,Z))):R||(he=Nf(v,N),he!=null&&B.push(dh(v,he,Z)))),v=v.return}B.length!==0&&c.push({event:h,listeners:B})}var BU=/\r\n?/g,LU=/\u0000|\uFFFD/g;function QA(c){return(typeof c=="string"?c:""+c).replace(BU,`
`).replace(LU,"")}function JA(c,h){return h=QA(h),QA(c)===h}function cv(){}function fn(c,h,v,x,R,N){switch(v){case"children":typeof x=="string"?h==="body"||h==="textarea"&&x===""||dc(c,x):(typeof x=="number"||typeof x=="bigint")&&h!=="body"&&dc(c,""+x);break;case"className":mm(c,"class",x);break;case"tabIndex":mm(c,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":mm(c,v,x);break;case"style":e_(c,x,N);break;case"data":if(h!=="object"){mm(c,"data",x);break}case"src":case"href":if(x===""&&(h!=="a"||v!=="href")){c.removeAttribute(v);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){c.removeAttribute(v);break}x=ym(""+x),c.setAttribute(v,x);break;case"action":case"formAction":if(typeof x=="function"){c.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(v==="formAction"?(h!=="input"&&fn(c,h,"name",R.name,R,null),fn(c,h,"formEncType",R.formEncType,R,null),fn(c,h,"formMethod",R.formMethod,R,null),fn(c,h,"formTarget",R.formTarget,R,null)):(fn(c,h,"encType",R.encType,R,null),fn(c,h,"method",R.method,R,null),fn(c,h,"target",R.target,R,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){c.removeAttribute(v);break}x=ym(""+x),c.setAttribute(v,x);break;case"onClick":x!=null&&(c.onclick=cv);break;case"onScroll":x!=null&&It("scroll",c);break;case"onScrollEnd":x!=null&&It("scrollend",c);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(v=x.__html,v!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=v}}break;case"multiple":c.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":c.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){c.removeAttribute("xlink:href");break}v=ym(""+x),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?c.setAttribute(v,""+x):c.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?c.setAttribute(v,""):c.removeAttribute(v);break;case"capture":case"download":x===!0?c.setAttribute(v,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?c.setAttribute(v,x):c.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?c.setAttribute(v,x):c.removeAttribute(v);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?c.removeAttribute(v):c.setAttribute(v,x);break;case"popover":It("beforetoggle",c),It("toggle",c),pm(c,"popover",x);break;case"xlinkActuate":zi(c,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":zi(c,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":zi(c,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":zi(c,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":zi(c,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":zi(c,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":zi(c,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":zi(c,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":zi(c,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":pm(c,"is",x);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=p5.get(v)||v,pm(c,v,x))}}function Gx(c,h,v,x,R,N){switch(v){case"style":e_(c,x,N);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(r(61));if(v=x.__html,v!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=v}}break;case"children":typeof x=="string"?dc(c,x):(typeof x=="number"||typeof x=="bigint")&&dc(c,""+x);break;case"onScroll":x!=null&&It("scroll",c);break;case"onScrollEnd":x!=null&&It("scrollend",c);break;case"onClick":x!=null&&(c.onclick=cv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!VR.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(R=v.endsWith("Capture"),h=v.slice(2,R?v.length-7:void 0),N=c[nr]||null,N=N!=null?N[v]:null,typeof N=="function"&&c.removeEventListener(h,N,R),typeof x=="function")){typeof N!="function"&&N!==null&&(v in c?c[v]=null:c.hasAttribute(v)&&c.removeAttribute(v)),c.addEventListener(h,x,R);break e}v in c?c[v]=x:x===!0?c.setAttribute(v,""):pm(c,v,x)}}}function wr(c,h,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",c),It("load",c);var x=!1,R=!1,N;for(N in v)if(v.hasOwnProperty(N)){var B=v[N];if(B!=null)switch(N){case"src":x=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:fn(c,h,N,B,v,null)}}R&&fn(c,h,"srcSet",v.srcSet,v,null),x&&fn(c,h,"src",v.src,v,null);return;case"input":It("invalid",c);var V=N=B=R=null,Z=null,he=null;for(x in v)if(v.hasOwnProperty(x)){var Ee=v[x];if(Ee!=null)switch(x){case"name":R=Ee;break;case"type":B=Ee;break;case"checked":Z=Ee;break;case"defaultChecked":he=Ee;break;case"value":N=Ee;break;case"defaultValue":V=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,h));break;default:fn(c,h,x,Ee,v,null)}}YR(c,N,V,Z,he,B,R,!1),vm(c);return;case"select":It("invalid",c),x=B=N=null;for(R in v)if(v.hasOwnProperty(R)&&(V=v[R],V!=null))switch(R){case"value":N=V;break;case"defaultValue":B=V;break;case"multiple":x=V;default:fn(c,h,R,V,v,null)}h=N,v=B,c.multiple=!!x,h!=null?cc(c,!!x,h,!1):v!=null&&cc(c,!!x,v,!0);return;case"textarea":It("invalid",c),N=R=x=null;for(B in v)if(v.hasOwnProperty(B)&&(V=v[B],V!=null))switch(B){case"value":x=V;break;case"defaultValue":R=V;break;case"children":N=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:fn(c,h,B,V,v,null)}JR(c,x,R,N),vm(c);return;case"option":for(Z in v)if(v.hasOwnProperty(Z)&&(x=v[Z],x!=null))switch(Z){case"selected":c.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:fn(c,h,Z,x,v,null)}return;case"dialog":It("beforetoggle",c),It("toggle",c),It("cancel",c),It("close",c);break;case"iframe":case"object":It("load",c);break;case"video":case"audio":for(x=0;x<ch.length;x++)It(ch[x],c);break;case"image":It("error",c),It("load",c);break;case"details":It("toggle",c);break;case"embed":case"source":case"link":It("error",c),It("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in v)if(v.hasOwnProperty(he)&&(x=v[he],x!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:fn(c,h,he,x,v,null)}return;default:if(sb(h)){for(Ee in v)v.hasOwnProperty(Ee)&&(x=v[Ee],x!==void 0&&Gx(c,h,Ee,x,v,void 0));return}}for(V in v)v.hasOwnProperty(V)&&(x=v[V],x!=null&&fn(c,h,V,x,v,null))}function jU(c,h,v,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,N=null,B=null,V=null,Z=null,he=null,Ee=null;for(me in v){var Ae=v[me];if(v.hasOwnProperty(me)&&Ae!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":Z=Ae;default:x.hasOwnProperty(me)||fn(c,h,me,null,x,Ae)}}for(var pe in x){var me=x[pe];if(Ae=v[pe],x.hasOwnProperty(pe)&&(me!=null||Ae!=null))switch(pe){case"type":N=me;break;case"name":R=me;break;case"checked":he=me;break;case"defaultChecked":Ee=me;break;case"value":B=me;break;case"defaultValue":V=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,h));break;default:me!==Ae&&fn(c,h,pe,me,x,Ae)}}ab(c,B,V,Z,he,Ee,N,R);return;case"select":me=B=V=pe=null;for(N in v)if(Z=v[N],v.hasOwnProperty(N)&&Z!=null)switch(N){case"value":break;case"multiple":me=Z;default:x.hasOwnProperty(N)||fn(c,h,N,null,x,Z)}for(R in x)if(N=x[R],Z=v[R],x.hasOwnProperty(R)&&(N!=null||Z!=null))switch(R){case"value":pe=N;break;case"defaultValue":V=N;break;case"multiple":B=N;default:N!==Z&&fn(c,h,R,N,x,Z)}h=V,v=B,x=me,pe!=null?cc(c,!!v,pe,!1):!!x!=!!v&&(h!=null?cc(c,!!v,h,!0):cc(c,!!v,v?[]:"",!1));return;case"textarea":me=pe=null;for(V in v)if(R=v[V],v.hasOwnProperty(V)&&R!=null&&!x.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:fn(c,h,V,null,x,R)}for(B in x)if(R=x[B],N=v[B],x.hasOwnProperty(B)&&(R!=null||N!=null))switch(B){case"value":pe=R;break;case"defaultValue":me=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==N&&fn(c,h,B,R,x,N)}QR(c,pe,me);return;case"option":for(var vt in v)if(pe=v[vt],v.hasOwnProperty(vt)&&pe!=null&&!x.hasOwnProperty(vt))switch(vt){case"selected":c.selected=!1;break;default:fn(c,h,vt,null,x,pe)}for(Z in x)if(pe=x[Z],me=v[Z],x.hasOwnProperty(Z)&&pe!==me&&(pe!=null||me!=null))switch(Z){case"selected":c.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:fn(c,h,Z,pe,x,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in v)pe=v[ht],v.hasOwnProperty(ht)&&pe!=null&&!x.hasOwnProperty(ht)&&fn(c,h,ht,null,x,pe);for(he in x)if(pe=x[he],me=v[he],x.hasOwnProperty(he)&&pe!==me&&(pe!=null||me!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,h));break;default:fn(c,h,he,pe,x,me)}return;default:if(sb(h)){for(var hn in v)pe=v[hn],v.hasOwnProperty(hn)&&pe!==void 0&&!x.hasOwnProperty(hn)&&Gx(c,h,hn,void 0,x,pe);for(Ee in x)pe=x[Ee],me=v[Ee],!x.hasOwnProperty(Ee)||pe===me||pe===void 0&&me===void 0||Gx(c,h,Ee,pe,x,me);return}}for(var ue in v)pe=v[ue],v.hasOwnProperty(ue)&&pe!=null&&!x.hasOwnProperty(ue)&&fn(c,h,ue,null,x,pe);for(Ae in x)pe=x[Ae],me=v[Ae],!x.hasOwnProperty(Ae)||pe===me||pe==null&&me==null||fn(c,h,Ae,pe,x,me)}var $x=null,qx=null;function dv(c){return c.nodeType===9?c:c.ownerDocument}function ZA(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eN(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function Xx(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Kx=null;function zU(){var c=window.event;return c&&c.type==="popstate"?c===Kx?!1:(Kx=c,!0):(Kx=null,!1)}var tN=typeof setTimeout=="function"?setTimeout:void 0,UU=typeof clearTimeout=="function"?clearTimeout:void 0,nN=typeof Promise=="function"?Promise:void 0,WU=typeof queueMicrotask=="function"?queueMicrotask:typeof nN<"u"?function(c){return nN.resolve(null).then(c).catch(VU)}:tN;function VU(c){setTimeout(function(){throw c})}function ru(c){return c==="head"}function rN(c,h){var v=h,x=0,R=0;do{var N=v.nextSibling;if(c.removeChild(v),N&&N.nodeType===8)if(v=N.data,v==="/$"){if(0<x&&8>x){v=x;var B=c.ownerDocument;if(v&1&&fh(B.documentElement),v&2&&fh(B.body),v&4)for(v=B.head,fh(v),B=v.firstChild;B;){var V=B.nextSibling,Z=B.nodeName;B[qu]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&B.rel.toLowerCase()==="stylesheet"||v.removeChild(B),B=V}}if(R===0){c.removeChild(N),xh(h);return}R--}else v==="$"||v==="$?"||v==="$!"?R++:x=v.charCodeAt(0)-48;else x=0;v=N}while(v);xh(h)}function Yx(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var v=h;switch(h=h.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":Yx(v),Af(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}c.removeChild(v)}}function HU(c,h,v,x){for(;c.nodeType===1;){var R=v;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!x&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(x){if(!c[qu])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(N=c.getAttribute("rel"),N==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(N!==R.rel||c.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||c.getAttribute("title")!==(R.title==null?null:R.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(N=c.getAttribute("src"),(N!==(R.src==null?null:R.src)||c.getAttribute("type")!==(R.type==null?null:R.type)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&N&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var N=R.name==null?null:""+R.name;if(R.type==="hidden"&&c.getAttribute("name")===N)return c}else return c;if(c=ka(c.nextSibling),c===null)break}return null}function GU(c,h,v){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!v||(c=ka(c.nextSibling),c===null))return null;return c}function Qx(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function $U(c,h){var v=c.ownerDocument;if(c.data!=="$?"||v.readyState==="complete")h();else{var x=function(){h(),v.removeEventListener("DOMContentLoaded",x)};v.addEventListener("DOMContentLoaded",x),c._reactRetry=x}}function ka(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return c}var Jx=null;function oN(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var v=c.data;if(v==="$"||v==="$!"||v==="$?"){if(h===0)return c;h--}else v==="/$"&&h++}c=c.previousSibling}return null}function aN(c,h,v){switch(h=dv(v),c){case"html":if(c=h.documentElement,!c)throw Error(r(452));return c;case"head":if(c=h.head,!c)throw Error(r(453));return c;case"body":if(c=h.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function fh(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);Af(c)}var oa=new Map,iN=new Set;function fv(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var es=z.d;z.d={f:qU,r:XU,D:KU,C:YU,L:QU,m:JU,X:e6,S:ZU,M:t6};function qU(){var c=es.f(),h=rv();return c||h}function XU(c){var h=js(c);h!==null&&h.tag===5&&h.type==="form"?_T(h):es.r(c)}var zc=typeof document>"u"?null:document;function sN(c,h,v){var x=zc;if(x&&typeof h=="string"&&h){var R=Qo(h);R='link[rel="'+c+'"][href="'+R+'"]',typeof v=="string"&&(R+='[crossorigin="'+v+'"]'),iN.has(R)||(iN.add(R),c={rel:c,crossOrigin:v,href:h},x.querySelector(R)===null&&(h=x.createElement("link"),wr(h,"link",c),Pn(h),x.head.appendChild(h)))}}function KU(c){es.D(c),sN("dns-prefetch",c,null)}function YU(c,h){es.C(c,h),sN("preconnect",c,h)}function QU(c,h,v){es.L(c,h,v);var x=zc;if(x&&c&&h){var R='link[rel="preload"][as="'+Qo(h)+'"]';h==="image"&&v&&v.imageSrcSet?(R+='[imagesrcset="'+Qo(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(R+='[imagesizes="'+Qo(v.imageSizes)+'"]')):R+='[href="'+Qo(c)+'"]';var N=R;switch(h){case"style":N=Uc(c);break;case"script":N=Wc(c)}oa.has(N)||(c=d({rel:"preload",href:h==="image"&&v&&v.imageSrcSet?void 0:c,as:h},v),oa.set(N,c),x.querySelector(R)!==null||h==="style"&&x.querySelector(hh(N))||h==="script"&&x.querySelector(ph(N))||(h=x.createElement("link"),wr(h,"link",c),Pn(h),x.head.appendChild(h)))}}function JU(c,h){es.m(c,h);var v=zc;if(v&&c){var x=h&&typeof h.as=="string"?h.as:"script",R='link[rel="modulepreload"][as="'+Qo(x)+'"][href="'+Qo(c)+'"]',N=R;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Wc(c)}if(!oa.has(N)&&(c=d({rel:"modulepreload",href:c},h),oa.set(N,c),v.querySelector(R)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(ph(N)))return}x=v.createElement("link"),wr(x,"link",c),Pn(x),v.head.appendChild(x)}}}function ZU(c,h,v){es.S(c,h,v);var x=zc;if(x&&c){var R=Xt(x).hoistableStyles,N=Uc(c);h=h||"default";var B=R.get(N);if(!B){var V={loading:0,preload:null};if(B=x.querySelector(hh(N)))V.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":h},v),(v=oa.get(N))&&Zx(c,v);var Z=B=x.createElement("link");Pn(Z),wr(Z,"link",c),Z._p=new Promise(function(he,Ee){Z.onload=he,Z.onerror=Ee}),Z.addEventListener("load",function(){V.loading|=1}),Z.addEventListener("error",function(){V.loading|=2}),V.loading|=4,hv(B,h,x)}B={type:"stylesheet",instance:B,count:1,state:V},R.set(N,B)}}}function e6(c,h){es.X(c,h);var v=zc;if(v&&c){var x=Xt(v).hoistableScripts,R=Wc(c),N=x.get(R);N||(N=v.querySelector(ph(R)),N||(c=d({src:c,async:!0},h),(h=oa.get(R))&&e1(c,h),N=v.createElement("script"),Pn(N),wr(N,"link",c),v.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},x.set(R,N))}}function t6(c,h){es.M(c,h);var v=zc;if(v&&c){var x=Xt(v).hoistableScripts,R=Wc(c),N=x.get(R);N||(N=v.querySelector(ph(R)),N||(c=d({src:c,async:!0,type:"module"},h),(h=oa.get(R))&&e1(c,h),N=v.createElement("script"),Pn(N),wr(N,"link",c),v.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},x.set(R,N))}}function uN(c,h,v,x){var R=(R=se.current)?fv(R):null;if(!R)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(h=Uc(v.href),v=Xt(R).hoistableStyles,x=v.get(h),x||(x={type:"style",instance:null,count:0,state:null},v.set(h,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){c=Uc(v.href);var N=Xt(R).hoistableStyles,B=N.get(c);if(B||(R=R.ownerDocument||R,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(c,B),(N=R.querySelector(hh(c)))&&!N._p&&(B.instance=N,B.state.loading=5),oa.has(c)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},oa.set(c,v),N||n6(R,c,v,B.state))),h&&x===null)throw Error(r(528,""));return B}if(h&&x!==null)throw Error(r(529,""));return null;case"script":return h=v.async,v=v.src,typeof v=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Wc(v),v=Xt(R).hoistableScripts,x=v.get(h),x||(x={type:"script",instance:null,count:0,state:null},v.set(h,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Uc(c){return'href="'+Qo(c)+'"'}function hh(c){return'link[rel="stylesheet"]['+c+"]"}function lN(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function n6(c,h,v,x){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?x.loading=1:(h=c.createElement("link"),x.preload=h,h.addEventListener("load",function(){return x.loading|=1}),h.addEventListener("error",function(){return x.loading|=2}),wr(h,"link",v),Pn(h),c.head.appendChild(h))}function Wc(c){return'[src="'+Qo(c)+'"]'}function ph(c){return"script[async]"+c}function cN(c,h,v){if(h.count++,h.instance===null)switch(h.type){case"style":var x=c.querySelector('style[data-href~="'+Qo(v.href)+'"]');if(x)return h.instance=x,Pn(x),x;var R=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return x=(c.ownerDocument||c).createElement("style"),Pn(x),wr(x,"style",R),hv(x,v.precedence,c),h.instance=x;case"stylesheet":R=Uc(v.href);var N=c.querySelector(hh(R));if(N)return h.state.loading|=4,h.instance=N,Pn(N),N;x=lN(v),(R=oa.get(R))&&Zx(x,R),N=(c.ownerDocument||c).createElement("link"),Pn(N);var B=N;return B._p=new Promise(function(V,Z){B.onload=V,B.onerror=Z}),wr(N,"link",x),h.state.loading|=4,hv(N,v.precedence,c),h.instance=N;case"script":return N=Wc(v.src),(R=c.querySelector(ph(N)))?(h.instance=R,Pn(R),R):(x=v,(R=oa.get(N))&&(x=d({},v),e1(x,R)),c=c.ownerDocument||c,R=c.createElement("script"),Pn(R),wr(R,"link",x),c.head.appendChild(R),h.instance=R);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(x=h.instance,h.state.loading|=4,hv(x,v.precedence,c));return h.instance}function hv(c,h,v){for(var x=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=x.length?x[x.length-1]:null,N=R,B=0;B<x.length;B++){var V=x[B];if(V.dataset.precedence===h)N=V;else if(N!==R)break}N?N.parentNode.insertBefore(c,N.nextSibling):(h=v.nodeType===9?v.head:v,h.insertBefore(c,h.firstChild))}function Zx(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function e1(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var pv=null;function dN(c,h,v){if(pv===null){var x=new Map,R=pv=new Map;R.set(v,x)}else R=pv,x=R.get(v),x||(x=new Map,R.set(v,x));if(x.has(c))return x;for(x.set(c,null),v=v.getElementsByTagName(c),R=0;R<v.length;R++){var N=v[R];if(!(N[qu]||N[On]||c==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var B=N.getAttribute(h)||"";B=c+B;var V=x.get(B);V?V.push(N):x.set(B,[N])}}return x}function fN(c,h,v){c=c.ownerDocument||c,c.head.insertBefore(v,h==="title"?c.querySelector("head > title"):null)}function r6(c,h,v){if(v===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return c=h.disabled,typeof h.precedence=="string"&&c==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function hN(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var mh=null;function o6(){}function a6(c,h,v){if(mh===null)throw Error(r(475));var x=mh;if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var R=Uc(v.href),N=c.querySelector(hh(R));if(N){c=N._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(x.count++,x=mv.bind(x),c.then(x,x)),h.state.loading|=4,h.instance=N,Pn(N);return}N=c.ownerDocument||c,v=lN(v),(R=oa.get(R))&&Zx(v,R),N=N.createElement("link"),Pn(N);var B=N;B._p=new Promise(function(V,Z){B.onload=V,B.onerror=Z}),wr(N,"link",v),h.instance=N}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(x.count++,h=mv.bind(x),c.addEventListener("load",h),c.addEventListener("error",h))}}function i6(){if(mh===null)throw Error(r(475));var c=mh;return c.stylesheets&&c.count===0&&t1(c,c.stylesheets),0<c.count?function(h){var v=setTimeout(function(){if(c.stylesheets&&t1(c,c.stylesheets),c.unsuspend){var x=c.unsuspend;c.unsuspend=null,x()}},6e4);return c.unsuspend=h,function(){c.unsuspend=null,clearTimeout(v)}}:null}function mv(){if(this.count--,this.count===0){if(this.stylesheets)t1(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var vv=null;function t1(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,vv=new Map,h.forEach(s6,c),vv=null,mv.call(c))}function s6(c,h){if(!(h.state.loading&4)){var v=vv.get(c);if(v)var x=v.get(null);else{v=new Map,vv.set(c,v);for(var R=c.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<R.length;N++){var B=R[N];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(v.set(B.dataset.precedence,B),x=B)}x&&v.set(null,x)}R=h.instance,B=R.getAttribute("data-precedence"),N=v.get(B)||x,N===x&&v.set(null,R),v.set(B,R),this.count++,x=mv.bind(this),R.addEventListener("load",x),R.addEventListener("error",x),N?N.parentNode.insertBefore(R,N.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(R,c.firstChild)),h.state.loading|=4}}var vh={$$typeof:E,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function u6(c,h,v,x,R,N,B,V){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=x,this.onUncaughtError=R,this.onCaughtError=N,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function pN(c,h,v,x,R,N,B,V,Z,he,Ee,Ae){return c=new u6(c,h,v,B,V,Z,he,Ae),h=1,N===!0&&(h|=24),N=wo(3,null,null,h),c.current=N,N.stateNode=c,h=Fb(),h.refCount++,c.pooledCache=h,h.refCount++,N.memoizedState={element:x,isDehydrated:v,cache:h},zb(N),c}function mN(c){return c?(c=bc,c):bc}function vN(c,h,v,x,R,N){R=mN(R),x.context===null?x.context=R:x.pendingContext=R,x=Hs(h),x.payload={element:v},N=N===void 0?null:N,N!==null&&(x.callback=N),v=Gs(c,x,h),v!==null&&(_o(v,c,h),$f(v,c,h))}function gN(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<h?v:h}}function n1(c,h){gN(c,h),(c=c.alternate)&&gN(c,h)}function yN(c){if(c.tag===13){var h=yc(c,67108864);h!==null&&_o(h,c,67108864),n1(c,67108864)}}var gv=!0;function l6(c,h,v,x){var R=P.T;P.T=null;var N=z.p;try{z.p=2,r1(c,h,v,x)}finally{z.p=N,P.T=R}}function c6(c,h,v,x){var R=P.T;P.T=null;var N=z.p;try{z.p=8,r1(c,h,v,x)}finally{z.p=N,P.T=R}}function r1(c,h,v,x){if(gv){var R=o1(x);if(R===null)Hx(c,h,x,yv,v),xN(c,x);else if(f6(R,c,h,v,x))x.stopPropagation();else if(xN(c,x),h&4&&-1<d6.indexOf(c)){for(;R!==null;){var N=js(R);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var B=tr(N.pendingLanes);if(B!==0){var V=N;for(V.pendingLanes|=2,V.entangledLanes|=2;B;){var Z=1<<31-Ot(B);V.entanglements[1]|=Z,B&=~Z}ri(N),(un&6)===0&&(tv=Ie()+500,lh(0))}}break;case 13:V=yc(N,2),V!==null&&_o(V,N,2),rv(),n1(N,2)}if(N=o1(x),N===null&&Hx(c,h,x,yv,v),N===R)break;R=N}R!==null&&x.stopPropagation()}else Hx(c,h,x,null,v)}}function o1(c){return c=lb(c),a1(c)}var yv=null;function a1(c){if(yv=null,c=ji(c),c!==null){var h=a(c);if(h===null)c=null;else{var v=h.tag;if(v===13){if(c=i(h),c!==null)return c;c=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return yv=c,null}function bN(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case Be:return 2;case Je:return 8;case ct:case st:return 32;case $e:return 268435456;default:return 32}default:return 32}}var i1=!1,ou=null,au=null,iu=null,gh=new Map,yh=new Map,su=[],d6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xN(c,h){switch(c){case"focusin":case"focusout":ou=null;break;case"dragenter":case"dragleave":au=null;break;case"mouseover":case"mouseout":iu=null;break;case"pointerover":case"pointerout":gh.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":yh.delete(h.pointerId)}}function bh(c,h,v,x,R,N){return c===null||c.nativeEvent!==N?(c={blockedOn:h,domEventName:v,eventSystemFlags:x,nativeEvent:N,targetContainers:[R]},h!==null&&(h=js(h),h!==null&&yN(h)),c):(c.eventSystemFlags|=x,h=c.targetContainers,R!==null&&h.indexOf(R)===-1&&h.push(R),c)}function f6(c,h,v,x,R){switch(h){case"focusin":return ou=bh(ou,c,h,v,x,R),!0;case"dragenter":return au=bh(au,c,h,v,x,R),!0;case"mouseover":return iu=bh(iu,c,h,v,x,R),!0;case"pointerover":var N=R.pointerId;return gh.set(N,bh(gh.get(N)||null,c,h,v,x,R)),!0;case"gotpointercapture":return N=R.pointerId,yh.set(N,bh(yh.get(N)||null,c,h,v,x,R)),!0}return!1}function wN(c){var h=ji(c.target);if(h!==null){var v=a(h);if(v!==null){if(h=v.tag,h===13){if(h=i(v),h!==null){c.blockedOn=h,Rf(c.priority,function(){if(v.tag===13){var x=Ro();x=Li(x);var R=yc(v,x);R!==null&&_o(R,v,x),n1(v,x)}});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){c.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}c.blockedOn=null}function bv(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var v=o1(c.nativeEvent);if(v===null){v=c.nativeEvent;var x=new v.constructor(v.type,v);ub=x,v.target.dispatchEvent(x),ub=null}else return h=js(v),h!==null&&yN(h),c.blockedOn=v,!1;h.shift()}return!0}function SN(c,h,v){bv(c)&&v.delete(h)}function h6(){i1=!1,ou!==null&&bv(ou)&&(ou=null),au!==null&&bv(au)&&(au=null),iu!==null&&bv(iu)&&(iu=null),gh.forEach(SN),yh.forEach(SN)}function xv(c,h){c.blockedOn===h&&(c.blockedOn=null,i1||(i1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,h6)))}var wv=null;function CN(c){wv!==c&&(wv=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wv===c&&(wv=null);for(var h=0;h<c.length;h+=3){var v=c[h],x=c[h+1],R=c[h+2];if(typeof x!="function"){if(a1(x||v)===null)continue;break}var N=js(v);N!==null&&(c.splice(h,3),h-=3,ax(N,{pending:!0,data:R,method:v.method,action:x},x,R))}}))}function xh(c){function h(Z){return xv(Z,c)}ou!==null&&xv(ou,c),au!==null&&xv(au,c),iu!==null&&xv(iu,c),gh.forEach(h),yh.forEach(h);for(var v=0;v<su.length;v++){var x=su[v];x.blockedOn===c&&(x.blockedOn=null)}for(;0<su.length&&(v=su[0],v.blockedOn===null);)wN(v),v.blockedOn===null&&su.shift();if(v=(c.ownerDocument||c).$$reactFormReplay,v!=null)for(x=0;x<v.length;x+=3){var R=v[x],N=v[x+1],B=R[nr]||null;if(typeof N=="function")B||CN(v);else if(B){var V=null;if(N&&N.hasAttribute("formAction")){if(R=N,B=N[nr]||null)V=B.formAction;else if(a1(R)!==null)continue}else V=B.action;typeof V=="function"?v[x+1]=V:(v.splice(x,3),x-=3),CN(v)}}}function s1(c){this._internalRoot=c}Sv.prototype.render=s1.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));var v=h.current,x=Ro();vN(v,x,c,h,null,null)},Sv.prototype.unmount=s1.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;vN(c.current,2,null,c,null,null),rv(),h[Bs]=null}};function Sv(c){this._internalRoot=c}Sv.prototype.unstable_scheduleHydration=function(c){if(c){var h=Ja();c={blockedOn:null,target:c,priority:h};for(var v=0;v<su.length&&h!==0&&h<su[v].priority;v++);su.splice(v,0,c),v===0&&wN(c)}};var EN=e.version;if(EN!=="19.1.1")throw Error(r(527,EN,"19.1.1"));z.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=u(h),c=c!==null?l(c):null,c=c===null?null:c.stateNode,c};var p6={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cv.isDisabled&&Cv.supportsFiber)try{Ve=Cv.inject(p6),rt=Cv}catch{}}return Sh.createRoot=function(c,h){if(!o(c))throw Error(r(299));var v=!1,x="",R=zT,N=UT,B=WT,V=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(R=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(B=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(V=h.unstable_transitionCallbacks)),h=pN(c,1,!1,null,null,v,x,R,N,B,V,null),c[Bs]=h.current,Vx(c),new s1(h)},Sh.hydrateRoot=function(c,h,v){if(!o(c))throw Error(r(299));var x=!1,R="",N=zT,B=UT,V=WT,Z=null,he=null;return v!=null&&(v.unstable_strictMode===!0&&(x=!0),v.identifierPrefix!==void 0&&(R=v.identifierPrefix),v.onUncaughtError!==void 0&&(N=v.onUncaughtError),v.onCaughtError!==void 0&&(B=v.onCaughtError),v.onRecoverableError!==void 0&&(V=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(Z=v.unstable_transitionCallbacks),v.formState!==void 0&&(he=v.formState)),h=pN(c,1,!0,h,v??null,x,R,N,B,V,Z,he),h.context=mN(null),v=h.current,x=Ro(),x=Li(x),R=Hs(x),R.callback=null,Gs(v,R,x),v=x,h.current.lanes=v,Ft(h,v),ri(h),c[Bs]=h.current,Vx(c),new Sv(h)},Sh.version="19.1.1",Sh}var ON;function _6(){if(ON)return c1.exports;ON=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),c1.exports=R6(),c1.exports}var T6=_6();const A6=Qd(T6);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PN="popstate";function N6(t={}){function e(r,o){let{pathname:a,search:i,hash:s}=r.location;return Gw("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Kh(o)}return k6(e,n,null,t)}function In(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ua(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D6(){return Math.random().toString(36).substring(2,10)}function FN(t,e){return{usr:t.state,key:t.key,idx:e}}function Gw(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jd(e):e,state:n,key:e&&e.key||r||D6()}}function Kh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function k6(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s="POP",u=null,l=d();l==null&&(l=0,i.replaceState({...i.state,idx:l},""));function d(){return(i.state||{idx:null}).idx}function f(){s="POP";let b=d(),S=b==null?null:b-l;l=b,u&&u({action:s,location:y.location,delta:S})}function p(b,S){s="PUSH";let C=Gw(y.location,b,S);l=d()+1;let E=FN(C,l),_=y.createHref(C);try{i.pushState(E,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;o.location.assign(_)}a&&u&&u({action:s,location:y.location,delta:1})}function m(b,S){s="REPLACE";let C=Gw(y.location,b,S);l=d();let E=FN(C,l),_=y.createHref(C);i.replaceState(E,"",_),a&&u&&u({action:s,location:y.location,delta:0})}function g(b){return I6(b)}let y={get action(){return s},get location(){return t(o,i)},listen(b){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(PN,f),u=b,()=>{o.removeEventListener(PN,f),u=null}},createHref(b){return e(o,b)},createURL:g,encodeLocation(b){let S=g(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:m,go(b){return i.go(b)}};return y}function I6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),In(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Kh(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function YM(t,e,n="/"){return M6(t,e,n,!1)}function M6(t,e,n,r){let o=typeof e=="string"?Jd(e):e,a=vs(o.pathname||"/",n);if(a==null)return null;let i=QM(t);O6(i);let s=null;for(let u=0;s==null&&u<i.length;++u){let l=G6(a);s=V6(i[u],l,r)}return s}function QM(t,e=[],n=[],r="",o=!1){let a=(i,s,u=o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&u)return;In(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=hs([r,d.relativePath]),p=n.concat(d);i.children&&i.children.length>0&&(In(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),QM(i.children,e,p,f,u)),!(i.path==null&&!i.index)&&e.push({path:f,score:U6(f,i.index),routesMeta:p})};return t.forEach((i,s)=>{if(i.path===""||!i.path?.includes("?"))a(i,s);else for(let u of JM(i.path))a(i,s,!0,u)}),e}function JM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=JM(r.join("/")),s=[];return s.push(...i.map(u=>u===""?a:[a,u].join("/"))),o&&s.push(...i),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function O6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:W6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var P6=/^:[\w-]+$/,F6=3,B6=2,L6=1,j6=10,z6=-2,BN=t=>t==="*";function U6(t,e){let n=t.split("/"),r=n.length;return n.some(BN)&&(r+=z6),e&&(r+=B6),n.filter(o=>!BN(o)).reduce((o,a)=>o+(P6.test(a)?F6:a===""?L6:j6),r)}function W6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function V6(t,e,n=!1){let{routesMeta:r}=t,o={},a="/",i=[];for(let s=0;s<r.length;++s){let u=r[s],l=s===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=_g({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},d),p=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=_g({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!f)return null;Object.assign(o,f.params),i.push({params:o,pathname:hs([a,f.pathname]),pathnameBase:K6(hs([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=hs([a,f.pathnameBase]))}return i}function _g(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=H6(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((l,{paramName:d,isOptional:f},p)=>{if(d==="*"){let g=s[p]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const m=s[p];return f&&!m?l[d]=void 0:l[d]=(m||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:i,pattern:t}}function H6(t,e=!1,n=!0){Ua(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function G6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ua(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function $6(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Jd(t):t;return{pathname:n?n.startsWith("/")?n:q6(n,e):e,search:Y6(r),hash:Q6(o)}}function q6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function p1(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function X6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ZM(t){let e=X6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function eO(t,e,n,r=!1){let o;typeof t=="string"?o=Jd(t):(o={...t},In(!o.pathname||!o.pathname.includes("?"),p1("?","pathname","search",o)),In(!o.pathname||!o.pathname.includes("#"),p1("#","pathname","hash",o)),In(!o.search||!o.search.includes("#"),p1("#","search","hash",o)));let a=t===""||o.pathname==="",i=a?"/":o.pathname,s;if(i==null)s=n;else{let f=e.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),f-=1;o.pathname=p.join("/")}s=f>=0?e[f]:"/"}let u=$6(o,s),l=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||d)&&(u.pathname+="/"),u}var hs=t=>t.join("/").replace(/\/\/+/g,"/"),K6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Q6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var tO=["POST","PUT","PATCH","DELETE"];new Set(tO);var Z6=["GET",...tO];new Set(Z6);var Zd=A.createContext(null);Zd.displayName="DataRouter";var Dy=A.createContext(null);Dy.displayName="DataRouterState";A.createContext(!1);var nO=A.createContext({isTransitioning:!1});nO.displayName="ViewTransition";var eW=A.createContext(new Map);eW.displayName="Fetchers";var tW=A.createContext(null);tW.displayName="Await";var Ti=A.createContext(null);Ti.displayName="Navigation";var Ep=A.createContext(null);Ep.displayName="Location";var Ai=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var xS=A.createContext(null);xS.displayName="RouteError";function nW(t,{relative:e}={}){In(Rp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Ti),{hash:o,pathname:a,search:i}=_p(t,{relative:e}),s=a;return n!=="/"&&(s=a==="/"?n:hs([n,a])),r.createHref({pathname:s,search:i,hash:o})}function Rp(){return A.useContext(Ep)!=null}function Sa(){return In(Rp(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Ep).location}var rO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oO(t){A.useContext(Ti).static||A.useLayoutEffect(t)}function Ga(){let{isDataRoute:t}=A.useContext(Ai);return t?mW():rW()}function rW(){In(Rp(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Zd),{basename:e,navigator:n}=A.useContext(Ti),{matches:r}=A.useContext(Ai),{pathname:o}=Sa(),a=JSON.stringify(ZM(r)),i=A.useRef(!1);return oO(()=>{i.current=!0}),A.useCallback((u,l={})=>{if(Ua(i.current,rO),!i.current)return;if(typeof u=="number"){n.go(u);return}let d=eO(u,JSON.parse(a),o,l.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:hs([e,d.pathname])),(l.replace?n.replace:n.push)(d,l.state,l)},[e,n,a,o,t])}A.createContext(null);function wS(){let{matches:t}=A.useContext(Ai),e=t[t.length-1];return e?e.params:{}}function _p(t,{relative:e}={}){let{matches:n}=A.useContext(Ai),{pathname:r}=Sa(),o=JSON.stringify(ZM(n));return A.useMemo(()=>eO(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function oW(t,e){return aO(t,e)}function aO(t,e,n,r,o){In(Rp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Ti),{matches:i}=A.useContext(Ai),s=i[i.length-1],u=s?s.params:{},l=s?s.pathname:"/",d=s?s.pathnameBase:"/",f=s&&s.route;{let C=f&&f.path||"";iO(l,!f||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=Sa(),m;if(e){let C=typeof e=="string"?Jd(e):e;In(d==="/"||C.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${C.pathname}" was given in the \`location\` prop.`),m=C}else m=p;let g=m.pathname||"/",y=g;if(d!=="/"){let C=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=YM(t,{pathname:y});Ua(f||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Ua(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=lW(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:hs([d,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:hs([d,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r,o);return e&&S?A.createElement(Ep.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},S):S}function aW(){let t=pW(),e=J6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=A.createElement(A.Fragment,null,A.createElement("p",null,"💿 Hey developer 👋"),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:o},n):null,i)}var iW=A.createElement(aW,null),sW=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(Ai.Provider,{value:this.props.routeContext},A.createElement(xS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uW({routeContext:t,match:e,children:n}){let r=A.useContext(Zd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Ai.Provider,{value:t},n)}function lW(t,e=[],n=null,r=null,o=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,i=n?.errors;if(i!=null){let l=a.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);In(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,l+1))}let s=!1,u=-1;if(n)for(let l=0;l<a.length;l++){let d=a[l];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=l),d.route.id){let{loaderData:f,errors:p}=n,m=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){s=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((l,d,f)=>{let p,m=!1,g=null,y=null;n&&(p=i&&d.route.id?i[d.route.id]:void 0,g=d.route.errorElement||iW,s&&(u<0&&f===0?(iO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):u===f&&(m=!0,y=d.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,f+1)),S=()=>{let C;return p?C=g:m?C=y:d.route.Component?C=A.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=l,A.createElement(uW,{match:d,routeContext:{outlet:l,matches:b,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?A.createElement(sW,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:r}):S()},null)}function SS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cW(t){let e=A.useContext(Zd);return In(e,SS(t)),e}function dW(t){let e=A.useContext(Dy);return In(e,SS(t)),e}function fW(t){let e=A.useContext(Ai);return In(e,SS(t)),e}function CS(t){let e=fW(t),n=e.matches[e.matches.length-1];return In(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function hW(){return CS("useRouteId")}function pW(){let t=A.useContext(xS),e=dW("useRouteError"),n=CS("useRouteError");return t!==void 0?t:e.errors?.[n]}function mW(){let{router:t}=cW("useNavigate"),e=CS("useNavigate"),n=A.useRef(!1);return oO(()=>{n.current=!0}),A.useCallback(async(o,a={})=>{Ua(n.current,rO),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var LN={};function iO(t,e,n){!e&&!LN[t]&&(LN[t]=!0,Ua(!1,n))}A.memo(vW);function vW({routes:t,future:e,state:n,unstable_onError:r}){return aO(t,void 0,n,r,e)}function kn(t){In(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gW({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){In(!Rp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),s=A.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=Jd(n));let{pathname:u="/",search:l="",hash:d="",state:f=null,key:p="default"}=n,m=A.useMemo(()=>{let g=vs(u,i);return g==null?null:{location:{pathname:g,search:l,hash:d,state:f,key:p},navigationType:r}},[i,u,l,d,f,p,r]);return Ua(m!=null,`<Router basename="${i}"> is not able to match the URL "${u}${l}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:A.createElement(Ti.Provider,{value:s},A.createElement(Ep.Provider,{children:e,value:m}))}function yW({children:t,location:e}){return oW($w(t),e)}function $w(t,e=[]){let n=[];return A.Children.forEach(t,(r,o)=>{if(!A.isValidElement(r))return;let a=[...e,o];if(r.type===A.Fragment){n.push.apply(n,$w(r.props.children,a));return}In(r.type===kn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),In(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=$w(r.props.children,a)),n.push(i)}),n}var lg="get",cg="application/x-www-form-urlencoded";function ky(t){return t!=null&&typeof t.tagName=="string"}function bW(t){return ky(t)&&t.tagName.toLowerCase()==="button"}function xW(t){return ky(t)&&t.tagName.toLowerCase()==="form"}function wW(t){return ky(t)&&t.tagName.toLowerCase()==="input"}function SW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CW(t,e){return t.button===0&&(!e||e==="_self")&&!SW(t)}function qw(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function EW(t,e){let n=qw(t);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(a=>{n.append(o,a)})}),n}var Rv=null;function RW(){if(Rv===null)try{new FormData(document.createElement("form"),0),Rv=!1}catch{Rv=!0}return Rv}var _W=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function m1(t){return t!=null&&!_W.has(t)?(Ua(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cg}"`),null):t}function TW(t,e){let n,r,o,a,i;if(xW(t)){let s=t.getAttribute("action");r=s?vs(s,e):null,n=t.getAttribute("method")||lg,o=m1(t.getAttribute("enctype"))||cg,a=new FormData(t)}else if(bW(t)||wW(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||s.getAttribute("action");if(r=u?vs(u,e):null,n=t.getAttribute("formmethod")||s.getAttribute("method")||lg,o=m1(t.getAttribute("formenctype"))||m1(s.getAttribute("enctype"))||cg,a=new FormData(s,t),!RW()){let{name:l,type:d,value:f}=t;if(d==="image"){let p=l?`${l}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else l&&a.append(l,f)}}else{if(ky(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lg,r=null,o=cg,i=t}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ES(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AW(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&vs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function NW(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DW(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function kW(t,e,n){let r=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let i=await NW(a,n);return i.links?i.links():[]}return[]}));return PW(r.flat(1).filter(DW).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function jN(t,e,n,r,o,a){let i=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,s=(u,l)=>n[l].pathname!==u.pathname||n[l].route.path?.endsWith("*")&&n[l].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,l)=>i(u,l)||s(u,l)):a==="data"?e.filter((u,l)=>{let d=r.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(i(u,l)||s(u,l))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function IW(t,e,{includeHydrateFallback:n}={}){return MW(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function MW(t){return[...new Set(t)]}function OW(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function PW(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let a=JSON.stringify(OW(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function sO(){let t=A.useContext(Zd);return ES(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function FW(){let t=A.useContext(Dy);return ES(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var RS=A.createContext(void 0);RS.displayName="FrameworkContext";function uO(){let t=A.useContext(RS);return ES(t,"You must render this element inside a <HydratedRouter> element"),t}function BW(t,e){let n=A.useContext(RS),[r,o]=A.useState(!1),[a,i]=A.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:l,onMouseLeave:d,onTouchStart:f}=e,p=A.useRef(null);A.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let y=S=>{S.forEach(C=>{i(C.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[t]),A.useEffect(()=>{if(r){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[r]);let m=()=>{o(!0)},g=()=>{o(!1),i(!1)};return n?t!=="intent"?[a,p,{}]:[a,p,{onFocus:Ch(s,m),onBlur:Ch(u,g),onMouseEnter:Ch(l,m),onMouseLeave:Ch(d,g),onTouchStart:Ch(f,m)}]:[!1,p,{}]}function Ch(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function LW({page:t,...e}){let{router:n}=sO(),r=A.useMemo(()=>YM(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(zW,{page:t,matches:r,...e}):null}function jW(t){let{manifest:e,routeModules:n}=uO(),[r,o]=A.useState([]);return A.useEffect(()=>{let a=!1;return kW(t,e,n).then(i=>{a||o(i)}),()=>{a=!0}},[t,e,n]),r}function zW({page:t,matches:e,...n}){let r=Sa(),{manifest:o,routeModules:a}=uO(),{basename:i}=sO(),{loaderData:s,matches:u}=FW(),l=A.useMemo(()=>jN(t,e,u,o,r,"data"),[t,e,u,o,r]),d=A.useMemo(()=>jN(t,e,u,o,r,"assets"),[t,e,u,o,r]),f=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,y=!1;if(e.forEach(S=>{let C=o.routes[S.route.id];!C||!C.hasLoader||(!l.some(E=>E.route.id===S.route.id)&&S.route.id in s&&a[S.route.id]?.shouldRevalidate||C.hasClientLoader?y=!0:g.add(S.route.id))}),g.size===0)return[];let b=AW(t,i,"data");return y&&g.size>0&&b.searchParams.set("_routes",e.filter(S=>g.has(S.route.id)).map(S=>S.route.id).join(",")),[b.pathname+b.search]},[i,s,r,o,l,e,t,a]),p=A.useMemo(()=>IW(d,o),[d,o]),m=jW(d);return A.createElement(A.Fragment,null,f.map(g=>A.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),p.map(g=>A.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),m.map(({key:g,link:y})=>A.createElement("link",{key:g,nonce:n.nonce,...y})))}function UW(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var lO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lO&&(window.__reactRouterVersion="7.8.2")}catch{}function WW({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=N6({window:n,v5Compat:!0}));let o=r.current,[a,i]=A.useState({action:o.action,location:o.location}),s=A.useCallback(u=>{A.startTransition(()=>i(u))},[i]);return A.useLayoutEffect(()=>o.listen(s),[o,s]),A.createElement(gW,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o})}var cO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ao=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:a,replace:i,state:s,target:u,to:l,preventScrollReset:d,viewTransition:f,...p},m){let{basename:g}=A.useContext(Ti),y=typeof l=="string"&&cO.test(l),b,S=!1;if(typeof l=="string"&&y&&(b=l,lO))try{let M=new URL(window.location.href),O=l.startsWith("//")?new URL(M.protocol+l):new URL(l),F=vs(O.pathname,g);O.origin===M.origin&&F!=null?l=F+O.search+O.hash:S=!0}catch{Ua(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=nW(l,{relative:o}),[E,_,T]=BW(r,p),D=$W(l,{replace:i,state:s,target:u,preventScrollReset:d,relative:o,viewTransition:f});function k(M){e&&e(M),M.defaultPrevented||D(M)}let I=A.createElement("a",{...p,...T,href:b||C,onClick:S||a?e:k,ref:UW(m,_),target:u,"data-discover":!y&&n==="render"?"true":void 0});return E&&!y?A.createElement(A.Fragment,null,I,A.createElement(LW,{page:C})):I});Ao.displayName="Link";var VW=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:a,to:i,viewTransition:s,children:u,...l},d){let f=_p(i,{relative:l.relative}),p=Sa(),m=A.useContext(Dy),{navigator:g,basename:y}=A.useContext(Ti),b=m!=null&&JW(f)&&s===!0,S=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,C=p.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(C=C.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&y&&(E=vs(E,y)||E);const _=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let T=C===S||!o&&C.startsWith(S)&&C.charAt(_)==="/",D=E!=null&&(E===S||!o&&E.startsWith(S)&&E.charAt(S.length)==="/"),k={isActive:T,isPending:D,isTransitioning:b},I=T?e:void 0,M;typeof r=="function"?M=r(k):M=[r,T?"active":null,D?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(k):a;return A.createElement(Ao,{...l,"aria-current":I,className:M,ref:d,style:O,to:i,viewTransition:s},typeof u=="function"?u(k):u)});VW.displayName="NavLink";var HW=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:a,method:i=lg,action:s,onSubmit:u,relative:l,preventScrollReset:d,viewTransition:f,...p},m)=>{let g=YW(),y=QW(s,{relative:l}),b=i.toLowerCase()==="get"?"get":"post",S=typeof s=="string"&&cO.test(s),C=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let _=E.nativeEvent.submitter,T=_?.getAttribute("formmethod")||i;g(_||E.currentTarget,{fetcherKey:e,method:T,navigate:n,replace:o,state:a,relative:l,preventScrollReset:d,viewTransition:f})};return A.createElement("form",{ref:m,method:b,action:y,onSubmit:r?u:C,...p,"data-discover":!S&&t==="render"?"true":void 0})});HW.displayName="Form";function GW(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dO(t){let e=A.useContext(Zd);return In(e,GW(t)),e}function $W(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let s=Ga(),u=Sa(),l=_p(t,{relative:a});return A.useCallback(d=>{if(CW(d,e)){d.preventDefault();let f=n!==void 0?n:Kh(u)===Kh(l);s(t,{replace:f,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[u,s,l,n,r,e,t,o,a,i])}function qW(t){Ua(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(qw(t)),n=A.useRef(!1),r=Sa(),o=A.useMemo(()=>EW(r.search,n.current?null:e.current),[r.search]),a=Ga(),i=A.useCallback((s,u)=>{const l=qw(typeof s=="function"?s(new URLSearchParams(o)):s);n.current=!0,a("?"+l,u)},[a,o]);return[o,i]}var XW=0,KW=()=>`__${String(++XW)}__`;function YW(){let{router:t}=dO("useSubmit"),{basename:e}=A.useContext(Ti),n=hW();return A.useCallback(async(r,o={})=>{let{action:a,method:i,encType:s,formData:u,body:l}=TW(r,e);if(o.navigate===!1){let d=o.fetcherKey||KW();await t.fetch(d,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:u,body:l,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:u,body:l,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function QW(t,{relative:e}={}){let{basename:n}=A.useContext(Ti),r=A.useContext(Ai);In(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={..._p(t||".",{relative:e})},i=Sa();if(t==null){a.search=i.search;let s=new URLSearchParams(a.search),u=s.getAll("index");if(u.some(d=>d==="")){s.delete("index"),u.filter(f=>f).forEach(f=>s.append("index",f));let d=s.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:hs([n,a.pathname])),Kh(a)}function JW(t,{relative:e}={}){let n=A.useContext(nO);In(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=dO("useViewTransitionState"),o=_p(t,{relative:e});if(!n.isTransitioning)return!1;let a=vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return _g(o.pathname,i)!=null||_g(o.pathname,a)!=null}var ef=KM();const ld=Qd(ef);var fi=function(){return fi=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fi.apply(this,arguments)};function fO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function ZW(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var dg="right-scroll-bar-position",fg="width-before-scroll-bar",eV="with-scroll-bars-hidden",tV="--removed-body-scroll-bar-size";function v1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function nV(t,e){var n=A.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var rV=typeof window<"u"?A.useLayoutEffect:A.useEffect,zN=new WeakMap;function oV(t,e){var n=nV(null,function(r){return t.forEach(function(o){return v1(o,r)})});return rV(function(){var r=zN.get(n);if(r){var o=new Set(r),a=new Set(t),i=n.current;o.forEach(function(s){a.has(s)||v1(s,null)}),a.forEach(function(s){o.has(s)||v1(s,i)})}zN.set(n,t)},[t]),n}function aV(t){return t}function iV(t,e){e===void 0&&(e=aV);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var i=e(a,r);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(s){return a(s)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(a),i=n}var u=function(){var d=i;i=[],d.forEach(a)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(d){i.push(d),l()},filter:function(d){return i=i.filter(d),n}}}};return o}function sV(t){t===void 0&&(t={});var e=iV(null);return e.options=fi({async:!0,ssr:!1},t),e}var hO=function(t){var e=t.sideCar,n=fO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,fi({},n))};hO.isSideCarExport=!0;function uV(t,e){return t.useMedium(e),hO}var pO=sV(),g1=function(){},Iy=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:g1,onWheelCapture:g1,onTouchMoveCapture:g1}),o=r[0],a=r[1],i=t.forwardProps,s=t.children,u=t.className,l=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,m=t.noRelative,g=t.noIsolation,y=t.inert,b=t.allowPinchZoom,S=t.as,C=S===void 0?"div":S,E=t.gapMode,_=fO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=p,D=oV([n,e]),k=fi(fi({},_),o);return A.createElement(A.Fragment,null,d&&A.createElement(T,{sideCar:pO,removeScrollBar:l,shards:f,noRelative:m,noIsolation:g,inert:y,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:E}),i?A.cloneElement(A.Children.only(s),fi(fi({},k),{ref:D})):A.createElement(C,fi({},k,{className:u,ref:D}),s))});Iy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Iy.classNames={fullWidth:fg,zeroRight:dg};var lV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=lV();return e&&t.setAttribute("nonce",e),t}function dV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function fV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var hV=function(){var t=0,e=null;return{add:function(n){t==0&&(e=cV())&&(dV(e,n),fV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pV=function(){var t=hV();return function(e,n){A.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},mO=function(){var t=pV(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},mV={left:0,top:0,right:0,gap:0},y1=function(t){return parseInt(t||"",10)||0},vV=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[y1(n),y1(r),y1(o)]},gV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return mV;var e=vV(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},yV=mO(),md="data-scroll-locked",bV=function(t,e,n,r){var o=t.left,a=t.top,i=t.right,s=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(eV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(md,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dg,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(fg,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(dg," .").concat(dg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(fg," .").concat(fg,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(md,`] {
    `).concat(tV,": ").concat(s,`px;
  }
`)},UN=function(){var t=parseInt(document.body.getAttribute(md)||"0",10);return isFinite(t)?t:0},xV=function(){A.useEffect(function(){return document.body.setAttribute(md,(UN()+1).toString()),function(){var t=UN()-1;t<=0?document.body.removeAttribute(md):document.body.setAttribute(md,t.toString())}},[])},wV=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;xV();var a=A.useMemo(function(){return gV(o)},[o]);return A.createElement(yV,{styles:bV(a,!e,o,n?"":"!important")})},Xw=!1;if(typeof window<"u")try{var _v=Object.defineProperty({},"passive",{get:function(){return Xw=!0,!0}});window.addEventListener("test",_v,_v),window.removeEventListener("test",_v,_v)}catch{Xw=!1}var Vc=Xw?{passive:!1}:!1,SV=function(t){return t.tagName==="TEXTAREA"},vO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!SV(t)&&n[e]==="visible")},CV=function(t){return vO(t,"overflowY")},EV=function(t){return vO(t,"overflowX")},WN=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=gO(t,r);if(o){var a=yO(t,r),i=a[1],s=a[2];if(i>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},RV=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},_V=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},gO=function(t,e){return t==="v"?CV(e):EV(e)},yO=function(t,e){return t==="v"?RV(e):_V(e)},TV=function(t,e){return t==="h"&&e==="rtl"?-1:1},AV=function(t,e,n,r,o){var a=TV(t,window.getComputedStyle(e).direction),i=a*r,s=n.target,u=e.contains(s),l=!1,d=i>0,f=0,p=0;do{if(!s)break;var m=yO(t,s),g=m[0],y=m[1],b=m[2],S=y-b-a*g;(g||S)&&gO(t,s)&&(f+=S,p+=g);var C=s.parentNode;s=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!u&&s!==document.body||u&&(e.contains(s)||e===s));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(l=!0),l},Tv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},VN=function(t){return[t.deltaX,t.deltaY]},HN=function(t){return t&&"current"in t?t.current:t},NV=function(t,e){return t[0]===e[0]&&t[1]===e[1]},DV=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},kV=0,Hc=[];function IV(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),o=A.useState(kV++)[0],a=A.useState(mO)[0],i=A.useRef(t);A.useEffect(function(){i.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var y=ZW([t.lockRef.current],(t.shards||[]).map(HN),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var s=A.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var S=Tv(y),C=n.current,E="deltaX"in y?y.deltaX:C[0]-S[0],_="deltaY"in y?y.deltaY:C[1]-S[1],T,D=y.target,k=Math.abs(E)>Math.abs(_)?"h":"v";if("touches"in y&&k==="h"&&D.type==="range")return!1;var I=WN(k,D);if(!I)return!0;if(I?T=k:(T=k==="v"?"h":"v",I=WN(k,D)),!I)return!1;if(!r.current&&"changedTouches"in y&&(E||_)&&(r.current=T),!T)return!0;var M=r.current||T;return AV(M,b,y,M==="h"?E:_)},[]),u=A.useCallback(function(y){var b=y;if(!(!Hc.length||Hc[Hc.length-1]!==a)){var S="deltaY"in b?VN(b):Tv(b),C=e.current.filter(function(T){return T.name===b.type&&(T.target===b.target||b.target===T.shadowParent)&&NV(T.delta,S)})[0];if(C&&C.should){b.cancelable&&b.preventDefault();return}if(!C){var E=(i.current.shards||[]).map(HN).filter(Boolean).filter(function(T){return T.contains(b.target)}),_=E.length>0?s(b,E[0]):!i.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),l=A.useCallback(function(y,b,S,C){var E={name:y,delta:b,target:S,should:C,shadowParent:MV(S)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(_){return _!==E})},1)},[]),d=A.useCallback(function(y){n.current=Tv(y),r.current=void 0},[]),f=A.useCallback(function(y){l(y.type,VN(y),y.target,s(y,t.lockRef.current))},[]),p=A.useCallback(function(y){l(y.type,Tv(y),y.target,s(y,t.lockRef.current))},[]);A.useEffect(function(){return Hc.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",u,Vc),document.addEventListener("touchmove",u,Vc),document.addEventListener("touchstart",d,Vc),function(){Hc=Hc.filter(function(y){return y!==a}),document.removeEventListener("wheel",u,Vc),document.removeEventListener("touchmove",u,Vc),document.removeEventListener("touchstart",d,Vc)}},[]);var m=t.removeScrollBar,g=t.inert;return A.createElement(A.Fragment,null,g?A.createElement(a,{styles:DV(o)}):null,m?A.createElement(wV,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function MV(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const OV=uV(pO,IV);var Tg=A.forwardRef(function(t,e){return A.createElement(Iy,fi({},t,{ref:e,sideCar:OV}))});Tg.classNames=Iy.classNames;function co(t){return Object.keys(t)}function b1(t){return t&&typeof t=="object"&&!Array.isArray(t)}function _S(t,e){const n={...t},r=e;return b1(t)&&b1(e)&&Object.keys(e).forEach(o=>{b1(r[o])&&o in t?n[o]=_S(n[o],r[o]):n[o]=r[o]}),n}function PV(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function FV(t){return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:t.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function Yh(t){const e=FV(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function GN(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function bO(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?GN(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(a=>n(a)).join(",");if(r.includes(" "))return r.split(" ").map(a=>n(a)).join(" ");const o=r.replace("px","");if(!Number.isNaN(Number(o))){const a=`${Number(o)/16}${t}`;return e?GN(a):a}}return r}return n}const Te=bO("rem",{shouldScale:!0}),$N=bO("em");function Tp(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function xO(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function Bu(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==A.Fragment:!1}function Ca(t){const e=A.createContext(null);return[({children:o,value:a})=>w.jsx(e.Provider,{value:a,children:o}),()=>{const o=A.useContext(e);if(o===null)throw new Error(t);return o}]}function tf(t=null){const e=A.createContext(t);return[({children:o,value:a})=>w.jsx(e.Provider,{value:a,children:o}),()=>A.useContext(e)]}const BV={app:100,modal:200,popover:300,overlay:400,max:9999};function no(t){return BV[t]}const Ag=()=>{};function LV(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||Ag:n=>{n.key==="Escape"&&(t(n),e.onTrigger?.())}}function Ut(t,e="size",n=!0){if(t!==void 0)return xO(t)?n?Te(t):t:`var(--${e}-${t})`}function Ur(t){return Ut(t,"mantine-spacing")}function Zn(t){return t===void 0?"var(--mantine-radius-default)":Ut(t,"mantine-radius")}function Tr(t){return Ut(t,"mantine-font-size")}function wO(t){return Ut(t,"mantine-line-height",!1)}function TS(t){if(t)return Ut(t,"mantine-shadow",!1)}function cd(t,e){return n=>{t?.(n),e?.(n)}}function jV(t,e){return t in e?Yh(e[t]):Yh(t)}function zV(t,e){const n=t.map(r=>({value:r,px:jV(r,e)}));return n.sort((r,o)=>r.px-o.px),n}function vd(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function hg(t,e,n){return e===void 0&&n===void 0?t:e!==void 0&&n===void 0?Math.max(t,e):Math.min(e===void 0&&n!==void 0?t:Math.max(t,e),n)}function yi(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}function UV(t,e){if(t===e||Number.isNaN(t)&&Number.isNaN(e))return!0;if(!(t instanceof Object)||!(e instanceof Object))return!1;const n=Object.keys(t),{length:r}=n;if(r!==Object.keys(e).length)return!1;for(let o=0;o<r;o+=1){const a=n[o];if(!(a in e)||t[a]!==e[a]&&!(Number.isNaN(t[a])&&Number.isNaN(e[a])))return!1}return!0}function WV(t){return typeof t!="string"?"":t.charAt(0).toUpperCase()+t.slice(1)}function bl(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>e.current?.(...n),[])}function My(t,e){const{delay:n,flushOnUnmount:r,leading:o}=typeof e=="number"?{delay:e,flushOnUnmount:!1,leading:!1}:e,a=bl(t),i=A.useRef(0),s=A.useMemo(()=>{const u=Object.assign((...l)=>{window.clearTimeout(i.current);const d=u._isFirstCall;u._isFirstCall=!1;function f(){window.clearTimeout(i.current),i.current=0,u._isFirstCall=!0}if(o&&d){a(...l);const g=()=>{f()},y=()=>{i.current!==0&&(f(),a(...l))},b=()=>{f()};u.flush=y,u.cancel=b,i.current=window.setTimeout(g,n);return}if(o&&!d){const g=()=>{i.current!==0&&(f(),a(...l))},y=()=>{f()};u.flush=g,u.cancel=y;const b=()=>{f()};i.current=window.setTimeout(b,n);return}const p=()=>{i.current!==0&&(f(),a(...l))},m=()=>{f()};u.flush=p,u.cancel=m,i.current=window.setTimeout(p,n)},{flush:()=>{},cancel:()=>{},_isFirstCall:!0});return u},[a,n,o]);return A.useEffect(()=>()=>{r?s.flush():s.cancel()},[s,r]),s}const VV=["mousedown","touchstart"];function HV(t,e,n){const r=A.useRef(null),o=e||VV;return A.useEffect(()=>{const a=i=>{const{target:s}=i??{};if(Array.isArray(n)){const u=!document.body.contains(s)&&s.tagName!=="HTML";n.every(d=>!!d&&!i.composedPath().includes(d))&&!u&&t()}else r.current&&!r.current.contains(s)&&t()};return o.forEach(i=>document.addEventListener(i,a)),()=>{o.forEach(i=>document.removeEventListener(i,a))}},[r,t,n]),r}function GV(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function $V(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function SO(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=A.useState(n?e:$V(t));return A.useEffect(()=>{try{const a=window.matchMedia(t);return o(a.matches),GV(a,i=>o(i.matches))}catch{return}},[t]),r||!1}function qV(t,e){return SO("(prefers-color-scheme: dark)",t==="dark",e)?"dark":"light"}const nf=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Su(t,e){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function CO({opened:t,shouldReturnFocus:e=!0}){const n=A.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return Su(()=>{let o=-1;const a=i=>{i.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",a),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",a)}},[t,e]),r}const XV=/input|select|textarea|button|object/,EO="a, input, select, textarea, button, object, [tabindex]";function KV(t){return t.style.display==="none"}function YV(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(KV(n))return!1;n=n.parentNode}return!0}function RO(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function Kw(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(RO(t));return(XV.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&YV(t)}function _O(t){const e=RO(t);return(Number.isNaN(e)||e>=0)&&Kw(t)}function QV(t){return Array.from(t.querySelectorAll(EO)).filter(_O)}function JV(t,e){const n=QV(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let a=r===o.activeElement||t===o.activeElement;const i=o.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(a=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===i.getAttribute("name")).includes(r)),!a)return;e.preventDefault();const u=n[e.shiftKey?n.length-1:0];u&&u.focus()}function ZV(t=!0){const e=A.useRef(null),n=o=>{let a=o.querySelector("[data-autofocus]");if(!a){const i=Array.from(o.querySelectorAll(EO));a=i.find(_O)||i.find(Kw)||null,!a&&Kw(o)&&(a=o)}a&&a.focus({preventScroll:!0})},r=A.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return A.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=a=>{a.key==="Tab"&&e.current&&JV(e.current,a)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const eH=t=>(t+1)%1e6;function tH(){const[,t]=A.useReducer(eH,0);return t}const nH=bt.useId||(()=>{});function rH(){const t=nH();return t?`mantine-${t.replace(/:/g,"")}`:""}function $a(t){const e=rH(),[n,r]=A.useState(e);return nf(()=>{r(yi())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function oH(t,e,n){A.useEffect(()=>(window.addEventListener(t,e,n),()=>window.removeEventListener(t,e,n)),[t,e])}function Qh(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function TO(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=Qh(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o&&typeof o=="function"?o():Qh(r,null)}),e.clear()}}}function er(...t){return A.useCallback(TO(...t),t)}function gs({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,a]=A.useState(e!==void 0?e:n),i=(s,...u)=>{a(s),r?.(s,...u)};return t!==void 0?[t,r,!0]:[o,i,!1]}function Oy(t,e){return SO("(prefers-reduced-motion: reduce)",t,e)}function aH(t,e){if(!t||!e)return!1;if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n+=1)if(!UV(t[n],e[n]))return!1;return!0}function iH(t){const e=A.useRef([]),n=A.useRef(0);return aH(e.current,t)||(e.current=t,n.current+=1),[n.current]}function sH(t,e){A.useEffect(t,iH(e))}function uH(t=[!1,!0]){const[[e],n]=A.useReducer((r,o)=>{const a=o instanceof Function?o(r[0]):o,i=Math.abs(r.indexOf(a));return r.slice(i).concat(r.slice(0,i))},t);return[e,n]}function qN(t=!1,e={}){const[n,r]=A.useState(t),o=A.useCallback(()=>{r(s=>s||(e.onOpen?.(),!0))},[e.onOpen]),a=A.useCallback(()=>{r(s=>s&&(e.onClose?.(),!1))},[e.onClose]),i=A.useCallback(()=>{n?a():o()},[a,o,n]);return[n,{open:o,close:a,toggle:i}]}function lH(t,e,n={autoInvoke:!1}){const r=A.useRef(null),o=A.useCallback((...i)=>{r.current||(r.current=window.setTimeout(()=>{t(i),r.current=null},e))},[e]),a=A.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return A.useEffect(()=>(n.autoInvoke&&o(),a),[a,o]),{start:o,clear:a}}function cH(t){const e=A.useRef(void 0);return A.useEffect(()=>{e.current=t},[t]),e.current}function dH(t,e,n){const r=A.useRef(null),o=A.useRef(null);return A.useEffect(()=>{const a=typeof n=="function"?n():n;return(a||o.current)&&(r.current=new MutationObserver(t),r.current.observe(a||o.current,e)),()=>{r.current?.disconnect()}},[t,e]),o}function fH(){const[t,e]=A.useState(!1);return A.useEffect(()=>e(!0),[]),t}function hH(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}function pH(t){function e(r){const o=Object.keys(r).reduce((a,i)=>(a[`${t}:${i}`]=s=>r[i](s.detail),a),{});nf(()=>(Object.keys(o).forEach(a=>{window.removeEventListener(a,o[a]),window.addEventListener(a,o[a])}),()=>Object.keys(o).forEach(a=>{window.removeEventListener(a,o[a])})),[o])}function n(r){return(...o)=>hH(`${t}:${String(r)}`,o[0])}return[e,n]}var mH={};function AO(){return typeof process<"u"&&mH?"production":"development"}function Py(t){const e=bt.version;return typeof bt.version!="string"||e.startsWith("18.")?t?.ref:t?.props?.ref}function NO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=NO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function vr(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=NO(t))&&(r&&(r+=" "),r+=e);return r}const vH={};function gH(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=vr(e[r],o):e[r]=o})}),e}function Fy({theme:t,classNames:e,props:n,stylesCtx:r}){const a=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(t,n,r):i||vH);return gH(a)}function Ng({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((a,i)=>typeof i=="function"?{...a,...i(t,n,r)}:{...a,...i},{})}const AS=A.createContext(null);function Lu(){const t=A.useContext(AS);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function yH(){return Lu().cssVariablesResolver}function bH(){return Lu().classNamesPrefix}function By(){return Lu().getStyleNonce}function xH(){return Lu().withStaticClasses}function wH(){return Lu().headless}function SH(){return Lu().stylesTransform?.sx}function CH(){return Lu().stylesTransform?.styles}function Ly(){return Lu().env||"default"}function EH(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function RH(t){let e=t.replace("#","");if(e.length===3){const i=e.split("");e=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(e.length===8){const i=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:i}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,a=n&255;return{r,g:o,b:a,a:1}}function _H(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o===void 0?1:o}}function TH(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,a=parseInt(n[3],10)/100,i=n[5]?parseFloat(n[5]):void 0,s=(1-Math.abs(2*a-1))*o,u=r/60,l=s*(1-Math.abs(u%2-1)),d=a-s/2;let f,p,m;return u>=0&&u<1?(f=s,p=l,m=0):u>=1&&u<2?(f=l,p=s,m=0):u>=2&&u<3?(f=0,p=s,m=l):u>=3&&u<4?(f=0,p=l,m=s):u>=4&&u<5?(f=l,p=0,m=s):(f=s,p=0,m=l),{r:Math.round((f+d)*255),g:Math.round((p+d)*255),b:Math.round((m+d)*255),a:i||1}}function NS(t){return EH(t)?RH(t):t.startsWith("rgb")?_H(t):t.startsWith("hsl")?TH(t):{r:0,g:0,b:0,a:1}}function Av(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a}=NS(t),i=1-e,s=u=>Math.round(u*i);return`rgba(${s(n)}, ${s(r)}, ${s(o)}, ${a})`}function Jh(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function x1(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function AH(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function NH(t){if(t.startsWith("oklch("))return(AH(t)||0)/100;const{r:e,g:n,b:r}=NS(t),o=e/255,a=n/255,i=r/255,s=x1(o),u=x1(a),l=x1(i);return .2126*s+.7152*u+.0722*l}function Eh(t,e=.179){return t.startsWith("var(")?!1:NH(t)>e}function Ap({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Eh(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Eh(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Eh(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),a=o?Number(o):void 0,i=r in e.colors;if(i){const s=a!==void 0?e.colors[r][a]:e.colors[r][Jh(e,n||"light")];return{color:r,value:s,shade:a,isThemeColor:i,isLight:Eh(s,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${a}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:i,isLight:Eh(t,e.luminanceThreshold),shade:a,variable:void 0}}function Jr(t,e){const n=Ap({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function Yw(t,e){const n={from:t?.from||e.defaultGradient.from,to:t?.to||e.defaultGradient.to,deg:t?.deg??e.defaultGradient.deg??0},r=Jr(n.from,e),o=Jr(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function si(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const a=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${a}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=NS(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const Gc=si,DH=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const a=Ap({color:t,theme:e}),i=typeof o=="boolean"?o:e.autoContrast;if(n==="none")return{background:"transparent",hover:"transparent",color:"inherit",border:"none"};if(n==="filled"){const s=i&&a.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return a.isThemeColor?a.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:s,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${a.color}-${a.shade})`,hover:`var(--mantine-color-${a.color}-${a.shade===9?8:a.shade+1})`,color:s,border:`${Te(1)} solid transparent`}:{background:t,hover:Av(t,.1),color:s,border:`${Te(1)} solid transparent`}}if(n==="light"){if(a.isThemeColor){if(a.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Te(1)} solid transparent`};const s=e.colors[a.color][a.shade];return{background:si(s,.1),hover:si(s,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:si(t,.1),hover:si(t,.12),color:t,border:`${Te(1)} solid transparent`}}if(n==="outline")return a.isThemeColor?a.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${Te(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:si(e.colors[a.color][a.shade],.05),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${Te(1)} solid var(--mantine-color-${a.color}-${a.shade})`}:{background:"transparent",hover:si(t,.05),color:t,border:`${Te(1)} solid ${t}`};if(n==="subtle"){if(a.isThemeColor){if(a.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Te(1)} solid transparent`};const s=e.colors[a.color][a.shade];return{background:"transparent",hover:si(s,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:si(t,.12),color:t,border:`${Te(1)} solid transparent`}}return n==="transparent"?a.isThemeColor?a.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${Te(1)} solid transparent`}:n==="white"?a.isThemeColor?a.shade===void 0?{background:"var(--mantine-color-white)",hover:Av(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Av(e.white,.01),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Av(e.white,.01),color:t,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:Yw(r,e),hover:Yw(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},kH={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},XN="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",DS={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:kH,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:DH,autoContrast:!1,luminanceThreshold:.3,fontFamily:XN,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:XN,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function KN(t){return t==="auto"||t==="dark"||t==="light"}function IH({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return KN(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&KN(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const MH="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",YN="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function w1(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function QN(t){if(!(t.primaryColor in t.colors))throw new Error(MH);if(typeof t.primaryShade=="object"&&(!w1(t.primaryShade.dark)||!w1(t.primaryShade.light)))throw new Error(YN);if(typeof t.primaryShade=="number"&&!w1(t.primaryShade))throw new Error(YN)}function OH(t,e){if(!e)return QN(t),t;const n=_S(t,e);return e.fontFamily&&!e.headings?.fontFamily&&(n.headings.fontFamily=e.fontFamily),QN(n),n}const kS=A.createContext(null),PH=()=>A.useContext(kS)||DS;function Vr(){const t=A.useContext(kS);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function DO({theme:t,children:e,inherit:n=!0}){const r=PH(),o=A.useMemo(()=>OH(n?r:DS,t),[t,r,n]);return w.jsx(kS.Provider,{value:o,children:e})}DO.displayName="@mantine/core/MantineThemeProvider";function FH(){const t=Vr(),e=By(),n=co(t.breakpoints).reduce((r,o)=>{const a=t.breakpoints[o].includes("px"),i=Yh(t.breakpoints[o]),s=a?`${i-.1}px`:$N(i-.1),u=a?`${i}px`:$N(i);return`${r}@media (max-width: ${s}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:e?.(),dangerouslySetInnerHTML:{__html:n}})}function S1(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Rh(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function BH(t,e){const n=S1(t.variables),r=n?Rh(e,n):"",o=S1(t.dark),a=S1(t.light),i=o?Rh(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",s=a?Rh(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,a):"";return`${r}

${i}

${s}`}function IS({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&Ap({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function JN(t,e){return IS({color:t.colors[t.primaryColor][Jh(t,e)],theme:t,autoContrast:null})}function Nv({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const s=Jh(t,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Gc(t.colors[e][s],.1),[`--mantine-color-${r}-light-hover`]:Gc(t.colors[e][s],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-outline-hover`]:Gc(t.colors[e][s],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...u}:u}const a=Jh(t,"dark"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Gc(t.colors[e][Math.max(0,a-2)],.15),[`--mantine-color-${r}-light-hover`]:Gc(t.colors[e][Math.max(0,a-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(a-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(a-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Gc(t.colors[e][Math.max(a-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...i}:i}function LH(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function $c(t,e,n){co(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const kO=t=>{const e=Jh(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:Te(t.defaultRadius),r={variables:{"--mantine-z-index-app":"100","--mantine-z-index-modal":"200","--mantine-z-index-popover":"300","--mantine-z-index-overlay":"400","--mantine-z-index-max":"9999","--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-color-scheme":"light","--mantine-primary-color-contrast":JN(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)","--mantine-color-disabled":"var(--mantine-color-gray-2)","--mantine-color-disabled-color":"var(--mantine-color-gray-5)","--mantine-color-disabled-border":"var(--mantine-color-gray-3)"},dark:{"--mantine-color-scheme":"dark","--mantine-primary-color-contrast":JN(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)","--mantine-color-disabled":"var(--mantine-color-dark-6)","--mantine-color-disabled-color":"var(--mantine-color-dark-3)","--mantine-color-disabled-border":"var(--mantine-color-dark-4)"}};$c(r.variables,t.breakpoints,"breakpoint"),$c(r.variables,t.spacing,"spacing"),$c(r.variables,t.fontSizes,"font-size"),$c(r.variables,t.lineHeights,"line-height"),$c(r.variables,t.shadows,"shadow"),$c(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((a,i)=>{r.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${t.primaryColor}-${i})`}),co(t.colors).forEach(a=>{const i=t.colors[a];if(LH(i)){Object.assign(r.light,Nv({theme:t,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Nv({theme:t,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((s,u)=>{r.variables[`--mantine-color-${a}-${u}`]=s}),Object.assign(r.light,Nv({theme:t,color:a,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Nv({theme:t,color:a,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return co(o).forEach(a=>{r.variables[`--mantine-${a}-font-size`]=o[a].fontSize,r.variables[`--mantine-${a}-line-height`]=o[a].lineHeight,r.variables[`--mantine-${a}-font-weight`]=o[a].fontWeight||t.headings.fontWeight}),r};function jH({theme:t,generator:e}){const n=kO(t),r=e?.(t);return r?_S(n,r):n}const C1=kO(DS);function zH(t){const e={variables:{},light:{},dark:{}};return co(t.variables).forEach(n=>{C1.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),co(t.light).forEach(n=>{C1.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),co(t.dark).forEach(n=>{C1.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function UH(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function IO({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=Vr(),r=By(),o=yH(),a=jH({theme:n,generator:o}),i=t===":root"&&e,s=i?zH(a):a,u=BH(s,t);return u?w.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${u}${i?"":UH(t)}`}}):null}IO.displayName="@mantine/CssVariables";function qc(t,e){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=t!=="auto"?t:n?"dark":"light";e()?.setAttribute("data-mantine-color-scheme",r)}function WH({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=A.useRef(null),[a,i]=A.useState(()=>t.get(e)),s=r||a,u=A.useCallback(d=>{r||(qc(d,n),i(d),t.set(d))},[t.set,s,r]),l=A.useCallback(()=>{i(e),qc(e,n),t.clear()},[t.clear,e]);return A.useEffect(()=>(t.subscribe(u),t.unsubscribe),[t.subscribe,t.unsubscribe]),nf(()=>{qc(t.get(e),n)},[]),A.useEffect(()=>{if(r)return qc(r,n),()=>{};r===void 0&&qc(a,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=f=>{a==="auto"&&qc(f.matches?"dark":"light",n)};return o.current?.addEventListener("change",d),()=>o.current?.removeEventListener("change",d)},[a,r]),{colorScheme:s,setColorScheme:u,clearColorScheme:l}}function VH({respectReducedMotion:t,getRootElement:e}){nf(()=>{t&&e()?.setAttribute("data-respect-reduced-motion","true")},[t])}function MO({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:a=!0,withCssVariables:i=!0,cssVariablesSelector:s=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=IH(),defaultColorScheme:d="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:m,stylesTransform:g,env:y}){const{colorScheme:b,setColorScheme:S,clearColorScheme:C}=WH({defaultColorScheme:d,forceColorScheme:m,manager:l,getRootElement:f});return VH({respectReducedMotion:t?.respectReducedMotion||!1,getRootElement:f}),w.jsx(AS.Provider,{value:{colorScheme:b,setColorScheme:S,clearColorScheme:C,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:s,withStaticClasses:r,stylesTransform:g,env:y},children:w.jsxs(DO,{theme:t,children:[i&&w.jsx(IO,{cssVariablesSelector:s,deduplicateCssVariables:a}),o&&w.jsx(FH,{}),e]})})}MO.displayName="@mantine/core/MantineProvider";function Hl({classNames:t,styles:e,props:n,stylesCtx:r}){const o=Vr();return{resolvedClassNames:Fy({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:Ng({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const HH={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function GH({theme:t,options:e,unstyled:n}){return vr(e?.focusable&&!n&&(t.focusClassName||HH[t.focusRing]),e?.active&&!n&&t.activeClassName)}function $H({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return Fy({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:e})[t]}function ZN({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return Fy({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function qH({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function XH({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function KH({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function YH({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(a=>Fy({theme:e,classNames:e.components[a]?.classNames,props:r,stylesCtx:o})?.[n])}function QH({options:t,classes:e,selector:n,unstyled:r}){return t?.variant&&!r?e[`${n}--${t.variant}`]:void 0}function JH({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:a,classes:i,unstyled:s,className:u,rootSelector:l,props:d,stylesCtx:f,withStaticClasses:p,headless:m,transformedStyles:g}){return vr(GH({theme:t,options:e,unstyled:s||m}),YH({theme:t,themeName:n,selector:r,props:d,stylesCtx:f}),QH({options:e,classes:i,selector:r,unstyled:s}),ZN({selector:r,stylesCtx:f,theme:t,classNames:a,props:d}),ZN({selector:r,stylesCtx:f,theme:t,classNames:g,props:d}),$H({selector:r,stylesCtx:f,options:e,props:d,theme:t}),qH({rootSelector:l,selector:r,className:u}),XH({selector:r,classes:i,unstyled:s||m}),p&&!m&&KH({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e?.withStaticClass}),e?.className)}function ZH({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(a=>Ng({theme:t,styles:t.components[a]?.styles,props:n,stylesCtx:r})[o]).reduce((a,i)=>({...a,...i}),{})}function Qw({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Qw({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function eG(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...Tp(n[r])}}),e),{})}function tG({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:a,themeName:i,headless:s}){return eG([s?{}:e?.(n,r,o),...i.map(u=>n.components?.[u]?.vars?.(n,r,o)),t?.(n,r,o)])?.[a]}function nG({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:a,rootSelector:i,styles:s,style:u,vars:l,varsResolver:d,headless:f,withStylesTransform:p}){return{...!p&&ZH({theme:t,themeName:e,props:o,stylesCtx:a,selector:n}),...!p&&Ng({theme:t,styles:s,props:o,stylesCtx:a})[n],...!p&&Ng({theme:t,styles:r?.styles,props:r?.props||o,stylesCtx:a})[n],...tG({theme:t,props:o,stylesCtx:a,vars:l,varsResolver:d,selector:n,themeName:e,headless:f}),...i===n?Qw({style:u,theme:t}):null,...Qw({style:r?.style,theme:t})}}function rG({props:t,stylesCtx:e,themeName:n}){const r=Vr(),o=CH()?.();return{getTransformedStyles:i=>o?[...i.map(u=>o(u,{props:t,theme:r,ctx:e})),...n.map(u=>o(r.components[u]?.styles,{props:t,theme:r,ctx:e}))].filter(Boolean):[],withStylesTransform:!!o}}function dt({name:t,classes:e,props:n,stylesCtx:r,className:o,style:a,rootSelector:i="root",unstyled:s,classNames:u,styles:l,vars:d,varsResolver:f,attributes:p}){const m=Vr(),g=bH(),y=xH(),b=wH(),S=(Array.isArray(t)?t:[t]).filter(_=>_),{withStylesTransform:C,getTransformedStyles:E}=rG({props:n,stylesCtx:r,themeName:S});return(_,T)=>({className:JH({theme:m,options:T,themeName:S,selector:_,classNamesPrefix:g,classNames:u,classes:e,unstyled:s,className:o,rootSelector:i,props:n,stylesCtx:r,withStaticClasses:y,headless:b,transformedStyles:E([T?.styles,l])}),style:nG({theme:m,themeName:S,selector:_,options:T,props:n,stylesCtx:r,rootSelector:i,styles:l,style:a,vars:d,varsResolver:f,headless:b,withStylesTransform:C}),...p?.[_]})}function oG(t,e){return typeof t=="boolean"?t:e.autoContrast}function eD(t){const e=document.createElement("style");return e.setAttribute("data-mantine-styles","inline"),e.innerHTML="*, *::before, *::after {transition: none !important;}",e.setAttribute("data-mantine-disable-transition","true"),t&&e.setAttribute("nonce",t),document.head.appendChild(e),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(r=>r.remove())}function OO({keepTransitions:t}={}){const e=A.useRef(Ag),n=A.useRef(-1),r=A.useContext(AS),o=By(),a=A.useRef(o?.());if(!r)throw new Error("[@mantine/core] MantineProvider was not found in tree");const i=f=>{r.setColorScheme(f),e.current=t?()=>{}:eD(a.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{e.current?.()},10)},s=()=>{r.clearColorScheme(),e.current=t?()=>{}:eD(a.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{e.current?.()},10)},u=qV("light",{getInitialValueInEffect:!1}),l=r.colorScheme==="auto"?u:r.colorScheme,d=A.useCallback(()=>i(l==="light"?"dark":"light"),[i,l]);return A.useEffect(()=>()=>{e.current?.(),window.clearTimeout(n.current)},[]),{colorScheme:r.colorScheme,setColorScheme:i,clearColorScheme:s,toggleColorScheme:d}}function De(t,e,n){const r=Vr(),o=r.components[t]?.defaultProps,a=typeof o=="function"?o(r):o;return{...e,...a,...Tp(n)}}function E1(t){return co(t).reduce((e,n)=>t[n]!==void 0?`${e}${PV(n)}:${t[n]};`:e,"").trim()}function aG({selector:t,styles:e,media:n,container:r}){const o=e?E1(e):"",a=Array.isArray(n)?n.map(s=>`@media${s.query}{${t}{${E1(s.styles)}}}`):[],i=Array.isArray(r)?r.map(s=>`@container ${s.query}{${t}{${E1(s.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${a.join("")}${i.join("")}`.trim()}function MS(t){const e=By();return w.jsx("style",{"data-mantine-styles":"inline",nonce:e?.(),dangerouslySetInnerHTML:{__html:aG(t)}})}function jy(t){const{m:e,mx:n,my:r,mt:o,mb:a,ml:i,mr:s,me:u,ms:l,p:d,px:f,py:p,pt:m,pb:g,pl:y,pr:b,pe:S,ps:C,bd:E,bdrs:_,bg:T,c:D,opacity:k,ff:I,fz:M,fw:O,lts:F,ta:j,lh:G,fs:W,tt:q,td:P,w:z,miw:U,maw:H,h:L,mih:$,mah:J,bgsz:ne,bgp:ce,bgr:be,bga:se,pos:ie,top:fe,left:ge,bottom:Oe,right:je,inset:Le,display:ke,flex:qe,hiddenFrom:nt,visibleFrom:it,lightHidden:Ie,darkHidden:Me,sx:Be,...Je}=t;return{styleProps:Tp({m:e,mx:n,my:r,mt:o,mb:a,ml:i,mr:s,me:u,ms:l,p:d,px:f,py:p,pt:m,pb:g,pl:y,pr:b,pe:S,ps:C,bd:E,bg:T,c:D,opacity:k,ff:I,fz:M,fw:O,lts:F,ta:j,lh:G,fs:W,tt:q,td:P,w:z,miw:U,maw:H,h:L,mih:$,mah:J,bgsz:ne,bgp:ce,bgr:be,bga:se,pos:ie,top:fe,left:ge,bottom:Oe,right:je,inset:Le,display:ke,flex:qe,bdrs:_,hiddenFrom:nt,visibleFrom:it,lightHidden:Ie,darkHidden:Me,sx:Be}),rest:Je}}const iG={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bdrs:{type:"radius",property:"borderRadius"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function OS(t,e){const n=Ap({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function sG(t,e){const n=Ap({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:OS(t,e)}function uG(t,e){if(typeof t=="number")return Te(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(i=>i.trim()!=="");let a=`${Te(n)}`;return r&&(a+=` ${r}`),o.length>0&&(a+=` ${OS(o.join(" "),e)}`),a.trim()}return t}const tD={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function lG(t){return typeof t=="string"&&t in tD?tD[t]:t}const cG=["h1","h2","h3","h4","h5","h6"];function dG(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&cG.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?Te(t):t}function fG(t){return t}const hG=["h1","h2","h3","h4","h5","h6"];function pG(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&hG.includes(t)?`var(--mantine-${t}-line-height)`:t}function mG(t,e){return typeof t=="string"&&t in e.radius?`var(--mantine-radius-${t})`:typeof t=="number"||typeof t=="string"?Te(t):t}function vG(t){return typeof t=="number"?Te(t):t}function gG(t,e){if(typeof t=="number")return Te(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return Te(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const R1={color:OS,textColor:sG,fontSize:dG,spacing:gG,radius:mG,identity:fG,size:vG,lineHeight:pG,fontFamily:lG,border:uG};function nD(t){return t.replace("(min-width: ","").replace("em)","")}function yG({media:t,...e}){const r=Object.keys(t).sort((o,a)=>Number(nD(o))-Number(nD(a))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function bG(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function xG(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function wG(t){return typeof t=="object"&&t!==null?co(t).filter(e=>e!=="base"):[]}function SG(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function CG({styleProps:t,data:e,theme:n}){return yG(co(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const a=e[o],i=Array.isArray(a.property)?a.property:[a.property],s=xG(t[o]);if(!bG(t[o]))return i.forEach(l=>{r.inlineStyles[l]=R1[a.type](s,n)}),r;r.hasResponsiveStyles=!0;const u=wG(t[o]);return i.forEach(l=>{s!=null&&(r.styles[l]=R1[a.type](s,n)),u.forEach(d=>{const f=`(min-width: ${n.breakpoints[d]})`;r.media[f]={...r.media[f],[l]:R1[a.type](SG(t[o],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function PO(){return`__m__-${A.useId().replace(/:/g,"")}`}function PS(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...PS(r,e)}),{}):typeof t=="function"?t(e):t??{}}function FO(t){return t.startsWith("data-")?t:`data-${t}`}function EG(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[FO(n)]=t[n]),e},{})}function BO(t){return t?typeof t=="string"?{[FO(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...BO(n)}),{}):EG(t):null}function Jw(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Jw(r,e)}),{}):typeof t=="function"?t(e):t??{}}function RG({theme:t,style:e,vars:n,styleProps:r}){const o=Jw(e,t),a=Jw(n,t);return{...o,...a,...r}}const LO=A.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:a,size:i,hiddenFrom:s,visibleFrom:u,lightHidden:l,darkHidden:d,renderRoot:f,__size:p,...m},g)=>{const y=Vr(),b=t||"div",{styleProps:S,rest:C}=jy(m),_=SH()?.()?.(S.sx),T=PO(),D=CG({styleProps:S,theme:y,data:iG}),k={ref:g,style:RG({theme:y,style:e,vars:n,styleProps:D.inlineStyles}),className:vr(r,_,{[T]:D.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":d,[`mantine-hidden-from-${s}`]:s,[`mantine-visible-from-${u}`]:u}),"data-variant":o,"data-size":xO(i)?void 0:i||void 0,size:p,...BO(a),...C};return w.jsxs(w.Fragment,{children:[D.hasResponsiveStyles&&w.jsx(MS,{selector:`.${T}`,styles:D.styles,media:D.media}),typeof f=="function"?f(k):w.jsx(b,{...k})]})});LO.displayName="@mantine/core/Box";const le=LO;function jO(t){return t}function Ue(t){const e=A.forwardRef(t);return e.extend=jO,e.withProps=n=>{const r=A.forwardRef((o,a)=>w.jsx(e,{...n,...o,ref:a}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function ro(t){const e=A.forwardRef(t);return e.withProps=n=>{const r=A.forwardRef((o,a)=>w.jsx(e,{...n,...o,ref:a}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=jO,e}const _G=A.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Np(){return A.useContext(_G)}function TG(t){if(!t||typeof t=="string")return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function _1(t){return t?.current?t.current.scrollHeight:"auto"}const _h=typeof window<"u"&&window.requestAnimationFrame,rD=0,AG=t=>({height:0,overflow:"hidden",...t?{}:{display:"none"}});function NG({transitionDuration:t,transitionTimingFunction:e="ease",onTransitionEnd:n=()=>{},opened:r,keepMounted:o=!1}){const a=A.useRef(null),i=AG(o),[s,u]=A.useState(r?{}:i),l=g=>{ef.flushSync(()=>u(g))},d=g=>{l(y=>({...y,...g}))};function f(g){const y=t||TG(g);return{transition:`height ${y}ms ${e}, opacity ${y}ms ${e}`}}Su(()=>{typeof _h=="function"&&_h(r?()=>{d({willChange:"height",display:"block",overflow:"hidden"}),_h(()=>{const g=_1(a);d({...f(g),height:g})})}:()=>{const g=_1(a);d({...f(g),willChange:"height",height:g}),_h(()=>d({height:rD,overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==a.current||g.propertyName!=="height"))if(r){const y=_1(a);y===s.height?l({}):d({height:y}),n()}else s.height===rD&&(l(i),n())};function m({style:g={},refKey:y="ref",...b}={}){const S=b[y],C={"aria-hidden":!r,...b,[y]:TO(a,S),onTransitionEnd:p,style:{boxSizing:"border-box",...g,...s}};return bt.version.startsWith("18")?r||(C.inert=""):C.inert=!r,C}return m}const DG={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},zO=Ue((t,e)=>{const{children:n,in:r,transitionDuration:o,transitionTimingFunction:a,style:i,onTransitionEnd:s,animateOpacity:u,keepMounted:l,...d}=De("Collapse",DG,t),f=Vr(),p=Oy(),g=(f.respectReducedMotion?p:!1)?0:o,y=NG({opened:r,transitionDuration:g,transitionTimingFunction:a,onTransitionEnd:s,keepMounted:l});return g===0?r?w.jsx(le,{...d,children:n}):null:w.jsx(le,{...y({style:{opacity:r||!u?1:0,transition:u?`opacity ${g}ms ${a}`:"none",...PS(i,f)},ref:e,...d}),children:n})});zO.displayName="@mantine/core/Collapse";function zy(){return typeof window<"u"}function rf(t){return UO(t)?(t.nodeName||"").toLowerCase():"#document"}function fo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ni(t){var e;return(e=(UO(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function UO(t){return zy()?t instanceof Node||t instanceof fo(t).Node:!1}function En(t){return zy()?t instanceof Element||t instanceof fo(t).Element:!1}function Ho(t){return zy()?t instanceof HTMLElement||t instanceof fo(t).HTMLElement:!1}function Zw(t){return!zy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fo(t).ShadowRoot}const kG=new Set(["inline","contents"]);function Dp(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=ga(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!kG.has(o)}const IG=new Set(["table","td","th"]);function MG(t){return IG.has(rf(t))}const OG=[":popover-open",":modal"];function Uy(t){return OG.some(e=>{try{return t.matches(e)}catch{return!1}})}const PG=["transform","translate","scale","rotate","perspective"],FG=["transform","translate","scale","rotate","perspective","filter"],BG=["paint","layout","strict","content"];function FS(t){const e=Wy(),n=En(t)?ga(t):t;return PG.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||FG.some(r=>(n.willChange||"").includes(r))||BG.some(r=>(n.contain||"").includes(r))}function LG(t){let e=ys(t);for(;Ho(e)&&!Nu(e);){if(FS(e))return e;if(Uy(e))return null;e=ys(e)}return null}function Wy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jG=new Set(["html","body","#document"]);function Nu(t){return jG.has(rf(t))}function ga(t){return fo(t).getComputedStyle(t)}function Vy(t){return En(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ys(t){if(rf(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Zw(t)&&t.host||Ni(t);return Zw(e)?e.host:e}function WO(t){const e=ys(t);return Nu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ho(e)&&Dp(e)?e:WO(e)}function ps(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=WO(t),a=o===((r=t.ownerDocument)==null?void 0:r.body),i=fo(o);if(a){const s=e2(i);return e.concat(i,i.visualViewport||[],Dp(o)?o:[],s&&n?ps(s):[])}return e.concat(o,ps(o,[],n))}function e2(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function oD(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Zh(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&Zw(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function VO(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function HO(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function zG(t){return VG()?!1:!aD()&&t.width===0&&t.height===0||aD()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function UG(){return/apple/i.test(navigator.vendor)}function aD(){const t=/android/i;return t.test(VO())||t.test(HO())}function WG(){return VO().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function VG(){return HO().includes("jsdom/")}function t2(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function HG(t){return"nativeEvent"in t}function GG(t){return t.matches("html,body")}function Cl(t){return t?.ownerDocument||document}function T1(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function ed(t){return"composedPath"in t?t.composedPath()[0]:t.target}const $G="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function qG(t){return Ho(t)&&t.matches($G)}const XG=["top","right","bottom","left"],Wa=Math.min,Fr=Math.max,Dg=Math.round,Dv=Math.floor,bi=t=>({x:t,y:t}),KG={left:"right",right:"left",bottom:"top",top:"bottom"},YG={start:"end",end:"start"};function n2(t,e,n){return Fr(t,Wa(e,n))}function Si(t,e){return typeof t=="function"?t(e):t}function Va(t){return t.split("-")[0]}function of(t){return t.split("-")[1]}function BS(t){return t==="x"?"y":"x"}function LS(t){return t==="y"?"height":"width"}const QG=new Set(["top","bottom"]);function Oa(t){return QG.has(Va(t))?"y":"x"}function jS(t){return BS(Oa(t))}function JG(t,e,n){n===void 0&&(n=!1);const r=of(t),o=jS(t),a=LS(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=kg(i)),[i,kg(i)]}function ZG(t){const e=kg(t);return[r2(t),e,r2(e)]}function r2(t){return t.replace(/start|end/g,e=>YG[e])}const iD=["left","right"],sD=["right","left"],e8=["top","bottom"],t8=["bottom","top"];function n8(t,e,n){switch(t){case"top":case"bottom":return n?e?sD:iD:e?iD:sD;case"left":case"right":return e?e8:t8;default:return[]}}function r8(t,e,n,r){const o=of(t);let a=n8(Va(t),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),e&&(a=a.concat(a.map(r2)))),a}function kg(t){return t.replace(/left|right|bottom|top/g,e=>KG[e])}function o8(t){return{top:0,right:0,bottom:0,left:0,...t}}function zS(t){return typeof t!="number"?o8(t):{top:t,right:t,bottom:t,left:t}}function Dd(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function uD(t,e,n){let{reference:r,floating:o}=t;const a=Oa(e),i=jS(e),s=LS(i),u=Va(e),l=a==="y",d=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,p=r[s]/2-o[s]/2;let m;switch(u){case"top":m={x:d,y:r.y-o.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-o.width,y:f};break;default:m={x:r.x,y:r.y}}switch(of(e)){case"start":m[i]-=p*(n&&l?-1:1);break;case"end":m[i]+=p*(n&&l?-1:1);break}return m}const a8=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),u=await(i.isRTL==null?void 0:i.isRTL(e));let l=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:d,y:f}=uD(l,r,u),p=r,m={},g=0;for(let y=0;y<s.length;y++){const{name:b,fn:S}=s[y],{x:C,y:E,data:_,reset:T}=await S({x:d,y:f,initialPlacement:r,placement:p,strategy:o,middlewareData:m,rects:l,platform:i,elements:{reference:t,floating:e}});d=C??d,f=E??f,m={...m,[b]:{...m[b],..._}},T&&g<=50&&(g++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(l=T.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):T.rects),{x:d,y:f}=uD(l,p,u)),y=-1)}return{x:d,y:f,placement:p,strategy:o,middlewareData:m}};async function ep(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Si(e,t),g=zS(m),b=s[p?f==="floating"?"reference":"floating":f],S=Dd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:l,rootBoundary:d,strategy:u})),C=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),_=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},T=Dd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:C,offsetParent:E,strategy:u}):C);return{top:(S.top-T.top+g.top)/_.y,bottom:(T.bottom-S.bottom+g.bottom)/_.y,left:(S.left-T.left+g.left)/_.x,right:(T.right-S.right+g.right)/_.x}}const i8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:u}=e,{element:l,padding:d=0}=Si(t,e)||{};if(l==null)return{};const f=zS(d),p={x:n,y:r},m=jS(o),g=LS(m),y=await i.getDimensions(l),b=m==="y",S=b?"top":"left",C=b?"bottom":"right",E=b?"clientHeight":"clientWidth",_=a.reference[g]+a.reference[m]-p[m]-a.floating[g],T=p[m]-a.reference[m],D=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let k=D?D[E]:0;(!k||!await(i.isElement==null?void 0:i.isElement(D)))&&(k=s.floating[E]||a.floating[g]);const I=_/2-T/2,M=k/2-y[g]/2-1,O=Wa(f[S],M),F=Wa(f[C],M),j=O,G=k-y[g]-F,W=k/2-y[g]/2+I,q=n2(j,W,G),P=!u.arrow&&of(o)!=null&&W!==q&&a.reference[g]/2-(W<j?O:F)-y[g]/2<0,z=P?W<j?W-j:W-G:0;return{[m]:p[m]+z,data:{[m]:q,centerOffset:W-q-z,...P&&{alignmentOffset:z}},reset:P}}}),s8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:u,elements:l}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...b}=Si(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const S=Va(o),C=Oa(s),E=Va(s)===s,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),T=p||(E||!y?[kg(s)]:ZG(s)),D=g!=="none";!p&&D&&T.push(...r8(s,y,g,_));const k=[s,...T],I=await ep(e,b),M=[];let O=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&M.push(I[S]),f){const W=JG(o,i,_);M.push(I[W[0]],I[W[1]])}if(O=[...O,{placement:o,overflows:M}],!M.every(W=>W<=0)){var F,j;const W=(((F=a.flip)==null?void 0:F.index)||0)+1,q=k[W];if(q&&(!(f==="alignment"?C!==Oa(q):!1)||O.every(U=>Oa(U.placement)===C?U.overflows[0]>0:!0)))return{data:{index:W,overflows:O},reset:{placement:q}};let P=(j=O.filter(z=>z.overflows[0]<=0).sort((z,U)=>z.overflows[1]-U.overflows[1])[0])==null?void 0:j.placement;if(!P)switch(m){case"bestFit":{var G;const z=(G=O.filter(U=>{if(D){const H=Oa(U.placement);return H===C||H==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(H=>H>0).reduce((H,L)=>H+L,0)]).sort((U,H)=>U[1]-H[1])[0])==null?void 0:G[0];z&&(P=z);break}case"initialPlacement":P=s;break}if(o!==P)return{reset:{placement:P}}}return{}}}};function lD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function cD(t){return XG.some(e=>t[e]>=0)}const u8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Si(t,e);switch(r){case"referenceHidden":{const a=await ep(e,{...o,elementContext:"reference"}),i=lD(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:cD(i)}}}case"escaped":{const a=await ep(e,{...o,altBoundary:!0}),i=lD(a,n.floating);return{data:{escapedOffsets:i,escaped:cD(i)}}}default:return{}}}}};function GO(t){const e=Wa(...t.map(a=>a.left)),n=Wa(...t.map(a=>a.top)),r=Fr(...t.map(a=>a.right)),o=Fr(...t.map(a=>a.bottom));return{x:e,y:n,width:r-e,height:o-n}}function l8(t){const e=t.slice().sort((o,a)=>o.y-a.y),n=[];let r=null;for(let o=0;o<e.length;o++){const a=e[o];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map(o=>Dd(GO(o)))}const c8=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:o,platform:a,strategy:i}=e,{padding:s=2,x:u,y:l}=Si(t,e),d=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),f=l8(d),p=Dd(GO(d)),m=zS(s);function g(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(b=>u>b.left-m.left&&u<b.right+m.right&&l>b.top-m.top&&l<b.bottom+m.bottom)||p;if(f.length>=2){if(Oa(n)==="y"){const O=f[0],F=f[f.length-1],j=Va(n)==="top",G=O.top,W=F.bottom,q=j?O.left:F.left,P=j?O.right:F.right,z=P-q,U=W-G;return{top:G,bottom:W,left:q,right:P,width:z,height:U,x:q,y:G}}const b=Va(n)==="left",S=Fr(...f.map(O=>O.right)),C=Wa(...f.map(O=>O.left)),E=f.filter(O=>b?O.left===C:O.right===S),_=E[0].top,T=E[E.length-1].bottom,D=C,k=S,I=k-D,M=T-_;return{top:_,bottom:T,left:D,right:k,width:I,height:M,x:D,y:_}}return p}const y=await a.getElementRects({reference:{getBoundingClientRect:g},floating:r.floating,strategy:i});return o.reference.x!==y.reference.x||o.reference.y!==y.reference.y||o.reference.width!==y.reference.width||o.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}},$O=new Set(["left","top"]);async function d8(t,e){const{placement:n,platform:r,elements:o}=t,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Va(n),s=of(n),u=Oa(n)==="y",l=$O.has(i)?-1:1,d=a&&u?-1:1,f=Si(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof g=="number"&&(m=s==="end"?g*-1:g),u?{x:m*d,y:p*l}:{x:p*l,y:m*d}}const f8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=e,u=await d8(e,t);return i===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+u.x,y:a+u.y,data:{...u,placement:i}}}}},h8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:b=>{let{x:S,y:C}=b;return{x:S,y:C}}},...u}=Si(t,e),l={x:n,y:r},d=await ep(e,u),f=Oa(Va(o)),p=BS(f);let m=l[p],g=l[f];if(a){const b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",C=m+d[b],E=m-d[S];m=n2(C,m,E)}if(i){const b=f==="y"?"top":"left",S=f==="y"?"bottom":"right",C=g+d[b],E=g-d[S];g=n2(C,g,E)}const y=s.fn({...e,[p]:m,[f]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:a,[f]:i}}}}}},p8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=e,{offset:s=0,mainAxis:u=!0,crossAxis:l=!0}=Si(t,e),d={x:n,y:r},f=Oa(o),p=BS(f);let m=d[p],g=d[f];const y=Si(s,e),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(u){const E=p==="y"?"height":"width",_=a.reference[p]-a.floating[E]+b.mainAxis,T=a.reference[p]+a.reference[E]-b.mainAxis;m<_?m=_:m>T&&(m=T)}if(l){var S,C;const E=p==="y"?"width":"height",_=$O.has(Va(o)),T=a.reference[f]-a.floating[E]+(_&&((S=i.offset)==null?void 0:S[f])||0)+(_?0:b.crossAxis),D=a.reference[f]+a.reference[E]+(_?0:((C=i.offset)==null?void 0:C[f])||0)-(_?b.crossAxis:0);g<T?g=T:g>D&&(g=D)}return{[p]:m,[f]:g}}}},m8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:a,platform:i,elements:s}=e,{apply:u=()=>{},...l}=Si(t,e),d=await ep(e,l),f=Va(o),p=of(o),m=Oa(o)==="y",{width:g,height:y}=a.floating;let b,S;f==="top"||f==="bottom"?(b=f,S=p===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(S=f,b=p==="end"?"top":"bottom");const C=y-d.top-d.bottom,E=g-d.left-d.right,_=Wa(y-d[b],C),T=Wa(g-d[S],E),D=!e.middlewareData.shift;let k=_,I=T;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=C),D&&!p){const O=Fr(d.left,0),F=Fr(d.right,0),j=Fr(d.top,0),G=Fr(d.bottom,0);m?I=g-2*(O!==0||F!==0?O+F:Fr(d.left,d.right)):k=y-2*(j!==0||G!==0?j+G:Fr(d.top,d.bottom))}await u({...e,availableWidth:I,availableHeight:k});const M=await i.getDimensions(s.floating);return g!==M.width||y!==M.height?{reset:{rects:!0}}:{}}}};function qO(t){const e=ga(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Ho(t),a=o?t.offsetWidth:n,i=o?t.offsetHeight:r,s=Dg(n)!==a||Dg(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function US(t){return En(t)?t:t.contextElement}function gd(t){const e=US(t);if(!Ho(e))return bi(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:a}=qO(e);let i=(a?Dg(n.width):n.width)/r,s=(a?Dg(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const v8=bi(0);function XO(t){const e=fo(t);return!Wy()||!e.visualViewport?v8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function g8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==fo(t)?!1:e}function Bl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),a=US(t);let i=bi(1);e&&(r?En(r)&&(i=gd(r)):i=gd(t));const s=g8(a,n,r)?XO(a):bi(0);let u=(o.left+s.x)/i.x,l=(o.top+s.y)/i.y,d=o.width/i.x,f=o.height/i.y;if(a){const p=fo(a),m=r&&En(r)?fo(r):r;let g=p,y=e2(g);for(;y&&r&&m!==g;){const b=gd(y),S=y.getBoundingClientRect(),C=ga(y),E=S.left+(y.clientLeft+parseFloat(C.paddingLeft))*b.x,_=S.top+(y.clientTop+parseFloat(C.paddingTop))*b.y;u*=b.x,l*=b.y,d*=b.x,f*=b.y,u+=E,l+=_,g=fo(y),y=e2(g)}}return Dd({width:d,height:f,x:u,y:l})}function Hy(t,e){const n=Vy(t).scrollLeft;return e?e.left+n:Bl(Ni(t)).left+n}function KO(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Hy(t,n),o=n.top+e.scrollTop;return{x:r,y:o}}function y8(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const a=o==="fixed",i=Ni(r),s=e?Uy(e.floating):!1;if(r===i||s&&a)return n;let u={scrollLeft:0,scrollTop:0},l=bi(1);const d=bi(0),f=Ho(r);if((f||!f&&!a)&&((rf(r)!=="body"||Dp(i))&&(u=Vy(r)),Ho(r))){const m=Bl(r);l=gd(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=i&&!f&&!a?KO(i,u):bi(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+d.x+p.x,y:n.y*l.y-u.scrollTop*l.y+d.y+p.y}}function b8(t){return Array.from(t.getClientRects())}function x8(t){const e=Ni(t),n=Vy(t),r=t.ownerDocument.body,o=Fr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Fr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Hy(t);const s=-n.scrollTop;return ga(r).direction==="rtl"&&(i+=Fr(e.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}const dD=25;function w8(t,e){const n=fo(t),r=Ni(t),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,u=0;if(o){a=o.width,i=o.height;const d=Wy();(!d||d&&e==="fixed")&&(s=o.offsetLeft,u=o.offsetTop)}const l=Hy(r);if(l<=0){const d=r.ownerDocument,f=d.body,p=getComputedStyle(f),m=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,g=Math.abs(r.clientWidth-f.clientWidth-m);g<=dD&&(a-=g)}else l<=dD&&(a+=l);return{width:a,height:i,x:s,y:u}}const S8=new Set(["absolute","fixed"]);function C8(t,e){const n=Bl(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,a=Ho(t)?gd(t):bi(1),i=t.clientWidth*a.x,s=t.clientHeight*a.y,u=o*a.x,l=r*a.y;return{width:i,height:s,x:u,y:l}}function fD(t,e,n){let r;if(e==="viewport")r=w8(t,n);else if(e==="document")r=x8(Ni(t));else if(En(e))r=C8(e,n);else{const o=XO(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Dd(r)}function YO(t,e){const n=ys(t);return n===e||!En(n)||Nu(n)?!1:ga(n).position==="fixed"||YO(n,e)}function E8(t,e){const n=e.get(t);if(n)return n;let r=ps(t,[],!1).filter(s=>En(s)&&rf(s)!=="body"),o=null;const a=ga(t).position==="fixed";let i=a?ys(t):t;for(;En(i)&&!Nu(i);){const s=ga(i),u=FS(i);!u&&s.position==="fixed"&&(o=null),(a?!u&&!o:!u&&s.position==="static"&&!!o&&S8.has(o.position)||Dp(i)&&!u&&YO(t,i))?r=r.filter(d=>d!==i):o=s,i=ys(i)}return e.set(t,r),r}function R8(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?Uy(e)?[]:E8(e,this._c):[].concat(n),r],s=i[0],u=i.reduce((l,d)=>{const f=fD(e,d,o);return l.top=Fr(f.top,l.top),l.right=Wa(f.right,l.right),l.bottom=Wa(f.bottom,l.bottom),l.left=Fr(f.left,l.left),l},fD(e,s,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function _8(t){const{width:e,height:n}=qO(t);return{width:e,height:n}}function T8(t,e,n){const r=Ho(e),o=Ni(e),a=n==="fixed",i=Bl(t,!0,a,e);let s={scrollLeft:0,scrollTop:0};const u=bi(0);function l(){u.x=Hy(o)}if(r||!r&&!a)if((rf(e)!=="body"||Dp(o))&&(s=Vy(e)),r){const m=Bl(e,!0,a,e);u.x=m.x+e.clientLeft,u.y=m.y+e.clientTop}else o&&l();a&&!r&&o&&l();const d=o&&!r&&!a?KO(o,s):bi(0),f=i.left+s.scrollLeft-u.x-d.x,p=i.top+s.scrollTop-u.y-d.y;return{x:f,y:p,width:i.width,height:i.height}}function A1(t){return ga(t).position==="static"}function hD(t,e){if(!Ho(t)||ga(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ni(t)===n&&(n=n.ownerDocument.body),n}function QO(t,e){const n=fo(t);if(Uy(t))return n;if(!Ho(t)){let o=ys(t);for(;o&&!Nu(o);){if(En(o)&&!A1(o))return o;o=ys(o)}return n}let r=hD(t,e);for(;r&&MG(r)&&A1(r);)r=hD(r,e);return r&&Nu(r)&&A1(r)&&!FS(r)?n:r||LG(t)||n}const A8=async function(t){const e=this.getOffsetParent||QO,n=this.getDimensions,r=await n(t.floating);return{reference:T8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function N8(t){return ga(t).direction==="rtl"}const D8={convertOffsetParentRelativeRectToViewportRelativeRect:y8,getDocumentElement:Ni,getClippingRect:R8,getOffsetParent:QO,getElementRects:A8,getClientRects:b8,getDimensions:_8,getScale:gd,isElement:En,isRTL:N8};function JO(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function k8(t,e){let n=null,r;const o=Ni(t);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),a();const l=t.getBoundingClientRect(),{left:d,top:f,width:p,height:m}=l;if(s||e(),!p||!m)return;const g=Dv(f),y=Dv(o.clientWidth-(d+p)),b=Dv(o.clientHeight-(f+m)),S=Dv(d),E={rootMargin:-g+"px "+-y+"px "+-b+"px "+-S+"px",threshold:Fr(0,Wa(1,u))||1};let _=!0;function T(D){const k=D[0].intersectionRatio;if(k!==u){if(!_)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!JO(l,t.getBoundingClientRect())&&i(),_=!1}try{n=new IntersectionObserver(T,{...E,root:o.ownerDocument})}catch{n=new IntersectionObserver(T,E)}n.observe(t)}return i(!0),a}function ZO(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=US(t),d=o||a?[...l?ps(l):[],...ps(e)]:[];d.forEach(S=>{o&&S.addEventListener("scroll",n,{passive:!0}),a&&S.addEventListener("resize",n)});const f=l&&s?k8(l,n):null;let p=-1,m=null;i&&(m=new ResizeObserver(S=>{let[C]=S;C&&C.target===l&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),n()}),l&&!u&&m.observe(l),m.observe(e));let g,y=u?Bl(t):null;u&&b();function b(){const S=Bl(t);y&&!JO(y,S)&&n(),y=S,g=requestAnimationFrame(b)}return n(),()=>{var S;d.forEach(C=>{o&&C.removeEventListener("scroll",n),a&&C.removeEventListener("resize",n)}),f?.(),(S=m)==null||S.disconnect(),m=null,u&&cancelAnimationFrame(g)}}const I8=f8,M8=h8,O8=s8,P8=m8,F8=u8,pD=i8,B8=c8,L8=p8,j8=(t,e,n)=>{const r=new Map,o={platform:D8,...n},a={...o.platform,_c:r};return a8(t,e,{...o,platform:a})};var z8=typeof document<"u",U8=function(){},pg=z8?A.useLayoutEffect:U8;function Ig(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ig(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&t.$$typeof)&&!Ig(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function e3(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mD(t,e){const n=e3(t);return Math.round(e*n)/n}function N1(t){const e=A.useRef(t);return pg(()=>{e.current=t}),e}function W8(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:s=!0,whileElementsMounted:u,open:l}=t,[d,f]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=A.useState(r);Ig(p,r)||m(r);const[g,y]=A.useState(null),[b,S]=A.useState(null),C=A.useCallback(U=>{U!==D.current&&(D.current=U,y(U))},[]),E=A.useCallback(U=>{U!==k.current&&(k.current=U,S(U))},[]),_=a||g,T=i||b,D=A.useRef(null),k=A.useRef(null),I=A.useRef(d),M=u!=null,O=N1(u),F=N1(o),j=N1(l),G=A.useCallback(()=>{if(!D.current||!k.current)return;const U={placement:e,strategy:n,middleware:p};F.current&&(U.platform=F.current),j8(D.current,k.current,U).then(H=>{const L={...H,isPositioned:j.current!==!1};W.current&&!Ig(I.current,L)&&(I.current=L,ef.flushSync(()=>{f(L)}))})},[p,e,n,F,j]);pg(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[l]);const W=A.useRef(!1);pg(()=>(W.current=!0,()=>{W.current=!1}),[]),pg(()=>{if(_&&(D.current=_),T&&(k.current=T),_&&T){if(O.current)return O.current(_,T,G);G()}},[_,T,G,O,M]);const q=A.useMemo(()=>({reference:D,floating:k,setReference:C,setFloating:E}),[C,E]),P=A.useMemo(()=>({reference:_,floating:T}),[_,T]),z=A.useMemo(()=>{const U={position:n,left:0,top:0};if(!P.floating)return U;const H=mD(P.floating,d.x),L=mD(P.floating,d.y);return s?{...U,transform:"translate("+H+"px, "+L+"px)",...e3(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:L}},[n,s,P.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:G,refs:q,elements:P,floatingStyles:z}),[d,G,q,P,z])}const V8=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?pD({element:r.current,padding:o}).fn(n):{}:r?pD({element:r,padding:o}).fn(n):{}}}},t3=(t,e)=>({...I8(t),options:[t,e]}),WS=(t,e)=>({...M8(t),options:[t,e]}),vD=(t,e)=>({...L8(t),options:[t,e]}),Mg=(t,e)=>({...O8(t),options:[t,e]}),H8=(t,e)=>({...P8(t),options:[t,e]}),G8=(t,e)=>({...F8(t),options:[t,e]}),Wh=(t,e)=>({...B8(t),options:[t,e]}),n3=(t,e)=>({...V8(t),options:[t,e]});function r3(t){return A.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const o3={...w6},$8=o3.useInsertionEffect,q8=$8||(t=>t());function is(t){const e=A.useRef(()=>{});return q8(()=>{e.current=t}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var xi=typeof document<"u"?A.useLayoutEffect:A.useEffect;let gD=!1,X8=0;const yD=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+X8++;function K8(){const[t,e]=A.useState(()=>gD?yD():void 0);return xi(()=>{t==null&&e(yD())},[]),A.useEffect(()=>{gD=!0},[]),t}const Y8=o3.useId,a3=Y8||K8;function Q8(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const J8=A.createContext(null),Z8=A.createContext(null),VS=()=>{var t;return((t=A.useContext(J8))==null?void 0:t.id)||null},HS=()=>A.useContext(Z8);function GS(t){return"data-floating-ui-"+t}function D1(t){const e=A.useRef(t);return xi(()=>{e.current=t}),e}const bD=GS("safe-polygon");function mg(t,e,n){return n&&!t2(n)?0:typeof t=="number"?t:t?.[e]}function i3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:a,elements:i}=t,{enabled:s=!0,delay:u=0,handleClose:l=null,mouseOnly:d=!1,restMs:f=0,move:p=!0}=e,m=HS(),g=VS(),y=D1(l),b=D1(u),S=D1(n),C=A.useRef(),E=A.useRef(-1),_=A.useRef(),T=A.useRef(-1),D=A.useRef(!0),k=A.useRef(!1),I=A.useRef(()=>{}),M=A.useRef(!1),O=A.useCallback(()=>{var z;const U=(z=o.current.openEvent)==null?void 0:z.type;return U?.includes("mouse")&&U!=="mousedown"},[o]);A.useEffect(()=>{if(!s)return;function z(U){let{open:H}=U;H||(clearTimeout(E.current),clearTimeout(T.current),D.current=!0,M.current=!1)}return a.on("openchange",z),()=>{a.off("openchange",z)}},[s,a]),A.useEffect(()=>{if(!s||!y.current||!n)return;function z(H){O()&&r(!1,H,"hover")}const U=Cl(i.floating).documentElement;return U.addEventListener("mouseleave",z),()=>{U.removeEventListener("mouseleave",z)}},[i.floating,n,r,s,y,O]);const F=A.useCallback(function(z,U,H){U===void 0&&(U=!0),H===void 0&&(H="hover");const L=mg(b.current,"close",C.current);L&&!_.current?(clearTimeout(E.current),E.current=window.setTimeout(()=>r(!1,z,H),L)):U&&(clearTimeout(E.current),r(!1,z,H))},[b,r]),j=is(()=>{I.current(),_.current=void 0}),G=is(()=>{if(k.current){const z=Cl(i.floating).body;z.style.pointerEvents="",z.removeAttribute(bD),k.current=!1}}),W=is(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);A.useEffect(()=>{if(!s)return;function z($){if(clearTimeout(E.current),D.current=!1,d&&!t2(C.current)||f>0&&!mg(b.current,"open"))return;const J=mg(b.current,"open",C.current);J?E.current=window.setTimeout(()=>{S.current||r(!0,$,"hover")},J):n||r(!0,$,"hover")}function U($){if(W())return;I.current();const J=Cl(i.floating);if(clearTimeout(T.current),M.current=!1,y.current&&o.current.floatingContext){n||clearTimeout(E.current),_.current=y.current({...o.current.floatingContext,tree:m,x:$.clientX,y:$.clientY,onClose(){G(),j(),W()||F($,!0,"safe-polygon")}});const ce=_.current;J.addEventListener("mousemove",ce),I.current=()=>{J.removeEventListener("mousemove",ce)};return}(C.current==="touch"?!Zh(i.floating,$.relatedTarget):!0)&&F($)}function H($){W()||o.current.floatingContext&&(y.current==null||y.current({...o.current.floatingContext,tree:m,x:$.clientX,y:$.clientY,onClose(){G(),j(),W()||F($)}})($))}if(En(i.domReference)){var L;const $=i.domReference;return n&&$.addEventListener("mouseleave",H),(L=i.floating)==null||L.addEventListener("mouseleave",H),p&&$.addEventListener("mousemove",z,{once:!0}),$.addEventListener("mouseenter",z),$.addEventListener("mouseleave",U),()=>{var J;n&&$.removeEventListener("mouseleave",H),(J=i.floating)==null||J.removeEventListener("mouseleave",H),p&&$.removeEventListener("mousemove",z),$.removeEventListener("mouseenter",z),$.removeEventListener("mouseleave",U)}}},[i,s,t,d,f,p,F,j,G,r,n,S,m,b,y,o,W]),xi(()=>{var z;if(s&&n&&(z=y.current)!=null&&z.__options.blockPointerEvents&&O()){k.current=!0;const H=i.floating;if(En(i.domReference)&&H){var U;const L=Cl(i.floating).body;L.setAttribute(bD,"");const $=i.domReference,J=m==null||(U=m.nodesRef.current.find(ne=>ne.id===g))==null||(U=U.context)==null?void 0:U.elements.floating;return J&&(J.style.pointerEvents=""),L.style.pointerEvents="none",$.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{L.style.pointerEvents="",$.style.pointerEvents="",H.style.pointerEvents=""}}}},[s,n,g,i,m,y,O]),xi(()=>{n||(C.current=void 0,M.current=!1,j(),G())},[n,j,G]),A.useEffect(()=>()=>{j(),clearTimeout(E.current),clearTimeout(T.current),G()},[s,i.domReference,j,G]);const q=A.useMemo(()=>{function z(U){C.current=U.pointerType}return{onPointerDown:z,onPointerEnter:z,onMouseMove(U){const{nativeEvent:H}=U;function L(){!D.current&&!S.current&&r(!0,H,"hover")}d&&!t2(C.current)||n||f===0||M.current&&U.movementX**2+U.movementY**2<2||(clearTimeout(T.current),C.current==="touch"?L():(M.current=!0,T.current=window.setTimeout(L,f)))}}},[d,r,n,S,f]),P=A.useMemo(()=>({onMouseEnter(){clearTimeout(E.current)},onMouseLeave(z){W()||F(z.nativeEvent,!1)}}),[F,W]);return A.useMemo(()=>s?{reference:q,floating:P}:{},[s,q,P])}const o2=()=>{},s3=A.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:o2,setState:o2,isInstantPhase:!1}),e$=()=>A.useContext(s3);function u3(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,a]=A.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),i=A.useRef(null),s=A.useCallback(u=>{a({currentId:u})},[]);return xi(()=>{o.currentId?i.current===null?i.current=o.currentId:o.isInstantPhase||a({isInstantPhase:!0}):(o.isInstantPhase&&a({isInstantPhase:!1}),i.current=null)},[o.currentId,o.isInstantPhase]),A.createElement(s3.Provider,{value:A.useMemo(()=>({...o,setState:a,setCurrentId:s}),[o,s])},e)}function l3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:a,enabled:i=!0}=e,s=a??o,u=e$(),{currentId:l,setCurrentId:d,initialDelay:f,setState:p,timeoutMs:m}=u;return xi(()=>{i&&l&&(p({delay:{open:1,close:mg(f,"close")}}),l!==s&&r(!1))},[i,s,r,p,l,f]),xi(()=>{function g(){r(!1),p({delay:f,currentId:null})}if(i&&l&&!n&&l===s){if(m){const y=window.setTimeout(g,m);return()=>{clearTimeout(y)}}g()}},[i,n,p,l,s,r,f,m]),xi(()=>{i&&(d===o2||!n||d(s))},[i,n,d,s]),u}function k1(t,e){let n=t.filter(o=>{var a;return o.parentId===e&&((a=o.context)==null?void 0:a.open)}),r=n;for(;r.length;)r=t.filter(o=>{var a;return(a=r)==null?void 0:a.some(i=>{var s;return o.parentId===i.id&&((s=o.context)==null?void 0:s.open)})}),n=n.concat(r);return n}const t$="data-floating-ui-focusable",n$={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},r$={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},xD=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function c3(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:a}=t,{enabled:i=!0,escapeKey:s=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:d=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=e,y=HS(),b=is(typeof u=="function"?u:()=>!1),S=typeof u=="function"?b:u,C=A.useRef(!1),E=A.useRef(!1),{escapeKey:_,outsidePress:T}=xD(m),{escapeKey:D,outsidePress:k}=xD(g),I=A.useRef(!1),M=is(q=>{var P;if(!n||!i||!s||q.key!=="Escape"||I.current)return;const z=(P=a.current.floatingContext)==null?void 0:P.nodeId,U=y?k1(y.nodesRef.current,z):[];if(!_&&(q.stopPropagation(),U.length>0)){let H=!0;if(U.forEach(L=>{var $;if(($=L.context)!=null&&$.open&&!L.context.dataRef.current.__escapeKeyBubbles){H=!1;return}}),!H)return}r(!1,HG(q)?q.nativeEvent:q,"escape-key")}),O=is(q=>{var P;const z=()=>{var U;M(q),(U=ed(q))==null||U.removeEventListener("keydown",z)};(P=ed(q))==null||P.addEventListener("keydown",z)}),F=is(q=>{var P;const z=C.current;C.current=!1;const U=E.current;if(E.current=!1,l==="click"&&U||z||typeof S=="function"&&!S(q))return;const H=ed(q),L="["+GS("inert")+"]",$=Cl(o.floating).querySelectorAll(L);let J=En(H)?H:null;for(;J&&!Nu(J);){const se=ys(J);if(Nu(se)||!En(se))break;J=se}if($.length&&En(H)&&!GG(H)&&!Zh(H,o.floating)&&Array.from($).every(se=>!Zh(J,se)))return;if(Ho(H)&&W){const se=H.clientWidth>0&&H.scrollWidth>H.clientWidth,ie=H.clientHeight>0&&H.scrollHeight>H.clientHeight;let fe=ie&&q.offsetX>H.clientWidth;if(ie&&ga(H).direction==="rtl"&&(fe=q.offsetX<=H.offsetWidth-H.clientWidth),fe||se&&q.offsetY>H.clientHeight)return}const ne=(P=a.current.floatingContext)==null?void 0:P.nodeId,ce=y&&k1(y.nodesRef.current,ne).some(se=>{var ie;return T1(q,(ie=se.context)==null?void 0:ie.elements.floating)});if(T1(q,o.floating)||T1(q,o.domReference)||ce)return;const be=y?k1(y.nodesRef.current,ne):[];if(be.length>0){let se=!0;if(be.forEach(ie=>{var fe;if((fe=ie.context)!=null&&fe.open&&!ie.context.dataRef.current.__outsidePressBubbles){se=!1;return}}),!se)return}r(!1,q,"outside-press")}),j=is(q=>{var P;const z=()=>{var U;F(q),(U=ed(q))==null||U.removeEventListener(l,z)};(P=ed(q))==null||P.addEventListener(l,z)});A.useEffect(()=>{if(!n||!i)return;a.current.__escapeKeyBubbles=_,a.current.__outsidePressBubbles=T;let q=-1;function P($){r(!1,$,"ancestor-scroll")}function z(){window.clearTimeout(q),I.current=!0}function U(){q=window.setTimeout(()=>{I.current=!1},Wy()?5:0)}const H=Cl(o.floating);s&&(H.addEventListener("keydown",D?O:M,D),H.addEventListener("compositionstart",z),H.addEventListener("compositionend",U)),S&&H.addEventListener(l,k?j:F,k);let L=[];return p&&(En(o.domReference)&&(L=ps(o.domReference)),En(o.floating)&&(L=L.concat(ps(o.floating))),!En(o.reference)&&o.reference&&o.reference.contextElement&&(L=L.concat(ps(o.reference.contextElement)))),L=L.filter($=>{var J;return $!==((J=H.defaultView)==null?void 0:J.visualViewport)}),L.forEach($=>{$.addEventListener("scroll",P,{passive:!0})}),()=>{s&&(H.removeEventListener("keydown",D?O:M,D),H.removeEventListener("compositionstart",z),H.removeEventListener("compositionend",U)),S&&H.removeEventListener(l,k?j:F,k),L.forEach($=>{$.removeEventListener("scroll",P)}),window.clearTimeout(q)}},[a,o,s,S,l,n,r,p,i,_,T,M,D,O,F,k,j]),A.useEffect(()=>{C.current=!1},[S,l]);const G=A.useMemo(()=>({onKeyDown:M,[n$[f]]:q=>{d&&r(!1,q.nativeEvent,"reference-press")}}),[M,r,d,f]),W=A.useMemo(()=>({onKeyDown:M,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[r$[l]]:()=>{C.current=!0}}),[M,l]);return A.useMemo(()=>i?{reference:G,floating:W}:{},[i,G,W])}function o$(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=a3(),a=A.useRef({}),[i]=A.useState(()=>Q8()),s=VS()!=null,[u,l]=A.useState(r.reference),d=is((m,g,y)=>{a.current.openEvent=m?g:void 0,i.emit("openchange",{open:m,event:g,reason:y,nested:s}),n?.(m,g,y)}),f=A.useMemo(()=>({setPositionReference:l}),[]),p=A.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return A.useMemo(()=>({dataRef:a,open:e,onOpenChange:d,elements:p,events:i,floatingId:o,refs:f}),[e,d,p,i,o,f])}function Gy(t){t===void 0&&(t={});const{nodeId:e}=t,n=o$({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[a,i]=A.useState(null),[s,u]=A.useState(null),d=o?.domReference||a,f=A.useRef(null),p=HS();xi(()=>{d&&(f.current=d)},[d]);const m=W8({...t,elements:{...o,...s&&{reference:s}}}),g=A.useCallback(E=>{const _=En(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;u(_),m.refs.setReference(_)},[m.refs]),y=A.useCallback(E=>{(En(E)||E===null)&&(f.current=E,i(E)),(En(m.refs.reference.current)||m.refs.reference.current===null||E!==null&&!En(E))&&m.refs.setReference(E)},[m.refs]),b=A.useMemo(()=>({...m.refs,setReference:y,setPositionReference:g,domReference:f}),[m.refs,y,g]),S=A.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),C=A.useMemo(()=>({...m,...r,refs:b,elements:S,nodeId:e}),[m,b,S,e,r]);return xi(()=>{r.dataRef.current.floatingContext=C;const E=p?.nodesRef.current.find(_=>_.id===e);E&&(E.context=C)}),A.useMemo(()=>({...m,context:C,refs:b,elements:S}),[m,b,S,C])}function a$(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:a,elements:i}=t,{enabled:s=!0,visibleOnly:u=!0}=e,l=A.useRef(!1),d=A.useRef(),f=A.useRef(!0);A.useEffect(()=>{if(!s)return;const m=fo(i.domReference);function g(){!n&&Ho(i.domReference)&&i.domReference===oD(Cl(i.domReference))&&(l.current=!0)}function y(){f.current=!0}return m.addEventListener("blur",g),m.addEventListener("keydown",y,!0),()=>{m.removeEventListener("blur",g),m.removeEventListener("keydown",y,!0)}},[i.domReference,n,s]),A.useEffect(()=>{if(!s)return;function m(g){let{reason:y}=g;(y==="reference-press"||y==="escape-key")&&(l.current=!0)}return o.on("openchange",m),()=>{o.off("openchange",m)}},[o,s]),A.useEffect(()=>()=>{clearTimeout(d.current)},[]);const p=A.useMemo(()=>({onPointerDown(m){zG(m.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(m){if(l.current)return;const g=ed(m.nativeEvent);if(u&&En(g))try{if(UG()&&WG())throw Error();if(!g.matches(":focus-visible"))return}catch{if(!f.current&&!qG(g))return}r(!0,m.nativeEvent,"focus")},onBlur(m){l.current=!1;const g=m.relatedTarget,y=m.nativeEvent,b=En(g)&&g.hasAttribute(GS("focus-guard"))&&g.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var S;const C=oD(i.domReference?i.domReference.ownerDocument:document);!g&&C===i.domReference||Zh((S=a.current.floatingContext)==null?void 0:S.refs.floating.current,C)||Zh(i.domReference,C)||b||r(!1,y,"focus")})}}),[a,i.domReference,r,u]);return A.useMemo(()=>s?{reference:p}:{},[s,p])}const wD="active",SD="selected";function I1(t,e,n){const r=new Map,o=n==="item";let a=t;if(o&&t){const{[wD]:i,[SD]:s,...u}=t;a=u}return{...n==="floating"&&{tabIndex:-1,[t$]:""},...a,...e.map(i=>{const s=i?i[n]:null;return typeof s=="function"?t?s(t):null:s}).concat(t).reduce((i,s)=>(s&&Object.entries(s).forEach(u=>{let[l,d]=u;if(!(o&&[wD,SD].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof d=="function"){var f;(f=r.get(l))==null||f.push(d),i[l]=function(){for(var p,m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];return(p=r.get(l))==null?void 0:p.map(b=>b(...g)).find(b=>b!==void 0)}}}else i[l]=d}),i),{})}}function d3(t){t===void 0&&(t=[]);const e=t.map(s=>s?.reference),n=t.map(s=>s?.floating),r=t.map(s=>s?.item),o=A.useCallback(s=>I1(s,t,"reference"),e),a=A.useCallback(s=>I1(s,t,"floating"),n),i=A.useCallback(s=>I1(s,t,"item"),r);return A.useMemo(()=>({getReferenceProps:o,getFloatingProps:a,getItemProps:i}),[o,a,i])}const i$=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function f3(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:a=!0,role:i="dialog"}=e,s=(n=i$.get(i))!=null?n:i,u=a3(),d=VS()!=null,f=A.useMemo(()=>s==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":r?o:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:u},...s==="menu"&&d&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[s,o,d,r,u,i]),p=A.useMemo(()=>{const g={id:o,...s&&{role:s}};return s==="tooltip"||i==="label"?g:{...g,...s==="menu"&&{"aria-labelledby":u}}},[s,o,u,i]),m=A.useCallback(g=>{let{active:y,selected:b}=g;const S={role:"option",...y&&{id:o+"-option"}};switch(i){case"select":return{...S,"aria-selected":y&&b};case"combobox":return{...S,...y&&{"aria-selected":!0}}}return{}},[o,i]);return A.useMemo(()=>a?{reference:f,floating:p,item:m}:{},[a,f,p,m])}const[s$,Ea]=Ca("ScrollArea.Root component was not found in tree");function kd(t,e){const n=bl(e);nf(()=>{let r=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(r),o.unobserve(t)}}},[t,n])}const u$=A.forwardRef((t,e)=>{const{style:n,...r}=t,o=Ea(),[a,i]=A.useState(0),[s,u]=A.useState(0),l=!!(a&&s);return kd(o.scrollbarX,()=>{const d=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(d),u(d)}),kd(o.scrollbarY,()=>{const d=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(d),i(d)}),l?w.jsx("div",{...r,ref:e,style:{...n,width:a,height:s}}):null}),l$=A.forwardRef((t,e)=>{const n=Ea(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?w.jsx(u$,{...t,ref:e}):null}),c$={scrollHideDelay:1e3,type:"hover"},h3=A.forwardRef((t,e)=>{const{type:n,scrollHideDelay:r,scrollbars:o,getStyles:a,...i}=De("ScrollAreaRoot",c$,t),[s,u]=A.useState(null),[l,d]=A.useState(null),[f,p]=A.useState(null),[m,g]=A.useState(null),[y,b]=A.useState(null),[S,C]=A.useState(0),[E,_]=A.useState(0),[T,D]=A.useState(!1),[k,I]=A.useState(!1),M=er(e,O=>u(O));return w.jsx(s$,{value:{type:n,scrollHideDelay:r,scrollArea:s,viewport:l,onViewportChange:d,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:T,onScrollbarXEnabledChange:D,scrollbarY:y,onScrollbarYChange:b,scrollbarYEnabled:k,onScrollbarYEnabledChange:I,onCornerWidthChange:C,onCornerHeightChange:_,getStyles:a},children:w.jsx(le,{...i,ref:M,__vars:{"--sa-corner-width":o!=="xy"?"0px":`${S}px`,"--sa-corner-height":o!=="xy"?"0px":`${E}px`}})})});h3.displayName="@mantine/core/ScrollAreaRoot";function p3(t,e){const n=t/e;return Number.isNaN(n)?0:n}function $y(t){const e=p3(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function m3(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function d$(t,[e,n]){return Math.min(n,Math.max(e,t))}function CD(t,e,n="ltr"){const r=$y(e),o=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-o,i=e.content-e.viewport,s=a-r,u=n==="ltr"?[0,i]:[i*-1,0],l=d$(t,u);return m3([0,i],[0,s])(l)}function f$(t,e,n,r="ltr"){const o=$y(n),a=o/2,i=e||a,s=o-i,u=n.scrollbar.paddingStart+i,l=n.scrollbar.size-n.scrollbar.paddingEnd-s,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return m3([u,l],f)(t)}function v3(t,e){return t>0&&t<e}function gu(t){return t?parseInt(t,10):0}function Dl(t,e,{checkForDefaultPrevented:n=!0}={}){return r=>{t?.(r),(n===!1||!r.defaultPrevented)&&e?.(r)}}const[h$,g3]=Ca("ScrollAreaScrollbar was not found in tree"),y3=A.forwardRef((t,e)=>{const{sizes:n,hasThumb:r,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:i,onThumbPositionChange:s,onDragScroll:u,onWheelScroll:l,onResize:d,...f}=t,p=Ea(),[m,g]=A.useState(null),y=er(e,I=>g(I)),b=A.useRef(null),S=A.useRef(""),{viewport:C}=p,E=n.content-n.viewport,_=bl(l),T=bl(s),D=My(d,10),k=I=>{if(b.current){const M=I.clientX-b.current.left,O=I.clientY-b.current.top;u({x:M,y:O})}};return A.useEffect(()=>{const I=M=>{const O=M.target;m?.contains(O)&&_(M,E)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[C,m,E,_]),A.useEffect(T,[n,T]),kd(m,D),kd(p.content,D),w.jsx(h$,{value:{scrollbar:m,hasThumb:r,onThumbChange:bl(o),onThumbPointerUp:bl(a),onThumbPositionChange:T,onThumbPointerDown:bl(i)},children:w.jsx("div",{...f,ref:y,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:Dl(t.onPointerDown,I=>{I.preventDefault(),I.button===0&&(I.target.setPointerCapture(I.pointerId),b.current=m.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k(I))}),onPointerMove:Dl(t.onPointerMove,k),onPointerUp:Dl(t.onPointerUp,I=>{const M=I.target;M.hasPointerCapture(I.pointerId)&&(I.preventDefault(),M.releasePointerCapture(I.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=S.current,b.current=null}})})}),b3=A.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,style:o,...a}=t,i=Ea(),[s,u]=A.useState(),l=A.useRef(null),d=er(e,l,i.onScrollbarXChange);return A.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),w.jsx(y3,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{...o,"--sa-thumb-width":`${$y(n)}px`},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(i.viewport){const m=i.viewport.scrollLeft+f.deltaX;t.onWheelScroll(m),v3(m,p)&&f.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:gu(s.paddingLeft),paddingEnd:gu(s.paddingRight)}})}})});b3.displayName="@mantine/core/ScrollAreaScrollbarX";const x3=A.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,style:o,...a}=t,i=Ea(),[s,u]=A.useState(),l=A.useRef(null),d=er(e,l,i.onScrollbarYChange);return A.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),w.jsx(y3,{...a,"data-orientation":"vertical",ref:d,sizes:n,style:{"--sa-thumb-height":`${$y(n)}px`,...o},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(i.viewport){const m=i.viewport.scrollTop+f.deltaY;t.onWheelScroll(m),v3(m,p)&&f.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:gu(s.paddingTop),paddingEnd:gu(s.paddingBottom)}})}})});x3.displayName="@mantine/core/ScrollAreaScrollbarY";const qy=A.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,{dir:o}=Np(),a=Ea(),i=A.useRef(null),s=A.useRef(0),[u,l]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=p3(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:m=>{i.current=m},onThumbPointerUp:()=>{s.current=0},onThumbPointerDown:m=>{s.current=m}},p=(m,g)=>f$(m,s.current,u,g);return n==="horizontal"?w.jsx(b3,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=CD(m,u,o);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=p(m,o))}}):n==="vertical"?w.jsx(x3,{...f,ref:e,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=CD(m,u);u.scrollbar.size===0?i.current.style.setProperty("--thumb-opacity","0"):i.current.style.setProperty("--thumb-opacity","1"),i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=p(m))}}):null});qy.displayName="@mantine/core/ScrollAreaScrollbarVisible";const $S=A.forwardRef((t,e)=>{const n=Ea(),{forceMount:r,...o}=t,[a,i]=A.useState(!1),s=t.orientation==="horizontal",u=My(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(s?l:d)}},10);return kd(n.viewport,u),kd(n.content,u),r||a?w.jsx(qy,{"data-state":a?"visible":"hidden",...o,ref:e}):null});$S.displayName="@mantine/core/ScrollAreaScrollbarAuto";const w3=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Ea(),[a,i]=A.useState(!1);return A.useEffect(()=>{const{scrollArea:s}=o;let u=0;if(s){const l=()=>{window.clearTimeout(u),i(!0)},d=()=>{u=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return s.addEventListener("pointerenter",l),s.addEventListener("pointerleave",d),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",l),s.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),n||a?w.jsx($S,{"data-state":a?"visible":"hidden",...r,ref:e}):null});w3.displayName="@mantine/core/ScrollAreaScrollbarHover";const p$=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Ea(),a=t.orientation==="horizontal",[i,s]=A.useState("hidden"),u=My(()=>s("idle"),100);return A.useEffect(()=>{if(i==="idle"){const l=window.setTimeout(()=>s("hidden"),o.scrollHideDelay);return()=>window.clearTimeout(l)}},[i,o.scrollHideDelay]),A.useEffect(()=>{const{viewport:l}=o,d=a?"scrollLeft":"scrollTop";if(l){let f=l[d];const p=()=>{const m=l[d];f!==m&&(s("scrolling"),u()),f=m};return l.addEventListener("scroll",p),()=>l.removeEventListener("scroll",p)}},[o.viewport,a,u]),n||i!=="hidden"?w.jsx(qy,{"data-state":i==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Dl(t.onPointerEnter,()=>s("interacting")),onPointerLeave:Dl(t.onPointerLeave,()=>s("idle"))}):null}),a2=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=Ea(),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=o,s=t.orientation==="horizontal";return A.useEffect(()=>(s?a(!0):i(!0),()=>{s?a(!1):i(!1)}),[s,a,i]),o.type==="hover"?w.jsx(w3,{...r,ref:e,forceMount:n}):o.type==="scroll"?w.jsx(p$,{...r,ref:e,forceMount:n}):o.type==="auto"?w.jsx($S,{...r,ref:e,forceMount:n}):o.type==="always"?w.jsx(qy,{...r,ref:e}):null});a2.displayName="@mantine/core/ScrollAreaScrollbar";function m$(t,e=()=>{}){let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function o(){const a={left:t.scrollLeft,top:t.scrollTop},i=n.left!==a.left,s=n.top!==a.top;(i||s)&&e(),n=a,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)}const S3=A.forwardRef((t,e)=>{const{style:n,...r}=t,o=Ea(),a=g3(),{onThumbPositionChange:i}=a,s=er(e,d=>a.onThumbChange(d)),u=A.useRef(void 0),l=My(()=>{u.current&&(u.current(),u.current=void 0)},100);return A.useEffect(()=>{const{viewport:d}=o;if(d){const f=()=>{if(l(),!u.current){const p=m$(d,i);u.current=p,i()}};return i(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[o.viewport,l,i]),w.jsx("div",{"data-state":a.hasThumb?"visible":"hidden",...r,ref:s,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Dl(t.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),m=d.clientX-p.left,g=d.clientY-p.top;a.onThumbPointerDown({x:m,y:g})}),onPointerUp:Dl(t.onPointerUp,a.onThumbPointerUp)})});S3.displayName="@mantine/core/ScrollAreaThumb";const i2=A.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=g3();return n||o.hasThumb?w.jsx(S3,{ref:e,...r}):null});i2.displayName="@mantine/core/ScrollAreaThumb";const C3=A.forwardRef(({children:t,style:e,...n},r)=>{const o=Ea(),a=er(r,o.onViewportChange);return w.jsx(le,{...n,ref:a,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e},children:w.jsx("div",{...o.getStyles("content"),ref:o.onContentChange,children:t})})});C3.displayName="@mantine/core/ScrollAreaViewport";var qS={root:"m_d57069b5",content:"m_b1336c6",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const E3={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},v$=(t,{scrollbarSize:e,overscrollBehavior:n})=>({root:{"--scrollarea-scrollbar-size":Te(e),"--scrollarea-over-scroll-behavior":n}}),Xo=Ue((t,e)=>{const n=De("ScrollArea",E3,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,scrollbarSize:u,vars:l,type:d,scrollHideDelay:f,viewportProps:p,viewportRef:m,onScrollPositionChange:g,children:y,offsetScrollbars:b,scrollbars:S,onBottomReached:C,onTopReached:E,overscrollBehavior:_,attributes:T,...D}=n,[k,I]=A.useState(!1),[M,O]=A.useState(!1),[F,j]=A.useState(!1),G=dt({name:"ScrollArea",props:n,classes:qS,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:T,vars:l,varsResolver:v$}),W=A.useRef(null),q=r3([m,W]);return A.useEffect(()=>{if(!W.current||b!=="present")return;const P=W.current,z=new ResizeObserver(()=>{const{scrollHeight:U,clientHeight:H,scrollWidth:L,clientWidth:$}=P;O(U>H),j(L>$)});return z.observe(P),()=>z.disconnect()},[W,b]),w.jsxs(h3,{getStyles:G,type:d==="never"?"always":d,scrollHideDelay:f,ref:e,scrollbars:S,...G("root"),...D,children:[w.jsx(C3,{...p,...G("viewport",{style:p?.style}),ref:q,"data-offset-scrollbars":b===!0?"xy":b||void 0,"data-scrollbars":S||void 0,"data-horizontal-hidden":b==="present"&&!F?"true":void 0,"data-vertical-hidden":b==="present"&&!M?"true":void 0,onScroll:P=>{p?.onScroll?.(P),g?.({x:P.currentTarget.scrollLeft,y:P.currentTarget.scrollTop});const{scrollTop:z,scrollHeight:U,clientHeight:H}=P.currentTarget;z-(U-H)>=-.6&&C?.(),z===0&&E?.()},children:y}),(S==="xy"||S==="x")&&w.jsx(a2,{...G("scrollbar"),orientation:"horizontal","data-hidden":d==="never"||b==="present"&&!F?!0:void 0,forceMount:!0,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:w.jsx(i2,{...G("thumb")})}),(S==="xy"||S==="y")&&w.jsx(a2,{...G("scrollbar"),orientation:"vertical","data-hidden":d==="never"||b==="present"&&!M?!0:void 0,forceMount:!0,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:w.jsx(i2,{...G("thumb")})}),w.jsx(l$,{...G("corner"),"data-hovered":k||void 0,"data-hidden":d==="never"||void 0})]})});Xo.displayName="@mantine/core/ScrollArea";const XS=Ue((t,e)=>{const{children:n,classNames:r,styles:o,scrollbarSize:a,scrollHideDelay:i,type:s,dir:u,offsetScrollbars:l,viewportRef:d,onScrollPositionChange:f,unstyled:p,variant:m,viewportProps:g,scrollbars:y,style:b,vars:S,onBottomReached:C,onTopReached:E,onOverflowChange:_,...T}=De("ScrollAreaAutosize",E3,t),D=A.useRef(null),k=r3([d,D]),[I,M]=A.useState(!1),O=A.useRef(!1);return A.useEffect(()=>{if(!_)return;const F=D.current;if(!F)return;const j=()=>{const W=F.scrollHeight>F.clientHeight;W!==I&&(O.current?_?.(W):(O.current=!0,W&&_?.(!0)),M(W))};j();const G=new ResizeObserver(j);return G.observe(F),()=>G.disconnect()},[_,I]),w.jsx(le,{...T,ref:e,style:[{display:"flex",overflow:"hidden"},b],children:w.jsx(le,{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden",...y==="y"&&{minWidth:0},...y==="x"&&{minHeight:0},...y==="xy"&&{minWidth:0,minHeight:0},...y===!1&&{minWidth:0,minHeight:0}},children:w.jsx(Xo,{classNames:r,styles:o,scrollHideDelay:i,scrollbarSize:a,type:s,dir:u,offsetScrollbars:l,viewportRef:k,onScrollPositionChange:f,unstyled:p,variant:m,viewportProps:g,vars:S,scrollbars:y,onBottomReached:C,onTopReached:E,"data-autosize":"true",children:n})})})});Xo.classes=qS;XS.displayName="@mantine/core/ScrollAreaAutosize";XS.classes=qS;Xo.Autosize=XS;var R3={root:"m_87cf2631"};const g$={__staticSelector:"UnstyledButton"},Ci=ro((t,e)=>{const n=De("UnstyledButton",g$,t),{className:r,component:o="button",__staticSelector:a,unstyled:i,classNames:s,styles:u,style:l,attributes:d,...f}=n,p=dt({name:a,props:n,classes:R3,className:r,style:l,classNames:s,styles:u,unstyled:i,attributes:d});return w.jsx(le,{...p("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...f})});Ci.classes=R3;Ci.displayName="@mantine/core/UnstyledButton";var _3={root:"m_515a97f8"};const KS=Ue((t,e)=>{const n=De("VisuallyHidden",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,attributes:l,...d}=n,f=dt({name:"VisuallyHidden",classes:_3,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:l});return w.jsx(le,{component:"span",ref:e,...f("root"),...d})});KS.classes=_3;KS.displayName="@mantine/core/VisuallyHidden";var T3={root:"m_1b7284a3"};const y$=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:Zn(e),"--paper-shadow":TS(n)}}),Ra=ro((t,e)=>{const n=De("Paper",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,withBorder:u,vars:l,radius:d,shadow:f,variant:p,mod:m,attributes:g,...y}=n,b=dt({name:"Paper",props:n,classes:T3,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:l,varsResolver:y$});return w.jsx(le,{ref:e,mod:[{"data-with-border":u},m],...b("root"),variant:p,...y})});Ra.classes=T3;Ra.displayName="@mantine/core/Paper";function ED(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function RD(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const b$={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function x$({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:a,arrowY:i,dir:s}){const[u,l="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[b$[u]]:r},f=-e/2;return u==="left"?{...d,...ED(l,i,n,o),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...d,...ED(l,i,n,o),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...d,...RD(l,a,n,o,s),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...d,...RD(l,a,n,o,s),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const Og=A.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:a,arrowX:i,arrowY:s,style:u,...l},d)=>{const{dir:f}=Np();return a?w.jsx("div",{...l,ref:d,style:{...u,...x$({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:f,arrowX:i,arrowY:s})}}):null});Og.displayName="@mantine/core/FloatingArrow";function A3(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}var N3={root:"m_9814e45f"};const w$={zIndex:no("modal")},S$=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:a,zIndex:i})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&si(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${Te(o)})`:void 0,"--overlay-radius":a===void 0?void 0:Zn(a),"--overlay-z-index":i?.toString()}}),Xy=ro((t,e)=>{const n=De("Overlay",w$,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,fixed:l,center:d,children:f,radius:p,zIndex:m,gradient:g,blur:y,color:b,backgroundOpacity:S,mod:C,attributes:E,..._}=n,T=dt({name:"Overlay",props:n,classes:N3,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:E,vars:u,varsResolver:S$});return w.jsx(le,{ref:e,...T("root"),mod:[{center:d,fixed:l},C],..._,children:f})});Xy.classes=N3;Xy.displayName="@mantine/core/Overlay";function M1(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function C$({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||M1(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=M1(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return M1(n)}const E$={reuseTargetNode:!0},D3=Ue((t,e)=>{const{children:n,target:r,reuseTargetNode:o,...a}=De("Portal",E$,t),[i,s]=A.useState(!1),u=A.useRef(null);return nf(()=>(s(!0),u.current=C$({target:r,reuseTargetNode:o,...a}),Qh(e,u.current),!r&&!o&&u.current&&document.body.appendChild(u.current),()=>{!r&&!o&&u.current&&document.body.removeChild(u.current)}),[r]),!i||!u.current?null:ef.createPortal(w.jsx(w.Fragment,{children:n}),u.current)});D3.displayName="@mantine/core/Portal";const Du=Ue(({withinPortal:t=!0,children:e,...n},r)=>Ly()==="test"||!t?w.jsx(w.Fragment,{children:e}):w.jsx(D3,{ref:r,...n,children:e}));Du.displayName="@mantine/core/OptionalPortal";const Th=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),kv={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Th("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Th("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Th("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Th("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Th("top"),common:{transformOrigin:"top right"}}},_D={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function R$({transition:t,state:e,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in kv?{transitionProperty:kv[t].transitionProperty,...o,...kv[t].common,...kv[t][_D[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[_D[e]]}}function _$({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:a,onEntered:i,onExited:s,enterDelay:u,exitDelay:l}){const d=Vr(),f=Oy(),p=d.respectReducedMotion?f:!1,[m,g]=A.useState(p?0:t),[y,b]=A.useState(r?"entered":"exited"),S=A.useRef(-1),C=A.useRef(-1),E=A.useRef(-1);function _(){window.clearTimeout(S.current),window.clearTimeout(C.current),cancelAnimationFrame(E.current)}const T=k=>{_();const I=k?o:a,M=k?i:s,O=p?0:k?t:e;g(O),O===0?(typeof I=="function"&&I(),typeof M=="function"&&M(),b(k?"entered":"exited")):E.current=requestAnimationFrame(()=>{ld.flushSync(()=>{b(k?"pre-entering":"pre-exiting")}),E.current=requestAnimationFrame(()=>{typeof I=="function"&&I(),b(k?"entering":"exiting"),S.current=window.setTimeout(()=>{typeof M=="function"&&M(),b(k?"entered":"exited")},O)})})},D=k=>{if(_(),typeof(k?u:l)!="number"){T(k);return}C.current=window.setTimeout(()=>{T(k)},k?u:l)};return Su(()=>{D(r)},[r]),A.useEffect(()=>()=>{_()},[]),{transitionDuration:m,transitionStatus:y,transitionTimingFunction:n||"ease"}}function bs({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:a,timingFunction:i="ease",onExit:s,onEntered:u,onEnter:l,onExited:d,enterDelay:f,exitDelay:p}){const m=Ly(),{transitionDuration:g,transitionStatus:y,transitionTimingFunction:b}=_$({mounted:o,exitDuration:r,duration:n,timingFunction:i,onExit:s,onEntered:u,onEnter:l,onExited:d,enterDelay:f,exitDelay:p});return g===0||m==="test"?o?w.jsx(w.Fragment,{children:a({})}):t?a({display:"none"}):null:y==="exited"?t?a({display:"none"}):null:w.jsx(w.Fragment,{children:a(R$({transition:e,duration:g,state:y,timingFunction:b}))})}bs.displayName="@mantine/core/Transition";const[T$,k3]=Ca("Popover component was not found in the tree");function Ky({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=ZV(e),a=er(o,r);return Bu(t)?A.cloneElement(t,{[n]:a}):t}function I3(t){return w.jsx(KS,{tabIndex:-1,"data-autofocus":!0,...t})}Ky.displayName="@mantine/core/FocusTrap";I3.displayName="@mantine/core/FocusTrapInitialFocus";Ky.InitialFocus=I3;var M3={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const YS=Ue((t,e)=>{const n=De("PopoverDropdown",null,t),{className:r,style:o,vars:a,children:i,onKeyDownCapture:s,variant:u,classNames:l,styles:d,...f}=n,p=k3(),m=CO({opened:p.opened,shouldReturnFocus:p.returnFocus}),g=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},y=er(e,p.floating);return p.disabled?null:w.jsx(Du,{...p.portalProps,withinPortal:p.withinPortal,children:w.jsx(bs,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:typeof p.transitionProps?.exitDuration=="number"?p.transitionProps.exitDuration:p.transitionProps?.duration,children:b=>w.jsx(Ky,{active:p.trapFocus&&p.opened,innerRef:y,children:w.jsxs(le,{...g,...f,variant:u,onKeyDownCapture:LV(()=>{p.onClose?.(),p.onDismiss?.()},{active:p.closeOnEscape,onTrigger:m,onKeyDown:s}),"data-position":p.placement,"data-fixed":p.floatingStrategy==="fixed"||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:l,styles:d,style:[{...b,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:p.width==="target"?void 0:Te(p.width),...p.referenceHidden?{display:"none"}:null},p.resolvedStyles.dropdown,d?.dropdown,o]}),children:[i,w.jsx(Og,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:l,styles:d})})]})})})})});YS.classes=M3;YS.displayName="@mantine/core/PopoverDropdown";const A$={refProp:"ref",popupType:"dialog"},O3=Ue((t,e)=>{const{children:n,refProp:r,popupType:o,...a}=De("PopoverTarget",A$,t);if(!Bu(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=a,s=k3(),u=er(s.reference,Py(n),e),l=s.withRoles?{"aria-haspopup":o,"aria-expanded":s.opened,"aria-controls":s.getDropdownId(),id:s.getTargetId()}:{};return A.cloneElement(n,{...i,...l,...s.targetProps,className:vr(s.targetProps.className,i.className,n.props.className),[r]:u,...s.controlled?null:{onClick:()=>{s.onToggle(),n.props.onClick?.()}}})});O3.displayName="@mantine/core/PopoverTarget";function N$(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function D$(t,e,n){const r=N$(t.middlewares),o=[t3(t.offset),G8()];return t.dropdownVisible&&n!=="test"&&t.preventPositionChangeWhenVisible&&(r.flip=!1,r.shift=!1),r.shift&&o.push(WS(typeof r.shift=="boolean"?{limiter:vD(),padding:5}:{limiter:vD(),padding:5,...r.shift})),r.flip&&o.push(typeof r.flip=="boolean"?Mg():Mg(r.flip)),r.inline&&o.push(typeof r.inline=="boolean"?Wh():Wh(r.inline)),o.push(n3({element:t.arrowRef,padding:t.arrowOffset})),(r.size||t.width==="target")&&o.push(H8({...typeof r.size=="boolean"?{}:r.size,apply({rects:a,availableWidth:i,availableHeight:s,...u}){const d=e().refs.floating.current?.style??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:a,availableWidth:i,availableHeight:s,...u}):Object.assign(d,{maxWidth:`${i}px`,maxHeight:`${s}px`})),t.width==="target"&&Object.assign(d,{width:`${a.reference.width}px`})}})),o}function k$(t){const e=Ly(),[n,r]=gs({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),o=A.useRef(n),a=()=>{n&&!t.disabled&&r(!1)},i=()=>{t.disabled||r(!n)},s=Gy({strategy:t.strategy,placement:t.preventPositionChangeWhenVisible?t.positionRef.current:t.position,middleware:D$(t,()=>s,e)});return A.useEffect(()=>{if(!(!s.refs.reference.current||!s.refs.floating.current)&&n)return ZO(s.refs.reference.current,s.refs.floating.current,s.update)},[n,s.update]),Su(()=>{t.onPositionChange?.(s.placement),t.positionRef.current=s.placement},[s.placement,t.preventPositionChangeWhenVisible]),Su(()=>{n!==o.current&&(n?t.onOpen?.():t.onClose?.()),o.current=n},[n,t.onClose,t.onOpen]),Su(()=>{let u=-1;return n&&(u=window.setTimeout(()=>t.setDropdownVisible(!0),4)),()=>{window.clearTimeout(u)}},[n,t.position]),{floating:s,controlled:typeof t.opened=="boolean",opened:n,onClose:a,onToggle:i}}const I$={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,hideDetached:!0,clickOutsideEvents:["mousedown","touchstart"],zIndex:no("popover"),__staticSelector:"Popover",width:"max-content"},M$=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:Zn(e),"--popover-shadow":TS(n)}});function Go(t){const e=De("Popover",I$,t),{children:n,position:r,offset:o,onPositionChange:a,positionDependencies:i,opened:s,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:d,width:f,middlewares:p,withArrow:m,arrowSize:g,arrowOffset:y,arrowRadius:b,arrowPosition:S,unstyled:C,classNames:E,styles:_,closeOnClickOutside:T,withinPortal:D,portalProps:k,closeOnEscape:I,clickOutsideEvents:M,trapFocus:O,onClose:F,onDismiss:j,onOpen:G,onChange:W,zIndex:q,radius:P,shadow:z,id:U,defaultOpened:H,__staticSelector:L,withRoles:$,disabled:J,returnFocus:ne,variant:ce,keepMounted:be,vars:se,floatingStrategy:ie,withOverlay:fe,overlayProps:ge,hideDetached:Oe,attributes:je,preventPositionChangeWhenVisible:Le,...ke}=e,qe=dt({name:L,props:e,classes:M3,classNames:E,styles:_,unstyled:C,attributes:je,rootSelector:"dropdown",vars:se,varsResolver:M$}),{resolvedStyles:nt}=Hl({classNames:E,styles:_,props:e}),[it,Ie]=A.useState(s??H??!1),Me=A.useRef(r),Be=A.useRef(null),[Je,ct]=A.useState(null),[st,$e]=A.useState(null),{dir:Wt}=Np(),Fe=Ly(),Ve=$a(U),rt=k$({middlewares:p,width:f,position:A3(Wt,r),offset:typeof o=="number"?o+(m?g/2:0):o,arrowRef:Be,arrowOffset:y,onPositionChange:a,positionDependencies:i,opened:s,defaultOpened:H,onChange:W,onOpen:G,onClose:F,onDismiss:j,strategy:ie,dropdownVisible:it,setDropdownVisible:Ie,positionRef:Me,disabled:J,preventPositionChangeWhenVisible:Le,keepMounted:be});HV(()=>{T&&(rt.onClose(),j?.())},M,[Je,st]);const Lt=A.useCallback(gn=>{ct(gn),rt.floating.refs.setReference(gn)},[rt.floating.refs.setReference]),Ot=A.useCallback(gn=>{$e(gn),rt.floating.refs.setFloating(gn)},[rt.floating.refs.setFloating]),Vn=A.useCallback(()=>{u?.onExited?.(),l?.(),Ie(!1),Me.current=r},[u?.onExited,l]),Qt=A.useCallback(()=>{u?.onEntered?.(),d?.()},[u?.onEntered,d]);return w.jsxs(T$,{value:{returnFocus:ne,disabled:J,controlled:rt.controlled,reference:Lt,floating:Ot,x:rt.floating.x,y:rt.floating.y,arrowX:rt.floating?.middlewareData?.arrow?.x,arrowY:rt.floating?.middlewareData?.arrow?.y,opened:rt.opened,arrowRef:Be,transitionProps:{...u,onExited:Vn,onEntered:Qt},width:f,withArrow:m,arrowSize:g,arrowOffset:y,arrowRadius:b,arrowPosition:S,placement:rt.floating.placement,trapFocus:O,withinPortal:D,portalProps:k,zIndex:q,radius:P,shadow:z,closeOnEscape:I,onDismiss:j,onClose:rt.onClose,onToggle:rt.onToggle,getTargetId:()=>`${Ve}-target`,getDropdownId:()=>`${Ve}-dropdown`,withRoles:$,targetProps:ke,__staticSelector:L,classNames:E,styles:_,unstyled:C,variant:ce,keepMounted:be,getStyles:qe,resolvedStyles:nt,floatingStrategy:ie,referenceHidden:Oe&&Fe!=="test"?rt.floating.middlewareData.hide?.referenceHidden:!1},children:[n,fe&&w.jsx(bs,{transition:"fade",mounted:rt.opened,duration:u?.duration||250,exitDuration:u?.exitDuration||250,children:gn=>w.jsx(Du,{withinPortal:D,children:w.jsx(Xy,{...ge,...qe("overlay",{className:ge?.className,style:[gn,ge?.style]})})})})]})}Go.Target=O3;Go.Dropdown=YS;Go.displayName="@mantine/core/Popover";Go.extend=t=>t;var Pa={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const P3=A.forwardRef(({className:t,...e},n)=>w.jsxs(le,{component:"span",className:vr(Pa.barsLoader,t),...e,ref:n,children:[w.jsx("span",{className:Pa.bar}),w.jsx("span",{className:Pa.bar}),w.jsx("span",{className:Pa.bar})]}));P3.displayName="@mantine/core/Bars";const F3=A.forwardRef(({className:t,...e},n)=>w.jsxs(le,{component:"span",className:vr(Pa.dotsLoader,t),...e,ref:n,children:[w.jsx("span",{className:Pa.dot}),w.jsx("span",{className:Pa.dot}),w.jsx("span",{className:Pa.dot})]}));F3.displayName="@mantine/core/Dots";const B3=A.forwardRef(({className:t,...e},n)=>w.jsx(le,{component:"span",className:vr(Pa.ovalLoader,t),...e,ref:n}));B3.displayName="@mantine/core/Oval";const L3={bars:P3,oval:B3,dots:F3},O$={loaders:L3,type:"oval"},P$=(t,{size:e,color:n})=>({root:{"--loader-size":Ut(e,"loader-size"),"--loader-color":n?Jr(n,t):void 0}}),Ko=Ue((t,e)=>{const n=De("Loader",O$,t),{size:r,color:o,type:a,vars:i,className:s,style:u,classNames:l,styles:d,unstyled:f,loaders:p,variant:m,children:g,attributes:y,...b}=n,S=dt({name:"Loader",props:n,classes:Pa,className:s,style:u,classNames:l,styles:d,unstyled:f,attributes:y,vars:i,varsResolver:P$});return g?w.jsx(le,{...S("root"),ref:e,...b,children:g}):w.jsx(le,{...S("root"),ref:e,component:p[a],variant:m,size:r,...b})});Ko.defaultLoaders=L3;Ko.classes=Pa;Ko.displayName="@mantine/core/Loader";var af={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const TD={orientation:"horizontal"},F$=(t,{borderWidth:e})=>({group:{"--ai-border-width":Te(e)}}),QS=Ue((t,e)=>{const n=De("ActionIconGroup",TD,t),{className:r,style:o,classNames:a,styles:i,unstyled:s,orientation:u,vars:l,borderWidth:d,variant:f,mod:p,attributes:m,...g}=De("ActionIconGroup",TD,t),y=dt({name:"ActionIconGroup",props:n,classes:af,className:r,style:o,classNames:a,styles:i,unstyled:s,attributes:m,vars:l,varsResolver:F$,rootSelector:"group"});return w.jsx(le,{...y("group"),ref:e,variant:f,mod:[{"data-orientation":u},p],role:"group",...g})});QS.classes=af;QS.displayName="@mantine/core/ActionIconGroup";const B$=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:a,size:i})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{groupSection:{"--section-height":Ut(i,"section-height"),"--section-padding-x":Ut(i,"section-padding-x"),"--section-fz":Tr(i),"--section-radius":e===void 0?void 0:Zn(e),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},JS=Ue((t,e)=>{const n=De("ActionIconGroupSection",null,t),{className:r,style:o,classNames:a,styles:i,unstyled:s,vars:u,variant:l,gradient:d,radius:f,autoContrast:p,attributes:m,...g}=n,y=dt({name:"ActionIconGroupSection",props:n,classes:af,className:r,style:o,classNames:a,styles:i,unstyled:s,attributes:m,vars:u,varsResolver:B$,rootSelector:"groupSection"});return w.jsx(le,{...y("groupSection"),ref:e,variant:l,...g})});JS.classes=af;JS.displayName="@mantine/core/ActionIconGroupSection";const L$=(t,{size:e,radius:n,variant:r,gradient:o,color:a,autoContrast:i})=>{const s=t.variantColorResolver({color:a||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ai-size":Ut(e,"ai-size"),"--ai-radius":n===void 0?void 0:Zn(n),"--ai-bg":a||r?s.background:void 0,"--ai-hover":a||r?s.hover:void 0,"--ai-hover-color":a||r?s.hoverColor:void 0,"--ai-color":s.color,"--ai-bd":a||r?s.border:void 0}}},Nn=ro((t,e)=>{const n=De("ActionIcon",null,t),{className:r,unstyled:o,variant:a,classNames:i,styles:s,style:u,loading:l,loaderProps:d,size:f,color:p,radius:m,__staticSelector:g,gradient:y,vars:b,children:S,disabled:C,"data-disabled":E,autoContrast:_,mod:T,attributes:D,...k}=n,I=dt({name:["ActionIcon",g],props:n,className:r,style:u,classes:af,classNames:i,styles:s,unstyled:o,attributes:D,vars:b,varsResolver:L$});return w.jsxs(Ci,{...I("root",{active:!C&&!l&&!E}),...k,unstyled:o,variant:a,size:f,disabled:C||l,ref:e,mod:[{loading:l,disabled:C||E},T],children:[typeof l=="boolean"&&w.jsx(bs,{mounted:l,transition:"slide-down",duration:150,children:M=>w.jsx(le,{component:"span",...I("loader",{style:M}),"aria-hidden":!0,children:w.jsx(Ko,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),w.jsx(le,{component:"span",mod:{loading:l},...I("icon"),children:S})]})});Nn.classes=af;Nn.displayName="@mantine/core/ActionIcon";Nn.Group=QS;Nn.GroupSection=JS;const j3=A.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));j3.displayName="@mantine/core/CloseIcon";var z3={root:"m_86a44da5","root--subtle":"m_220c80f2"};const j$={variant:"subtle"},z$=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":Ut(e,"cb-size"),"--cb-radius":n===void 0?void 0:Zn(n),"--cb-icon-size":Te(r)}}),ju=ro((t,e)=>{const n=De("CloseButton",j$,t),{iconSize:r,children:o,vars:a,radius:i,className:s,classNames:u,style:l,styles:d,unstyled:f,"data-disabled":p,disabled:m,variant:g,icon:y,mod:b,attributes:S,__staticSelector:C,...E}=n,_=dt({name:C||"CloseButton",props:n,className:s,style:l,classes:z3,classNames:u,styles:d,unstyled:f,attributes:S,vars:a,varsResolver:z$});return w.jsxs(Ci,{ref:e,...E,unstyled:f,variant:g,disabled:m,mod:[{disabled:m||p},b],..._("root",{variant:g,active:!m&&!p}),children:[y||w.jsx(j3,{}),o]})});ju.classes=z3;ju.displayName="@mantine/core/CloseButton";function U$(t){return A.Children.toArray(t).filter(Boolean)}var U3={root:"m_4081bf90"};const W$={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},V$=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:a,wrap:i},{childWidth:s})=>({root:{"--group-child-width":e&&n?s:void 0,"--group-gap":Ur(r),"--group-align":o,"--group-justify":a,"--group-wrap":i}}),Ge=Ue((t,e)=>{const n=De("Group",W$,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,children:u,gap:l,align:d,justify:f,wrap:p,grow:m,preventGrowOverflow:g,vars:y,variant:b,__size:S,mod:C,attributes:E,..._}=n,T=U$(u),D=T.length,k=Ur(l??"md"),M={childWidth:`calc(${100/D}% - (${k} - ${k} / ${D}))`},O=dt({name:"Group",props:n,stylesCtx:M,className:o,style:a,classes:U3,classNames:r,styles:i,unstyled:s,attributes:E,vars:y,varsResolver:V$});return w.jsx(le,{...O("root"),ref:e,variant:b,mod:[{grow:m},C],size:S,..._,children:T})});Ge.classes=U3;Ge.displayName="@mantine/core/Group";const[H$,Ss]=Ca("ModalBase component was not found in tree");function G$({opened:t,transitionDuration:e}){const[n,r]=A.useState(t),o=A.useRef(-1),i=Oy()?0:e;return A.useEffect(()=>(t?(r(!0),window.clearTimeout(o.current)):i===0?r(!1):o.current=window.setTimeout(()=>r(!1),i),()=>window.clearTimeout(o.current)),[t,i]),n}function $$({id:t,transitionProps:e,opened:n,trapFocus:r,closeOnEscape:o,onClose:a,returnFocus:i}){const s=$a(t),[u,l]=A.useState(!1),[d,f]=A.useState(!1),p=typeof e?.duration=="number"?e?.duration:200,m=G$({opened:n,transitionDuration:p});return oH("keydown",g=>{g.key==="Escape"&&o&&!g.isComposing&&n&&g.target?.getAttribute("data-mantine-stop-propagation")!=="true"&&a()},{capture:!0}),CO({opened:n,shouldReturnFocus:r&&i}),{_id:s,titleMounted:u,bodyMounted:d,shouldLockScroll:m,setTitleMounted:l,setBodyMounted:f}}const ZS=A.forwardRef(({keepMounted:t,opened:e,onClose:n,id:r,transitionProps:o,onExitTransitionEnd:a,onEnterTransitionEnd:i,trapFocus:s,closeOnEscape:u,returnFocus:l,closeOnClickOutside:d,withinPortal:f,portalProps:p,lockScroll:m,children:g,zIndex:y,shadow:b,padding:S,__vars:C,unstyled:E,removeScrollProps:_,...T},D)=>{const{_id:k,titleMounted:I,bodyMounted:M,shouldLockScroll:O,setTitleMounted:F,setBodyMounted:j}=$$({id:r,transitionProps:o,opened:e,trapFocus:s,closeOnEscape:u,onClose:n,returnFocus:l}),{key:G,...W}=_||{};return w.jsx(Du,{...p,withinPortal:f,children:w.jsx(H$,{value:{opened:e,onClose:n,closeOnClickOutside:d,onExitTransitionEnd:a,onEnterTransitionEnd:i,transitionProps:{...o,keepMounted:t},getTitleId:()=>`${k}-title`,getBodyId:()=>`${k}-body`,titleMounted:I,bodyMounted:M,setTitleMounted:F,setBodyMounted:j,trapFocus:s,closeOnEscape:u,zIndex:y,unstyled:E},children:w.jsx(Tg,{enabled:O&&m,...W,children:w.jsx(le,{ref:D,...T,__vars:{...C,"--mb-z-index":(y||no("modal")).toString(),"--mb-shadow":TS(b),"--mb-padding":Ur(S)},children:g})},G)})})});ZS.displayName="@mantine/core/ModalBase";function q$(){const t=Ss();return A.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var Id={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const eC=A.forwardRef(({className:t,...e},n)=>{const r=q$(),o=Ss();return w.jsx(le,{ref:n,...e,id:r,className:vr({[Id.body]:!o.unstyled},t)})});eC.displayName="@mantine/core/ModalBaseBody";const tC=A.forwardRef(({className:t,onClick:e,...n},r)=>{const o=Ss();return w.jsx(ju,{ref:r,...n,onClick:a=>{o.onClose(),e?.(a)},className:vr({[Id.close]:!o.unstyled},t),unstyled:o.unstyled})});tC.displayName="@mantine/core/ModalBaseCloseButton";const nC=A.forwardRef(({transitionProps:t,className:e,innerProps:n,onKeyDown:r,style:o,...a},i)=>{const s=Ss();return w.jsx(bs,{mounted:s.opened,transition:"pop",...s.transitionProps,onExited:()=>{s.onExitTransitionEnd?.(),s.transitionProps?.onExited?.()},onEntered:()=>{s.onEnterTransitionEnd?.(),s.transitionProps?.onEntered?.()},...t,children:u=>w.jsx("div",{...n,className:vr({[Id.inner]:!s.unstyled},n.className),children:w.jsx(Ky,{active:s.opened&&s.trapFocus,innerRef:i,children:w.jsx(Ra,{...a,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":s.bodyMounted?s.getBodyId():void 0,"aria-labelledby":s.titleMounted?s.getTitleId():void 0,style:[o,u],className:vr({[Id.content]:!s.unstyled},e),unstyled:s.unstyled,children:a.children})})})})});nC.displayName="@mantine/core/ModalBaseContent";const rC=A.forwardRef(({className:t,...e},n)=>{const r=Ss();return w.jsx(le,{component:"header",ref:n,className:vr({[Id.header]:!r.unstyled},t),...e})});rC.displayName="@mantine/core/ModalBaseHeader";const X$={duration:200,timingFunction:"ease",transition:"fade"};function K$(t){const e=Ss();return{...X$,...e.transitionProps,...t}}const oC=A.forwardRef(({onClick:t,transitionProps:e,style:n,visible:r,...o},a)=>{const i=Ss(),s=K$(e);return w.jsx(bs,{mounted:r!==void 0?r:i.opened,...s,transition:"fade",children:u=>w.jsx(Xy,{ref:a,fixed:!0,style:[n,u],zIndex:i.zIndex,unstyled:i.unstyled,onClick:l=>{t?.(l),i.closeOnClickOutside&&i.onClose()},...o})})});oC.displayName="@mantine/core/ModalBaseOverlay";function Y$(){const t=Ss();return A.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const aC=A.forwardRef(({className:t,...e},n)=>{const r=Y$(),o=Ss();return w.jsx(le,{component:"h2",ref:n,className:vr({[Id.title]:!o.unstyled},t),...e,id:r})});aC.displayName="@mantine/core/ModalBaseTitle";function W3({children:t}){return w.jsx(w.Fragment,{children:t})}const[Q$,J$]=tf({size:"sm"}),V3=Ue((t,e)=>{const n=De("InputClearButton",null,t),{size:r,variant:o,vars:a,classNames:i,styles:s,...u}=n,l=J$(),{resolvedClassNames:d,resolvedStyles:f}=Hl({classNames:i,styles:s,props:n});return w.jsx(ju,{variant:o||"transparent",ref:e,size:r||l?.size||"sm",classNames:d,styles:f,__staticSelector:"InputClearButton",...u})});V3.displayName="@mantine/core/InputClearButton";const[Z$,kp]=tf({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var _a={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const eq=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Tr(e)} - ${Te(2)})`}}),Yy=Ue((t,e)=>{const n=De("InputDescription",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,__staticSelector:d,__inheritStyles:f=!0,attributes:p,variant:m,...g}=De("InputDescription",null,n),y=kp(),b=dt({name:["InputWrapper",d],props:n,classes:_a,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:p,rootSelector:"description",vars:u,varsResolver:eq}),S=f&&y?.getStyles||b;return w.jsx(le,{component:"p",ref:e,variant:m,size:l,...S("description",y?.getStyles?{className:o,style:a}:void 0),...g})});Yy.classes=_a;Yy.displayName="@mantine/core/InputDescription";const tq=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Tr(e)} - ${Te(2)})`}}),Qy=Ue((t,e)=>{const n=De("InputError",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,attributes:d,__staticSelector:f,__inheritStyles:p=!0,variant:m,...g}=n,y=dt({name:["InputWrapper",f],props:n,classes:_a,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:d,rootSelector:"error",vars:u,varsResolver:tq}),b=kp(),S=p&&b?.getStyles||y;return w.jsx(le,{component:"p",ref:e,variant:m,size:l,...S("error",b?.getStyles?{className:o,style:a}:void 0),...g})});Qy.classes=_a;Qy.displayName="@mantine/core/InputError";const AD={labelElement:"label"},nq=(t,{size:e})=>({label:{"--input-label-size":Tr(e),"--input-asterisk-color":void 0}}),Jy=Ue((t,e)=>{const n=De("InputLabel",AD,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,labelElement:l,size:d,required:f,htmlFor:p,onMouseDown:m,children:g,__staticSelector:y,variant:b,mod:S,attributes:C,...E}=De("InputLabel",AD,n),_=dt({name:["InputWrapper",y],props:n,classes:_a,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:C,rootSelector:"label",vars:u,varsResolver:nq}),T=kp(),D=T?.getStyles||_;return w.jsxs(le,{...D("label",T?.getStyles?{className:o,style:a}:void 0),component:l,variant:b,size:d,ref:e,htmlFor:l==="label"?p:void 0,mod:[{required:f},S],onMouseDown:k=>{m?.(k),!k.defaultPrevented&&k.detail>1&&k.preventDefault()},...E,children:[g,f&&w.jsx("span",{...D("required"),"aria-hidden":!0,children:" *"})]})});Jy.classes=_a;Jy.displayName="@mantine/core/InputLabel";const iC=Ue((t,e)=>{const n=De("InputPlaceholder",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,__staticSelector:l,variant:d,error:f,mod:p,attributes:m,...g}=n,y=dt({name:["InputPlaceholder",l],props:n,classes:_a,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:m,rootSelector:"placeholder"});return w.jsx(le,{...y("placeholder"),mod:[{error:!!f},p],component:"span",variant:d,ref:e,...g})});iC.classes=_a;iC.displayName="@mantine/core/InputPlaceholder";function rq(t,{hasDescription:e,hasError:n}){const r=t.findIndex(u=>u==="input"),o=t.slice(0,r),a=t.slice(r+1),i=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&a.includes("description")||n&&a.includes("error"),offsetTop:i}}const oq={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},aq=(t,{size:e})=>({label:{"--input-label-size":Tr(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Tr(e)} - ${Te(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Tr(e)} - ${Te(2)})`}}),sC=Ue((t,e)=>{const n=De("InputWrapper",oq,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,variant:d,__staticSelector:f,inputContainer:p,inputWrapperOrder:m,label:g,error:y,description:b,labelProps:S,descriptionProps:C,errorProps:E,labelElement:_,children:T,withAsterisk:D,id:k,required:I,__stylesApiProps:M,mod:O,attributes:F,...j}=n,G=dt({name:["InputWrapper",f],props:M||n,classes:_a,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:F,vars:u,varsResolver:aq}),W={size:l,variant:d,__staticSelector:f},q=$a(k),P=typeof D=="boolean"?D:I,z=E?.id||`${q}-error`,U=C?.id||`${q}-description`,H=q,L=!!y&&typeof y!="boolean",$=!!b,J=`${L?z:""} ${$?U:""}`,ne=J.trim().length>0?J.trim():void 0,ce=S?.id||`${q}-label`,be=g&&w.jsx(Jy,{labelElement:_,id:ce,htmlFor:H,required:P,...W,...S,children:g},"label"),se=$&&w.jsx(Yy,{...C,...W,size:C?.size||W.size,id:C?.id||U,children:b},"description"),ie=w.jsx(A.Fragment,{children:p(T)},"input"),fe=L&&A.createElement(Qy,{...E,...W,size:E?.size||W.size,key:"error",id:E?.id||z},y),ge=m.map(Oe=>{switch(Oe){case"label":return be;case"input":return ie;case"description":return se;case"error":return fe;default:return null}});return w.jsx(Z$,{value:{getStyles:G,describedBy:ne,inputId:H,labelId:ce,...rq(m,{hasDescription:$,hasError:L})},children:w.jsx(le,{ref:e,variant:d,size:l,mod:[{error:!!y},O],...G("root"),...j,children:ge})})});sC.classes=_a;sC.displayName="@mantine/core/InputWrapper";const iq={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0,size:"sm"},sq=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Ut(e.size,"input-height"),"--input-fz":Tr(e.size),"--input-radius":e.radius===void 0?void 0:Zn(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?Te(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?Te(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Ut(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Zr=ro((t,e)=>{const n=De("Input",iq,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,required:u,__staticSelector:l,__stylesApiProps:d,size:f,wrapperProps:p,error:m,disabled:g,leftSection:y,leftSectionProps:b,leftSectionWidth:S,rightSection:C,rightSectionProps:E,rightSectionWidth:_,rightSectionPointerEvents:T,leftSectionPointerEvents:D,variant:k,vars:I,pointer:M,multiline:O,radius:F,id:j,withAria:G,withErrorStyles:W,mod:q,inputSize:P,attributes:z,__clearSection:U,__clearable:H,__defaultRightSection:L,...$}=n,{styleProps:J,rest:ne}=jy($),ce=kp(),be={offsetBottom:ce?.offsetBottom,offsetTop:ce?.offsetTop},se=dt({name:["Input",l],props:d||n,classes:_a,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:z,stylesCtx:be,rootSelector:"wrapper",vars:I,varsResolver:sq}),ie=G?{required:u,disabled:g,"aria-invalid":!!m,"aria-describedby":ce?.describedBy,id:ce?.inputId||j}:{},fe=C||H&&U||L;return w.jsx(Q$,{value:{size:f||"sm"},children:w.jsxs(le,{...se("wrapper"),...J,...p,mod:[{error:!!m&&W,pointer:M,disabled:g,multiline:O,"data-with-right-section":!!fe,"data-with-left-section":!!y},q],variant:k,size:f,children:[y&&w.jsx("div",{...b,"data-position":"left",...se("section",{className:b?.className,style:b?.style}),children:y}),w.jsx(le,{component:"input",...ne,...ie,ref:e,required:u,mod:{disabled:g,error:!!m&&W},variant:k,__size:P,...se("input")}),fe&&w.jsx("div",{...E,"data-position":"right",...se("section",{className:E?.className,style:E?.style}),children:fe})]})})});Zr.classes=_a;Zr.Wrapper=sC;Zr.Label=Jy;Zr.Error=Qy;Zr.Description=Yy;Zr.Placeholder=iC;Zr.ClearButton=V3;Zr.displayName="@mantine/core/Input";function uq(t,e,n){const r=De(t,e,n),{label:o,description:a,error:i,required:s,classNames:u,styles:l,className:d,unstyled:f,__staticSelector:p,__stylesApiProps:m,errorProps:g,labelProps:y,descriptionProps:b,wrapperProps:S,id:C,size:E,style:_,inputContainer:T,inputWrapperOrder:D,withAsterisk:k,variant:I,vars:M,mod:O,attributes:F,...j}=r,{styleProps:G,rest:W}=jy(j),q={label:o,description:a,error:i,required:s,classNames:u,className:d,__staticSelector:p,__stylesApiProps:m||r,errorProps:g,labelProps:y,descriptionProps:b,unstyled:f,styles:l,size:E,style:_,inputContainer:T,inputWrapperOrder:D,withAsterisk:k,variant:I,id:C,mod:O,attributes:F,...S};return{...W,classNames:u,styles:l,unstyled:f,wrapperProps:{...q,...G},inputProps:{required:s,classNames:u,styles:l,unstyled:f,size:E,__staticSelector:p,__stylesApiProps:m||r,error:i,variant:I,id:C,attributes:F}}}const lq={__staticSelector:"InputBase",withAria:!0,size:"sm"},bo=ro((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=uq("InputBase",lq,t);return w.jsx(Zr.Wrapper,{...r,children:w.jsx(Zr,{...n,...o,ref:e})})});bo.classes={...Zr.classes,...Zr.Wrapper.classes};bo.displayName="@mantine/core/InputBase";function cq(t,e){if(!e||!t)return!1;let n=e.parentNode;for(;n!=null;){if(n===t)return!0;n=n.parentNode}return!1}function dq({target:t,parent:e,ref:n,displayAfterTransitionEnd:r}){const o=A.useRef(-1),[a,i]=A.useState(!1),[s,u]=A.useState(typeof r=="boolean"?r:!1),l=()=>{if(!t||!e||!n.current)return;const m=t.getBoundingClientRect(),g=e.getBoundingClientRect(),y=window.getComputedStyle(t),b=window.getComputedStyle(e),S=gu(y.borderTopWidth)+gu(b.borderTopWidth),C=gu(y.borderLeftWidth)+gu(b.borderLeftWidth),E={top:m.top-g.top-S,left:m.left-g.left-C,width:m.width,height:m.height};n.current.style.transform=`translateY(${E.top}px) translateX(${E.left}px)`,n.current.style.width=`${E.width}px`,n.current.style.height=`${E.height}px`},d=()=>{window.clearTimeout(o.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),o.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=A.useRef(null),p=A.useRef(null);return A.useEffect(()=>{if(l(),t)return f.current=new ResizeObserver(d),f.current.observe(t),e&&(p.current=new ResizeObserver(d),p.current.observe(e)),()=>{f.current?.disconnect(),p.current?.disconnect()}},[e,t]),A.useEffect(()=>{if(e){const m=g=>{cq(g.target,e)&&(d(),u(!1))};return e.addEventListener("transitionend",m),()=>{e.removeEventListener("transitionend",m)}}},[e]),lH(()=>{AO()!=="test"&&i(!0)},20,{autoInvoke:!0}),dH(m=>{m.forEach(g=>{g.type==="attributes"&&g.attributeName==="dir"&&d()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:a,hidden:s}}var H3={root:"m_96b553a6"};const fq=(t,{transitionDuration:e})=>({root:{"--transition-duration":typeof e=="number"?`${e}ms`:e}}),uC=Ue((t,e)=>{const n=De("FloatingIndicator",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,target:l,parent:d,transitionDuration:f,mod:p,displayAfterTransitionEnd:m,attributes:g,...y}=n,b=dt({name:"FloatingIndicator",classes:H3,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:u,varsResolver:fq}),S=A.useRef(null),{initialized:C,hidden:E}=dq({target:l,parent:d,ref:S,displayAfterTransitionEnd:m}),_=er(e,S);return!l||!d?null:w.jsx(le,{ref:_,mod:[{initialized:C,hidden:E},p],...b("root"),...y})});uC.displayName="@mantine/core/FloatingIndicator";uC.classes=H3;var G3={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const hq=(t,{radius:e,color:n,variant:r,autoContrast:o})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,variant:r||"light",autoContrast:o});return{root:{"--alert-radius":e===void 0?void 0:Zn(e),"--alert-bg":n||r?a.background:void 0,"--alert-color":a.color,"--alert-bd":n||r?a.border:void 0}}},ss=Ue((t,e)=>{const n=De("Alert",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,radius:l,color:d,title:f,children:p,id:m,icon:g,withCloseButton:y,onClose:b,closeButtonLabel:S,variant:C,autoContrast:E,attributes:_,...T}=n,D=dt({name:"Alert",classes:G3,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:_,vars:u,varsResolver:hq}),k=$a(m),I=f&&`${k}-title`||void 0,M=`${k}-body`;return w.jsx(le,{id:k,...D("root",{variant:C}),variant:C,ref:e,...T,role:"alert","aria-describedby":M,"aria-labelledby":I,children:w.jsxs("div",{...D("wrapper"),children:[g&&w.jsx("div",{...D("icon"),children:g}),w.jsxs("div",{...D("body"),children:[f&&w.jsx("div",{...D("title"),"data-with-close-button":y||void 0,children:w.jsx("span",{id:I,...D("label"),children:f})}),p&&w.jsx("div",{id:M,...D("message"),"data-variant":C,children:p})]}),y&&w.jsx(ju,{...D("closeButton"),onClick:b,variant:"transparent",size:16,iconSize:16,"aria-label":S,unstyled:s})]})})});ss.classes=G3;ss.displayName="@mantine/core/Alert";var $3={root:"m_b6d8b162"};function pq(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const mq={inherit:!1},vq=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:a})=>({root:{"--text-fz":Tr(o),"--text-lh":wO(o),"--text-gradient":e==="gradient"?Yw(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":a?Jr(a,t):void 0}}),we=ro((t,e)=>{const n=De("Text",mq,t),{lineClamp:r,truncate:o,inline:a,inherit:i,gradient:s,span:u,__staticSelector:l,vars:d,className:f,style:p,classNames:m,styles:g,unstyled:y,variant:b,mod:S,size:C,attributes:E,..._}=n,T=dt({name:["Text",l],props:n,classes:$3,className:f,style:p,classNames:m,styles:g,unstyled:y,attributes:E,vars:d,varsResolver:vq});return w.jsx(le,{...T("root",{focusable:!0}),ref:e,component:u?"span":"p",variant:b,mod:[{"data-truncate":pq(o),"data-line-clamp":typeof r=="number","data-inline":a,"data-inherit":i},S],size:C,..._})});we.classes=$3;we.displayName="@mantine/core/Text";var q3={root:"m_849cf0da"};const gq={underline:"hover"},Zy=ro((t,e)=>{const{underline:n,className:r,unstyled:o,mod:a,...i}=De("Anchor",gq,t);return w.jsx(we,{component:"a",ref:e,className:vr({[q3.root]:!o},r),...i,mod:[{underline:n},a],__staticSelector:"Anchor",unstyled:o})});Zy.classes=q3;Zy.displayName="@mantine/core/Anchor";function X3(t){return typeof t=="string"?{value:t,label:t}:"value"in t&&!("label"in t)?{value:t.value,label:t.value,disabled:t.disabled}:typeof t=="number"?{value:t.toString(),label:t.toString()}:"group"in t?{group:t.group,items:t.items.map(e=>X3(e))}:t}function K3(t){return t?t.map(e=>X3(e)):[]}function lC(t){return t.reduce((e,n)=>"group"in n?{...e,...lC(n.items)}:(e[n.value]=n,e),{})}var go={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const yq={error:null},bq=(t,{size:e,color:n})=>({chevron:{"--combobox-chevron-size":Ut(e,"combobox-chevron-size"),"--combobox-chevron-color":n?Jr(n,t):void 0}}),cC=Ue((t,e)=>{const n=De("ComboboxChevron",yq,t),{size:r,error:o,style:a,className:i,classNames:s,styles:u,unstyled:l,vars:d,mod:f,...p}=n,m=dt({name:"ComboboxChevron",classes:go,props:n,style:a,className:i,classNames:s,styles:u,unstyled:l,vars:d,varsResolver:bq,rootSelector:"chevron"});return w.jsx(le,{component:"svg",...p,...m("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:o},f],ref:e,children:w.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});cC.classes=go;cC.displayName="@mantine/core/ComboboxChevron";const[xq,Ta]=Ca("Combobox component was not found in tree"),Y3=A.forwardRef(({size:t,onMouseDown:e,onClick:n,onClear:r,...o},a)=>w.jsx(Zr.ClearButton,{ref:a,tabIndex:-1,"aria-hidden":!0,...o,onMouseDown:i=>{i.preventDefault(),e?.(i)},onClick:i=>{r(),n?.(i)}}));Y3.displayName="@mantine/core/ComboboxClearButton";const dC=Ue((t,e)=>{const{classNames:n,styles:r,className:o,style:a,hidden:i,...s}=De("ComboboxDropdown",null,t),u=Ta();return w.jsx(Go.Dropdown,{...s,ref:e,role:"presentation","data-hidden":i||void 0,...u.getStyles("dropdown",{className:o,style:a,classNames:n,styles:r})})});dC.classes=go;dC.displayName="@mantine/core/ComboboxDropdown";const wq={refProp:"ref"},Q3=Ue((t,e)=>{const{children:n,refProp:r}=De("ComboboxDropdownTarget",wq,t);if(Ta(),!Bu(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return w.jsx(Go.Target,{ref:e,refProp:r,children:n})});Q3.displayName="@mantine/core/ComboboxDropdownTarget";const fC=Ue((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,...s}=De("ComboboxEmpty",null,t),u=Ta();return w.jsx(le,{ref:e,...u.getStyles("empty",{className:r,classNames:n,styles:a,style:o}),...s})});fC.classes=go;fC.displayName="@mantine/core/ComboboxEmpty";function hC({onKeyDown:t,withKeyboardNavigation:e,withAriaAttributes:n,withExpandedAttribute:r,targetType:o,autoComplete:a}){const i=Ta(),[s,u]=A.useState(null),l=f=>{if(t?.(f),!i.readOnly&&e){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),i.store.dropdownOpened?u(i.store.selectNextOption()):(i.store.openDropdown("keyboard"),u(i.store.selectActiveOption()),i.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),i.store.dropdownOpened?u(i.store.selectPreviousOption()):(i.store.openDropdown("keyboard"),u(i.store.selectActiveOption()),i.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const p=i.store.getSelectedOptionIndex();i.store.dropdownOpened&&p!==-1?(f.preventDefault(),i.store.clickSelectedOption()):o==="button"&&(f.preventDefault(),i.store.openDropdown("keyboard"))}f.key==="Escape"&&i.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&o==="button"&&(f.preventDefault(),i.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r?!!(i.store.listId&&i.store.dropdownOpened):void 0,"aria-controls":i.store.dropdownOpened&&i.store.listId?i.store.listId:void 0,"aria-activedescendant":i.store.dropdownOpened&&s||void 0,autoComplete:a,"data-expanded":i.store.dropdownOpened||void 0,"data-mantine-stop-propagation":i.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Sq={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},J3=Ue((t,e)=>{const{children:n,refProp:r,withKeyboardNavigation:o,withAriaAttributes:a,withExpandedAttribute:i,targetType:s,autoComplete:u,...l}=De("ComboboxEventsTarget",Sq,t);if(!Bu(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=Ta(),f=hC({targetType:s,withAriaAttributes:a,withKeyboardNavigation:o,withExpandedAttribute:i,onKeyDown:n.props.onKeyDown,autoComplete:u});return A.cloneElement(n,{...f,...l,[r]:er(e,d.store.targetRef,Py(n))})});J3.displayName="@mantine/core/ComboboxEventsTarget";const pC=Ue((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,...s}=De("ComboboxFooter",null,t),u=Ta();return w.jsx(le,{ref:e,...u.getStyles("footer",{className:r,classNames:n,style:o,styles:a}),...s,onMouseDown:l=>{l.preventDefault()}})});pC.classes=go;pC.displayName="@mantine/core/ComboboxFooter";const mC=Ue((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,children:s,label:u,id:l,...d}=De("ComboboxGroup",null,t),f=Ta(),p=$a(l);return w.jsxs(le,{ref:e,role:"group","aria-labelledby":u?p:void 0,...f.getStyles("group",{className:r,classNames:n,style:o,styles:a}),...d,children:[u&&w.jsx("div",{id:p,...f.getStyles("groupLabel",{classNames:n,styles:a}),children:u}),s]})});mC.classes=go;mC.displayName="@mantine/core/ComboboxGroup";const vC=Ue((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,...s}=De("ComboboxHeader",null,t),u=Ta();return w.jsx(le,{ref:e,...u.getStyles("header",{className:r,classNames:n,style:o,styles:a}),...s,onMouseDown:l=>{l.preventDefault()}})});vC.classes=go;vC.displayName="@mantine/core/ComboboxHeader";function Z3({value:t,valuesDivider:e=",",...n}){return w.jsx("input",{type:"hidden",value:Array.isArray(t)?t.join(e):t||"",...n})}Z3.displayName="@mantine/core/ComboboxHiddenInput";const gC=Ue((t,e)=>{const n=De("ComboboxOption",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,onClick:u,id:l,active:d,onMouseDown:f,onMouseOver:p,disabled:m,selected:g,mod:y,...b}=n,S=Ta(),C=A.useId(),E=l||C;return w.jsx(le,{...S.getStyles("option",{className:o,classNames:r,styles:i,style:a}),...b,ref:e,id:E,mod:["combobox-option",{"combobox-active":d,"combobox-disabled":m,"combobox-selected":g},y],role:"option",onClick:_=>{m?_.preventDefault():(S.onOptionSubmit?.(n.value,n),u?.(_))},onMouseDown:_=>{_.preventDefault(),f?.(_)},onMouseOver:_=>{S.resetSelectionOnOptionHover&&S.store.resetSelectedOption(),p?.(_)}})});gC.classes=go;gC.displayName="@mantine/core/ComboboxOption";const yC=Ue((t,e)=>{const n=De("ComboboxOptions",null,t),{classNames:r,className:o,style:a,styles:i,id:s,onMouseDown:u,labelledBy:l,...d}=n,f=Ta(),p=$a(s);return A.useEffect(()=>{f.store.setListId(p)},[p]),w.jsx(le,{ref:e,...f.getStyles("options",{className:o,style:a,classNames:r,styles:i}),...d,id:p,role:"listbox","aria-labelledby":l,onMouseDown:m=>{m.preventDefault(),u?.(m)}})});yC.classes=go;yC.displayName="@mantine/core/ComboboxOptions";const Cq={withAriaAttributes:!0,withKeyboardNavigation:!0},bC=Ue((t,e)=>{const n=De("ComboboxSearch",Cq,t),{classNames:r,styles:o,unstyled:a,vars:i,withAriaAttributes:s,onKeyDown:u,withKeyboardNavigation:l,size:d,...f}=n,p=Ta(),m=p.getStyles("search"),g=hC({targetType:"input",withAriaAttributes:s,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return w.jsx(Zr,{ref:er(e,p.store.searchRef),classNames:[{input:m.className},r],styles:[{input:m.style},o],size:d||p.size,...g,...f,__staticSelector:"Combobox"})});bC.classes=go;bC.displayName="@mantine/core/ComboboxSearch";const Eq={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},e4=Ue((t,e)=>{const{children:n,refProp:r,withKeyboardNavigation:o,withAriaAttributes:a,withExpandedAttribute:i,targetType:s,autoComplete:u,...l}=De("ComboboxTarget",Eq,t);if(!Bu(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=Ta(),f=hC({targetType:s,withAriaAttributes:a,withKeyboardNavigation:o,withExpandedAttribute:i,onKeyDown:n.props.onKeyDown,autoComplete:u}),p=A.cloneElement(n,{...f,...l});return w.jsx(Go.Target,{ref:er(e,d.store.targetRef),children:p})});e4.displayName="@mantine/core/ComboboxTarget";function Rq(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r}return t}function _q(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].hasAttribute("data-combobox-disabled"))return r}return t}function Tq(t){for(let e=0;e<t.length;e+=1)if(!t[e].hasAttribute("data-combobox-disabled"))return e;return-1}function xC({defaultOpened:t,opened:e,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:o,loop:a=!0,scrollBehavior:i="instant"}={}){const[s,u]=gs({value:e,defaultValue:t,finalValue:!1,onChange:n}),l=A.useRef(null),d=A.useRef(-1),f=A.useRef(null),p=A.useRef(null),m=A.useRef(-1),g=A.useRef(-1),y=A.useRef(-1),b=A.useCallback((P="unknown")=>{s||(u(!0),o?.(P))},[u,o,s]),S=A.useCallback((P="unknown")=>{s&&(u(!1),r?.(P))},[u,r,s]),C=A.useCallback((P="unknown")=>{s?S(P):b(P)},[S,b,s]),E=A.useCallback(()=>{const P=document.querySelector(`#${l.current} [data-combobox-selected]`);P?.removeAttribute("data-combobox-selected"),P?.removeAttribute("aria-selected")},[]),_=A.useCallback(P=>{const U=document.getElementById(l.current)?.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=P>=U.length?0:P<0?U.length-1:P;return d.current=H,U?.[H]&&!U[H].hasAttribute("data-combobox-disabled")?(E(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:i}),U[H].id):null},[i,E]),T=A.useCallback(()=>{const P=document.querySelector(`#${l.current} [data-combobox-active]`);if(P){const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(z).findIndex(H=>H===P);return _(U)}return _(0)},[_]),D=A.useCallback(()=>_(_q(d.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),a)),[_,a]),k=A.useCallback(()=>_(Rq(d.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),a)),[_,a]),I=A.useCallback(()=>_(Tq(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[_]),M=A.useCallback((P="selected",z)=>{y.current=window.setTimeout(()=>{const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(L=>L.hasAttribute(`data-combobox-${P}`));d.current=H,z?.scrollIntoView&&U[H]?.scrollIntoView({block:"nearest",behavior:i})},0)},[]),O=A.useCallback(()=>{d.current=-1,E()},[E]),F=A.useCallback(()=>{document.querySelectorAll(`#${l.current} [data-combobox-option]`)?.[d.current]?.click()},[]),j=A.useCallback(P=>{l.current=P},[]),G=A.useCallback(()=>{m.current=window.setTimeout(()=>f.current.focus(),0)},[]),W=A.useCallback(()=>{g.current=window.setTimeout(()=>p.current.focus(),0)},[]),q=A.useCallback(()=>d.current,[]);return A.useEffect(()=>()=>{window.clearTimeout(m.current),window.clearTimeout(g.current),window.clearTimeout(y.current)},[]),{dropdownOpened:s,openDropdown:b,closeDropdown:S,toggleDropdown:C,selectedOptionIndex:d.current,getSelectedOptionIndex:q,selectOption:_,selectFirstOption:I,selectActiveOption:T,selectNextOption:D,selectPreviousOption:k,resetSelectedOption:O,updateSelectedOptionIndex:M,listId:l.current,setListId:j,clickSelectedOption:F,searchRef:f,focusSearchInput:G,targetRef:p,focusTarget:W}}const Aq={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0},size:"sm"},Nq=(t,{size:e,dropdownPadding:n})=>({options:{"--combobox-option-fz":Tr(e),"--combobox-option-padding":Ut(e,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":Tr(e),"--combobox-option-padding":Ut(e,"combobox-option-padding")}});function zt(t){const e=De("Combobox",Aq,t),{classNames:n,styles:r,unstyled:o,children:a,store:i,vars:s,onOptionSubmit:u,onClose:l,size:d,dropdownPadding:f,resetSelectionOnOptionHover:p,__staticSelector:m,readOnly:g,attributes:y,...b}=e,S=xC(),C=i||S,E=dt({name:m||"Combobox",classes:go,props:e,classNames:n,styles:r,unstyled:o,attributes:y,vars:s,varsResolver:Nq}),_=()=>{l?.(),C.closeDropdown()};return w.jsx(xq,{value:{getStyles:E,store:C,onOptionSubmit:u,size:d,resetSelectionOnOptionHover:p,readOnly:g},children:w.jsx(Go,{opened:C.dropdownOpened,preventPositionChangeWhenVisible:!0,...b,onChange:T=>!T&&_(),withRoles:!1,unstyled:o,children:a})})}const Dq=t=>t;zt.extend=Dq;zt.classes=go;zt.displayName="@mantine/core/Combobox";zt.Target=e4;zt.Dropdown=dC;zt.Options=yC;zt.Option=gC;zt.Search=bC;zt.Empty=fC;zt.Chevron=cC;zt.Footer=pC;zt.Header=vC;zt.EventsTarget=J3;zt.DropdownTarget=Q3;zt.Group=mC;zt.ClearButton=Y3;zt.HiddenInput=Z3;function kq({size:t,style:e,...n}){const r=t!==void 0?{width:Te(t),height:Te(t),...e}:e;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Md(t){return"group"in t}function t4({options:t,search:e,limit:n}){const r=e.trim().toLowerCase(),o=[];for(let a=0;a<t.length;a+=1){const i=t[a];if(o.length===n)return o;Md(i)&&o.push({group:i.group,items:t4({options:i.items,search:e,limit:n-o.length})}),Md(i)||i.label.toLowerCase().includes(r)&&o.push(i)}return o}function Iq(t){if(t.length===0)return!0;for(const e of t)if(!("group"in e)||e.items.length>0)return!1;return!0}function n4(t,e=new Set){if(Array.isArray(t))for(const n of t)if(Md(n))n4(n.items,e);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(e.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);e.add(n.value)}}function Mq(t,e){return Array.isArray(t)?t.includes(e):t===e}function r4({data:t,withCheckIcon:e,value:n,checkIconPosition:r,unstyled:o,renderOption:a}){if(!Md(t)){const s=Mq(n,t.value),u=e&&s&&w.jsx(kq,{className:go.optionsDropdownCheckIcon}),l=w.jsxs(w.Fragment,{children:[r==="left"&&u,w.jsx("span",{children:t.label}),r==="right"&&u]});return w.jsx(zt.Option,{value:t.value,disabled:t.disabled,className:vr({[go.optionsDropdownOption]:!o}),"data-reverse":r==="right"||void 0,"data-checked":s||void 0,"aria-selected":s,active:s,children:typeof a=="function"?a({option:t,checked:s}):l})}const i=t.items.map(s=>w.jsx(r4,{data:s,value:n,unstyled:o,withCheckIcon:e,checkIconPosition:r,renderOption:a},s.value));return w.jsx(zt.Group,{label:t.group,children:i})}function o4({data:t,hidden:e,hiddenWhenEmpty:n,filter:r,search:o,limit:a,maxDropdownHeight:i,withScrollArea:s=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:d,checkIconPosition:f,nothingFoundMessage:p,unstyled:m,labelId:g,renderOption:y,scrollAreaProps:b,"aria-label":S}){n4(t);const E=typeof o=="string"?(r||t4)({options:t,search:u?o:"",limit:a??1/0}):t,_=Iq(E),T=E.map(D=>w.jsx(r4,{data:D,withCheckIcon:l,value:d,checkIconPosition:f,unstyled:m,renderOption:y},Md(D)?D.group:D.value));return w.jsx(zt.Dropdown,{hidden:e||n&&_,"data-composed":!0,children:w.jsxs(zt.Options,{labelledBy:g,"aria-label":S,children:[s?w.jsx(Xo.Autosize,{mah:i??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...b,children:T}):T,_&&p&&w.jsx(zt.Empty,{children:p})]})})}var a4={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Oq=(t,{radius:e,color:n,gradient:r,variant:o,size:a,autoContrast:i})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{root:{"--badge-height":Ut(a,"badge-height"),"--badge-padding-x":Ut(a,"badge-padding-x"),"--badge-fz":Ut(a,"badge-fz"),"--badge-radius":e===void 0?void 0:Zn(e),"--badge-bg":n||o?s.background:void 0,"--badge-color":n||o?s.color:void 0,"--badge-bd":n||o?s.border:void 0,"--badge-dot-color":o==="dot"?Jr(n,t):void 0}}},ua=ro((t,e)=>{const n=De("Badge",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,radius:l,color:d,gradient:f,leftSection:p,rightSection:m,children:g,variant:y,fullWidth:b,autoContrast:S,circle:C,mod:E,attributes:_,...T}=n,D=dt({name:"Badge",props:n,classes:a4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:_,vars:u,varsResolver:Oq});return w.jsxs(le,{variant:y,mod:[{block:b,circle:C,"with-right-section":!!m,"with-left-section":!!p},E],...D("root",{variant:y}),ref:e,...T,children:[p&&w.jsx("span",{...D("section"),"data-position":"left",children:p}),w.jsx("span",{...D("label"),children:g}),m&&w.jsx("span",{...D("section"),"data-position":"right",children:m})]})});ua.classes=a4;ua.displayName="@mantine/core/Badge";var i4={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const Pq=(t,{color:e,size:n,lineSize:r,transitionDuration:o,transitionTimingFunction:a})=>({root:{"--burger-color":e?Jr(e,t):void 0,"--burger-size":Ut(n,"burger-size"),"--burger-line-size":r?Te(r):void 0,"--burger-transition-duration":o===void 0?void 0:`${o}ms`,"--burger-transition-timing-function":a}}),wC=Ue((t,e)=>{const n=De("Burger",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,opened:l,children:d,transitionDuration:f,transitionTimingFunction:p,lineSize:m,attributes:g,...y}=n,b=dt({name:"Burger",classes:i4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:u,varsResolver:Pq});return w.jsxs(Ci,{...b("root"),ref:e,...y,children:[w.jsx(le,{mod:["reduce-motion",{opened:l}],...b("burger")}),d]})});wC.classes=i4;wC.displayName="@mantine/core/Burger";var sf={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const ND={orientation:"horizontal"},Fq=(t,{borderWidth:e})=>({group:{"--button-border-width":Te(e)}}),SC=Ue((t,e)=>{const n=De("ButtonGroup",ND,t),{className:r,style:o,classNames:a,styles:i,unstyled:s,orientation:u,vars:l,borderWidth:d,variant:f,mod:p,attributes:m,...g}=De("ButtonGroup",ND,t),y=dt({name:"ButtonGroup",props:n,classes:sf,className:r,style:o,classNames:a,styles:i,unstyled:s,attributes:m,vars:l,varsResolver:Fq,rootSelector:"group"});return w.jsx(le,{...y("group"),ref:e,variant:f,mod:[{"data-orientation":u},p],role:"group",...g})});SC.classes=sf;SC.displayName="@mantine/core/ButtonGroup";const Bq=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:a,size:i})=>{const s=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{groupSection:{"--section-height":Ut(i,"section-height"),"--section-padding-x":Ut(i,"section-padding-x"),"--section-fz":i?.includes("compact")?Tr(i.replace("compact-","")):Tr(i),"--section-radius":e===void 0?void 0:Zn(e),"--section-bg":n||o?s.background:void 0,"--section-color":s.color,"--section-bd":n||o?s.border:void 0}}},CC=Ue((t,e)=>{const n=De("ButtonGroupSection",null,t),{className:r,style:o,classNames:a,styles:i,unstyled:s,vars:u,variant:l,gradient:d,radius:f,autoContrast:p,attributes:m,...g}=n,y=dt({name:"ButtonGroupSection",props:n,classes:sf,className:r,style:o,classNames:a,styles:i,unstyled:s,attributes:m,vars:u,varsResolver:Bq,rootSelector:"groupSection"});return w.jsx(le,{...y("groupSection"),ref:e,variant:l,...g})});CC.classes=sf;CC.displayName="@mantine/core/ButtonGroupSection";const Lq={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},jq=(t,{radius:e,color:n,gradient:r,variant:o,size:a,justify:i,autoContrast:s})=>{const u=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--button-justify":i,"--button-height":Ut(a,"button-height"),"--button-padding-x":Ut(a,"button-padding-x"),"--button-fz":a?.includes("compact")?Tr(a.replace("compact-","")):Tr(a),"--button-radius":e===void 0?void 0:Zn(e),"--button-bg":n||o?u.background:void 0,"--button-hover":n||o?u.hover:void 0,"--button-color":u.color,"--button-bd":n||o?u.border:void 0,"--button-hover-color":n||o?u.hoverColor:void 0}}},He=ro((t,e)=>{const n=De("Button",null,t),{style:r,vars:o,className:a,color:i,disabled:s,children:u,leftSection:l,rightSection:d,fullWidth:f,variant:p,radius:m,loading:g,loaderProps:y,gradient:b,classNames:S,styles:C,unstyled:E,"data-disabled":_,autoContrast:T,mod:D,attributes:k,...I}=n,M=dt({name:"Button",props:n,classes:sf,className:a,style:r,classNames:S,styles:C,unstyled:E,attributes:k,vars:o,varsResolver:jq}),O=!!l,F=!!d;return w.jsxs(Ci,{ref:e,...M("root",{active:!s&&!g&&!_}),unstyled:E,variant:p,disabled:s||g,mod:[{disabled:s||_,loading:g,block:f,"with-left-section":O,"with-right-section":F},D],...I,children:[typeof g=="boolean"&&w.jsx(bs,{mounted:g,transition:Lq,duration:150,children:j=>w.jsx(le,{component:"span",...M("loader",{style:j}),"aria-hidden":!0,children:w.jsx(Ko,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...y})})}),w.jsxs("span",{...M("inner"),children:[l&&w.jsx(le,{component:"span",...M("section"),mod:{position:"left"},children:l}),w.jsx(le,{component:"span",mod:{loading:g},...M("label"),children:u}),d&&w.jsx(le,{component:"span",...M("section"),mod:{position:"right"},children:d})]})]})});He.classes=sf;He.displayName="@mantine/core/Button";He.Group=SC;He.GroupSection=CC;const[zq,Uq]=Ca("Card component was not found in tree");var EC={root:"m_e615b15f",section:"m_599a2148"};const e0=ro((t,e)=>{const n=De("CardSection",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,withBorder:u,inheritPadding:l,mod:d,...f}=n,p=Uq();return w.jsx(le,{ref:e,mod:[{"with-border":u,"inherit-padding":l},d],...p.getStyles("section",{className:o,style:a,styles:i,classNames:r}),...f})});e0.classes=EC;e0.displayName="@mantine/core/CardSection";const Wq=(t,{padding:e})=>({root:{"--card-padding":Ur(e)}}),Yr=ro((t,e)=>{const n=De("Card",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,children:l,padding:d,attributes:f,...p}=n,m=dt({name:"Card",props:n,classes:EC,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u,varsResolver:Wq}),g=A.Children.toArray(l),y=g.map((b,S)=>typeof b=="object"&&b&&"type"in b&&b.type===e0?A.cloneElement(b,{"data-first-section":S===0||void 0,"data-last-section":S===g.length-1||void 0}):b);return w.jsx(zq,{value:{getStyles:m},children:w.jsx(Ra,{ref:e,unstyled:s,...m("root"),...p,children:y})})});Yr.classes=EC;Yr.displayName="@mantine/core/Card";Yr.Section=e0;var s4={root:"m_4451eb3a"};const No=ro((t,e)=>{const n=De("Center",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,inline:l,mod:d,attributes:f,...p}=n,m=dt({name:"Center",props:n,classes:s4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u});return w.jsx(le,{ref:e,mod:[{inline:l},d],...m("root"),...p})});No.classes=s4;No.displayName="@mantine/core/Center";var u4={root:"m_7485cace"};const Vq=(t,{size:e,fluid:n})=>({root:{"--container-size":n?void 0:Ut(e,"container-size")}}),cn=Ue((t,e)=>{const n=De("Container",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,fluid:l,mod:d,attributes:f,strategy:p,...m}=n,g=dt({name:"Container",classes:u4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u,varsResolver:Vq});return w.jsx(le,{ref:e,mod:[{fluid:l,strategy:p||"block"},d],...g("root"),...m})});cn.classes=u4;cn.displayName="@mantine/core/Container";var l4={root:"m_3eebeb36",label:"m_9e365f20"};const Hq={orientation:"horizontal"},Gq=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?Jr(e,t):void 0,"--divider-border-style":n,"--divider-size":Ut(r,"divider-size")}}),zo=Ue((t,e)=>{const n=De("Divider",Hq,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,color:l,orientation:d,label:f,labelPosition:p,mod:m,attributes:g,...y}=n,b=dt({name:"Divider",classes:l4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:u,varsResolver:Gq});return w.jsx(le,{ref:e,mod:[{orientation:d,"with-label":!!f},m],...b("root"),...y,role:"separator",children:f&&w.jsx(le,{component:"span",mod:{position:p},...b("label"),children:f})})});zo.classes=l4;zo.displayName="@mantine/core/Divider";const[$q,uf]=Ca("Drawer component was not found in tree");var Cs={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const t0=Ue((t,e)=>{const n=De("DrawerBody",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=uf();return w.jsx(eC,{ref:e,...l.getStyles("body",{classNames:r,style:a,styles:i,className:o}),...u})});t0.classes=Cs;t0.displayName="@mantine/core/DrawerBody";const n0=Ue((t,e)=>{const n=De("DrawerCloseButton",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=uf();return w.jsx(tC,{ref:e,...l.getStyles("close",{classNames:r,style:a,styles:i,className:o}),...u})});n0.classes=Cs;n0.displayName="@mantine/core/DrawerCloseButton";const r0=Ue((t,e)=>{const n=De("DrawerContent",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,children:u,radius:l,__hidden:d,...f}=n,p=uf(),m=p.scrollAreaComponent||W3;return w.jsx(nC,{...p.getStyles("content",{className:o,style:a,styles:i,classNames:r}),innerProps:p.getStyles("inner",{className:o,style:a,styles:i,classNames:r}),ref:e,...f,radius:l||p.radius||0,"data-hidden":d||void 0,children:w.jsx(m,{style:{height:"calc(100vh - var(--drawer-offset) * 2)"},children:u})})});r0.classes=Cs;r0.displayName="@mantine/core/DrawerContent";const o0=Ue((t,e)=>{const n=De("DrawerHeader",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=uf();return w.jsx(rC,{ref:e,...l.getStyles("header",{classNames:r,style:a,styles:i,className:o}),...u})});o0.classes=Cs;o0.displayName="@mantine/core/DrawerHeader";const a0=Ue((t,e)=>{const n=De("DrawerOverlay",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=uf();return w.jsx(oC,{ref:e,...l.getStyles("overlay",{classNames:r,style:a,styles:i,className:o}),...u})});a0.classes=Cs;a0.displayName="@mantine/core/DrawerOverlay";function qq(t){switch(t){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function Xq(t){if(t==="top"||t==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const Kq={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},Yq={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},Qq={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:no("modal"),position:"left"},Jq=(t,{position:e,size:n,offset:r})=>({root:{"--drawer-size":Ut(n,"drawer-size"),"--drawer-flex":Xq(e),"--drawer-height":e==="left"||e==="right"?void 0:"var(--drawer-size)","--drawer-align":qq(e),"--drawer-justify":e==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),i0=Ue((t,e)=>{const n=De("DrawerRoot",Qq,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,scrollAreaComponent:l,position:d,transitionProps:f,radius:p,attributes:m,...g}=n,{dir:y}=Np(),b=dt({name:"Drawer",classes:Cs,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:m,vars:u,varsResolver:Jq}),S=(y==="rtl"?Yq:Kq)[d];return w.jsx($q,{value:{scrollAreaComponent:l,getStyles:b,radius:p},children:w.jsx(ZS,{ref:e,...b("root"),transitionProps:{transition:S,...f},"data-offset-scrollbars":l===Xo.Autosize||void 0,unstyled:s,...g})})});i0.classes=Cs;i0.displayName="@mantine/core/DrawerRoot";const[Zq,e7]=tf();function c4({children:t}){const[e,n]=A.useState([]),[r,o]=A.useState(no("modal"));return w.jsx(Zq,{value:{stack:e,addModal:(a,i)=>{n(s=>[...new Set([...s,a])]),o(s=>typeof i=="number"&&typeof s=="number"?Math.max(s,i):s)},removeModal:a=>n(i=>i.filter(s=>s!==a)),getZIndex:a=>`calc(${r} + ${e.indexOf(a)} + 1)`,currentId:e[e.length-1],maxZIndex:r},children:t})}c4.displayName="@mantine/core/DrawerStack";const s0=Ue((t,e)=>{const n=De("DrawerTitle",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=uf();return w.jsx(aC,{ref:e,...l.getStyles("title",{classNames:r,style:a,styles:i,className:o}),...u})});s0.classes=Cs;s0.displayName="@mantine/core/DrawerTitle";const t7={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:no("modal"),withOverlay:!0,withCloseButton:!0},qa=Ue((t,e)=>{const{title:n,withOverlay:r,overlayProps:o,withCloseButton:a,closeButtonProps:i,children:s,opened:u,stackId:l,zIndex:d,...f}=De("Drawer",t7,t),p=e7(),m=!!n||a,g=p&&l?{closeOnEscape:p.currentId===l,trapFocus:p.currentId===l,zIndex:p.getZIndex(l)}:{},y=r===!1?!1:l&&p?p.currentId===l:u;return A.useEffect(()=>{p&&l&&(u?p.addModal(l,d||no("modal")):p.removeModal(l))},[u,l,d]),w.jsxs(i0,{ref:e,opened:u,zIndex:p&&l?p.getZIndex(l):d,...f,...g,children:[r&&w.jsx(a0,{visible:y,transitionProps:p&&l?{duration:0}:void 0,...o}),w.jsxs(r0,{__hidden:p&&l&&u?l!==p.currentId:!1,children:[m&&w.jsxs(o0,{children:[n&&w.jsx(s0,{children:n}),a&&w.jsx(n0,{...i})]}),w.jsx(t0,{children:s})]})]})});qa.classes=Cs;qa.displayName="@mantine/core/Drawer";qa.Root=i0;qa.Overlay=a0;qa.Content=r0;qa.Body=t0;qa.Header=o0;qa.Title=s0;qa.CloseButton=n0;qa.Stack=c4;const n7={multiple:!1},d4=A.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:a,name:i,form:s,resetRef:u,disabled:l,capture:d,inputProps:f,...p}=De("FileButton",n7,t),m=A.useRef(null),g=()=>{!l&&m.current?.click()},y=S=>{if(S.currentTarget.files===null)return n(o?[]:null);n(o?Array.from(S.currentTarget.files):S.currentTarget.files[0]||null)};return Qh(u,()=>{m.current&&(m.current.value="")}),w.jsxs(w.Fragment,{children:[w.jsx("input",{style:{display:"none"},type:"file",accept:a,multiple:o,onChange:y,ref:er(e,m),name:i,form:s,capture:d,...f}),r({onClick:g,...p})]})});d4.displayName="@mantine/core/FileButton";const r7=({value:t})=>w.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t?.name}),o7={valueComponent:r7},RC=Ue((t,e)=>{const n=De("FileInput",o7,t),{unstyled:r,vars:o,onChange:a,value:i,defaultValue:s,multiple:u,accept:l,name:d,form:f,valueComponent:p,clearable:m,clearButtonProps:g,readOnly:y,capture:b,fileInputProps:S,rightSection:C,size:E,placeholder:_,component:T,resetRef:D,classNames:k,styles:I,attributes:M,...O}=n,F=A.useRef(null),{resolvedClassNames:j,resolvedStyles:G}=Hl({classNames:k,styles:I,props:n}),[W,q]=gs({value:i,defaultValue:s,onChange:a,finalValue:u?[]:null}),P=Array.isArray(W)?W.length!==0:W!==null,z=C||(m&&P&&!y?w.jsx(ju,{...g,variant:"subtle",onClick:()=>q(u?[]:null),size:E,unstyled:r}):null);return A.useEffect(()=>{(Array.isArray(W)&&W.length===0||W===null)&&F.current?.()},[W]),w.jsx(d4,{onChange:q,multiple:u,accept:l,name:d,form:f,resetRef:er(F,D),disabled:y,capture:b,inputProps:S,children:U=>w.jsx(bo,{component:T||"button",ref:e,rightSection:z,...U,...O,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:E,classNames:k,styles:I,attributes:M,children:P?w.jsx(p,{value:W}):w.jsx(Zr.Placeholder,{__staticSelector:"FileInput",classNames:j,styles:G,attributes:M,children:_})})})});RC.classes=bo.classes;RC.displayName="@mantine/core/FileInput";const Pg=RC,[a7,f4]=Ca("HoverCard component was not found in the tree"),h4=A.createContext(!1),i7=h4.Provider,_C=()=>A.useContext(h4);function p4(t){const{children:e,onMouseEnter:n,onMouseLeave:r,...o}=De("HoverCardDropdown",null,t),a=f4();if(_C()&&a.getFloatingProps&&a.floating){const l=a.getFloatingProps();return w.jsx(Go.Dropdown,{ref:a.floating,...l,onMouseEnter:cd(n,l.onMouseEnter),onMouseLeave:cd(r,l.onMouseLeave),...o,children:e})}const s=cd(n,a.openDropdown),u=cd(r,a.closeDropdown);return w.jsx(Go.Dropdown,{onMouseEnter:s,onMouseLeave:u,...o,children:e})}p4.displayName="@mantine/core/HoverCardDropdown";const s7={openDelay:0,closeDelay:0};function TC(t){const{openDelay:e,closeDelay:n,children:r}=De("HoverCardGroup",s7,t);return w.jsx(i7,{value:!0,children:w.jsx(u3,{delay:{open:e,close:n},children:r})})}TC.displayName="@mantine/core/HoverCardGroup";TC.extend=t=>t;const u7={refProp:"ref"},m4=A.forwardRef((t,e)=>{const{children:n,refProp:r,eventPropsWrapperName:o,...a}=De("HoverCardTarget",u7,t);if(!Bu(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=f4();if(_C()&&i.getReferenceProps&&i.reference){const f=i.getReferenceProps();return w.jsx(Go.Target,{refProp:r,ref:e,...a,children:A.cloneElement(n,o?{[o]:{...f,ref:i.reference}}:{...f,ref:i.reference})})}const u=cd(n.props.onMouseEnter,i.openDropdown),l=cd(n.props.onMouseLeave,i.closeDropdown),d={onMouseEnter:u,onMouseLeave:l};return w.jsx(Go.Target,{refProp:r,ref:e,...a,children:A.cloneElement(n,o?{[o]:d}:d)})});m4.displayName="@mantine/core/HoverCardTarget";function l7(t){const[e,n]=A.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,a=_C(),i=$a(),s=A.useRef(-1),u=A.useRef(-1),l=A.useCallback(()=>{window.clearTimeout(s.current),window.clearTimeout(u.current)},[]),d=A.useCallback(E=>{n(E),E?(g(i),t.onOpen?.()):t.onClose?.()},[i,t.onOpen,t.onClose]),{context:f,refs:p}=Gy({open:o,onOpenChange:d}),{delay:m,setCurrentId:g}=l3(f,{id:i}),{getReferenceProps:y,getFloatingProps:b}=d3([i3(f,{enabled:!0,delay:a?m:{open:t.openDelay,close:t.closeDelay}}),f3(f,{role:"dialog"}),c3(f,{enabled:a})]),S=A.useCallback(()=>{a||(l(),t.openDelay===0||t.openDelay===void 0?d(!0):s.current=window.setTimeout(()=>d(!0),t.openDelay))},[a,l,t.openDelay,d]),C=A.useCallback(()=>{a||(l(),t.closeDelay===0||t.closeDelay===void 0?d(!1):u.current=window.setTimeout(()=>d(!1),t.closeDelay))},[a,l,t.closeDelay,d]);return A.useEffect(()=>()=>l(),[l]),{opened:o,reference:p.setReference,floating:p.setFloating,getReferenceProps:y,getFloatingProps:b,openDropdown:S,closeDropdown:C}}const c7={openDelay:0,closeDelay:150,initiallyOpened:!1};function Cu(t){const{children:e,onOpen:n,onClose:r,openDelay:o,closeDelay:a,initiallyOpened:i,...s}=De("HoverCard",c7,t),u=l7({openDelay:o,closeDelay:a,defaultOpened:i,onOpen:n,onClose:r});return w.jsx(a7,{value:{openDropdown:u.openDropdown,closeDropdown:u.closeDropdown,getReferenceProps:u.getReferenceProps,getFloatingProps:u.getFloatingProps,reference:u.reference,floating:u.floating},children:w.jsx(Go,{...s,opened:u.opened,__staticSelector:"HoverCard",children:e})})}Cu.displayName="@mantine/core/HoverCard";Cu.Target=m4;Cu.Dropdown=p4;Cu.Group=TC;Cu.extend=t=>t;var v4={root:"m_9e117634"};const d7=(t,{radius:e,fit:n})=>({root:{"--image-radius":e===void 0?void 0:Zn(e),"--image-object-fit":n}}),tp=ro((t,e)=>{const n=De("Image",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,onError:l,src:d,radius:f,fit:p,fallbackSrc:m,mod:g,attributes:y,...b}=n,[S,C]=A.useState(!d);A.useEffect(()=>C(!d),[d]);const E=dt({name:"Image",classes:v4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:y,vars:u,varsResolver:d7});return S&&m?w.jsx(le,{component:"img",ref:e,src:m,...E("root"),onError:l,mod:["fallback",g],...b}):w.jsx(le,{component:"img",ref:e,...E("root"),src:d,onError:_=>{l?.(_),C(!0)},mod:g,...b})});tp.classes=v4;tp.displayName="@mantine/core/Image";function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(null,arguments)}function AC(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var f7=A.useLayoutEffect,h7=function(e){var n=bt.useRef(e);return f7(function(){n.current=e}),n},DD=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},p7=function(e,n){var r=bt.useRef();return bt.useCallback(function(o){e.current=o,r.current&&DD(r.current,null),r.current=n,n&&DD(n,o)},[n])},kD={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},m7=function(e){Object.keys(kD).forEach(function(n){e.style.setProperty(n,kD[n],"important")})},ID=m7,$r=null,MD=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function v7(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),$r||($r=document.createElement("textarea"),$r.setAttribute("tabindex","-1"),$r.setAttribute("aria-hidden","true"),ID($r)),$r.parentNode===null&&document.body.appendChild($r);var o=t.paddingSize,a=t.borderSize,i=t.sizingStyle,s=i.boxSizing;Object.keys(i).forEach(function(p){var m=p;$r.style[m]=i[m]}),ID($r),$r.value=e;var u=MD($r,t);$r.value=e,u=MD($r,t),$r.value="x";var l=$r.scrollHeight-o,d=l*n;s==="border-box"&&(d=d+o+a),u=Math.max(d,u);var f=l*r;return s==="border-box"&&(f=f+o+a),u=Math.min(f,u),[u,l]}var OD=function(){},g7=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},y7=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],b7=!!document.documentElement.currentStyle,x7=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=g7(y7,n),o=r.boxSizing;if(o==="")return null;b7&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:i}},w7=x7;function NC(t,e,n){var r=h7(n);A.useLayoutEffect(function(){var o=function(i){return r.current(i)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var S7=function(e,n){NC(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},C7=function(e){NC(window,"resize",e)},E7=function(e){NC(document.fonts,"loadingdone",e)},R7=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],_7=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,a=e.minRows,i=e.onChange,s=i===void 0?OD:i,u=e.onHeightChange,l=u===void 0?OD:u,d=AC(e,R7),f=d.value!==void 0,p=A.useRef(null),m=p7(p,n),g=A.useRef(0),y=A.useRef(),b=function(){var E=p.current,_=r&&y.current?y.current:w7(E);if(_){y.current=_;var T=v7(_,E.value||E.placeholder||"x",a,o),D=T[0],k=T[1];g.current!==D&&(g.current=D,E.style.setProperty("height",D+"px","important"),l(D,{rowHeight:k}))}},S=function(E){f||b(),s(E)};return A.useLayoutEffect(b),S7(p,function(){if(!f){var C=p.current.value;requestAnimationFrame(function(){var E=p.current;E&&C!==E.value&&b()})}}),C7(b),E7(b),A.createElement("textarea",Od({},d,{onChange:S,ref:m}))},T7=A.forwardRef(_7);const A7={size:"sm"},np=Ue((t,e)=>{const{autosize:n,maxRows:r,minRows:o,__staticSelector:a,resize:i,...s}=De("Textarea",A7,t),u=n&&AO()!=="test",l=u?{maxRows:r,minRows:o}:{};return w.jsx(bo,{component:u?T7:"textarea",ref:e,...s,__staticSelector:a||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":i},...l})});np.classes=bo.classes;np.displayName="@mantine/core/Textarea";const[N7,D7]=Ca("List component was not found in tree");var DC={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const kC=Ue((t,e)=>{const n=De("ListItem",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,icon:u,children:l,mod:d,...f}=n,p=D7(),m=u||p.icon,g={classNames:r,styles:i};return w.jsx(le,{...p.getStyles("item",{...g,className:o,style:a}),component:"li",mod:[{"with-icon":!!m,centered:p.center},d],ref:e,...f,children:w.jsxs("div",{...p.getStyles("itemWrapper",g),children:[m&&w.jsx("span",{...p.getStyles("itemIcon",g),children:m}),w.jsx("span",{...p.getStyles("itemLabel",g),children:l})]})})});kC.classes=DC;kC.displayName="@mantine/core/ListItem";const k7={type:"unordered"},I7=(t,{size:e,spacing:n})=>({root:{"--list-fz":Tr(e),"--list-lh":wO(e),"--list-spacing":Ur(n)}}),zn=Ue((t,e)=>{const n=De("List",k7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,children:l,type:d,withPadding:f,icon:p,spacing:m,center:g,listStyleType:y,mod:b,attributes:S,...C}=n,E=dt({name:"List",classes:DC,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:S,vars:u,varsResolver:I7});return w.jsx(N7,{value:{center:g,icon:p,getStyles:E},children:w.jsx(le,{...E("root",{style:{listStyleType:y}}),component:d==="unordered"?"ul":"ol",mod:[{"with-padding":f},b],ref:e,...C,children:l})})});zn.classes=DC;zn.displayName="@mantine/core/List";zn.Item=kC;const[M7,lf]=Ca("Modal component was not found in tree");var Es={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const u0=Ue((t,e)=>{const n=De("ModalBody",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=lf();return w.jsx(eC,{ref:e,...l.getStyles("body",{classNames:r,style:a,styles:i,className:o}),...u})});u0.classes=Es;u0.displayName="@mantine/core/ModalBody";const l0=Ue((t,e)=>{const n=De("ModalCloseButton",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=lf();return w.jsx(tC,{ref:e,...l.getStyles("close",{classNames:r,style:a,styles:i,className:o}),...u})});l0.classes=Es;l0.displayName="@mantine/core/ModalCloseButton";const c0=Ue((t,e)=>{const n=De("ModalContent",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,children:u,__hidden:l,...d}=n,f=lf(),p=f.scrollAreaComponent||W3;return w.jsx(nC,{...f.getStyles("content",{className:o,style:a,styles:i,classNames:r}),innerProps:f.getStyles("inner",{className:o,style:a,styles:i,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:e,...d,children:w.jsx(p,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${Te(f.yOffset)} * 2))`},children:u})})});c0.classes=Es;c0.displayName="@mantine/core/ModalContent";const d0=Ue((t,e)=>{const n=De("ModalHeader",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=lf();return w.jsx(rC,{ref:e,...l.getStyles("header",{classNames:r,style:a,styles:i,className:o}),...u})});d0.classes=Es;d0.displayName="@mantine/core/ModalHeader";const f0=Ue((t,e)=>{const n=De("ModalOverlay",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=lf();return w.jsx(oC,{ref:e,...l.getStyles("overlay",{classNames:r,style:a,styles:i,className:o}),...u})});f0.classes=Es;f0.displayName="@mantine/core/ModalOverlay";const O7={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:no("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},P7=(t,{radius:e,size:n,yOffset:r,xOffset:o})=>({root:{"--modal-radius":e===void 0?void 0:Zn(e),"--modal-size":Ut(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(o)}}),h0=Ue((t,e)=>{const n=De("ModalRoot",O7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,yOffset:l,scrollAreaComponent:d,radius:f,fullScreen:p,centered:m,xOffset:g,__staticSelector:y,attributes:b,...S}=n,C=dt({name:y,classes:Es,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:b,vars:u,varsResolver:P7});return w.jsx(M7,{value:{yOffset:l,scrollAreaComponent:d,getStyles:C,fullScreen:p},children:w.jsx(ZS,{ref:e,...C("root"),"data-full-screen":p||void 0,"data-centered":m||void 0,"data-offset-scrollbars":d===Xo.Autosize||void 0,unstyled:s,...S})})});h0.classes=Es;h0.displayName="@mantine/core/ModalRoot";const[F7,B7]=tf();function g4({children:t}){const[e,n]=A.useState([]),[r,o]=A.useState(no("modal"));return w.jsx(F7,{value:{stack:e,addModal:(a,i)=>{n(s=>[...new Set([...s,a])]),o(s=>typeof i=="number"&&typeof s=="number"?Math.max(s,i):s)},removeModal:a=>n(i=>i.filter(s=>s!==a)),getZIndex:a=>`calc(${r} + ${e.indexOf(a)} + 1)`,currentId:e[e.length-1],maxZIndex:r},children:t})}g4.displayName="@mantine/core/ModalStack";const p0=Ue((t,e)=>{const n=De("ModalTitle",null,t),{classNames:r,className:o,style:a,styles:i,vars:s,...u}=n,l=lf();return w.jsx(aC,{ref:e,...l.getStyles("title",{classNames:r,style:a,styles:i,className:o}),...u})});p0.classes=Es;p0.displayName="@mantine/core/ModalTitle";const L7={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:no("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Nr=Ue((t,e)=>{const{title:n,withOverlay:r,overlayProps:o,withCloseButton:a,closeButtonProps:i,children:s,radius:u,opened:l,stackId:d,zIndex:f,...p}=De("Modal",L7,t),m=B7(),g=!!n||a,y=m&&d?{closeOnEscape:m.currentId===d,trapFocus:m.currentId===d,zIndex:m.getZIndex(d)}:{},b=r===!1?!1:d&&m?m.currentId===d:l;return A.useEffect(()=>{m&&d&&(l?m.addModal(d,f||no("modal")):m.removeModal(d))},[l,d,f]),w.jsxs(h0,{ref:e,radius:u,opened:l,zIndex:m&&d?m.getZIndex(d):f,...p,...y,children:[r&&w.jsx(f0,{visible:b,transitionProps:m&&d?{duration:0}:void 0,...o}),w.jsxs(c0,{radius:u,__hidden:m&&d&&l?d!==m.currentId:!1,children:[g&&w.jsxs(d0,{children:[n&&w.jsx(p0,{children:n}),a&&w.jsx(l0,{...i})]}),w.jsx(u0,{children:s})]})]})});Nr.classes=Es;Nr.displayName="@mantine/core/Modal";Nr.Root=h0;Nr.Overlay=f0;Nr.Content=c0;Nr.Body=u0;Nr.Header=d0;Nr.Title=p0;Nr.CloseButton=l0;Nr.Stack=g4;const[j7,IC]=tf(),[z7,U7]=tf();var m0={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const W7=(t,{gap:e},{size:n})=>({group:{"--pg-gap":e!==void 0?Ut(e):Ut(n,"pg-gap")}}),MC=Ue((t,e)=>{const n=De("PillGroup",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,disabled:d,attributes:f,...p}=n,g=IC()?.size||l||void 0,y=dt({name:"PillGroup",classes:m0,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u,varsResolver:W7,stylesCtx:{size:g},rootSelector:"group"});return w.jsx(z7,{value:{size:g,disabled:d},children:w.jsx(le,{ref:e,size:g,...y("group"),...p})})});MC.classes=m0;MC.displayName="@mantine/core/PillGroup";const V7={variant:"default"},H7=(t,{radius:e},{size:n})=>({root:{"--pill-fz":Ut(n,"pill-fz"),"--pill-height":Ut(n,"pill-height"),"--pill-radius":e===void 0?void 0:Zn(e)}}),rp=Ue((t,e)=>{const n=De("Pill",V7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,variant:l,children:d,withRemoveButton:f,onRemove:p,removeButtonProps:m,radius:g,size:y,disabled:b,mod:S,attributes:C,...E}=n,_=U7(),T=IC(),D=y||_?.size||void 0,k=T?.variant==="filled"?"contrast":l||"default",I=dt({name:"Pill",classes:m0,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:C,vars:u,varsResolver:H7,stylesCtx:{size:D}});return w.jsxs(le,{component:"span",ref:e,variant:k,size:D,...I("root",{variant:k}),mod:[{"with-remove":f&&!b,disabled:b||_?.disabled},S],...E,children:[w.jsx("span",{...I("label"),children:d}),f&&w.jsx(ju,{variant:"transparent",radius:g,tabIndex:-1,"aria-hidden":!0,unstyled:s,...m,...I("remove",{className:m?.className,style:m?.style}),onMouseDown:M=>{M.preventDefault(),M.stopPropagation(),m?.onMouseDown?.(M)},onClick:M=>{M.stopPropagation(),p?.(),m?.onClick?.(M)}})]})});rp.classes=m0;rp.displayName="@mantine/core/Pill";rp.Group=MC;var y4={field:"m_45c4369d"};const G7={type:"visible"},OC=Ue((t,e)=>{const n=De("PillsInputField",G7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,type:l,disabled:d,id:f,pointer:p,mod:m,attributes:g,...y}=n,b=IC(),S=kp(),C=dt({name:"PillsInputField",classes:y4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,rootSelector:"field"}),E=d||b?.disabled;return w.jsx(le,{component:"input",ref:er(e,b?.fieldRef),"data-type":l,disabled:E,mod:[{disabled:E,pointer:p},m],...C("field"),...y,id:S?.inputId||f,"aria-invalid":b?.hasError,"aria-describedby":S?.describedBy,type:"text",onMouseDown:_=>!p&&_.stopPropagation()})});OC.classes=y4;OC.displayName="@mantine/core/PillsInputField";const $7={size:"sm"},Fg=Ue((t,e)=>{const n=De("PillsInput",$7,t),{children:r,onMouseDown:o,onClick:a,size:i,disabled:s,__staticSelector:u,error:l,variant:d,...f}=n,p=A.useRef(null);return w.jsx(j7,{value:{fieldRef:p,size:i,disabled:s,hasError:!!l,variant:d},children:w.jsx(bo,{size:i,error:l,variant:d,component:"div",ref:e,"data-no-overflow":!0,onMouseDown:m=>{m.preventDefault(),o?.(m),p.current?.focus()},onClick:m=>{m.preventDefault(),m.currentTarget.closest("fieldset")?.disabled||(p.current?.focus(),a?.(m))},...f,multiline:!0,disabled:s,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});Fg.displayName="@mantine/core/PillsInput";Fg.Field=OC;function q7({data:t,value:e}){const n=e.map(o=>o.trim().toLowerCase());return t.reduce((o,a)=>(Md(a)?o.push({group:a.group,items:a.items.filter(i=>n.indexOf(i.value.toLowerCase().trim())===-1)}):n.indexOf(a.value.toLowerCase().trim())===-1&&o.push(a),o),[])}const X7={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:",",clearSearchOnChange:!0,size:"sm"},PC=Ue((t,e)=>{const n=De("MultiSelect",X7,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,size:l,value:d,defaultValue:f,onChange:p,onKeyDown:m,variant:g,data:y,dropdownOpened:b,defaultDropdownOpened:S,onDropdownOpen:C,onDropdownClose:E,selectFirstOptionOnChange:_,onOptionSubmit:T,comboboxProps:D,filter:k,limit:I,withScrollArea:M,maxDropdownHeight:O,searchValue:F,defaultSearchValue:j,onSearchChange:G,readOnly:W,disabled:q,onFocus:P,onBlur:z,radius:U,rightSection:H,rightSectionWidth:L,rightSectionPointerEvents:$,rightSectionProps:J,leftSection:ne,leftSectionWidth:ce,leftSectionPointerEvents:be,leftSectionProps:se,inputContainer:ie,inputWrapperOrder:fe,withAsterisk:ge,labelProps:Oe,descriptionProps:je,errorProps:Le,wrapperProps:ke,description:qe,label:nt,error:it,maxValues:Ie,searchable:Me,nothingFoundMessage:Be,withCheckIcon:Je,checkIconPosition:ct,hidePickedOptions:st,withErrorStyles:$e,name:Wt,form:Fe,id:Ve,clearable:rt,clearButtonProps:Lt,hiddenInputProps:Ot,placeholder:Vn,hiddenInputValuesDivider:Qt,required:gn,mod:kr,renderOption:Hr,onRemove:tr,onClear:Aa,scrollAreaProps:_n,chevronColor:Qa,attributes:mt,clearSearchOnChange:Pt,...Dt}=n,Ft=$a(Ve),an=K3(y),sn=lC(an),Jt=xC({opened:b,defaultOpened:S,onDropdownOpen:C,onDropdownClose:()=>{E?.(),Jt.resetSelectedOption()}}),{styleProps:Li,rest:{type:sc,autoComplete:Ja,...Rf}}=jy(Dt),[Tn,On]=gs({value:d,defaultValue:f,finalValue:[],onChange:p}),[nr,Bs]=gs({value:F,defaultValue:j,finalValue:"",onChange:G}),Ls=Xt=>{Bs(Xt),Jt.resetSelectedOption()},_f=dt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:i,unstyled:s,attributes:mt}),{resolvedClassNames:fm,resolvedStyles:Tf}=Hl({props:n,styles:i,classNames:r}),qu=Xt=>{m?.(Xt),Xt.key===" "&&!Me&&(Xt.preventDefault(),Jt.toggleDropdown()),Xt.key==="Backspace"&&nr.length===0&&Tn.length>0&&(tr?.(Tn[Tn.length-1]),On(Tn.slice(0,Tn.length-1)))},Af=Tn.map((Xt,Pn)=>w.jsx(rp,{withRemoveButton:!W&&!sn[Xt]?.disabled,onRemove:()=>{On(Tn.filter(hm=>Xt!==hm)),tr?.(Xt)},unstyled:s,disabled:q,..._f("pill"),children:sn[Xt]?.label||Xt},`${Xt}-${Pn}`));A.useEffect(()=>{_&&Jt.selectFirstOption()},[_,nr]);const ji=w.jsx(zt.ClearButton,{...Lt,onClear:()=>{Aa?.(),On([]),Ls("")}}),js=q7({data:an,value:Tn}),zs=rt&&Tn.length>0&&!q&&!W;return w.jsxs(w.Fragment,{children:[w.jsxs(zt,{store:Jt,classNames:fm,styles:Tf,unstyled:s,size:l,readOnly:W,__staticSelector:"MultiSelect",attributes:mt,onOptionSubmit:Xt=>{T?.(Xt),Pt&&Ls(""),Jt.updateSelectedOptionIndex("selected"),Tn.includes(sn[Xt].value)?(On(Tn.filter(Pn=>Pn!==sn[Xt].value)),tr?.(sn[Xt].value)):Tn.length<Ie&&On([...Tn,sn[Xt].value])},...D,children:[w.jsx(zt.DropdownTarget,{children:w.jsx(Fg,{...Li,__staticSelector:"MultiSelect",classNames:fm,styles:Tf,unstyled:s,size:l,className:o,style:a,variant:g,disabled:q,radius:U,__defaultRightSection:w.jsx(zt.Chevron,{size:l,error:it,unstyled:s,color:Qa}),__clearSection:ji,__clearable:zs,rightSection:H,rightSectionPointerEvents:$||(ji?"all":"none"),rightSectionWidth:L,rightSectionProps:J,leftSection:ne,leftSectionWidth:ce,leftSectionPointerEvents:be,leftSectionProps:se,inputContainer:ie,inputWrapperOrder:fe,withAsterisk:ge,labelProps:Oe,descriptionProps:je,errorProps:Le,wrapperProps:ke,description:qe,label:nt,error:it,withErrorStyles:$e,__stylesApiProps:{...n,rightSectionPointerEvents:$||(zs?"all":"none"),multiline:!0},pointer:!Me,onClick:()=>Me?Jt.openDropdown():Jt.toggleDropdown(),"data-expanded":Jt.dropdownOpened||void 0,id:Ft,required:gn,mod:kr,attributes:mt,children:w.jsxs(rp.Group,{attributes:mt,disabled:q,unstyled:s,..._f("pillsList"),children:[Af,w.jsx(zt.EventsTarget,{autoComplete:Ja,children:w.jsx(Fg.Field,{...Rf,ref:e,id:Ft,placeholder:Vn,type:!Me&&!Vn?"hidden":"visible",..._f("inputField"),unstyled:s,onFocus:Xt=>{P?.(Xt),Me&&Jt.openDropdown()},onBlur:Xt=>{z?.(Xt),Jt.closeDropdown(),Ls("")},onKeyDown:qu,value:nr,onChange:Xt=>{Ls(Xt.currentTarget.value),Me&&Jt.openDropdown(),_&&Jt.selectFirstOption()},disabled:q,readOnly:W||!Me,pointer:!Me})})]})})}),w.jsx(o4,{data:st?js:an,hidden:W||q,filter:k,search:nr,limit:I,hiddenWhenEmpty:!Be,withScrollArea:M,maxDropdownHeight:O,filterOptions:Me,value:Tn,checkIconPosition:ct,withCheckIcon:Je,nothingFoundMessage:Be,unstyled:s,labelId:nt?`${Ft}-label`:void 0,"aria-label":nt?void 0:Dt["aria-label"],renderOption:Hr,scrollAreaProps:_n})]}),w.jsx(zt.HiddenInput,{name:Wt,valuesDivider:Qt,value:Tn,form:Fe,disabled:q,...Ot})]})});PC.classes={...bo.classes,...zt.classes};PC.displayName="@mantine/core/MultiSelect";var b4={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const K7={withCloseButton:!0},Y7=(t,{radius:e,color:n})=>({root:{"--notification-radius":e===void 0?void 0:Zn(e),"--notification-color":n?Jr(n,t):void 0}}),FC=Ue((t,e)=>{const n=De("Notification",K7,t),{className:r,color:o,radius:a,loading:i,withCloseButton:s,withBorder:u,title:l,icon:d,children:f,onClose:p,closeButtonProps:m,classNames:g,style:y,styles:b,unstyled:S,variant:C,vars:E,mod:_,loaderProps:T,role:D,attributes:k,...I}=n,M=dt({name:"Notification",classes:b4,props:n,className:r,style:y,classNames:g,styles:b,unstyled:S,attributes:k,vars:E,varsResolver:Y7});return w.jsxs(le,{...M("root"),mod:[{"data-with-icon":!!d||i,"data-with-border":u},_],ref:e,variant:C,role:D||"alert",...I,children:[d&&!i&&w.jsx("div",{...M("icon"),children:d}),i&&w.jsx(Ko,{size:28,color:o,...T,...M("loader")}),w.jsxs("div",{...M("body"),children:[l&&w.jsx("div",{...M("title"),children:l}),w.jsx(le,{...M("description"),mod:{"data-with-title":!!l},children:f})]}),s&&w.jsx(ju,{iconSize:16,color:"gray",...m,unstyled:S,onClick:p,...M("closeButton")})]})});FC.classes=b4;FC.displayName="@mantine/core/Notification";function x4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}var op;(function(t){t.event="event",t.props="prop"})(op||(op={}));function vu(){}function Q7(t){var e,n=void 0;return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return e&&r.length===e.length&&r.every(function(a,i){return a===e[i]})||(e=r,n=t.apply(void 0,r)),n}}function ap(t){return!!(t||"").match(/\d/)}function yd(t){return t==null}function J7(t){return typeof t=="number"&&isNaN(t)}function w4(t){return yd(t)||J7(t)||typeof t=="number"&&!isFinite(t)}function S4(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Z7(t){switch(t){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function e9(t,e,n){var r=Z7(n),o=t.search(/[1-9]/);return o=o===-1?t.length:o,t.substring(0,o)+t.substring(o,t.length).replace(r,"$1"+e)}function t9(t){var e=A.useRef(t);e.current=t;var n=A.useRef(function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return e.current.apply(e,r)});return n.current}function BC(t,e){e===void 0&&(e=!0);var n=t[0]==="-",r=n&&e;t=t.replace("-","");var o=t.split("."),a=o[0],i=o[1]||"";return{beforeDecimal:a,afterDecimal:i,hasNegation:n,addNegation:r}}function n9(t){if(!t)return t;var e=t[0]==="-";e&&(t=t.substring(1,t.length));var n=t.split("."),r=n[0].replace(/^0+/,"")||"0",o=n[1]||"";return(e?"-":"")+r+(o?"."+o:"")}function C4(t,e,n){for(var r="",o=n?"0":"",a=0;a<=e-1;a++)r+=t[a]||o;return r}function PD(t,e){return Array(e+1).join(t)}function E4(t){var e=t+"",n=e[0]==="-"?"-":"";n&&(e=e.substring(1));var r=e.split(/[eE]/g),o=r[0],a=r[1];if(a=Number(a),!a)return n+o;o=o.replace(".","");var i=1+a,s=o.length;return i<0?o="0."+PD("0",Math.abs(i))+o:i>=s?o=o+PD("0",i-s):o=(o.substring(0,i)||"0")+"."+o.substring(i),n+o}function FD(t,e,n){if(["","-"].indexOf(t)!==-1)return t;var r=(t.indexOf(".")!==-1||n)&&e,o=BC(t),a=o.beforeDecimal,i=o.afterDecimal,s=o.hasNegation,u=parseFloat("0."+(i||"0")),l=i.length<=e?"0."+i:u.toFixed(e),d=l.split("."),f=a;a&&Number(d[0])&&(f=a.split("").reverse().reduce(function(y,b,S){return y.length>S?(Number(y[0])+Number(b)).toString()+y.substring(1,y.length):b+y},d[0]));var p=C4(d[1]||"",e,n),m=s?"-":"",g=r?".":"";return""+m+f+g+p}function xl(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var n=t.createTextRange();return n.move("character",e),n.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var R4=Q7(function(t,e){for(var n=0,r=0,o=t.length,a=e.length;t[n]===e[n]&&n<o;)n++;for(;t[o-1-r]===e[a-1-r]&&a-r>n&&o-r>n;)r++;return{from:{start:n,end:o-r},to:{start:n,end:a-r}}}),r9=function(t,e){var n=Math.min(t.selectionStart,e);return{from:{start:n,end:t.selectionEnd},to:{start:n,end:e}}};function o9(t,e,n){return Math.min(Math.max(t,e),n)}function O1(t){return Math.max(t.selectionStart,t.selectionEnd)}function a9(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function i9(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function s9(t){var e=t.currentValue,n=t.formattedValue,r=t.currentValueIndex,o=t.formattedValueIndex;return e[r]===n[o]}function u9(t,e,n,r,o,a,i){i===void 0&&(i=s9);var s=o.findIndex(function(_){return _}),u=t.slice(0,s);!e&&!n.startsWith(u)&&(e=u,n=u+n,r=r+u.length);for(var l=n.length,d=t.length,f={},p=new Array(l),m=0;m<l;m++){p[m]=-1;for(var g=0,y=d;g<y;g++){var b=i({currentValue:n,lastValue:e,formattedValue:t,currentValueIndex:m,formattedValueIndex:g});if(b&&f[g]!==!0){p[m]=g,f[g]=!0;break}}}for(var S=r;S<l&&(p[S]===-1||!a(n[S]));)S++;var C=S===l||p[S]===-1?d:p[S];for(S=r-1;S>0&&p[S]===-1;)S--;var E=S===-1||p[S]===-1?0:p[S]+1;return E>C?C:r-E<C-r?E:C}function BD(t,e,n,r){var o=t.length;if(e=o9(e,0,o),r==="left"){for(;e>=0&&!n[e];)e--;e===-1&&(e=n.indexOf(!0))}else{for(;e<=o&&!n[e];)e++;e>o&&(e=n.lastIndexOf(!0))}return e===-1&&(e=o),e}function l9(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),n=0,r=e.length;n<r;n++)e[n]=!!(ap(t[n])||ap(t[n-1]));return e}function _4(t,e,n,r,o,a){a===void 0&&(a=vu);var i=t9(function(g,y){var b,S;return w4(g)?(S="",b=""):typeof g=="number"||y?(S=typeof g=="number"?E4(g):g,b=r(S)):(S=o(g,void 0),b=r(S)),{formattedValue:b,numAsString:S}}),s=A.useState(function(){return i(yd(t)?e:t,n)}),u=s[0],l=s[1],d=function(g,y){g.formattedValue!==u.formattedValue&&l({formattedValue:g.formattedValue,numAsString:g.value}),a(g,y)},f=t,p=n;yd(t)&&(f=u.numAsString,p=!0);var m=i(f,p);return A.useMemo(function(){l(m)},[m.formattedValue]),[u,d]}function c9(t){return t.replace(/[^0-9]/g,"")}function d9(t){return t}function f9(t){var e=t.type;e===void 0&&(e="text");var n=t.displayType;n===void 0&&(n="input");var r=t.customInput,o=t.renderText,a=t.getInputRef,i=t.format;i===void 0&&(i=d9);var s=t.removeFormatting;s===void 0&&(s=c9);var u=t.defaultValue,l=t.valueIsNumericString,d=t.onValueChange,f=t.isAllowed,p=t.onChange;p===void 0&&(p=vu);var m=t.onKeyDown;m===void 0&&(m=vu);var g=t.onMouseUp;g===void 0&&(g=vu);var y=t.onFocus;y===void 0&&(y=vu);var b=t.onBlur;b===void 0&&(b=vu);var S=t.value,C=t.getCaretBoundary;C===void 0&&(C=l9);var E=t.isValidInputCharacter;E===void 0&&(E=ap);var _=t.isCharacterSame,T=x4(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),D=_4(S,u,!!l,i,s,d),k=D[0],I=k.formattedValue,M=k.numAsString,O=D[1],F=A.useRef(),j=A.useRef({formattedValue:I,numAsString:M}),G=function(Ie,Me){j.current={formattedValue:Ie.formattedValue,numAsString:Ie.value},O(Ie,Me)},W=A.useState(!1),q=W[0],P=W[1],z=A.useRef(null),U=A.useRef({setCaretTimeout:null,focusTimeout:null});A.useEffect(function(){return P(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=i,L=function(Ie,Me){var Be=parseFloat(Me);return{formattedValue:Ie,value:Me,floatValue:isNaN(Be)?void 0:Be}},$=function(Ie,Me,Be){Ie.selectionStart===0&&Ie.selectionEnd===Ie.value.length||(xl(Ie,Me),U.current.setCaretTimeout=setTimeout(function(){Ie.value===Be&&Ie.selectionStart!==Me&&xl(Ie,Me)},0))},J=function(Ie,Me,Be){return BD(Ie,Me,C(Ie),Be)},ne=function(Ie,Me,Be){var Je=C(Me),ct=u9(Me,I,Ie,Be,Je,E,_);return ct=BD(Me,ct,Je),ct},ce=function(Ie){var Me=Ie.formattedValue;Me===void 0&&(Me="");var Be=Ie.input,Je=Ie.source,ct=Ie.event,st=Ie.numAsString,$e;if(Be){var Wt=Ie.inputValue||Be.value,Fe=O1(Be);Be.value=Me,$e=ne(Wt,Me,Fe),$e!==void 0&&$(Be,$e,Me)}Me!==I&&G(L(Me,st),{event:ct,source:Je})};A.useEffect(function(){var Ie=j.current,Me=Ie.formattedValue,Be=Ie.numAsString;(I!==Me||M!==Be)&&G(L(I,M),{event:void 0,source:op.props})},[I,M]);var be=z.current?O1(z.current):void 0,se=typeof window<"u"?A.useLayoutEffect:A.useEffect;se(function(){var Ie=z.current;if(I!==j.current.formattedValue&&Ie){var Me=ne(j.current.formattedValue,I,be);Ie.value=I,$(Ie,Me,I)}},[I]);var ie=function(Ie,Me,Be){var Je=Me.target,ct=F.current?r9(F.current,Je.selectionEnd):R4(I,Ie),st=Object.assign(Object.assign({},ct),{lastValue:I}),$e=s(Ie,st),Wt=H($e);if($e=s(Wt,void 0),f&&!f(L(Wt,$e))){var Fe=Me.target,Ve=O1(Fe),rt=ne(Ie,I,Ve);return Fe.value=I,$(Fe,rt,I),!1}return ce({formattedValue:Wt,numAsString:$e,inputValue:Ie,event:Me,source:Be,input:Me.target}),!0},fe=function(Ie,Me){Me===void 0&&(Me=0);var Be=Ie.selectionStart,Je=Ie.selectionEnd;F.current={selectionStart:Be,selectionEnd:Je+Me}},ge=function(Ie){var Me=Ie.target,Be=Me.value,Je=ie(Be,Ie,op.event);Je&&p(Ie),F.current=void 0},Oe=function(Ie){var Me=Ie.target,Be=Ie.key,Je=Me.selectionStart,ct=Me.selectionEnd,st=Me.value;st===void 0&&(st="");var $e;Be==="ArrowLeft"||Be==="Backspace"?$e=Math.max(Je-1,0):Be==="ArrowRight"?$e=Math.min(Je+1,st.length):Be==="Delete"&&($e=Je);var Wt=0;Be==="Delete"&&Je===ct&&(Wt=1);var Fe=Be==="ArrowLeft"||Be==="ArrowRight";if($e===void 0||Je!==ct&&!Fe){m(Ie),fe(Me,Wt);return}var Ve=$e;if(Fe){var rt=Be==="ArrowLeft"?"left":"right";Ve=J(st,$e,rt),Ve!==$e&&Ie.preventDefault()}else Be==="Delete"&&!E(st[$e])?Ve=J(st,$e,"right"):Be==="Backspace"&&!E(st[$e])&&(Ve=J(st,$e,"left"));Ve!==$e&&$(Me,Ve,st),m(Ie),fe(Me,Wt)},je=function(Ie){var Me=Ie.target,Be=function(){var Je=Me.selectionStart,ct=Me.selectionEnd,st=Me.value;if(st===void 0&&(st=""),Je===ct){var $e=J(st,Je);$e!==Je&&$(Me,$e,st)}};Be(),requestAnimationFrame(function(){Be()}),g(Ie),fe(Me)},Le=function(Ie){Ie.persist&&Ie.persist();var Me=Ie.target,Be=Ie.currentTarget;z.current=Me,U.current.focusTimeout=setTimeout(function(){var Je=Me.selectionStart,ct=Me.selectionEnd,st=Me.value;st===void 0&&(st="");var $e=J(st,Je);$e!==Je&&!(Je===0&&ct===st.length)&&$(Me,$e,st),y(Object.assign(Object.assign({},Ie),{currentTarget:Be}))},0)},ke=function(Ie){z.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),b(Ie)},qe=q&&a9()?"numeric":void 0,nt=Object.assign({inputMode:qe},T,{type:e,value:I,onChange:ge,onKeyDown:Oe,onMouseUp:je,onFocus:Le,onBlur:ke});if(n==="text")return o?bt.createElement(bt.Fragment,null,o(I,T)||null):bt.createElement("span",Object.assign({},T,{ref:a}),I);if(r){var it=r;return bt.createElement(it,Object.assign({},nt,{ref:a}))}return bt.createElement("input",Object.assign({},nt,{ref:a}))}function LD(t,e){var n=e.decimalScale,r=e.fixedDecimalScale,o=e.prefix;o===void 0&&(o="");var a=e.suffix;a===void 0&&(a="");var i=e.allowNegative,s=e.thousandsGroupStyle;if(s===void 0&&(s="thousand"),t===""||t==="-")return t;var u=v0(e),l=u.thousandSeparator,d=u.decimalSeparator,f=n!==0&&t.indexOf(".")!==-1||n&&r,p=BC(t,i),m=p.beforeDecimal,g=p.afterDecimal,y=p.addNegation;return n!==void 0&&(g=C4(g,n,!!r)),l&&(m=e9(m,l,s)),o&&(m=o+m),a&&(g=g+a),y&&(m="-"+m),t=m+(f&&d||"")+g,t}function v0(t){var e=t.decimalSeparator;e===void 0&&(e=".");var n=t.thousandSeparator,r=t.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[e,"."]),{decimalSeparator:e,thousandSeparator:n,allowedDecimalSeparators:r}}function h9(t,e){t===void 0&&(t="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),o=n.test(t),a=r.test(t);return t=t.replace(/-/g,""),o&&!a&&e&&(t="-"+t),t}function p9(t,e){return new RegExp("(^-)|[0-9]|"+S4(t),"g")}function m9(t,e,n){return t===""?!0:!e?.match(/\d/)&&!n?.match(/\d/)&&typeof t=="string"&&!isNaN(Number(t))}function v9(t,e,n){var r;e===void 0&&(e=i9(t));var o=n.allowNegative,a=n.prefix;a===void 0&&(a="");var i=n.suffix;i===void 0&&(i="");var s=n.decimalScale,u=e.from,l=e.to,d=l.start,f=l.end,p=v0(n),m=p.allowedDecimalSeparators,g=p.decimalSeparator,y=t[f]===g;if(ap(t)&&(t===a||t===i)&&e.lastValue==="")return t;if(f-d===1&&m.indexOf(t[d])!==-1){var b=s===0?"":g;t=t.substring(0,d)+b+t.substring(d+1,t.length)}var S=function(z,U,H){var L=!1,$=!1;a.startsWith("-")?L=!1:z.startsWith("--")?(L=!1,$=!0):i.startsWith("-")&&z.length===i.length?L=!1:z[0]==="-"&&(L=!0);var J=L?1:0;return $&&(J=2),J&&(z=z.substring(J),U-=J,H-=J),{value:z,start:U,end:H,hasNegation:L}},C=S(t,d,f),E=C.hasNegation;r=C,t=r.value,d=r.start,f=r.end;var _=S(e.lastValue,u.start,u.end),T=_.start,D=_.end,k=_.value,I=t.substring(d,f);t.length&&k.length&&(T>k.length-i.length||D<a.length)&&!(I&&i.startsWith(I))&&(t=k);var M=0;t.startsWith(a)?M+=a.length:d<a.length&&(M=d),t=t.substring(M),f-=M;var O=t.length,F=t.length-i.length;t.endsWith(i)?O=F:(f>F||f>t.length-i.length)&&(O=f),t=t.substring(0,O),t=h9(E?"-"+t:t,o),t=(t.match(p9(g))||[]).join("");var j=t.indexOf(g);t=t.replace(new RegExp(S4(g),"g"),function(z,U){return U===j?".":""});var G=BC(t,o),W=G.beforeDecimal,q=G.afterDecimal,P=G.addNegation;return l.end-l.start<u.end-u.start&&W===""&&y&&!parseFloat(q)&&(t=P?"-":""),t}function g9(t,e){var n=e.prefix;n===void 0&&(n="");var r=e.suffix;r===void 0&&(r="");var o=Array.from({length:t.length+1}).map(function(){return!0}),a=t[0]==="-";o.fill(!1,0,n.length+(a?1:0));var i=t.length;return o.fill(!1,i-r.length+1,i+1),o}function y9(t){var e=v0(t),n=e.thousandSeparator,r=e.decimalSeparator,o=t.prefix;o===void 0&&(o="");var a=t.allowNegative;if(a===void 0&&(a=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return o.startsWith("-")&&a&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+o+`
      allowNegative: `+a+`
    `),a=!1),Object.assign(Object.assign({},t),{allowNegative:a})}function b9(t){t=y9(t),t.decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle;var e=t.suffix,n=t.allowNegative,r=t.allowLeadingZeros,o=t.onKeyDown;o===void 0&&(o=vu);var a=t.onBlur;a===void 0&&(a=vu);var i=t.thousandSeparator,s=t.decimalScale,u=t.fixedDecimalScale,l=t.prefix;l===void 0&&(l="");var d=t.defaultValue,f=t.value,p=t.valueIsNumericString,m=t.onValueChange,g=x4(t,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),y=v0(t),b=y.decimalSeparator,S=y.allowedDecimalSeparators,C=function(P){return LD(P,t)},E=function(P,z){return v9(P,z,t)},_=yd(f)?d:f,T=p??m9(_,l,e);yd(f)?yd(d)||(T=T||typeof d=="number"):T=T||typeof f=="number";var D=function(P){return w4(P)?P:(typeof P=="number"&&(P=E4(P)),T&&typeof s=="number"?FD(P,s,!!u):P)},k=_4(D(f),D(d),!!T,C,E,m),I=k[0],M=I.numAsString,O=I.formattedValue,F=k[1],j=function(P){var z=P.target,U=P.key,H=z.selectionStart,L=z.selectionEnd,$=z.value;if($===void 0&&($=""),(U==="Backspace"||U==="Delete")&&L<l.length){P.preventDefault();return}if(H!==L){o(P);return}U==="Backspace"&&$[0]==="-"&&H===l.length+1&&n&&xl(z,1),s&&u&&(U==="Backspace"&&$[H-1]===b?(xl(z,H-1),P.preventDefault()):U==="Delete"&&$[H]===b&&P.preventDefault()),S?.includes(U)&&$[H]===b&&xl(z,H+1);var J=i===!0?",":i;U==="Backspace"&&$[H-1]===J&&xl(z,H-1),U==="Delete"&&$[H]===J&&xl(z,H+1),o(P)},G=function(P){var z=M;if(z.match(/\d/g)||(z=""),r||(z=n9(z)),u&&s&&(z=FD(z,s,u)),z!==M){var U=LD(z,t);F({formattedValue:U,value:z,floatValue:parseFloat(z)},{event:P,source:op.event})}a(P)},W=function(P){return P===b?!0:ap(P)},q=function(P){var z=P.currentValue,U=P.lastValue,H=P.formattedValue,L=P.currentValueIndex,$=P.formattedValueIndex,J=z[L],ne=H[$],ce=R4(U,z),be=ce.to,se=function(ie){return E(ie).indexOf(".")+l.length};return f===0&&u&&s&&z[be.start]===b&&se(z)<L&&se(H)>$?!1:L>=be.start&&L<be.end&&S&&S.includes(J)&&ne===b?!0:J===ne};return Object.assign(Object.assign({},g),{value:O,valueIsNumericString:!1,isValidInputCharacter:W,isCharacterSame:q,onValueChange:F,format:C,removeFormatting:E,getCaretBoundary:function(P){return g9(P,t)},onKeyDown:j,onBlur:G})}function x9(t){var e=b9(t);return bt.createElement(f9,Object.assign({},e))}function jD({direction:t,style:e,...n}){return w.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:t==="up"?"rotate(180deg)":void 0,...e},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var s2={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const w9=/^(0\.0*|-0(\.0*)?)$/,S9=/^-?0\d+(\.\d+)?\.?$/,C9=/\.\d*0$/;function u2(t){return typeof t=="string"&&t!==""&&!Number.isNaN(Number(t))}function P1(t){return typeof t=="number"?t<Number.MAX_SAFE_INTEGER:t===""||u2(t)&&Number(t)<Number.MAX_SAFE_INTEGER}function E9(t){return t.toString().replace(".","").length}function R9(t,e){return(typeof t=="number"?t<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(t)))&&!Number.isNaN(t)&&E9(e)<14&&e!==""}function zD(t,e,n){if(t===void 0)return!0;const r=e===void 0||t>=e,o=n===void 0||t<=n;return r&&o}const _9={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},T9=(t,{size:e})=>({controls:{"--ni-chevron-size":Ut(e,"ni-chevron-size")}});function A9(t,e,n){const r=t.toString().replace(/^0+/,""),o=parseFloat(r);return Number.isNaN(o)?r:o>Number.MAX_SAFE_INTEGER?e!==void 0?e:r:hg(o,n,e)}const bd=Ue((t,e)=>{const n=De("NumberInput",_9,t),{className:r,classNames:o,styles:a,unstyled:i,vars:s,onChange:u,onValueChange:l,value:d,defaultValue:f,max:p,min:m,step:g,hideControls:y,rightSection:b,isAllowed:S,clampBehavior:C,onBlur:E,allowDecimal:_,decimalScale:T,onKeyDown:D,onKeyDownCapture:k,handlersRef:I,startValue:M,disabled:O,rightSectionPointerEvents:F,allowNegative:j,readOnly:G,size:W,rightSectionWidth:q,stepHoldInterval:P,stepHoldDelay:z,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:L,attributes:$,...J}=n,ne=dt({name:"NumberInput",classes:s2,props:n,classNames:o,styles:a,unstyled:i,attributes:$,vars:s,varsResolver:T9}),{resolvedClassNames:ce,resolvedStyles:be}=Hl({classNames:o,styles:a,props:n}),[se,ie]=gs({value:d,defaultValue:f,finalValue:"",onChange:u}),fe=z!==void 0&&P!==void 0,ge=A.useRef(null),Oe=A.useRef(null),je=A.useRef(0),Le=(Fe,Ve)=>{Ve.source==="event"&&ie(R9(Fe.floatValue,Fe.value)&&!w9.test(Fe.value)&&!(U&&S9.test(Fe.value))&&!C9.test(Fe.value)?Fe.floatValue:Fe.value),l?.(Fe,Ve)},ke=Fe=>{const Ve=String(Fe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Ve?Math.max(0,(Ve[1]?Ve[1].length:0)-(Ve[2]?+Ve[2]:0)):0},qe=Fe=>{ge.current&&typeof Fe<"u"&&ge.current.setSelectionRange(Fe,Fe)},nt=A.useRef(Ag);nt.current=()=>{if(!P1(se))return;let Fe;const Ve=ke(se),rt=ke(g),Lt=Math.max(Ve,rt),Ot=10**Lt;if(!u2(se)&&(typeof se!="number"||Number.isNaN(se)))Fe=hg(M,m,p);else if(p!==void 0){const Qt=(Math.round(Number(se)*Ot)+Math.round(g*Ot))/Ot;Fe=Qt<=p?Qt:p}else Fe=(Math.round(Number(se)*Ot)+Math.round(g*Ot))/Ot;const Vn=Fe.toFixed(Lt);ie(parseFloat(Vn)),l?.({floatValue:parseFloat(Vn),formattedValue:Vn,value:Vn},{source:"increment"}),setTimeout(()=>qe(ge.current?.value.length),0)};const it=A.useRef(Ag);it.current=()=>{if(!P1(se))return;let Fe;const Ve=m!==void 0?m:j?Number.MIN_SAFE_INTEGER:0,rt=ke(se),Lt=ke(g),Ot=Math.max(rt,Lt),Vn=10**Ot;if(!u2(se)&&typeof se!="number"||Number.isNaN(se))Fe=hg(M,Ve,p);else{const gn=(Math.round(Number(se)*Vn)-Math.round(g*Vn))/Vn;Fe=Ve!==void 0&&gn<Ve?Ve:gn}const Qt=Fe.toFixed(Ot);ie(parseFloat(Qt)),l?.({floatValue:parseFloat(Qt),formattedValue:Qt,value:Qt},{source:"decrement"}),setTimeout(()=>qe(ge.current?.value.length),0)};const Ie=Fe=>{D?.(Fe),!(G||!H)&&(Fe.key==="ArrowUp"&&(Fe.preventDefault(),nt.current?.()),Fe.key==="ArrowDown"&&(Fe.preventDefault(),it.current?.()))},Me=Fe=>{if(k?.(Fe),Fe.key==="Backspace"){const Ve=ge.current;Ve&&Ve.selectionStart===0&&Ve.selectionStart===Ve.selectionEnd&&(Fe.preventDefault(),window.setTimeout(()=>qe(0),0))}},Be=Fe=>{let Ve=se;C==="blur"&&typeof Ve=="number"&&(Ve=hg(Ve,m,p)),L&&typeof Ve=="string"&&ke(Ve)<15&&(Ve=A9(Ve,p,m)),se!==Ve&&ie(Ve),E?.(Fe)};Qh(I,{increment:nt.current,decrement:it.current});const Je=Fe=>{Fe?nt.current?.():it.current?.(),je.current+=1},ct=Fe=>{if(Je(Fe),fe){const Ve=typeof P=="number"?P:P(je.current);Oe.current=window.setTimeout(()=>ct(Fe),Ve)}},st=(Fe,Ve)=>{Fe.preventDefault(),ge.current?.focus(),Je(Ve),fe&&(Oe.current=window.setTimeout(()=>ct(Ve),z))},$e=()=>{Oe.current&&window.clearTimeout(Oe.current),Oe.current=null,je.current=0},Wt=w.jsxs("div",{...ne("controls"),children:[w.jsx(Ci,{...ne("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof se=="number"&&p!==void 0&&se>=p,mod:{direction:"up"},onMouseDown:Fe=>Fe.preventDefault(),onPointerDown:Fe=>{st(Fe,!0)},onPointerUp:$e,onPointerLeave:$e,children:w.jsx(jD,{direction:"up"})}),w.jsx(Ci,{...ne("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof se=="number"&&m!==void 0&&se<=m,mod:{direction:"down"},onMouseDown:Fe=>Fe.preventDefault(),onPointerDown:Fe=>{st(Fe,!1)},onPointerUp:$e,onPointerLeave:$e,children:w.jsx(jD,{direction:"down"})})]});return w.jsx(bo,{component:x9,allowNegative:j,className:vr(s2.root,r),size:W,...J,readOnly:G,disabled:O,value:se,getInputRef:er(e,ge),onValueChange:Le,rightSection:y||G||!P1(se)?b:b||Wt,classNames:ce,styles:be,unstyled:i,__staticSelector:"NumberInput",decimalScale:_?T:0,onKeyDown:Ie,onKeyDownCapture:Me,rightSectionPointerEvents:F??(O?"none":void 0),rightSectionWidth:q??`var(--ni-right-section-width-${W||"sm"})`,allowLeadingZeros:U,onBlur:Be,attributes:$,isAllowed:Fe=>C==="strict"?S?S(Fe)&&zD(Fe.floatValue,m,p):zD(Fe.floatValue,m,p):S?S(Fe):!0})});bd.classes={...bo.classes,...s2};bd.displayName="@mantine/core/NumberInput";const[N9,T4]=Ca("Progress.Root component was not found in tree");var Ip={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const LC=Ue((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,...s}=De("ProgressLabel",null,t),u=T4();return w.jsx(le,{ref:e,...u.getStyles("label",{className:r,style:o,classNames:n,styles:a}),...s})});LC.classes=Ip;LC.displayName="@mantine/core/ProgressLabel";const D9=(t,{size:e,radius:n,transitionDuration:r})=>({root:{"--progress-size":Ut(e,"progress-size"),"--progress-radius":n===void 0?void 0:Zn(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),g0=Ue((t,e)=>{const n=De("ProgressRoot",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,autoContrast:l,transitionDuration:d,attributes:f,...p}=n,m=dt({name:"Progress",classes:Ip,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:f,vars:u,varsResolver:D9});return w.jsx(N9,{value:{getStyles:m,autoContrast:l},children:w.jsx(le,{ref:e,...m("root"),...p})})});g0.classes=Ip;g0.displayName="@mantine/core/ProgressRoot";const k9={withAria:!0},y0=Ue((t,e)=>{const{classNames:n,className:r,style:o,styles:a,vars:i,value:s,withAria:u,color:l,striped:d,animated:f,mod:p,...m}=De("ProgressSection",k9,t),g=T4(),y=Vr(),b=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":s,"aria-valuetext":`${s}%`}:{};return w.jsx(le,{ref:e,...g.getStyles("section",{className:r,classNames:n,styles:a,style:o}),...m,...b,mod:[{striped:d||f,animated:f},p],__vars:{"--progress-section-width":`${s}%`,"--progress-section-color":Jr(l,y),"--progress-label-color":oG(g.autoContrast,y)?IS({color:l,theme:y,autoContrast:g.autoContrast}):void 0}})});y0.classes=Ip;y0.displayName="@mantine/core/ProgressSection";const cf=Ue((t,e)=>{const n=De("Progress",null,t),{value:r,classNames:o,styles:a,vars:i,color:s,striped:u,animated:l,"aria-label":d,...f}=n,{resolvedClassNames:p,resolvedStyles:m}=Hl({classNames:o,styles:a,props:n});return w.jsx(g0,{ref:e,classNames:p,styles:m,vars:i,...f,children:w.jsx(y0,{value:r,color:s,striped:u,animated:l,"aria-label":d})})});cf.classes=Ip;cf.displayName="@mantine/core/Progress";cf.Section=y0;cf.Root=g0;cf.Label=LC;const I9={duration:100,transition:"fade"};function UD(t,e){return{...I9,...e,...t}}function M9({offset:t,position:e,defaultOpened:n}){const[r,o]=A.useState(n),a=A.useRef(null),{x:i,y:s,elements:u,refs:l,update:d,placement:f}=Gy({placement:e,middleware:[WS({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=f.includes("right")?t:e.includes("left")?t*-1:0,m=f.includes("bottom")?t:e.includes("top")?t*-1:0,g=A.useCallback(({clientX:y,clientY:b})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:y,y:b,left:y+p,top:b+m,right:y,bottom:b}}})},[u.reference]);return A.useEffect(()=>{if(l.floating.current){const y=a.current;y.addEventListener("mousemove",g);const b=ps(l.floating.current);return b.forEach(S=>{S.addEventListener("scroll",d)}),()=>{y.removeEventListener("mousemove",g),b.forEach(S=>{S.removeEventListener("scroll",d)})}}},[u.reference,l.floating.current,d,g,r]),{handleMouseMove:g,x:i,y:s,opened:r,setOpened:o,boundaryRef:a,floating:l.setFloating}}var b0={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const O9={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:no("popover")},P9=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Zn(e),"--tooltip-bg":n?Jr(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),jC=Ue((t,e)=>{const n=De("TooltipFloating",O9,t),{children:r,refProp:o,withinPortal:a,style:i,className:s,classNames:u,styles:l,unstyled:d,radius:f,color:p,label:m,offset:g,position:y,multiline:b,zIndex:S,disabled:C,defaultOpened:E,variant:_,vars:T,portalProps:D,attributes:k,...I}=n,M=Vr(),O=dt({name:"TooltipFloating",props:n,classes:b0,className:s,style:i,classNames:u,styles:l,unstyled:d,attributes:k,rootSelector:"tooltip",vars:T,varsResolver:P9}),{handleMouseMove:F,x:j,y:G,opened:W,boundaryRef:q,floating:P,setOpened:z}=M9({offset:g,position:y,defaultOpened:E});if(!Bu(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const U=er(q,Py(r),e),H=r.props,L=J=>{H.onMouseEnter?.(J),F(J),z(!0)},$=J=>{H.onMouseLeave?.(J),z(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(Du,{...D,withinPortal:a,children:w.jsx(le,{...I,...O("tooltip",{style:{...PS(i,M),zIndex:S,display:!C&&W?"block":"none",top:(G&&Math.round(G))??"",left:(j&&Math.round(j))??""}}),variant:_,ref:P,mod:{multiline:b},children:m})}),A.cloneElement(r,{...H,[o]:U,onMouseEnter:L,onMouseLeave:$})]})});jC.classes=b0;jC.displayName="@mantine/core/TooltipFloating";const A4=A.createContext(!1),F9=A4.Provider,B9=()=>A.useContext(A4),L9={openDelay:0,closeDelay:0};function zC(t){const{openDelay:e,closeDelay:n,children:r}=De("TooltipGroup",L9,t);return w.jsx(F9,{value:!0,children:w.jsx(u3,{delay:{open:e,close:n},children:r})})}zC.displayName="@mantine/core/TooltipGroup";zC.extend=t=>t;function j9(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function z9(t){const e=j9(t.middlewares),n=[t3(t.offset)];return e.shift&&n.push(WS(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?Mg():Mg(e.flip)),n.push(n3({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?Wh():Wh(e.inline)):t.inline&&n.push(Wh()),n}function U9(t){const[e,n]=A.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,a=B9(),i=$a(),s=A.useCallback(T=>{n(T),T&&S(i)},[i]),{x:u,y:l,context:d,refs:f,placement:p,middlewareData:{arrow:{x:m,y:g}={}}}=Gy({strategy:t.strategy,placement:t.position,open:o,onOpenChange:s,middleware:z9(t),whileElementsMounted:ZO}),{delay:y,currentId:b,setCurrentId:S}=l3(d,{id:i}),{getReferenceProps:C,getFloatingProps:E}=d3([i3(d,{enabled:t.events?.hover,delay:a?y:{open:t.openDelay,close:t.closeDelay},mouseOnly:!t.events?.touch}),a$(d,{enabled:t.events?.focus,visibleOnly:!0}),f3(d,{role:"tooltip"}),c3(d,{enabled:typeof t.opened>"u"})]);Su(()=>{t.onPositionChange?.(p)},[p]);const _=o&&b&&b!==i;return{x:u,y:l,arrowX:m,arrowY:g,reference:f.setReference,floating:f.setFloating,getFloatingProps:E,getReferenceProps:C,isGroupPhase:_,opened:o,placement:p}}const WD={position:"top",refProp:"ref",withinPortal:!0,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:no("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},W9=(t,{radius:e,color:n,variant:r,autoContrast:o})=>{const a=t.variantColorResolver({theme:t,color:n||t.primaryColor,autoContrast:o,variant:r||"filled"});return{tooltip:{"--tooltip-radius":e===void 0?void 0:Zn(e),"--tooltip-bg":n?a.background:void 0,"--tooltip-color":n?a.color:void 0}}},$o=Ue((t,e)=>{const n=De("Tooltip",WD,t),{children:r,position:o,refProp:a,label:i,openDelay:s,closeDelay:u,onPositionChange:l,opened:d,defaultOpened:f,withinPortal:p,radius:m,color:g,classNames:y,styles:b,unstyled:S,style:C,className:E,withArrow:_,arrowSize:T,arrowOffset:D,arrowRadius:k,arrowPosition:I,offset:M,transitionProps:O,multiline:F,events:j,zIndex:G,disabled:W,positionDependencies:q,onClick:P,onMouseEnter:z,onMouseLeave:U,inline:H,variant:L,keepMounted:$,vars:J,portalProps:ne,mod:ce,floatingStrategy:be,middlewares:se,autoContrast:ie,attributes:fe,target:ge,...Oe}=De("Tooltip",WD,n),{dir:je}=Np(),Le=A.useRef(null),ke=U9({position:A3(je,o),closeDelay:u,openDelay:s,onPositionChange:l,opened:d,defaultOpened:f,events:j,arrowRef:Le,arrowOffset:D,offset:typeof M=="number"?M+(_?T/2:0):M,positionDependencies:[...q,ge??r],inline:H,strategy:be,middlewares:se});A.useEffect(()=>{const Be=ge instanceof HTMLElement?ge:typeof ge=="string"?document.querySelector(ge):ge?.current||null;Be&&ke.reference(Be)},[ge,ke]);const qe=dt({name:"Tooltip",props:n,classes:b0,className:E,style:C,classNames:y,styles:b,unstyled:S,attributes:fe,rootSelector:"tooltip",vars:J,varsResolver:W9});if(!ge&&!Bu(r))return null;if(ge){const Be=UD(O,{duration:100,transition:"fade"});return w.jsx(w.Fragment,{children:w.jsx(Du,{...ne,withinPortal:p,children:w.jsx(bs,{...Be,keepMounted:$,mounted:!W&&!!ke.opened,duration:ke.isGroupPhase?10:Be.duration,children:Je=>w.jsxs(le,{...Oe,"data-fixed":be==="fixed"||void 0,variant:L,mod:[{multiline:F},ce],...ke.getFloatingProps({ref:ke.floating,className:qe("tooltip").className,style:{...qe("tooltip").style,...Je,zIndex:G,top:ke.y??0,left:ke.x??0}}),children:[i,w.jsx(Og,{ref:Le,arrowX:ke.arrowX,arrowY:ke.arrowY,visible:_,position:ke.placement,arrowSize:T,arrowOffset:D,arrowRadius:k,arrowPosition:I,...qe("arrow")})]})})})})}const nt=r,it=nt.props,Ie=er(ke.reference,Py(nt),e),Me=UD(O,{duration:100,transition:"fade"});return w.jsxs(w.Fragment,{children:[w.jsx(Du,{...ne,withinPortal:p,children:w.jsx(bs,{...Me,keepMounted:$,mounted:!W&&!!ke.opened,duration:ke.isGroupPhase?10:Me.duration,children:Be=>w.jsxs(le,{...Oe,"data-fixed":be==="fixed"||void 0,variant:L,mod:[{multiline:F},ce],...ke.getFloatingProps({ref:ke.floating,className:qe("tooltip").className,style:{...qe("tooltip").style,...Be,zIndex:G,top:ke.y??0,left:ke.x??0}}),children:[i,w.jsx(Og,{ref:Le,arrowX:ke.arrowX,arrowY:ke.arrowY,visible:_,position:ke.placement,arrowSize:T,arrowOffset:D,arrowRadius:k,arrowPosition:I,...qe("arrow")})]})})}),A.cloneElement(nt,ke.getReferenceProps({onClick:P,onMouseEnter:z,onMouseLeave:U,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:vr(E,it.className),...it,[a]:Ie}))]})});$o.classes=b0;$o.displayName="@mantine/core/Tooltip";$o.Floating=jC;$o.Group=zC;var N4={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const V9={withItemsBorders:!0},H9=(t,{radius:e,color:n,transitionDuration:r,size:o,transitionTimingFunction:a})=>({root:{"--sc-radius":e===void 0?void 0:Zn(e),"--sc-color":n?Jr(n,t):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":a,"--sc-padding":Ut(o,"sc-padding"),"--sc-font-size":Tr(o)}}),UC=Ue((t,e)=>{const n=De("SegmentedControl",V9,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,data:l,value:d,defaultValue:f,onChange:p,size:m,name:g,disabled:y,readOnly:b,fullWidth:S,orientation:C,radius:E,color:_,transitionDuration:T,transitionTimingFunction:D,variant:k,autoContrast:I,withItemsBorders:M,mod:O,attributes:F,...j}=n,G=dt({name:"SegmentedControl",props:n,classes:N4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:F,vars:u,varsResolver:H9}),W=Vr(),q=l.map(ge=>typeof ge=="string"?{label:ge,value:ge}:ge),P=fH(),[z,U]=A.useState(yi()),[H,L]=A.useState(null),[$,J]=A.useState({}),ne=(ge,Oe)=>{$[Oe]=ge,J($)},[ce,be]=gs({value:d,defaultValue:f,finalValue:Array.isArray(l)?q.find(ge=>!ge.disabled)?.value??l[0]?.value??null:null,onChange:p}),se=$a(g),ie=q.map(ge=>A.createElement(le,{...G("control"),mod:{active:ce===ge.value,orientation:C},key:ge.value},A.createElement("input",{...G("input"),disabled:y||ge.disabled,type:"radio",name:se,value:ge.value,id:`${se}-${ge.value}`,checked:ce===ge.value,onChange:()=>!b&&be(ge.value),"data-focus-ring":W.focusRing,key:`${ge.value}-input`}),A.createElement(le,{component:"label",...G("label"),mod:{active:ce===ge.value&&!(y||ge.disabled),disabled:y||ge.disabled,"read-only":b},htmlFor:`${se}-${ge.value}`,ref:Oe=>ne(Oe,ge.value),__vars:{"--sc-label-color":_!==void 0?IS({color:_,theme:W,autoContrast:I}):void 0},key:`${ge.value}-label`},w.jsx("span",{...G("innerLabel"),children:ge.label})))),fe=er(e,ge=>L(ge));return sH(()=>{U(yi())},[l.length]),l.length===0?null:w.jsxs(le,{...G("root"),variant:k,size:m,ref:fe,mod:[{"full-width":S,orientation:C,initialized:P,"with-items-borders":M},O],...j,role:"radiogroup","data-disabled":y,children:[typeof ce=="string"&&w.jsx(uC,{target:$[ce],parent:H,component:"span",transitionDuration:"var(--sc-transition-duration)",...G("indicator")},z),ie]})});UC.classes=N4;UC.displayName="@mantine/core/SegmentedControl";const G9={withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Eu=Ue((t,e)=>{const n=De("Select",G9,t),{classNames:r,styles:o,unstyled:a,vars:i,dropdownOpened:s,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:d,onFocus:f,onBlur:p,onClick:m,onChange:g,data:y,value:b,defaultValue:S,selectFirstOptionOnChange:C,onOptionSubmit:E,comboboxProps:_,readOnly:T,disabled:D,filter:k,limit:I,withScrollArea:M,maxDropdownHeight:O,size:F,searchable:j,rightSection:G,checkIconPosition:W,withCheckIcon:q,nothingFoundMessage:P,name:z,form:U,searchValue:H,defaultSearchValue:L,onSearchChange:$,allowDeselect:J,error:ne,rightSectionPointerEvents:ce,id:be,clearable:se,clearButtonProps:ie,hiddenInputProps:fe,renderOption:ge,onClear:Oe,autoComplete:je,scrollAreaProps:Le,__defaultRightSection:ke,__clearSection:qe,__clearable:nt,chevronColor:it,autoSelectOnBlur:Ie,attributes:Me,...Be}=n,Je=A.useMemo(()=>K3(y),[y]),ct=A.useMemo(()=>lC(Je),[Je]),st=$a(be),[$e,Wt,Fe]=gs({value:b,defaultValue:S,finalValue:null,onChange:g}),Ve=typeof $e=="string"?ct[$e]:void 0,rt=cH(Ve),[Lt,Ot,Vn]=gs({value:H,defaultValue:L,finalValue:Ve?Ve.label:"",onChange:$}),Qt=xC({opened:s,defaultOpened:u,onDropdownOpen:()=>{d?.(),Qt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l?.(),setTimeout(Qt.resetSelectedOption,0)}}),gn=_n=>{Ot(_n),Qt.resetSelectedOption()},{resolvedClassNames:kr,resolvedStyles:Hr}=Hl({props:n,styles:o,classNames:r});A.useEffect(()=>{C&&Qt.selectFirstOption()},[C,Lt]),A.useEffect(()=>{b===null&&gn(""),typeof b=="string"&&Ve&&(rt?.value!==Ve.value||rt?.label!==Ve.label)&&gn(Ve.label)},[b,Ve]),A.useEffect(()=>{!Fe&&!Vn&&gn(typeof $e=="string"&&ct[$e]?.label||"")},[y,$e]);const tr=w.jsx(zt.ClearButton,{...ie,onClear:()=>{Wt(null,null),gn(""),Oe?.()}}),Aa=se&&!!$e&&!D&&!T;return w.jsxs(w.Fragment,{children:[w.jsxs(zt,{store:Qt,__staticSelector:"Select",classNames:kr,styles:Hr,unstyled:a,readOnly:T,size:F,attributes:Me,onOptionSubmit:_n=>{E?.(_n);const Qa=J&&ct[_n].value===$e?null:ct[_n],mt=Qa?Qa.value:null;mt!==$e&&Wt(mt,Qa),!Fe&&gn(typeof mt=="string"&&Qa?.label||""),Qt.closeDropdown()},..._,children:[w.jsx(zt.Target,{targetType:j?"input":"button",autoComplete:je,children:w.jsx(bo,{id:st,ref:e,__defaultRightSection:w.jsx(zt.Chevron,{size:F,error:ne,unstyled:a,color:it}),__clearSection:tr,__clearable:Aa,rightSection:G,rightSectionPointerEvents:ce||(Aa?"all":"none"),...Be,size:F,__staticSelector:"Select",disabled:D,readOnly:T||!j,value:Lt,onChange:_n=>{gn(_n.currentTarget.value),Qt.openDropdown(),C&&Qt.selectFirstOption()},onFocus:_n=>{j&&Qt.openDropdown(),f?.(_n)},onBlur:_n=>{Ie&&Qt.clickSelectedOption(),j&&Qt.closeDropdown(),gn($e!=null&&ct[$e]?.label||""),p?.(_n)},onClick:_n=>{j?Qt.openDropdown():Qt.toggleDropdown(),m?.(_n)},classNames:kr,styles:Hr,unstyled:a,pointer:!j,error:ne,attributes:Me})}),w.jsx(o4,{data:Je,hidden:T||D,filter:k,search:Lt,limit:I,hiddenWhenEmpty:!P,withScrollArea:M,maxDropdownHeight:O,filterOptions:!!j&&Ve?.label!==Lt,value:$e,checkIconPosition:W,withCheckIcon:q,nothingFoundMessage:P,unstyled:a,labelId:Be.label?`${st}-label`:void 0,"aria-label":Be.label?void 0:Be["aria-label"],renderOption:ge,scrollAreaProps:Le})]}),w.jsx(zt.HiddenInput,{value:$e,name:z,form:U,disabled:D,...fe})]})});Eu.classes={...bo.classes,...zt.classes};Eu.displayName="@mantine/core/Select";function $9({spacing:t,verticalSpacing:e,cols:n,selector:r}){const o=Vr(),a=e===void 0?t:e,i=Tp({"--sg-spacing-x":Ur(vd(t)),"--sg-spacing-y":Ur(vd(a)),"--sg-cols":vd(n)?.toString()}),s=co(o.breakpoints).reduce((d,f)=>(d[f]||(d[f]={}),typeof t=="object"&&t[f]!==void 0&&(d[f]["--sg-spacing-x"]=Ur(t[f])),typeof a=="object"&&a[f]!==void 0&&(d[f]["--sg-spacing-y"]=Ur(a[f])),typeof n=="object"&&n[f]!==void 0&&(d[f]["--sg-cols"]=n[f]),d),{}),l=zV(co(s),o.breakpoints).filter(d=>co(s[d.value]).length>0).map(d=>({query:`(min-width: ${o.breakpoints[d.value]})`,styles:s[d.value]}));return w.jsx(MS,{styles:i,media:l,selector:r})}function F1(t){return typeof t=="object"&&t!==null?co(t):[]}function q9(t){return t.sort((e,n)=>Yh(e)-Yh(n))}function X9({spacing:t,verticalSpacing:e,cols:n}){const r=Array.from(new Set([...F1(t),...F1(e),...F1(n)]));return q9(r)}function K9({spacing:t,verticalSpacing:e,cols:n,selector:r}){const o=e===void 0?t:e,a=Tp({"--sg-spacing-x":Ur(vd(t)),"--sg-spacing-y":Ur(vd(o)),"--sg-cols":vd(n)?.toString()}),i=X9({spacing:t,verticalSpacing:e,cols:n}),s=i.reduce((l,d)=>(l[d]||(l[d]={}),typeof t=="object"&&t[d]!==void 0&&(l[d]["--sg-spacing-x"]=Ur(t[d])),typeof o=="object"&&o[d]!==void 0&&(l[d]["--sg-spacing-y"]=Ur(o[d])),typeof n=="object"&&n[d]!==void 0&&(l[d]["--sg-cols"]=n[d]),l),{}),u=i.map(l=>({query:`simple-grid (min-width: ${l})`,styles:s[l]}));return w.jsx(MS,{styles:a,container:u,selector:r})}var D4={container:"m_925c2d2c",root:"m_2415a157"};const Y9={cols:1,spacing:"md",type:"media"},zu=Ue((t,e)=>{const n=De("SimpleGrid",Y9,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,cols:l,verticalSpacing:d,spacing:f,type:p,attributes:m,...g}=n,y=dt({name:"SimpleGrid",classes:D4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:m,vars:u}),b=PO();return p==="container"?w.jsxs(w.Fragment,{children:[w.jsx(K9,{...n,selector:`.${b}`}),w.jsx("div",{...y("container"),children:w.jsx(le,{ref:e,...y("root",{className:b}),...g})})]}):w.jsxs(w.Fragment,{children:[w.jsx($9,{...n,selector:`.${b}`}),w.jsx(le,{ref:e,...y("root",{className:b}),...g})]})});zu.classes=D4;zu.displayName="@mantine/core/SimpleGrid";var k4={root:"m_6d731127"};const Q9={gap:"md",align:"stretch",justify:"flex-start"},J9=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":Ur(e),"--stack-align":n,"--stack-justify":r}}),Po=Ue((t,e)=>{const n=De("Stack",Q9,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,align:l,justify:d,gap:f,variant:p,attributes:m,...g}=n,y=dt({name:"Stack",props:n,classes:k4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:m,vars:u,varsResolver:J9});return w.jsx(le,{ref:e,...y("root"),variant:p,...g})});Po.classes=k4;Po.displayName="@mantine/core/Stack";const[Z9,eX]=Ca("Table component was not found in the tree");var Mp={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function tX(t,e){if(!e)return;const n={};return e.columnBorder&&t.withColumnBorders&&(n["data-with-column-border"]=!0),e.rowBorder&&t.withRowBorders&&(n["data-with-row-border"]=!0),e.striped&&t.striped&&(n["data-striped"]=t.striped),e.highlightOnHover&&t.highlightOnHover&&(n["data-hover"]=!0),e.captionSide&&t.captionSide&&(n["data-side"]=t.captionSide),e.stickyHeader&&t.stickyHeader&&(n["data-sticky"]=!0),n}function Gl(t,e){const n=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,r=Ue((o,a)=>{const i=De(n,{},o),{classNames:s,className:u,style:l,styles:d,...f}=i,p=eX();return w.jsx(le,{component:t,ref:a,...tX(p,e),...p.getStyles(t,{className:u,classNames:s,style:l,styles:d,props:i}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=Mp,r}const l2=Gl("th",{columnBorder:!0}),I4=Gl("td",{columnBorder:!0}),vg=Gl("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),M4=Gl("thead",{stickyHeader:!0}),O4=Gl("tbody"),P4=Gl("tfoot"),F4=Gl("caption",{captionSide:!0});function WC({data:t}){return w.jsxs(w.Fragment,{children:[t.caption&&w.jsx(F4,{children:t.caption}),t.head&&w.jsx(M4,{children:w.jsx(vg,{children:t.head.map((e,n)=>w.jsx(l2,{children:e},n))})}),t.body&&w.jsx(O4,{children:t.body.map((e,n)=>w.jsx(vg,{children:e.map((r,o)=>w.jsx(I4,{children:r},o))},n))}),t.foot&&w.jsx(P4,{children:w.jsx(vg,{children:t.foot.map((e,n)=>w.jsx(l2,{children:e},n))})})]})}WC.displayName="@mantine/core/TableDataRenderer";const nX={type:"scrollarea"},rX=(t,{minWidth:e,maxHeight:n,type:r})=>({scrollContainer:{"--table-min-width":Te(e),"--table-max-height":Te(n),"--table-overflow":r==="native"?"auto":void 0}}),VC=Ue((t,e)=>{const n=De("TableScrollContainer",nX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,children:l,minWidth:d,maxHeight:f,type:p,scrollAreaProps:m,attributes:g,...y}=n,b=dt({name:"TableScrollContainer",classes:Mp,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:g,vars:u,varsResolver:rX,rootSelector:"scrollContainer"});return w.jsx(le,{component:p==="scrollarea"?Xo:"div",...p==="scrollarea"?f?{offsetScrollbars:"xy",...m}:{offsetScrollbars:"x",...m}:{},ref:e,...b("scrollContainer"),...y,children:w.jsx("div",{...b("scrollContainerInner"),children:l})})});VC.classes=Mp;VC.displayName="@mantine/core/TableScrollContainer";const oX={withRowBorders:!0,verticalSpacing:7},aX=(t,{layout:e,captionSide:n,horizontalSpacing:r,verticalSpacing:o,borderColor:a,stripedColor:i,highlightOnHoverColor:s,striped:u,highlightOnHover:l,stickyHeaderOffset:d,stickyHeader:f})=>({table:{"--table-layout":e,"--table-caption-side":n,"--table-horizontal-spacing":Ur(r),"--table-vertical-spacing":Ur(o),"--table-border-color":a?Jr(a,t):void 0,"--table-striped-color":u&&i?Jr(i,t):void 0,"--table-highlight-on-hover-color":l&&s?Jr(s,t):void 0,"--table-sticky-header-offset":f?Te(d):void 0}}),Re=Ue((t,e)=>{const n=De("Table",oX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,horizontalSpacing:l,verticalSpacing:d,captionSide:f,stripedColor:p,highlightOnHoverColor:m,striped:g,highlightOnHover:y,withColumnBorders:b,withRowBorders:S,withTableBorder:C,borderColor:E,layout:_,variant:T,data:D,children:k,stickyHeader:I,stickyHeaderOffset:M,mod:O,tabularNums:F,attributes:j,...G}=n,W=dt({name:"Table",props:n,className:o,style:a,classes:Mp,classNames:r,styles:i,unstyled:s,attributes:j,rootSelector:"table",vars:u,varsResolver:aX});return w.jsx(Z9,{value:{getStyles:W,stickyHeader:I,striped:g===!0?"odd":g||void 0,highlightOnHover:y,withColumnBorders:b,withRowBorders:S,captionSide:f||"bottom"},children:w.jsx(le,{component:"table",variant:T,ref:e,mod:[{"data-with-table-border":C,"data-tabular-nums":F},O],...W("table"),...G,children:k||!!D&&w.jsx(WC,{data:D})})})});Re.classes=Mp;Re.displayName="@mantine/core/Table";Re.Td=I4;Re.Th=l2;Re.Tr=vg;Re.Thead=M4;Re.Tbody=O4;Re.Tfoot=P4;Re.Caption=F4;Re.ScrollContainer=VC;Re.DataRenderer=WC;const xs=Ue((t,e)=>{const n=De("TextInput",null,t);return w.jsx(bo,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});xs.classes=bo.classes;xs.displayName="@mantine/core/TextInput";var B4={root:"m_7341320d"};const iX=(t,{size:e,radius:n,variant:r,gradient:o,color:a,autoContrast:i})=>{const s=t.variantColorResolver({color:a||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ti-size":Ut(e,"ti-size"),"--ti-radius":n===void 0?void 0:Zn(n),"--ti-bg":a||r?s.background:void 0,"--ti-color":a||r?s.color:void 0,"--ti-bd":a||r?s.border:void 0}}},HC=Ue((t,e)=>{const n=De("ThemeIcon",null,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,autoContrast:l,attributes:d,...f}=n,p=dt({name:"ThemeIcon",classes:B4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:d,vars:u,varsResolver:iX});return w.jsx(le,{ref:e,...p("root"),...f})});HC.classes=B4;HC.displayName="@mantine/core/ThemeIcon";const sX=["h1","h2","h3","h4","h5","h6"],uX=["xs","sm","md","lg","xl"];function lX(t,e){const n=e!==void 0?e:`h${t}`;return sX.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:uX.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var L4={root:"m_8a5d1357"};const cX={order:1},dX=(t,{order:e,size:n,lineClamp:r,textWrap:o})=>{const a=lX(e||1,n);return{root:{"--title-fw":a.fontWeight,"--title-lh":a.lineHeight,"--title-fz":a.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":o}}},jt=Ue((t,e)=>{const n=De("Title",cX,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,order:u,vars:l,size:d,variant:f,lineClamp:p,textWrap:m,mod:g,attributes:y,...b}=n,S=dt({name:"Title",props:n,classes:L4,className:o,style:a,classNames:r,styles:i,unstyled:s,attributes:y,vars:l,varsResolver:dX});return[1,2,3,4,5,6].includes(u)?w.jsx(le,{...S("root"),component:`h${u}`,variant:f,ref:e,mod:[{order:u,"data-line-clamp":typeof p=="number"},g],size:d,...b}):null});jt.classes=L4;jt.displayName="@mantine/core/Title";const GC=A.createContext(null);GC.displayName="@mantine/modals/ModalsContext";function fX(){const t=A.useContext(GC);if(!t)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return t}function hX({id:t,cancelProps:e,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:o=!0,closeOnCancel:a=!0,groupProps:i,onCancel:s,onConfirm:u,children:l}){const{cancel:d,confirm:f}=r,p=fX(),m=y=>{typeof e?.onClick=="function"&&e?.onClick(y),typeof s=="function"&&s(),a&&p.closeModal(t)},g=y=>{typeof n?.onClick=="function"&&n?.onClick(y),typeof u=="function"&&u(),o&&p.closeModal(t)};return w.jsxs(w.Fragment,{children:[l&&w.jsx(le,{mb:"md",children:l}),w.jsxs(Ge,{mt:l?0:"md",justify:"flex-end",...i,children:[w.jsx(He,{variant:"default",...e,onClick:m,children:e?.children||d}),w.jsx(He,{...n,onClick:g,children:n?.children||f})]})]})}const[pX,$l]=pH("mantine-modals"),mX=t=>{const e=t.modalId||yi();return $l("openModal")({...t,modalId:e}),e},vX=t=>{const e=t.modalId||yi();return $l("openConfirmModal")({...t,modalId:e}),e},gX=t=>{const e=t.modalId||yi();return $l("openContextModal")({...t,modalId:e}),e},yX=$l("closeModal"),bX=$l("closeAllModals"),xX=t=>$l("updateModal")(t),wX=t=>$l("updateContextModal")(t),j4={open:mX,close:yX,closeAll:bX,openConfirmModal:vX,openContextModal:gX,updateModal:xX,updateContextModal:wX};function VD(t,e){e&&t.type==="confirm"&&t.props.onCancel?.(),t.props.onClose?.()}function SX(t,e){switch(e.type){case"OPEN":return{current:e.modal,modals:[...t.modals,e.modal]};case"CLOSE":{const n=t.modals.find(o=>o.id===e.modalId);if(!n)return t;VD(n,e.canceled);const r=t.modals.filter(o=>o.id!==e.modalId);return{current:r[r.length-1]||t.current,modals:r}}case"CLOSE_ALL":return t.modals.length?(t.modals.concat().reverse().forEach(n=>{VD(n,e.canceled)}),{current:t.current,modals:[]}):t;case"UPDATE":{const{modalId:n,newProps:r}=e,o=t.modals.map(i=>i.id!==n?i:i.type==="content"||i.type==="confirm"?{...i,props:{...i.props,...r}}:i.type==="context"?{...i,props:{...i.props,...r,innerProps:{...i.props.innerProps,...r.innerProps}}}:i),a=t.current?.id===n&&o.find(i=>i.id===n)||t.current;return{...t,modals:o,current:a}}default:return t}}function CX(t){if(!t)return{confirmProps:{},modalProps:{}};const{id:e,children:n,onCancel:r,onConfirm:o,closeOnConfirm:a,closeOnCancel:i,cancelProps:s,confirmProps:u,groupProps:l,labels:d,...f}=t;return{confirmProps:{id:e,children:n,onCancel:r,onConfirm:o,closeOnConfirm:a,closeOnCancel:i,cancelProps:s,confirmProps:u,groupProps:l,labels:d},modalProps:{id:e,...f}}}function EX({children:t,modalProps:e,labels:n,modals:r}){const[o,a]=A.useReducer(SX,{modals:[],current:null}),i=A.useRef(o);i.current=o;const s=A.useCallback(C=>{a({type:"CLOSE_ALL",canceled:C})},[i,a]),u=A.useCallback(({modalId:C,...E})=>{const _=C||yi();return a({type:"OPEN",modal:{id:_,type:"content",props:E}}),_},[a]),l=A.useCallback(({modalId:C,...E})=>{const _=C||yi();return a({type:"OPEN",modal:{id:_,type:"confirm",props:E}}),_},[a]),d=A.useCallback((C,{modalId:E,..._})=>{const T=E||yi();return a({type:"OPEN",modal:{id:T,type:"context",props:_,ctx:C}}),T},[a]),f=A.useCallback((C,E)=>{a({type:"CLOSE",modalId:C,canceled:E})},[i,a]),p=A.useCallback(({modalId:C,...E})=>{a({type:"UPDATE",modalId:C,newProps:E})},[a]),m=A.useCallback(({modalId:C,...E})=>{a({type:"UPDATE",modalId:C,newProps:E})},[a]);pX({openModal:u,openConfirmModal:l,openContextModal:({modal:C,...E})=>d(C,E),closeModal:f,closeContextModal:f,closeAllModals:s,updateModal:p,updateContextModal:m});const g={modalProps:e||{},modals:o.modals,openModal:u,openConfirmModal:l,openContextModal:d,closeModal:f,closeContextModal:f,closeAll:s,updateModal:p,updateContextModal:m},y=()=>{const C=i.current.current;switch(C?.type){case"context":{const{innerProps:E,..._}=C.props,T=r[C.ctx];return{modalProps:_,content:w.jsx(T,{innerProps:E,context:g,id:C.id})}}case"confirm":{const{modalProps:E,confirmProps:_}=CX(C.props);return{modalProps:E,content:w.jsx(hX,{..._,id:C.id,labels:C.props.labels||n})}}case"content":{const{children:E,..._}=C.props;return{modalProps:_,content:E}}default:return{modalProps:{},content:null}}},{modalProps:b,content:S}=y();return w.jsxs(GC.Provider,{value:g,children:[w.jsx(Nr,{zIndex:no("modal")+1,...e,...b,opened:o.modals.length>0,onClose:()=>f(o.current?.id),children:S}),t]})}function RX(t){let e=t,n=!1;const r=new Set;return{getState(){return e},updateState(o){e=typeof o=="function"?o(e):o},setState(o){this.updateState(o),r.forEach(a=>a(e))},initialize(o){n||(e=o,n=!0)},subscribe(o){return r.add(o),()=>r.delete(o)}}}function _X(t){return A.useSyncExternalStore(t.subscribe,()=>t.getState(),()=>t.getState())}function TX(t,e,n){const r=[],o=[],a={};for(const i of t){const s=i.position||e;a[s]=a[s]||0,a[s]+=1,a[s]<=n?o.push(i):r.push(i)}return{notifications:o,queue:r}}const AX=()=>RX({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),ql=AX(),NX=(t=ql)=>_X(t);function df(t,e){const n=t.getState(),r=e([...n.notifications,...n.queue]),o=TX(r,n.defaultPosition,n.limit);t.setState({notifications:o.notifications,queue:o.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function DX(t,e=ql){const n=t.id||yi();return df(e,r=>t.id&&r.some(o=>o.id===t.id)?r:[...r,{...t,id:n}]),n}function z4(t,e=ql){return df(e,n=>n.filter(r=>r.id===t?(r.onClose?.(r),!1):!0)),t}function kX(t,e=ql){return df(e,n=>n.map(r=>r.id===t.id?{...r,...t}:r)),t.id}function IX(t=ql){df(t,()=>[])}function MX(t=ql){df(t,e=>e.slice(0,t.getState().limit))}const bn={show:DX,hide:z4,update:kX,clean:IX,cleanQueue:MX,updateState:df};function c2(t,e){return c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},c2(t,e)}function U4(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,c2(t,e)}const HD={disabled:!1},Bg=bt.createContext(null);var OX=function(e){return e.scrollTop},jh="unmounted",hl="exited",pl="entering",td="entered",d2="exiting",Rs=(function(t){U4(e,t);function e(r,o){var a;a=t.call(this,r,o)||this;var i=o,s=i&&!i.isMounting?r.enter:r.appear,u;return a.appearStatus=null,r.in?s?(u=hl,a.appearStatus=pl):u=td:r.unmountOnExit||r.mountOnEnter?u=jh:u=hl,a.state={status:u},a.nextCallback=null,a}e.getDerivedStateFromProps=function(o,a){var i=o.in;return i&&a.status===jh?{status:hl}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var a=null;if(o!==this.props){var i=this.state.status;this.props.in?i!==pl&&i!==td&&(a=pl):(i===pl||i===td)&&(a=d2)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,a,i,s;return a=i=s=o,o!=null&&typeof o!="number"&&(a=o.exit,i=o.enter,s=o.appear!==void 0?o.appear:i),{exit:a,enter:i,appear:s}},n.updateStatus=function(o,a){if(o===void 0&&(o=!1),a!==null)if(this.cancelNextCallback(),a===pl){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:ld.findDOMNode(this);i&&OX(i)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===hl&&this.setState({status:jh})},n.performEnter=function(o){var a=this,i=this.props.enter,s=this.context?this.context.isMounting:o,u=this.props.nodeRef?[s]:[ld.findDOMNode(this),s],l=u[0],d=u[1],f=this.getTimeouts(),p=s?f.appear:f.enter;if(!o&&!i||HD.disabled){this.safeSetState({status:td},function(){a.props.onEntered(l)});return}this.props.onEnter(l,d),this.safeSetState({status:pl},function(){a.props.onEntering(l,d),a.onTransitionEnd(p,function(){a.safeSetState({status:td},function(){a.props.onEntered(l,d)})})})},n.performExit=function(){var o=this,a=this.props.exit,i=this.getTimeouts(),s=this.props.nodeRef?void 0:ld.findDOMNode(this);if(!a||HD.disabled){this.safeSetState({status:hl},function(){o.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:d2},function(){o.props.onExiting(s),o.onTransitionEnd(i.exit,function(){o.safeSetState({status:hl},function(){o.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,a){a=this.setNextCallback(a),this.setState(o,a)},n.setNextCallback=function(o){var a=this,i=!0;return this.nextCallback=function(s){i&&(i=!1,a.nextCallback=null,o(s))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(o,a){this.setNextCallback(a);var i=this.props.nodeRef?this.props.nodeRef.current:ld.findDOMNode(this),s=o==null&&!this.props.addEndListener;if(!i||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],l=u[0],d=u[1];this.props.addEndListener(l,d)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===jh)return null;var a=this.props,i=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var s=AC(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bt.createElement(Bg.Provider,{value:null},typeof i=="function"?i(o,s):bt.cloneElement(bt.Children.only(i),s))},e})(bt.Component);Rs.contextType=Bg;Rs.propTypes={};function Xc(){}Rs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xc,onEntering:Xc,onEntered:Xc,onExit:Xc,onExiting:Xc,onExited:Xc};Rs.UNMOUNTED=jh;Rs.EXITED=hl;Rs.ENTERING=pl;Rs.ENTERED=td;Rs.EXITING=d2;function PX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $C(t,e){var n=function(a){return e&&A.isValidElement(a)?e(a):a},r=Object.create(null);return t&&A.Children.map(t,function(o){return o}).forEach(function(o){r[o.key]=n(o)}),r}function FX(t,e){t=t||{},e=e||{};function n(d){return d in e?e[d]:t[d]}var r=Object.create(null),o=[];for(var a in t)a in e?o.length&&(r[a]=o,o=[]):o.push(a);var i,s={};for(var u in e){if(r[u])for(i=0;i<r[u].length;i++){var l=r[u][i];s[r[u][i]]=n(l)}s[u]=n(u)}for(i=0;i<o.length;i++)s[o[i]]=n(o[i]);return s}function El(t,e,n){return n[e]!=null?n[e]:t.props[e]}function BX(t,e){return $C(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:El(n,"appear",t),enter:El(n,"enter",t),exit:El(n,"exit",t)})})}function LX(t,e,n){var r=$C(t.children),o=FX(e,r);return Object.keys(o).forEach(function(a){var i=o[a];if(A.isValidElement(i)){var s=a in e,u=a in r,l=e[a],d=A.isValidElement(l)&&!l.props.in;u&&(!s||d)?o[a]=A.cloneElement(i,{onExited:n.bind(null,i),in:!0,exit:El(i,"exit",t),enter:El(i,"enter",t)}):!u&&s&&!d?o[a]=A.cloneElement(i,{in:!1}):u&&s&&A.isValidElement(l)&&(o[a]=A.cloneElement(i,{onExited:n.bind(null,i),in:l.props.in,exit:El(i,"exit",t),enter:El(i,"enter",t)}))}}),o}var jX=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},zX={component:"div",childFactory:function(e){return e}},hu=(function(t){U4(e,t);function e(r,o){var a;a=t.call(this,r,o)||this;var i=a.handleExited.bind(PX(a));return a.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(o,a){var i=a.children,s=a.handleExited,u=a.firstRender;return{children:u?BX(o,s):LX(o,i,s),firstRender:!1}},n.handleExited=function(o,a){var i=$C(this.props.children);o.key in i||(o.props.onExited&&o.props.onExited(a),this.mounted&&this.setState(function(s){var u=Od({},s.children);return delete u[o.key],{children:u}}))},n.render=function(){var o=this.props,a=o.component,i=o.childFactory,s=AC(o,["component","childFactory"]),u=this.state.contextValue,l=jX(this.state.children).map(i);return delete s.appear,delete s.enter,delete s.exit,a===null?bt.createElement(Bg.Provider,{value:u},l):bt.createElement(Bg.Provider,{value:u},bt.createElement(a,s,l))},e})(bt.Component);hu.propTypes={};hu.defaultProps=zX;const W4=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function UX(t,e){return t.reduce((n,r)=>(n[r.position||e].push(r),n),W4.reduce((n,r)=>(n[r]=[],n),{}))}const GD={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},WX={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function VX({state:t,maxHeight:e,position:n,transitionDuration:r}){const[o,a]=n.split("-"),i=a==="center"?`${o}-center`:a,s={opacity:0,maxHeight:e,transform:GD[i],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:WX[i]},l={opacity:0,maxHeight:0,transform:GD[i]};return{...s,...{entering:u,entered:u,exiting:l,exited:l}[t]}}function HX(t,e){return typeof e=="number"?e:e===!1||t===!1?!1:t}const V4=A.forwardRef(({data:t,onHide:e,autoClose:n,...r},o)=>{const{autoClose:a,message:i,...s}=t,u=HX(n,t.autoClose),l=A.useRef(-1),d=()=>window.clearTimeout(l.current),f=()=>{e(t.id),d()},p=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return A.useEffect(()=>{t.onOpen?.(t)},[]),A.useEffect(()=>(p(),d),[u]),w.jsx(FC,{...r,...s,onClose:f,ref:o,onMouseEnter:d,onMouseLeave:p,children:i})});V4.displayName="@mantine/notifications/NotificationContainer";var H4={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const GX=Rs,$X={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:no("overlay"),store:ql,withinPortal:!0},qX=(t,{zIndex:e,containerWidth:n})=>({root:{"--notifications-z-index":e?.toString(),"--notifications-container-width":Te(n)}}),_s=Ue((t,e)=>{const n=De("Notifications",$X,t),{classNames:r,className:o,style:a,styles:i,unstyled:s,vars:u,position:l,autoClose:d,transitionDuration:f,containerWidth:p,notificationMaxHeight:m,limit:g,zIndex:y,store:b,portalProps:S,withinPortal:C,...E}=n,_=Vr(),T=NX(b),D=tH(),k=Oy(),I=A.useRef({}),M=A.useRef(0),F=(_.respectReducedMotion?k:!1)?1:f,j=dt({name:"Notifications",classes:H4,props:n,className:o,style:a,classNames:r,styles:i,unstyled:s,vars:u,varsResolver:qX});A.useEffect(()=>{b?.updateState(q=>({...q,limit:g||5,defaultPosition:l}))},[g,l]),Su(()=>{T.notifications.length>M.current&&setTimeout(()=>D(),0),M.current=T.notifications.length},[T.notifications]);const G=UX(T.notifications,l),W=W4.reduce((q,P)=>(q[P]=G[P].map(({style:z,...U})=>w.jsx(GX,{timeout:F,onEnter:()=>I.current[U.id].offsetHeight,nodeRef:{current:I.current[U.id]},children:H=>w.jsx(V4,{ref:L=>{L&&(I.current[U.id]=L)},data:U,onHide:L=>z4(L,b),autoClose:d,...j("notification",{style:{...VX({state:H,position:P,transitionDuration:F,maxHeight:m}),...z}})})},U.id)),q),{});return w.jsxs(Du,{withinPortal:C,...S,children:[w.jsx(le,{...j("root"),"data-position":"top-center",ref:e,...E,children:w.jsx(hu,{children:W["top-center"]})}),w.jsx(le,{...j("root"),"data-position":"top-left",...E,children:w.jsx(hu,{children:W["top-left"]})}),w.jsx(le,{...j("root",{className:Tg.classNames.fullWidth}),"data-position":"top-right",...E,children:w.jsx(hu,{children:W["top-right"]})}),w.jsx(le,{...j("root",{className:Tg.classNames.fullWidth}),"data-position":"bottom-right",...E,children:w.jsx(hu,{children:W["bottom-right"]})}),w.jsx(le,{...j("root"),"data-position":"bottom-left",...E,children:w.jsx(hu,{children:W["bottom-left"]})}),w.jsx(le,{...j("root"),"data-position":"bottom-center",...E,children:w.jsx(hu,{children:W["bottom-center"]})})]})});_s.classes=H4;_s.displayName="@mantine/notifications/Notifications";_s.show=bn.show;_s.hide=bn.hide;_s.update=bn.update;_s.clean=bn.clean;_s.cleanQueue=bn.cleanQueue;_s.updateState=bn.updateState;/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XX={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(t,e,n,r)=>{const o=A.forwardRef(({color:a="currentColor",size:i=24,stroke:s=2,title:u,className:l,children:d,...f},p)=>A.createElement("svg",{ref:p,...XX[t],width:i,height:i,className:["tabler-icon",`tabler-icon-${e}`,l].join(" "),strokeWidth:s,stroke:a,...f},[u&&A.createElement("title",{key:"svg-title"},u),...r.map(([m,g])=>A.createElement(m,g)),...Array.isArray(d)?d:[d]]));return o.displayName=`${n}`,o};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],$D=gt("outline","alert-circle","AlertCircle",KX);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]],gg=gt("outline","arrow-left","ArrowLeft",YX);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]],qD=gt("outline","arrow-right","ArrowRight",QX);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=[["path",{d:"M8 7l4 -4l4 4",key:"svg-0"}],["path",{d:"M8 17l4 4l4 -4",key:"svg-1"}],["path",{d:"M12 3l0 18",key:"svg-2"}]],ZX=gt("outline","arrows-vertical","ArrowsVertical",JX);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=[["path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-0"}],["path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-1"}],["path",{d:"M3 6l0 13",key:"svg-2"}],["path",{d:"M12 6l0 13",key:"svg-3"}],["path",{d:"M21 6l0 13",key:"svg-4"}]],ip=gt("outline","book","Book",eK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]],nK=gt("outline","brain","Brain",tK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=[["path",{d:"M4 8a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M16.5 7.5v.01",key:"svg-2"}]],oK=gt("outline","brand-instagram","BrandInstagram",rK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=[["path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z",key:"svg-0"}]],iK=gt("outline","brand-twitter","BrandTwitter",aK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=[["path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z",key:"svg-0"}],["path",{d:"M10 9l5 3l-5 3z",key:"svg-1"}]],uK=gt("outline","brand-youtube","BrandYoutube",sK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=[["path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],cK=gt("outline","camera","Camera",lK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]],fK=gt("outline","chart-bar","ChartBar",dK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["path",{d:"M12 12l-6.5 5.5",key:"svg-0"}],["path",{d:"M12 3v9h9",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]],pK=gt("outline","chart-pie-3","ChartPie3",hK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],f2=gt("outline","check","Check",mK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],XD=gt("outline","chevron-down","ChevronDown",vK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M9 12l.01 0",key:"svg-2"}],["path",{d:"M13 12l2 0",key:"svg-3"}],["path",{d:"M9 16l.01 0",key:"svg-4"}],["path",{d:"M13 16l2 0",key:"svg-5"}]],G4=gt("outline","clipboard-list","ClipboardList",gK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]],bK=gt("outline","clock","Clock",yK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const xK=[["path",{d:"M7 8l-4 4l4 4",key:"svg-0"}],["path",{d:"M17 8l4 4l-4 4",key:"svg-1"}],["path",{d:"M14 4l-4 16",key:"svg-2"}]],wK=gt("outline","code","Code",xK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 1 0 0 4h2a2 2 0 1 1 0 4h-2a2 2 0 0 1 -1.8 -1",key:"svg-1"}],["path",{d:"M12 7v10",key:"svg-2"}]],CK=gt("outline","coin","Coin",SK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["path",{d:"M8 13v.01",key:"svg-1"}],["path",{d:"M12 17v.01",key:"svg-2"}],["path",{d:"M12 12v.01",key:"svg-3"}],["path",{d:"M16 14v.01",key:"svg-4"}],["path",{d:"M11 8v.01",key:"svg-5"}],["path",{d:"M13.148 3.476l2.667 1.104a4 4 0 0 0 4.656 6.14l.053 .132a3 3 0 0 1 0 2.296q -.745 1.18 -1.024 1.852q -.283 .684 -.66 2.216a3 3 0 0 1 -1.624 1.623q -1.572 .394 -2.216 .661q -.712 .295 -1.852 1.024a3 3 0 0 1 -2.296 0q -1.203 -.754 -1.852 -1.024q -.707 -.292 -2.216 -.66a3 3 0 0 1 -1.623 -1.624q -.397 -1.577 -.661 -2.216q -.298 -.718 -1.024 -1.852a3 3 0 0 1 0 -2.296q .719 -1.116 1.024 -1.852q .257 -.62 .66 -2.216a3 3 0 0 1 1.624 -1.623q 1.547 -.384 2.216 -.661q .687 -.285 1.852 -1.024a3 3 0 0 1 2.296 0",key:"svg-6"}]],RK=gt("outline","cookie","Cookie",EK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]],TK=gt("outline","device-floppy","DeviceFloppy",_K);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]],NK=gt("outline","edit","Edit",AK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]],qC=gt("outline","eye","Eye",DK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=[["path",{d:"M18.9 7a8 8 0 0 1 1.1 5v1a6 6 0 0 0 .8 3",key:"svg-0"}],["path",{d:"M8 11a4 4 0 0 1 8 0v1a10 10 0 0 0 2 6",key:"svg-1"}],["path",{d:"M12 11v2a14 14 0 0 0 2.5 8",key:"svg-2"}],["path",{d:"M8 15a18 18 0 0 0 1.8 6",key:"svg-3"}],["path",{d:"M4.9 19a22 22 0 0 1 -.9 -7v-1a8 8 0 0 1 12 -6.95",key:"svg-4"}]],IK=gt("outline","fingerprint","Fingerprint",kK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["path",{d:"M12 3a3 3 0 0 0 -3 3v12a3 3 0 0 0 3 3",key:"svg-0"}],["path",{d:"M6 3a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3",key:"svg-1"}],["path",{d:"M13 7h7a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-7",key:"svg-2"}],["path",{d:"M5 7h-1a1 1 0 0 0 -1 1v8a1 1 0 0 0 1 1h1",key:"svg-3"}],["path",{d:"M17 12h.01",key:"svg-4"}],["path",{d:"M13 12h.01",key:"svg-5"}]],OK=gt("outline","forms","Forms",MK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M13.41 10.59l2.59 -2.59",key:"svg-2"}],["path",{d:"M7 12a5 5 0 0 1 5 -5",key:"svg-3"}]],FK=gt("outline","gauge","Gauge",PK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],LK=gt("outline","info-circle","InfoCircle",BK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["path",{d:"M5 12h2",key:"svg-0"}],["path",{d:"M17 12h2",key:"svg-1"}],["path",{d:"M11 12h2",key:"svg-2"}]],zK=gt("outline","line-dashed","LineDashed",jK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]],$4=gt("outline","link","Link",UK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]],VK=gt("outline","list-numbers","ListNumbers",WK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]],GK=gt("outline","list","List",HK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-0"}],["path",{d:"M9.5 9h.01",key:"svg-1"}],["path",{d:"M14.5 9h.01",key:"svg-2"}],["path",{d:"M9.5 13a3.5 3.5 0 0 0 5 0",key:"svg-3"}]],qK=gt("outline","message-chatbot","MessageChatbot",$K);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M5 10a7 7 0 0 0 14 0",key:"svg-1"}],["path",{d:"M8 21l8 0",key:"svg-2"}],["path",{d:"M12 17l0 4",key:"svg-3"}]],XC=gt("outline","microphone","Microphone",XK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=[["path",{d:"M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M9 17v-13h10v13",key:"svg-2"}],["path",{d:"M9 8h10",key:"svg-3"}]],YK=gt("outline","music","Music",KK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=[["path",{d:"M10 6h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3",key:"svg-0"}],["path",{d:"M17 7m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}]],JK=gt("outline","notification","Notification",QK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["path",{d:"M8 10v-7l-2 2",key:"svg-0"}],["path",{d:"M6 16a2 2 0 1 1 4 0c0 .591 -.601 1.46 -1 2l-3 3h4",key:"svg-1"}],["path",{d:"M15 14a2 2 0 1 0 2 -2a2 2 0 1 0 -2 -2",key:"svg-2"}],["path",{d:"M6.5 10h3",key:"svg-3"}]],eY=gt("outline","numbers","Numbers",ZK);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]],x0=gt("outline","pencil","Pencil",tY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]],Lg=gt("outline","photo","Photo",nY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M22 9l-10 -4l-10 4l10 4l10 -4v6",key:"svg-0"}],["path",{d:"M6 10.6v5.4a6 3 0 0 0 12 0v-5.4",key:"svg-1"}]],KD=gt("outline","school","School",rY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]],aY=gt("outline","send","Send",oY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],sY=gt("outline","settings","Settings",iY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"M3 7v-2h13v2",key:"svg-0"}],["path",{d:"M10 5v14",key:"svg-1"}],["path",{d:"M12 19h-4",key:"svg-2"}],["path",{d:"M15 13v-1h6v1",key:"svg-3"}],["path",{d:"M18 12v7",key:"svg-4"}],["path",{d:"M17 19h2",key:"svg-5"}]],lY=gt("outline","text-size","TextSize",uY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],Op=gt("outline","trash","Trash",cY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"M4 20l3 0",key:"svg-0"}],["path",{d:"M14 20l7 0",key:"svg-1"}],["path",{d:"M6.9 15l6.9 0",key:"svg-2"}],["path",{d:"M10.2 6.3l5.8 13.7",key:"svg-3"}],["path",{d:"M5 20l6 -16l2 0l7 16",key:"svg-4"}]],fY=gt("outline","typography","Typography",dY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]],KC=gt("outline","upload","Upload",hY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]],mY=gt("outline","user","User",pY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]],gY=gt("outline","users","Users",vY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z",key:"svg-0"}],["path",{d:"M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M7 12l4 0",key:"svg-2"}],["path",{d:"M9 10l0 4",key:"svg-3"}]],q4=gt("outline","video-plus","VideoPlus",yY);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z",key:"svg-0"}],["path",{d:"M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-1"}]],X4=gt("outline","video","Video",bY);function K4(t,e){return function(){return t.apply(e,arguments)}}const{toString:xY}=Object.prototype,{getPrototypeOf:YC}=Object,{iterator:w0,toStringTag:Y4}=Symbol,S0=(t=>e=>{const n=xY.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Xa=t=>(t=t.toLowerCase(),e=>S0(e)===t),C0=t=>e=>typeof e===t,{isArray:ff}=Array,Pd=C0("undefined");function Pp(t){return t!==null&&!Pd(t)&&t.constructor!==null&&!Pd(t.constructor)&&ho(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Q4=Xa("ArrayBuffer");function wY(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Q4(t.buffer),e}const SY=C0("string"),ho=C0("function"),J4=C0("number"),Fp=t=>t!==null&&typeof t=="object",CY=t=>t===!0||t===!1,yg=t=>{if(S0(t)!=="object")return!1;const e=YC(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Y4 in t)&&!(w0 in t)},EY=t=>{if(!Fp(t)||Pp(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},RY=Xa("Date"),_Y=Xa("File"),TY=Xa("Blob"),AY=Xa("FileList"),NY=t=>Fp(t)&&ho(t.pipe),DY=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ho(t.append)&&((e=S0(t))==="formdata"||e==="object"&&ho(t.toString)&&t.toString()==="[object FormData]"))},kY=Xa("URLSearchParams"),[IY,MY,OY,PY]=["ReadableStream","Request","Response","Headers"].map(Xa),FY=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bp(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),ff(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{if(Pp(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),i=a.length;let s;for(r=0;r<i;r++)s=a[r],e.call(null,t[s],s,t)}}function Z4(t,e){if(Pp(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}const Rl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,eP=t=>!Pd(t)&&t!==Rl;function h2(){const{caseless:t,skipUndefined:e}=eP(this)&&this||{},n={},r=(o,a)=>{const i=t&&Z4(n,a)||a;yg(n[i])&&yg(o)?n[i]=h2(n[i],o):yg(o)?n[i]=h2({},o):ff(o)?n[i]=o.slice():(!e||!Pd(o))&&(n[i]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Bp(arguments[o],r);return n}const BY=(t,e,n,{allOwnKeys:r}={})=>(Bp(e,(o,a)=>{n&&ho(o)?t[a]=K4(o,n):t[a]=o},{allOwnKeys:r}),t),LY=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),jY=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},zY=(t,e,n,r)=>{let o,a,i;const s={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),a=o.length;a-- >0;)i=o[a],(!r||r(i,t,e))&&!s[i]&&(e[i]=t[i],s[i]=!0);t=n!==!1&&YC(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},UY=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},WY=t=>{if(!t)return null;if(ff(t))return t;let e=t.length;if(!J4(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},VY=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&YC(Uint8Array)),HY=(t,e)=>{const r=(t&&t[w0]).call(t);let o;for(;(o=r.next())&&!o.done;){const a=o.value;e.call(t,a[0],a[1])}},GY=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},$Y=Xa("HTMLFormElement"),qY=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),YD=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),XY=Xa("RegExp"),tP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Bp(n,(o,a)=>{let i;(i=e(o,a,t))!==!1&&(r[a]=i||o)}),Object.defineProperties(t,r)},KY=t=>{tP(t,(e,n)=>{if(ho(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ho(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},YY=(t,e)=>{const n={},r=o=>{o.forEach(a=>{n[a]=!0})};return ff(t)?r(t):r(String(t).split(e)),n},QY=()=>{},JY=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function ZY(t){return!!(t&&ho(t.append)&&t[Y4]==="FormData"&&t[w0])}const eQ=t=>{const e=new Array(10),n=(r,o)=>{if(Fp(r)){if(e.indexOf(r)>=0)return;if(Pp(r))return r;if(!("toJSON"in r)){e[o]=r;const a=ff(r)?[]:{};return Bp(r,(i,s)=>{const u=n(i,o+1);!Pd(u)&&(a[s]=u)}),e[o]=void 0,a}}return r};return n(t,0)},tQ=Xa("AsyncFunction"),nQ=t=>t&&(Fp(t)||ho(t))&&ho(t.then)&&ho(t.catch),nP=((t,e)=>t?setImmediate:e?((n,r)=>(Rl.addEventListener("message",({source:o,data:a})=>{o===Rl&&a===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Rl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ho(Rl.postMessage)),rQ=typeof queueMicrotask<"u"?queueMicrotask.bind(Rl):typeof process<"u"&&process.nextTick||nP,oQ=t=>t!=null&&ho(t[w0]),ye={isArray:ff,isArrayBuffer:Q4,isBuffer:Pp,isFormData:DY,isArrayBufferView:wY,isString:SY,isNumber:J4,isBoolean:CY,isObject:Fp,isPlainObject:yg,isEmptyObject:EY,isReadableStream:IY,isRequest:MY,isResponse:OY,isHeaders:PY,isUndefined:Pd,isDate:RY,isFile:_Y,isBlob:TY,isRegExp:XY,isFunction:ho,isStream:NY,isURLSearchParams:kY,isTypedArray:VY,isFileList:AY,forEach:Bp,merge:h2,extend:BY,trim:FY,stripBOM:LY,inherits:jY,toFlatObject:zY,kindOf:S0,kindOfTest:Xa,endsWith:UY,toArray:WY,forEachEntry:HY,matchAll:GY,isHTMLForm:$Y,hasOwnProperty:YD,hasOwnProp:YD,reduceDescriptors:tP,freezeMethods:KY,toObjectSet:YY,toCamelCase:qY,noop:QY,toFiniteNumber:JY,findKey:Z4,global:Rl,isContextDefined:eP,isSpecCompliantForm:ZY,toJSONObject:eQ,isAsyncFn:tQ,isThenable:nQ,setImmediate:nP,asap:rQ,isIterable:oQ};function Ct(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}ye.inherits(Ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}});const rP=Ct.prototype,oP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{oP[t]={value:t}});Object.defineProperties(Ct,oP);Object.defineProperty(rP,"isAxiosError",{value:!0});Ct.from=(t,e,n,r,o,a)=>{const i=Object.create(rP);ye.toFlatObject(t,i,function(d){return d!==Error.prototype},l=>l!=="isAxiosError");const s=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return Ct.call(i,s,u,n,r,o),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",a&&Object.assign(i,a),i};const aQ=null;function p2(t){return ye.isPlainObject(t)||ye.isArray(t)}function aP(t){return ye.endsWith(t,"[]")?t.slice(0,-2):t}function QD(t,e,n){return t?t.concat(e).map(function(o,a){return o=aP(o),!n&&a?"["+o+"]":o}).join(n?".":""):e}function iQ(t){return ye.isArray(t)&&!t.some(p2)}const sQ=ye.toFlatObject(ye,{},null,function(e){return/^is[A-Z]/.test(e)});function E0(t,e,n){if(!ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!ye.isUndefined(b[y])});const r=n.metaTokens,o=n.visitor||d,a=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(e);if(!ye.isFunction(o))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(ye.isDate(g))return g.toISOString();if(ye.isBoolean(g))return g.toString();if(!u&&ye.isBlob(g))throw new Ct("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(g)||ye.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,y,b){let S=g;if(g&&!b&&typeof g=="object"){if(ye.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(ye.isArray(g)&&iQ(g)||(ye.isFileList(g)||ye.endsWith(y,"[]"))&&(S=ye.toArray(g)))return y=aP(y),S.forEach(function(E,_){!(ye.isUndefined(E)||E===null)&&e.append(i===!0?QD([y],_,a):i===null?y:y+"[]",l(E))}),!1}return p2(g)?!0:(e.append(QD(b,y,a),l(g)),!1)}const f=[],p=Object.assign(sQ,{defaultVisitor:d,convertValue:l,isVisitable:p2});function m(g,y){if(!ye.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(g),ye.forEach(g,function(S,C){(!(ye.isUndefined(S)||S===null)&&o.call(e,S,ye.isString(C)?C.trim():C,y,p))===!0&&m(S,y?y.concat(C):[C])}),f.pop()}}if(!ye.isObject(t))throw new TypeError("data must be an object");return m(t),e}function JD(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function QC(t,e){this._pairs=[],t&&E0(t,this,e)}const iP=QC.prototype;iP.append=function(e,n){this._pairs.push([e,n])};iP.toString=function(e){const n=e?function(r){return e.call(this,r,JD)}:JD;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function uQ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function sP(t,e,n){if(!e)return t;const r=n&&n.encode||uQ;ye.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(e,n):a=ye.isURLSearchParams(e)?e.toString():new QC(e,n).toString(r),a){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class ZD{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const uP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lQ=typeof URLSearchParams<"u"?URLSearchParams:QC,cQ=typeof FormData<"u"?FormData:null,dQ=typeof Blob<"u"?Blob:null,fQ={isBrowser:!0,classes:{URLSearchParams:lQ,FormData:cQ,Blob:dQ},protocols:["http","https","file","blob","url","data"]},JC=typeof window<"u"&&typeof document<"u",m2=typeof navigator=="object"&&navigator||void 0,hQ=JC&&(!m2||["ReactNative","NativeScript","NS"].indexOf(m2.product)<0),pQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mQ=JC&&window.location.href||"http://localhost",vQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:JC,hasStandardBrowserEnv:hQ,hasStandardBrowserWebWorkerEnv:pQ,navigator:m2,origin:mQ},Symbol.toStringTag,{value:"Module"})),Br={...vQ,...fQ};function gQ(t,e){return E0(t,new Br.classes.URLSearchParams,{visitor:function(n,r,o,a){return Br.isNode&&ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function yQ(t){return ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function bQ(t){const e={},n=Object.keys(t);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],e[a]=t[a];return e}function lP(t){function e(n,r,o,a){let i=n[a++];if(i==="__proto__")return!0;const s=Number.isFinite(+i),u=a>=n.length;return i=!i&&ye.isArray(o)?o.length:i,u?(ye.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!s):((!o[i]||!ye.isObject(o[i]))&&(o[i]=[]),e(n,r,o[i],a)&&ye.isArray(o[i])&&(o[i]=bQ(o[i])),!s)}if(ye.isFormData(t)&&ye.isFunction(t.entries)){const n={};return ye.forEachEntry(t,(r,o)=>{e(yQ(r),o,n,0)}),n}return null}function xQ(t,e,n){if(ye.isString(t))try{return(e||JSON.parse)(t),ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Lp={transitional:uP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,a=ye.isObject(e);if(a&&ye.isHTMLForm(e)&&(e=new FormData(e)),ye.isFormData(e))return o?JSON.stringify(lP(e)):e;if(ye.isArrayBuffer(e)||ye.isBuffer(e)||ye.isStream(e)||ye.isFile(e)||ye.isBlob(e)||ye.isReadableStream(e))return e;if(ye.isArrayBufferView(e))return e.buffer;if(ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return gQ(e,this.formSerializer).toString();if((s=ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return E0(s?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),xQ(e)):e}],transformResponse:[function(e){const n=this.transitional||Lp.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(ye.isResponse(e)||ye.isReadableStream(e))return e;if(e&&ye.isString(e)&&(r&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(s){if(i)throw s.name==="SyntaxError"?Ct.from(s,Ct.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Br.classes.FormData,Blob:Br.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],t=>{Lp.headers[t]={}});const wQ=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),SQ=t=>{const e={};let n,r,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||e[n]&&wQ[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},ek=Symbol("internals");function Ah(t){return t&&String(t).trim().toLowerCase()}function bg(t){return t===!1||t==null?t:ye.isArray(t)?t.map(bg):String(t)}function CQ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const EQ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function B1(t,e,n,r,o){if(ye.isFunction(r))return r.call(this,e,n);if(o&&(e=n),!!ye.isString(e)){if(ye.isString(r))return e.indexOf(r)!==-1;if(ye.isRegExp(r))return r.test(e)}}function RQ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function _Q(t,e){const n=ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,a,i){return this[r].call(this,e,o,a,i)},configurable:!0})})}let po=class{constructor(e){e&&this.set(e)}set(e,n,r){const o=this;function a(s,u,l){const d=Ah(u);if(!d)throw new Error("header name must be a non-empty string");const f=ye.findKey(o,d);(!f||o[f]===void 0||l===!0||l===void 0&&o[f]!==!1)&&(o[f||u]=bg(s))}const i=(s,u)=>ye.forEach(s,(l,d)=>a(l,d,u));if(ye.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(ye.isString(e)&&(e=e.trim())&&!EQ(e))i(SQ(e),n);else if(ye.isObject(e)&&ye.isIterable(e)){let s={},u,l;for(const d of e){if(!ye.isArray(d))throw TypeError("Object iterator must return a key-value pair");s[l=d[0]]=(u=s[l])?ye.isArray(u)?[...u,d[1]]:[u,d[1]]:d[1]}i(s,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=Ah(e),e){const r=ye.findKey(this,e);if(r){const o=this[r];if(!n)return o;if(n===!0)return CQ(o);if(ye.isFunction(n))return n.call(this,o,r);if(ye.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ah(e),e){const r=ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||B1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let o=!1;function a(i){if(i=Ah(i),i){const s=ye.findKey(r,i);s&&(!n||B1(r,r[s],s,n))&&(delete r[s],o=!0)}}return ye.isArray(e)?e.forEach(a):a(e),o}clear(e){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const a=n[r];(!e||B1(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const n=this,r={};return ye.forEach(this,(o,a)=>{const i=ye.findKey(r,a);if(i){n[i]=bg(o),delete n[a];return}const s=e?RQ(a):String(a).trim();s!==a&&delete n[a],n[s]=bg(o),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ye.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[ek]=this[ek]={accessors:{}}).accessors,o=this.prototype;function a(i){const s=Ah(i);r[s]||(_Q(o,i),r[s]=!0)}return ye.isArray(e)?e.forEach(a):a(e),this}};po.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(po.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ye.freezeMethods(po);function L1(t,e){const n=this||Lp,r=e||n,o=po.from(r.headers);let a=r.data;return ye.forEach(t,function(s){a=s.call(n,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function cP(t){return!!(t&&t.__CANCEL__)}function hf(t,e,n){Ct.call(this,t??"canceled",Ct.ERR_CANCELED,e,n),this.name="CanceledError"}ye.inherits(hf,Ct,{__CANCEL__:!0});function dP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ct("Request failed with status code "+n.status,[Ct.ERR_BAD_REQUEST,Ct.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function TQ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function AQ(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o=0,a=0,i;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),d=r[a];i||(i=l),n[o]=u,r[o]=l;let f=a,p=0;for(;f!==o;)p+=n[f++],f=f%t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),l-i<e)return;const m=d&&l-d;return m?Math.round(p*1e3/m):void 0}}function NQ(t,e){let n=0,r=1e3/e,o,a;const i=(l,d=Date.now())=>{n=d,o=null,a&&(clearTimeout(a),a=null),t(...l)};return[(...l)=>{const d=Date.now(),f=d-n;f>=r?i(l,d):(o=l,a||(a=setTimeout(()=>{a=null,i(o)},r-f)))},()=>o&&i(o)]}const jg=(t,e,n=3)=>{let r=0;const o=AQ(50,250);return NQ(a=>{const i=a.loaded,s=a.lengthComputable?a.total:void 0,u=i-r,l=o(u),d=i<=s;r=i;const f={loaded:i,total:s,progress:s?i/s:void 0,bytes:u,rate:l||void 0,estimated:l&&s&&d?(s-i)/l:void 0,event:a,lengthComputable:s!=null,[e?"download":"upload"]:!0};t(f)},n)},tk=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},nk=t=>(...e)=>ye.asap(()=>t(...e)),DQ=Br.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Br.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Br.origin),Br.navigator&&/(msie|trident)/i.test(Br.navigator.userAgent)):()=>!0,kQ=Br.hasStandardBrowserEnv?{write(t,e,n,r,o,a){const i=[t+"="+encodeURIComponent(e)];ye.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),ye.isString(r)&&i.push("path="+r),ye.isString(o)&&i.push("domain="+o),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function IQ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function MQ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function fP(t,e,n){let r=!IQ(e);return t&&(r||n==!1)?MQ(t,e):e}const rk=t=>t instanceof po?{...t}:t;function Ll(t,e){e=e||{};const n={};function r(l,d,f,p){return ye.isPlainObject(l)&&ye.isPlainObject(d)?ye.merge.call({caseless:p},l,d):ye.isPlainObject(d)?ye.merge({},d):ye.isArray(d)?d.slice():d}function o(l,d,f,p){if(ye.isUndefined(d)){if(!ye.isUndefined(l))return r(void 0,l,f,p)}else return r(l,d,f,p)}function a(l,d){if(!ye.isUndefined(d))return r(void 0,d)}function i(l,d){if(ye.isUndefined(d)){if(!ye.isUndefined(l))return r(void 0,l)}else return r(void 0,d)}function s(l,d,f){if(f in e)return r(l,d);if(f in t)return r(void 0,l)}const u={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(l,d,f)=>o(rk(l),rk(d),f,!0)};return ye.forEach(Object.keys({...t,...e}),function(d){const f=u[d]||o,p=f(t[d],e[d],d);ye.isUndefined(p)&&f!==s||(n[d]=p)}),n}const hP=t=>{const e=Ll({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:i,auth:s}=e;if(e.headers=i=po.from(i),e.url=sP(fP(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),s&&i.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),ye.isFormData(n)){if(Br.hasStandardBrowserEnv||Br.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(ye.isFunction(n.getHeaders)){const u=n.getHeaders(),l=["content-type","content-length"];Object.entries(u).forEach(([d,f])=>{l.includes(d.toLowerCase())&&i.set(d,f)})}}if(Br.hasStandardBrowserEnv&&(r&&ye.isFunction(r)&&(r=r(e)),r||r!==!1&&DQ(e.url))){const u=o&&a&&kQ.read(a);u&&i.set(o,u)}return e},OQ=typeof XMLHttpRequest<"u",PQ=OQ&&function(t){return new Promise(function(n,r){const o=hP(t);let a=o.data;const i=po.from(o.headers).normalize();let{responseType:s,onUploadProgress:u,onDownloadProgress:l}=o,d,f,p,m,g;function y(){m&&m(),g&&g(),o.cancelToken&&o.cancelToken.unsubscribe(d),o.signal&&o.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(o.method.toUpperCase(),o.url,!0),b.timeout=o.timeout;function S(){if(!b)return;const E=po.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),T={data:!s||s==="text"||s==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:E,config:t,request:b};dP(function(k){n(k),y()},function(k){r(k),y()},T),b=null}"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(S)},b.onabort=function(){b&&(r(new Ct("Request aborted",Ct.ECONNABORTED,t,b)),b=null)},b.onerror=function(_){const T=_&&_.message?_.message:"Network Error",D=new Ct(T,Ct.ERR_NETWORK,t,b);D.event=_||null,r(D),b=null},b.ontimeout=function(){let _=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const T=o.transitional||uP;o.timeoutErrorMessage&&(_=o.timeoutErrorMessage),r(new Ct(_,T.clarifyTimeoutError?Ct.ETIMEDOUT:Ct.ECONNABORTED,t,b)),b=null},a===void 0&&i.setContentType(null),"setRequestHeader"in b&&ye.forEach(i.toJSON(),function(_,T){b.setRequestHeader(T,_)}),ye.isUndefined(o.withCredentials)||(b.withCredentials=!!o.withCredentials),s&&s!=="json"&&(b.responseType=o.responseType),l&&([p,g]=jg(l,!0),b.addEventListener("progress",p)),u&&b.upload&&([f,m]=jg(u),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",m)),(o.cancelToken||o.signal)&&(d=E=>{b&&(r(!E||E.type?new hf(null,t,b):E),b.abort(),b=null)},o.cancelToken&&o.cancelToken.subscribe(d),o.signal&&(o.signal.aborted?d():o.signal.addEventListener("abort",d)));const C=TQ(o.url);if(C&&Br.protocols.indexOf(C)===-1){r(new Ct("Unsupported protocol "+C+":",Ct.ERR_BAD_REQUEST,t));return}b.send(a||null)})},FQ=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,o;const a=function(l){if(!o){o=!0,s();const d=l instanceof Error?l:this.reason;r.abort(d instanceof Ct?d:new hf(d instanceof Error?d.message:d))}};let i=e&&setTimeout(()=>{i=null,a(new Ct(`timeout ${e} of ms exceeded`,Ct.ETIMEDOUT))},e);const s=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(a):l.removeEventListener("abort",a)}),t=null)};t.forEach(l=>l.addEventListener("abort",a));const{signal:u}=r;return u.unsubscribe=()=>ye.asap(s),u}},BQ=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,o;for(;r<n;)o=r+e,yield t.slice(r,o),r=o},LQ=async function*(t,e){for await(const n of jQ(t))yield*BQ(n,e)},jQ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},ok=(t,e,n,r)=>{const o=LQ(t,e);let a=0,i,s=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:l,value:d}=await o.next();if(l){s(),u.close();return}let f=d.byteLength;if(n){let p=a+=f;n(p)}u.enqueue(new Uint8Array(d))}catch(l){throw s(l),l}},cancel(u){return s(u),o.return()}},{highWaterMark:2})},ak=64*1024,{isFunction:Iv}=ye,zQ=(({Request:t,Response:e})=>({Request:t,Response:e}))(ye.global),{ReadableStream:ik,TextEncoder:sk}=ye.global,uk=(t,...e)=>{try{return!!t(...e)}catch{return!1}},UQ=t=>{t=ye.merge.call({skipUndefined:!0},zQ,t);const{fetch:e,Request:n,Response:r}=t,o=e?Iv(e):typeof fetch=="function",a=Iv(n),i=Iv(r);if(!o)return!1;const s=o&&Iv(ik),u=o&&(typeof sk=="function"?(g=>y=>g.encode(y))(new sk):async g=>new Uint8Array(await new n(g).arrayBuffer())),l=a&&s&&uk(()=>{let g=!1;const y=new n(Br.origin,{body:new ik,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!y}),d=i&&s&&uk(()=>ye.isReadableStream(new r("").body)),f={stream:d&&(g=>g.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(y,b)=>{let S=y&&y[g];if(S)return S.call(y);throw new Ct(`Response type '${g}' is not supported`,Ct.ERR_NOT_SUPPORT,b)})});const p=async g=>{if(g==null)return 0;if(ye.isBlob(g))return g.size;if(ye.isSpecCompliantForm(g))return(await new n(Br.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(g)||ye.isArrayBuffer(g))return g.byteLength;if(ye.isURLSearchParams(g)&&(g=g+""),ye.isString(g))return(await u(g)).byteLength},m=async(g,y)=>{const b=ye.toFiniteNumber(g.getContentLength());return b??p(y)};return async g=>{let{url:y,method:b,data:S,signal:C,cancelToken:E,timeout:_,onDownloadProgress:T,onUploadProgress:D,responseType:k,headers:I,withCredentials:M="same-origin",fetchOptions:O}=hP(g),F=e||fetch;k=k?(k+"").toLowerCase():"text";let j=FQ([C,E&&E.toAbortSignal()],_),G=null;const W=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let q;try{if(D&&l&&b!=="get"&&b!=="head"&&(q=await m(I,S))!==0){let $=new n(y,{method:"POST",body:S,duplex:"half"}),J;if(ye.isFormData(S)&&(J=$.headers.get("content-type"))&&I.setContentType(J),$.body){const[ne,ce]=tk(q,jg(nk(D)));S=ok($.body,ak,ne,ce)}}ye.isString(M)||(M=M?"include":"omit");const P=a&&"credentials"in n.prototype,z={...O,signal:j,method:b.toUpperCase(),headers:I.normalize().toJSON(),body:S,duplex:"half",credentials:P?M:void 0};G=a&&new n(y,z);let U=await(a?F(G,O):F(y,z));const H=d&&(k==="stream"||k==="response");if(d&&(T||H&&W)){const $={};["status","statusText","headers"].forEach(be=>{$[be]=U[be]});const J=ye.toFiniteNumber(U.headers.get("content-length")),[ne,ce]=T&&tk(J,jg(nk(T),!0))||[];U=new r(ok(U.body,ak,ne,()=>{ce&&ce(),W&&W()}),$)}k=k||"text";let L=await f[ye.findKey(f,k)||"text"](U,g);return!H&&W&&W(),await new Promise(($,J)=>{dP($,J,{data:L,headers:po.from(U.headers),status:U.status,statusText:U.statusText,config:g,request:G})})}catch(P){throw W&&W(),P&&P.name==="TypeError"&&/Load failed|fetch/i.test(P.message)?Object.assign(new Ct("Network Error",Ct.ERR_NETWORK,g,G),{cause:P.cause||P}):Ct.from(P,P&&P.code,g,G)}}},WQ=new Map,pP=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:o}=e,a=[r,o,n];let i=a.length,s=i,u,l,d=WQ;for(;s--;)u=a[s],l=d.get(u),l===void 0&&d.set(u,l=s?new Map:UQ(e)),d=l;return l};pP();const v2={http:aQ,xhr:PQ,fetch:{get:pP}};ye.forEach(v2,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const lk=t=>`- ${t}`,VQ=t=>ye.isFunction(t)||t===null||t===!1,mP={getAdapter:(t,e)=>{t=ye.isArray(t)?t:[t];const{length:n}=t;let r,o;const a={};for(let i=0;i<n;i++){r=t[i];let s;if(o=r,!VQ(r)&&(o=v2[(s=String(r)).toLowerCase()],o===void 0))throw new Ct(`Unknown adapter '${s}'`);if(o&&(ye.isFunction(o)||(o=o.get(e))))break;a[s||"#"+i]=o}if(!o){const i=Object.entries(a).map(([u,l])=>`adapter ${u} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=n?i.length>1?`since :
`+i.map(lk).join(`
`):" "+lk(i[0]):"as no adapter specified";throw new Ct("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:v2};function j1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new hf(null,t)}function ck(t){return j1(t),t.headers=po.from(t.headers),t.data=L1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),mP.getAdapter(t.adapter||Lp.adapter,t)(t).then(function(r){return j1(t),r.data=L1.call(t,t.transformResponse,r),r.headers=po.from(r.headers),r},function(r){return cP(r)||(j1(t),r&&r.response&&(r.response.data=L1.call(t,t.transformResponse,r.response),r.response.headers=po.from(r.response.headers))),Promise.reject(r)})}const vP="1.12.2",R0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{R0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const dk={};R0.transitional=function(e,n,r){function o(a,i){return"[Axios v"+vP+"] Transitional option '"+a+"'"+i+(r?". "+r:"")}return(a,i,s)=>{if(e===!1)throw new Ct(o(i," has been removed"+(n?" in "+n:"")),Ct.ERR_DEPRECATED);return n&&!dk[i]&&(dk[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,i,s):!0}};R0.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function HQ(t,e,n){if(typeof t!="object")throw new Ct("options must be an object",Ct.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const a=r[o],i=e[a];if(i){const s=t[a],u=s===void 0||i(s,a,t);if(u!==!0)throw new Ct("option "+a+" must be "+u,Ct.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ct("Unknown option "+a,Ct.ERR_BAD_OPTION)}}const xg={assertOptions:HQ,validators:R0},oi=xg.validators;let kl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ZD,response:new ZD}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ll(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:a}=n;r!==void 0&&xg.assertOptions(r,{silentJSONParsing:oi.transitional(oi.boolean),forcedJSONParsing:oi.transitional(oi.boolean),clarifyTimeoutError:oi.transitional(oi.boolean)},!1),o!=null&&(ye.isFunction(o)?n.paramsSerializer={serialize:o}:xg.assertOptions(o,{encode:oi.function,serialize:oi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),xg.assertOptions(n,{baseUrl:oi.spelling("baseURL"),withXsrfToken:oi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=a&&ye.merge(a.common,a[n.method]);a&&ye.forEach(["delete","get","head","post","put","patch","common"],g=>{delete a[g]}),n.headers=po.concat(i,a);const s=[];let u=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(u=u&&y.synchronous,s.unshift(y.fulfilled,y.rejected))});const l=[];this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});let d,f=0,p;if(!u){const g=[ck.bind(this),void 0];for(g.unshift(...s),g.push(...l),p=g.length,d=Promise.resolve(n);f<p;)d=d.then(g[f++],g[f++]);return d}p=s.length;let m=n;for(;f<p;){const g=s[f++],y=s[f++];try{m=g(m)}catch(b){y.call(this,b);break}}try{d=ck.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,p=l.length;f<p;)d=d.then(l[f++],l[f++]);return d}getUri(e){e=Ll(this.defaults,e);const n=fP(e.baseURL,e.url,e.allowAbsoluteUrls);return sP(n,e.params,e.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(e){kl.prototype[e]=function(n,r){return this.request(Ll(r||{},{method:e,url:n,data:(r||{}).data}))}});ye.forEach(["post","put","patch"],function(e){function n(r){return function(a,i,s){return this.request(Ll(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}kl.prototype[e]=n(),kl.prototype[e+"Form"]=n(!0)});let GQ=class gP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const i=new Promise(s=>{r.subscribe(s),a=s}).then(o);return i.cancel=function(){r.unsubscribe(a)},i},e(function(a,i,s){r.reason||(r.reason=new hf(a,i,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new gP(function(o){e=o}),cancel:e}}};function $Q(t){return function(n){return t.apply(null,n)}}function qQ(t){return ye.isObject(t)&&t.isAxiosError===!0}const g2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(g2).forEach(([t,e])=>{g2[e]=t});function yP(t){const e=new kl(t),n=K4(kl.prototype.request,e);return ye.extend(n,kl.prototype,e,{allOwnKeys:!0}),ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return yP(Ll(t,o))},n}const ut=yP(Lp);ut.Axios=kl;ut.CanceledError=hf;ut.CancelToken=GQ;ut.isCancel=cP;ut.VERSION=vP;ut.toFormData=E0;ut.AxiosError=Ct;ut.Cancel=ut.CanceledError;ut.all=function(e){return Promise.all(e)};ut.spread=$Q;ut.isAxiosError=qQ;ut.mergeConfig=Ll;ut.AxiosHeaders=po;ut.formToJSON=t=>lP(ye.isHTMLForm(t)?new FormData(t):t);ut.getAdapter=mP.getAdapter;ut.HttpStatusCode=g2;ut.default=ut;const{Axios:DCe,AxiosError:kCe,CanceledError:ICe,isCancel:MCe,CancelToken:OCe,VERSION:PCe,all:FCe,Cancel:BCe,isAxiosError:LCe,spread:jCe,toFormData:zCe,AxiosHeaders:UCe,HttpStatusCode:WCe,formToJSON:VCe,getAdapter:HCe,mergeConfig:GCe}=ut;/*! js-cookie v3.0.5 | MIT */function Mv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var XQ={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function y2(t,e){function n(o,a,i){if(!(typeof document>"u")){i=Mv({},e,i),typeof i.expires=="number"&&(i.expires=new Date(Date.now()+i.expires*864e5)),i.expires&&(i.expires=i.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,i[u]!==!0&&(s+="="+i[u].split(";")[0]));return document.cookie=o+"="+t.write(a,o)+s}}function r(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var a=document.cookie?document.cookie.split("; "):[],i={},s=0;s<a.length;s++){var u=a[s].split("="),l=u.slice(1).join("=");try{var d=decodeURIComponent(u[0]);if(i[d]=t.read(l,d),o===d)break}catch{}}return o?i[o]:i}}return Object.create({set:n,get:r,remove:function(o,a){n(o,"",Mv({},a,{expires:-1}))},withAttributes:function(o){return y2(this.converter,Mv({},this.attributes,o))},withConverter:function(o){return y2(Mv({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var z1=y2(XQ,{path:"/"});const bP=A.createContext(null);function KQ({children:t}){const[e,n]=A.useState(z1.get("isLoggedIn")==="true"),r=Sa();A.useEffect(()=>{const s=z1.get("isLoggedIn")==="true";s!==e&&n(s)},[r.pathname]);const i={isLoggedIn:e,login:()=>{n(!0)},logout:async()=>{try{await ut.post("/api/auth/logout",{},{withCredentials:!0})}catch(s){console.error("Logout API call failed, proceeding with frontend logout.",s)}finally{z1.remove("isLoggedIn",{path:"/"}),n(!1)}}};return w.jsx(bP.Provider,{value:i,children:t})}function xP(){return A.useContext(bP)}const YQ="_header_skw72_2",QQ="_link_skw72_9",JQ="_subLink_skw72_34",ZQ="_dropdownFooter_skw72_44",aa={header:YQ,link:QQ,subLink:JQ,dropdownFooter:ZQ},eJ=[{icon:wK,title:"Course Creation",description:"Build learning and assignment JotForms with drag-and-drop ease"},{icon:CK,title:"Group Management",description:"Create groups and assign users efficiently"},{icon:ip,title:"Course Assignment",description:"Map content to courses and assign to groups"},{icon:IK,title:"User Access",description:"Secure login and personalized course views"},{icon:pK,title:"Analytics",description:"View detailed analytics by group and course"},{icon:JK,title:"Submissions",description:"Track assignment submissions and scores"}];function tJ(){const[t,{toggle:e,close:n}]=qN(!1),[r,{toggle:o}]=qN(!1),a=Vr(),{colorScheme:i}=OO(),s=i==="dark",u=Ga(),{isLoggedIn:l,logout:d}=xP(),f=async()=>{await d(),u("/login")},p=eJ.map(m=>w.jsx(Ci,{className:aa.subLink,children:w.jsxs(Ge,{wrap:"nowrap",align:"flex-start",children:[w.jsx(HC,{size:34,variant:"default",radius:"md",color:s?"dark.4":"gray",children:w.jsx(m.icon,{size:22,color:s?a.colors.blue[3]:a.colors.blue[6]})}),w.jsxs("div",{children:[w.jsx(we,{size:"sm",fw:500,c:s?"white":"black",children:m.title}),w.jsx(we,{size:"xs",c:s?"gray.4":"dimmed",children:m.description})]})]})},m.title));return w.jsxs(le,{children:[w.jsx("header",{className:aa.header,style:{backgroundColor:s?a.colors.dark[7]:"white"},children:w.jsxs(Ge,{justify:"space-between",h:"100%",children:[w.jsx("h2",{size:30,children:"LMS"}),w.jsxs(Ge,{h:"100%",gap:0,visibleFrom:"sm",children:[w.jsx(Ao,{to:"/",className:aa.link,children:"Home"}),w.jsxs(Cu,{width:600,position:"bottom",radius:"md",shadow:"md",withinPortal:!0,children:[w.jsx(Cu.Target,{children:w.jsx("a",{href:"#",className:aa.link,children:w.jsxs(No,{inline:!0,children:[w.jsx(le,{component:"span",mr:5,children:"Features"}),w.jsx(XD,{size:16,color:s?a.colors.blue[3]:a.colors.blue[6]})]})})}),w.jsxs(Cu.Dropdown,{style:{overflow:"hidden",backgroundColor:s?a.colors.dark[6]:"white"},children:[w.jsxs(Ge,{justify:"space-between",px:"md",children:[w.jsx(we,{fw:500,c:s?"white":"black",children:"Features"}),w.jsx(Zy,{href:"#",fz:"xs",children:"View all"})]}),w.jsx(zo,{my:"sm"}),w.jsx(zu,{cols:2,spacing:0,children:p}),w.jsx("div",{className:aa.dropdownFooter,style:{backgroundColor:s?a.colors.dark[7]:a.colors.gray[0]},children:w.jsxs(Ge,{justify:"space-between",children:[w.jsxs("div",{children:[w.jsx(we,{fw:500,fz:"sm",children:"Get started"}),w.jsx(we,{size:"xs",c:"dimmed",children:"Start building your pharma LMS today"})]}),w.jsx(He,{variant:"default",children:"Get started"})]})})]})]}),w.jsx(Ao,{to:"/lmsdashboard",className:aa.link,children:"LMS Dashboard"}),w.jsx(Ao,{to:"/subject",className:aa.link,children:"Subjects"}),w.jsx(Ao,{to:"/analyticdashboard",className:aa.link,children:"Analytics"})]}),w.jsx(Ge,{visibleFrom:"sm",children:l?w.jsx(He,{variant:"default",color:"red",onClick:f,children:"Logout"}):w.jsx(Ao,{to:"/login",children:w.jsx(He,{variant:"default",children:"Log in"})})}),w.jsx(wC,{opened:t,onClick:e,hiddenFrom:"sm",color:s?"white":"black"})]})}),w.jsx(qa,{opened:t,onClose:n,size:"100%",padding:"md",title:"Menu",hiddenFrom:"sm",zIndex:1e6,overlayColor:s?a.colors.dark[9]:a.colors.gray[2],children:w.jsxs(Xo,{h:"calc(100vh - var(--mantine-spacing-md))",mx:"-md",children:[w.jsx(zo,{my:"sm"}),w.jsx(Ao,{to:"/",className:aa.link,onClick:n,children:"Home"}),w.jsx(Ci,{className:aa.link,onClick:o,children:w.jsxs(No,{inline:!0,children:[w.jsx(le,{component:"span",mr:5,children:"Features"}),w.jsx(XD,{size:16,color:s?a.colors.blue[3]:a.colors.blue[6]})]})}),w.jsx(zO,{in:r,children:p}),w.jsx(Ao,{to:"/course",className:aa.link,onClick:n,children:"Courses"}),w.jsx(Ao,{to:"/analyticdashboard",className:aa.link,onClick:n,children:"Analytics"}),w.jsx(zo,{my:"sm"}),w.jsx(Ge,{justify:"center",grow:!0,pb:"xl",px:"md",children:l?w.jsx(He,{variant:"default",color:"red",onClick:()=>{f(),n()},children:"Logout"}):w.jsxs(w.Fragment,{children:[w.jsx(Ao,{to:"/login",onClick:n,children:w.jsx(He,{variant:"default",children:"Log in"})}),w.jsx(Ao,{to:"/signup",onClick:n,children:w.jsx(He,{children:"Sign up"})})]})})]})})]})}const nJ="_footer_rlo55_2",rJ="_logo_rlo55_9",oJ="_description_rlo55_23",aJ="_inner_rlo55_36",iJ="_groups_rlo55_50",sJ="_wrapper_rlo55_63",uJ="_link_rlo55_67",lJ="_title_rlo55_79",cJ="_afterFooter_rlo55_87",dJ="_social_rlo55_110",ai={footer:nJ,logo:rJ,description:oJ,inner:aJ,groups:iJ,wrapper:sJ,link:uJ,title:lJ,afterFooter:cJ,social:dJ},fJ=[{title:"About",links:[{label:"Features",link:"#"},{label:"Pricing",link:"#"},{label:"Support",link:"#"},{label:"Forums",link:"#"}]},{title:"Project",links:[{label:"Contribute",link:"#"},{label:"Media assets",link:"#"},{label:"Changelog",link:"#"},{label:"Releases",link:"#"}]},{title:"Community",links:[{label:"Join Discord",link:"#"},{label:"Follow on Twitter",link:"#"},{label:"Email newsletter",link:"#"},{label:"GitHub discussions",link:"#"}]}];function hJ(){const t=fJ.map(e=>{const n=e.links.map((r,o)=>w.jsx(we,{className:ai.link,component:"a",href:r.link,onClick:a=>a.preventDefault(),children:r.label},o));return w.jsxs("div",{className:ai.wrapper,children:[w.jsx(we,{className:ai.title,children:e.title}),n]},e.title)});return w.jsxs("footer",{className:ai.footer,children:[w.jsxs(cn,{className:ai.inner,children:[w.jsxs("div",{className:ai.logo,children:[w.jsx("h2",{children:"LMS"}),w.jsx(we,{size:"xs",c:"dimmed",className:ai.description,children:"Build fully functional accessible web applications faster than ever"})]}),w.jsx("div",{className:ai.groups,children:t})]}),w.jsxs(cn,{className:ai.afterFooter,children:[w.jsx(we,{c:"dimmed",size:"sm",children:"© 2020 mantine.dev. All rights reserved."}),w.jsxs(Ge,{gap:0,className:ai.social,justify:"flex-end",wrap:"nowrap",children:[w.jsx(Nn,{size:"lg",color:"gray",variant:"subtle",children:w.jsx(iK,{size:18,stroke:1.5})}),w.jsx(Nn,{size:"lg",color:"gray",variant:"subtle",children:w.jsx(uK,{size:18,stroke:1.5})}),w.jsx(Nn,{size:"lg",color:"gray",variant:"subtle",children:w.jsx(oK,{size:18,stroke:1.5})})]})]})]})}function pJ(t){if(!/^[0-9a-zA-Z-]+$/.test(t))throw new Error(`[@mantine/use-form] Form name "${t}" is invalid, it should contain only letters, numbers and dashes`)}const mJ=typeof window<"u"?A.useLayoutEffect:A.useEffect;function Sr(t,e){mJ(()=>{if(t)return window.addEventListener(t,e),()=>window.removeEventListener(t,e)},[t])}function vJ(t,e){t&&pJ(t),Sr(`mantine-form:${t}:set-field-value`,n=>e.setFieldValue(n.detail.path,n.detail.value)),Sr(`mantine-form:${t}:set-values`,n=>e.setValues(n.detail)),Sr(`mantine-form:${t}:set-initial-values`,n=>e.setInitialValues(n.detail)),Sr(`mantine-form:${t}:set-errors`,n=>e.setErrors(n.detail)),Sr(`mantine-form:${t}:set-field-error`,n=>e.setFieldError(n.detail.path,n.detail.error)),Sr(`mantine-form:${t}:clear-field-error`,n=>e.clearFieldError(n.detail)),Sr(`mantine-form:${t}:clear-errors`,e.clearErrors),Sr(`mantine-form:${t}:reset`,e.reset),Sr(`mantine-form:${t}:validate`,e.validate),Sr(`mantine-form:${t}:validate-field`,n=>e.validateField(n.detail)),Sr(`mantine-form:${t}:reorder-list-item`,n=>e.reorderListItem(n.detail.path,n.detail.payload)),Sr(`mantine-form:${t}:remove-list-item`,n=>e.removeListItem(n.detail.path,n.detail.index)),Sr(`mantine-form:${t}:insert-list-item`,n=>e.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Sr(`mantine-form:${t}:set-dirty`,n=>e.setDirty(n.detail)),Sr(`mantine-form:${t}:set-touched`,n=>e.setTouched(n.detail)),Sr(`mantine-form:${t}:reset-dirty`,n=>e.resetDirty(n.detail)),Sr(`mantine-form:${t}:reset-touched`,e.resetTouched)}function gJ(t){return e=>{if(!e)t(e);else if(typeof e=="function")t(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:n}=e;n instanceof HTMLInputElement?n.type==="checkbox"?t(n.checked):t(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&t(n.value)}else t(e)}}function b2(t){return t===null||typeof t!="object"?{}:Object.keys(t).reduce((e,n)=>{const r=t[n];return r!=null&&r!==!1&&(e[n]=r),e},{})}function yJ(t){const[e,n]=A.useState(b2(t)),r=A.useRef(e),o=A.useCallback(u=>{n(l=>{const d=b2(typeof u=="function"?u(l):u);return r.current=d,d})},[]),a=A.useCallback(()=>o({}),[]),i=A.useCallback(u=>{r.current[u]!==void 0&&o(l=>{const d={...l};return delete d[u],d})},[e]),s=A.useCallback((u,l)=>{l==null||l===!1?i(u):r.current[u]!==l&&o(d=>({...d,[u]:l}))},[e]);return{errorsState:e,setErrors:o,clearErrors:a,setFieldError:s,clearFieldError:i}}function x2(t,e){if(e===null||typeof e!="object")return{};const n={...e};return Object.keys(e).forEach(r=>{r.includes(`${String(t)}.`)&&delete n[r]}),n}function fk(t,e){const n=t.substring(e.length+1).split(".")[0];return parseInt(n,10)}function hk(t,e,n,r){if(e===void 0)return n;const o=`${String(t)}`;let a=n;r===-1&&(a=x2(`${o}.${e}`,a));const i={...a},s=new Set;return Object.entries(a).filter(([u])=>{if(!u.startsWith(`${o}.`))return!1;const l=fk(u,o);return Number.isNaN(l)?!1:l>=e}).forEach(([u,l])=>{const d=fk(u,o),f=u.replace(`${o}.${d}`,`${o}.${d+r}`);i[f]=l,s.add(f),s.has(u)||delete i[u]}),i}function bJ(t,{from:e,to:n},r){const o=`${t}.${e}`,a=`${t}.${n}`,i={...r},s=new Set;return Object.keys(r).forEach(u=>{if(s.has(u))return;let l,d;if(u.startsWith(o)?(l=u,d=u.replace(o,a)):u.startsWith(a)&&(l=u.replace(a,o),d=u),l&&d){const f=i[l],p=i[d];p===void 0?delete i[l]:i[l]=p,f===void 0?delete i[d]:i[d]=f,s.add(l),s.add(d)}}),i}function pk(t,e,n){typeof n.value=="object"&&(n.value=dd(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function dd(t){if(typeof t!="object")return t;var e=0,n,r,o,a=Object.prototype.toString.call(t);if(a==="[object Object]"?o=Object.create(t.__proto__||null):a==="[object Array]"?o=Array(t.length):a==="[object Set]"?(o=new Set,t.forEach(function(i){o.add(dd(i))})):a==="[object Map]"?(o=new Map,t.forEach(function(i,s){o.set(dd(s),dd(i))})):a==="[object Date]"?o=new Date(+t):a==="[object RegExp]"?o=new RegExp(t.source,t.flags):a==="[object DataView]"?o=new t.constructor(dd(t.buffer)):a==="[object ArrayBuffer]"?o=t.slice(0):a.slice(-6)==="Array]"&&(o=new t.constructor(t)),o){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)pk(o,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(o,n=r[e])&&o[n]===t[n]||pk(o,n,Object.getOwnPropertyDescriptor(t,n))}return o||t}function wP(t){return typeof t!="string"?[]:t.split(".")}function Qn(t,e){const n=wP(t);if(n.length===0||typeof e!="object"||e===null)return;let r=e[n[0]];for(let o=1;o<n.length&&r!=null;o+=1)r=r[n[o]];return r}function jp(t,e,n){const r=wP(t);if(r.length===0)return n;const o=dd(n);if(r.length===1)return o[r[0]]=e,o;let a=o[r[0]];for(let i=1;i<r.length-1;i+=1){if(a===void 0)return o;a=a[r[i]]}return a[r[r.length-1]]=e,o}function xJ(t,{from:e,to:n},r){const o=Qn(t,r);if(!Array.isArray(o))return r;const a=[...o],i=o[e];return a.splice(e,1),a.splice(n,0,i),jp(t,a,r)}function wJ(t,e,n,r){const o=Qn(t,r);if(!Array.isArray(o))return r;const a=[...o];return a.splice(typeof n=="number"?n:a.length,0,e),jp(t,a,r)}function SJ(t,e,n){const r=Qn(t,n);return Array.isArray(r)?jp(t,r.filter((o,a)=>a!==e),n):n}function CJ(t,e,n,r){const o=Qn(t,r);if(!Array.isArray(o)||o.length<=n)return r;const a=[...o];return a[n]=e,jp(t,a,r)}function EJ({$values:t,$errors:e,$status:n}){const r=A.useCallback((s,u)=>{n.clearFieldDirty(s),e.setErrors(l=>bJ(s,u,l)),t.setValues({values:xJ(s,u,t.refValues.current),updateState:!0})},[]),o=A.useCallback((s,u)=>{n.clearFieldDirty(s),e.setErrors(l=>hk(s,u,l,-1)),t.setValues({values:SJ(s,u,t.refValues.current),updateState:!0})},[]),a=A.useCallback((s,u,l)=>{n.clearFieldDirty(s),e.setErrors(d=>hk(s,l,d,1)),t.setValues({values:wJ(s,u,l,t.refValues.current),updateState:!0})},[]),i=A.useCallback((s,u,l)=>{n.clearFieldDirty(s),t.setValues({values:CJ(s,l,u,t.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:o,insertListItem:a,replaceListItem:i}}var U1,mk;function RJ(){return mk||(mk=1,U1=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;o--!==0;){var i=a[o];if(!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n}),U1}var _J=RJ();const Ov=Qd(_J);function Nh(t,e){const n=Object.keys(t);if(typeof e=="string"){const r=n.filter(o=>o.startsWith(`${e}.`));return t[e]||r.some(o=>t[o])||!1}return n.some(r=>t[r])}function TJ({initialDirty:t,initialTouched:e,mode:n,$values:r}){const[o,a]=A.useState(e),[i,s]=A.useState(t),u=A.useRef(e),l=A.useRef(t),d=A.useCallback(D=>{const k=typeof D=="function"?D(u.current):D;u.current=k,n==="controlled"&&a(k)},[]),f=A.useCallback((D,k=!1)=>{const I=typeof D=="function"?D(l.current):D;l.current=I,(n==="controlled"||k)&&s(I)},[]),p=A.useCallback(()=>d({}),[]),m=A.useCallback(D=>{const k=D?{...r.refValues.current,...D}:r.refValues.current;r.setValuesSnapshot(k),f({})},[]),g=A.useCallback((D,k)=>{d(I=>Nh(I,D)===k?I:{...I,[D]:k})},[]),y=A.useCallback((D,k,I)=>{f(M=>Nh(M,D)===k?M:{...M,[D]:k},I)},[]),b=A.useCallback((D,k)=>{const I=Nh(l.current,D),M=!Ov(Qn(D,r.getValuesSnapshot()),k),O=x2(D,l.current);O[D]=M,f(O,I!==M)},[]),S=A.useCallback(D=>Nh(u.current,D),[]),C=A.useCallback(D=>f(k=>{if(typeof D!="string")return k;const I=x2(D,k);return delete I[D],Ov(I,k)?k:I}),[]),E=A.useCallback(D=>{if(D){const I=Qn(D,l.current);if(typeof I=="boolean")return I;const M=Qn(D,r.refValues.current),O=Qn(D,r.valuesSnapshot.current);return!Ov(M,O)}return Object.keys(l.current).length>0?Nh(l.current):!Ov(r.refValues.current,r.valuesSnapshot.current)},[]),_=A.useCallback(()=>l.current,[]),T=A.useCallback(()=>u.current,[]);return{touchedState:o,dirtyState:i,touchedRef:u,dirtyRef:l,setTouched:d,setDirty:f,resetDirty:m,resetTouched:p,isTouched:S,setFieldTouched:g,setFieldDirty:y,setTouchedState:a,setDirtyState:s,clearFieldDirty:C,isDirty:E,getDirty:_,getTouched:T,setCalculatedFieldDirty:b}}function AJ({initialValues:t,onValuesChange:e,mode:n}){const r=A.useRef(!1),[o,a]=A.useState(t||{}),i=A.useRef(o),s=A.useRef(o),u=A.useCallback(({values:b,subscribers:S,updateState:C=!0,mergeWithPreviousValues:E=!0})=>{const _=i.current,T=b instanceof Function?b(i.current):b,D=E?{..._,...T}:T;i.current=D,C&&(a(D),n==="uncontrolled"&&(i.current=D)),e?.(D,_),S?.filter(Boolean).forEach(k=>k({updatedValues:D,previousValues:_}))},[e]),l=A.useCallback(b=>{const S=Qn(b.path,i.current),C=b.value instanceof Function?b.value(S):b.value;if(S!==C){const E=i.current,_=jp(b.path,C,i.current);u({values:_,updateState:b.updateState}),b.subscribers?.filter(Boolean).forEach(T=>T({path:b.path,updatedValues:_,previousValues:E}))}},[u]),d=A.useCallback(b=>{s.current=b},[]),f=A.useCallback((b,S)=>{r.current||(r.current=!0,u({values:b,updateState:n==="controlled"}),d(b),S())},[u]),p=A.useCallback(()=>{u({values:s.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),m=A.useCallback(()=>i.current,[]),g=A.useCallback(()=>s.current,[]),y=A.useCallback((b,S)=>{const C=Qn(b,s.current);typeof C>"u"||l({path:b,value:C,updateState:n==="controlled",subscribers:S})},[l,n]);return{initialized:r,stateValues:o,refValues:i,valuesSnapshot:s,setValues:u,setFieldValue:l,resetValues:p,setValuesSnapshot:d,initialize:f,getValues:m,getValuesSnapshot:g,resetField:y}}function NJ({$status:t,cascadeUpdates:e}){const n=A.useRef({}),r=A.useCallback((a,i)=>{A.useEffect(()=>(n.current[a]=n.current[a]||[],n.current[a].push(i),()=>{n.current[a]=n.current[a].filter(s=>s!==i)}),[i])},[]),o=A.useCallback(a=>{const i=n.current[a]?.map(s=>u=>s({previousValue:Qn(a,u.previousValues),value:Qn(a,u.updatedValues),touched:t.isTouched(a),dirty:t.isDirty(a)}))??[];if(e)for(const s in n.current)(s.startsWith(`${a}.`)||a.startsWith(`${s}.`))&&i.push(...n.current[s].map(u=>l=>u({previousValue:Qn(s,l.previousValues),value:Qn(s,l.updatedValues),touched:t.isTouched(s),dirty:t.isDirty(s)})));return i},[]);return{subscribers:n,watch:r,getFieldSubscribers:o}}function vk(t,e){return t?`${t}-${e.toString()}`:e.toString()}const Pv=Symbol("root-rule");function gk(t){const e=b2(t);return{hasErrors:Object.keys(e).length>0,errors:e}}function w2(t,e,n="",r={}){return typeof t!="object"||t===null?r:Object.keys(t).reduce((o,a)=>{const i=t[a],s=`${n===""?"":`${n}.`}${a}`,u=Qn(s,e);let l=!1;return typeof i=="function"&&(o[s]=i(u,e,s)),typeof i=="object"&&Array.isArray(u)&&(l=!0,u.forEach((d,f)=>w2(i,e,`${s}.${f}`,o)),Pv in i&&(o[s]=i[Pv](u,e,s))),typeof i=="object"&&typeof u=="object"&&u!==null&&(l||w2(i,e,s,o),Pv in i&&(o[s]=i[Pv](u,e,s))),o},r)}function S2(t,e){return gk(typeof t=="function"?t(e):w2(t,e))}function Fv(t,e,n){if(typeof t!="string")return{hasError:!1,error:null};const r=S2(e,n),o=Object.keys(r.errors).find(a=>t.split(".").every((i,s)=>i===a.split(".")[s]));return{hasError:!!o,error:o?r.errors[o]:null}}const DJ="__MANTINE_FORM_INDEX__";function yk(t,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(t.replace(/[.][0-9]+/g,`.${DJ}`)):!1:!1}function sp({name:t,mode:e="controlled",initialValues:n,initialErrors:r={},initialDirty:o={},initialTouched:a={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:d=b=>b,enhanceGetInputProps:f,validate:p,onSubmitPreventDefault:m="always",touchTrigger:g="change",cascadeUpdates:y=!1}={}){const b=yJ(r),S=AJ({initialValues:n,onValuesChange:l,mode:e}),C=TJ({initialDirty:o,initialTouched:a,$values:S,mode:e}),E=EJ({$values:S,$errors:b,$status:C}),_=NJ({$status:C,cascadeUpdates:y}),[T,D]=A.useState(0),[k,I]=A.useState({}),[M,O]=A.useState(!1),F=A.useCallback(()=>{S.resetValues(),b.clearErrors(),C.resetDirty(),C.resetTouched(),e==="uncontrolled"&&D(ie=>ie+1)},[]),j=A.useCallback(ie=>{i&&b.clearErrors(),e==="uncontrolled"&&D(fe=>fe+1),Object.keys(_.subscribers.current).forEach(fe=>{const ge=Qn(fe,S.refValues.current),Oe=Qn(fe,ie);ge!==Oe&&_.getFieldSubscribers(fe).forEach(je=>je({previousValues:ie,updatedValues:S.refValues.current}))})},[i]),G=A.useCallback(ie=>{const fe=S.refValues.current;S.initialize(ie,()=>e==="uncontrolled"&&D(ge=>ge+1)),j(fe)},[j]),W=A.useCallback((ie,fe,ge)=>{const Oe=yk(ie,s),je=fe instanceof Function?fe(Qn(ie,S.refValues.current)):fe;C.setCalculatedFieldDirty(ie,je),g==="change"&&C.setFieldTouched(ie,!0),!Oe&&i&&b.clearFieldError(ie),S.setFieldValue({path:ie,value:fe,updateState:e==="controlled",subscribers:[..._.getFieldSubscribers(ie),Oe?Le=>{const ke=Fv(ie,p,Le.updatedValues);ke.hasError?b.setFieldError(ie,ke.error):b.clearFieldError(ie)}:null,ge?.forceUpdate!==!1&&e!=="controlled"?()=>I(Le=>({...Le,[ie]:(Le[ie]||0)+1})):null]})},[l,p]),q=A.useCallback(ie=>{const fe=S.refValues.current;S.setValues({values:ie,updateState:e==="controlled"}),j(fe)},[l,j]),P=A.useCallback(()=>{const ie=S2(p,S.refValues.current);return b.setErrors(ie.errors),ie},[p]),z=A.useCallback(ie=>{const fe=Fv(ie,p,S.refValues.current);return fe.hasError?b.setFieldError(ie,fe.error):b.clearFieldError(ie),fe},[p]),U=(ie,{type:fe="input",withError:ge=!0,withFocus:Oe=!0,...je}={})=>{const ke={onChange:gJ(qe=>W(ie,qe,{forceUpdate:!1})),"data-path":vk(t,ie)};return ge&&(ke.error=b.errorsState[ie]),fe==="checkbox"?ke[e==="controlled"?"checked":"defaultChecked"]=Qn(ie,S.refValues.current):ke[e==="controlled"?"value":"defaultValue"]=Qn(ie,S.refValues.current),Oe&&(ke.onFocus=()=>C.setFieldTouched(ie,!0),ke.onBlur=()=>{if(yk(ie,u)){const qe=Fv(ie,p,S.refValues.current);qe.hasError?b.setFieldError(ie,qe.error):b.clearFieldError(ie)}}),Object.assign(ke,f?.({inputProps:ke,field:ie,options:{type:fe,withError:ge,withFocus:Oe,...je},form:se}))},H=(ie,fe)=>ge=>{m==="always"&&ge?.preventDefault();const Oe=P();if(Oe.hasErrors)m==="validation-failed"&&ge?.preventDefault(),fe?.(Oe.errors,S.refValues.current,ge);else{const je=ie?.(d(S.refValues.current),ge);je instanceof Promise&&(O(!0),je.finally(()=>O(!1)))}},L=ie=>d(ie||S.refValues.current),$=A.useCallback(ie=>{ie.preventDefault(),F()},[]),J=A.useCallback(ie=>ie?!Fv(ie,p,S.refValues.current).hasError:!S2(p,S.refValues.current).hasErrors,[p]),ne=ie=>`${T}-${String(ie)}-${k[String(ie)]||0}`,ce=A.useCallback(ie=>document.querySelector(`[data-path="${vk(t,ie)}"]`),[]),be=A.useCallback(ie=>{S.resetField(ie,[e!=="controlled"?()=>I(fe=>({...fe,[ie]:(fe[ie]||0)+1})):null])},[S.resetField,e,I]),se={watch:_.watch,initialized:S.initialized.current,values:e==="uncontrolled"?S.refValues.current:S.stateValues,getValues:S.getValues,getInitialValues:S.getValuesSnapshot,setInitialValues:S.setValuesSnapshot,resetField:be,initialize:G,setValues:q,setFieldValue:W,submitting:M,setSubmitting:O,errors:b.errorsState,setErrors:b.setErrors,setFieldError:b.setFieldError,clearFieldError:b.clearFieldError,clearErrors:b.clearErrors,resetDirty:C.resetDirty,setTouched:C.setTouched,setDirty:C.setDirty,isTouched:C.isTouched,resetTouched:C.resetTouched,isDirty:C.isDirty,getTouched:C.getTouched,getDirty:C.getDirty,reorderListItem:E.reorderListItem,insertListItem:E.insertListItem,removeListItem:E.removeListItem,replaceListItem:E.replaceListItem,reset:F,validate:P,validateField:z,getInputProps:U,onSubmit:H,onReset:$,isValid:J,getTransformedValues:L,key:ne,getInputNode:ce};return vJ(t,se),se}function kJ(t){const[e,n]=uH(["login","register"]),[r,o]=A.useState(!1),[a,i]=A.useState(null),s=Ga(),{login:u}=xP(),l=sp({initialValues:{username:"",email:"",password:"",terms:!0},validate:{username:f=>f.length>0?null:"Username is required",email:f=>e==="register"&&/^\S+@\S+$/.test(f)?null:e==="register"?"Invalid email":null,password:f=>f.length>=6?null:"Password must be at least 6 characters"}}),d=async f=>{o(!0),i(null);const p=`/api/auth/${e}`,m=e==="register"?{username:f.username,email:f.email,password:f.password}:{username:f.username,password:f.password};try{await ut.post(p,m,{withCredentials:!0}),u(),s("/lmsdashboard")}catch(g){console.error(`${e} failed:`,g),g.response&&g.response.data&&typeof g.response.data=="string"?i(g.response.data):i(`An unexpected error occurred during ${e}. Please try again.`)}finally{o(!1)}};return w.jsx(Ra,{radius:"md",p:"lg",withBorder:!0,...t,style:{maxWidth:"400px",margin:"auto",marginTop:"50px"},children:w.jsxs("form",{onSubmit:l.onSubmit(d),children:[w.jsx(Po,{}),w.jsxs(Ge,{justify:"space-between",mt:"xl",children:[w.jsx(Zy,{component:"button",type:"button",c:"dimmed",onClick:()=>{n(),i(null)},size:"xs",children:e==="register"?"Already have an account? Login":"Don't have an account? Register"}),w.jsx(He,{type:"submit",radius:"xl",loading:r,children:WV(e)})]})]})})}function Bv({size:t=185,radius:e=2.5,...n}){return w.jsxs("svg",{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 185 185",width:t,height:t,...n,children:[w.jsx("rect",{width:"5",height:"5",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"20",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"40",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"60",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"80",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"100",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"120",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"140",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"160",rx:e}),w.jsx("rect",{width:"5",height:"5",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"60",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"120",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"20",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"80",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"140",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"40",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"100",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"160",y:"180",rx:e}),w.jsx("rect",{width:"5",height:"5",x:"180",y:"180",rx:e})]})}const IJ="_wrapper_17mtv_2",MJ="_inner_17mtv_18",OJ="_dots_17mtv_23",PJ="_title_17mtv_39",FJ="_highlight_17mtv_56",BJ="_description_17mtv_60",LJ="_controls_17mtv_71",jJ="_control_17mtv_71",ia={wrapper:IJ,inner:MJ,dots:OJ,title:PJ,highlight:FJ,description:BJ,controls:LJ,control:jJ};function zJ(){return w.jsxs(cn,{className:ia.wrapper,size:1400,children:[w.jsx(Bv,{className:ia.dots,style:{left:0,top:0}}),w.jsx(Bv,{className:ia.dots,style:{left:60,top:0}}),w.jsx(Bv,{className:ia.dots,style:{left:0,top:140}}),w.jsx(Bv,{className:ia.dots,style:{right:0,top:60}}),w.jsxs("div",{className:ia.inner,children:[w.jsxs(jt,{className:ia.title,children:["AI-Automated"," ",w.jsx(we,{component:"span",className:ia.highlight,inherit:!0,children:"Learning Management"})," ","System"]}),w.jsx(cn,{p:0,size:400,children:w.jsx(we,{size:"lg",c:"dimmed",className:ia.description,children:"Streamline training with mapping, Jotforms, groups, and analytics for compliance and performance."})}),w.jsxs("div",{className:ia.controls,children:[w.jsx(He,{className:ia.control,size:"lg",variant:"default",color:"gray",children:"Explore"}),w.jsx(He,{className:ia.control,size:"lg",children:"Start"})]})]})]})}const UJ="_title_uzu5r_2",WJ="_description_uzu5r_13",VJ="_card_uzu5r_29",Lv={title:UJ,description:WJ,card:VJ},HJ=[{title:"Seamless Course Management",description:"Admins can create groups, assign users, build learning and assignment forms, map them to courses, and assign to groups effortlessly.",icon:FK},{title:"User-Centric Learning Experience",description:"Users access assigned courses via navbar, view interactive JotForms, mindmaps, embedded PDFs, and submit assignments with ease.",icon:mY},{title:"Advanced Analytics",description:"Track completion rates, submission counts, scores, and timestamps for learning and assignments per course and group.",icon:RK}];function GJ(){const t=Vr(),{colorScheme:e}=OO(),n=e==="dark",r=HJ.map(o=>w.jsxs(Yr,{shadow:"md",radius:"md",className:Lv.card,padding:"xl",bg:n?"dark.6":"white",children:[w.jsx(o.icon,{size:50,stroke:1.5,color:n?t.colors.blue[3]:t.colors.blue[6]}),w.jsx(we,{fz:"lg",fw:500,className:Lv.cardTitle,mt:"md",c:n?"white":"black",children:o.title}),w.jsx(we,{fz:"sm",c:n?"gray.4":"dimmed",mt:"sm",children:o.description})]},o.title));return w.jsxs(cn,{size:"lg",py:"xl",children:[w.jsx(jt,{order:2,className:Lv.title,ta:"center",mt:"sm",c:n?"white":"black",children:"Key Features of PULSE LMS"}),w.jsx(we,{c:n?"gray.4":"dimmed",className:Lv.description,ta:"center",mt:"md",children:"Discover powerful features for admin management, user engagement, and insightful analytics in your pharmaceutical training platform."}),w.jsx(zu,{cols:{base:1,md:3},spacing:"xl",mt:50,children:r})]})}const $J=()=>w.jsxs("div",{children:[w.jsx(zJ,{}),w.jsx(GJ,{})]});function SP({onSuccess:t,onClose:e}){const[n,r]=A.useState(!1),[o,a]=A.useState(""),i=sp({initialValues:{email:"",group:""},validate:{email:u=>/^\S+@\S+$/.test(u)?null:"Invalid email",group:u=>u?null:"Please select a group"}}),s=async u=>{r(!0),a("");try{const l=await ut.post("http://localhost:8081/api/user-mappings",{email:u.email,groupName:u.group},{withCredentials:!0});console.log("Successfully mapped user:",l.data),t&&t(l.data)}catch(l){const d=l.response?.data||l.message||"Failed to map user.";a(d),console.error("Submission error:",l)}finally{r(!1)}};return w.jsxs(Ra,{p:"md",shadow:"none",children:[w.jsx(we,{size:"lg",fw:500,ta:"center",mb:"lg",children:"Enter User Details"}),o&&w.jsx(we,{c:"red",ta:"center",pb:"md",children:o}),w.jsxs("form",{onSubmit:i.onSubmit(s),children:[w.jsxs(Po,{children:[w.jsx(xs,{required:!0,label:"User Email",placeholder:"user@example.com",...i.getInputProps("email"),radius:"md"}),w.jsx(Eu,{required:!0,label:"Select Group",placeholder:"Choose a group",data:["BL","BE","BM"],...i.getInputProps("group"),radius:"md"})]}),w.jsxs(Ge,{justify:"flex-end",mt:"xl",children:[e&&w.jsx(He,{variant:"default",onClick:e,children:"Cancel"}),w.jsx(He,{type:"submit",radius:"xl",loading:n,children:"Map User to Group"})]})]})]})}function qJ(){const t=Ga(),[e,n]=A.useState({users:0,jotforms:0,courses:0,subjects:0}),[r,o]=A.useState(!0);A.useEffect(()=>{a()},[]);const a=async()=>{try{o(!0);const[s,u,l,d]=await Promise.all([ut.get("/api/user-mappings").catch(()=>({data:[]})),ut.get("/api/jotforms").catch(()=>({data:[]})),ut.get("/api/courses").catch(()=>({data:[]})),ut.get("/api/subjects").catch(()=>({data:[]}))])}catch(s){console.error("Error fetching stats",s)}finally{o(!1)}},i=[{title:"User Management",desc:"Manage users by creating, updating, or deleting profiles and assigning them to specific learning groups.",icon:gY,color:"blue",route:"/usermanagment",manageLabel:"Manage Users"},{title:"Jotform Management",desc:"Administer learning materials and assignments by creating, editing, or removing Jotforms.",icon:OK,color:"green",route:"/jotformmanagment",manageLabel:"Manage Jotforms"},{title:"Subject Management",desc:"Group multiple courses together into subjects and organize them by learning groups (BL, BE, BM).",icon:KD,color:"purple",route:"/subjectmanagement",manageLabel:"Manage Subjects"},{title:"Course Management",desc:"Organize your curriculum by mapping Jotforms and other materials to specific courses for user groups.",icon:ip,color:"orange",route:"/coursemanagment",manageLabel:"Manage Courses"},{title:"Results Management",desc:"Track and analyze user performance, view assessment results, and generate progress reports.",icon:fK,color:"teal",route:"/resultmanagement",manageLabel:"View Results"}];return w.jsx(le,{style:{padding:"32px 0"},children:w.jsxs(cn,{size:"lg",children:[w.jsxs(Ge,{position:"center",mb:"xl",children:[w.jsx(jt,{order:1,style:{color:"var(--mantine-color-white)"},children:"PULSE LMS Dashboard"}),r&&w.jsx(Ko,{size:"sm"})]}),w.jsx(zu,{cols:{base:1,sm:2,md:3,lg:4},spacing:"xl",mb:"xl",children:i.map(s=>w.jsx(Ao,{to:s.route,style:{textDecoration:"none",height:"100%"},children:w.jsxs(Yr,{shadow:"md",radius:"md",p:"lg",style:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:u=>u.currentTarget.style.transform="translateY(-4px)",onMouseLeave:u=>u.currentTarget.style.transform="translateY(0)",children:[w.jsxs(Ge,{position:"apart",mb:"md",children:[w.jsx(s.icon,{size:32,color:`var(--mantine-color-${s.color}-6)`}),w.jsxs(Ge,{spacing:"xs",children:[s.count!==null&&w.jsxs(ua,{color:s.color,variant:"light",children:[s.count," ",s.count===1?s.manageLabel.split(" ")[0]:s.manageLabel.split(" ")[0]+"s"]}),w.jsx($o,{label:"Quick View",children:w.jsx(Nn,{variant:"subtle",color:s.color,onClick:u=>{u.preventDefault(),u.stopPropagation(),t(s.route)},children:w.jsx(qC,{size:16})})})]})]}),w.jsx(we,{size:"lg",weight:600,style:{color:"var(--mantine-color-white)"},mb:"sm",children:s.title}),w.jsx(we,{size:"sm",color:"dimmed",style:{flex:1},children:s.desc}),w.jsx(He,{variant:"light",color:s.color,fullWidth:!0,style:{marginTop:"auto"},children:s.manageLabel})]})},s.title))}),w.jsx(Yr,{shadow:"sm",radius:"md",p:"md",style:{backgroundColor:"#1A1B1E",border:"1px solid #2C2E33"},children:w.jsxs(Ge,{position:"center",children:[w.jsx(we,{weight:500,color:"white",children:"Quick Actions:"}),w.jsx(He,{variant:"light",color:"cyan",size:"sm",leftIcon:w.jsx(KC,{size:16}),onClick:()=>t("/fileupload"),children:"File Upload"}),w.jsx(He,{variant:"light",color:"grape",size:"sm",leftIcon:w.jsx(KD,{size:16}),onClick:()=>t("/subjectmanagement"),children:"Create Subject"}),w.jsx(He,{variant:"light",color:"indigo",size:"sm",leftIcon:w.jsx(ip,{size:16}),onClick:()=>t("/coursemanagment"),children:"Map Course"})]})})]})})}const XJ="_formPaper_1pd4e_2",CP={formPaper:XJ};function EP(t){const e=Ga(),n=sp({initialValues:{jotformName:""},validate:{jotformName:o=>o.length>0?null:"Please enter a Jotform name"}}),r=o=>{console.log("Creating Jotform:",o),e("/jotformbuilder",{state:{jotformName:o.jotformName}})};return w.jsxs(Ra,{className:CP.formPaper,radius:"md",p:"lg",withBorder:!0,...t,style:{maxWidth:"400px",margin:"0 auto"},children:[w.jsx(we,{size:"lg",fw:500,ta:"center",children:"Create Jotform"}),w.jsx(zo,{label:"Enter Jotform details",labelPosition:"center",my:"lg"}),w.jsxs("form",{onSubmit:n.onSubmit(r),children:[w.jsx(Po,{children:w.jsx(xs,{required:!0,label:"Jotform Name",placeholder:"Enter form name",value:n.values.jotformName,onChange:o=>n.setFieldValue("jotformName",o.currentTarget.value),error:n.errors.jotformName&&"Please enter a Jotform name",radius:"md"})}),w.jsx(Ge,{justify:"center",mt:"xl",children:w.jsx(He,{type:"submit",radius:"xl",children:"Create Form"})})]})]})}function Xr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var KJ=typeof Symbol=="function"&&Symbol.observable||"@@observable",bk=KJ,xk=()=>Math.random().toString(36).substring(7).split("").join("."),YJ={INIT:`@@redux/INIT${xk()}`,REPLACE:`@@redux/REPLACE${xk()}`},wk=YJ;function QJ(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function RP(t,e,n){if(typeof t!="function")throw new Error(Xr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Xr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Xr(1));return n(RP)(t,e)}let r=t,o=e,a=new Map,i=a,s=0,u=!1;function l(){i===a&&(i=new Map,a.forEach((b,S)=>{i.set(S,b)}))}function d(){if(u)throw new Error(Xr(3));return o}function f(b){if(typeof b!="function")throw new Error(Xr(4));if(u)throw new Error(Xr(5));let S=!0;l();const C=s++;return i.set(C,b),function(){if(S){if(u)throw new Error(Xr(6));S=!1,l(),i.delete(C),a=null}}}function p(b){if(!QJ(b))throw new Error(Xr(7));if(typeof b.type>"u")throw new Error(Xr(8));if(typeof b.type!="string")throw new Error(Xr(17));if(u)throw new Error(Xr(9));try{u=!0,o=r(o,b)}finally{u=!1}return(a=i).forEach(C=>{C()}),b}function m(b){if(typeof b!="function")throw new Error(Xr(10));r=b,p({type:wk.REPLACE})}function g(){const b=f;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Xr(11));function C(){const _=S;_.next&&_.next(d())}return C(),{unsubscribe:b(C)}},[bk](){return this}}}return p({type:wk.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:m,[bk]:g}}function Sk(t,e){return function(...n){return e(t.apply(this,n))}}function Ck(t,e){if(typeof t=="function")return Sk(t,e);if(typeof t!="object"||t===null)throw new Error(Xr(16));const n={};for(const r in t){const o=t[r];typeof o=="function"&&(n[r]=Sk(o,e))}return n}function _P(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function JJ(...t){return e=>(n,r)=>{const o=e(n,r);let a=()=>{throw new Error(Xr(15))};const i={getState:o.getState,dispatch:(u,...l)=>a(u,...l)},s=t.map(u=>u(i));return a=_P(...s)(o.dispatch),{...o,dispatch:a}}}var W1={exports:{}},V1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek;function ZJ(){if(Ek)return V1;Ek=1;var t=Cp();function e(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,o=t.useRef,a=t.useEffect,i=t.useMemo,s=t.useDebugValue;return V1.useSyncExternalStoreWithSelector=function(u,l,d,f,p){var m=o(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=i(function(){function b(T){if(!S){if(S=!0,C=T,T=f(T),p!==void 0&&g.hasValue){var D=g.value;if(p(D,T))return E=D}return E=T}if(D=E,n(C,T))return D;var k=f(T);return p!==void 0&&p(D,k)?(C=T,D):(C=T,E=k)}var S=!1,C,E,_=d===void 0?null:d;return[function(){return b(l())},_===null?void 0:function(){return b(_())}]},[l,d,f,p]);var y=r(u,m[0],m[1]);return a(function(){g.hasValue=!0,g.value=y},[y]),s(y),y},V1}var Rk;function eZ(){return Rk||(Rk=1,W1.exports=ZJ()),W1.exports}eZ();var tZ=A.version.startsWith("19"),nZ=Symbol.for(tZ?"react.transitional.element":"react.element"),rZ=Symbol.for("react.portal"),oZ=Symbol.for("react.fragment"),aZ=Symbol.for("react.strict_mode"),iZ=Symbol.for("react.profiler"),sZ=Symbol.for("react.consumer"),uZ=Symbol.for("react.context"),TP=Symbol.for("react.forward_ref"),lZ=Symbol.for("react.suspense"),cZ=Symbol.for("react.suspense_list"),ZC=Symbol.for("react.memo"),dZ=Symbol.for("react.lazy"),fZ=TP,hZ=ZC;function pZ(t){if(typeof t=="object"&&t!==null){const{$$typeof:e}=t;switch(e){case nZ:switch(t=t.type,t){case oZ:case iZ:case aZ:case lZ:case cZ:return t;default:switch(t=t&&t.$$typeof,t){case uZ:case TP:case dZ:case ZC:return t;case sZ:return t;default:return e}}case rZ:return e}}}function mZ(t){return pZ(t)===ZC}function vZ(t,e,n,r,{areStatesEqual:o,areOwnPropsEqual:a,areStatePropsEqual:i}){let s=!1,u,l,d,f,p;function m(C,E){return u=C,l=E,d=t(u,l),f=e(r,l),p=n(d,f,l),s=!0,p}function g(){return d=t(u,l),e.dependsOnOwnProps&&(f=e(r,l)),p=n(d,f,l),p}function y(){return t.dependsOnOwnProps&&(d=t(u,l)),e.dependsOnOwnProps&&(f=e(r,l)),p=n(d,f,l),p}function b(){const C=t(u,l),E=!i(C,d);return d=C,E&&(p=n(d,f,l)),p}function S(C,E){const _=!a(E,l),T=!o(C,u,E,l);return u=C,l=E,_&&T?g():_?y():T?b():p}return function(E,_){return s?S(E,_):m(E,_)}}function gZ(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...o}){const a=e(t,o),i=n(t,o),s=r(t,o);return vZ(a,i,s,t,o)}function yZ(t,e){const n={};for(const r in t){const o=t[r];typeof o=="function"&&(n[r]=(...a)=>e(o(...a)))}return n}function C2(t){return function(n){const r=t(n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function _k(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function AP(t,e){return function(r,{displayName:o}){const a=function(s,u){return a.dependsOnOwnProps?a.mapToProps(s,u):a.mapToProps(s,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(s,u){a.mapToProps=t,a.dependsOnOwnProps=_k(t);let l=a(s,u);return typeof l=="function"&&(a.mapToProps=l,a.dependsOnOwnProps=_k(l),l=a(s,u)),l},a}}function eE(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function bZ(t){return t&&typeof t=="object"?C2(e=>yZ(t,e)):t?typeof t=="function"?AP(t):eE(t,"mapDispatchToProps"):C2(e=>({dispatch:e}))}function xZ(t){return t?typeof t=="function"?AP(t):eE(t,"mapStateToProps"):C2(()=>({}))}function wZ(t,e,n){return{...n,...t,...e}}function SZ(t){return function(n,{displayName:r,areMergedPropsEqual:o}){let a=!1,i;return function(u,l,d){const f=t(u,l,d);return a?o(f,i)||(i=f):(a=!0,i=f),i}}}function CZ(t){return t?typeof t=="function"?SZ(t):eE(t,"mergeProps"):()=>wZ}function EZ(t){t()}function RZ(){let t=null,e=null;return{clear(){t=null,e=null},notify(){EZ(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const o=e={callback:n,next:null,prev:e};return o.prev?o.prev.next=o:t=o,function(){!r||t===null||(r=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var Tk={notify(){},get:()=>[]};function NP(t,e){let n,r=Tk,o=0,a=!1;function i(y){d();const b=r.subscribe(y);let S=!1;return()=>{S||(S=!0,b(),f())}}function s(){r.notify()}function u(){g.onStateChange&&g.onStateChange()}function l(){return a}function d(){o++,n||(n=e?e.addNestedSub(u):t.subscribe(u),r=RZ())}function f(){o--,n&&o===0&&(n(),n=void 0,r.clear(),r=Tk)}function p(){a||(a=!0,d())}function m(){a&&(a=!1,f())}const g={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:u,isSubscribed:l,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>r};return g}var _Z=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TZ=_Z(),AZ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",NZ=AZ(),DZ=()=>TZ||NZ?A.useLayoutEffect:A.useEffect,zg=DZ();function Ak(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function H1(t,e){if(Ak(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!Ak(t[n[o]],e[n[o]]))return!1;return!0}var kZ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},IZ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},MZ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},DP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OZ={[fZ]:MZ,[hZ]:DP};function Nk(t){return mZ(t)?DP:OZ[t.$$typeof]||kZ}var PZ=Object.defineProperty,FZ=Object.getOwnPropertyNames,Dk=Object.getOwnPropertySymbols,BZ=Object.getOwnPropertyDescriptor,LZ=Object.getPrototypeOf,kk=Object.prototype;function E2(t,e){if(typeof e!="string"){if(kk){const a=LZ(e);a&&a!==kk&&E2(t,a)}let n=FZ(e);Dk&&(n=n.concat(Dk(e)));const r=Nk(t),o=Nk(e);for(let a=0;a<n.length;++a){const i=n[a];if(!IZ[i]&&!(o&&o[i])&&!(r&&r[i])){const s=BZ(e,i);try{PZ(t,i,s)}catch{}}}}return t}var jZ=Symbol.for("react-redux-context"),zZ=typeof globalThis<"u"?globalThis:{};function UZ(){if(!A.createContext)return{};const t=zZ[jZ]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var kP=UZ(),WZ=[null,null];function VZ(t,e,n){zg(()=>t(...e),n)}function HZ(t,e,n,r,o,a){t.current=r,n.current=!1,o.current&&(o.current=null,a())}function GZ(t,e,n,r,o,a,i,s,u,l,d){if(!t)return()=>{};let f=!1,p=null;const m=()=>{if(f||!s.current)return;const y=e.getState();let b,S;try{b=r(y,o.current)}catch(C){S=C,p=C}S||(p=null),b===a.current?i.current||l():(a.current=b,u.current=b,i.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}function $Z(t,e){return t===e}function qZ(t,e,n,{pure:r,areStatesEqual:o=$Z,areOwnPropsEqual:a=H1,areStatePropsEqual:i=H1,areMergedPropsEqual:s=H1,forwardRef:u=!1,context:l=kP}={}){const d=l,f=xZ(t),p=bZ(e),m=CZ(n),g=!!t;return b=>{const S=b.displayName||b.name||"Component",C=`Connect(${S})`,E={shouldHandleStateChanges:g,displayName:C,wrappedComponentName:S,WrappedComponent:b,initMapStateToProps:f,initMapDispatchToProps:p,initMergeProps:m,areStatesEqual:o,areStatePropsEqual:i,areOwnPropsEqual:a,areMergedPropsEqual:s};function _(k){const[I,M,O]=A.useMemo(()=>{const{reactReduxForwardedRef:Le,...ke}=k;return[k.context,Le,ke]},[k]),F=A.useMemo(()=>{let Le=d;return I?.Consumer,Le},[I,d]),j=A.useContext(F),G=!!k.store&&!!k.store.getState&&!!k.store.dispatch,W=!!j&&!!j.store,q=G?k.store:j.store,P=W?j.getServerState:q.getState,z=A.useMemo(()=>gZ(q.dispatch,E),[q]),[U,H]=A.useMemo(()=>{if(!g)return WZ;const Le=NP(q,G?void 0:j.subscription),ke=Le.notifyNestedSubs.bind(Le);return[Le,ke]},[q,G,j]),L=A.useMemo(()=>G?j:{...j,subscription:U},[G,j,U]),$=A.useRef(void 0),J=A.useRef(O),ne=A.useRef(void 0),ce=A.useRef(!1),be=A.useRef(!1),se=A.useRef(void 0);zg(()=>(be.current=!0,()=>{be.current=!1}),[]);const ie=A.useMemo(()=>()=>ne.current&&O===J.current?ne.current:z(q.getState(),O),[q,O]),fe=A.useMemo(()=>ke=>U?GZ(g,q,U,z,J,$,ce,be,ne,H,ke):()=>{},[U]);VZ(HZ,[J,$,ce,O,ne,H]);let ge;try{ge=A.useSyncExternalStore(fe,ie,P?()=>z(P(),O):ie)}catch(Le){throw se.current&&(Le.message+=`
The error may be correlated with this previous error:
${se.current.stack}

`),Le}zg(()=>{se.current=void 0,ne.current=void 0,$.current=ge});const Oe=A.useMemo(()=>A.createElement(b,{...ge,ref:M}),[M,b,ge]);return A.useMemo(()=>g?A.createElement(F.Provider,{value:L},Oe):Oe,[F,Oe,L])}const D=A.memo(_);if(D.WrappedComponent=b,D.displayName=_.displayName=C,u){const I=A.forwardRef(function(O,F){return A.createElement(D,{...O,reactReduxForwardedRef:F})});return I.displayName=C,I.WrappedComponent=b,E2(I,b)}return E2(D,b)}}var IP=qZ;function XZ(t){const{children:e,context:n,serverState:r,store:o}=t,a=A.useMemo(()=>{const u=NP(o);return{store:o,subscription:u,getServerState:r?()=>r:void 0}},[o,r]),i=A.useMemo(()=>o.getState(),[o]);zg(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),i!==o.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,i]);const s=n||kP;return A.createElement(s.Provider,{value:a},e)}var KZ=XZ,YZ="Invariant failed";function QZ(t,e){throw new Error(YZ)}var Fa=function(e){var n=e.top,r=e.right,o=e.bottom,a=e.left,i=r-a,s=o-n,u={top:n,right:r,bottom:o,left:a,width:i,height:s,x:a,y:n,center:{x:(r+a)/2,y:(o+n)/2}};return u},tE=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},Ik=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},JZ=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},G1={top:0,right:0,bottom:0,left:0},nE=function(e){var n=e.borderBox,r=e.margin,o=r===void 0?G1:r,a=e.border,i=a===void 0?G1:a,s=e.padding,u=s===void 0?G1:s,l=Fa(tE(n,o)),d=Fa(Ik(n,i)),f=Fa(Ik(d,u));return{marginBox:l,borderBox:Fa(n),paddingBox:d,contentBox:f,margin:o,border:i,padding:u}},sa=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var o=Number(n);return isNaN(o)&&QZ(),o},ZZ=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ug=function(e,n){var r=e.borderBox,o=e.border,a=e.margin,i=e.padding,s=JZ(r,n);return nE({borderBox:s,border:o,margin:a,padding:i})},Wg=function(e,n){return n===void 0&&(n=ZZ()),Ug(e,n)},MP=function(e,n){var r={top:sa(n.marginTop),right:sa(n.marginRight),bottom:sa(n.marginBottom),left:sa(n.marginLeft)},o={top:sa(n.paddingTop),right:sa(n.paddingRight),bottom:sa(n.paddingBottom),left:sa(n.paddingLeft)},a={top:sa(n.borderTopWidth),right:sa(n.borderRightWidth),bottom:sa(n.borderBottomWidth),left:sa(n.borderLeftWidth)};return nE({borderBox:e,margin:r,padding:o,border:a})},OP=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return MP(n,r)},up=function(e){var n=[],r=null,o=function(){for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];n=s,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return o.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},o};function PP(t,e){}PP.bind(null,"warn");PP.bind(null,"error");function Ru(){}function eee(t,e){return{...t,...e}}function fa(t,e,n){const r=e.map(o=>{const a=eee(n,o.options);return t.addEventListener(o.eventName,o.fn,a),function(){t.removeEventListener(o.eventName,o.fn,a)}});return function(){r.forEach(a=>{a()})}}const tee="Invariant failed";class Vg extends Error{}Vg.prototype.toString=function(){return this.message};function ze(t,e){throw new Vg(tee)}class nee extends bt.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=Ru,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof Vg&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=fa(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof Vg){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const ree=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Hg=t=>t+1,oee=t=>`
  You have lifted an item in position ${Hg(t.source.index)}
`,FP=(t,e)=>{const n=t.droppableId===e.droppableId,r=Hg(t.index),o=Hg(e.index);return n?`
      You have moved the item from position ${r}
      to position ${o}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${o}
  `},BP=(t,e,n)=>e.droppableId===n.droppableId?`
      The item ${t}
      has been combined with ${n.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,aee=t=>{const e=t.destination;if(e)return FP(t.source,e);const n=t.combine;return n?BP(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},Mk=t=>`
  The item has returned to its starting position
  of ${Hg(t.index)}
`,iee=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${Mk(t.source)}
    `;const e=t.destination,n=t.combine;return e?`
      You have dropped the item.
      ${FP(t.source,e)}
    `:n?`
      You have dropped the item.
      ${BP(t.draggableId,t.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Mk(t.source)}
  `},wg={dragHandleUsageInstructions:ree,onDragStart:oee,onDragUpdate:aee,onDragEnd:iee};function see(t,e){return!!(t===e||Number.isNaN(t)&&Number.isNaN(e))}function LP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!see(t[n],e[n]))return!1;return!0}function Ht(t,e){const n=A.useState(()=>({inputs:e,result:t()}))[0],r=A.useRef(!0),o=A.useRef(n),i=r.current||!!(e&&o.current.inputs&&LP(e,o.current.inputs))?o.current:{inputs:e,result:t()};return A.useEffect(()=>{r.current=!1,o.current=i},[i]),i.result}function at(t,e){return Ht(()=>t,e)}const gr={x:0,y:0},_r=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),Fo=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),_u=(t,e)=>t.x===e.x&&t.y===e.y,pf=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),jl=(t,e,n=0)=>t==="x"?{x:e,y:n}:{x:n,y:e},lp=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),Ok=(t,e)=>Math.min(...e.map(n=>lp(t,n))),jP=t=>e=>({x:t(e.x),y:t(e.y)});var uee=(t,e)=>{const n=Fa({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n};const zp=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),Pk=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],lee={top:0,right:0,bottom:0,left:0},cee=(t,e)=>e?zp(t,e.scroll.diff.displacement):t,dee=(t,e,n)=>n&&n.increasedBy?{...t,[e.end]:t[e.end]+n.increasedBy[e.line]}:t,fee=(t,e)=>e&&e.shouldClipSubject?uee(e.pageMarginBox,t):Fa(t);var Fd=({page:t,withPlaceholder:e,axis:n,frame:r})=>{const o=cee(t.marginBox,r),a=dee(o,n,e),i=fee(a,r);return{page:t,withPlaceholder:e,active:i}},rE=(t,e)=>{t.frame||ze();const n=t.frame,r=Fo(e,n.scroll.initial),o=pf(r),a={...n,scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:o},max:n.scroll.max}},i=Fd({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a});return{...t,frame:a,subject:i}};function pr(t,e=LP){let n=null;function r(...o){if(n&&n.lastThis===this&&e(o,n.lastArgs))return n.lastResult;const a=t.apply(this,o);return n={lastResult:a,lastArgs:o,lastThis:this},a}return r.clear=function(){n=null},r}const zP=pr(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),UP=pr(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),_0=pr(t=>Object.values(t)),hee=pr(t=>Object.values(t));var mf=pr((t,e)=>hee(e).filter(r=>t===r.descriptor.droppableId).sort((r,o)=>r.descriptor.index-o.descriptor.index));function oE(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function T0(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var A0=pr((t,e)=>e.filter(n=>n.descriptor.id!==t.descriptor.id)),pee=({isMovingForward:t,draggable:e,destination:n,insideDestination:r,previousImpact:o})=>{if(!n.isCombineEnabled||!oE(o))return null;function i(m){const g={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...o,at:g}}const s=o.displaced.all,u=s.length?s[0]:null;if(t)return u?i(u):null;const l=A0(e,r);if(!u){if(!l.length)return null;const m=l[l.length-1];return i(m.descriptor.id)}const d=l.findIndex(m=>m.descriptor.id===u);d===-1&&ze();const f=d-1;if(f<0)return null;const p=l[f];return i(p.descriptor.id)},vf=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const WP={point:gr,value:0},cp={invisible:{},visible:{},all:[]},mee={displaced:cp,displacedBy:WP,at:null};var va=(t,e)=>n=>t<=n&&n<=e,VP=t=>{const e=va(t.top,t.bottom),n=va(t.left,t.right);return r=>{if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=e(r.top)||e(r.bottom),i=n(r.left)||n(r.right);if(a&&i)return!0;const u=r.top<t.top&&r.bottom>t.bottom,l=r.left<t.left&&r.right>t.right;return u&&l?!0:u&&i||l&&a}},vee=t=>{const e=va(t.top,t.bottom),n=va(t.left,t.right);return r=>e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right)};const aE={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},HP={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var gee=t=>e=>{const n=va(e.top,e.bottom),r=va(e.left,e.right);return o=>t===aE?n(o.top)&&n(o.bottom):r(o.left)&&r(o.right)};const yee=(t,e)=>{const n=e.frame?e.frame.scroll.diff.displacement:gr;return zp(t,n)},bee=(t,e,n)=>e.subject.active?n(e.subject.active)(t):!1,xee=(t,e,n)=>n(e)(t),iE=({target:t,destination:e,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:o})=>{const a=r?yee(t,e):t;return bee(a,e,o)&&xee(a,n,o)},wee=t=>iE({...t,isVisibleThroughFrameFn:VP}),GP=t=>iE({...t,isVisibleThroughFrameFn:vee}),See=t=>iE({...t,isVisibleThroughFrameFn:gee(t.destination.axis)}),Cee=(t,e,n)=>{if(typeof n=="boolean")return n;if(!e)return!0;const{invisible:r,visible:o}=e;if(r[t])return!1;const a=o[t];return a?a.shouldAnimate:!0};function Eee(t,e){const n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return Fa(tE(n,r))}function dp({afterDragging:t,destination:e,displacedBy:n,viewport:r,forceShouldAnimate:o,last:a}){return t.reduce(function(s,u){const l=Eee(u,n),d=u.descriptor.id;if(s.all.push(d),!wee({target:l,destination:e,viewport:r,withDroppableDisplacement:!0}))return s.invisible[u.descriptor.id]=!0,s;const p=Cee(d,a,o),m={draggableId:d,shouldAnimate:p};return s.visible[d]=m,s},{all:[],visible:{},invisible:{}})}function Ree(t,e){if(!t.length)return 0;const n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}function Fk({insideDestination:t,inHomeList:e,displacedBy:n,destination:r}){const o=Ree(t,{inHomeList:e});return{displaced:cp,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function Gg({draggable:t,insideDestination:e,destination:n,viewport:r,displacedBy:o,last:a,index:i,forceShouldAnimate:s}){const u=vf(t,n);if(i==null)return Fk({insideDestination:e,inHomeList:u,displacedBy:o,destination:n});const l=e.find(g=>g.descriptor.index===i);if(!l)return Fk({insideDestination:e,inHomeList:u,displacedBy:o,destination:n});const d=A0(t,e),f=e.indexOf(l),p=d.slice(f);return{displaced:dp({afterDragging:p,destination:n,displacedBy:o,last:a,viewport:r.frame,forceShouldAnimate:s}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function ku(t,e){return!!e.effected[t]}var _ee=({isMovingForward:t,destination:e,draggables:n,combine:r,afterCritical:o})=>{if(!e.isCombineEnabled)return null;const a=r.draggableId,s=n[a].descriptor.index;return ku(a,o)?t?s:s-1:t?s+1:s},Tee=({isMovingForward:t,isInHomeList:e,insideDestination:n,location:r})=>{if(!n.length)return null;const o=r.index,a=t?o+1:o-1,i=n[0].descriptor.index,s=n[n.length-1].descriptor.index,u=e?s:s+1;return a<i||a>u?null:a},Aee=({isMovingForward:t,isInHomeList:e,draggable:n,draggables:r,destination:o,insideDestination:a,previousImpact:i,viewport:s,afterCritical:u})=>{const l=i.at;if(l||ze(),l.type==="REORDER"){const f=Tee({isMovingForward:t,isInHomeList:e,location:l.destination,insideDestination:a});return f==null?null:Gg({draggable:n,insideDestination:a,destination:o,viewport:s,last:i.displaced,displacedBy:i.displacedBy,index:f})}const d=_ee({isMovingForward:t,destination:o,displaced:i.displaced,draggables:r,combine:l.combine,afterCritical:u});return d==null?null:Gg({draggable:n,insideDestination:a,destination:o,viewport:s,last:i.displaced,displacedBy:i.displacedBy,index:d})},Nee=({displaced:t,afterCritical:e,combineWith:n,displacedBy:r})=>{const o=!!(t.visible[n]||t.invisible[n]);return ku(n,e)?o?gr:pf(r.point):o?r.point:gr},Dee=({afterCritical:t,impact:e,draggables:n})=>{const r=T0(e);r||ze();const o=r.draggableId,a=n[o].page.borderBox.center,i=Nee({displaced:e.displaced,afterCritical:t,combineWith:o,displacedBy:e.displacedBy});return _r(a,i)};const $P=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,kee=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,sE=(t,e,n)=>e[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2,Bk=({axis:t,moveRelativeTo:e,isMoving:n})=>jl(t.line,e.marginBox[t.end]+$P(t,n),sE(t,e.marginBox,n)),Lk=({axis:t,moveRelativeTo:e,isMoving:n})=>jl(t.line,e.marginBox[t.start]-kee(t,n),sE(t,e.marginBox,n)),Iee=({axis:t,moveInto:e,isMoving:n})=>jl(t.line,e.contentBox[t.start]+$P(t,n),sE(t,e.contentBox,n));var Mee=({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:o})=>{const a=mf(r.descriptor.id,n),i=e.page,s=r.axis;if(!a.length)return Iee({axis:s,moveInto:r.page,isMoving:i});const{displaced:u,displacedBy:l}=t,d=u.all[0];if(d){const p=n[d];if(ku(d,o))return Lk({axis:s,moveRelativeTo:p.page,isMoving:i});const m=Ug(p.page,l.point);return Lk({axis:s,moveRelativeTo:m,isMoving:i})}const f=a[a.length-1];if(f.descriptor.id===e.descriptor.id)return i.borderBox.center;if(ku(f.descriptor.id,o)){const p=Ug(f.page,pf(o.displacedBy.point));return Bk({axis:s,moveRelativeTo:p,isMoving:i})}return Bk({axis:s,moveRelativeTo:f.page,isMoving:i})},R2=(t,e)=>{const n=t.frame;return n?_r(e,n.scroll.diff.displacement):e};const Oee=({impact:t,draggable:e,droppable:n,draggables:r,afterCritical:o})=>{const a=e.page.borderBox.center,i=t.at;return!n||!i?a:i.type==="REORDER"?Mee({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:o}):Dee({impact:t,draggables:r,afterCritical:o})};var N0=t=>{const e=Oee(t),n=t.droppable;return n?R2(n,e):e},qP=(t,e)=>{const n=Fo(e,t.scroll.initial),r=pf(n);return{frame:Fa({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}}};function jk(t,e){return t.map(n=>e[n])}function Pee(t,e){for(let n=0;n<e.length;n++){const r=e[n].visible[t];if(r)return r}return null}var Fee=({impact:t,viewport:e,destination:n,draggables:r,maxScrollChange:o})=>{const a=qP(e,_r(e.scroll.current,o)),i=n.frame?rE(n,_r(n.frame.scroll.current,o)):n,s=t.displaced,u=dp({afterDragging:jk(s.all,r),destination:n,displacedBy:t.displacedBy,viewport:a.frame,last:s,forceShouldAnimate:!1}),l=dp({afterDragging:jk(s.all,r),destination:i,displacedBy:t.displacedBy,viewport:e.frame,last:s,forceShouldAnimate:!1}),d={},f={},p=[s,u,l];return s.all.forEach(g=>{const y=Pee(g,p);if(y){f[g]=y;return}d[g]=!0}),{...t,displaced:{all:s.all,invisible:d,visible:f}}},Bee=(t,e)=>_r(t.scroll.diff.displacement,e),uE=({pageBorderBoxCenter:t,draggable:e,viewport:n})=>{const r=Bee(n,t),o=Fo(r,e.page.borderBox.center);return _r(e.client.borderBox.center,o)},XP=({draggable:t,destination:e,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:o,onlyOnMainAxis:a=!1})=>{const i=Fo(n,t.page.borderBox.center),u={target:zp(t.page.borderBox,i),destination:e,withDroppableDisplacement:o,viewport:r};return a?See(u):GP(u)},Lee=({isMovingForward:t,draggable:e,destination:n,draggables:r,previousImpact:o,viewport:a,previousPageBorderBoxCenter:i,previousClientSelection:s,afterCritical:u})=>{if(!n.isEnabled)return null;const l=mf(n.descriptor.id,r),d=vf(e,n),f=pee({isMovingForward:t,draggable:e,destination:n,insideDestination:l,previousImpact:o})||Aee({isMovingForward:t,isInHomeList:d,draggable:e,draggables:r,destination:n,insideDestination:l,previousImpact:o,viewport:a,afterCritical:u});if(!f)return null;const p=N0({impact:f,draggable:e,droppable:n,draggables:r,afterCritical:u});if(XP({draggable:e,destination:n,newPageBorderBoxCenter:p,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:uE({pageBorderBoxCenter:p,draggable:e,viewport:a}),impact:f,scrollJumpRequest:null};const g=Fo(p,i),y=Fee({impact:f,viewport:a,destination:n,draggables:r,maxScrollChange:g});return{clientSelection:s,impact:y,scrollJumpRequest:g}};const qr=t=>{const e=t.subject.active;return e||ze(),e};var jee=({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:r,viewport:o})=>{const a=n.subject.active;if(!a)return null;const i=n.axis,s=va(a[i.start],a[i.end]),u=_0(r).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>VP(o.frame)(qr(d))).filter(d=>{const f=qr(d);return t?a[i.crossAxisEnd]<f[i.crossAxisEnd]:f[i.crossAxisStart]<a[i.crossAxisStart]}).filter(d=>{const f=qr(d),p=va(f[i.start],f[i.end]);return s(f[i.start])||s(f[i.end])||p(a[i.start])||p(a[i.end])}).sort((d,f)=>{const p=qr(d)[i.crossAxisStart],m=qr(f)[i.crossAxisStart];return t?p-m:m-p}).filter((d,f,p)=>qr(d)[i.crossAxisStart]===qr(p[0])[i.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const l=u.filter(d=>va(qr(d)[i.start],qr(d)[i.end])(e[i.line]));return l.length===1?l[0]:l.length>1?l.sort((d,f)=>qr(d)[i.start]-qr(f)[i.start])[0]:u.sort((d,f)=>{const p=Ok(e,Pk(qr(d))),m=Ok(e,Pk(qr(f)));return p!==m?p-m:qr(d)[i.start]-qr(f)[i.start]})[0]};const zk=(t,e)=>{const n=t.page.borderBox.center;return ku(t.descriptor.id,e)?Fo(n,e.displacedBy.point):n},zee=(t,e)=>{const n=t.page.borderBox;return ku(t.descriptor.id,e)?zp(n,pf(e.displacedBy.point)):n};var Uee=({pageBorderBoxCenter:t,viewport:e,destination:n,insideDestination:r,afterCritical:o})=>r.filter(i=>GP({target:zee(i,o),destination:n,viewport:e.frame,withDroppableDisplacement:!0})).sort((i,s)=>{const u=lp(t,R2(n,zk(i,o))),l=lp(t,R2(n,zk(s,o)));return u<l?-1:l<u?1:i.descriptor.index-s.descriptor.index})[0]||null,Up=pr(function(e,n){const r=n[e.line];return{value:r,point:jl(e.line,r)}});const Wee=(t,e,n)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return jl(r.line,e[r.line]);const o=t.subject.page.contentBox[r.size],u=mf(t.descriptor.id,n).reduce((l,d)=>l+d.client.marginBox[r.size],0)+e[r.line]-o;return u<=0?null:jl(r.line,u)},KP=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),YP=(t,e,n)=>{const r=t.frame;vf(e,t)&&ze(),t.subject.withPlaceholder&&ze();const o=Up(t.axis,e.displaceBy).point,a=Wee(t,o,n),i={placeholderSize:o,increasedBy:a,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const d=Fd({page:t.subject.page,withPlaceholder:i,axis:t.axis,frame:t.frame});return{...t,subject:d}}const s=a?_r(r.scroll.max,a):r.scroll.max,u=KP(r,s),l=Fd({page:t.subject.page,withPlaceholder:i,axis:t.axis,frame:u});return{...t,subject:l,frame:u}},Vee=t=>{const e=t.subject.withPlaceholder;e||ze();const n=t.frame;if(!n){const i=Fd({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:i}}const r=e.oldFrameMaxScroll;r||ze();const o=KP(n,r),a=Fd({page:t.subject.page,axis:t.axis,frame:o,withPlaceholder:null});return{...t,subject:a,frame:o}};var Hee=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:n,draggable:r,draggables:o,destination:a,viewport:i,afterCritical:s})=>{if(!e){if(n.length)return null;const f={displaced:cp,displacedBy:WP,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},p=N0({impact:f,draggable:r,droppable:a,draggables:o,afterCritical:s}),m=vf(r,a)?a:YP(a,r,o);return XP({draggable:r,destination:m,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const u=t[a.axis.line]<=e.page.borderBox.center[a.axis.line],l=(()=>{const f=e.descriptor.index;return e.descriptor.id===r.descriptor.id||u?f:f+1})(),d=Up(a.axis,r.displaceBy);return Gg({draggable:r,insideDestination:n,destination:a,viewport:i,displacedBy:d,last:cp,index:l})},Gee=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:n,isOver:r,draggables:o,droppables:a,viewport:i,afterCritical:s})=>{const u=jee({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:a,viewport:i});if(!u)return null;const l=mf(u.descriptor.id,o),d=Uee({pageBorderBoxCenter:e,viewport:i,destination:u,insideDestination:l,afterCritical:s}),f=Hee({previousPageBorderBoxCenter:e,destination:u,draggable:n,draggables:o,moveRelativeTo:d,insideDestination:l,viewport:i,afterCritical:s});if(!f)return null;const p=N0({impact:f,draggable:n,droppable:u,draggables:o,afterCritical:s});return{clientSelection:uE({pageBorderBoxCenter:p,draggable:n,viewport:i}),impact:f,scrollJumpRequest:null}},Uo=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const $ee=(t,e)=>{const n=Uo(t);return n?e[n]:null};var qee=({state:t,type:e})=>{const n=$ee(t.impact,t.dimensions.droppables),r=!!n,o=t.dimensions.droppables[t.critical.droppable.id],a=n||o,i=a.axis.direction,s=i==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||i==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(s&&!r)return null;const u=e==="MOVE_DOWN"||e==="MOVE_RIGHT",l=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,{draggables:f,droppables:p}=t.dimensions;return s?Lee({isMovingForward:u,previousPageBorderBoxCenter:d,draggable:l,destination:a,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Gee({isMovingForward:u,previousPageBorderBoxCenter:d,draggable:l,isOver:a,draggables:f,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function ml(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function QP(t){const e=va(t.top,t.bottom),n=va(t.left,t.right);return function(o){return e(o.y)&&n(o.x)}}function Xee(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function Kee({pageBorderBox:t,draggable:e,candidates:n}){const r=e.page.borderBox.center,o=n.map(a=>{const i=a.axis,s=jl(a.axis.line,t.center[i.line],a.page.borderBox.center[i.crossAxisLine]);return{id:a.descriptor.id,distance:lp(r,s)}}).sort((a,i)=>i.distance-a.distance);return o[0]?o[0].id:null}function Yee({pageBorderBox:t,draggable:e,droppables:n}){const r=_0(n).filter(o=>{if(!o.isEnabled)return!1;const a=o.subject.active;if(!a||!Xee(t,a))return!1;if(QP(a)(t.center))return!0;const i=o.axis,s=a.center[i.crossAxisLine],u=t[i.crossAxisStart],l=t[i.crossAxisEnd],d=va(a[i.crossAxisStart],a[i.crossAxisEnd]),f=d(u),p=d(l);return!f&&!p?!0:f?u<s:l>s});return r.length?r.length===1?r[0].descriptor.id:Kee({pageBorderBox:t,draggable:e,candidates:r}):null}const JP=(t,e)=>Fa(zp(t,e));var Qee=(t,e)=>{const n=t.frame;return n?JP(e,n.scroll.diff.value):e};function ZP({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function Jee({draggable:t,closest:e,inHomeList:n}){return e?n&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var Zee=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:n,insideDestination:r,last:o,viewport:a,afterCritical:i})=>{const s=n.axis,u=Up(n.axis,e.displaceBy),l=u.value,d=t[s.start],f=t[s.end],m=A0(e,r).find(y=>{const b=y.descriptor.id,S=y.page.borderBox.center[s.line],C=ku(b,i),E=ZP({displaced:o,id:b});return C?E?f<=S:d<S-l:E?f<=S+l:d<S})||null,g=Jee({draggable:e,closest:m,inHomeList:vf(e,n)});return Gg({draggable:e,insideDestination:r,destination:n,viewport:a,last:o,displacedBy:u,index:g})};const ete=4;var tte=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:n,destination:r,insideDestination:o,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const i=r.axis,s=Up(r.axis,t.displaceBy),u=s.value,l=e[i.start],d=e[i.end],p=A0(t,o).find(g=>{const y=g.descriptor.id,b=g.page.borderBox,C=b[i.size]/ete,E=ku(y,a),_=ZP({displaced:n.displaced,id:y});return E?_?d>b[i.start]+C&&d<b[i.end]-C:l>b[i.start]-u+C&&l<b[i.end]-u-C:_?d>b[i.start]+u+C&&d<b[i.end]+u-C:l>b[i.start]+C&&l<b[i.end]-C});return p?{displacedBy:s,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:r.descriptor.id}}}:null},eF=({pageOffset:t,draggable:e,draggables:n,droppables:r,previousImpact:o,viewport:a,afterCritical:i})=>{const s=JP(e.page.borderBox,t),u=Yee({pageBorderBox:s,draggable:e,droppables:r});if(!u)return mee;const l=r[u],d=mf(l.descriptor.id,n),f=Qee(l,s);return tte({pageBorderBoxWithDroppableScroll:f,draggable:e,previousImpact:o,destination:l,insideDestination:d,afterCritical:i})||Zee({pageBorderBoxWithDroppableScroll:f,draggable:e,destination:l,insideDestination:d,last:o.displaced,viewport:a,afterCritical:i})},lE=(t,e)=>({...t,[e.descriptor.id]:e});const nte=({previousImpact:t,impact:e,droppables:n})=>{const r=Uo(t),o=Uo(e);if(!r||r===o)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const i=Vee(a);return lE(n,i)};var rte=({draggable:t,draggables:e,droppables:n,previousImpact:r,impact:o})=>{const a=nte({previousImpact:r,impact:o,droppables:n}),i=Uo(o);if(!i)return a;const s=n[i];if(vf(t,s)||s.subject.withPlaceholder)return a;const u=YP(s,t,e);return lE(a,u)},Vh=({state:t,clientSelection:e,dimensions:n,viewport:r,impact:o,scrollJumpRequest:a})=>{const i=r||t.viewport,s=n||t.dimensions,u=e||t.current.client.selection,l=Fo(u,t.initial.client.selection),d={offset:l,selection:u,borderBoxCenter:_r(t.initial.client.borderBoxCenter,l)},f={selection:_r(d.selection,i.scroll.current),borderBoxCenter:_r(d.borderBoxCenter,i.scroll.current),offset:_r(d.offset,i.scroll.diff.value)},p={client:d,page:f};if(t.phase==="COLLECTING")return{...t,dimensions:s,viewport:i,current:p};const m=s.draggables[t.critical.draggable.id],g=o||eF({pageOffset:f.offset,draggable:m,draggables:s.draggables,droppables:s.droppables,previousImpact:t.impact,viewport:i,afterCritical:t.afterCritical}),y=rte({draggable:m,impact:g,previousImpact:t.impact,draggables:s.draggables,droppables:s.droppables});return{...t,current:p,dimensions:{draggables:s.draggables,droppables:y},impact:g,viewport:i,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function ote(t,e){return t.map(n=>e[n])}var tF=({impact:t,viewport:e,draggables:n,destination:r,forceShouldAnimate:o})=>{const a=t.displaced,i=ote(a.all,n),s=dp({afterDragging:i,destination:r,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:o,last:a});return{...t,displaced:s}},nF=({impact:t,draggable:e,droppable:n,draggables:r,viewport:o,afterCritical:a})=>{const i=N0({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:a});return uE({pageBorderBoxCenter:i,draggable:e,viewport:o})},rF=({state:t,dimensions:e,viewport:n})=>{t.movementMode!=="SNAP"&&ze();const r=t.impact,o=n||t.viewport,a=e||t.dimensions,{draggables:i,droppables:s}=a,u=i[t.critical.draggable.id],l=Uo(r);l||ze();const d=s[l],f=tF({impact:r,viewport:o,destination:d,draggables:i}),p=nF({impact:f,draggable:u,droppable:d,draggables:i,viewport:o,afterCritical:t.afterCritical});return Vh({impact:f,clientSelection:p,state:t,dimensions:a,viewport:o})},ate=t=>({index:t.index,droppableId:t.droppableId}),oF=({draggable:t,home:e,draggables:n,viewport:r})=>{const o=Up(e.axis,t.displaceBy),a=mf(e.descriptor.id,n),i=a.indexOf(t);i===-1&&ze();const s=a.slice(i+1),u=s.reduce((p,m)=>(p[m.descriptor.id]=!0,p),{}),l={inVirtualList:e.descriptor.mode==="virtual",displacedBy:o,effected:u};return{impact:{displaced:dp({afterDragging:s,destination:e,displacedBy:o,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:ate(t.descriptor)}},afterCritical:l}},ite=(t,e)=>({draggables:t.draggables,droppables:lE(t.droppables,e)}),ste=({draggable:t,offset:e,initialWindowScroll:n})=>{const r=Ug(t.client,e),o=Wg(r,n);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:o}},ute=t=>{const e=t.frame;return e||ze(),e},lte=({additions:t,updatedDroppables:e,viewport:n})=>{const r=n.scroll.diff.value;return t.map(o=>{const a=o.descriptor.droppableId,i=e[a],u=ute(i).scroll.diff.value,l=_r(r,u);return ste({draggable:o,offset:l,initialWindowScroll:n.scroll.initial})})},cte=({state:t,published:e})=>{const n=e.modified.map(S=>{const C=t.dimensions.droppables[S.droppableId];return rE(C,S.scroll)}),r={...t.dimensions.droppables,...zP(n)},o=UP(lte({additions:e.additions,updatedDroppables:r,viewport:t.viewport})),a={...t.dimensions.draggables,...o};e.removals.forEach(S=>{delete a[S]});const i={droppables:r,draggables:a},s=Uo(t.impact),u=s?i.droppables[s]:null,l=i.draggables[t.critical.draggable.id],d=i.droppables[t.critical.droppable.id],{impact:f,afterCritical:p}=oF({draggable:l,home:d,draggables:a,viewport:t.viewport}),m=u&&u.isCombineEnabled?t.impact:f,g=eF({pageOffset:t.current.page.offset,draggable:i.draggables[t.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:m,viewport:t.viewport,afterCritical:p}),y={...t,phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:i,afterCritical:p,forceShouldAnimate:!1};return t.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const _2=t=>t.movementMode==="SNAP",$1=(t,e,n)=>{const r=ite(t.dimensions,e);return!_2(t)||n?Vh({state:t,dimensions:r}):rF({state:t,dimensions:r})};function q1(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const Uk={phase:"IDLE",completed:null,shouldFlush:!1};var dte=(t=Uk,e)=>{if(e.type==="FLUSH")return{...Uk,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ze();const{critical:n,clientSelection:r,viewport:o,dimensions:a,movementMode:i}=e.payload,s=a.draggables[n.draggable.id],u=a.droppables[n.droppable.id],l={selection:r,borderBoxCenter:s.client.borderBox.center,offset:gr},d={client:l,page:{selection:_r(l.selection,o.scroll.initial),borderBoxCenter:_r(l.selection,o.scroll.initial),offset:_r(l.selection,o.scroll.diff.value)}},f=_0(a.droppables).every(y=>!y.isFixedOnPage),{impact:p,afterCritical:m}=oF({draggable:s,home:u,draggables:a.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:a,initial:d,current:d,isWindowScrollAllowed:f,impact:p,afterCritical:m,onLiftImpact:p,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&ze(),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ze(),cte({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;ml(t)||ze();const{client:n}=e.payload;return _u(n,t.current.client.selection)?t:Vh({state:t,clientSelection:n,impact:_2(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return q1(t);ml(t)||ze();const{id:n,newScroll:r}=e.payload,o=t.dimensions.droppables[n];if(!o)return t;const a=rE(o,r);return $1(t,a,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;ml(t)||ze();const{id:n,isEnabled:r}=e.payload,o=t.dimensions.droppables[n];o||ze(),o.isEnabled===r&&ze();const a={...o,isEnabled:r};return $1(t,a,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;ml(t)||ze();const{id:n,isCombineEnabled:r}=e.payload,o=t.dimensions.droppables[n];o||ze(),o.isCombineEnabled===r&&ze();const a={...o,isCombineEnabled:r};return $1(t,a,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;ml(t)||ze(),t.isWindowScrollAllowed||ze();const n=e.payload.newScroll;if(_u(t.viewport.scroll.current,n))return q1(t);const r=qP(t.viewport,n);return _2(t)?rF({state:t,viewport:r}):Vh({state:t,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ml(t))return t;const n=e.payload.maxScroll;if(_u(n,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:n}};return{...t,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ze();const n=qee({state:t,type:e.type});return n?Vh({state:t,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const n=e.payload.reason;return t.phase!=="COLLECTING"&&ze(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(e.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:o}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ze(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:o,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:n}=e.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return t};function rn(t,e){return t instanceof Object&&"type"in t&&t.type===e}const fte=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),hte=t=>({type:"LIFT",payload:t}),pte=t=>({type:"INITIAL_PUBLISH",payload:t}),mte=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),vte=()=>({type:"COLLECTION_STARTING",payload:null}),gte=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),yte=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),bte=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),aF=t=>({type:"MOVE",payload:t}),xte=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),wte=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),Ste=()=>({type:"MOVE_UP",payload:null}),Cte=()=>({type:"MOVE_DOWN",payload:null}),Ete=()=>({type:"MOVE_RIGHT",payload:null}),Rte=()=>({type:"MOVE_LEFT",payload:null}),cE=()=>({type:"FLUSH",payload:null}),_te=t=>({type:"DROP_ANIMATE",payload:t}),dE=t=>({type:"DROP_COMPLETE",payload:t}),iF=t=>({type:"DROP",payload:t}),Tte=t=>({type:"DROP_PENDING",payload:t}),sF=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Ate=t=>({getState:e,dispatch:n})=>r=>o=>{if(!rn(o,"LIFT")){r(o);return}const{id:a,clientSelection:i,movementMode:s}=o.payload,u=e();u.phase==="DROP_ANIMATING"&&n(dE({completed:u.completed})),e().phase!=="IDLE"&&ze(),n(cE()),n(fte({draggableId:a,movementMode:s}));const d={draggableId:a,scrollOptions:{shouldPublishImmediately:s==="SNAP"}},{critical:f,dimensions:p,viewport:m}=t.startPublishing(d);n(pte({critical:f,dimensions:p,clientSelection:i,movementMode:s,viewport:m}))},Nte=t=>()=>e=>n=>{rn(n,"INITIAL_PUBLISH")&&t.dragging(),rn(n,"DROP_ANIMATE")&&t.dropping(n.payload.completed.result.reason),(rn(n,"FLUSH")||rn(n,"DROP_COMPLETE"))&&t.resting(),e(n)};const fE={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},fp={opacity:{drop:0,combining:.7},scale:{drop:.75}},uF={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},dl=`${uF.outOfTheWay}s ${fE.outOfTheWay}`,Hh={fluid:`opacity ${dl}`,snap:`transform ${dl}, opacity ${dl}`,drop:t=>{const e=`${t}s ${fE.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${dl}`,placeholder:`height ${dl}, width ${dl}, margin ${dl}`},Wk=t=>_u(t,gr)?void 0:`translate(${t.x}px, ${t.y}px)`,T2={moveTo:Wk,drop:(t,e)=>{const n=Wk(t);if(n)return e?`${n} scale(${fp.scale.drop})`:n}},{minDropTime:A2,maxDropTime:lF}=uF,Dte=lF-A2,Vk=1500,kte=.6;var Ite=({current:t,destination:e,reason:n})=>{const r=lp(t,e);if(r<=0)return A2;if(r>=Vk)return lF;const o=r/Vk,a=A2+Dte*o,i=n==="CANCEL"?a*kte:a;return Number(i.toFixed(2))},Mte=({impact:t,draggable:e,dimensions:n,viewport:r,afterCritical:o})=>{const{draggables:a,droppables:i}=n,s=Uo(t),u=s?i[s]:null,l=i[e.descriptor.droppableId],d=nF({impact:t,draggable:e,draggables:a,afterCritical:o,droppable:u||l,viewport:r});return Fo(d,e.client.borderBox.center)},Ote=({draggables:t,reason:e,lastImpact:n,home:r,viewport:o,onLiftImpact:a})=>!n.at||e!=="DROP"?{impact:tF({draggables:t,impact:a,destination:r,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:cp},didDropInsideDroppable:!0};const Pte=({getState:t,dispatch:e})=>n=>r=>{if(!rn(r,"DROP")){n(r);return}const o=t(),a=r.payload.reason;if(o.phase==="COLLECTING"){e(Tte({reason:a}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&ze(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||ze();const s=o.critical,u=o.dimensions,l=u.draggables[o.critical.draggable.id],{impact:d,didDropInsideDroppable:f}=Ote({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),p=f?oE(d):null,m=f?T0(d):null,g={index:s.draggable.index,droppableId:s.droppable.id},y={draggableId:l.descriptor.id,type:l.descriptor.type,source:g,reason:a,mode:o.movementMode,destination:p,combine:m},b=Mte({impact:d,draggable:l,dimensions:u,viewport:o.viewport,afterCritical:o.afterCritical}),S={critical:o.critical,afterCritical:o.afterCritical,result:y,impact:d};if(!(!_u(o.current.client.offset,b)||!!y.combine)){e(dE({completed:S}));return}const E=Ite({current:o.current.client.offset,destination:b,reason:a});e(_te({newHomeClientOffset:b,dropDuration:E,completed:S}))};var cF=()=>({x:window.pageXOffset,y:window.pageYOffset});function Fte(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function Bte({onWindowScroll:t}){function e(){t(cF())}const n=up(e),r=Fte(n);let o=Ru;function a(){return o!==Ru}function i(){a()&&ze(),o=fa(window,[r])}function s(){a()||ze(),n.cancel(),o(),o=Ru}return{start:i,stop:s,isActive:a}}const Lte=t=>rn(t,"DROP_COMPLETE")||rn(t,"DROP_ANIMATE")||rn(t,"FLUSH"),jte=t=>{const e=Bte({onWindowScroll:n=>{t.dispatch(xte({newScroll:n}))}});return n=>r=>{!e.isActive()&&rn(r,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&Lte(r)&&e.stop(),n(r)}};var zte=t=>{let e=!1,n=!1;const r=setTimeout(()=>{n=!0}),o=a=>{e||n||(e=!0,t(a),clearTimeout(r))};return o.wasCalled=()=>e,o},Ute=()=>{const t=[],e=o=>{const a=t.findIndex(s=>s.timerId===o);a===-1&&ze();const[i]=t.splice(a,1);i.callback()};return{add:o=>{const a=setTimeout(()=>e(a)),i={timerId:a,callback:o};t.push(i)},flush:()=>{if(!t.length)return;const o=[...t];t.length=0,o.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const Wte=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,Vte=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,Hte=(t,e)=>{if(t===e)return!0;const n=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return n&&r},Dh=(t,e)=>{e()},jv=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function X1(t,e,n,r){if(!t){n(r(e));return}const o=zte(n);t(e,{announce:o}),o.wasCalled()||n(r(e))}var Gte=(t,e)=>{const n=Ute();let r=null;const o=(f,p)=>{r&&ze(),Dh("onBeforeCapture",()=>{const m=t().onBeforeCapture;m&&m({draggableId:f,mode:p})})},a=(f,p)=>{r&&ze(),Dh("onBeforeDragStart",()=>{const m=t().onBeforeDragStart;m&&m(jv(f,p))})},i=(f,p)=>{r&&ze();const m=jv(f,p);r={mode:p,lastCritical:f,lastLocation:m.source,lastCombine:null},n.add(()=>{Dh("onDragStart",()=>X1(t().onDragStart,m,e,wg.onDragStart))})},s=(f,p)=>{const m=oE(p),g=T0(p);r||ze();const y=!Hte(f,r.lastCritical);y&&(r.lastCritical=f);const b=!Wte(r.lastLocation,m);b&&(r.lastLocation=m);const S=!Vte(r.lastCombine,g);if(S&&(r.lastCombine=g),!y&&!b&&!S)return;const C={...jv(f,r.mode),combine:g,destination:m};n.add(()=>{Dh("onDragUpdate",()=>X1(t().onDragUpdate,C,e,wg.onDragUpdate))})},u=()=>{r||ze(),n.flush()},l=f=>{r||ze(),r=null,Dh("onDragEnd",()=>X1(t().onDragEnd,f,e,wg.onDragEnd))};return{beforeCapture:o,beforeStart:a,start:i,update:s,flush:u,drop:l,abort:()=>{if(!r)return;const f={...jv(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};l(f)}}},$te=(t,e)=>{const n=Gte(t,e);return r=>o=>a=>{if(rn(a,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(rn(a,"INITIAL_PUBLISH")){const s=a.payload.critical;n.beforeStart(s,a.payload.movementMode),o(a),n.start(s,a.payload.movementMode);return}if(rn(a,"DROP_COMPLETE")){const s=a.payload.completed.result;n.flush(),o(a),n.drop(s);return}if(o(a),rn(a,"FLUSH")){n.abort();return}const i=r.getState();i.phase==="DRAGGING"&&n.update(i.critical,i.impact)}};const qte=t=>e=>n=>{if(!rn(n,"DROP_ANIMATION_FINISHED")){e(n);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&ze(),t.dispatch(dE({completed:r.completed}))},Xte=t=>{let e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return o=>a=>{if((rn(a,"FLUSH")||rn(a,"DROP_COMPLETE")||rn(a,"DROP_ANIMATION_FINISHED"))&&r(),o(a),!rn(a,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(sF())}};n=requestAnimationFrame(()=>{n=null,e=fa(window,[i])})}};var Kte=t=>()=>e=>n=>{(rn(n,"DROP_COMPLETE")||rn(n,"FLUSH")||rn(n,"DROP_ANIMATE"))&&t.stopPublishing(),e(n)},Yte=t=>{let e=!1;return()=>n=>r=>{if(rn(r,"INITIAL_PUBLISH")){e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!e){if(rn(r,"FLUSH")){e=!1,t.tryRestoreFocusRecorded();return}if(rn(r,"DROP_COMPLETE")){e=!1;const o=r.payload.completed.result;o.combine&&t.tryShiftRecord(o.draggableId,o.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const Qte=t=>rn(t,"DROP_COMPLETE")||rn(t,"DROP_ANIMATE")||rn(t,"FLUSH");var Jte=t=>e=>n=>r=>{if(Qte(r)){t.stop(),n(r);return}if(rn(r,"INITIAL_PUBLISH")){n(r);const o=e.getState();o.phase!=="DRAGGING"&&ze(),t.start(o);return}n(r),t.scroll(e.getState())};const Zte=t=>e=>n=>{if(e(n),!rn(n,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(iF({reason:r.reason})))},ene=_P;var tne=({dimensionMarshal:t,focusMarshal:e,styleMarshal:n,getResponders:r,announce:o,autoScroller:a})=>RP(dte,ene(JJ(Nte(n),Kte(t),Ate(t),Pte,qte,Xte,Zte,Jte(a),jte,Yte(e),$te(r,o))));const K1=()=>({additions:{},removals:{},modified:{}});function nne({registry:t,callbacks:e}){let n=K1(),r=null;const o=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:l,modified:d}=n,f=Object.keys(u).map(g=>t.draggable.getById(g).getDimension(gr)).sort((g,y)=>g.descriptor.index-y.descriptor.index),p=Object.keys(d).map(g=>{const b=t.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:b}}),m={additions:f,removals:Object.keys(l),modified:p};n=K1(),e.publish(m)}))};return{add:u=>{const l=u.descriptor.id;n.additions[l]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[l]&&delete n.removals[l],o()},remove:u=>{const l=u.descriptor;n.removals[l.id]=!0,n.modified[l.droppableId]=!0,n.additions[l.id]&&delete n.additions[l.id],o()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=K1())}}}var dF=({scrollHeight:t,scrollWidth:e,height:n,width:r})=>{const o=Fo({x:e,y:t},{x:r,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},fF=()=>{const t=document.documentElement;return t||ze(),t},hF=()=>{const t=fF();return dF({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},rne=()=>{const t=cF(),e=hF(),n=t.y,r=t.x,o=fF(),a=o.clientWidth,i=o.clientHeight,s=r+a,u=n+i;return{frame:Fa({top:n,left:r,right:s,bottom:u}),scroll:{initial:t,current:t,max:e,diff:{value:gr,displacement:gr}}}},one=({critical:t,scrollOptions:e,registry:n})=>{const r=rne(),o=r.scroll.current,a=t.droppable,i=n.droppable.getAllByType(a.type).map(d=>d.callbacks.getDimensionAndWatchScroll(o,e)),s=n.draggable.getAllByType(t.draggable.type).map(d=>d.getDimension(o));return{dimensions:{draggables:UP(s),droppables:zP(i)},critical:t,viewport:r}};function Hk(t,e,n){return!(n.descriptor.id===e.id||n.descriptor.type!==e.type||t.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var ane=(t,e)=>{let n=null;const r=nne({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),o=(p,m)=>{t.droppable.exists(p)||ze(),n&&e.updateDroppableIsEnabled({id:p,isEnabled:m})},a=(p,m)=>{n&&(t.droppable.exists(p)||ze(),e.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:m}))},i=(p,m)=>{n&&(t.droppable.exists(p)||ze(),e.updateDroppableScroll({id:p,newScroll:m}))},s=(p,m)=>{n&&t.droppable.getById(p).callbacks.scroll(m)},u=()=>{if(!n)return;r.stop();const p=n.critical.droppable;t.droppable.getAllByType(p.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},l=p=>{n||ze();const m=n.critical.draggable;p.type==="ADDITION"&&Hk(t,m,p.value)&&r.add(p.value),p.type==="REMOVAL"&&Hk(t,m,p.value)&&r.remove(p.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:a,scrollDroppable:s,updateDroppableScroll:i,startPublishing:p=>{n&&ze();const m=t.draggable.getById(p.draggableId),g=t.droppable.getById(m.descriptor.droppableId),y={draggable:m.descriptor,droppable:g.descriptor},b=t.subscribe(l);return n={critical:y,unsubscribe:b},one({critical:y,registry:t,scrollOptions:p.scrollOptions})},stopPublishing:u}},pF=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",ine=t=>{window.scrollBy(t.x,t.y)};const sne=pr(t=>_0(t).filter(e=>!(!e.isEnabled||!e.frame))),une=(t,e)=>sne(e).find(r=>(r.frame||ze(),QP(r.frame.pageMarginBox)(t)))||null;var lne=({center:t,destination:e,droppables:n})=>{if(e){const o=n[e];return o.frame?o:null}return une(t,n)};const hp={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var cne=(t,e,n=()=>hp)=>{const r=n(),o=t[e.size]*r.startFromPercentage,a=t[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:a}},mF=({startOfRange:t,endOfRange:e,current:n})=>{const r=e-t;return r===0?0:(n-t)/r},hE=1,dne=(t,e,n=()=>hp)=>{const r=n();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return r.maxPixelScroll;if(t===e.startScrollingFrom)return hE;const a=1-mF({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=r.maxPixelScroll*r.ease(a);return Math.ceil(i)},fne=(t,e,n)=>{const r=n(),o=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,i=e,s=a,l=Date.now()-i;if(l>=a)return t;if(l<o)return hE;const d=mF({startOfRange:o,endOfRange:s,current:l}),f=t*r.ease(d);return Math.ceil(f)},Gk=({distanceToEdge:t,thresholds:e,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:o})=>{const a=dne(t,e,o);return a===0?0:r?Math.max(fne(a,n,o),hE):a},$k=({container:t,distanceToEdges:e,dragStartTime:n,axis:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=cne(t,r,a);return e[r.end]<e[r.start]?Gk({distanceToEdge:e[r.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a}):-1*Gk({distanceToEdge:e[r.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a})},hne=({container:t,subject:e,proposedScroll:n})=>{const r=e.height>t.height,o=e.width>t.width;return!o&&!r?n:o&&r?null:{x:o?0:n.x,y:r?0:n.y}};const pne=jP(t=>t===0?0:t);var vF=({dragStartTime:t,container:e,subject:n,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},s=$k({container:e,distanceToEdges:i,dragStartTime:t,axis:aE,shouldUseTimeDampening:o,getAutoScrollerOptions:a}),u=$k({container:e,distanceToEdges:i,dragStartTime:t,axis:HP,shouldUseTimeDampening:o,getAutoScrollerOptions:a}),l=pne({x:u,y:s});if(_u(l,gr))return null;const d=hne({container:e,subject:n,proposedScroll:l});return d?_u(d,gr)?null:d:null};const mne=jP(t=>t===0?0:t>0?1:-1),pE=(()=>{const t=(e,n)=>e<0?e:e>n?e-n:0;return({current:e,max:n,change:r})=>{const o=_r(e,r),a={x:t(o.x,n.x),y:t(o.y,n.y)};return _u(a,gr)?null:a}})(),gF=({max:t,current:e,change:n})=>{const r={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},o=mne(n),a=pE({max:r,current:e,change:o});return!a||o.x!==0&&a.x===0||o.y!==0&&a.y===0},mE=(t,e)=>gF({current:t.scroll.current,max:t.scroll.max,change:e}),vne=(t,e)=>{if(!mE(t,e))return null;const n=t.scroll.max,r=t.scroll.current;return pE({current:r,max:n,change:e})},vE=(t,e)=>{const n=t.frame;return n?gF({current:n.scroll.current,max:n.scroll.max,change:e}):!1},gne=(t,e)=>{const n=t.frame;return!n||!vE(t,e)?null:pE({current:n.scroll.current,max:n.scroll.max,change:e})};var yne=({viewport:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=vF({dragStartTime:r,container:t.frame,subject:e,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a});return i&&mE(t,i)?i:null},bne=({droppable:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:a})=>{const i=t.frame;if(!i)return null;const s=vF({dragStartTime:r,container:i.pageMarginBox,subject:e,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:a});return s&&vE(t,s)?s:null},qk=({state:t,dragStartTime:e,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:o,getAutoScrollerOptions:a})=>{const i=t.current.page.borderBoxCenter,u=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const f=t.viewport,p=yne({dragStartTime:e,viewport:f,subject:u,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(p){r(p);return}}const l=lne({center:i,destination:Uo(t.impact),droppables:t.dimensions.droppables});if(!l)return;const d=bne({dragStartTime:e,droppable:l,subject:u,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:a});d&&o(l.descriptor.id,d)},xne=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n=()=>hp})=>{const r=up(t),o=up(e);let a=null;const i=l=>{a||ze();const{shouldUseTimeDampening:d,dragStartTime:f}=a;qk({state:l,scrollWindow:r,scrollDroppable:o,dragStartTime:f,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:l=>{a&&ze();const d=Date.now();let f=!1;const p=()=>{f=!0};qk({state:l,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p,getAutoScrollerOptions:n}),a={dragStartTime:d,shouldUseTimeDampening:f},f&&i(l)},stop:()=>{a&&(r.cancel(),o.cancel(),a=null)},scroll:i}},wne=({move:t,scrollDroppable:e,scrollWindow:n})=>{const r=(s,u)=>{const l=_r(s.current.client.selection,u);t({client:l})},o=(s,u)=>{if(!vE(s,u))return u;const l=gne(s,u);if(!l)return e(s.descriptor.id,u),null;const d=Fo(u,l);return e(s.descriptor.id,d),Fo(u,d)},a=(s,u,l)=>{if(!s||!mE(u,l))return l;const d=vne(u,l);if(!d)return n(l),null;const f=Fo(l,d);return n(f),Fo(l,f)};return s=>{const u=s.scrollJumpRequest;if(!u)return;const l=Uo(s.impact);l||ze();const d=o(s.dimensions.droppables[l],u);if(!d)return;const f=s.viewport,p=a(s.isWindowScrollAllowed,f,d);p&&r(s,p)}},Sne=({scrollDroppable:t,scrollWindow:e,move:n,getAutoScrollerOptions:r})=>{const o=xne({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r}),a=wne({move:n,scrollWindow:e,scrollDroppable:t});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){o.scroll(u);return}u.scrollJumpRequest&&a(u)}},start:o.start,stop:o.stop}};const Bd="data-rfd",Ld=(()=>{const t=`${Bd}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),N2=(()=>{const t=`${Bd}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),Cne=(()=>{const t=`${Bd}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),Xk={contextId:`${Bd}-scroll-container-context-id`},Ene=t=>e=>`[${e}="${t}"]`,kh=(t,e)=>t.map(n=>{const r=n.styles[e];return r?`${n.selector} { ${r} }`:""}).join(" "),Rne="pointer-events: none;";var _ne=t=>{const e=Ene(t),n=(()=>{const s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Ld.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:Rne,dropAnimating:s}}})(),r=(()=>{const s=`
      transition: ${Hh.outOfTheWay};
    `;return{selector:e(N2.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}})(),o={selector:e(Cne.contextId),styles:{always:"overflow-anchor: none;"}},i=[r,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:kh(i,"always"),resting:kh(i,"resting"),dragging:kh(i,"dragging"),dropAnimating:kh(i,"dropAnimating"),userCancel:kh(i,"userCancel")}};const Wo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.useLayoutEffect:A.useEffect,Y1=()=>{const t=document.querySelector("head");return t||ze(),t},Kk=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function Tne(t,e){const n=Ht(()=>_ne(t),[t]),r=A.useRef(null),o=A.useRef(null),a=at(pr(f=>{const p=o.current;p||ze(),p.textContent=f}),[]),i=at(f=>{const p=r.current;p||ze(),p.textContent=f},[]);Wo(()=>{!r.current&&!o.current||ze();const f=Kk(e),p=Kk(e);return r.current=f,o.current=p,f.setAttribute(`${Bd}-always`,t),p.setAttribute(`${Bd}-dynamic`,t),Y1().appendChild(f),Y1().appendChild(p),i(n.always),a(n.resting),()=>{const m=g=>{const y=g.current;y||ze(),Y1().removeChild(y),g.current=null};m(r),m(o)}},[e,i,a,n.always,n.resting,t]);const s=at(()=>a(n.dragging),[a,n.dragging]),u=at(f=>{if(f==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),l=at(()=>{o.current&&a(n.resting)},[a,n.resting]);return Ht(()=>({dragging:s,dropping:u,resting:l}),[s,u,l])}function yF(t,e){return Array.from(t.querySelectorAll(e))}var bF=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function D0(t){return t instanceof bF(t).HTMLElement}function Ane(t,e){const n=`[${Ld.contextId}="${t}"]`,r=yF(document,n);if(!r.length)return null;const o=r.find(a=>a.getAttribute(Ld.draggableId)===e);return!o||!D0(o)?null:o}function Nne(t){const e=A.useRef({}),n=A.useRef(null),r=A.useRef(null),o=A.useRef(!1),a=at(function(p,m){const g={id:p,focus:m};return e.current[p]=g,function(){const b=e.current;b[p]!==g&&delete b[p]}},[]),i=at(function(p){const m=Ane(t,p);m&&m!==document.activeElement&&m.focus()},[t]),s=at(function(p,m){n.current===p&&(n.current=m)},[]),u=at(function(){r.current||o.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const p=n.current;p&&i(p)}))},[i]),l=at(function(p){n.current=null;const m=document.activeElement;m&&m.getAttribute(Ld.draggableId)===p&&(n.current=p)},[]);return Wo(()=>(o.current=!0,function(){o.current=!1;const p=r.current;p&&cancelAnimationFrame(p)}),[]),Ht(()=>({register:a,tryRecordFocus:l,tryRestoreFocusRecorded:u,tryShiftRecord:s}),[a,l,u,s])}function Dne(){const t={draggables:{},droppables:{}},e=[];function n(f){return e.push(f),function(){const m=e.indexOf(f);m!==-1&&e.splice(m,1)}}function r(f){e.length&&e.forEach(p=>p(f))}function o(f){return t.draggables[f]||null}function a(f){const p=o(f);return p||ze(),p}const i={register:f=>{t.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:(f,p)=>{const m=t.draggables[p.descriptor.id];m&&m.uniqueId===f.uniqueId&&(delete t.draggables[p.descriptor.id],t.draggables[f.descriptor.id]=f)},unregister:f=>{const p=f.descriptor.id,m=o(p);m&&f.uniqueId===m.uniqueId&&(delete t.draggables[p],t.droppables[f.descriptor.droppableId]&&r({type:"REMOVAL",value:f}))},getById:a,findById:o,exists:f=>!!o(f),getAllByType:f=>Object.values(t.draggables).filter(p=>p.descriptor.type===f)};function s(f){return t.droppables[f]||null}function u(f){const p=s(f);return p||ze(),p}const l={register:f=>{t.droppables[f.descriptor.id]=f},unregister:f=>{const p=s(f.descriptor.id);p&&f.uniqueId===p.uniqueId&&delete t.droppables[f.descriptor.id]},getById:u,findById:s,exists:f=>!!s(f),getAllByType:f=>Object.values(t.droppables).filter(p=>p.descriptor.type===f)};function d(){t.draggables={},t.droppables={},e.length=0}return{draggable:i,droppable:l,subscribe:n,clean:d}}function kne(){const t=Ht(Dne,[]);return A.useEffect(()=>function(){t.clean()},[t]),t}var gE=bt.createContext(null),$g=()=>{const t=document.body;return t||ze(),t};const Ine={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Mne=t=>`rfd-announcement-${t}`;function One(t){const e=Ht(()=>Mne(t),[t]),n=A.useRef(null);return A.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Od(a.style,Ine),$g().appendChild(a),function(){setTimeout(function(){const u=$g();u.contains(a)&&u.removeChild(a),a===n.current&&(n.current=null)})}},[e]),at(o=>{const a=n.current;if(a){a.textContent=o;return}},[])}const Pne={separator:"::"};function yE(t,e=Pne){const n=bt.useId();return Ht(()=>`${t}${e.separator}${n}`,[e.separator,t,n])}function Fne({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function Bne({contextId:t,text:e}){const n=yE("hidden-text",{separator:"-"}),r=Ht(()=>Fne({contextId:t,uniqueId:n}),[n,t]);return A.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=e,a.style.display="none",$g().appendChild(a),function(){const s=$g();s.contains(a)&&s.removeChild(a)}},[r,e]),r}var k0=bt.createContext(null);function xF(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),e}function Lne(){let t=null;function e(){return!!t}function n(i){return i===t}function r(i){t&&ze();const s={abandon:i};return t=s,s}function o(){t||ze(),t=null}function a(){t&&(t.abandon(),o())}return{isClaimed:e,isActive:n,claim:r,release:o,tryAbandon:a}}function pp(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const jne=9,zne=13,bE=27,wF=32,Une=33,Wne=34,Vne=35,Hne=36,Gne=37,$ne=38,qne=39,Xne=40,Kne={[zne]:!0,[jne]:!0};var SF=t=>{Kne[t.keyCode]&&t.preventDefault()};const I0=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),CF=0,Yk=5;function Yne(t,e){return Math.abs(e.x-t.x)>=Yk||Math.abs(e.y-t.y)>=Yk}const Qk={type:"IDLE"};function Qne({cancel:t,completed:e,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:o=>{const{button:a,clientX:i,clientY:s}=o;if(a!==CF)return;const u={x:i,y:s},l=n();if(l.type==="DRAGGING"){o.preventDefault(),l.actions.move(u);return}l.type!=="PENDING"&&ze();const d=l.point;if(!Yne(d,u))return;o.preventDefault();const f=l.actions.fluidLift(u);r({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:o=>{const a=n();if(a.type!=="DRAGGING"){t();return}o.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){t();return}if(o.keyCode===bE){o.preventDefault(),t();return}SF(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:o=>{const a=n();if(a.type==="IDLE"&&ze(),a.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:I0,fn:t}]}function Jne(t){const e=A.useRef(Qk),n=A.useRef(Ru),r=Ht(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==CF||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const p=t.findClosestDraggableId(f);if(!p)return;const m=t.tryGetLock(p,i,{sourceEvent:f});if(!m)return;f.preventDefault();const g={x:f.clientX,y:f.clientY};n.current(),l(m,g)}}),[t]),o=Ht(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const f=t.findClosestDraggableId(d);if(!f)return;const p=t.findOptionsForDraggable(f);p&&(p.shouldRespectForcePress||t.canGetLock(f)&&d.preventDefault())}}),[t]),a=at(function(){const f={passive:!1,capture:!0};n.current=fa(window,[o,r],f)},[o,r]),i=at(()=>{e.current.type!=="IDLE"&&(e.current=Qk,n.current(),a())},[a]),s=at(()=>{const d=e.current;i(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[i]),u=at(function(){const f={capture:!0,passive:!1},p=Qne({cancel:s,completed:i,getPhase:()=>e.current,setPhase:m=>{e.current=m}});n.current=fa(window,p,f)},[s,i]),l=at(function(f,p){e.current.type!=="IDLE"&&ze(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);Wo(function(){return a(),function(){n.current()}},[a])}function Zne(){}const ere={[Wne]:!0,[Une]:!0,[Hne]:!0,[Vne]:!0};function tre(t,e){function n(){e(),t.cancel()}function r(){e(),t.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===bE){o.preventDefault(),n();return}if(o.keyCode===wF){o.preventDefault(),r();return}if(o.keyCode===Xne){o.preventDefault(),t.moveDown();return}if(o.keyCode===$ne){o.preventDefault(),t.moveUp();return}if(o.keyCode===qne){o.preventDefault(),t.moveRight();return}if(o.keyCode===Gne){o.preventDefault(),t.moveLeft();return}if(ere[o.keyCode]){o.preventDefault();return}SF(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:I0,fn:n}]}function nre(t){const e=A.useRef(Zne),n=Ht(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==wF)return;const i=t.findClosestDraggableId(a);if(!i)return;const s=t.tryGetLock(i,d,{sourceEvent:a});if(!s)return;a.preventDefault();let u=!0;const l=s.snapLift();e.current();function d(){u||ze(),u=!1,e.current(),r()}e.current=fa(window,tre(l,d),{capture:!0,passive:!1})}}),[t]),r=at(function(){const a={passive:!1,capture:!0};e.current=fa(window,[n],a)},[n]);Wo(function(){return r(),function(){e.current()}},[r])}const Q1={type:"IDLE"},rre=120,ore=.15;function are({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(e().type!=="DRAGGING"){t();return}n.keyCode===bE&&n.preventDefault(),t()}},{eventName:I0,fn:t}]}function ire({cancel:t,completed:e,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const o=n();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;const{clientX:a,clientY:i}=r.touches[0],s={x:a,y:i};r.preventDefault(),o.actions.move(s)}},{eventName:"touchend",fn:r=>{const o=n();if(o.type!=="DRAGGING"){t();return}r.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const o=n();o.type==="IDLE"&&ze();const a=r.touches[0];if(!a||!(a.force>=ore))return;const s=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){s&&t();return}if(s){if(o.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:I0,fn:t}]}function sre(t){const e=A.useRef(Q1),n=A.useRef(Ru),r=at(function(){return e.current},[]),o=at(function(m){e.current=m},[]),a=Ht(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const g=t.findClosestDraggableId(m);if(!g)return;const y=t.tryGetLock(g,s,{sourceEvent:m});if(!y)return;const b=m.touches[0],{clientX:S,clientY:C}=b,E={x:S,y:C};n.current(),f(y,E)}}),[t]),i=at(function(){const m={capture:!0,passive:!1};n.current=fa(window,[a],m)},[a]),s=at(()=>{const p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),o(Q1),n.current(),i())},[i,o]),u=at(()=>{const p=e.current;s(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[s]),l=at(function(){const m={capture:!0,passive:!1},g={cancel:u,completed:s,getPhase:r},y=fa(window,ire(g),m),b=fa(window,are(g),m);n.current=function(){y(),b()}},[u,r,s]),d=at(function(){const m=r();m.type!=="PENDING"&&ze();const g=m.actions.fluidLift(m.point);o({type:"DRAGGING",actions:g,hasMoved:!1})},[r,o]),f=at(function(m,g){r().type!=="IDLE"&&ze();const y=setTimeout(d,rre);o({type:"PENDING",point:g,actions:m,longPressTimerId:y}),l()},[l,r,o,d]);Wo(function(){return i(),function(){n.current();const g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),o(Q1))}},[r,i,o]),Wo(function(){return fa(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const ure=["input","button","textarea","select","option","optgroup","video","audio"];function EF(t,e){if(e==null)return!1;if(ure.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===t?!1:EF(t,e.parentElement)}function lre(t,e){const n=e.target;return D0(n)?EF(t,n):!1}var cre=t=>Fa(t.getBoundingClientRect()).center;function dre(t){return t instanceof bF(t).Element}const fre=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function RF(t,e){return t==null?null:t[fre](e)?t:RF(t.parentElement,e)}function hre(t,e){return t.closest?t.closest(e):RF(t,e)}function pre(t){return`[${Ld.contextId}="${t}"]`}function mre(t,e){const n=e.target;if(!dre(n))return null;const r=pre(t),o=hre(n,r);return!o||!D0(o)?null:o}function vre(t,e){const n=mre(t,e);return n?n.getAttribute(Ld.draggableId):null}function gre(t,e){const n=`[${N2.contextId}="${t}"]`,o=yF(document,n).find(a=>a.getAttribute(N2.id)===e);return!o||!D0(o)?null:o}function yre(t){t.preventDefault()}function zv({expected:t,phase:e,isLockActive:n,shouldWarn:r}){return!(!n()||t!==e)}function _F({lockAPI:t,store:e,registry:n,draggableId:r}){if(t.isClaimed())return!1;const o=n.draggable.findById(r);return!(!o||!o.options.isEnabled||!pF(e.getState(),r))}function bre({lockAPI:t,contextId:e,store:n,registry:r,draggableId:o,forceSensorStop:a,sourceEvent:i}){if(!_F({lockAPI:t,store:n,registry:r,draggableId:o}))return null;const u=r.draggable.getById(o),l=gre(e,u.descriptor.id);if(!l||i&&!u.options.canDragInteractiveElements&&lre(l,i))return null;const d=t.claim(a||Ru);let f="PRE_DRAG";function p(){return u.options.shouldRespectForcePress}function m(){return t.isActive(d)}function g(T,D){zv({expected:T,phase:f,isLockActive:m,shouldWarn:!0})&&n.dispatch(D())}const y=g.bind(null,"DRAGGING");function b(T){function D(){t.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(D(),ze()),n.dispatch(hte(T.liftActionArgs)),f="DRAGGING";function k(I,M={shouldBlockNextClick:!1}){if(T.cleanup(),M.shouldBlockNextClick){const O=fa(window,[{eventName:"click",fn:yre,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(O)}D(),n.dispatch(iF({reason:I}))}return{isActive:()=>zv({expected:"DRAGGING",phase:f,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:p,drop:I=>k("DROP",I),cancel:I=>k("CANCEL",I),...T.actions}}function S(T){const D=up(I=>{y(()=>aF({client:I}))});return{...b({liftActionArgs:{id:o,clientSelection:T,movementMode:"FLUID"},cleanup:()=>D.cancel(),actions:{move:D}}),move:D}}function C(){const T={moveUp:()=>y(Ste),moveRight:()=>y(Ete),moveDown:()=>y(Cte),moveLeft:()=>y(Rte)};return b({liftActionArgs:{id:o,clientSelection:cre(l),movementMode:"SNAP"},cleanup:Ru,actions:T})}function E(){zv({expected:"PRE_DRAG",phase:f,isLockActive:m,shouldWarn:!0})&&t.release()}return{isActive:()=>zv({expected:"PRE_DRAG",phase:f,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:p,fluidLift:S,snapLift:C,abort:E}}const xre=[Jne,nre,sre];function wre({contextId:t,store:e,registry:n,customSensors:r,enableDefaultSensors:o}){const a=[...o?xre:[],...r||[]],i=A.useState(()=>Lne())[0],s=at(function(b,S){pp(b)&&!pp(S)&&i.tryAbandon()},[i]);Wo(function(){let b=e.getState();return e.subscribe(()=>{const C=e.getState();s(b,C),b=C})},[i,e,s]),Wo(()=>i.tryAbandon,[i.tryAbandon]);const u=at(y=>_F({lockAPI:i,registry:n,store:e,draggableId:y}),[i,n,e]),l=at((y,b,S)=>bre({lockAPI:i,registry:n,contextId:t,store:e,draggableId:y,forceSensorStop:b||null,sourceEvent:S&&S.sourceEvent?S.sourceEvent:null}),[t,i,n,e]),d=at(y=>vre(t,y),[t]),f=at(y=>{const b=n.draggable.findById(y);return b?b.options:null},[n.draggable]),p=at(function(){i.isClaimed()&&(i.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(cE()))},[i,e]),m=at(()=>i.isClaimed(),[i]),g=Ht(()=>({canGetLock:u,tryGetLock:l,findClosestDraggableId:d,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:m}),[u,l,d,f,p,m]);for(let y=0;y<a.length;y++)a[y](g)}const Sre=t=>({onBeforeCapture:e=>{const n=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};ef.flushSync(n)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),Cre=t=>({...hp,...t.autoScrollerOptions,durationDampening:{...hp.durationDampening,...t.autoScrollerOptions}});function Ih(t){return t.current||ze(),t.current}function Ere(t){const{contextId:e,setCallbacks:n,sensors:r,nonce:o,dragHandleUsageInstructions:a}=t,i=A.useRef(null),s=xF(t),u=at(()=>Sre(s.current),[s]),l=at(()=>Cre(s.current),[s]),d=One(e),f=Bne({contextId:e,text:a}),p=Tne(e,o),m=at(O=>{Ih(i).dispatch(O)},[]),g=Ht(()=>Ck({publishWhileDragging:mte,updateDroppableScroll:gte,updateDroppableIsEnabled:yte,updateDroppableIsCombineEnabled:bte,collectionStarting:vte},m),[m]),y=kne(),b=Ht(()=>ane(y,g),[y,g]),S=Ht(()=>Sne({scrollWindow:ine,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:l,...Ck({move:aF},m)}),[b.scrollDroppable,m,l]),C=Nne(e),E=Ht(()=>tne({announce:d,autoScroller:S,dimensionMarshal:b,focusMarshal:C,getResponders:u,styleMarshal:p}),[d,S,b,C,u,p]);i.current=E;const _=at(()=>{const O=Ih(i);O.getState().phase!=="IDLE"&&O.dispatch(cE())},[]),T=at(()=>{const O=Ih(i).getState();return O.phase==="DROP_ANIMATING"?!0:O.phase==="IDLE"?!1:O.isDragging},[]),D=Ht(()=>({isDragging:T,tryAbort:_}),[T,_]);n(D);const k=at(O=>pF(Ih(i).getState(),O),[]),I=at(()=>ml(Ih(i).getState()),[]),M=Ht(()=>({marshal:b,focus:C,contextId:e,canLift:k,isMovementAllowed:I,dragHandleUsageInstructionsId:f,registry:y}),[e,b,f,C,k,I,y]);return wre({contextId:e,store:E,registry:y,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),A.useEffect(()=>_,[_]),bt.createElement(k0.Provider,{value:M},bt.createElement(KZ,{context:gE,store:E},t.children))}function Rre(){return bt.useId()}function _re(t){const e=Rre(),n=t.dragHandleUsageInstructions||wg.dragHandleUsageInstructions;return bt.createElement(nee,null,r=>bt.createElement(Ere,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const Jk={dragging:5e3,dropAnimating:4500},Tre=(t,e)=>e?Hh.drop(e.duration):t?Hh.snap:Hh.fluid,Are=(t,e)=>{if(t)return e?fp.opacity.drop:fp.opacity.combining},Nre=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function Dre(t){const n=t.dimension.client,{offset:r,combineWith:o,dropping:a}=t,i=!!o,s=Nre(t),u=!!a,l=u?T2.drop(r,i):T2.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Tre(s,a),transform:l,opacity:Are(i,u),zIndex:u?Jk.dropAnimating:Jk.dragging,pointerEvents:"none"}}function kre(t){return{transform:T2.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function Ire(t){return t.type==="DRAGGING"?Dre(t):kre(t)}function Mre(t,e,n=gr){const r=window.getComputedStyle(e),o=e.getBoundingClientRect(),a=MP(o,r),i=Wg(a,n),s={client:a,tagName:e.tagName.toLowerCase(),display:r.display},u={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:t,placeholder:s,displaceBy:u,client:a,page:i}}function Ore(t){const e=yE("draggable"),{descriptor:n,registry:r,getDraggableRef:o,canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:s}=t,u=Ht(()=>({canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:s}),[a,s,i]),l=at(m=>{const g=o();return g||ze(),Mre(n,g,m)},[n,o]),d=Ht(()=>({uniqueId:e,descriptor:n,options:u,getDimension:l}),[n,l,u,e]),f=A.useRef(d),p=A.useRef(!0);Wo(()=>(r.draggable.register(f.current),()=>r.draggable.unregister(f.current)),[r.draggable]),Wo(()=>{if(p.current){p.current=!1;return}const m=f.current;f.current=d,r.draggable.update(d,m)},[d,r.draggable])}var xE=bt.createContext(null);function qg(t){const e=A.useContext(t);return e||ze(),e}function Pre(t){t.preventDefault()}const Fre=t=>{const e=A.useRef(null),n=at((D=null)=>{e.current=D},[]),r=at(()=>e.current,[]),{contextId:o,dragHandleUsageInstructionsId:a,registry:i}=qg(k0),{type:s,droppableId:u}=qg(xE),l=Ht(()=>({id:t.draggableId,index:t.index,type:s,droppableId:u}),[t.draggableId,t.index,s,u]),{children:d,draggableId:f,isEnabled:p,shouldRespectForcePress:m,canDragInteractiveElements:g,isClone:y,mapped:b,dropAnimationFinished:S}=t;if(!y){const D=Ht(()=>({descriptor:l,registry:i,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:m,isEnabled:p}),[l,i,r,g,m,p]);Ore(D)}const C=Ht(()=>p?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:Pre}:null,[o,a,f,p]),E=at(D=>{b.type==="DRAGGING"&&b.dropping&&D.propertyName==="transform"&&ef.flushSync(S)},[S,b]),_=Ht(()=>{const D=Ire(b),k=b.type==="DRAGGING"&&b.dropping?E:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":f,style:D,onTransitionEnd:k},dragHandleProps:C}},[o,C,f,b,E,n]),T=Ht(()=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}),[l.droppableId,l.id,l.index,l.type]);return bt.createElement(bt.Fragment,null,d(_,b.snapshot,T))};var TF=(t,e)=>t===e,AF=t=>{const{combine:e,destination:n}=t;return n?n.droppableId:e?e.droppableId:null};const Bre=t=>t.combine?t.combine.draggableId:null,Lre=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function jre(){const t=pr((o,a)=>({x:o,y:a})),e=pr((o,a,i=null,s=null,u=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:o,draggingOver:i,combineWith:s,combineTargetFor:null})),n=pr((o,a,i,s,u=null,l=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:l,mode:a,offset:o,dimension:i,forceShouldAnimate:d,snapshot:e(a,s,u,l,null)}}));return(o,a)=>{if(pp(o)){if(o.critical.draggable.id!==a.draggableId)return null;const i=o.current.client.offset,s=o.dimensions.draggables[a.draggableId],u=Uo(o.impact),l=Lre(o.impact),d=o.forceShouldAnimate;return n(t(i.x,i.y),o.movementMode,s,a.isClone,u,l,d)}if(o.phase==="DROP_ANIMATING"){const i=o.completed;if(i.result.draggableId!==a.draggableId)return null;const s=a.isClone,u=o.dimensions.draggables[a.draggableId],l=i.result,d=l.mode,f=AF(l),p=Bre(l),g={duration:o.dropDuration,curve:fE.drop,moveTo:o.newHomeClientOffset,opacity:p?fp.opacity.drop:null,scale:p?fp.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:u,dropping:g,draggingOver:f,combineWith:p,mode:d,forceShouldAnimate:null,snapshot:e(d,s,f,p,g)}}}return null}}function NF(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const zre={mapped:{type:"SECONDARY",offset:gr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:NF(null)}};function Ure(){const t=pr((i,s)=>({x:i,y:s})),e=pr(NF),n=pr((i,s=null,u)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:s,shouldAnimateDisplacement:u,snapshot:e(s)}})),r=i=>i?n(gr,i,!0):null,o=(i,s,u,l)=>{const d=u.displaced.visible[i],f=!!(l.inVirtualList&&l.effected[i]),p=T0(u),m=p&&p.draggableId===i?s:null;if(!d){if(!f)return r(m);if(u.displaced.invisible[i])return null;const b=pf(l.displacedBy.point),S=t(b.x,b.y);return n(S,m,!0)}if(f)return r(m);const g=u.displacedBy.point,y=t(g.x,g.y);return n(y,m,d.shouldAnimate)};return(i,s)=>{if(pp(i))return i.critical.draggable.id===s.draggableId?null:o(s.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const u=i.completed;return u.result.draggableId===s.draggableId?null:o(s.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const Wre=()=>{const t=jre(),e=Ure();return(r,o)=>t(r,o)||e(r,o)||zre},Vre={dropAnimationFinished:sF},Hre=IP(Wre,Vre,null,{context:gE,areStatePropsEqual:TF})(Fre);function DF(t){return qg(xE).isUsingCloneFor===t.draggableId&&!t.isClone?null:bt.createElement(Hre,t)}function Zk(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return bt.createElement(DF,Od({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const kF=t=>e=>t===e,Gre=kF("scroll"),$re=kF("auto"),eI=(t,e)=>e(t.overflowX)||e(t.overflowY),qre=t=>{const e=window.getComputedStyle(t),n={overflowX:e.overflowX,overflowY:e.overflowY};return eI(n,Gre)||eI(n,$re)},Xre=()=>!1,IF=t=>t==null?null:t===document.body?Xre()?t:null:t===document.documentElement?null:qre(t)?t:IF(t.parentElement);var D2=t=>({x:t.scrollLeft,y:t.scrollTop});const MF=t=>t?window.getComputedStyle(t).position==="fixed"?!0:MF(t.parentElement):!1;var Kre=t=>{const e=IF(t),n=MF(t);return{closestScrollable:e,isFixedOnPage:n}},Yre=({descriptor:t,isEnabled:e,isCombineEnabled:n,isFixedOnPage:r,direction:o,client:a,page:i,closest:s})=>{const u=(()=>{if(!s)return null;const{scrollSize:p,client:m}=s,g=dF({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:m,scrollSize:p,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:g,diff:{value:gr,displacement:gr}}}})(),l=o==="vertical"?aE:HP,d=Fd({page:i,withPlaceholder:null,axis:l,frame:u});return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:l,isEnabled:e,client:a,page:i,frame:u,subject:d}};const Qre=(t,e)=>{const n=OP(t);if(!e||t!==e)return n;const r=n.paddingBox.top-e.scrollTop,o=n.paddingBox.left-e.scrollLeft,a=r+e.scrollHeight,i=o+e.scrollWidth,u=tE({top:r,right:i,bottom:a,left:o},n.border);return nE({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var Jre=({ref:t,descriptor:e,env:n,windowScroll:r,direction:o,isDropDisabled:a,isCombineEnabled:i,shouldClipSubject:s})=>{const u=n.closestScrollable,l=Qre(t,u),d=Wg(l,r),f=(()=>{if(!u)return null;const m=OP(u),g={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:m,page:Wg(m,r),scroll:D2(u),scrollSize:g,shouldClipSubject:s}})();return Yre({descriptor:e,isEnabled:!a,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:o,client:l,page:d,closest:f})};const Zre={passive:!1},eoe={passive:!0};var tI=t=>t.shouldPublishImmediately?Zre:eoe;const Uv=t=>t&&t.env.closestScrollable||null;function toe(t){const e=A.useRef(null),n=qg(k0),r=yE("droppable"),{registry:o,marshal:a}=n,i=xF(t),s=Ht(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),u=A.useRef(s),l=Ht(()=>pr((_,T)=>{e.current||ze();const D={x:_,y:T};a.updateDroppableScroll(s.id,D)}),[s.id,a]),d=at(()=>{const _=e.current;return!_||!_.env.closestScrollable?gr:D2(_.env.closestScrollable)},[]),f=at(()=>{const _=d();l(_.x,_.y)},[d,l]),p=Ht(()=>up(f),[f]),m=at(()=>{const _=e.current,T=Uv(_);if(_&&T||ze(),_.scrollOptions.shouldPublishImmediately){f();return}p()},[p,f]),g=at((_,T)=>{e.current&&ze();const D=i.current,k=D.getDroppableRef();k||ze();const I=Kre(k),M={ref:k,descriptor:s,env:I,scrollOptions:T};e.current=M;const O=Jre({ref:k,descriptor:s,env:I,windowScroll:_,direction:D.direction,isDropDisabled:D.isDropDisabled,isCombineEnabled:D.isCombineEnabled,shouldClipSubject:!D.ignoreContainerClipping}),F=I.closestScrollable;return F&&(F.setAttribute(Xk.contextId,n.contextId),F.addEventListener("scroll",m,tI(M.scrollOptions))),O},[n.contextId,s,m,i]),y=at(()=>{const _=e.current,T=Uv(_);return _&&T||ze(),D2(T)},[]),b=at(()=>{const _=e.current;_||ze();const T=Uv(_);e.current=null,T&&(p.cancel(),T.removeAttribute(Xk.contextId),T.removeEventListener("scroll",m,tI(_.scrollOptions)))},[m,p]),S=at(_=>{const T=e.current;T||ze();const D=Uv(T);D||ze(),D.scrollTop+=_.y,D.scrollLeft+=_.x},[]),C=Ht(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:y,dragStopped:b,scroll:S}),[b,g,y,S]),E=Ht(()=>({uniqueId:r,descriptor:s,callbacks:C}),[C,s,r]);Wo(()=>(u.current=E.descriptor,o.droppable.register(E),()=>{e.current&&b(),o.droppable.unregister(E)}),[C,s,b,E,a,o.droppable]),Wo(()=>{e.current&&a.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Wo(()=>{e.current&&a.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function J1(){}const nI={width:0,height:0,margin:lee},noe=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>t||n==="close"?nI:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},roe=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>{const r=noe({isAnimatingOpenOnMount:t,placeholder:e,animate:n});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Hh.placeholder:null}},ooe=t=>{const e=A.useRef(null),n=at(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:o,onClose:a,contextId:i}=t,[s,u]=A.useState(t.animate==="open");A.useEffect(()=>s?r!=="open"?(n(),u(!1),J1):e.current?J1:(e.current=setTimeout(()=>{e.current=null,u(!1)}),n):J1,[r,s,n]);const l=at(f=>{f.propertyName==="height"&&(o(),r==="close"&&a())},[r,a,o]),d=roe({isAnimatingOpenOnMount:s,animate:t.animate,placeholder:t.placeholder});return bt.createElement(t.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":i,onTransitionEnd:l,ref:t.innerRef})};var aoe=bt.memo(ooe);class ioe extends bt.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,n){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const soe=t=>{const e=A.useContext(k0);e||ze();const{contextId:n,isMovementAllowed:r}=e,o=A.useRef(null),a=A.useRef(null),{children:i,droppableId:s,type:u,mode:l,direction:d,ignoreContainerClipping:f,isDropDisabled:p,isCombineEnabled:m,snapshot:g,useClone:y,updateViewportMaxScroll:b,getContainerForClone:S}=t,C=at(()=>o.current,[]),E=at((F=null)=>{o.current=F},[]);at(()=>a.current,[]);const _=at((F=null)=>{a.current=F},[]),T=at(()=>{r()&&b({maxScroll:hF()})},[r,b]);toe({droppableId:s,type:u,mode:l,direction:d,isDropDisabled:p,isCombineEnabled:m,ignoreContainerClipping:f,getDroppableRef:C});const D=Ht(()=>bt.createElement(ioe,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:F,data:j,animate:G})=>bt.createElement(aoe,{placeholder:j,onClose:F,innerRef:_,animate:G,contextId:n,onTransitionEnd:T})),[n,T,t.placeholder,t.shouldAnimatePlaceholder,_]),k=Ht(()=>({innerRef:E,placeholder:D,droppableProps:{"data-rfd-droppable-id":s,"data-rfd-droppable-context-id":n}}),[n,s,D,E]),I=y?y.dragging.draggableId:null,M=Ht(()=>({droppableId:s,type:u,isUsingCloneFor:I}),[s,I,u]);function O(){if(!y)return null;const{dragging:F,render:j}=y,G=bt.createElement(DF,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(W,q)=>j(W,q,F));return ld.createPortal(G,S())}return bt.createElement(xE.Provider,{value:M},i(k,g),O())};function uoe(){return document.body||ze(),document.body}const rI={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:uoe},OF=t=>{let e={...t},n;for(n in rI)t[n]===void 0&&(e={...e,[n]:rI[n]});return e},Z1=(t,e)=>t===e.droppable.type,oI=(t,e)=>e.draggables[t.draggable.id],loe=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},n=pr(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=pr((a,i,s,u,l,d)=>{const f=l.descriptor.id;if(l.descriptor.droppableId===a){const g=d?{render:d,dragging:n(l.descriptor)}:null,y={isDraggingOver:s,draggingOverWith:s?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:g}}if(!i)return e;if(!u)return t;const m={isDraggingOver:s,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(a,i)=>{const s=OF(i),u=s.droppableId,l=s.type,d=!s.isDropDisabled,f=s.renderClone;if(pp(a)){const p=a.critical;if(!Z1(l,p))return e;const m=oI(p,a.dimensions),g=Uo(a.impact)===u;return r(u,d,g,g,m,f)}if(a.phase==="DROP_ANIMATING"){const p=a.completed;if(!Z1(l,p.critical))return e;const m=oI(p.critical,a.dimensions);return r(u,d,AF(p.result)===u,Uo(p.impact)===u,m,f)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const p=a.completed;if(!Z1(l,p.critical))return e;const m=Uo(p.impact)===u,g=!!(p.impact.at&&p.impact.at.type==="COMBINE"),y=p.critical.droppable.id===u;return m?g?t:e:y?t:e}return e}},coe={updateViewportMaxScroll:wte},aI=IP(loe,coe,(t,e,n)=>({...OF(n),...t,...e}),{context:gE,areStatePropsEqual:TF})(soe),iI=[{type:"heading",label:"Heading",icon:fY},{type:"paragraph",label:"Paragraph",icon:lY},{type:"image",label:"Image",icon:Lg},{type:"breakline",label:"Break Line",icon:ZX},{type:"horizontalline",label:"Horizontal Line",icon:zK},{type:"audio",label:"Audio",icon:YK},{type:"video",label:"Video",icon:X4},{type:"timer",label:"Timer",icon:bK},{type:"orderedlist",label:"Ordered List",icon:VK},{type:"unorderedlist",label:"Unordered List",icon:GK},{type:"randominteger",label:"Random Integer",icon:eY},{type:"videorecording",label:"Video Recording",icon:q4},{type:"audiorecording",label:"Audio Recording",icon:XC}];function doe({element:t,onTimeUpdate:e}){const[n,r]=A.useState(0),[o,a]=A.useState(!0);A.useEffect(()=>{let s;return o?s=setInterval(()=>{r(u=>{const l=u+1;return e&&e(l),l})},1e3):!o&&n!==0&&clearInterval(s),()=>clearInterval(s)},[o,e]);const i=s=>{const u=Math.floor(s/60),l=s%60;return`${u.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`};return w.jsxs(le,{style:{textAlign:t.align||"left",padding:8},children:[w.jsx(we,{fw:600,size:"md",mb:4,children:"Page Timer"}),w.jsx(we,{size:"lg",fw:700,style:{fontFamily:"monospace"},children:i(n)}),w.jsx(we,{size:"xs",color:"dimmed",mt:4,children:"Time spent on this page"})]})}function sI(t,e,n,r,o,a){const i={cursor:"pointer",position:"relative",marginBottom:16},s=({children:u})=>w.jsxs(le,{style:{...i,outline:n?"2px solid #2988f4":"none",outlineOffset:2},onMouseEnter:l=>{if(!n){const d=l.currentTarget.querySelector(".element-actions");d&&(d.style.display="block")}},onMouseLeave:l=>{if(!n){const d=l.currentTarget.querySelector(".element-actions");d&&(d.style.display="none")}},children:[u,w.jsx(le,{className:"element-actions",style:{position:"absolute",top:-10,right:-10,display:n?"block":"none",background:"rgba(0,0,0,0.8)",borderRadius:6,padding:4,zIndex:10},children:w.jsxs(Ge,{spacing:4,children:[!["videorecording","audiorecording"].includes(t.type)&&w.jsx($o,{label:"Properties",position:"top",children:w.jsx(Nn,{size:"sm",variant:"subtle",color:"white",onClick:l=>{l.stopPropagation(),o()},children:w.jsx(sY,{size:14})})}),w.jsx($o,{label:"Delete",position:"top",children:w.jsx(Nn,{size:"sm",variant:"subtle",color:"red",onClick:l=>{l.stopPropagation(),r()},children:w.jsx(Op,{size:14})})})]})})]});switch(t.type){case"heading":return w.jsx(s,{children:w.jsx(we,{fw:700,size:t.size||"xl",style:{textAlign:t.align||"left",color:"#000",marginBottom:8},onClick:e,children:t.content||"Tap to Edit Heading"})});case"paragraph":return w.jsx(s,{children:w.jsx(we,{style:{color:"#333",textAlign:t.align||"left",lineHeight:1.6,marginBottom:8},onClick:e,children:t.content||"Tap to Edit Paragraph"})});case"image":return w.jsx(s,{children:w.jsx(le,{style:{textAlign:t.align||"left"},onClick:e,children:t.url||t.fileUrl?w.jsx("img",{src:t.url||t.fileUrl,alt:t.fileName||"Image",style:{maxWidth:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"auto"}}):w.jsx(le,{style:{width:t.width?`${t.width}px`:"300px",height:t.height?`${t.height}px`:"200px",border:"2px dashed #ddd",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:w.jsxs("div",{style:{textAlign:"center"},children:[w.jsx(Lg,{size:40,color:"#ccc"}),w.jsx(we,{color:"dimmed",size:"sm",children:"Click to upload image"})]})})})});case"breakline":return w.jsx(s,{children:w.jsx("br",{})});case"horizontalline":return w.jsx(s,{children:w.jsx(zo,{color:"#ddd"})});case"audio":return w.jsx(s,{children:w.jsx(le,{style:{textAlign:t.align||"left"},onClick:e,children:t.url||t.fileUrl?w.jsxs("div",{children:[w.jsxs(we,{size:"sm",fw:500,mb:8,children:["Audio: ",t.fileName||"From URL"]}),w.jsxs("audio",{controls:!0,style:{width:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"auto"},children:[w.jsx("source",{src:t.url||t.fileUrl,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}):w.jsx(le,{style:{width:t.width?`${t.width}px`:"300px",height:t.height?`${t.height}px`:"60px",border:"1px dashed #ddd",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:w.jsx(we,{color:"dimmed",size:"sm",children:"[Audio - Upload audio file]"})})})});case"video":return w.jsx(s,{children:w.jsx(le,{style:{textAlign:t.align||"left"},onClick:e,children:t.url||t.fileUrl?w.jsxs("div",{children:[w.jsxs(we,{size:"sm",fw:500,mb:8,children:["Video: ",t.fileName||"From URL"]}),w.jsxs("video",{controls:!0,style:{width:t.width?`${t.width}px`:"400px",height:t.height?`${t.height}px`:"auto"},children:[w.jsx("source",{src:t.url||t.fileUrl,type:"video/mp4"}),"Your browser does not support the video element."]})]}):w.jsx(le,{style:{width:t.width?`${t.width}px`:"400px",height:t.height?`${t.height}px`:"250px",border:"1px dashed #ddd",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent"},children:w.jsx(we,{color:"dimmed",size:"sm",children:"[Video - Upload video file]"})})})});case"timer":return w.jsx(s,{children:w.jsx(doe,{element:t,onTimeUpdate:u=>console.log("Time spent:",u)})});case"orderedlist":return w.jsx(s,{children:w.jsx("ol",{style:{color:"#333",textAlign:t.align||"left",marginBottom:8,paddingLeft:20},onClick:e,children:t.listItems?t.listItems.map((u,l)=>w.jsx("li",{style:{marginBottom:4},children:u},l)):w.jsxs(w.Fragment,{children:[w.jsx("li",{style:{marginBottom:4},children:"Tap to Edit Item 1"}),w.jsx("li",{style:{marginBottom:4},children:"Tap to Edit Item 2"})]})})});case"unorderedlist":return w.jsx(s,{children:w.jsx("ul",{style:{color:"#333",textAlign:t.align||"left",marginBottom:8,paddingLeft:20},onClick:e,children:t.listItems?t.listItems.map((u,l)=>w.jsx("li",{style:{marginBottom:4},children:u},l)):w.jsxs(w.Fragment,{children:[w.jsx("li",{style:{marginBottom:4},children:"Tap to Edit Item 1"}),w.jsx("li",{style:{marginBottom:4},children:"Tap to Edit Item 2"})]})})});case"randominteger":return w.jsx(s,{children:w.jsxs(le,{style:{textAlign:t.align||"left",padding:"12px",border:"1px solid #e0e0e0",borderRadius:"6px",backgroundColor:"#f8f9fa"},onClick:e,children:[w.jsx(we,{fw:500,size:"sm",mb:8,color:"#333",children:"Random Integer"}),w.jsx(we,{size:"lg",fw:700,style:{fontFamily:"monospace",color:t.content?"#007CFF":"#999"},children:t.content||"Click to set number"}),w.jsxs(we,{size:"xs",color:"dimmed",mt:4,children:["Integer value: ",t.content||"Not set"]})]})});case"videorecording":return w.jsx(s,{children:w.jsxs(le,{style:{textAlign:"center",padding:"20px",border:"2px dashed #ff6b35",borderRadius:"8px",backgroundColor:"#fff5f0"},children:[w.jsx(q4,{size:48,color:"#ff6b35",style:{marginBottom:8}}),w.jsx(we,{fw:600,size:"md",color:"#ff6b35",mb:4,children:"Video Recording"}),w.jsx(we,{size:"sm",color:"dimmed",children:"Users will be able to record video here"})]})});case"audiorecording":return w.jsx(s,{children:w.jsxs(le,{style:{textAlign:"center",padding:"20px",border:"2px dashed #007CFF",borderRadius:"8px",backgroundColor:"#f0f7ff"},children:[w.jsx(XC,{size:48,color:"#007CFF",style:{marginBottom:8}}),w.jsx(we,{fw:600,size:"md",color:"#007CFF",mb:4,children:"Audio Recording"}),w.jsx(we,{size:"sm",color:"dimmed",children:"Users will be able to record audio here"})]})});default:return w.jsx("span",{})}}function foe({selectedElement:t,onPropertyChange:e,onClose:n}){const[r,o]=A.useState(""),[a,i]=A.useState(t?.url||"");if(bt.useEffect(()=>{t?.listItems&&o(t.listItems.join(`
`)),i(t?.url||"")},[t]),!t)return w.jsxs(le,{style:{width:300,background:"#2c2c2c",color:"#fff",padding:20,height:"100%"},children:[w.jsx(we,{size:"lg",fw:600,mb:"md",children:"Properties"}),w.jsx(we,{color:"dimmed",children:"Select an element to edit its properties"})]});if(["videorecording","audiorecording"].includes(t.type))return w.jsxs(le,{style:{width:300,background:"#2c2c2c",color:"#fff",padding:20,height:"100%"},children:[w.jsx(we,{size:"lg",fw:600,mb:"md",children:"Recording Element"}),w.jsx(we,{color:"dimmed",children:"Recording elements don't have configurable properties. The recording functionality will be handled in the user dashboard."}),w.jsx(He,{size:"xs",variant:"subtle",onClick:n,mt:"md",children:"Close"})]});const s=f=>{if(f){const p=URL.createObjectURL(f);e("fileName",f.name),e("fileUrl",p),e("url",""),i("")}},u=f=>{i(f),e("url",f),e("fileName",null),e("fileUrl",null)},l=f=>{o(f);const p=f.split(`
`).filter(m=>m.trim()!=="");e("listItems",p)},d=()=>{switch(t.type){case"heading":return"Heading Properties";case"paragraph":return"Paragraph Properties";case"image":return"Image Properties";case"audio":return"Audio Properties";case"video":return"Video Properties";case"timer":return"Timer Properties";case"orderedlist":return"Ordered List Properties";case"unorderedlist":return"Unordered List Properties";case"randominteger":return"Random Integer Properties";default:return"Element Properties"}};return w.jsx(le,{style:{width:300,background:"#2c2c2c",color:"#fff",height:"100%"},children:w.jsx(Xo,{style:{height:"100%"},children:w.jsxs(le,{style:{padding:20},children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsx(we,{size:"lg",fw:600,children:d()}),w.jsx(He,{size:"xs",variant:"subtle",onClick:n,children:"×"})]}),w.jsxs(Po,{spacing:"md",children:[["heading"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Content"}),w.jsx(xs,{value:t.content||"",onChange:f=>e("content",f.target.value),placeholder:"Enter heading text"})]}),["paragraph"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Content"}),w.jsx(np,{value:t.content||"",onChange:f=>e("content",f.target.value),placeholder:"Enter paragraph text",rows:6})]}),["randominteger"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Integer Value"}),w.jsx(bd,{value:parseInt(t.content)||"",onChange:f=>e("content",f?f.toString():""),placeholder:"Enter an integer number",min:-999999,max:999999,stepHoldDelay:500,stepHoldInterval:100}),w.jsxs(we,{size:"xs",color:"dimmed",mt:4,children:["Enter any integer number. This will be stored as:"," ",t.content||"empty"]})]}),["orderedlist","unorderedlist"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"List Items (one per line)"}),w.jsx(np,{value:r,onChange:f=>l(f.target.value),placeholder:"Enter list items, one per line",rows:4})]}),["image","audio","video"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:t.type==="image"?"Image File or URL":t.type==="audio"?"Audio File or URL":"Video File or URL"}),w.jsx(xs,{placeholder:"Enter URL (e.g. https://example.com/media.mp4)",leftSection:w.jsx($4,{size:16}),value:a,onChange:f=>u(f.target.value),mb:"md",disabled:!!t.fileUrl}),w.jsx(Pg,{placeholder:`Or upload ${t.type} file`,accept:t.type==="image"?"image/*":t.type==="audio"?"audio/*":"video/*",onChange:s,leftSection:w.jsx(KC,{size:14}),disabled:!!a}),t.fileName&&w.jsxs(we,{size:"xs",color:"green",mt:4,children:["Current file: ",t.fileName]}),a&&w.jsxs(we,{size:"xs",color:"green",mt:4,children:["Using URL: ",a]})]}),["image","audio","video"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Size"}),w.jsxs(Ge,{children:[w.jsx(bd,{placeholder:"300",value:t.width||"",onChange:f=>e("width",f),size:"xs",style:{width:80}}),w.jsx(we,{size:"xs",children:"PX"}),w.jsx(bd,{placeholder:"200",value:t.height||"",onChange:f=>e("height",f),size:"xs",style:{width:80}}),w.jsx(we,{size:"xs",children:"PX"})]}),w.jsxs(Ge,{mt:4,children:[w.jsx(we,{size:"xs",color:"dimmed",children:"Width"}),w.jsx(we,{size:"xs",color:"dimmed",ml:"auto",children:"Height"})]})]}),t.type==="heading"&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Size"}),w.jsx(Eu,{value:t.size||"xl",onChange:f=>e("size",f),data:[{value:"xs",label:"Extra Small"},{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"},{value:"xl",label:"Extra Large"}]})]}),!["breakline","horizontalline"].includes(t.type)&&w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Alignment"}),w.jsxs(Ge,{children:[w.jsx(He,{size:"xs",variant:t.align==="left"?"filled":"subtle",onClick:()=>e("align","left"),children:"LEFT"}),w.jsx(He,{size:"xs",variant:t.align==="center"?"filled":"subtle",onClick:()=>e("align","center"),children:"CENTER"}),w.jsx(He,{size:"xs",variant:t.align==="right"?"filled":"subtle",onClick:()=>e("align","right"),children:"RIGHT"})]}),w.jsx(we,{size:"xs",color:"dimmed",mt:4,children:"Select how the content is aligned horizontally"})]}),w.jsxs(le,{children:[w.jsx(we,{size:"sm",mb:4,children:"Duplicate Field"}),w.jsx(He,{variant:"light",size:"sm",children:"DUPLICATE"}),w.jsx(we,{size:"xs",color:"dimmed",mt:4,children:"Duplicate this field with all saved settings"})]})]})]})})})}function hoe(){const t=Sa(),e=Ga(),[n,r]=A.useState("New Jotform"),[o,a]=A.useState([[]]),[i,s]=A.useState(0),[u,l]=A.useState(null),[d,f]=A.useState(!1),[p,m]=A.useState(!1);A.useEffect(()=>{t.state?.jotformName&&r(t.state.jotformName)},[t.state]);const g=M=>{const{source:O,destination:F}=M;if(F){if(O.droppableId==="elements"&&F.droppableId==="canvas"){const j={...iI[O.index],content:"",id:Date.now()},G=Array.from(o);G[i]=[...G[i].slice(0,F.index),j,...G[i].slice(F.index)],a(G)}else if(O.droppableId==="canvas"&&F.droppableId==="canvas"){const j=Array.from(o[i]),[G]=j.splice(O.index,1);j.splice(F.index,0,G);const W=Array.from(o);W[i]=j,a(W)}}},y=M=>{l(M);const O=o[i][M];["videorecording","audiorecording"].includes(O.type)||f(!0)},b=M=>{const O=Array.from(o);O[i].splice(M,1),a(O),l(null),f(!1)},S=(M,O)=>{if(u===null)return;const F=[...o];F[i][u]={...F[i][u],[M]:O},a(F)},C=()=>{a([...o,[]]),s(o.length)},E=()=>{i>0&&s(i-1)},_=()=>{i<o.length-1&&s(i+1)},T=()=>{console.log("Form submitted!",{jotformName:n,pages:o})},D=async()=>{const M=o.map((F,j)=>{const G=F.map((W,q)=>{let P;switch(W.type){case"heading":case"paragraph":P=W.content||`Default ${W.type} content`;break;case"randominteger":P=W.content||"0";break;case"videorecording":case"audiorecording":P="";break;case"image":case"audio":case"video":W.url?P=W.url:W.fileName?P={fileName:W.fileName,fileUrl:W.fileUrl,mimeType:W.mimeType||"application/octet-stream",size:W.fileSize||0}:P=`No content for ${W.type}`;break;case"orderedlist":case"unorderedlist":P=W.listItems?W.listItems.join(", "):`Default list items for ${W.type}`;break;case"timer":P="Timer element - tracks time spent on page";break;case"breakline":P="Line break";break;case"horizontalline":P="Horizontal divider line";break;default:P=`${W.type} element`;break}return{id:W.id||`element_${j}_${q}`,tagName:W.type,elementName:W.type,content:P,sequence:q+1,page:j+1}});return{page:j+1,totalElements:G.length,elements:G}}),O={jotformName:n,totalPages:o.length,pages:M};console.log("=== LEARNING MATERIAL DATA (ALL PAGES) ==="),console.log("Jotform Name:",n),console.log("Total Pages:",o.length),console.log("All Pages Data:",O),console.log("Detailed Pages:"),M.forEach(F=>{console.log(`
Page ${F.page} (Total Elements: ${F.totalElements}):`),console.table(F.elements)}),console.log("=======================================");try{console.log(O);const F=await ut.post("http://localhost:8081/api/jotforms",O,{headers:{"Content-Type":"application/json"},withCredentials:!0});bn.show({title:"Success!",message:"Learning material saved successfully",color:"green"}),console.log("✅ Saved to database:",F.data),console.log(O),e("/jotformmanagment")}catch(F){console.error("❌ Failed to save learning material:",F),bn.show({title:"Error",message:"Failed to save learning material. Please try again.",color:"red"})}},k=i===0,I=i===o.length-1;return w.jsxs(le,{style:{height:"100vh",display:"flex",flexDirection:"column",background:"#f0f0f0"},children:[w.jsxs(le,{style:{background:"#ff6b35",padding:"12px 24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsxs(Ge,{children:[w.jsx(He,{size:"sm",variant:"white",leftSection:w.jsx(qC,{size:16}),onClick:()=>m(!p),children:p?"Edit":"Preview"}),w.jsx(He,{size:"sm",variant:"white",leftSection:w.jsx(nK,{size:16}),onClick:D,style:{background:"#4CAF50",color:"white",border:"none"},children:"Create Learning Material"})]}),w.jsxs(Ge,{children:[w.jsxs(we,{size:"sm",style:{color:"white",fontWeight:600},children:["Page ",i+1," of ",o.length]}),w.jsx(He,{size:"sm",variant:"white",onClick:C,children:"+ Add Page"})]})]}),w.jsx(le,{style:{flex:1,display:"flex"},children:w.jsxs(_re,{onDragEnd:g,children:[!p&&w.jsxs(le,{style:{width:200,background:"#2c2c2c",color:"#fff",padding:16,borderRight:"1px solid #444"},children:[w.jsx(we,{fw:700,size:"sm",mb:"md",style:{color:"#ff6b35"},children:"FORM ELEMENTS"}),w.jsx(aI,{droppableId:"elements",isDropDisabled:!0,children:M=>w.jsxs("div",{ref:M.innerRef,...M.droppableProps,children:[iI.map((O,F)=>w.jsx(Zk,{draggableId:O.type,index:F,children:j=>w.jsxs(Ge,{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,style:{background:"#3c3c3c",borderRadius:8,padding:"8px 12px",marginBottom:8,cursor:"grab",fontSize:13,...j.draggableProps.style},spacing:8,children:[w.jsx(O.icon,{size:16}),O.label]})},O.type)),M.placeholder]})})]}),w.jsx(le,{style:{flex:1,background:"#f5f5f5",display:"flex",justifyContent:"center",padding:20},children:w.jsx(le,{style:{width:"100%",maxWidth:800,background:"#fff",minHeight:"calc(100vh - 120px)",boxShadow:"0 0 10px rgba(0,0,0,0.1)",position:"relative"},children:w.jsx(Xo,{style:{height:"calc(100vh - 120px)"},children:w.jsxs(le,{style:{padding:"40px 60px"},children:[w.jsx(we,{fw:700,size:"xl",align:"center",mb:"xl",style:{color:"#333"},children:n}),p?w.jsx("div",{children:(o[i]||[]).map((M,O)=>w.jsx(le,{mb:"md",children:sI(M,()=>{},!1,()=>{},()=>{})},O))}):w.jsx(aI,{droppableId:"canvas",children:M=>w.jsxs("div",{ref:M.innerRef,...M.droppableProps,style:{minHeight:400},children:[(o[i]||[]).length===0&&w.jsx(we,{align:"center",color:"gray",style:{padding:40},children:"Drag your first question here from the left"}),(o[i]||[]).map((O,F)=>w.jsx(Zk,{draggableId:`canvas-element-${F}`,index:F,children:j=>w.jsx("div",{ref:j.innerRef,...j.draggableProps,...j.dragHandleProps,style:{...j.draggableProps.style},children:sI(O,()=>y(F),u===F,()=>b(F),()=>y(F))})},`${O.id||F}-${O.type}`)),M.placeholder]})}),w.jsxs(Ge,{justify:"center",mt:"xl",spacing:"md",style:{paddingTop:40},children:[!k&&w.jsx(He,{size:"md",variant:"outline",onClick:E,children:"Back"}),I?w.jsx(He,{size:"md",style:{background:"#00C851"},onClick:T,children:"Submit"}):w.jsx(He,{size:"md",style:{background:"#007CFF"},onClick:_,children:"Next"})]})]})})})}),!p&&d&&w.jsx(foe,{selectedElement:u!==null?o[i][u]:null,onPropertyChange:S,onClose:()=>f(!1)})]})})]})}function PF(t){const[e,n]=A.useState("learning"),[r,o]=A.useState(!1),[a,i]=A.useState([]),[s,u]=A.useState([]),[l,d]=A.useState(!1),f=async()=>{o(!0);try{const S=await ut.get("http://localhost:8081/api/jotforms/names",{withCredentials:!0});i(S.data)}catch(S){console.error("Error fetching jotform names",S),bn.show({title:"Fetch Error",message:"Could not load Jotform names. Please try again.",color:"red"}),i([])}finally{o(!1)}},p=async()=>{d(!0);try{const S=await ut.get("http://localhost:8081/api/courses/names",{withCredentials:!0});u(S.data)}catch(S){console.error("Error fetching existing courses",S),bn.show({title:"Fetch Error",message:"Could not load existing course names. Please try again.",color:"red"}),u([])}finally{d(!1)}};A.useEffect(()=>{f(),p()},[]);const m=sp({initialValues:{courseName:"",jotformName:"",imageFile:null,pdfFile:null},validate:{courseName:S=>S.trim().length>0?null:"Please enter a course name",jotformName:S=>S?null:"Please select a Jotform"}}),g=async S=>{try{const C=new FormData;C.append("courseName",S.courseName),C.append("jotformName",S.jotformName),S.imageFile&&C.append("imageFile",S.imageFile),S.pdfFile&&C.append("pdfFile",S.pdfFile),await ut.post("http://localhost:8081/api/courses/learning",C,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),bn.show({title:"Success",message:"Learning form mapped successfully!",color:"green"}),t.onSuccess()}catch(C){console.error("Error submitting learning form mapping",C),bn.show({title:"Submission Failed",message:"Failed to map the learning form. Please check the details and try again.",color:"red"})}},y=sp({initialValues:{courseName:"",jotformName:""},validate:{courseName:S=>S?null:"Please select a course name",jotformName:S=>S?null:"Please select a jotform"}}),b=async S=>{try{const C={courseName:S.courseName,jotformName:S.jotformName};await ut.post("http://localhost:8081/api/courses/assignment",C,{headers:{"Content-Type":"application/json"},withCredentials:!0}),bn.show({title:"Success",message:"Assignment form mapped successfully!",color:"green"}),t.onSuccess()}catch(C){console.error("Error submitting assignment mapping",C),bn.show({title:"Submission Failed",message:"Failed to map the assignment form. Please ensure the course exists.",color:"red"})}};return w.jsxs(Ra,{className:CP.formPaper,radius:"md",p:"lg",withBorder:!0,...t,style:{maxWidth:400,margin:"0 auto"},children:[w.jsx(we,{size:"lg",fw:500,ta:"center",children:"Jotform Mapping"}),w.jsx(Ge,{justify:"center",mt:"md",mb:"lg",children:w.jsx(UC,{value:e,onChange:n,data:[{label:"Jotform Learning",value:"learning"},{label:"Jotform Assignment",value:"assignment"}],color:"blue",size:"md"})}),w.jsx(zo,{label:"Select mapping details",labelPosition:"center",my:"lg"}),e==="learning"?w.jsx("form",{onSubmit:m.onSubmit(g),children:w.jsxs(Po,{children:[w.jsx(xs,{label:"Course Name",placeholder:"Enter new or existing course name",required:!0,...m.getInputProps("courseName"),radius:"md"}),w.jsx(Eu,{label:"Jotform Name",placeholder:r?"Loading...":"Select existing jotform",required:!0,searchable:!0,data:a,...m.getInputProps("jotformName"),radius:"md",disabled:r}),w.jsx(Pg,{label:"Upload Image (Optional)",placeholder:"Select image file",accept:"image/*",...m.getInputProps("imageFile"),radius:"md",clearable:!0}),w.jsx(Pg,{label:"Upload PDF (Optional)",placeholder:"Select PDF file",accept:"application/pdf",...m.getInputProps("pdfFile"),radius:"md",clearable:!0}),w.jsx(He,{type:"submit",radius:"xl",mt:"md",children:"Map Learning Jotform"})]})}):w.jsx("form",{onSubmit:y.onSubmit(b),children:w.jsxs(Po,{children:[w.jsx(Eu,{label:"Course Name",placeholder:l?"Loading...":"Select existing course",required:!0,searchable:!0,data:s,...y.getInputProps("courseName"),radius:"md",disabled:l}),w.jsx(Eu,{label:"Jotform Name",placeholder:"Select jotform",required:!0,searchable:!0,data:a,...y.getInputProps("jotformName"),radius:"md",disabled:r}),w.jsx(He,{type:"submit",radius:"xl",mt:"md",children:"Map Assignment Jotform"})]})})]})}function poe(){const[t,e]=A.useState([]),[n,r]=A.useState(!1),[o,a]=A.useState(!1),[i,s]=A.useState(!1),[u,l]=A.useState(null),d=async()=>{r(!0);try{const y=await ut.get("http://localhost:8081/api/courses",{withCredentials:!0});e(y.data)}catch(y){console.error("Error fetching courses:",y),e([])}finally{r(!1)}};A.useEffect(()=>{d()},[]);const f=y=>{console.log("Editing course:",y)},p=y=>{l(y),s(!0)},m=()=>{l(null),s(!1)},g=async()=>{if(u)try{await ut.delete(`http://localhost:8081/api/courses/${u.id}`,{withCredentials:!0}),e(t.filter(y=>y.id!==u.id)),m()}catch(y){console.error(`Error deleting course ${u.courseName}:`,y)}};return w.jsxs(cn,{size:"lg",py:"xl",children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsx(jt,{order:2,children:"Course Management"}),w.jsx(He,{onClick:()=>a(!0),children:"Map Jotforms"})]}),n?w.jsx(we,{ta:"center",c:"dimmed",children:"Loading courses..."}):t.length>0?w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Course Name"}),w.jsx(Re.Th,{children:"Jotform Learning"}),w.jsx(Re.Th,{children:"Jotform Assignment"}),w.jsx(Re.Th,{children:"Mind Map"}),w.jsx(Re.Th,{children:"Actions"})]})}),w.jsx(Re.Tbody,{children:t.map(y=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:y.courseName}),w.jsx(Re.Td,{children:y.learningJotformName||"N/A"}),w.jsx(Re.Td,{children:y.assignmentJotformName||"N/A"}),w.jsx(Re.Td,{children:y.imageFileName||"N/A"}),w.jsx(Re.Td,{children:w.jsxs(Ge,{gap:"xs",justify:"center",children:[w.jsx($o,{label:"Edit Course",children:w.jsx(Nn,{variant:"subtle",color:"blue",onClick:()=>f(y),children:w.jsx(x0,{size:18})})}),w.jsx($o,{label:"Delete Course",children:w.jsx(Nn,{variant:"subtle",color:"red",onClick:()=>p(y),children:w.jsx(Op,{size:18})})})]})})]},y.id))})]}):w.jsx(we,{ta:"center",c:"dimmed",children:"No courses available."}),w.jsx(Nr,{opened:o,onClose:()=>a(!1),title:"Map Jotform to Course",size:"xl",children:w.jsx(PF,{onSuccess:()=>{a(!1),d()}})}),w.jsxs(Nr,{opened:i,onClose:m,title:`Delete ${u?.courseName||"Course"}`,centered:!0,children:[w.jsx(we,{children:"Are you sure you want to delete this course? This action cannot be undone."}),w.jsxs(Ge,{justify:"flex-end",mt:"md",children:[w.jsx(He,{variant:"default",onClick:m,children:"Cancel"}),w.jsx(He,{color:"red",onClick:g,children:"Delete Course"})]})]})]})}const ew=[{rank:1,username:"sanskar1419",score:115},{rank:2,username:"bhav380-2",score:105},{rank:3,username:"ShabanaShaik1987",score:100},{rank:4,username:"shubham7522",score:80},{rank:5,username:"rishavd3v",score:80},{rank:6,username:"inv-amalusudhakaran",score:70},{rank:7,username:"Dev-Code24",score:65},{rank:8,username:"shubham-sanvariya",score:60},{rank:30,username:"Navya",score:10}],moe=[...ew.slice(0,8),"SKIP",ew[ew.length-1]];function voe({userRank:t=30,username:e="Navya",score:n=10}){return w.jsxs(cn,{size:"md",py:"xl",children:[w.jsx(Ge,{justify:"center",mb:"md",align:"center",children:w.jsx(jt,{order:2,style:{color:"#e0e8f4",letterSpacing:1,fontWeight:700},children:"Analytic Leader Dashboard"})}),w.jsx(Ra,{withBorder:!0,radius:"md",p:0,mt:"md",style:{overflow:"hidden",background:"#161c23",boxShadow:"0 2px 16px 0 rgba(36, 133, 255, 0.07)"},children:w.jsx(Xo,{type:"auto",style:{maxHeight:480},children:w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Rank"}),w.jsx(Re.Th,{children:"Username"}),w.jsx(Re.Th,{children:"Score"})]})}),w.jsx(Re.Tbody,{children:moe.map((r,o)=>r==="SKIP"?w.jsxs(Re.Tr,{style:{background:"#212232"},children:[w.jsx(Re.Td,{align:"center",style:{color:"#444d5b",fontWeight:600,textAlign:"center"},children:"."}),w.jsx(Re.Td,{align:"center",style:{color:"#444d5b",fontWeight:600,textAlign:"center"},children:"."}),w.jsx(Re.Td,{align:"center",style:{color:"#444d5b",fontWeight:600,textAlign:"center"},children:"."})]},"skip"):w.jsxs(Re.Tr,{style:{background:r.rank===t?"linear-gradient(90deg, #13436c 0%, #2669a6 100%)":"#222733",fontWeight:r.rank===t?700:400,color:r.rank===t?"#fff":"#d4ddf3",transition:"background 0.2s"},children:[w.jsx(Re.Td,{style:{border:"none"},children:r.rank}),w.jsx(Re.Td,{style:{border:"none"},children:r.username}),w.jsx(Re.Td,{style:{border:"none"},children:r.score})]},r.rank))})]})})})]})}function goe({element:t}){const{content:e,tagName:n,align:r,width:o,height:a,required:i,style:s={},placeholder:u}=t,l={textAlign:r||"left",width:o||"auto",height:a||"auto",...s};switch(n){case"heading":return w.jsxs(we,{fw:700,size:t.size||"xl",mb:"md",style:l,children:[e,i&&w.jsx("span",{style:{color:"red"},children:" *"})]});case"paragraph":return w.jsx(we,{size:t.size||"md",mb:"md",style:{...l,lineHeight:1.6},children:e});case"image":return w.jsxs(le,{mb:"md",style:l,children:[w.jsx(tp,{src:typeof e=="string"?e:e.fileUrl,alt:t.elementName||u||"Image",width:o||void 0,height:a||void 0,fit:"contain"}),typeof e=="object"&&w.jsx(we,{size:"xs",mt:4,c:"dimmed",children:e.fileName})]});case"video":return w.jsx(le,{mb:"md",style:l,children:w.jsxs("video",{width:o||"100%",height:a||"auto",controls:!0,children:[w.jsx("source",{src:e,type:"video/mp4"}),"Your browser does not support the video tag."]})});case"audio":return w.jsx(le,{mb:"md",style:l,children:w.jsxs("audio",{controls:!0,children:[w.jsx("source",{src:e,type:"audio/mpeg"}),"Your browser does not support the audio element."]})});case"horizontalline":case"breakline":return w.jsx(zo,{my:"md",style:l});case"orderedlist":return w.jsx("ol",{style:l,children:e.split(",").map((d,f)=>w.jsx("li",{children:d.trim()},f))});case"unorderedlist":return w.jsx("ul",{style:l,children:e.split(",").map((d,f)=>w.jsx("li",{children:d.trim()},f))});case"randominteger":return w.jsxs(le,{mb:"md",style:l,children:[w.jsx(we,{fw:500,size:"md",mb:4,children:"Random Integer"}),w.jsx(we,{size:"xl",fw:700,style:{fontFamily:"monospace",color:"#007CFF",padding:"8px 12px",background:"#f0f7ff",borderRadius:"4px",display:"inline-block"},children:e||"0"})]});case"videorecording":return w.jsx(le,{mb:"md",style:l,children:w.jsxs(le,{style:{textAlign:"center",padding:"20px",border:"2px dashed #ff6b35",borderRadius:"8px",backgroundColor:"#fff5f0"},children:[w.jsx(we,{fw:600,size:"md",color:"#ff6b35",mb:4,children:"Video Recording Element"}),w.jsx(we,{size:"sm",color:"dimmed",children:"This element will enable video recording functionality in assignments"})]})});case"audiorecording":return w.jsx(le,{mb:"md",style:l,children:w.jsxs(le,{style:{textAlign:"center",padding:"20px",border:"2px dashed #007CFF",borderRadius:"8px",backgroundColor:"#f0f7ff"},children:[w.jsx(we,{fw:600,size:"md",color:"#007CFF",mb:4,children:"Audio Recording Element"}),w.jsx(we,{size:"sm",color:"dimmed",children:"This element will enable audio recording functionality in assignments"})]})});case"timer":return w.jsx(le,{mb:"md",style:l,children:w.jsxs(le,{style:{padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#f8f9fa",textAlign:"center"},children:[w.jsx(we,{fw:600,size:"md",mb:8,children:"Page Timer"}),w.jsx(we,{size:"lg",fw:700,style:{fontFamily:"monospace"},children:"00:00"}),w.jsx(we,{size:"xs",color:"dimmed",mt:4,children:"Time tracking will be active during assignments"})]})});default:return w.jsx(we,{style:l,children:e})}}function FF({jotformName:t,onBack:e,hideBackButton:n=!1,onSubmit:r}){const[o,a]=A.useState(null),[i,s]=A.useState(!0),[u,l]=A.useState(0);A.useEffect(()=>{if(!t){s(!1),bn.show({title:"Error",message:"No Jotform name was provided.",color:"red"});return}(async()=>{s(!0),l(0);try{const S=(await ut.get("http://localhost:8081/api/jotforms",{withCredentials:!0})).data.find(C=>C.jotformName===t);S?a(S):bn.show({title:"Not Found",message:`Jotform with name "${t}" could not be found.`,color:"orange"})}catch(b){bn.show({title:"Network Error",message:"Failed to load the form. Please check your connection and try again.",color:"red"}),console.error("Fetch Jotform Error:",b)}finally{s(!1)}})()},[t]);const d=()=>{u>0&&l(u-1)},f=()=>{o&&u<o.totalPages-1&&l(u+1)},p=()=>{r?r(o):(bn.show({title:"Success!",message:"The form has been submitted successfully.",color:"green"}),console.log("Form submitted:",o))},m=()=>{if(!o||o.totalPages<=1)return null;const y=u===0,b=u===o.totalPages-1;return w.jsxs(Ge,{justify:"center",mt:"xl",children:[!y&&w.jsx(He,{variant:"outline",onClick:d,size:"md",children:"Back"}),b?w.jsx(He,{onClick:p,size:"md",color:"green",children:"Submit"}):w.jsx(He,{onClick:f,size:"md",children:"Next"})]})},g=()=>{if(i)return w.jsxs(le,{ta:"center",mt:"xl",children:[w.jsx(Ko,{}),w.jsx(we,{mt:"md",children:"Loading Form..."})]});if(o&&o.pages&&o.pages[u]){const y=o.pages[u];return w.jsxs(le,{style:{maxWidth:800,margin:"0 auto",padding:"40px",background:"#fff",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",minHeight:"60vh"},children:[w.jsx(we,{fw:800,size:"xl",ta:"center",mb:"md",children:o.jotformName}),o.totalPages>1&&w.jsxs(we,{ta:"center",size:"sm",color:"dimmed",mb:"xl",children:["Page ",u+1," of ",o.totalPages]}),w.jsx(le,{mb:"xl",children:y.elements.sort((b,S)=>b.sequence-S.sequence).map(b=>w.jsx(goe,{element:b},b.id))}),m()]})}return w.jsx(le,{ta:"center",mt:"xl",children:w.jsx(we,{color:"dimmed",children:"No content available. A notification may have indicated an error."})})};return w.jsxs(le,{p:n?"md":"xl",children:[!n&&w.jsx("button",{onClick:e,style:{background:"#333",color:"white",padding:"8px 16px",borderRadius:"6px",marginBottom:"20px",cursor:"pointer",border:"none",fontSize:"14px"},children:"⬅ Back to Courses"}),g()]})}function BF({jotformName:t,courseName:e}){const n=Ga(),r=()=>{n(`/assignment/${t}?course=${encodeURIComponent(e)}`)};return w.jsx(cn,{size:"md",py:"xl",children:w.jsxs(Yr,{shadow:"sm",padding:"xl",radius:"md",children:[w.jsxs(Ge,{mb:"md",children:[w.jsx(LK,{size:24,color:"blue"}),w.jsxs(jt,{order:2,children:["Exam Instructions - ",e]})]}),w.jsx(ss,{icon:w.jsx($D,{size:16}),color:"blue",mb:"xl",children:"Please read all instructions carefully before proceeding."}),w.jsxs(Po,{spacing:"lg",children:[w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:"📋 General Instructions"}),w.jsxs(zn,{spacing:"sm",children:[w.jsx(zn.Item,{children:"Ensure you have a stable internet connection"}),w.jsx(zn.Item,{children:"Find a quiet, well-lit environment"}),w.jsx(zn.Item,{children:"Keep your student ID ready for verification"}),w.jsx(zn.Item,{children:"Close all other applications and browser tabs"}),w.jsx(zn.Item,{children:"Do not use any unauthorized materials during the exam"})]})]}),w.jsx(zo,{}),w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:"🔒 Security & Monitoring"}),w.jsxs(zn,{spacing:"sm",children:[w.jsx(zn.Item,{children:"Your camera and microphone will be monitored throughout the exam"}),w.jsx(zn.Item,{children:"Screen recording and monitoring will be active"}),w.jsx(zn.Item,{children:"Switching tabs or applications may be flagged as suspicious"}),w.jsx(zn.Item,{children:"Any violations may result in automatic exam termination"})]})]}),w.jsx(zo,{}),w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:"📸 Identity Verification"}),w.jsxs(zn,{spacing:"sm",children:[w.jsx(zn.Item,{children:"Take a clear photo of yourself for identity verification"}),w.jsx(zn.Item,{children:"Ensure your face is clearly visible and well-lit"})]})]}),w.jsx(zo,{}),w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:"⚠️ Technical Requirements"}),w.jsxs(zn,{spacing:"sm",children:[w.jsx(zn.Item,{children:"Camera and microphone access is mandatory"}),w.jsx(zn.Item,{children:"Exam will run in fullscreen mode"}),w.jsx(zn.Item,{children:"Recording capabilities must be enabled"}),w.jsx(zn.Item,{children:"Modern browser with HTML5 support required"})]})]}),w.jsx(ss,{icon:w.jsx($D,{size:16}),color:"orange",mt:"md",children:w.jsx(we,{size:"sm",weight:500,children:`By clicking "I Understand and Agree", you will proceed to the assignment where you'll complete camera setup, identity verification, and begin the exam.`})})]}),w.jsx(Ge,{justify:"center",mt:"xl",children:w.jsx(He,{size:"lg",onClick:r,leftSection:w.jsx(f2,{size:16}),children:"I Understand and Agree"})})]})})}const yoe="_backButton_1ne6b_57",boe="_courseTitle_1ne6b_68",xoe="_courseGroup_1ne6b_76",woe="_navigationContainer_1ne6b_82",Soe="_navButton_1ne6b_91",Kc={backButton:yoe,courseTitle:boe,courseGroup:xoe,navigationContainer:woe,navButton:Soe};function LF({course:t,onBack:e}){const[n,r]=A.useState(t.learningJotformName?"learning":"assignment");return w.jsxs(le,{style:{display:"flex",height:"100vh",backgroundColor:"#f8f9fa",margin:0,padding:0,overflow:"hidden"},children:[w.jsxs(le,{style:{flex:"0 0 300px",background:"linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)",color:"white",padding:"24px",boxShadow:"2px 0 10px rgba(0, 0, 0, 0.1)",overflowY:"auto",display:"flex",flexDirection:"column",boxSizing:"border-box"},children:[w.jsx(He,{variant:"subtle",color:"gray",leftSection:w.jsx(gg,{size:16}),onClick:e,mb:"xl",size:"sm",className:Kc.backButton,children:"Back to Courses"}),w.jsxs(le,{mb:"xl",children:[w.jsx(jt,{order:3,className:Kc.courseTitle,children:t.courseName}),w.jsxs(we,{size:"sm",className:Kc.courseGroup,children:["Group: ",t.groupName]})]}),w.jsxs(le,{className:Kc.navigationContainer,children:[t.learningJotformName&&w.jsx(He,{variant:n==="learning"?"filled":"subtle",color:"blue",fullWidth:!0,leftSection:w.jsx(ip,{size:16}),onClick:()=>r("learning"),mb:"md",className:Kc.navButton,children:"Learning Material"}),t.assignmentJotformName&&w.jsx(He,{variant:n==="assignment"?"filled":"subtle",color:"orange",fullWidth:!0,leftSection:w.jsx(G4,{size:16}),onClick:()=>r("assignment"),mb:"md",className:Kc.navButton,children:"Assignment"})]})]}),w.jsx(le,{style:{flex:1,overflowY:"auto",backgroundColor:"#f8f9fa",padding:0,margin:0,boxSizing:"border-box"},children:w.jsxs(le,{style:{padding:"24px",minHeight:"100%"},children:[n==="learning"&&t.learningJotformName&&w.jsx(FF,{jotformName:t.learningJotformName,onBack:e,hideBackButton:!0}),n==="assignment"&&t.assignmentJotformName&&w.jsx(BF,{jotformName:t.assignmentJotformName,courseName:t.courseName})]})})]})}const Coe="_card_1mncu_1",Eoe="_image_1mncu_13",Roe="_overlay_1mncu_26",_oe="_content_1mncu_36",Toe="_title_1mncu_45",Aoe="_bodyText_1mncu_50",Noe="_author_1mncu_56",lu={card:Coe,image:Eoe,overlay:Roe,content:_oe,title:Toe,bodyText:Aoe,author:Noe};function jF({course:t,onSelectCourse:e}){const n=()=>{const o={BL:"https://images.unsplash.com/photo-1521737711867-e3b97375f902?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",BE:"https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",BM:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"};return o[t.groupName]||o.BL},r=()=>t.imageFileName&&t.imageFile?`data:image/jpeg;base64,${t.imageFile}`:(t.imageFileName,n());return w.jsxs(Yr,{p:"lg",shadow:"lg",className:lu.card,radius:"md",onClick:()=>e(t),children:[w.jsx("div",{className:lu.image,style:{backgroundImage:`url(${r()})`}}),w.jsx("div",{className:lu.overlay}),w.jsx("div",{className:lu.content,children:w.jsxs("div",{children:[w.jsx(we,{size:"lg",className:lu.title,fw:500,children:t.courseName}),w.jsxs(Ge,{justify:"space-between",gap:"xs",children:[w.jsxs(we,{size:"sm",className:lu.author,children:["Group: ",t.groupName]}),w.jsxs(Ge,{gap:"lg",children:[t.learningJotformName&&w.jsxs(Ge,{gap:4,children:[w.jsx(ip,{size:16,color:"white"}),w.jsx(we,{size:"sm",className:lu.bodyText,children:"Learning"})]}),t.assignmentJotformName&&w.jsxs(Ge,{gap:4,children:[w.jsx(G4,{size:16,color:"white"}),w.jsx(we,{size:"sm",className:lu.bodyText,children:"Assignment"})]})]})]})]})})]})}function Doe(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),[o,a]=A.useState(null),[i,s]=A.useState(null);A.useEffect(()=>{(async()=>{r(!0),a(null);try{const f=await ut.get("http://localhost:8081/api/courses",{withCredentials:!0});e(f.data)}catch(f){a("Failed to fetch courses. Please try again later."),console.error(f)}finally{r(!1)}})()},[]);const u=d=>{s(d)},l=()=>{s(null)};return i?w.jsx(LF,{course:i,onBack:l}):w.jsxs(cn,{size:"xl",py:"xl",children:[w.jsx(jt,{order:2,ta:"center",mb:"md",children:"Course Catalog"}),n?w.jsxs(Ge,{justify:"center",children:[w.jsx(Ko,{}),w.jsx(we,{children:"Loading courses..."})]}):o?w.jsx(we,{ta:"center",c:"red",children:o}):t.length>0?w.jsx(zu,{cols:{base:1,sm:2,md:3,lg:4},spacing:"lg",children:t.map(d=>w.jsx(jF,{course:d,onSelectCourse:u},d.id))}):w.jsx(we,{ta:"center",c:"dimmed",children:"No courses available."})]})}function koe(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),[o,a]=A.useState(!1),i=async()=>{r(!0);try{const p=await ut.get("http://localhost:8081/api/jotforms",{withCredentials:!0});e(p.data)}catch(p){console.error("Error fetching Jotforms:",p),bn.show({title:"Error Fetching Data",message:"Could not retrieve the list of Jotforms. Please try refreshing the page.",color:"red"}),e([])}finally{r(!1)}};A.useEffect(()=>{i()},[]);const s=p=>{console.log(`Edit Jotform with ID: ${p}`),bn.show({title:"Feature Not Available",message:"Edit functionality is yet to be implemented.",color:"blue"})},u=async p=>{try{await ut.delete(`http://localhost:8081/api/jotforms/${p.id}`,{withCredentials:!0}),e(m=>m.filter(g=>g.id!==p.id)),bn.show({title:"Jotform Deleted",message:`The form "${p.jotformName}" has been successfully deleted.`,color:"green"})}catch(m){console.error(`Error deleting jotform ${p.id}:`,m),bn.show({title:"Deletion Failed",message:"An error occurred while trying to delete the Jotform.",color:"red"})}},l=p=>{j4.openConfirmModal({title:"Delete Jotform",centered:!0,children:w.jsxs(we,{size:"sm",children:["Are you sure you want to delete the form"," ",w.jsxs(we,{span:!0,fw:700,children:['"',p.jotformName,'"']}),"? This action is permanent and cannot be undone."]}),labels:{confirm:"Delete Jotform",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:()=>u(p)})},d=t.map(p=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:p.jotformName}),w.jsx(Re.Td,{children:w.jsxs(Ge,{gap:"sm",children:[w.jsx($o,{label:"Edit Form",children:w.jsx(Nn,{variant:"subtle",color:"blue",onClick:()=>s(p.id),children:w.jsx(x0,{size:16})})}),w.jsx($o,{label:"Delete Form",children:w.jsx(Nn,{variant:"subtle",color:"red",onClick:()=>l(p),children:w.jsx(Op,{size:16})})})]})})]},p.id)),f=()=>{a(!1),i()};return w.jsxs(cn,{size:"lg",py:"xl",children:[w.jsxs(Ge,{justify:"space-between",mb:"xl",children:[w.jsx(jt,{order:2,children:"Jotform Management"}),w.jsx(He,{onClick:()=>a(!0),children:"Create Jotform"})]}),n?w.jsx(No,{children:w.jsx(Ko,{})}):w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Jotform Name"}),w.jsx(Re.Th,{children:"Actions"})]})}),w.jsx(Re.Tbody,{children:d.length>0?d:w.jsx(Re.Tr,{children:w.jsx(Re.Td,{colSpan:2,children:w.jsx(we,{c:"dimmed",ta:"center",children:"No Jotforms found."})})})})]}),w.jsx(Nr,{opened:o,onClose:()=>a(!1),title:"Create New Jotform",centered:!0,children:w.jsx(EP,{onSuccess:f})})]})}function Ioe(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),[o,a]=A.useState(!1),i=async()=>{r(!0);try{const f=await ut.get(" http://localhost:8081/api/user-mappings",{withCredentials:!0});e(f.data)}catch(f){console.error("Error fetching user mappings:",f),e([])}finally{r(!1)}};A.useEffect(()=>{i()},[]);const s=()=>{a(!1),i()},u=async f=>{try{await ut.delete(` http://localhost:8081/api/user-mappings/${f.id}`,{withCredentials:!0}),e(p=>p.filter(m=>m.id!==f.id))}catch(p){console.error(`Error deleting user ${f.email}:`,p)}},l=f=>{j4.openConfirmModal({title:"Delete User Mapping",centered:!0,children:w.jsxs(we,{size:"sm",children:["Are you sure you want to delete the mapping for"," ",w.jsx(we,{span:!0,fw:700,children:f.email}),"? This action cannot be undone."]}),labels:{confirm:"Delete Mapping",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:()=>u(f)})},d=t.map(f=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:f.email}),w.jsx(Re.Td,{children:f.groupName}),w.jsx(Re.Td,{children:w.jsxs(Ge,{gap:"xs",justify:"center",children:[w.jsx($o,{label:"Edit Mapping",children:w.jsx(Nn,{variant:"subtle",color:"blue",children:w.jsx(x0,{size:18})})}),w.jsx($o,{label:"Delete Mapping",children:w.jsx(Nn,{variant:"subtle",color:"red",onClick:()=>l(f),children:w.jsx(Op,{size:18})})})]})})]},f.id));return w.jsxs(cn,{p:"lg",children:[w.jsx(Nr,{opened:o,onClose:()=>a(!1),title:"Map New User to Group",centered:!0,children:w.jsx(SP,{onSuccess:s,onClose:()=>a(!1)})}),w.jsxs(Ge,{justify:"space-between",mb:"xl",children:[w.jsx(jt,{order:2,children:"User Management"}),w.jsx(He,{onClick:()=>a(!0),children:"Map User"})]}),n?w.jsx(we,{ta:"center",c:"dimmed",children:"Loading users..."}):w.jsxs(Re,{withTableBorder:!0,withColumnBorders:!0,highlightOnHover:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"User Email"}),w.jsx(Re.Th,{children:"Group"}),w.jsx(Re.Th,{ta:"center",children:"Actions"})]})}),w.jsx(Re.Tbody,{children:d.length>0?d:w.jsx(Re.Tr,{children:w.jsx(Re.Td,{colSpan:3,children:w.jsx(we,{c:"dimmed",ta:"center",children:"No users found."})})})})]})]})}function Moe(){const[t,e]=A.useState([]),[n,r]=A.useState(!1),o=Ga();A.useEffect(()=>{(async()=>{r(!0);try{const s=await ut.get("http://localhost:8081/api/results",{withCredentials:!0});e(s.data)}catch(s){console.error("Error fetching results:",s),e([])}finally{r(!1)}})()},[]);const a=i=>{o(`/user-results/${i.id}`,{state:{courseName:i.courseName}})};return w.jsxs(cn,{size:"lg",py:"xl",children:[w.jsx(jt,{order:2,mb:"xl",children:"Result Management"}),n?w.jsx(we,{ta:"center",c:"dimmed",children:"Loading results..."}):t.length>0?w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Course Name"}),w.jsx(Re.Th,{children:"Average Score"})]})}),w.jsx(Re.Tbody,{children:t.map(i=>w.jsxs(Re.Tr,{onClick:()=>a(i),style:{cursor:"pointer"},children:[w.jsx(Re.Td,{children:i.courseName}),w.jsxs(Re.Td,{children:[i.averageScore.toFixed(2),"%"]})]},i.id))})]}):w.jsx(we,{ta:"center",c:"dimmed",children:"No results available."})]})}function Ooe(){const{courseId:t}=wS(),e=Sa(),n=Ga(),{courseName:r}=e.state||{courseName:"Course"},[o,a]=A.useState([]),[i,s]=A.useState(!1);A.useEffect(()=>{t&&(async()=>{s(!0);try{const d=await ut.get(`http://localhost:8081/api/results/course/${t}`,{withCredentials:!0});a(d.data)}catch(d){console.error(`Error fetching user results for course ${t}:`,d),a([])}finally{s(!1)}})()},[t]);const u=l=>{n(`/assignment-review/${t}/${l.userId}`,{state:{username:l.username}})};return w.jsxs(cn,{size:"lg",py:"xl",children:[w.jsxs(jt,{order:2,mb:"xl",children:[r," - User Results"]}),i?w.jsx(we,{ta:"center",c:"dimmed",children:"Loading user results..."}):o.length>0?w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Username"}),w.jsx(Re.Th,{children:"Average Score"}),w.jsx(Re.Th,{children:"Actions"})]})}),w.jsx(Re.Tbody,{children:o.map(l=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:l.username}),w.jsxs(Re.Td,{children:[l.score.toFixed(2),"%"]}),w.jsx(Re.Td,{children:w.jsx(He,{variant:"outline",size:"xs",onClick:()=>u(l),children:"View Details"})})]},`${t}-${l.userId}`))})]}):w.jsx(we,{ta:"center",c:"dimmed",children:"No user results found for this course."})]})}function Poe(){const{courseId:t,userId:e}=wS(),n=Sa(),{username:r}=n.state||{username:"User"},[o,a]=A.useState([]),[i,s]=A.useState(!1);A.useEffect(()=>{t&&e&&(async()=>{s(!0);try{const y=(await ut.get(`http://localhost:8081/api/results/submissions/${t}/${e}`,{withCredentials:!0})).data.map(b=>({...b,editing:!1,tempScore:b.finalScore}));a(y)}catch(g){console.error("Error fetching assignment details:",g),a([])}finally{s(!1)}})()},[t,e]);const u=m=>{a(o.map(g=>g.id===m?{...g,editing:!g.editing,tempScore:g.finalScore}:g))},l=(m,g)=>{a(o.map(y=>y.id===m?{...y,tempScore:g}:y))},d=async m=>{const g=o.find(y=>y.id===m);if(g)try{await ut.put(`http://localhost:8081/api/results/answer/${m}`,{finalScore:g.tempScore},{withCredentials:!0}),a(o.map(y=>y.id===m?{...y,finalScore:g.tempScore,editing:!1}:y))}catch(y){console.error("Error updating score:",y)}},f=o.reduce((m,g)=>m+g.finalScore,0),p=o.length>0?f/o.length:0;return w.jsxs(cn,{size:"xl",py:"xl",children:[w.jsx(Ge,{justify:"space-between",mb:"xl",children:w.jsxs(jt,{order:3,children:["Assignment Review for: ",r]})}),i?w.jsx(we,{children:"Loading assignment details..."}):w.jsxs(Re,{withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Question"}),w.jsx(Re.Th,{children:"User Answer (Transcript)"}),w.jsx(Re.Th,{children:"Video"}),w.jsx(Re.Th,{children:"AI Score"}),w.jsx(Re.Th,{children:"Final Score"}),w.jsx(Re.Th,{children:"Actions"})]})}),w.jsx(Re.Tbody,{children:o.map(m=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:m.question}),w.jsx(Re.Td,{children:m.userAnswer}),w.jsx(Re.Td,{children:w.jsx("a",{href:m.contentLink,target:"_blank",rel:"noopener noreferrer",children:"View Video"})}),w.jsx(Re.Td,{children:m.gptScore}),w.jsx(Re.Td,{children:m.editing?w.jsx(bd,{value:m.tempScore,onChange:g=>l(m.id,g),min:0,max:100,size:"xs",style:{width:80}}):m.finalScore.toFixed(2)}),w.jsx(Re.Td,{children:m.editing?w.jsx(Nn,{variant:"subtle",color:"green",onClick:()=>d(m.id),children:w.jsx(TK,{size:18})}):w.jsx(Nn,{variant:"subtle",color:"blue",onClick:()=>u(m.id),children:w.jsx(x0,{size:18})})})]},m.id))}),w.jsx(Re.Tfoot,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{colSpan:4,style:{textAlign:"right",fontWeight:"bold"},children:"Average Final Score"}),w.jsxs(Re.Td,{style:{fontWeight:"bold"},children:[p.toFixed(2),"%"]}),w.jsx(Re.Td,{})]})})]})]})}var Sg={exports:{}},Foe=Sg.exports,uI;function Boe(){return uI||(uI=1,(function(t,e){(function(r,o){t.exports=o(Cp())})(Foe,function(n){return(function(r){var o={};function a(i){if(o[i])return o[i].exports;var s=o[i]={i,l:!1,exports:{}};return r[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=r,a.c=o,a.d=function(i,s,u){a.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:u})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,s){if(s&1&&(i=a(i)),s&8||s&4&&typeof i=="object"&&i&&i.__esModule)return i;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:i}),s&2&&typeof i!="string")for(var l in i)a.d(u,l,(function(d){return i[d]}).bind(null,l));return u},a.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(s,"a",s),s},a.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},a.p="",a(a.s="./src/react-webcam.tsx")})({"./src/react-webcam.tsx":(function(r,o,a){a.r(o);var i=a("react"),s=(function(){var p=function(m,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var S in b)b.hasOwnProperty(S)&&(y[S]=b[S])},p(m,g)};return function(m,g){p(m,g);function y(){this.constructor=m}m.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}})(),u=function(){return u=Object.assign||function(p){for(var m,g=1,y=arguments.length;g<y;g++){m=arguments[g];for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(p[b]=m[b])}return p},u.apply(this,arguments)},l=function(p,m){var g={};for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&m.indexOf(y)<0&&(g[y]=p[y]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,y=Object.getOwnPropertySymbols(p);b<y.length;b++)m.indexOf(y[b])<0&&Object.prototype.propertyIsEnumerable.call(p,y[b])&&(g[y[b]]=p[y[b]]);return g};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(m){var g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return g?new Promise(function(y,b){g.call(navigator,m,y,b)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function d(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var f=(function(p){s(m,p);function m(g){var y=p.call(this,g)||this;return y.canvas=null,y.ctx=null,y.requestUserMediaId=0,y.unmounted=!1,y.state={hasUserMedia:!1},y}return m.prototype.componentDidMount=function(){var g=this,y=g.state,b=g.props;if(this.unmounted=!1,!d()){b.onUserMediaError("getUserMedia not supported");return}y.hasUserMedia||this.requestUserMedia(),b.children&&typeof b.children!="function"&&console.warn("children must be a function")},m.prototype.componentDidUpdate=function(g){var y=this.props;if(!d()){y.onUserMediaError("getUserMedia not supported");return}var b=JSON.stringify(g.audioConstraints)!==JSON.stringify(y.audioConstraints),S=JSON.stringify(g.videoConstraints)!==JSON.stringify(y.videoConstraints),C=g.minScreenshotWidth!==y.minScreenshotWidth,E=g.minScreenshotHeight!==y.minScreenshotHeight;(S||C||E)&&(this.canvas=null,this.ctx=null),(b||S)&&(this.stopAndCleanup(),this.requestUserMedia())},m.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},m.stopMediaStream=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().map(function(y){g.removeTrack(y),y.stop()}),g.getAudioTracks().map(function(y){g.removeTrack(y),y.stop()})):g.stop())},m.prototype.stopAndCleanup=function(){var g=this.state;g.hasUserMedia&&(m.stopMediaStream(this.stream),g.src&&window.URL.revokeObjectURL(g.src))},m.prototype.getScreenshot=function(g){var y=this,b=y.state,S=y.props;if(!b.hasUserMedia)return null;var C=this.getCanvas(g);return C&&C.toDataURL(S.screenshotFormat,S.screenshotQuality)},m.prototype.getCanvas=function(g){var y=this,b=y.state,S=y.props;if(!this.video||!b.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var C=this.video.videoWidth,E=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var _=C/E;C=S.minScreenshotWidth||this.video.clientWidth,E=C/_,S.minScreenshotHeight&&E<S.minScreenshotHeight&&(E=S.minScreenshotHeight,C=E*_)}this.canvas=document.createElement("canvas"),this.canvas.width=g?.width||C,this.canvas.height=g?.height||E,this.ctx=this.canvas.getContext("2d")}var T=this,D=T.ctx,k=T.canvas;return D&&k&&(k.width=g?.width||k.width,k.height=g?.height||k.height,S.mirrored&&(D.translate(k.width,0),D.scale(-1,1)),D.imageSmoothingEnabled=S.imageSmoothing,D.drawImage(this.video,0,0,g?.width||k.width,g?.height||k.height),S.mirrored&&(D.scale(-1,1),D.translate(-k.width,0))),k},m.prototype.requestUserMedia=function(){var g=this,y=this.props,b=function(E,_){var T={video:typeof _<"u"?_:!0};y.audio&&(T.audio=typeof E<"u"?E:!0),g.requestUserMediaId++;var D=g.requestUserMediaId;navigator.mediaDevices.getUserMedia(T).then(function(k){g.unmounted||D!==g.requestUserMediaId?m.stopMediaStream(k):g.handleUserMedia(null,k)}).catch(function(k){g.handleUserMedia(k)})};if("mediaDevices"in navigator)b(y.audioConstraints,y.videoConstraints);else{var S=function(E){return{optional:[{sourceId:E}]}},C=function(E){var _=E.deviceId;return typeof _=="string"?_:Array.isArray(_)&&_.length>0?_[0]:typeof _=="object"&&_.ideal?_.ideal:null};MediaStreamTrack.getSources(function(E){var _=null,T=null;E.forEach(function(I){I.kind==="audio"?_=I.id:I.kind==="video"&&(T=I.id)});var D=C(y.audioConstraints);D&&(_=D);var k=C(y.videoConstraints);k&&(T=k),b(S(_),S(T))})}},m.prototype.handleUserMedia=function(g,y){var b=this.props;if(g||!y){this.setState({hasUserMedia:!1}),b.onUserMediaError(g);return}this.stream=y;try{this.video&&(this.video.srcObject=y),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(y)})}b.onUserMedia(y)},m.prototype.render=function(){var g=this,y=this,b=y.state,S=y.props,C=S.audio;S.forceScreenshotSourceSize;var E=S.disablePictureInPicture;S.onUserMedia,S.onUserMediaError,S.screenshotFormat,S.screenshotQuality,S.minScreenshotWidth,S.minScreenshotHeight,S.audioConstraints,S.videoConstraints,S.imageSmoothing;var _=S.mirrored,T=S.style,D=T===void 0?{}:T,k=S.children,I=l(S,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),M=_?u(u({},D),{transform:(D.transform||"")+" scaleX(-1)"}):D,O={getScreenshot:this.getScreenshot.bind(this)};return i.createElement(i.Fragment,null,i.createElement("video",u({autoPlay:!0,disablePictureInPicture:E,src:b.src,muted:!C,playsInline:!0,ref:function(F){g.video=F},style:M},I)),k&&k(O))},m.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},m})(i.Component);o.default=f}),react:(function(r,o){r.exports=n})}).default})})(Sg)),Sg.exports}var Loe=Boe();const Wv=Qd(Loe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var k2=function(t,e){return k2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},k2(t,e)};function Tt(t,e){k2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ms=function(){return ms=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ms.apply(this,arguments)};function xt(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function s(d){try{l(r.next(d))}catch(f){i(f)}}function u(d){try{l(r.throw(d))}catch(f){i(f)}}function l(d){d.done?a(d.value):o(d.value).then(s,u)}l((r=r.apply(t,[])).next())})}function wt(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(d){return u([l,d])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=l[0]&2?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(d){l=[6,d],o=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zF=function(t,e){return(zF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(t,e)};function Ts(t,e){function n(){this.constructor=t}zF(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function pn(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(l){try{u(r.next(l))}catch(d){a(d)}}function s(l){try{u(r.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):new n(function(d){d(l.value)}).then(i,s)}u((r=r.apply(t,[])).next())})}function mn(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return(function(d){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&d[0]?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(f){d=[6,f],r=0}finally{n=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([u,l])}}}var wl={},tw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function joe(t,e){wl[t]=e}function Di(t){t in wl||(wl[t]=zoe(t));var e=wl[t];return e.isContextLost()?(delete wl[t],Di(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),wl[t])}function zoe(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=document.createElement("canvas");return e.addEventListener("webglcontextlost",function(n){n.preventDefault(),delete wl[t]},!1),t===1?e.getContext("webgl",tw)||e.getContext("experimental-webgl",tw):e.getContext("webgl2",tw)}function Uoe(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}function I2(t,e,n){return Math.max(t,Math.min(e,n))}function jd(t){return t%2==0?t:t+1}function Woe(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function Voe(t,e){var n=Math.random();return e*n+(1-n)*t}function ee(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function vn(t,e,n){n===void 0&&(n=""),ee(eo(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function gf(t){ee(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function zd(t,e){if(e===void 0&&(e=[]),e==null&&(e=[]),Array.isArray(t)||ws(t))for(var n=0;n<t.length;++n)zd(t[n],e);else e.push(t);return e}function ft(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function eo(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ya(t){return t%1==0}function Hoe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function lI(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function xd(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function cI(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,o){var a=0,i=function(){if(t())r();else{var s=e(++a);n!=null&&a>=n?o():setTimeout(i,s)}};i()})}function Goe(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function Dr(t,e){var n=e.length;return ee((t=t==null?e.map(function(r,o){return o}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),ee(t.every(function(r){return ya(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function Xl(t,e){for(var n=[],r=[],o=e==null?null:Dr(e,t).sort(),a=0,i=0;i<t.length;++i){if(o!=null){if(o[a]===i&&t[i]!==1)throw new Error("Can't squeeze axis "+i+" since its dim '"+t[i]+"' is not 1");(o[a]==null||o[a]>i)&&t[i]===1&&(n.push(t[i]),r.push(i)),o[a]<=i&&a++}t[i]!==1&&(n.push(t[i]),r.push(i))}return{newShape:n,keptDims:r}}function M2(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function Xg(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function $oe(t,e,n){if(e==="float32")for(var r=0;r<t.length;r++){var o=t[r];if(isNaN(o)||!isFinite(o))throw Error("The result of the '"+n+"' is "+o+".")}}function qoe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function Xoe(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function ws(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function UF(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function Koe(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=2*n.length}),e}function WF(t){return typeof t=="string"||t instanceof String}function Yoe(t){return typeof t=="boolean"}function Qoe(t){return typeof t=="number"}function Wp(t){return Array.isArray(t)?Wp(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Qoe(t)?"float32":WF(t)?"string":Yoe(t)?"bool":"float32"}function O2(t){return!!(t&&t.constructor&&t.call&&t.apply)}function P2(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Kl(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function VF(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=zd(t)),n&&qoe(t,e),Joe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)Math.round(t[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function HF(t,e,n){var r=new Array;if(e.length===1)for(var o=e[0],a=0;a<o;a++)r[a]=n[t+a];else{o=e[0];var i=e.slice(1),s=i.reduce(function(u,l){return u*l});for(a=0;a<o;a++)r[a]=HF(t+a*s,i,n)}return r}function dI(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,o){return r*o});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return HF(0,t,e)}function Joe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function GF(t,e){for(var n=Vp(t,e),r=0;r<n.length;r++)n[r]=1;return n}function Vp(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function Kg(){if(typeof performance<"u")return performance.now();if(typeof process<"u"){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}function $F(t){t.forEach(function(e){ee(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}var Zoe=(function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new eae)}return t.prototype.profileKernel=function(e,n){var r,o=this,a=this.backendTimer.time(function(){r=n()});return(Array.isArray(r)?r:[r]).forEach(function(i){var s=i.dataSync();$oe(s,i.dtype,e),a.then(function(u){var l="";u.getExtraProfileInfo!=null&&(l=u.getExtraProfileInfo()),o.logger.logKernelProfile(e,i,s,u.kernelMs,l)})}),r},t})(),eae=(function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,o,a){var i=xd(o+"ms",9),s=xd(e,25),u=n.rank,l=n.size,d=xd(n.shape.toString(),14);console.log("%c"+s+"	%c"+i+"	%c"+u+"D "+d+"	%c"+l+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green")},t})(),fI=20,Mh=3,nw=7;function tae(t,e,n,r){var o=Kl(e),a=nae(t,e,n,o),i=e.length,s=Cg(t,e,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function nae(t,e,n,r){var o=ft(e),a=r[r.length-1],i=new Array(a).fill(0),s=e.length,u=n==="complex64"?Uh(t):t;if(s>1)for(var l=0;l<o/a;l++)for(var d=l*a,f=0;f<a;f++)i[f]=Math.max(i[f],zh(u[d+f],0,n).length);return i}function zh(t,e,n){return xd(Array.isArray(t)?parseFloat(t[0].toFixed(nw))+" + "+parseFloat(t[1].toFixed(nw))+"j":WF(t)?"'"+t+"'":n==="bool"?qF(t):parseFloat(t.toFixed(nw)).toString(),e)}function qF(t){return t===0?"false":"true"}function Cg(t,e,n,r,o,a){a===void 0&&(a=!0);var i=n==="complex64"?2:1,s=e[0],u=e.length;if(u===0)return n==="complex64"?[zh(Uh(t)[0],0,n)]:n==="bool"?[qF(t[0])]:[t[0].toString()];if(u===1){if(s>fI){var l=Mh*i,d=Array.from(t.slice(0,l)),f=Array.from(t.slice(s-Mh*i,s));return n==="complex64"&&(d=Uh(d),f=Uh(f)),["["+d.map(function(T,D){return zh(T,o[D],n)}).join(", ")+", ..., "+f.map(function(T,D){return zh(T,o[s-Mh+D],n)}).join(", ")+"]"]}return["["+(n==="complex64"?Uh(t):Array.from(t)).map(function(T,D){return zh(T,o[D],n)}).join(", ")+"]"]}var p=e.slice(1),m=r.slice(1),g=r[0]*i,y=[];if(s>fI){for(var b=0;b<Mh;b++){var S=(C=b*g)+g;y.push.apply(y,Cg(t.slice(C,S),p,n,m,o,!1))}for(y.push("..."),b=s-Mh;b<s;b++)S=(C=b*g)+g,y.push.apply(y,Cg(t.slice(C,S),p,n,m,o,b===s-1))}else for(b=0;b<s;b++){var C;S=(C=b*g)+g,y.push.apply(y,Cg(t.slice(C,S),p,n,m,o,b===s-1))}var E=u===2?",":"";for(y[0]="["+y[0]+E,b=1;b<y.length-1;b++)y[b]=" "+y[b]+E;var _=`,
`;for(b=2;b<u;b++)_+=`
`;return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":_),y}function Uh(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var mp=(function(){function t(e,n,r){var o=this;if(this.dtype=n,this.shape=e.slice(),this.size=ft(e),r!=null){var a=r.length;ee(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Xg(n,this.size),this.strides=Kl(e)}return t.prototype.set=function(e){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),ee(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var a=this.locToIndex(r);this.values[a]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,o=0,a=e;o<a.length;o++){var i=a[o];if(i<0||i>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return We.make(this.shape,{values:this.values},this.dtype)},t})(),la=null,xe=null,XF=null;function rae(t){la=t}function oae(t){xe=t}function aae(t){XF=t}var We=(function(){function t(e,n,r,o,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ft(e),this.strides=Kl(e),this.dataId=o??{},this.id=la().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",la().registerTensor(this,a),r!=null&&la().write(this.dataId,r)}return t.make=function(e,n,r,o){return new t(e,r,n.values,n.dataId,o)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),ee(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,o){return this.throwIfDisposed(),this.reshape([e,n,r,o])},t.prototype.as5D=function(e,n,r,o,a){return this.throwIfDisposed(),this.reshape([e,n,r,o,a])},t.prototype.asType=function(e){return this.throwIfDisposed(),xe.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return pn(this,void 0,void 0,function(){var e;return mn(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,xe.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return xe.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return pn(this,void 0,void 0,function(){var e;return mn(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,dI(this.shape,e)]}})})},t.prototype.arraySync=function(){return dI(this.shape,this.dataSync())},t.prototype.data=function(){return pn(this,void 0,void 0,function(){return mn(this,function(e){return this.throwIfDisposed(),[2,la().read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),la().readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||(la().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),xe.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),xe.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),xe.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),xe.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),xe.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),xe.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),xe.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),tae(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),xe.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),xe.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),xe.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),xe.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),xe.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),xe.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),xe.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),xe.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),xe.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),xe.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),xe.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),xe.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,o,a){return r===void 0&&(r=.001),XF("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,a,o,r)},t.prototype.batchNorm=function(e,n,r,o,a){return a===void 0&&(a=.001),this.throwIfDisposed(),xe.batchNorm(this,e,n,r,o,a)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),xe.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),xe.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),xe.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),xe.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),xe.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),xe.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),xe.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),xe.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),xe.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),xe.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),xe.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),xe.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),xe.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),xe.div(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),xe.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),xe.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),xe.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),xe.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),xe.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),xe.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),xe.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),xe.modStrict(this,e)},t.prototype.squaredDifference=function(e){return this.throwIfDisposed(),xe.squaredDifference(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),xe.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),xe.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),xe.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),xe.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),xe.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),xe.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),xe.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),xe.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),xe.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),xe.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),xe.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),xe.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),xe.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),xe.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),xe.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),xe.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),xe.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),xe.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),xe.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),xe.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),xe.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),xe.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),xe.sign(this)},t.prototype.exp=function(){return this.throwIfDisposed(),xe.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),xe.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),xe.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),xe.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),xe.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),xe.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),xe.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),xe.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),xe.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),xe.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),xe.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),xe.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),xe.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),xe.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),xe.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),xe.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),xe.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),xe.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),xe.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),xe.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),xe.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),xe.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),xe.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),xe.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),xe.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),xe.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),xe.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),xe.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),xe.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),xe.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),xe.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),xe.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),xe.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),xe.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),xe.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),xe.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),xe.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),xe.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),xe.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,o,a,i){return o===void 0&&(o="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),xe.conv1d(this,e,n,r,o,a,i)},t.prototype.conv2d=function(e,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),xe.conv2d(this,e,n,r,o,a,i)},t.prototype.conv2dTranspose=function(e,n,r,o,a){return this.throwIfDisposed(),xe.conv2dTranspose(this,e,n,r,o,a)},t.prototype.depthwiseConv2D=function(e,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),xe.depthwiseConv2d(this,e,n,r,o,a,i)},t.prototype.separableConv2d=function(e,n,r,o,a,i){return a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),xe.separableConv2d(this,e,n,r,o,a,i)},t.prototype.avgPool=function(e,n,r,o){return this.throwIfDisposed(),xe.avgPool(this,e,n,r,o)},t.prototype.maxPool=function(e,n,r,o){return this.throwIfDisposed(),xe.maxPool(this,e,n,r,o)},t.prototype.localResponseNormalization=function(e,n,r,o){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),xe.localResponseNormalization(this,e,n,r,o)},t.prototype.pool=function(e,n,r,o,a){return this.throwIfDisposed(),xe.pool(this,e,n,r,o,a)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Hp.variable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),xe.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),xe.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),xe.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),xe.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,o,a,i,s,u){return o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),xe.stridedSlice(this,e,n,r,o,a,i,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),xe.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),xe.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),xe.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),xe.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),xe.spectral.irfft(this)},t})();Object.defineProperty(We,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var Hp=(function(t){function e(n,r,o){r===void 0&&(r=!0);var a=t.call(this,n.shape,n.dtype,null,n.dataId)||this;a.trainable=r,a.name=o,a.name==null&&(a.name=la().nextVariableId().toString());try{la().registerVariable(a)}catch(i){throw la().disposeTensor(a),i}return a}return Ts(e,t),e.variable=function(n,r,o,a){return r===void 0&&(r=!0),a!=null&&a!==n.dtype&&(n=n.asType(a)),new e(n,r,o)},e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!eo(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");la().disposeTensor(this),this.dataId=n.dataId,la().registerTensor(this)},e})(We);Object.defineProperty(Hp,Symbol.hasInstance,{value:function(t){return t instanceof We&&t.assign!=null&&t.assign instanceof Function}});var hI,F2,B2,L2,j2;Hp.variable;function iae(t,e,n){for(var r={},o={},a=0;a<e.length;a++)r[e[a].id]=!0;for(a=0;a<t.length;a++){var i=(g=t[a]).inputs;for(var s in i){for(var u=i[s],l=!1,d=0;d<e.length;d++)if(r[u.id]){g.outputs.forEach(function(C){return r[C.id]=!0}),l=!0,o[g.id]=!0;break}if(l)break}}var f={};f[n.id]=!0;var p={};for(a=t.length-1;a>=0;a--)for(i=(g=t[a]).inputs,d=0;d<g.outputs.length;d++)if(f[g.outputs[d].id]){for(var s in i)f[i[s].id]=!0,p[g.id]=!0;break}var m=[];for(a=0;a<t.length;a++){var g;if(o[(g=t[a]).id]&&p[g.id]){var y={};for(var s in g.inputs){var b=g.inputs[s];r[b.id]&&(y[s]=b)}var S=Object.assign({},g);S.inputs=y,S.outputs=g.outputs,m.push(S)}}return m}function sae(t,e,n){for(var r=function(a){var i=e[a],s=[];if(i.outputs.forEach(function(f){var p=t[f.id];if(p!=null)s.push(p);else{var m=We.make(f.shape,{values:Vp(f.size,f.dtype)},f.dtype);s.push(m)}}),i.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+i.name+".");var u=i.gradient(i.outputs.length===1?s[0]:s),l=function(f){if(!(f in u))throw new Error("Cannot backprop through input "+f+". Available gradients found: "+Object.keys(u)+".");var p=n(function(){return u[f]()});if(p.dtype!=="float32")throw new Error("Error in gradient for op "+i.name+". The gradient of input "+f+" must have 'float32' dtype, but has '"+p.dtype+"'");var m=i.inputs[f];if(!eo(p.shape,m.shape))throw new Error("Error in gradient for op "+i.name+". The gradient of input '"+f+"' has shape '"+p.shape+"', which does not match the shape of the input '"+m.shape+"'");if(t[m.id]==null)t[m.id]=p;else{var g=t[m.id];t[m.id]=g.add(p),g.dispose()}};for(var d in i.inputs)l(d)},o=e.length-1;o>=0;o--)r(o)}(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(hI||(hI={})),(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(F2||(F2={})),(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(B2||(B2={})),(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(L2||(L2={})),(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(j2||(j2={}));var uae={float32:L2,int32:F2,bool:B2,complex64:j2};function hr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return uae[t][e]}function rw(t){return hr(t,"int32")}function sr(t,e){if(t.dtype===e.dtype)return[t,e];var n=hr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function lae(t,e){ee(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function KF(t){var e=[];return YF(t,e,new Set),e}function YF(t,e,n){if(t!=null){if(t instanceof We)e.push(t);else if(cae(t)){var r=t;for(var o in r){var a=r[o];n.has(a)||(n.add(a),YF(a,e,n))}}}}function cae(t){return Array.isArray(t)||typeof t=="object"}var qt,dae=(function(){function t(e,n,r){this.backend=e,this.safeMode=n,this.debugMode=r,this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.profiling=!1,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiler=new Zoe(e),this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.moveData=function(e){this.write(e,this.readSync(e))},t.prototype.tidy=function(e,n){var r,o=this,a=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(function(){return o.startScope(a)},function(){return o.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var o=r();return n(),o}catch(a){throw n(),a}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=We.make(e.shape,{dataId:e.dataId},e.dtype);return this.addTapeNode([e],n,function(r){return[r.toFloat()]}),n},t.prototype.runKernel=function(e,n,r){var o,a=this,i=[],s=this.isTapeOn(),u=this.activeScope!=null?this.activeScope.name:"",l=function(m){s&&(i=m.map(function(g){return a.keep(a.clone(g))}))},d=this.numBytes,f=this.numTensors;if(this.scopedRun(function(){return a.kernelDepth++},function(){return a.kernelDepth--},function(){o=a.debugMode()?a.profiler.profileKernel(u,function(){return e(a.backend,l)}):e(a.backend,l)}),s){var p={id:this.nextTapeNodeId++,name:u,inputs:n,outputs:Array.isArray(o)?o:[o],saved:i};r!=null&&(p.gradient=function(m){return r(m,i)}),this.activeTape.push(p)}return this.profiling&&this.activeProfile.kernels.push({name:u,bytesAdded:this.numBytes-d,totalBytesSnapshot:this.numBytes,tensorsAdded:this.numTensors-f,totalTensorsSnapshot:this.numTensors,inputShapes:Object.keys(n).map(function(m){return n[m].shape}),outputShape:Array.isArray(o)?o.map(function(m){return m.shape}):o.shape}),o},t.prototype.registerTensor=function(e,n){var r=this.tensorInfo.has(e.dataId)?this.tensorInfo.get(e.dataId).refCount:0;if(this.numTensors++,e.dtype==="string"&&this.numStringTensors++,r===0){this.numDataBuffers++;var o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*UF(e.dtype)),this.tensorInfo.set(e.dataId,{backend:n??this.backend,dtype:e.dtype,shape:e.shape,bytes:o,refCount:0}),this.numBytes+=o,n!=null?n.register(e.dataId,e.shape,e.dtype):this.backend.register(e.dataId,e.shape,e.dtype)}this.tensorInfo.get(e.dataId).refCount++,e instanceof Hp||this.track(e)},t.prototype.registerVariable=function(e){if(this.registeredVariables[e.name]!=null)throw new Error("Variable with name "+e.name+" was already registered");this.registeredVariables[e.name]=e},t.prototype.disposeTensor=function(e){if(this.tensorInfo.has(e.dataId)){this.numTensors--,e.dtype==="string"&&this.numStringTensors--;var n=this.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.numBytes-=n.bytes),this.numDataBuffers--,n.backend.disposeData(e.dataId),this.tensorInfo.delete(e.dataId)):this.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.registeredVariables){var n=this.registeredVariables[e];this.disposeTensor(n),delete this.registeredVariables[e]}},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.numTensors,e.numDataBuffers=this.numDataBuffers,e.numBytes=this.numBytes,this.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return pn(this,void 0,void 0,function(){var n,r;return mn(this,function(o){return this.profiling=!0,n=this.numBytes,r=this.numTensors,this.activeProfile.kernels=[],this.activeProfile.result=e(),this.profiling=!1,this.activeProfile.peakBytes=Math.max.apply(Math,this.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.activeProfile.newBytes=this.numBytes-n,this.activeProfile.newTensors=this.numTensors-r,[2,this.activeProfile]})})},t.prototype.isTapeOn=function(){return this.gradientDepth>0&&this.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r){var o={};e.forEach(function(i,s){o[s]=i});var a={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:o,outputs:[n],gradient:function(i){var s={};return r(i).forEach(function(u,l){s[l]=function(){return u}}),s}};this.activeTape.push(a)},t.prototype.keep=function(e){if(this.scopeStack.length===1&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return e.kept=!0,e},t.prototype.startTape=function(){this.gradientDepth===0&&(this.activeTape=[]),this.gradientDepth++},t.prototype.endTape=function(){this.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.nextScopeId++};e&&(n.name=e),this.scopeStack.push(n),this.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=KF(e),o=new Set(r.map(function(u){return u.id})),a=0;a<this.activeScope.track.length;a++){var i=this.activeScope.track[a];i.kept||o.has(i.id)||i.dispose()}var s=this.scopeStack.pop();this.activeScope=this.scopeStack.length===0?null:this.scopeStack[this.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},t.prototype.gradients=function(e,n,r,o){var a=this;if(o===void 0&&(o=!1),ee(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",e)});ee(i instanceof We,function(){return"The result y returned by f() must be a tensor."});var s=iae(this.activeTape,n,i);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u={};u[i.id]=r??fae(i.shape),sae(u,s,function(d){return a.tidy(d)});var l=n.map(function(d){return u[d.id]});return a.gradientDepth===0&&(a.activeTape.forEach(function(d){for(var f in d.saved)d.saved[f].dispose()}),a.activeTape=null),{value:i,grads:l}})},t.prototype.customGrad=function(e){var n=this;return ee(O2(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];ee(o.every(function(s){return s instanceof We}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i={};return o.forEach(function(s,u){i[u]=s}),n.runKernel(function(s,u){return ee((r=e.apply(void 0,o.concat([u]))).value instanceof We,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),ee(O2(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},i,function(s,u){var l=r.gradFunc(s,u),d=Array.isArray(l)?l:[l];ee(d.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),ee(d.every(function(p){return p instanceof We}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return d.forEach(function(p,m){f[m]=function(){return p}}),f})}},t.prototype.write=function(e,n){var r=this.tensorInfo.get(e);if(r.dtype==="string"){var o=Koe(n);this.numBytes+=o-r.bytes,r.bytes=o}this.backend!==r.backend&&(r.backend.disposeData(e),r.backend=this.backend,this.backend.register(e,r.shape,r.dtype)),this.backend.write(e,n)},t.prototype.readSync=function(e){return this.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.tensorInfo.get(e).backend.read(e)},t.prototype.fromPixels=function(e,n){return this.backend.fromPixels(e,n)},t.prototype.time=function(e){return pn(this,void 0,void 0,function(){var n,r;return mn(this,function(o){switch(o.label){case 0:return n=Kg(),[4,this.backend.time(e)];case 1:return(r=o.sent()).wallMs=Kg()-n,[2,r]}})})},t.prototype.track=function(e){if(this.scopeStack.length===1&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope!=null&&(e.scopeId=this.activeScope.id,this.activeScope.track.push(e)),e},t.nextTensorId=0,t.nextVariableId=0,t})();function fae(t){var e=GF(ft(t),"float32");return We.make(t,{values:e})}(function(t){t[t.NUMBER=0]="NUMBER",t[t.BOOLEAN=1]="BOOLEAN",t[t.STRING=2]="STRING"})(qt||(qt={}));var ow,aw,hae=[{name:"DEBUG",type:qt.BOOLEAN},{name:"IS_BROWSER",type:qt.BOOLEAN},{name:"WEBGL_LAZILY_UNPACK",type:qt.BOOLEAN},{name:"WEBGL_CPU_FORWARD",type:qt.BOOLEAN},{name:"WEBGL_PACK",type:qt.BOOLEAN},{name:"WEBGL_PACK_BATCHNORMALIZATION",type:qt.BOOLEAN},{name:"WEBGL_PACK_CLIP",type:qt.BOOLEAN},{name:"WEBGL_PACK_DEPTHWISECONV",type:qt.BOOLEAN},{name:"WEBGL_PACK_BINARY_OPERATIONS",type:qt.BOOLEAN},{name:"WEBGL_PACK_ARRAY_OPERATIONS",type:qt.BOOLEAN},{name:"WEBGL_PACK_IMAGE_OPERATIONS",type:qt.BOOLEAN},{name:"WEBGL_PACK_REDUCE",type:qt.BOOLEAN},{name:"WEBGL_CONV_IM2COL",type:qt.BOOLEAN},{name:"WEBGL_MAX_TEXTURE_SIZE",type:qt.NUMBER},{name:"WEBGL_NUM_MB_BEFORE_PAGING",type:qt.NUMBER},{name:"WEBGL_MAX_TEXTURES_IN_SHADER",type:qt.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:qt.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:qt.BOOLEAN},{name:"WEBGL_VERSION",type:qt.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:qt.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:qt.BOOLEAN},{name:"WEBGL_FENCE_API_ENABLED",type:qt.BOOLEAN},{name:"WEBGL_SIZE_UPLOAD_UNIFORM",type:qt.NUMBER},{name:"BACKEND",type:qt.STRING},{name:"EPSILON",type:qt.NUMBER},{name:"PROD",type:qt.BOOLEAN},{name:"TENSORLIKE_CHECK_SHAPE_CONSISTENCY",type:qt.BOOLEAN},{name:"DEPRECATION_WARNINGS_ENABLED",type:qt.BOOLEAN}];function pI(t){try{if(Di(t)!=null)return!0}catch{return!1}return!1}function pae(t){if(ow==null){var e=Di(t);ow=e.getParameter(e.MAX_TEXTURE_SIZE)}return ow}function mae(t){if(aw==null){var e=Di(t);aw=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,aw)}function vae(t){if(t===0)return 0;var e=Di(t);return Il(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Il(e,"EXT_disjoint_timer_query")?1:0}function gae(t){if(t===0)return!1;var e=Di(t);if(t===1){if(!Il(e,"OES_texture_float"))return!1}else if(!Il(e,"EXT_color_buffer_float"))return!1;return JF(e,t)}function yae(t){if(t===0)return!1;var e=Di(t);if(t===1){if(!Il(e,"OES_texture_float")||!Il(e,"WEBGL_color_buffer_float"))return!1}else if(!Il(e,"EXT_color_buffer_float"))return!1;return JF(e,t)}function bae(t){return t===2&&Di(t).fenceSync!=null}function xae(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}var mI="tfjsflags";function QF(){var t={};if(typeof window>"u"||window.location===void 0||window.location.search===void 0)return t;var e=wae(window.location.search);if(mI in e){var n={};e[mI].split(",").forEach(function(r){var o=r.split(":"),a=o[0],i=o[1];n[a]=i}),hae.forEach(function(r){r.name in n&&(console.log("Setting feature override from URL "+r.name+": "+n[r.name]),r.type===qt.NUMBER?t[r.name]=+n[r.name]:r.type===qt.BOOLEAN?t[r.name]=n[r.name]==="true":r.type===qt.STRING?t[r.name]=n[r.name]:console.warn("Unknown URL param: "+r.name+"."))})}return t}function Il(t,e){return t.getExtension(e)!=null}function JF(t,e){var n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var o=e===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,o,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(n),a}function wae(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Sae(e,r[0],r[1]),r.join("=")}),e}function Sae(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}var Cae=600;function Eae(){return window.screen.height*window.screen.width*window.devicePixelRatio*Cae/1024}var iw,Rae=1e-4,_ae=.1,Tae=1e-7,Aae=.001,ki=(function(){function t(e){this.features={},this.registry={},this.registryFactory={},e!=null&&(this.features=e),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return t.setBackend=function(e,n){if(!(e in Q.registry))throw new Error("Backend name '"+e+"' not found in registry");Q.engine.backend=Q.findBackend(e),Q.backendName=e},t.getBackend=function(){return Q.initEngine(),Q.backendName},t.disposeVariables=function(){Q.engine.disposeVariables()},t.memory=function(){return Q.engine.memory()},t.profile=function(e){return Q.engine.profile(e)},t.tidy=function(e,n){return Q.engine.tidy(e,n)},t.dispose=function(e){KF(e).forEach(function(n){return n.dispose()})},t.keep=function(e){return Q.engine.keep(e)},t.time=function(e){return Q.engine.time(e)},t.prototype.get=function(e){return e in this.features?this.features[e]:(this.features[e]=this.evaluateFeature(e),this.features[e])},t.prototype.getFeatures=function(){return this.features},t.prototype.set=function(e,n){this.features[e]=n},t.prototype.getBestBackendName=function(){var e=this;if(Object.keys(this.registry).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registry).map(function(n){return{name:n,entry:e.registry[n]}}).sort(function(n,r){return r.entry.priority-n.entry.priority})[0].name},t.prototype.evaluateFeature=function(e){if(e==="DEBUG")return!1;if(e==="IS_BROWSER")return typeof window<"u";if(e==="IS_NODE")return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0;if(e==="IS_CHROME")return xae();if(e==="WEBGL_CPU_FORWARD")return!0;if(e==="WEBGL_PACK")return this.get("WEBGL_VERSION")!==0;if(e==="WEBGL_PACK_BATCHNORMALIZATION")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_CLIP")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_DEPTHWISECONV")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_BINARY_OPERATIONS")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_ARRAY_OPERATIONS")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_IMAGE_OPERATIONS")return this.get("WEBGL_PACK");if(e==="WEBGL_PACK_REDUCE")return this.get("WEBGL_PACK");if(e==="WEBGL_LAZILY_UNPACK")return this.get("WEBGL_PACK");if(e==="WEBGL_CONV_IM2COL")return this.get("WEBGL_PACK");if(e==="WEBGL_NUM_MB_BEFORE_PAGING")return this.get("PROD")||!this.get("IS_BROWSER")?Number.POSITIVE_INFINITY:Eae();if(e==="WEBGL_MAX_TEXTURE_SIZE")return pae(this.get("WEBGL_VERSION"));if(e==="WEBGL_MAX_TEXTURES_IN_SHADER")return mae(this.get("WEBGL_VERSION"));if(e==="IS_TEST")return!1;if(e==="BACKEND")return this.getBestBackendName();if(e==="WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"){var n=this.get("WEBGL_VERSION");return n===0?0:vae(n)}if(e==="WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Uoe();if(e==="HAS_WEBGL")return this.get("WEBGL_VERSION")>0;if(e==="WEBGL_VERSION")return pI(2)?2:pI(1)?1:0;if(e==="WEBGL_RENDER_FLOAT32_ENABLED")return gae(this.get("WEBGL_VERSION"));if(e==="WEBGL_DOWNLOAD_FLOAT_ENABLED")return yae(this.get("WEBGL_VERSION"));if(e==="WEBGL_FENCE_API_ENABLED")return bae(this.get("WEBGL_VERSION"));if(e==="WEBGL_SIZE_UPLOAD_UNIFORM")return this.get("WEBGL_RENDER_FLOAT32_ENABLED")?4:0;if(e==="TEST_EPSILON")return this.backend.floatPrecision()===32?Aae:_ae;if(e==="EPSILON")return this.backend.floatPrecision()===32?Tae:Rae;if(e==="PROD")return!1;if(e==="TENSORLIKE_CHECK_SHAPE_CONSISTENCY")return!this.get("PROD");if(e==="DEPRECATION_WARNINGS_ENABLED")return!0;throw new Error("Unknown feature "+e+".")},t.prototype.setFeatures=function(e){this.features=Object.assign({},e)},t.prototype.reset=function(){this.features=QF(),this.globalEngine!=null&&(this.globalEngine=null)},Object.defineProperty(t.prototype,"backend",{get:function(){return this.engine.backend},enumerable:!0,configurable:!0}),t.prototype.findBackend=function(e){return e in this.registry?this.registry[e].backend:null},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e]:null},t.prototype.registerBackend=function(e,n,r){var o=this;if(r===void 0&&(r=1),e in this.registry)return console.warn(e+" backend was already registered. Reusing existing backend"),!1;try{var a=n();return a.setDataMover({moveData:function(i){return o.engine.moveData(i)}}),this.registry[e]={backend:a,priority:r},this.registryFactory[e]=n,!0}catch(i){return console.warn("Registration of backend "+e+" failed"),console.warn(i.stack||i.message),!1}},t.prototype.removeBackend=function(e){if(!(e in this.registry))throw new Error(e+" backend not found in registry");this.registry[e].backend.dispose(),delete this.registry[e]},Object.defineProperty(t.prototype,"engine",{get:function(){return this.initEngine(),this.globalEngine},enumerable:!0,configurable:!0}),t.prototype.initEngine=function(){var e=this;if(this.globalEngine==null){this.backendName=this.get("BACKEND");var n=this.findBackend(this.backendName);this.globalEngine=new dae(n,!1,function(){return e.get("DEBUG")})}},Object.defineProperty(t.prototype,"global",{get:function(){return ZF()},enumerable:!0,configurable:!0}),t})();function ZF(){if(iw==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else{if(typeof process>"u")throw new Error("Could not find a global object");t=process}iw=t}return iw}function Nae(){var t=ZF();return t.ENV==null&&(t.ENV=new ki(QF())),rae(function(){return t.ENV.engine}),t.ENV}function eB(t){Q.get("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}aae(eB);var Q=Nae();function Uu(t){var e=t;if(ws(t))return[t.length];if(!Array.isArray(t))return[];for(var n=[];Array.isArray(e)||ws(e);)n.push(e.length),e=e[0];return Array.isArray(t)&&Q.get("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&tB(t,n,[]),n}function tB(t,e,n){if(n=n||[],Array.isArray(t)||ws(t)){ee(e.length>0,function(){return"Element arr["+n.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),ee(t.length===e[0],function(){return"Element arr["+n.join("][")+"] should have "+e[0]+" elements, but has "+t.length+" elements"});for(var r=e.slice(1),o=0;o<t.length;++o)tB(t[o],r,n.concat(o))}else ee(e.length===0,function(){return"Element arr["+n.join("][")+"] is a primitive, but should be an array/TypedArray of "+e[0]+" elements"})}function vI(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function Y(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof We)return vI(r,t.dtype,e,n),t;var o=Wp(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),vI(r,o,e,n),t==null||!ws(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var a=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=Uu(t);ws(t)||Array.isArray(t)||(t=[t]);var s=o!=="string"?VF(t,o,Q.get("DEBUG")):zd(t);return We.make(i,{values:s},o)}function Yg(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(o,a){return Y(o,e+"["+a+"]",n)},r)}function Dae(t,e){if(ee(O2(t),function(){return"The f passed in variableGrads(f) must be a function"}),ee(e==null||Array.isArray(e)&&e.every(function(u){return u instanceof Hp}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}),e==null)for(var n in e=[],Q.engine.registeredVariables)e.push(Q.engine.registeredVariables[n]);var r=e.length;ee((e=e.filter(function(u){return u.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable."});var o=Q.engine.gradients(t,e,null,!0),a=o.value,i=o.grads;ee(i.some(function(u){return u!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),ee(a.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var s={};return e.forEach(function(u,l){i[l]!=null&&(s[u.name]=i[l])}),{value:a,grads:s}}function Gp(t){return Q.engine.customGrad(t)}var lt=ki.tidy,Sn=ki.keep,kae=ki.dispose;ki.time;ki.profile;function z2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Q.get("IS_TEST")||console.warn.apply(console,t)}function Qg(t,e,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var a=e.length,i=0;i<a;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(a+1))}return o}function Jg(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function Zg(t,e,n,r){r===void 0&&(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?o.push(e[a-1]*t[a]):o.push(t[a]/e[a-1]):o.push(t[a]);return o}function nB(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function rB(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}function oB(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Iae(t,e,n){for(var r=t.length+e.length,o=[],a=0,i=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(t[a++]):o.push(e[i++]);return o}function Or(t,e){for(var n=[],r=t.length,o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);return[n,e.map(function(a){return t[a]})]}function ba(t,e){return Iae(t,e.map(function(n){return 1}),e)}function Do(t,e,n){ee(oB(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function Ii(t,e){if(oB(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(o){return n.push(o)}),n}function wE(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function Mi(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function Mae(t,e){var n=t[0].length;t.forEach(function(o,a){ee(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+n+")"})}),ee(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(o,a){for(var i=0;i<n;i++)ee(i===e||o[i]===r[i],function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function Ud(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function aB(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=i[a],s.push(i[a]);var l=Kl(t.shape).map(function(d){return d/u}).concat([1]).slice(0,r);return[s,o,u,l]}var iB=30;function sw(t){return t<=iB?t:P2(t,Math.floor(Math.sqrt(t)))}function Oae(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(a+" update.rank != "+(o+t.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+e.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+t[i+o]+")")}function Pae(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}Oae(n,e,t)}function ey(t,e,n){for(var r=e.rank>1?e.shape[e.rank-1]:1,o=n.length,a=1,i=r;i<o;++i)a*=n[i];var s=r<1?1:r;return{sliceRank:r,numUpdates:e.size/s,sliceSize:a,strides:Kl(n.slice(0,r)).concat([1]),outputSize:ft(n)}}function Fae(t,e){var n,r=!1;for(t<=iB?(n=t,r=!0):n=P2(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=P2(t,n+1);return n}function Bae(t,e,n){for(var r=[],o=t.length,a=0;a<o;a++)a!==e?r.push(t[a]):r.push(n);return r}function Lae(t,e,n){for(var r=t.shape[n],o=[],a=1,i=1,s=0;s<n;s++)o.push(t.shape[s]),a*=t.shape[s];for(s=0;s<e.rank;s++)o.push(e.shape[s]);for(s=n+1;s<t.rank;s++)o.push(t.shape[s]),i*=t.shape[s];return{batchSize:a,sliceSize:i,dimSize:r,outputShape:o}}function jae(t,e,n){ee(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),ee(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(a){ee(e[a]+n[a]<=t.shape[a],function(){return"Error in slice"+t.rank+"D: begin["+a+"] + size["+a+"] ("+(e[a]+n[a])+") would overflow input.shape["+a+"] ("+t.shape[a]+")"})},o=0;o<t.rank;++o)r(o)}function SE(t,e,n,r,o,a,i,s,u){if(o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),i!==0)throw new Error("ellipsis mask is not yet supported");if(s!==0)throw new Error("new axis mask is not yet supported");for(var l=[],d=[],f=[],p=0;p<t.length;p++)l[p]=zae(o,e,r,t,p),d[p]=Uae(a,n,r,t,p),u&1<<p&&(d[p]=l[p]+1,f.push(p));var m=new Array(t.length).fill(0);return m=m.map(function(g,y){for(var b=0,S=r[y]||1,C=l[y];!(S>0?C>=d[y]:C<=d[y]);C+=S)b+=1;return b}),[l,m,f]}function zae(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||a==null)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=I2(0,a,s-1)}function Uae(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||a==null)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=i>0?I2(0,a,s):I2(-1,a,s-1)}function sB(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function uB(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function ae(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];Q.engine.startScope(n);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Q.engine.endScope(s),s}catch(u){throw Q.engine.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function Wae(t,e){e===void 0&&(e=-1);var n=Y(t,"logits","softmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return Gp(function(r,o){var a=r.logSumExp([e],!0),i=r.toFloat().sub(a).exp();return o([i]),{value:i,gradFunc:function(s,u){var l=u[0],d=s.mul(l);return d.sub(d.sum([e],!0).mul(l))}}})(n)}function Vae(t,e){e===void 0&&(e=-1);var n=Y(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return Gp(function(r,o){var a=r.max(e,!0),i=r.sub(a),s=i.toFloat().sub(i.exp().sum(e,!0).log());return o([s]),{value:s,gradFunc:function(u,l){var d=l[0].exp();return u.sub(u.sum(e,!0).mul(d))}}})(n)}var Wu=ae({softmax_:Wae}),Hae=ae({logSoftmax_:Vae});function Gae(t,e){var n=Y(t,"real","complex"),r=Y(e,"imag","complex");return vn(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Q.engine.runKernel(function(o){return o.complex(n,r)},{$real:n,$imag:r})}function $ae(t){var e=Y(t,"input","real");return Q.engine.runKernel(function(n){return n.real(e)},{$input:e})}function qae(t){var e=Y(t,"input","imag");return Q.engine.runKernel(function(n){return n.imag(e)},{$input:e})}var Kr=ae({complex_:Gae}),mi=ae({real_:$ae}),yu=ae({imag_:qae});function Yn(t,e,n){if(n==null&&(n=Wp(t)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ws(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");var r=Uu(t);if(e!=null){$F(e);var o=ft(e),a=ft(r);ee(o===a,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+a});for(var i=0;i<r.length;++i){var s=r[i],u=i!==r.length-1||s!==ft(e.slice(i));ee(r[i]===e[i]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+e+"). "})}}return ws(t)||Array.isArray(t)||(t=[t]),e=e||r,t=n!=="string"?VF(t,n,Q.get("DEBUG")):zd(t),We.make(e,{values:t},n)}function Pe(t,e){if((ws(t)||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");return Yn(t,[],e)}function Mo(t,e){gf(t);var n=Uu(t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Yn(t,n,e)}function M0(t,e,n){if(gf(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Uu(t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Yn(t,e=e||r,n)}function CE(t,e,n){if(gf(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Uu(t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Yn(t,e=e||r,n)}function Ia(t,e,n){if(gf(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Uu(t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Yn(t,e=e||r,n)}function Xae(t,e,n){if(gf(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Uu(t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Yn(t,e=e||r,n)}function Kae(t,e,n){if(gf(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Uu(t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Yn(t,e=e||r,n)}function zl(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=zl(t,"float32"),r=zl(t,"float32");return Kr(n,r)}var o=GF(ft(t),e);return We.make(t,{values:o},e)}function $n(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=$n(t,"float32"),r=$n(t,"float32");return Kr(n,r)}var o=Vp(ft(t),e);return We.make(t,{values:o},e)}function Gh(t,e,n){return Q.engine.runKernel(function(r){return r.fill(t,e,n)},{})}function Yae(t){var e=Y(t,"x","onesLike");if(e.dtype==="complex64"){var n=cB(mi(e)),r=nn(yu(e));return Kr(n,r)}return Q.engine.runKernel(function(o){return o.onesLike(e)},{$x:e},null)}function Qae(t){var e=Y(t,"x","zerosLike");return Q.engine.runKernel(function(n){return n.zerosLike(e)},{$x:e},null)}function Jae(t,e,n){if(n===0)throw new Error("Cannot request zero samples");var r=(e-t)/(n-1),o=Vp(n,"float32");o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return Mo(o,"float32")}function lB(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return $n([0],r);var o=Vp(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return Mo(o,r)}var cB=ae({onesLike_:Yae}),nn=ae({zerosLike_:Qae}),dB=(function(){function t(e){this.dataMover=e,this.data=new WeakMap}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(e),this.data.get(e)},t.prototype.set=function(e,n){this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.data.delete(e)},t})();function fB(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=$n(t.shape),o=t.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!Xoe(t.dtype,e))return We.make(t.shape,{dataId:t.dataId},e);if(t.dtype==="complex64"){var i=n.real(t);return a=i.cast(e),i.dispose(),a}if(e==="int32")return n.int(t);if(e==="bool"){var s=Pe(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: unknown dtype argument ("+e+")")}function U2(t,e){return We.make(e,{dataId:t.dataId},t.dtype)}function hB(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Zae(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function eie(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function tie(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function gI(t,e){return{real:t[2*e],imag:t[2*e+1]}}function nie(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function rie(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),o=0;o<Math.ceil(t/2);o++){var a=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}function oie(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function EE(t,e,n,r,o){for(var a=Array.from(e).map(function(m,g){return{score:m,boxIndex:g}}).filter(function(m){return m.score>o}).sort(function(m,g){return g.score-m.score}),i=[],s=0;s<a.length;s++){var u=a[s],l=u.score,d=u.boxIndex;if(l<o)break;for(var f=!1,p=i.length-1;p>=0;--p)if(aie(t,d,i[p])>=r){f=!0;break}if(!f&&(i.push(d),i.length>=n))break}return Mo(i,"int32")}function aie(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),d=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(s-a)*(u-i),g=(f-l)*(p-d);if(m<=0||g<=0)return 0;var y=Math.max(a,l),b=Math.max(i,d),S=Math.min(s,f),C=Math.min(u,p),E=Math.max(S-y,0)*Math.max(C-b,0);return E/(m+g-E)}function pB(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map(function(a){o[n]=a;var i=t.slice(r,o);return r[n]+=a,i})}function mB(t,e,n,r,o){for(var a=e[e.length-1],i=[t.length/a,a],s=i[0],u=i[1],l=M2(n,s*r),d=M2("int32",s*r),f=0;f<s;f++){for(var p=f*u,m=t.subarray(p,p+u),g=[],y=0;y<m.length;y++)g.push({value:m[y],index:y});g.sort(function(_,T){return T.value-_.value});var b=f*r,S=l.subarray(b,b+r),C=d.subarray(b,b+r);for(y=0;y<r;y++)S[y]=g[y].value,C[y]=g[y].index}var E=e.slice();return E[E.length-1]=r,[Yn(l,E,n),Yn(d,E,"int32")]}var iie=(function(){return function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}})();function vB(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function Oo(t,e){return e===1?[t]:vB(t,e)}function sie(t,e){if(t===1)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}function fd(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(a)}return r}function ur(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],a=e.length-r-1,i=e[a];(o==null||o===1&&i>1)&&n.unshift(a)}return n}function Gt(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var a=t[t.length-o-1];a==null&&(a=1);var i=e[e.length-o-1];if(i==null&&(i=1),a===1)n.unshift(i);else if(i===1)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}function Oi(){var t,e,n,r,o,a,i,s,u,l;return Q.get("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=`
      const float NAN = uintBitsToFloat(uint(0x7fc00000));
    `,u=`
      const float INFINITY = uintBitsToFloat(uint(0x7f800000));
    `,l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s=`
      uniform float NAN;

      bool isnan(float val) {
        return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
      }
      bvec4 isnan(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function $p(t,e,n){n===void 0&&(n="index");var r=Kl(e);return r.map(function(o,a){return"int "+t[a]+" = "+n+" / "+o+"; "+(a===r.length-1?"int "+t[a+1]+" = "+n+" - "+t[a]+" * "+o:"index -= "+t[a]+" * "+o)+";"}).join("")}function Vv(t){return t.length===1?""+t[0]:"vec"+t.length+"("+t.join(",")+")"}function uie(t,e){if(t.length!==e.length)throw new Error("Vectors to be dotted must be of the same length -got "+t.length+" and "+e.length);for(var n=[],r=Math.floor(t.length/4),o=t.length%4,a=0;a<r;a++){var i=t.slice(4*a,4*a+4),s=e.slice(4*a,4*a+4);n.push(Vv(i)+", "+Vv(s))}return o!==0&&(i=t.slice(4*r),s=e.slice(4*r),i.length===1&&(i=i.map(function(u){return"float("+u+")"}),s=s.map(function(u){return"float("+u+")"})),n.push(Vv(i)+", "+Vv(s))),n.map(function(u,l){return"dot("+u+")"}).join("+")}function lie(t,e,n,r){var o=[];t.forEach(function(m){var g=ft(m.shapeInfo.logicalShape);m.shapeInfo.isUniform?o.push("uniform float "+m.name+(g>1?"["+g+"]":"")+";"):(o.push("uniform sampler2D "+m.name+";"),o.push("uniform int offset"+m.name+";"))});var a,i,s=o.join(`
`),u=t.map(function(m){return cie(m,e,r)}).join(`
`),l=e.texShape,d=Oi(),f=hie(d),p=vie(d);return e.isPacked?(a=die(e.logicalShape,l),i=mie(d)):(a=fie(e.logicalShape,l),i=pie(d)),r&&(p+=xie),[p,f,i,s,a,u,n].join(`
`)}function yf(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return Iie(t);case 1:return Oie(t);case 2:return Fie(t);case 3:return Lie(t);case 4:return zie(t);case 5:return Uie(t);case 6:return Wie(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function gB(t){switch(t.shapeInfo.logicalShape.length){case 0:return kie(t);case 1:return Mie(t);case 2:return Pie(t);case 3:return Bie(t);default:return jie(t)}}function cie(t,e,n){n===void 0&&(n=!1);var r="";r+=n?gB(t):yf(t);var o=t.shapeInfo.logicalShape,a=e.logicalShape;return o.length<=a.length&&(r+=n?Vie(t,e):Hie(t,e)),r}function die(t,e){switch(t.length){case 0:return yB();case 1:return wie(t,e);case 2:return Nie(t,e);case 3:return Cie(t,e);default:return Rie(t,e)}}function fie(t,e){switch(t.length){case 0:return yB();case 1:return Sie(t,e);case 2:return Die(t,e);case 3:return Eie(t,e);case 4:return _ie(t,e);case 5:return Tie(t,e);case 6:return Aie(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}function hie(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+t.texture2D+`(textureSampler, uv).r;
    }
  `}function pie(t){return`
    void setOutput(float val) {
      `+t.output+` = vec4(val, 0, 0, 0);
    }
  `}function mie(t){return`
    void setOutput(vec4 val) {
      `+t.output+` = val;
    }
  `}function vie(t){return t.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+t.varyingFs+` vec2 resultUV;
    `+t.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    `+t.defineSpecialNaN+`
    `+t.defineSpecialInf+`
    `+t.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+gie+`
    `+yie+`
    `+bie+`
  `}var gie=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,yie=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,bie=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,xie=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function yB(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function wie(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return n[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+n[1]+`.0);
      }
    `:n[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+n[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      return resTexRC.x * `+n[1]+` + resTexRC.y;
    }
  `}function Sie(t,e){return e[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+e[1]+`.0);
      }
    `:e[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+e[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      return resTexRC.x * `+e[1]+` + resTexRC.y;
    }
  `}function Cie(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      int index = resTexRC.x * `+n[1]+` + resTexRC.y;

      int b = index / `+o+`;
      index -= b * `+o+`;

      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec3(b, r, c);
    }
  `}function Eie(t,e){var n=$p(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;
      `+n+`
      return ivec3(r, c, d);
    }
  `}function Rie(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),a=o,i="",s="b, r, c",u=2;u<t.length-1;u++)i=`
      int b`+u+" = index / "+(a*=t[t.length-u-1])+`;
      index -= b`+u+" * "+a+`;
    `+i,s="b"+u+", "+s;return`
    ivec`+t.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));
      int index = resTexRC.x * `+n[1]+` + resTexRC.y;

      `+i+`

      int b = index / `+o+`;
      index -= b * `+o+`;

      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec`+t.length+"("+s+`);
    }
  `}function _ie(t,e){var n=$p(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;
      `+n+`
      return ivec4(r, c, d, d2);
    }
  `}function Tie(t,e){var n=$p(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+e[0]+`,
                             `+e[1]+`));

      int index = resTexRC.x * `+e[1]+` + resTexRC.y;

      `+n+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Aie(t,e){var n=$p(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;

      `+n+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Nie(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(eo(t,e))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+n[0]+", "+n[1]+`));
      }
    `;var r=Math.ceil(t[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+n[0]+", "+n[1]+`));

      int index = resTexRC.x * `+n[1]+` + resTexRC.y;
      int r = 2 * (index / `+r+`);
      int c = imod(index, `+r+`) * 2;

      return ivec2(r, c);
    }
  `}function Die(t,e){return eo(t,e)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+e[0]+", "+e[1]+`));
      }
    `:t[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+e[0]+", "+e[1]+`));
        int index = resTexRC.x * `+e[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+e[0]+", "+e[1]+`));
        int index = resTexRC.x * `+e[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+e[0]+", "+e[1]+`));
      int index = resTexRC.x * `+e[1]+` + resTexRC.y;
      int r = index / `+t[1]+`;
      int c = index - r * `+t[1]+`;
      return ivec2(r, c);
    }
  `}function Yl(t){return"offset"+t}function kie(t){var e=t.name;return`
    vec4 `+("get"+e.charAt(0).toUpperCase()+e.slice(1))+`() {
      return `+Oi().texture2D+"("+e+`, halfCR);
    }
  `}function Iie(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float "+n+"() {return "+e+";}";var r=t.shapeInfo.texShape,o=r[0],a=r[1];if(o===1&&a===1)return`
      float `+n+`() {
        return sampleTexture(`+e+`, halfCR);
      }
    `;var i=t.shapeInfo.texShape;return`
    float `+n+`() {
      vec2 uv = uvFromFlat(`+i[0]+", "+i[1]+", "+Yl(e)+`);
      return sampleTexture(`+e+`, uv);
    }
  `}function Mie(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Oi();return`
    vec4 `+n+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+o[0]+", "+o[1]+`, index);
      return `+a.texture2D+"("+e+`, uv);
    }
  `}function Oie(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`
      float `+n+`(int index) {
        `+bf(t)+`
      }
    `;var r=t.shapeInfo.texShape,o=r[0],a=r[1];if(a===1&&o===1)return`
      float `+n+`(int index) {
        return sampleTexture(`+e+`, halfCR);
      }
    `;var i=Yl(e);return a===1?`
      float `+n+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+i+") + 0.5) / "+o+`.0);
        return sampleTexture(`+e+`, uv);
      }
    `:o===1?`
      float `+n+`(int index) {
        vec2 uv = vec2((float(index + `+i+") + 0.5) / "+a+`.0, 0.5);
        return sampleTexture(`+e+`, uv);
      }
    `:`
    float `+n+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+a+", index + "+i+`);
      return sampleTexture(`+e+`, uv);
    }
  `}function Pie(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,a=o[0],i=o[1],s=Oi();if(o!=null&&eo(e,o))return`
      vec4 `+r+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+i+".0, "+a+`.0);

        return `+s.texture2D+"("+n+`, uv);
      }
    `;var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 `+r+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+Math.ceil(e[1]/2)+", "+u[0]+", "+u[1]+`, row, col);
      return `+s.texture2D+"("+n+`, uv);
    }
  `}function Fie(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape;if(o!=null&&eo(e,o)){var a=o[0];return`
    float `+r+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+o[1]+".0, "+a+`.0);
      return sampleTexture(`+n+`, uv);
    }
  `}var i=Xl(e),s=i.newShape,u=i.keptDims,l=s;if(l.length<e.length)return`
      `+yf(xf(t,l))+`
      float `+r+`(int row, int col) {
        return `+r+"("+wf(["row","col"],u)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+e[1]+`, 1)));
        `+bf(t)+`
      }
    `;var d=o[0],f=o[1],p=Yl(n);return f===1?`
    float `+r+`(int row, int col) {
      float index = dot(vec3(row, col, `+p+"), vec3("+e[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+d+`.0);
      return sampleTexture(`+n+`, uv);
    }
  `:d===1?`
    float `+r+`(int row, int col) {
      float index = dot(vec3(row, col, `+p+"), vec3("+e[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+f+`.0, 0.5);
      return sampleTexture(`+n+`, uv);
    }
  `:`
  float `+r+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+e[1]+" + col + "+p+`;
    vec2 uv = uvFromFlat(`+d+", "+f+`, index);
    return sampleTexture(`+n+`, uv);
  }
`}function Bie(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(e[0]===1)return`
        `+gB(xf(t,e.slice(1)))+`
        vec4 `+r+`(int b, int row, int col) {
          return `+r+"("+wf(["b","row","col"],[1,2])+`);
        }
      `;var i=a[0],s=a[1],u=Math.ceil(e[2]/2);return`
    vec4 `+r+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+i+", "+s+", "+u*Math.ceil(e[1]/2)+", "+u+`, b, row, col);
      return `+Oi().texture2D+"("+n+`, uv);
    }
  `}function Lie(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[1]*e[2],a=e[2],i=Xl(e),s=i.newShape,u=i.keptDims,l=s;if(l.length<e.length)return`
        `+yf(xf(t,l))+`
        float `+r+`(int row, int col, int depth) {
          return `+r+"("+wf(["row","col","depth"],u)+`);
        }
      `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+a+`, 1)));
        `+bf(t)+`
      }
    `;var d=t.shapeInfo.texShape,f=d[0],p=d[1],m=t.shapeInfo.flatOffset;return p===o&&m==null?`
        float `+r+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+a+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+p+".0, "+f+`.0);
          return sampleTexture(`+n+`, uv);
        }
      `:p===a&&m==null?`
    float `+r+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+e[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+".0, "+f+`.0);
      return sampleTexture(`+n+`, uv);
    }
  `:`
      float `+r+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+a+" + depth + "+Yl(n)+`;
        vec2 uv = uvFromFlat(`+f+", "+p+`, index);
        return sampleTexture(`+n+`, uv);
      }
  `}function jie(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=i[0],u=i[1],l=Math.ceil(e[n-1]/2),d=l*Math.ceil(e[n-2]/2),f="int b, int row, int col",p="b * "+d+" + (row / 2) * "+l+" + (col / 2)",m=2;m<n-1;m++)f="int b"+m+", "+f,p="b"+m+" * "+(d*=e[n-m-1])+" + "+p;return`
    vec4 `+o+"("+f+`) {
      int index = `+p+`;
      int texR = index / `+u+`;
      int texC = index - texR * `+u+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+u+", "+s+`);
      return `+Oi().texture2D+"("+r+`, uv);
    }
  `}function zie(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[3],a=e[2]*o,i=e[1]*a,s=Xl(e),u=s.newShape,l=s.keptDims;if(u.length<e.length)return`
      `+yf(xf(t,u))+`
      float `+r+`(int row, int col, int depth, int depth2) {
        return `+r+"("+wf(["row","col","depth","depth2"],l)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+i+", "+a+", "+o+`, 1)));
        `+bf(t)+`
      }
    `;var d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,p=f[0],m=f[1];return m===i&&d==null?`
      float `+r+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+a+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+p+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:m===o&&d==null?`
      float `+r+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+e[1]*e[2]+", "+e[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+p+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+i+" + col * "+a+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+p+", "+m+", index + "+Yl(n)+`);
      return sampleTexture(`+n+`, uv);
    }
  `}function Uie(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],a=e[3]*o,i=e[2]*a,s=e[1]*i,u=Xl(e),l=u.newShape,d=u.keptDims;if(l.length<e.length)return`
      `+yf(xf(t,l))+`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        return `+r+"("+wf(["row","col","depth","depth2","depth3"],d)+`);
      }
    `;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+s+", "+i+", "+a+", "+o+`)) +
          depth3;
        `+bf(t)+`
      }
    `;var f=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,m=p[0],g=p[1];return g===s&&f==null?`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+i+", "+a+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:g===o&&f==null?`
      float `+r+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+e[1]*e[2]*e[3]+`,
               `+e[2]*e[3]+", "+e[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+s+" + col * "+i+" + depth * "+a+` +
          depth2 * `+o+" + depth3 + "+Yl(n)+`;
      vec2 uv = uvFromFlat(`+m+", "+g+`, index);
      return sampleTexture(`+n+`, uv);
    }
  `}function Wie(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Xl(e),a=o.newShape,i=o.keptDims;if(a.length<e.length)return`
      `+yf(xf(t,a))+`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+r+"("+wf(["row","col","depth","depth2","depth3","depth4"],i)+`);
      }
    `;var s=e[5],u=e[4]*s,l=e[3]*u,d=e[2]*l,f=e[1]*d;if(t.shapeInfo.isUniform)return`
      float `+r+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+d+", "+l+", "+u+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+s+`, 1)));
        `+bf(t)+`
      }
    `;var p=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,g=m[0],y=m[1];return y===f&&p==null?`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+d+", "+l+", "+u+", "+s+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:y===s&&p==null?`
      float `+r+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+e[1]*e[2]*e[3]*e[4]+`,
               `+e[2]*e[3]*e[4]+`,
               `+e[3]*e[4]+`,
               `+e[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+r+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+d+" + depth * "+l+` +
          depth2 * `+u+" + depth3 * "+s+" + depth4 + "+Yl(n)+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+n+`, uv);
    }
  `}function bf(t){var e=t.name,n=ft(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Vie(t,e){var n,r=t.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,u=fd(t.shapeInfo.logicalShape,e.logicalShape),l=Rn(s),d=s-i,f=["x","y","z","w","u","v"];n=i===0?"":s<2&&u.length>=1?"coords = 0;":u.map(function(b){return"coords."+f[b+d]+" = 0;"}).join(`
`);var p="";p=s<2&&i>0?"coords":t.shapeInfo.logicalShape.map(function(b,S){return"coords."+f[S+d]}).join(", ");var m="return outputValue;";if(i===1&&s>1)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(i===0&&s>0)m=s===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(u.length){var g=i-2,y=i-1;u.indexOf(g)>-1&&u.indexOf(y)>-1?m="return vec4(outputValue.x);":u.indexOf(g)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(y)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 `+a+`() {
      `+l+` coords = getOutputCoords();
      `+n+`
      vec4 outputValue = get`+o+"("+p+`);
      `+m+`
    }
  `}function Hie(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=e.texShape,i=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===u&&t.shapeInfo.flatOffset==null&&eo(i,a))return`
      float `+o+`() {
        return sampleTexture(`+n+`, resultUV);
      }
    `;var l=Rn(u),d=fd(t.shapeInfo.logicalShape,e.logicalShape),f=u-s,p=["x","y","z","w","u","v"];return`
    float `+o+`() {
      `+l+` coords = getOutputCoords();
      `+(s===0?"":u<2&&d.length>=1?"coords = 0;":d.map(function(m){return"coords."+p[m+f]+" = 0;"}).join(`
`))+`
      return get`+r+"("+(u<2&&s>0?"coords":t.shapeInfo.logicalShape.map(function(m,g){return"coords."+p[g+f]}).join(", "))+`);
    }
  `}function Rn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function xf(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function wf(t,e){return e.map(function(n){return t[n]}).join(", ")}var Gie=(function(){return function(t,e,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,ee(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=t[t.length-1],a=Math.ceil(o/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,d=Rn(l),f=Oo("coords",l);if(a===1){var p=Rn(s=l+1);i=`
        `+p+" sourceLocR = "+p+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+p+" sourceLocG = "+p+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+p+" sourceLocA = "+p+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+p+" sourceLocB = "+p+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,i=`
        `+d+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+d+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+d+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+d+` sourceLocB = coords;
        --`+f[l-2]+";";var m=["x","y","z","w","u","v"].slice(0,s),g="."+m[s-1],y=m.map(function(I){return"int "+I}),b=Oo("sourceLocR",s-1).concat("inIdx.r"),S=Oo("sourceLocG",s-1).concat("inIdx.g"),C=Oo("sourceLocB",s-1).concat("inIdx.b"),E=Oo("sourceLocA",s-1).concat("inIdx.a"),_=n==="max"?"greaterThan":"lessThan",T=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+E.join()+")));",D=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+E.join()+") : 0.)",k=r?"":`
      float getBestIndicesAChannel(`+y.join()+`) {
        return getChannel(getBestIndicesA(`+m.join()+`),
                                          vec2(`+m.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+y.join()+`) {
        return getChannel(getA(`+m.join()+`),
                               vec2(`+m.slice(-2).join()+`));
      }
      `+k+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+g+", sourceLocG"+g+`,
          sourceLocB`+g+", sourceLocA"+g+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+T+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+_+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}})(),$ie=(function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,d=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+d+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}})(),qie=(function(){return function(t,e,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Gt(t,e),Gt(t,n);var i="0.0";r!=null&&(Gt(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";o!=null&&(Gt(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}})(),Xie=(function(){return function(t,e,n,r,o,a){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],Gt(t,e),Gt(t,n);var i="vec4(0.0)";r!=null&&(Gt(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(Gt(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `}})(),yI={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},bI=(function(){return function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Gt(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}})(),RE=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,uw="return a + b;",lw="return a - b;",xI="return a * b;",Kie=`if (a == b) return 1.0;
  return a / b;`,Yie=`
  float resultSign = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  int result = ia / ib;
  int amodb = ia - ib * result;

  if (resultSign < 0.0 && amodb != 0) {
    result -= 1;
  }
  return float(result);
`,Qie=`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,wI="return (a - b) * (a - b);",Jie="return float(a == b);",Zie="return float(a != b);",ese="return float(a < b);",tse="return float(a <= b);",nse="return float(a > b);",rse="return float(a >= b);",ose="return float(a >= 1.0 && b >= 1.0);",ase="return float(a >= 1.0 || b >= 1.0);",ise=RE+`
  return max(a, b);
`,sse=RE+`
  return min(a, b);
`,use=`if (b == 0.0) return NAN;
  return mod(a, b);`,lse=RE+`
  return atan(a, b);
`,cse="return (b >= 1.0) ? a : a * (b + 1.0);",dse="return (a < 0.) ? b * a : a;",Ln=(function(){return function(t,e,n){this.variableNames=["A","B"],this.outputShape=Gt(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}})(),qp=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`,fse=`
  vec4 resultSign = sign(a) * sign(b);
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  ivec4 result = ia / ib;
  ivec4 amodb = ia - ib * result;

  // Vectorize INT_DIV
  // if (resultSign < 0.0 && amodb != 0) result -= 1;
  // return float(result);
  return vec4(result -
     ivec4(lessThan(resultSign, vec4(0.0))) * ivec4(notEqual(amodb, ivec4(0))));
`,hse=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+qp+`
  return result;
`,pse=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,mse=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,vse=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+qp+`
  return result;
`,gse=`
  return vec4(equal(a, b));
`,yse=`
  return vec4(notEqual(a, b));
`,bse=`
  return vec4(lessThan(a, b));
`,xse=`
  return vec4(lessThanEqual(a, b));
`,wse=`
  return vec4(greaterThan(a, b));
`,Sse=`
  return vec4(greaterThanEqual(a, b));
`,Cse=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Ese=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Rse=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+qp+`
  return result;
`,_se=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+qp+`
  return result;
`,Tse=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+qp+`
  return result;
`,ts=(function(){return function(t,e,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=Gt(e,n),this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}})(),Ase=(function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float min;
      uniform float max;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, min, max));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"min"),r.maxLoc=o.getUniformLocationNoThrow(a,"max")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t})(),Nse=(function(){function t(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode=`
      uniform float min;
      uniform float max;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(min), vec4(max)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"min"),r.maxLoc=o.getUniformLocationNoThrow(a,"max")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t})(),Dse=(function(){return function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}})(),kse=(function(){return function(t){this.outputShape=[],this.outputShape=Ud(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var o=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=e.length,i=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `}})(),Ise=(function(){return function(t,e){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=Ud(t,e);var n=this.outputShape,r=n.length,o=Rn(r),a=Oo("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(y,b){return"T"+b});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=i[e],d="vec2("+i.slice(-2).join()+")",f=i.join(),p="if ("+l+" < "+s[0]+`)
          return getChannel(getT0(`+f+"), "+d+");";for(u=1;u<s.length;u++){var m=s[u-1];p+=`
        else if (`+l+" < "+s[u]+`) {
          `+l+" -= "+m+`;
          return getChannel(getT`+u+"("+f+"), "+d+`);
        }`}var g=s.length;p+=`
        else {
          `+l+" -= "+s[s.length-1]+`;
          return getChannel(getT`+g+"("+f+"), "+d+`);
        }`,this.userCode=`
      float getValue(`+i.map(function(y){return"int "+y})+`) {
        `+p+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);
        if (++`+a[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+a+`);
        }
        if (++`+a[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+a+`);
        }
        if (`+a[r-2]+" < "+n[r-2]+` &&
            --`+a[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `}})(),Mse=(function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),Ose=(function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, d2);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),Pse=(function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,a=t.padInfo.top,i=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+o+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+a+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),Fse=(function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),Bse=(function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TODO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),Lse=(function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TODO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),jse=(function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.top,n=t.padInfo.left,r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.filterHeight,u=t.filterWidth,l=4*Math.floor(t.inChannels/4),d=t.inChannels%4;this.userCode=`
      const ivec2 strides = ivec2(`+r+", "+o+`);
      const ivec2 pads = ivec2(`+e+", "+n+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`; wR++) {
          int xR = xRCorner + wR * `+a+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+u+`; wC++) {
            int xC = xCCorner + wC * `+i+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+l+`; d1 += 4) {
              vec4 xValues = vec4(
                getX(batch, xR, xC, d1),
                getX(batch, xR, xC, d1 + 1),
                getX(batch, xR, xC, d1 + 2),
                getX(batch, xR, xC, d1 + 3)
              );
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              dotProd += dot(xValues, wValues);
            }

            if (`+(d===1)+`) {
              dotProd +=
                getX(batch, xR, xC, `+l+`) *
                getW(wR, wC, `+l+`, d2);
            } else if (`+(d===2)+`) {
              vec2 xValues = vec2(
                getX(batch, xR, xC, `+l+`),
                getX(batch, xR, xC, `+l+` + 1)
              );
              vec2 wValues = vec2(
                getW(wR, wC, `+l+`, d2),
                getW(wR, wC, `+l+` + 1, d2)
              );
              dotProd += dot(xValues, wValues);
            } else if (`+(d===3)+`) {
              vec3 xValues = vec3(
                getX(batch, xR, xC, `+l+`),
                getX(batch, xR, xC, `+l+` + 1),
                getX(batch, xR, xC, `+l+` + 2)
              );
              vec3 wValues = vec3(
                getW(wR, wC, `+l+`, d2),
                getW(wR, wC, `+l+` + 1, d2),
                getW(wR, wC, `+l+` + 2, d2)
              );
              dotProd += dot(xValues, wValues);
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),zse=(function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,m=4*Math.floor(t.inChannels/4),g=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+a+", "+i+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+p+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+m+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(g===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+m+`) *
                  getW(wF, wR, wC, `+m+`, d2);
              } else if (`+(g===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(g===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1),
                  getX(batch, xF, xR, xC, `+m+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2),
                  getW(wF, wR, wC, `+m+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}})(),Use=(function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.dilationHeight,u=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+r+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+f+`;
        int q = d2 - d1 * `+f+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+l+`; wR++) {
          int xR = xRCorner + wR * `+s+`;

          if (xR < 0 || xR >= `+e+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+u+`;

            if (xC < 0 || xC >= `+n+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }
        setOutput(dotProd);
      }
    `}})(),Wse=(function(){return function(t){this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=t.outShape;for(var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.dilationHeight,u=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=d,p="int xR; int xC; int xCOffset;",m=0;m<l;m++)for(var g=0;g<d;g++)p+=`
          vec4 xTexelR`+m+"C"+2*g+` = vec4(0.);
          vec4 wR`+m+"C"+g+` = vec4(0.);
          vec4 xR`+m+"C"+g+" = vec4(0.);";for(m=0;m<l;m++)for(var y=0;y<f;y++){if(p+=`
          xR = xRCorner + `+m*s+`;
          xC = xCCorner + `+(g=2*y)*u+`;
        `,i===1){if(g<d&&(p+=o%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+e+" && xCOffset >= 0 && xCOffset < "+n+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+e+" && xCOffset >= 0 && xCOffset < "+n+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);
                  xR`+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+`.xy);
                } else {
                  xR`+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+e+" && xC >= 0 && xC < "+n+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xR`+m+"C"+g+" = xTexelR"+m+"C"+g+`;
              `,g+1<d)){var b=o%2==0?jd(u):u;u%2==0&&o%2==1||u%2!=0&&o%2!=1?(p+=`
                  xCOffset = xC + `+o%2+" + "+b+`;

                  if(xR >= 0 && xR < `+e+` &&
                    xCOffset >= 0 && xCOffset < `+n+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,u>1&&(p+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+e+` &&
                      xCOffset >= 0 && xCOffset < `+n+`) {
                      xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+m+"C"+g+` = vec4(0.);
                    }
                  `),p+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.xy);
                `):p+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+e+` &&
                    xCOffset >= 0 && xCOffset < `+n+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+`;
                `}}else g<d&&(p+=`
              if(xR >= 0 && xR < `+e+`) {
            `,o%2==1?(p+=`
                xCOffset = xC + 1 - `+i+`;
                if(xCOffset >= 0 && xCOffset < `+n+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+n+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
              `,g+1<d&&(p+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+i+`;
                  if(xCOffset >= 0 && xCOffset < `+n+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+`.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < `+n+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+i+`;
                if(xCOffset >= 0 && xCOffset < `+n+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+`.xy);
              `,g+1<d&&(p+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
                `)),p+="}");g<d&&(p+=`
            vec4 wTexelR`+m+"C"+g+" = getW("+m+", "+g+`, d1, q);
            wR`+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+`.xz);
          `,g+1<d&&(p+=`
              vec4 wTexelR`+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+`, d1, q);
              wR`+m+"C"+(g+1)+` =
                vec4(wTexelR`+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<l;m++)for(g=0;g<d;g++)p+="result += xR"+m+"C"+g+" * wR"+m+"C"+g+";";this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+r+", "+o+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 result = vec4(0.);

        `+p+`

        setOutput(result);
      }
    `}})(),Vse=(function(){return function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],i=t[1],s=t[2],u=t[3],l=e[0],d=n[0],f=n[1];this.outputShape=[l,d,f,u];var p=r==="bilinear"?1:0,m=[i-1+".0",s-1+".0"],g=m[0],y=m[1],b=d>1?[""+(i-1)/(d-1),"(y2-y1) * height_ratio","y1*"+g+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+g],S=b[0],C=b[1],E=b[2],_=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+y+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+y],T=_[0],D=_[1],k=_[2];this.userCode=`
      const float height_ratio = float(`+S+`);
      const float width_ratio = float(`+T+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+C+`;
        float width_scale = `+D+`;

        float in_y = `+E+`;
        if( in_y < 0.0 || in_y > `+g+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+k+`;
        if( in_x < 0.0 || in_x > `+y+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+p+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}})(),Hse=(function(){return function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],a=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Rn(r)+` coords = getOutputCoords();
        int end = `+SI(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+SI(r,"coords")+` = idx;
          val += getX(`+Gse(r,"coords")+`);
        }
        setOutput(val);
      }
    `}})();function Gse(t,e){if(t===1)return""+e;if(t===2)return e+".x, "+e+".y";if(t===3)return e+".x, "+e+".y, "+e+".z";if(t===4)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}function SI(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var $se=(function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t})(),qse=(function(){return function(t){this.variableNames=["A"];var e=Oi();this.outputShape=t,this.userCode=`
      const float FLOAT_MAX = 1.70141184e38;
      const float FLOAT_MIN = 1.17549435e-38;

      lowp vec4 encode_float(highp float v) {
        if (isnan(v)) {
          return vec4(255, 255, 255, 255);
        }

        highp float av = abs(v);

        if(av < FLOAT_MIN) {
          return vec4(0.0, 0.0, 0.0, 0.0);
        } else if(v > FLOAT_MAX) {
          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
        } else if(v < -FLOAT_MAX) {
          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
        }

        highp vec4 c = vec4(0,0,0,0);

        highp float e = floor(log2(av));
        highp float m = exp2(fract(log2(av))) - 1.0;

        c[2] = floor(128.0 * m);
        m -= c[2] / 128.0;
        c[1] = floor(32768.0 * m);
        m -= c[1] / 32768.0;
        c[0] = floor(8388608.0 * m);

        highp float ebias = e + 127.0;
        c[3] = floor(ebias / 2.0);
        ebias -= c[3] * 2.0;
        c[2] += floor(ebias) * 128.0;

        c[3] += 128.0 * step(0.0, -v);

        return c / 255.0;
      }

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `}})(),CI={REAL:"return real * expR - imag * expI;",IMAG:"return real * expI + imag * expR;"},EI=(function(){return function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}})(),Xse=(function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,e)}},t})(),Kse=(function(){return function(t){this.variableNames=["A"];var e=Oi(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}})(),Yse=(function(){return function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=Rn(this.rank),a=Qse(t,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `}})();function Qse(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(n===1)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<t.length;a++)a===e?o.push("int(getIndices("+r[a]+"))"):o.push(""+r[a]);return o.join()}var vi,uo,Jse=(function(){return function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Rn(e.length),o=Rn(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}})();function Sf(t,e){return[e,t]}function Xp(t,e){return t*e}function Zse(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}function eue(t,e,n){var r=Xp(t.length,n);if(e.length<r)throw new Error("unpackedArray length ("+e.length+") must be >= "+r);for(var o=0,a=0;a<t.length;++a)e[o]=t[a],o+=n}function bB(t,e,n){var r=Zse(t.length,n);if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var o=0,a=0;a<t.length;a+=n)e[o++]=t[a]}function Ql(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function _E(t,e){var n=Ql(t,e);return n[0]*n[1]*4}function tue(t,e,n,r,o){for(var a=r%2==1,i=n%2==1,s=Math.floor(r/2),u=Math.floor(n/2),l=Math.ceil(r/2),d=l*Math.ceil(n/2),f=jd(n)*jd(r),p=0;p<e;p++){for(var m=p*n*r,g=p*f,y=a?4:0,b=r,S=g,C=0;C<u;++C){for(var E=2*C*r,_=0;_<s;++_){var T=m+E+2*_;o[S]=t[T],o[S+1]=t[T+1],o[S+2]=t[T+b],o[S+3]=t[T+b+1],S+=4}S+=y}if(a){T=m+r-1,S=g+4*(l-1);var D=2*r;for(y=4*l,C=0;C<u;++C)o[S]=t[T],o[S+2]=t[T+r],T+=D,S+=y}if(i){for(T=m+(n-1)*r,S=g+4*(d-l),_=0;_<s;++_)o[S++]=t[T++],o[S++]=t[T++],S+=2;a&&i&&(o[g+f-4]=t[T])}}return o}function xB(t,e,n,r,o){var a=n*r;if(o.length<a)throw new Error("matrix length ("+o.length+") must be >= "+a);for(var i=r%2==1,s=n%2==1,u=Math.floor(r/2),l=Math.floor(n/2),d=Math.ceil(r/2),f=d*Math.ceil(n/2),p=jd(n)*jd(r),m=0;m<e;m++){for(var g=m*n*r,y=m*p,b=i?4:0,S=r+(i?1:0),C=y,E=g,_=g+r,T=0;T<l;++T){for(var D=0;D<u;++D)o[E++]=t[C++],o[E++]=t[C++],o[_++]=t[C++],o[_++]=t[C++];C+=b,E+=S,_+=S}if(i){C=y+4*(d-1);var k=g+r-1;for(b=4*d,S=2*r,T=0;T<l;++T)o[k]=t[C],o[k+r]=t[C+2],C+=b,k+=S}if(s){for(C=y+4*(f-d),k=g+(n-1)*r,D=0;D<u;++D)o[k++]=t[C++],o[k++]=t[C++],C+=2;i&&(o[g+n*r-1]=t[C])}}return o}function Ze(t,e,n){var r=n();return e&&nue(t),r}function nue(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+iue(t,e))}(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(vi||(vi={})),(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(uo||(uo={}));var rue=596e-10,oue=65504;function aue(t){return!!(Q.get("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||rue<Math.abs(t)&&Math.abs(t)<oue)}function iue(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Hv(t,e,n){return As(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function sue(t,e,n){var r=As(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Ze(t,e,function(){return t.shaderSource(r,n)}),Ze(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function uue(t,e,n){var r=As(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Ze(t,e,function(){return t.shaderSource(r,n)}),Ze(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw cue(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var lue=/ERROR: [0-9]+:([0-9]+):/g;function cue(t,e){var n=lue.exec(e);if(n==null)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],o=t.split(`
`),a=o.length.toString().length+2,i=o.map(function(p,m){return xd((m+1).toString(),a)+p}),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),d=i.slice(r-1,r),f=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log("%c "+xd(d[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function due(t,e){return As(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function fue(t,e,n){if(Ze(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function cw(t,e,n){if(Ze(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function hue(t,e,n){var r=As(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ze(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Ze(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function pue(t,e,n){var r=As(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Ze(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Ze(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function mue(){return Q.get("WEBGL_VERSION")===2?1:4}function vue(t,e){return As(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function wB(t,e){var n=Q.get("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function gue(t,e){return As(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function RI(t,e,n,r,o,a,i,s){var u=t.getAttribLocation(n,r);return u!==-1&&(Ze(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,o)}),Ze(t,e,function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,i,s)}),Ze(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function yue(t,e,n,r){Cue(t,r),Ze(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),Ze(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function bue(t,e,n,r){return As(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function xue(t,e,n){return t.getUniformLocation(e,n)}function wue(t,e,n,r,o,a){Ze(t,e,function(){return yue(t,e,r,a)}),Ze(t,e,function(){return t.uniform1i(o,a)})}function dw(t,e,n,r){Ze(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Ze(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function _I(t,e,n){Ze(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Ze(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Gv(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Sue(t,e))}function Sue(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function As(t,e,n,r){var o=Ze(t,e,function(){return n()});if(o==null)throw new Error(r);return o}function Cue(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function nd(t,e){return e===void 0&&(e=2),ft(t.slice(0,t.length-e))}function rd(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Eue(t,e){var n;e===void 0&&(e=!1);var r=Q.get("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,d){return d>=t.length-2?jd(t[d]):t[d]})).length===1&&(t=[2,t[0]])),t.length!==2){var o=Xl(t);t=o.newShape}var a=ft(t);if(t.length<=1&&a<=r)return[1,a];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var i=nd(t),s=2,u=2;return t.length&&(s=(n=rd(t))[0],u=n[1]),lI(a=i*(s/2)*(u/2)).map(function(l){return 2*l})}return lI(a)}function $v(t){return t%2==0}function qv(t,e){if(eo(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||$v(n)&&$v(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&$v(t[0])&&$v(e[0])}function Rue(t,e){var n=Oi();return sue(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function _ue(t,e){return hue(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Tue(t,e){return pue(t,e,new Uint16Array([0,1,2,2,1,3]))}function Aue(t,e){var n,r,o,a,i,s,u,l,d=t;return Q.get("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,o=d.RGBA16F,a=d.RGBA32F,i=d.RED,s=4,u=1,l=d.HALF_FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,a=d.RGBA,i=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l}}function Kp(t,e,n,r,o,a,i){wB(n,r);var s=vue(t,e),u=t.TEXTURE_2D;return Ze(t,e,function(){return t.bindTexture(u,s)}),Ze(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Ze(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Ze(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Ze(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Ze(t,e,function(){return t.texImage2D(u,0,o,n,r,0,a,i,null)}),Ze(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function Nue(t,e,n,r,o){var a=Sf(n,r);return Kp(t,e,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function Due(t,e,n,r,o){var a=Sf(n,r);return Kp(t,e,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function kue(t,e,n,r,o){var a=Sf(n,r);return Kp(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function Iue(t,e,n,r,o){var a=Ql(n,r);return Kp(t,e,a[0],a[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function Mue(t,e,n,r,o){var a=Ql(n,r);return Kp(t,e,a[0],a[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function Oue(t,e,n,r){return Ze(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),RI(t,e,n,"clipSpacePos",r,3,20,0)&&RI(t,e,n,"uv",r,2,20,12)}function Pue(t,e,n,r){Ze(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),Ze(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Ze(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function SB(t,e,n,r,o,a,i){wB(r,o),Ze(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),Ze(t,e,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,r,o,i,t.FLOAT,a)}),Ze(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Fue(t,e,n,r,o,a,i,s){var u,l=Sf(r,o),d=l[0],f=l[1],p=r*o;s.defaultNumChannels===1&&p===a.length?u=a:eue(a,u=new Float32Array(p*i),i),SB(t,e,n,d,f,u,s.textureFormatFloat)}function Bue(t,e,n,r,o,a,i,s,u,l){var d=Ql(i,s),f=d[0],p=d[1],m=new Float32Array(_E(i,s));tue(u,r,o,a,m),SB(t,e,n,f,p,m,t.RGBA)}function Lue(t,e,n,r,o,a){var i=n;if(Q.get("WEBGL_VERSION")===2){var s=t,u=s.createBuffer();Ze(t,e,function(){return t.bindBuffer(s.PIXEL_PACK_BUFFER,u)});var l=4*Xp(r*o,a.downloadUnpackNumChannels);Ze(t,e,function(){return t.bufferData(s.PIXEL_PACK_BUFFER,l,s.STREAM_READ)}),Ze(t,e,function(){return s.readPixels(0,0,o,r,t.RGBA,t.FLOAT,0)}),Ze(t,e,function(){return t.bindBuffer(s.PIXEL_PACK_BUFFER,null)}),i=u}return i}function jue(t,e,n,r,o){var a=t,i=new Float32Array(Xp(n*r,o.downloadUnpackNumChannels));a.bindBuffer(a.PIXEL_PACK_BUFFER,e),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,i),a.bindBuffer(a.PIXEL_PACK_BUFFER,null);var s=new Float32Array(n*r);return bB(i,s,o.downloadUnpackNumChannels),s}function zue(t,e,n,r,o){var a=Sf(n,r),i=a[0],s=a[1],u=new Float32Array(Xp(n*r,o.downloadUnpackNumChannels));Ze(t,e,function(){return t.readPixels(0,0,i,s,o.downloadTextureFormat,t.FLOAT,u)});var l=new Float32Array(n*r);return bB(u,l,o.downloadUnpackNumChannels),l}function Uue(t,e,n,r,o){var a=Sf(n,r),i=a[0],s=a[1],u=new Uint8Array(Xp(n*r,4));return Ze(t,e,function(){return t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function Wue(t,e,n,r,o,a,i,s){var u=t,l=new Float32Array(_E(a,i));u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null);var d=new Float32Array(ft([n,r,o]));return xB(l,n,r,o,d),d}function Vue(t,e,n,r,o,a,i,s){var u=Ql(a,i),l=u[0],d=u[1],f=new Float32Array(_E(a,i));Ze(t,e,function(){return t.readPixels(0,0,l,d,t.RGBA,t.FLOAT,f)});var p=new Float32Array(ft([n,r,o]));return xB(f,n,r,o,p)}var Hue=(function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Q.get("WEBGL_VERSION");e!=null?(this.gl=e,joe(n,e)):this.gl=Di(n),Q.get("WEBGL_VERSION")===1?(this.textureFloatExtension=Hv(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),Q.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=Hv(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=Hv(this.gl,this.debug,"EXT_color_buffer_float"),this.vertexBuffer=_ue(this.gl,this.debug),this.indexBuffer=Tue(this.gl,this.debug),this.framebuffer=gue(this.gl,this.debug),this.textureConfig=Aue(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return Q.get("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Ze(n,this.debug,function(){return n.finish()}),Ze(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),Ze(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),Ze(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),Ze(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),Ze(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),Nue(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),Due(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),kue(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),Pue(this.gl,this.debug,e,n)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),Mue(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),Iue(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(_I(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Ze(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.uploadMatrixToTexture=function(e,n,r,o){this.throwIfDisposed();var a=mue();return Fue(this.gl,this.debug,e,n,r,o,a,this.textureConfig)},t.prototype.uploadMatrixToPackedTexture=function(e,n,r,o,a,i,s){return this.throwIfDisposed(),Bue(this.gl,this.debug,e,n,r,o,a,i,s,this.textureConfig)},t.prototype.downloadFloat32MatrixFromOutputTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return zue(o.gl,o.debug,n,r,o.textureConfig)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return Uue(o.gl,o.debug,n,r,o.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,o,a,i){return Wue(this.gl,e,n,r,o,a,i,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n,r){return jue(this.gl,e,n,r,this.textureConfig)},t.prototype.maybeCreateBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var o=Lue(this.gl,this.debug,e,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,o=this;if(Q.get("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=i}else Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r,o,a,i){var s=this;return this.downloadMatrixDriver(e,function(){return Vue(s.gl,s.debug,n,r,o,a,i,s.textureConfig)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=uue(n,this.debug,e),o=Rue(n,this.debug),a=due(n,this.debug);return Ze(n,this.debug,function(){return n.attachShader(a,o)}),Ze(n,this.debug,function(){return n.attachShader(a,r)}),fue(n,this.debug,a),this.debug&&cw(n,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=Oue(n,this.debug,this.program,this.vertexBuffer)),a},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Ze(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&cw(this.gl,this.debug,this.program),Ze(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?bue(this.gl,this.debug,e,n):xue(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),Ze(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),wue(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var o=Ql(n,r),a=o[0],i=o[1];this.setOutputMatrixTextureDriver(e,a,i)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&cw(this.gl,this.debug,this.program),Gv(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Ze(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Ze(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Hv(this.gl,this.debug,Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),a=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,a),a},t.prototype.endQuery=function(){if(Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return pn(this,void 0,void 0,function(){var n=this;return mn(this,function(r){switch(r.label){case 0:return[4,cI(function(){return n.disposed||n.isQueryAvailable(e,Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(e,o.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=Gue(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||cI(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),dw(this.gl,this.debug,e,this.framebuffer),this.debug&&Gv(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(dw(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Gv(this.gl)):_I(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var o=this.gl;dw(o,this.debug,e,this.framebuffer),this.debug&&Gv(o),this.outputTexture=e,Ze(o,this.debug,function(){return o.viewport(0,0,n,r)}),Ze(o,this.debug,function(){return o.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,o){var a=this;this.throwIfDisposed(),Ze(this.gl,this.debug,function(){return a.gl.scissor(e,n,r,o)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t})();function Gue(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}function $ue(t,e,n,r){var o=e.userCode,a=n.map(function(y,b){var S={logicalShape:y.shape,texShape:y.isUniform?null:y.texData.texShape,isUniform:y.isUniform,isPacked:!y.isUniform&&y.texData.isPacked,flatOffset:null};return y.texData!=null&&y.texData.slice!=null&&y.texData.slice.flatOffset>0&&(S.flatOffset=y.texData.slice.flatOffset),{name:e.variableNames[b],shapeInfo:S}}),i=a.map(function(y){return y.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=lie(a,s,o,e.usesPackedTextures),l=t.createProgram(u),d=null,f=null;Q.get("WEBGL_VERSION")===1&&(d=t.getUniformLocation(l,"INFINITY",!1),f=t.getUniformLocation(l,"NAN",!1));for(var p={},m=0;m<e.variableNames.length;m++){var g=e.variableNames[m];p[g]=t.getUniformLocation(l,g,!1),p["offset"+g]=t.getUniformLocation(l,"offset"+g,!1)}return{program:e,source:u,webGLProgram:l,uniformLocations:p,inShapeInfos:i,outShapeInfo:s,infLoc:d,nanLoc:f}}function TI(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var o=n.logicalShape,a=e[r],i=a.shape;if(!eo(o,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+i+" must match");if(!n.isUniform||!a.isUniform){var s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!eo(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}function que(t,e,n,r,o){TI(e.inShapeInfos,n),TI([e.outShapeInfo],[r]);var a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a,i[0],i[1]):t.setOutputMatrixTexture(a,i[0],i[1]),t.setProgram(e.webGLProgram),Q.get("WEBGL_VERSION")===1&&(e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN)),n.forEach(function(s,u){var l=e.program.variableNames[u],d=e.uniformLocations[l],f=e.uniformLocations["offset"+l];if(d!=null)if(s.isUniform)if(ft(s.shape)<2)t.gl.uniform1f(d,s.uniformValues[0]);else{var p=s.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(d,p)}else s.texData.slice!=null&&f!=null&&t.gl.uniform1i(f,s.texData.slice.flatOffset),t.setInputMatrixTexture(s.texData.texture,d,u)}),o?.(t,e.webGLProgram),t.executeProgram()}function Xue(t,e,n){var r="";e.concat(n).forEach(function(i){var s=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0,u=i.isUniform?"uniform":i.texData.texShape;r+=i.shape+"_"+u+"_"+s});var o=t.userCode,a=t.constructor.name;return a+="_"+r+"_"+o}var Kue=(function(){return function(t,e,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,d=n.dilationHeight,f=s.left,p=s.top,m=o*r,g=Oi();this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            int blockIndex = rc.y + col;
            int pos = rc.x + row;

            if(blockIndex >= `+t[1]+" || pos >= "+t[0]+`) continue;

            int offsetY = int(blockIndex / (`+u+")) * "+i+" - "+p+`;
            int d0 = offsetY + `+d+" * (pos / "+m+`);

            if(d0 >= `+e[0]+` || d0 < 0) continue;

            int offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+f+`.);
            int d1 = offsetX + `+l+" * (int(mod(float(pos), "+m+".) / "+o+`.));

            if(d1 >= `+e[1]+` || d1 < 0) continue;

            vec2 innerDims = vec2(d1, int(mod(float(pos), `+o+`.)));
            result[row * 2 + col] = getChannel(getA(d0, int(innerDims.x),
                                              int(innerDims.y)), innerDims);
          }
        }

        `+g.output+` = result;
      }
    `}})(),Yue=(function(){return function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `}})(),Que=(function(){return function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}})(),Jue=(function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,a=t.effectiveFilterWidth,i=o-1-t.padInfo.top,s=a-1-t.padInfo.left,u=o*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}})(),fw=(function(){return function(t,e,n,r,o,a){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),a===void 0&&(a=null),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=e;var i=n?t[1]:t[2],s=Math.ceil(i/2),u=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",m="";a&&(p=`vec4 activation(vec4 x) {
        `+a+`
      }`,m="result = activation(result);");var g=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),this.userCode=`
      `+p+`

      const float sharedDimension = `+s+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+s+`; i++) {
          vec4 a = getMatrixA(rc.x, `+u+`);
          vec4 b = getMatrixB(rc.x, `+l+`);

          result += (`+d[0]+" * "+f[0]+") + ("+d[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+g+`

        `+m+`

        setOutput(result);
      }
    `}})(),Zue=(function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t})(),ele=(function(){return function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `}})(),tle=(function(){return function(t){this.variableNames=["A"],this.isPackShader=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Oo("rc",e),r=Rn(e),o=rle(e,t,n),a=ole(e,t[t.length-1],t[t.length-2],n),i=ale(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+i+`));
          }
        }
      `}}})();function nle(t,e){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var a=(r===0?"r":"rp1")+", "+(o===0?"c":"cp1"),i=2;i<t;i++)a=e[e.length-1-i]+","+a;n.push(a)}return n}function rle(t,e,n){if(t===1)return"rc > "+e[0];for(var r="",o=t-2;o<t;o++)r+=n[o]+" >= "+e[o],o<t-1&&(r+="||");return r}function ole(t,e,n,r){if(t===1)return"";var o=r.slice(-2);return`
    int r = `+o[0]+`;
    int c = `+o[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+e+`;
    bool rEdge = rp1 >= `+n+`;
  `}function ale(t,e){var n=t.length,r=nle(n,e);return n===1?`getA(rc),
            rc + 1 >= `+t[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+r[0]+`),
          cEdge ? 0. : getA(`+r[1]+`),
          rEdge ? 0. : getA(`+r[2]+`),
          rEdge || cEdge ? 0. : getA(`+r[3]+")"}var ile=(function(){return function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,o=Rn(r),a=e.map(function(u){return u[0]}).join(","),i=e.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+a+`);
      `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `}})(),sle=(function(){return function(t,e,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=e.map(function(b,S){return b[0]+t[S]+b[1]});for(var r=t.length,o=Rn(r),a=e.map(function(b){return b[0]}).join(","),i=e.map(function(b,S){return b[0]+t[S]}).join(","),s=Oo("rc",r),u=Oo("source",r),l=s[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],p=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",g=0,y=r===1?2:4;g<y;g++)m+=`
        `+f[g]+`
        if (`+p+`) {
          result[`+g+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+g+"] = getChannel(getX("+u.join()+"), "+d+`);
        }
      `;m+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+a+`);
      const `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+m+`
        setOutput(result);
      }
    `}})(),hw=(function(){return function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var p=e==="avg",m="0.0";if(p||(m="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+a+`);
        const ivec2 pads = ivec2(`+d+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var g=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(g="avgValue / count");var y=4*Math.floor(r/4),b=r%4,S=`
      if (`+p+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+a+`);
      const ivec2 pads = ivec2(`+d+", "+f+`);
      const float initializationValue = `+m+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+m+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+y+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+S+`
          }

          int xC = xCCorner + `+y+`;
          if (`+(b===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+S+`
          } else if (`+(b===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+S+`
          } else if (`+(b===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+S+`
          }
        }
        setOutput(`+g+`);
      }
    `}}})(),ule=(function(){return function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";e==="prod"?i="1.0":e==="min"?(i="1.0 / 1e-20",s="min"):e==="max"&&(i="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),d=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,p="vec4";e==="all"?(i="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):e==="any"&&(i="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");var m="";o%n>0&&(m=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+m+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(d===1)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(d===2)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(d===3)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `}})(),lle=(function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      `+dle(e)+`
      `+cle(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `}})();function cle(t){return`
    int getFlatIndex(ivec3 coords) {
      return round(`+uie(["coords.x","coords.y","coords.z"],Kl(t).map(function(e){return e.toString()}).concat(["1."]))+`);
    }
  `}function dle(t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+$p(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  `}var fle=(function(){return function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/d[0],p=l[1]/d[1],m=1/f,g=1/p,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+g+`);

        const int winHeight = int(`+y+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}})(),hle=(function(){return function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}})(),ple=(function(){return function(t,e,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));
        
        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`; 
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}})(),mle=(function(){return function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/d[0],p=l[1]/d[1],m=1/f,g=1/p,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+g+`);

        const int winHeight = int(`+y+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}})(),vle=(function(){return function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}})(),gle=(function(){return function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(a,i){return(function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"})(i)}).join(","),o=Rn(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `}})(),yle=(function(){return function(t,e){this.variableNames=["x"],this.usesPackedTextures=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=Oo("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Rn(n);function s(u){var l=t.map(function(d,f){return(function(p,m){return e.indexOf(p)!==-1&&t[p]!==1?t[p]+" - "+m[p]+" - 1":""+m[p]})(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1), rc);
          if(`+o+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1), rc + 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(u){return s(u)})(r.slice())+`;
          if(`+o+`){
            result.g = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)})(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+(function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            if(`+o+`) {
              result.a = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `}})(),AI=(function(){return function(t,e,n,r,o,a,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=Rn(o.length),u=Rn(a.length),l="";n===1?l="i":n===2&&(l="i, j");var d="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var p="getUpdates("+f+")",m=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+m+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+p+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}})(),ble=(function(){return function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=t.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var f="";o%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `}})(),xle=(function(){return function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&i.push(""+a[u]);r=i.join(),o=s.join()}var l=Rn(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `}})(),wle=(function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=Rn(this.rank),o="uniform int start["+this.rank+"];",a=Sle(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(i,s){return"sourceLoc."+W2[s]+" = start["+s+"] + coords."+W2[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+a+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t})(),W2=["x","y","z","w","u","v"];function Sle(t){if(t===1)return"sourceLoc";if(t<=6)return W2.slice(0,t).map(function(e){return"sourceLoc."+e}).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}var Cle=(function(){function t(e){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=e,this.rank=e.length;var n=Rn(this.rank),r=Oo("coords",this.rank),o=Oo("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",i="getChannel(getSource("+o.join()+"), "+a+")",s=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+i+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(d,f){return"start["+f+"]"}).join()+");":e.map(function(d,f){return o[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+` 
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t})(),Ele=(function(){return function(t,e,n,r){this.variableNames=["x"];var o=n.filter(function(d,f){return r.indexOf(f)===-1});this.outputShape=o;var a=n.length,i=Rn(n.length),s=Rn(o.length),u="";if(a===1)u="coords * strides + begin";else{var l=0;u=n.map(function(d,f){return r.indexOf(f)===-1?(l++,o.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(l-1)+"] * strides["+f+"] + begin["+f+"]"):"begin["+f+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+u+`));
      }
    `}})(),Rle=(function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var o,a=NI(n,r),i=DI(e,a,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[i].shift();return this.usedTextures[i].push(s),s}return this.numUsedTextures++,this.log(),a===uo.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===uo.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===uo.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===uo.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===uo.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),o},t.prototype.releaseTexture=function(e,n,r,o){if(this.freeTextures!=null){var a=DI(n,NI(r,o),o);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],s=i.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){e.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t})();function NI(t,e){if(t===vi.UPLOAD)return e?uo.PACKED_2X2_FLOAT32:uo.UNPACKED_FLOAT32;if(t===vi.RENDER||t==null)return e?Q.get("WEBGL_RENDER_FLOAT32_ENABLED")?uo.PACKED_2X2_FLOAT32:uo.PACKED_2X2_FLOAT16:Q.get("WEBGL_RENDER_FLOAT32_ENABLED")?uo.UNPACKED_FLOAT32:uo.UNPACKED_FLOAT16;if(t===vi.DOWNLOAD||t===vi.PIXELS)return uo.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function DI(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var _le=(function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=Rn(this.rank),a=Tle(t);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `}})();function Tle(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(e===1)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}var Ale=(function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=Rn(this.rank),a=Nle(e);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `}})();function Nle(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}var Dle=(function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Rn(this.rank),a=vB("rc",this.rank),i=new Array(this.rank);for(r=0;r<e.length;r++)i[e[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }  
      setOutput(result);
    }
    `}})(),CB=.3275911,EB=.254829592,RB=-.284496736,_B=1.421413741,TB=-1.453152027,AB=1.061405429,TE=1.7580993408473768,AE=1.0507009873554805,_t=(function(){return function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}})(),Jl="if (isnan(x)) return x;",kle="return x;",Ile="return abs(x);",NB=Jl+`
  return (x < 0.0) ? 0.0 : x;
`,Mle="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ole=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+TE+`;
  float scale = `+AE+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`;function Ple(t){return t===void 0&&(t=0),Jl+`
    return x > 0.0 ? 1.0 : float(`+t+`);
  `}var Fle="return -x;",Ble="return ceil(x);",Lle="return floor(x);",jle=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,zle="return float(isnan(x));",Ule="return float(isinf(x));",Wle="return float(!isnan(x) && !isinf(x));",Vle=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,kI="return exp(x);",Hle="return exp(x) - 1.0;",Gle=`if (x < 0.0) return NAN;
  return log(x);`,$le="return log(1.0 + x);",qle="return sqrt(x);",Xle="return inversesqrt(x);",Kle="return 1.0 / (1.0 + exp(-1.0 * x));",Yle=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Qle=Jl+`
  return sin(x);
`,Jle=Jl+`
  return cos(x);
`,Zle="return tan(x);",ece="return asin(x);",tce="return acos(x);",nce=Jl+`
  return atan(x);
`,rce=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,oce=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,ace=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,ice="return log(x + sqrt(x * x + 1.0));",sce=Jl+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,uce=Jl+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,lce=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = `+CB+`;
  float a1 = `+EB+`;
  float a2 = `+RB+`;
  float a3 = `+_B+`;
  float a4 = `+TB+`;
  float a5 = `+AB+`;

  float t = 1.0 / (1.0 + p * x);
  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);
`,cce="return x * x;",dce="return 1.0 / x;",fce="return float(!(x >= 1.0));",hce="return float(int(x));",II="return x;",pce="return x;",mce=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,DB=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,pw=(function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}})(),vce=(function(){return function(t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var e=t.length,n=Oo("rc",e),r=Rn(e),o=sie(e,n),a=n.slice(-2),i=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `}})();function gce(t){return mo(t,0)}function yce(t,e){return mo(t,e)}function bce(t,e){return mo(t,e)}function xce(t,e){return mo(t,e)}function wce(t,e){e===void 0&&(e=0),ee(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=Yg(t,"tensors","concat");e=Dr(e,n[0].shape)[0];var r=Ud(n.map(function(i){return i.shape}),e);if(ft(r)===0)return Yn([],r);if((n=n.filter(function(i){return i.size>0})).length===1)return n[0];var o=n.map(function(i){return i.shape});Mae(o,e);var a=n;return Q.engine.runKernel(function(i){return i.concat(n,e)},a,function(i){var s=o.map(function(u){return u[e]});return NE(i,s,e).map(function(u){return function(){return u}})})}function Sce(t,e,n){n===void 0&&(n=0);var r,o=Y(t,"x","split");return n=Dr(n,o.shape)[0],typeof e=="number"?(ee(o.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(o.shape[n]/e)):(ee(o.shape[n]===e.reduce(function(a,i){return a+i}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),Q.engine.runKernel(function(a){return a.split(o,r,n)},{$x:o},function(a){return{$x:function(){return mo(a,n)}}})}var mo=ae({concat_:wce}),Cce=ae({concat1d_:gce}),Ece=ae({concat2d_:yce}),Rce=ae({concat3d_:bce}),_ce=ae({concat4d_:xce}),NE=ae({split_:Sce});function Zl(t,e){return t(e={exports:{}},e.exports),e.exports}var Tce=Zl(function(t){(function(e,n,r){function o(i,s){return s.c=i.c,s.s0=i.s0,s.s1=i.s1,s.s2=i.s2,s}function a(i,s){var u=new function(f){var p,m=this,g=(p=4022871197,function(y){y=y.toString();for(var b=0;b<y.length;b++){var S=.02519603282416938*(p+=y.charCodeAt(b));S-=p=S>>>0,p=(S*=p)>>>0,p+=4294967296*(S-=p)}return 23283064365386963e-26*(p>>>0)});m.next=function(){var y=2091639*m.s0+23283064365386963e-26*m.c;return m.s0=m.s1,m.s1=m.s2,m.s2=y-(m.c=0|y)},m.c=1,m.s0=g(" "),m.s1=g(" "),m.s2=g(" "),m.s0-=g(f),m.s0<0&&(m.s0+=1),m.s1-=g(f),m.s1<0&&(m.s1+=1),m.s2-=g(f),m.s2<0&&(m.s2+=1),g=null}(i),l=s&&s.state,d=u.next;return d.int32=function(){return 4294967296*u.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,l&&(typeof l=="object"&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.alea=a})(0,t)}),Ace=Zl(function(t){(function(e,n,r){function o(i,s){return s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,s}function a(i,s){var u=new function(f){var p=this,m="";p.x=0,p.y=0,p.z=0,p.w=0,p.next=function(){var y=p.x^p.x<<11;return p.x=p.y,p.y=p.z,p.z=p.w,p.w^=p.w>>>19^y^y>>>8},f===(0|f)?p.x=f:m+=f;for(var g=0;g<m.length+64;g++)p.x^=0|m.charCodeAt(g),p.next()}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(typeof l=="object"&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.xor128=a})(0,t)}),Nce=Zl(function(t){(function(e,n,r){function o(i,s){return s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w,s.v=i.v,s.d=i.d,s}function a(i,s){var u=new function(f){var p=this,m="";p.next=function(){var y=p.x^p.x>>>2;return p.x=p.y,p.y=p.z,p.z=p.w,p.w=p.v,(p.d=p.d+362437|0)+(p.v=p.v^p.v<<4^y^y<<1)|0},p.x=0,p.y=0,p.z=0,p.w=0,p.v=0,f===(0|f)?p.x=f:m+=f;for(var g=0;g<m.length+64;g++)p.x^=0|m.charCodeAt(g),g==m.length&&(p.d=p.x<<10^p.x>>>4),p.next()}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(typeof l=="object"&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.xorwow=a})(0,t)}),Dce=Zl(function(t){(function(e,n,r){function o(i,s){return s.x=i.x.slice(),s.i=i.i,s}function a(i,s){i==null&&(i=+new Date);var u=new function(f){var p=this;p.next=function(){var m,g,y=p.x,b=p.i;return m=y[b],g=(m^=m>>>7)^m<<24,g^=(m=y[b+1&7])^m>>>10,g^=(m=y[b+3&7])^m>>>3,g^=(m=y[b+4&7])^m<<7,m=y[b+7&7],g^=(m^=m<<13)^m<<9,y[b]=g,p.i=b+1&7,g},(function(m,g){var y,b=[];if(g===(0|g))b[0]=g;else for(g=""+g,y=0;y<g.length;++y)b[7&y]=b[7&y]<<15^g.charCodeAt(y)+b[y+1&7]<<13;for(;b.length<8;)b.push(0);for(y=0;y<8&&b[y]===0;++y);for(y==8?b[7]=-1:b[y],m.x=b,m.i=0,y=256;y>0;--y)m.next()})(p,f)}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(l.x&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.xorshift7=a})(0,t)}),kce=Zl(function(t){(function(e,n,r){function o(i,s){return s.i=i.i,s.w=i.w,s.X=i.X.slice(),s}function a(i,s){i==null&&(i=+new Date);var u=new function(f){var p=this;p.next=function(){var m,g,y=p.w,b=p.X,S=p.i;return p.w=y=y+1640531527|0,g=b[S+34&127],m=b[S=S+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,g=b[S]=g^m,p.i=S,g+(y^y>>>16)|0},(function(m,g){var y,b,S,C,E,_=[],T=128;for(g===(0|g)?(b=g,g=null):(g+="\0",b=0,T=Math.max(T,g.length)),S=0,C=-32;C<T;++C)g&&(b^=g.charCodeAt((C+32)%g.length)),C===0&&(E=b),b^=b<<10,b^=b>>>15,b^=b<<4,b^=b>>>13,C>=0&&(E=E+1640531527|0,S=(y=_[127&C]^=b+E)==0?S+1:0);for(S>=128&&(_[127&(g&&g.length||0)]=-1),S=127,C=512;C>0;--C)b=_[S+34&127],y=_[S=S+1&127],b^=b<<13,y^=y<<17,b^=b>>>15,y^=y>>>12,_[S]=b^y;m.w=E,m.X=_,m.i=S})(p,f)}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(l.X&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.xor4096=a})(0,t)}),Ice=Zl(function(t){(function(e,n,r){function o(i,s){return s.a=i.a,s.b=i.b,s.c=i.c,s.d=i.d,s}function a(i,s){var u=new function(f){var p=this,m="";p.next=function(){var y=p.b,b=p.c,S=p.d,C=p.a;return y=y<<25^y>>>7^b,b=b-S|0,S=S<<24^S>>>8^C,C=C-y|0,p.b=y=y<<20^y>>>12^b,p.c=b=b-S|0,p.d=S<<16^b>>>16^C,p.a=C-y|0},p.a=0,p.b=0,p.c=-1640531527,p.d=1367130551,f===Math.floor(f)?(p.a=f/4294967296|0,p.b=0|f):m+=f;for(var g=0;g<m.length+20;g++)p.b^=0|m.charCodeAt(g),p.next()}(i),l=s&&s.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=((u.next()>>>11)+(u.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=u.next,d.quick=d,l&&(typeof l=="object"&&o(l,u),d.state=function(){return o(u,{})}),d}n&&n.exports?n.exports=a:this.tychei=a})(0,t)}),vl=Zl(function(t){(function(e,n){var r,o=this,a=256,i=6,s="random",u=n.pow(a,i),l=n.pow(2,52),d=2*l,f=a-1;function p(b,S,C){var E=[],_=g((function k(I,M){var O,F=[],j=typeof I;if(M&&j=="object")for(O in I)try{F.push(k(I[O],M-1))}catch{}return F.length?F:j=="string"?I:I+"\0"})((S=S==1?{entropy:!0}:S||{}).entropy?[b,y(e)]:b??(function(){try{var k;return r&&(k=r.randomBytes)?k=k(a):(k=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(k)),y(k)}catch{var I=o.navigator,M=I&&I.plugins;return[+new Date,o,M,o.screen,y(e)]}})(),3),E),T=new function(k){var I,M=k.length,O=this,F=0,j=O.i=O.j=0,G=O.S=[];for(M||(k=[M++]);F<a;)G[F]=F++;for(F=0;F<a;F++)G[F]=G[j=f&j+k[F%M]+(I=G[F])],G[j]=I;(O.g=function(W){for(var q,P=0,z=O.i,U=O.j,H=O.S;W--;)q=H[z=f&z+1],P=P*a+H[f&(H[z]=H[U=f&U+q])+(H[U]=q)];return O.i=z,O.j=U,P})(a)}(E),D=function(){for(var k=T.g(i),I=u,M=0;k<l;)k=(k+M)*a,I*=a,M=T.g(1);for(;k>=d;)k/=2,I/=2,M>>>=1;return(k+M)/I};return D.int32=function(){return 0|T.g(4)},D.quick=function(){return T.g(4)/4294967296},D.double=D,g(y(T.S),e),(S.pass||C||function(k,I,M,O){return O&&(O.S&&m(O,T),k.state=function(){return m(T,{})}),M?(n[s]=k,I):k})(D,_,"global"in S?S.global:this==n,S.state)}function m(b,S){return S.i=b.i,S.j=b.j,S.S=b.S.slice(),S}function g(b,S){for(var C,E=b+"",_=0;_<E.length;)S[f&_]=f&(C^=19*S[f&_])+E.charCodeAt(_++);return y(S)}function y(b){return String.fromCharCode.apply(0,b)}if(n["seed"+s]=p,g(n.random(),e),t.exports){t.exports=p;try{r=require("crypto")}catch{}}})([],Math)});vl.alea=Tce,vl.xor128=Ace,vl.xorwow=Nce,vl.xorshift7=Dce,vl.xor4096=kce,vl.tychei=Ice;var Mce=vl,kB=Mce.alea,IB=(function(){function t(e,n,r,o,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=kB(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,o=!1;!o;){var a=void 0,i=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t})();function Oce(t){var e=Y(t,"x","clone",null);return Q.engine.runKernel(function(n){return We.make(e.shape,{dataId:e.dataId},e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}function Pce(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var o=Bt([t,e],r),a=t<=e?t:e,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return wd(ca(s,0),[n[0],1,1]);if(n.length===2)return wd(ca(ca(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return wd(ca(ca(ca(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}function Fce(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new IB(e,n,r,!1,o),i=Bt(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}function Bce(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new IB(e,n,r,!0,o),i=Bt(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}function Lce(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var o=Bt(t,r),a=0;a<o.values.length;a++)o.values[a]=Voe(e,n);return o.toTensor()}function jce(t,e,n){var r=ft(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=e();return We.make(t,{values:o},n)}function zce(t,e,n,r){r===void 0&&(r=!1);var o=Y(t,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=i===1?o.as2D(1,-1):o,u=Q.engine.runKernel(function(l){return l.multinomial(s,r,e,n)},{logits2D:s});return i===1?u.as1D():u}function Uce(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=Y(t,"indices","oneHot","int32"),a=o.shape.concat([e]);return o=o.flatten(),Q.engine.runKernel(function(i){return i.oneHot(o,e,n,r)},{$indices:o},function(i){return{$indices:function(){return $n(o.shape,"float32")}}}).reshape(a)}function Wce(t,e){var n=Y(t,"x","reshape",null);return e=Goe(e,n.size),ee(n.size===ft(e),function(){return"new shape and old shape must have the same number of elements."}),Q.engine.runKernel(function(r){return r.reshape(n,e)},{$x:n},function(r){return{$x:function(){return r.reshape(n.shape)}}})}function Vce(t,e){var n=Y(t,"x","squeeze");return Ba(n,Xl(n.shape,e).newShape)}function Hce(t,e){var n=Y(t,"x","cast");return Q.engine.runKernel(function(r){return r.cast(n,e)},{$x:n},function(r){return{$x:function(){return r.clone()}}})}function Gce(t,e){var n=Y(t,"x","tile");return ee(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."}),Q.engine.runKernel(function(r,o){var a=r.tile(n,e);return o([n]),a},{$x:n},function(r,o){var a=o[0];return{$x:function(){var i=nn(a);if(a.rank===1)for(var s=0;s<e[0];++s)i=i.add(r.slice([s*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(s=0;s<e[0];++s)for(var u=0;u<e[1];++u)i=i.add(r.slice([s*a.shape[0],u*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(s=0;s<e[0];++s)for(u=0;u<e[1];++u)for(var l=0;l<e[2];++l)i=i.add(r.slice([s*a.shape[0],u*a.shape[1],l*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(a.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(s=0;s<e[0];++s)for(u=0;u<e[1];++u)for(l=0;l<e[2];++l)for(var d=0;d<e[3];++d)i=i.add(r.slice([s*a.shape[0],u*a.shape[1],l*a.shape[2],d*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return i}}})}function $ce(t,e,n){return n===void 0&&(n=0),ee(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Yp(t,[e],n)}function qce(t,e,n){return n===void 0&&(n=0),ee(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Yp(t,e,n)}function Xce(t,e,n){return n===void 0&&(n=0),ee(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Yp(t,e,n)}function Kce(t,e,n){return n===void 0&&(n=0),ee(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Yp(t,e,n)}function Yce(t,e,n){n===void 0&&(n=0);var r=Y(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o=e.map(function(a){return a[0]});return Q.engine.runKernel(function(a){return a.pad(r,e,n)},{$x:r},function(a){return{$x:function(){return a.slice(o,r.shape)}}})}function Qce(t,e){e===void 0&&(e=0);var n=Yg(t,"tensors","stack");if(ee(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;ee(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){vn(o,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){ee(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(s){return s.expandDims(e)});return mo(i,e)}function Jce(t,e,n){var r=Y(t,"x","batchToSpaceND"),o=e.reduce(function(a,i){return a*i});return ee(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),ee(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),ee(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o}),Q.engine.runKernel(function(a){return a.batchToSpaceND(r,e,n)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(e,n)}}})}function Zce(t,e,n){var r=Y(t,"x","spaceToBatchND");return ee(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),ee(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),ee(r.shape.reduce(function(o,a,i){return i>0&&i<=e.length?o&&(a+n[i-1][0]+n[i-1][1])%e[i-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),Q.engine.runKernel(function(o){return o.spaceToBatchND(r,e,n)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(e,n)}}})}function ede(t,e){e===void 0&&(e=0),e=e||0;var n=Y(t,"x","unstack");return ee(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length),Q.engine.runKernel(function(r){return r.unstack(n,e)},{$x:n},function(r){return{$x:function(){return La(r,e)}}})}function tde(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=Y(t,"x","cumsum"),a=Ii([e|=0],o.rank),i=o;a!=null&&(i=o.transpose(a));var s=Mi(1,o.rank)[0],u=Q.engine.runKernel(function(l){return l.cumsum(i,s,n,r)},{permutedX:i},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return a!=null&&(u=u.transpose(a)),u}function nde(t,e){e===void 0&&(e=0);var n=Y(t,"x","expandDims");ee(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(ee(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),Ba(n,r)}function rde(t,e,n){n===void 0&&(n="NHWC");var r=Y(t,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];return ee(o*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),ee(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+` for depthToSpace with input shape
          `+r.shape}),ee(i%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+i+" for depthToSpace with input shape "+r.shape}),Q.engine.runKernel(function(s){return s.depthToSpace(r,e,n)},{$x:r})}function ode(t,e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f;return mn(this,function(p){switch(p.label){case 0:return n=Y(t,"x","setdiff1d"),r=Y(e,"y","setdiff1d"),ee(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),ee(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),ee(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=p.sent(),[4,r.data()];case 2:for(a=p.sent(),i=new Set(a),s=0,d=0;d<o.length;d++)i.has(o[d])||s++;for(u=new mp([s],n.dtype),l=new mp([s],"int32"),d=0,f=0;d<o.length;d++)i.has(o[d])||(u.values[f]=o[d],l.values[f]=d,f++);return[2,[u.toTensor(),l.toTensor()]]}})})}function Bt(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",$F(t),new mp(t,e,n)}function ade(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var MB=ae({batchToSpaceND_:Jce}),ide=ae({cast_:Hce}),sde=ae({clone_:Oce}),ude=ae({cumsum_:tde}),lde=ae({depthToSpace_:rde}),ca=ae({expandDims_:nde}),OB=ae({eye_:Pce}),cde=ae({multinomial_:zce}),V2=ae({oneHot_:Uce}),Yp=ae({pad_:Yce}),dde=ae({pad1d_:$ce}),fde=ae({pad2d_:qce}),hde=ae({pad3d_:Xce}),pde=ae({pad4d_:Kce}),mde=ae({rand_:jce}),vde=ae({randomNormal_:Fce}),gde=ae({randomUniform_:Lce}),Ba=ae({reshape_:Wce}),PB=ae({spaceToBatchND_:Zce}),FB=ae({squeeze_:Vce}),La=ae({stack_:Qce}),wd=ae({tile_:Gce}),yde=ae({truncatedNormal_:Bce}),Ar=ae({unstack_:ede}),bde=ode;function DE(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=Bt(t,"int32"),a=Bt([n.length,t.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*t.length;a.values.set(i,s)}return a.toTensor()}var Xv={};function xde(t){return t in Xv||(Xv[t]={}),Xv[t]}function wde(t,e){if(t==="linear")return e?pce:kle;if(t==="relu")return e?DB:NB;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Sde=128,MI=1e3,Cde=(function(){function t(e){if(this.gpgpu=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.disposed=!1,Q.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");if(e==null){var n=Di(Q.get("WEBGL_VERSION"));this.binaryCache=xde(Q.get("WEBGL_VERSION")),this.gpgpu=new Hue(n),this.canvas=n.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;this.textureManager=new Rle(this.gpgpu)}return t.prototype.register=function(e,n,r){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:n,dtype:r})},t.prototype.setDataMover=function(e){this.texData=new dB(e)},t.prototype.fromPixels=function(e,n){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=[e.height,e.width],o=[e.height,e.width,n];if(Q.get("IS_BROWSER")){if(!(e instanceof HTMLVideoElement||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(e instanceof HTMLVideoElement){if(this.fromPixels2DContext==null){if(document.readyState!=="complete")throw new Error("The DOM is not ready yet. Please call tf.browser.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixels2DContext=document.createElement("canvas").getContext("2d")}this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),e=this.fromPixels2DContext.canvas}}var a=this.makeTensorHandle(r,"int32");this.texData.get(a.dataId).usage=vi.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(a.dataId),e);var i=new Kse(o),s=this.compileAndRun(i,[a]);return this.disposeData(a.dataId),s},t.prototype.makeTensorHandle=function(e,n){var r={};return this.register(r,e,n),{dataId:r,shape:e,dtype:n}},t.prototype.write=function(e,n){if(n==null)throw new Error("MathBackendWebGL.write(): values can not be null");if(Q.get("DEBUG"))for(var r=0;r<n.length;r++){var o=n[r];if(!aue(o))throw Error("The value "+o+" cannot be represented on this device.")}var a=this.texData.get(e),i=a.texture,s=a.texShape,u=a.usage,l=a.dtype,d=a.isPacked;if(l==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");i!=null&&(this.releaseTexture(e,i,s,u,l,d),a.texture=null,a.texShape=null),a.usage=vi.UPLOAD,a.values=n},t.prototype.readSync=function(e){var n=this.texData.get(e),r=n.values,o=n.dtype,a=n.complexTensors,i=n.slice,s=n.shape;if(i!=null){var u=new _t(s,II),l=this.compileAndRun(u,[{dataId:e,shape:s,dtype:o}]),d=this.readSync(l.dataId);return l.dispose(),d}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;var f,p,m=this.activeTimers!=null;return m&&(f=performance.now()),o==="complex64"?p=hB(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(e),m&&(this.downloadWaitMs+=performance.now()-f),this.convertAndCacheOnCPU(e,p)},t.prototype.read=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f,p,m,g,y,b,S,C,E,_,T,D,k,I,M;return mn(this,function(O){switch(O.label){case 0:if(this.pendingRead.has(e))return o=this.pendingRead.get(e),[2,new Promise(function(F){return o.push(F)})];if(a=this.texData.get(e),i=a.texture,s=a.values,u=a.texShape,l=a.isPacked,d=a.shape,f=a.slice,p=a.dtype,f!=null)return m=new _t(d,II),g=this.compileAndRun(m,[{dataId:e,shape:d,dtype:p}]),y=this.read(g.dataId),g.dispose(),[2,y];if(s!=null)return[2,this.convertAndCacheOnCPU(e)];if(this.pendingRead.set(e,[]),!Q.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Q.get("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return b=u[1],S=u[0],l&&(n=Ql(u[0],u[1]),b=n[0],S=n[1]),C=this.gpgpu.maybeCreateBufferFromTexture(i,S,b),[4,this.gpgpu.createAndWaitForFence()];case 1:return O.sent(),C instanceof WebGLTexture?E=this.getValuesFromTexture(e):(_=ft(d),l?(T=nd(d),D=1,k=1,d.length&&(r=rd(d),D=r[0],k=r[1]),E=this.gpgpu.downloadPackedMatrixFromBuffer(C,T,D,k,u[0],u[1]).subarray(0,_)):E=this.gpgpu.downloadFloat32MatrixFromBuffer(C,u[0],u[1]).subarray(0,_)),I=this.convertAndCacheOnCPU(e,E),M=this.pendingRead.get(e),this.pendingRead.delete(e),M.forEach(function(F){return F(I)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,I]}})})},t.prototype.getValuesFromTexture=function(e){var n,r=this,o=this.texData.get(e),a=o.shape,i=o.dtype,s=o.texture,u=o.texShape,l=ft(a);if(Q.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")){if(this.texData.get(e).isPacked){var d=nd(a),f=1,p=1;return a.length&&(f=(n=rd(a))[0],p=n[1]),this.gpgpu.downloadMatrixFromPackedTexture(s,d,f,p,u[0],u[1]).subarray(0,l)}return this.gpgpu.downloadFloat32MatrixFromOutputTexture(s,u[0],u[1]).subarray(0,l)}var m=this.makeTensorHandle(a,"float32");m.size=ft(a),this.texData.get(m.dataId).usage=vi.DOWNLOAD;var g=lt(function(){var S=new qse(a);return r.compileAndRun(S,[{shape:a,dtype:i,dataId:e}],m,null,!1)}),y=this.texData.get(g.dataId),b=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,l);return this.disposeData(m.dataId),b},t.prototype.time=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u;return mn(this,function(l){switch(l.label){case 0:return n=this.activeTimers,r=[],o=!1,this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e(),a=zd(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),i=zd(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=n,o&&(this.programTimersStack=null),[4,Promise.all(a)];case 1:return s=l.sent(),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:Woe(s),getExtraProfileInfo:function(){return s.map(function(d,f){return{name:i[f],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(e){return Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},t.prototype.getQueryTime=function(e){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){return Q.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(n=e).endMs-n.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))this.pendingDisposal.add(e);else if(this.texData.has(e)){var n=this.texData.get(e),r=n.texture,o=n.dtype,a=n.texShape,i=n.usage,s=n.complexTensors,u=n.isPacked,l=n.slice;if(r!=null){var d=l&&l.origDataId||e,f=this.dataRefCount.get(d);f>1?this.dataRefCount.set(d,f-1):(this.dataRefCount.delete(d),this.releaseTexture(e,r,a,i,o,u),this.texData.delete(e))}s!=null&&(s.real.dispose(),s.imag.dispose())}}},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getCPUBackend=function(){return Q.get("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Q.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,n){var r=this;return n===void 0&&(n=Sde),this.getCPUBackend()!=null&&e.every(function(o){return r.texData.get(o.dataId).texture==null&&o.size<n})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.getCanvas=function(){return this.canvas},t.prototype.complex=function(e,n){var r=this.makeOutputArray(e.shape,"complex64");return this.texData.get(r.dataId).complexTensors={real:Q.engine.keep(e.clone()),imag:Q.engine.keep(n.clone())},r},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,n,r);var o=this.texData.get(e.dataId).isPacked,a=sB(e.shape,n,r);if(o||!a){var i=Q.get("WEBGL_PACK_ARRAY_OPERATIONS")?new Cle(r):new wle(r),s=i.getCustomSetupFunc(n);return this.compileAndRun(i,[e],null,s)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,n,r)},t.prototype.shallowSlice=function(e,n,r){var o=this.texData.get(e.dataId),a=We.make(r,{},e.dtype,this),i=this.texData.get(a.dataId);Object.assign(i,o),i.shape=r,i.dtype=e.dtype;var s=uB(n,e.strides);o.slice&&(s+=o.slice.flatOffset),i.slice={flatOffset:s,origDataId:o.slice&&o.slice.origDataId||e.dataId};var u=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,u+1),a},t.prototype.stridedSlice=function(e,n,r,o,a,i,s,u,l){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,n,r,o,a,i,s,u,l);var d=SE(e.shape,n,r,o,a,i,s,u,l),f=d[0],p=d[1],m=d[2],g=p.filter(function(b,S){return m.indexOf(S)===-1});if(g.some(function(b){return b===0}))return Yn([],g);var y=new Ele(f,o,p,m);return this.compileAndRun(y,[e])},t.prototype.reverse=function(e,n){var r=Q.get("WEBGL_PACK_ARRAY_OPERATIONS")?new yle(e.shape,n):new gle(e.shape,n);return this.compileAndRun(r,[e])},t.prototype.concat=function(e,n){if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,n);if(e.length===1)return e[0];if(e.length>Q.get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),o=this.concat(e.slice(0,r),n),a=this.concat(e.slice(r),n);return this.concat([o,a],n)}if(Q.get("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var i=new Ise(e.map(function(d){return d.shape}),n);return this.compileAndRun(i,e)}var s=Ud(e.map(function(d){return d.shape}),n),u=e.map(function(d){return d.as2D(-1,ft(d.shape.slice(n)))}),l=new kse(u.map(function(d){return d.shape}));return this.compileAndRun(l,u).reshape(s)},t.prototype.neg=function(e){var n=new _t(e.shape,Fle);return this.compileAndRun(n,[e])},t.prototype.batchMatMul=function(e,n,r,o){var a=r?e.shape[2]:e.shape[1],i=o?n.shape[1]:n.shape[2],s=r?e.shape[1]:e.shape[2],u=e.shape[0];if((a===1||i===1)&&s>MI){r&&(e=e.transpose([0,2,1])),o&&(n=n.transpose([0,2,1]));var l=i===1?e:e.as3D(u,s,1),d=i===1?2:1,f=i===1?n.as3D(u,1,s):n;return this.multiply(l,f).sum(d,!0)}var p=hr(e.dtype,n.dtype),m=new fw(e.shape,[u,a,i],r,o),g=this.makePackedTensor(m.outputShape,p);return this.compileAndRun(m,[e,n],g)},t.prototype.fusedBatchMatMul=function(e,n,r,o,a,i){var s=r?e.shape[2]:e.shape[1],u=o?n.shape[1]:n.shape[2],l=e.shape[0],d=hr(e.dtype,n.dtype),f=new fw(e.shape,[l,s,u],r,o,!!a,i?wde(i,!0):null),p=this.makePackedTensor(f.outputShape,d),m=[e,n];return a&&m.push(a),this.compileAndRun(f,m,p)},t.prototype.multiply=function(e,n){if(e.dtype==="complex64"){var r=this.texData.get(e.dataId),o=this.texData.get(n.dataId),a=new bI(yI.REAL,e.shape,n.shape),i=new bI(yI.IMAG,e.shape,n.shape),s=[this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag),this.makeComplexComponentTensorHandle(n,o.complexTensors.real),this.makeComplexComponentTensorHandle(n,o.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(i,s),d=this.complex(u,l);return u.dispose(),l.dispose(),d}if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.multiply(e,n);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,xI,e.dtype);var f=new Ln(xI,e.shape,n.shape),p=this.makeOutputArray(f.outputShape,e.dtype);return this.compileAndRun(f,[e,n],p)},t.prototype.batchNormalization=function(e,n,r,o,a,i){var s=[e,n,r],u=null;i!=null&&(u=i.shape,s.push(i));var l=null;if(a!=null&&(l=a.shape,s.push(a)),Q.get("WEBGL_PACK_BATCHNORMALIZATION")){var d=new Xie(e.shape,n.shape,r.shape,u,l,o);return this.compileAndRun(d,s)}var f=new qie(e.shape,n.shape,r.shape,u,l,o);return this.compileAndRun(f,s)},t.prototype.localResponseNormalization4D=function(e,n,r,o,a){var i=new Yue(e.shape,n,r,o,a);return this.compileAndRun(i,[e])},t.prototype.LRNGrad=function(e,n,r,o,a,i,s){var u=new Que(n.shape,o,a,i,s);return this.compileAndRun(u,[n,r,e])},t.prototype.tile=function(e,n){var r=new _le(e.shape,n);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,n,r){var o=Q.get("WEBGL_PACK_ARRAY_OPERATIONS")?new sle(e.shape,n,r):new ile(e.shape,n,r);return this.compileAndRun(o,[e])},t.prototype.transpose=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,n);var r=Q.get("WEBGL_PACK_ARRAY_OPERATIONS")?new Dle(e.shape,n):new Ale(e.shape,n);return this.compileAndRun(r,[e])},t.prototype.gather=function(e,n,r){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.gather(e,n,r);var o=new Yse(e.shape,n.size,r);return this.compileAndRun(o,[e,n])},t.prototype.batchToSpaceND=function(e,n,r){ee(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=n.reduce(function(d,f){return d*f}),a=Qg(e.shape,n,o),i=Jg(a.length,n.length),s=Zg(e.shape,n,o),u=nB(r,n.length),l=rB(s,r,n.length);return e.reshape(a).transpose(i).reshape(s).slice(u,l)},t.prototype.spaceToBatchND=function(e,n,r){ee(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=n.reduce(function(f,p){return f*p}),a=[[0,0]];a.push.apply(a,r);for(var i=1+n.length;i<e.shape.length;++i)a.push([0,0]);var s=e.pad(a),u=Qg(s.shape,n,o,!1),l=Jg(u.length,n.length,!1),d=Zg(s.shape,n,o,!1);return s.reshape(u).transpose(l).reshape(d)},t.prototype.reduce=function(e,n,r){var o=e.shape[0],a=e.shape[1],i=sw(a),s=new ule({windowSize:i,inSize:a,batchSize:o},n),u=s.outputShape,l=u[0],d=u[1],f=this.makeOutputArray([l,d],r);return this.compileAndRun(s,[e],f),f.shape[1]===1?f:this.reduce(f,n,r)},t.prototype.argReduce=function(e,n,r){r===void 0&&(r=null);var o=e.shape[0],a=e.shape[1];r!=null&&(o=r.shape[0],a=r.shape[1]);var i=sw(a),s=new iie({windowSize:i,inSize:a,batchSize:o},n,r==null),u=s.outputShape,l=u[0],d=u[1],f=this.makeOutputArray([l,d],"int32"),p=[e];return r!=null&&p.push(r),this.compileAndRun(s,p,f),f.shape[1]===1?f:this.argReduce(e,n,f)},t.prototype.argReducePacked=function(e,n,r){r===void 0&&(r=null);var o=r!=null?r.shape:e.shape,a=sw(o[o.length-1]),i=new Gie(o,a,n,r==null),s=this.makePackedTensor(i.outputShape,"int32"),u=r==null?[e]:[e,r];return this.compileAndRun(i,u,s),s.rank===e.rank?this.argReducePacked(e,n,s):s},t.prototype.sum=function(e,n){Do("sum",n,e.rank);var r=Or(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a),s=rw(e.dtype);return this.reduce(i,"sum",s).reshape(o)},t.prototype.prod=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,n);var r=Or(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a),s=rw(e.dtype);return this.reduce(i,"prod",s).reshape(o)},t.prototype.unsortedSegmentSum=function(e,n,r){var o=0,a=Ii([o],e.rank),i=e;a!=null&&(i=e.transpose(a),o=Mi(1,e.rank)[0]);var s=Bae(i.shape,o,r),u=ft([i.shape[o]]),l=i.as2D(-1,u),d=rw(e.dtype),f=this.segOpCompute(l,"unsortedSegmentSum",n,d,r).reshape(s);return a!=null&&(f=f.transpose(wE(a))),f},t.prototype.segOpCompute=function(e,n,r,o,a){var i=e.shape[0],s=e.shape[1],u=Fae(s,a),l=new ble({windowSize:u,inSize:s,batchSize:i,numSegments:a},n),d=l.outputShape,f=d[0],p=d[1],m=this.makeOutputArray([f,p],o);return this.compileAndRun(l,[e,r],m),m.shape[1]===a?m:(r=lB(0,a).tile([s/u]),this.segOpCompute(m,n,r,o,a))},t.prototype.argMinMaxReduce=function(e,n,r){var o=[n];if(Do("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,e.rank),!Q.get("WEBGL_PACK_REDUCE")||e.rank<=2){var a=Or(e.shape,o),i=a[0],s=ft(a[1]),u=e.as2D(-1,s);return this.argReduce(u,r).reshape(i)}return this.argReducePacked(e,r)},t.prototype.argMin=function(e,n){return this.argMinMaxReduce(e,n,"min")},t.prototype.argMax=function(e,n){return this.argMinMaxReduce(e,n,"max")},t.prototype.cumsum=function(e,n,r,o){if(n!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+n);var a=new Hse(e.shape,r,o);return this.compileAndRun(a,[e])},t.prototype.equal=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,gse,"bool");var r=new Ln(Jie,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.notEqual=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,yse,"bool");var r=new Ln(Zie,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.less=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.less(e,n);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,bse,"bool");var r=new Ln(ese,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.lessEqual=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,xse,"bool");var r=new Ln(tse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.greater=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.greater(e,n);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,wse,"bool");var r=new Ln(nse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.greaterEqual=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Sse,"bool");var r=new Ln(rse,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.logicalNot=function(e){var n=new _t(e.shape,fce);return this.compileAndRun(n,[e])},t.prototype.logicalAnd=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Cse,"bool");var r=new Ln(ose,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.logicalOr=function(e,n){if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,Ese,"bool");var r=new Ln(ase,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],o)},t.prototype.select=function(e,n,r){var o=new xle(e.rank,n.shape,n.rank),a=this.makeOutputArray(o.outputShape,hr(n.dtype,r.dtype));return this.compileAndRun(o,[e,n,r],a)},t.prototype.where=function(e){z2("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var n=e.dataSync();return DE(e.shape,n)},t.prototype.topk=function(e,n,r){return mB(e.dataSync(),e.shape,e.dtype,n)},t.prototype.min=function(e,n){Do("min",n,e.rank);var r=Or(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(o)},t.prototype.minimum=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.minimum(e,n);var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new ts(_se,e.shape,n.shape):new Ln(sse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.mod=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new ts(Tse,e.shape,n.shape):new Ln(use,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.max=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,n);Do("max",n,e.rank);var r=Or(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(o)},t.prototype.maximum=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.maximum(e,n);var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new ts(Rse,e.shape,n.shape):new Ln(ise,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.all=function(e,n){Do("all",n,e.rank);var r=Or(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a);return this.reduce(i,"all",i.dtype).reshape(o)},t.prototype.any=function(e,n){Do("any",n,e.rank);var r=Or(e.shape,n),o=r[0],a=ft(r[1]),i=e.as2D(-1,a);return this.reduce(i,"any",i.dtype).reshape(o)},t.prototype.squaredDifference=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new ts(wI,e.shape,n.shape):new Ln(wI,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.realDivide=function(e,n){var r=new Ln(Kie,e.shape,n.shape),o=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e,n],o)},t.prototype.floorDiv=function(e,n){var r=Yie;if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,fse,"int32");var o=new Ln(r,e.shape,n.shape),a=this.makeOutputArray(o.outputShape,"int32");return this.compileAndRun(o,[e,n],a)},t.prototype.add=function(e,n){if(e.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(e,n,uw);if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.add(e,n);var r=hr(e.dtype,n.dtype);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,uw,r);var o=new Ln(uw,e.shape,n.shape),a=this.makeOutputArray(o.outputShape,r);return this.compileAndRun(o,[e,n],a)},t.prototype.packedBinaryOp=function(e,n,r,o){var a=new ts(r,e.shape,n.shape),i=this.makePackedTensor(a.outputShape,o);return this.compileAndRun(a,[e,n],i)},t.prototype.complexSeparableBinaryOp=function(e,n,r){var o=this,a=this.texData.get(e.dataId),i=this.texData.get(n.dataId),s=[[a.complexTensors.real,i.complexTensors.real],[a.complexTensors.imag,i.complexTensors.imag]].map(function(f){var p=f[0],m=f[1],g=o.makeComplexComponentTensorHandle(e,p),y=o.makeComplexComponentTensorHandle(n,m),b=new Ln(r,e.shape,n.shape),S=o.makeOutputArray(b.outputShape,hr(p.dtype,m.dtype));return o.compileAndRun(b,[g,y],S)}),u=s[0],l=s[1],d=this.complex(u,l);return u.dispose(),l.dispose(),d},t.prototype.makeComplexComponentTensorHandle=function(e,n){return{dataId:n.dataId,dtype:n.dtype,shape:e.shape}},t.prototype.addN=function(e){for(var n=e[0],r=1;r<e.length;r++)n=this.add(n,e[r]);return n},t.prototype.subtract=function(e,n){if(e.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(e,n,lw);if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.subtract(e,n);var r=hr(e.dtype,n.dtype);if(Q.get("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,lw,e.dtype);var o=new Ln(lw,e.shape,n.shape),a=this.makeOutputArray(o.outputShape,r);return this.compileAndRun(o,[e,n],a)},t.prototype.pow=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS"),o=r?new ts(hse,e.shape,n.shape):new Ln(Qie,e.shape,n.shape),a=hr(e.dtype,n.dtype),i=r?this.makePackedTensor(o.outputShape,a):this.makeOutputArray(o.outputShape,a);return this.compileAndRun(o,[e,n],i)},t.prototype.ceil=function(e){var n=new _t(e.shape,Ble);return this.compileAndRun(n,[e])},t.prototype.floor=function(e){var n=new _t(e.shape,Lle);return this.compileAndRun(n,[e])},t.prototype.sign=function(e){var n=new _t(e.shape,jle);return this.compileAndRun(n,[e])},t.prototype.isNaN=function(e){var n=new _t(e.shape,zle),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.isInf=function(e){var n=new _t(e.shape,Ule),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.isFinite=function(e){var n=new _t(e.shape,Wle),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.round=function(e){var n=new _t(e.shape,Vle);return this.compileAndRun(n,[e])},t.prototype.exp=function(e){var n;return n=Q.get("WEBGL_PACK")?new pw(e.shape,kI):new _t(e.shape,kI),this.compileAndRun(n,[e])},t.prototype.expm1=function(e){var n=new _t(e.shape,Hle);return this.compileAndRun(n,[e])},t.prototype.log=function(e){var n;return n=Q.get("WEBGL_PACK")?new pw(e.shape,mce):new _t(e.shape,Gle),this.compileAndRun(n,[e])},t.prototype.log1p=function(e){var n=new _t(e.shape,$le);return this.compileAndRun(n,[e])},t.prototype.sqrt=function(e){var n=new _t(e.shape,qle);return this.compileAndRun(n,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var n=new _t(e.shape,Xle);return this.compileAndRun(n,[e])},t.prototype.square=function(e){var n=new _t(e.shape,cce);return this.compileAndRun(n,[e])},t.prototype.reciprocal=function(e){var n=new _t(e.shape,dce);return this.compileAndRun(n,[e])},t.prototype.relu=function(e){var n;return n=Q.get("WEBGL_PACK")?new pw(e.shape,DB):new _t(e.shape,NB),this.compileAndRun(n,[e])},t.prototype.prelu=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new ts(pse,e.shape,n.shape):new Ln(dse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.elu=function(e){var n=new _t(e.shape,Mle);return this.compileAndRun(n,[e])},t.prototype.eluDer=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new ts(mse,e.shape,n.shape):new Ln(cse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.selu=function(e){var n=new _t(e.shape,Ole);return this.compileAndRun(n,[e])},t.prototype.int=function(e){var n=new _t(e.shape,hce),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[e],r)},t.prototype.clip=function(e,n,r){var o,a=(o=Q.get("WEBGL_PACK_CLIP")?new Nse(e.shape):new Ase(e.shape)).getCustomSetupFunc(n,r);return this.compileAndRun(o,[e],null,a)},t.prototype.abs=function(e){var n=new _t(e.shape,Ile);return this.compileAndRun(n,[e])},t.prototype.complexAbs=function(e){var n=this.texData.get(e.dataId),r=new Dse(e.shape),o=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag)];return this.compileAndRun(r,o)},t.prototype.sigmoid=function(e){var n=new _t(e.shape,Kle);return this.compileAndRun(n,[e])},t.prototype.softplus=function(e){var n=new _t(e.shape,Yle);return this.compileAndRun(n,[e])},t.prototype.sin=function(e){var n=new _t(e.shape,Qle);return this.compileAndRun(n,[e])},t.prototype.cos=function(e){var n=new _t(e.shape,Jle);return this.compileAndRun(n,[e])},t.prototype.tan=function(e){var n=new _t(e.shape,Zle);return this.compileAndRun(n,[e])},t.prototype.asin=function(e){var n=new _t(e.shape,ece);return this.compileAndRun(n,[e])},t.prototype.acos=function(e){var n=new _t(e.shape,tce);return this.compileAndRun(n,[e])},t.prototype.atan=function(e){var n=new _t(e.shape,nce);return this.compileAndRun(n,[e])},t.prototype.atan2=function(e,n){var r=Q.get("WEBGL_PACK_BINARY_OPERATIONS")?new ts(vse,e.shape,n.shape):new Ln(lse,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.sinh=function(e){var n=new _t(e.shape,rce);return this.compileAndRun(n,[e])},t.prototype.cosh=function(e){var n=new _t(e.shape,oce);return this.compileAndRun(n,[e])},t.prototype.tanh=function(e){var n=new _t(e.shape,ace);return this.compileAndRun(n,[e])},t.prototype.asinh=function(e){var n=new _t(e.shape,ice);return this.compileAndRun(n,[e])},t.prototype.acosh=function(e){var n=new _t(e.shape,sce);return this.compileAndRun(n,[e])},t.prototype.atanh=function(e){var n=new _t(e.shape,uce);return this.compileAndRun(n,[e])},t.prototype.erf=function(e){var n=new _t(e.shape,lce);return this.compileAndRun(n,[e])},t.prototype.step=function(e,n){var r=new _t(e.shape,Ple(n));return this.compileAndRun(r,[e])},t.prototype.conv2dByMatMul=function(e,n,r){var o=e.shape,a=this.texData.get(e.dataId),i=r.inChannels,s=o[0]*o[1]*o[2],u=r.outChannels,l=(s===1||u===1)&&i>MI,d=o[2]%2!=0&&!!a.isPacked;if(l||!Q.get("WEBGL_LAZILY_UNPACK")||!Q.get("WEBGL_PACK_BINARY_OPERATIONS")||!d){var f=this.reshape(e,[1,o[0]*o[1]*o[2],r.inChannels]),p=this.reshape(n,[1,r.inChannels,r.outChannels]);return this.reshape(this.batchMatMul(f,p,!1,!1),r.outShape)}var m=We.make([1,o[0]*o[1]*(o[2]+1),r.inChannels],{dataId:e.dataId},e.dtype,this),g=a.shape;a.shape=a.shape.slice(),a.shape[a.shape.length-2]++,ee(qv(a.shape,m.shape),function(){return"packed reshape "+a.shape+" to "+m.shape+" isn't free"});var y=this.reshape(n,[1,r.inChannels,r.outChannels]),b=this.batchMatMul(m,y,!1,!1),S=this.texData.get(b.dataId);return ee(S.isPacked,function(){return"batchMatMul result is expected to be packed"}),a.shape=g,S.shape=r.outShape,We.make(r.outShape,{dataId:b.dataId},b.dtype,this)},t.prototype.conv2dWithIm2Row=function(e,n,r){var o=r.filterWidth,a=r.filterHeight,i=r.inChannels,s=r.outWidth,u=r.outHeight,l=o*a*i,d=u*s,f=[l,d],p=e.squeeze([0]),m=n.reshape([1,l,-1]),g=new Kue(f,p.shape,r),y=this.compileAndRun(g,[p]).reshape([1,f[0],f[1]]),b=new fw(y.shape,[1,d,r.outChannels],!0,!1);return this.compileAndRun(b,[y,m]).reshape([1,u,s,r.outChannels])},t.prototype.conv2d=function(e,n,r){if(r.filterHeight===1&&r.filterWidth===1&&r.dilationHeight===1&&r.dilationWidth===1&&r.strideHeight===1&&r.strideWidth===1&&(r.padInfo.type==="SAME"||r.padInfo.type==="VALID"))return this.conv2dByMatMul(e,n,r);if(Q.get("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,n,r);var o=new jse(r);return this.compileAndRun(o,[e,n])},t.prototype.conv2dDerInput=function(e,n,r){var o=new Ose(r);return this.compileAndRun(o,[e,n])},t.prototype.conv2dDerFilter=function(e,n,r){var o=new Mse(r);return this.compileAndRun(o,[e,n])},t.prototype.depthwiseConv2D=function(e,n,r){var o;return Q.get("WEBGL_PACK_DEPTHWISECONV")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1?(o=new Wse(r),this.compileAndRun(o,[e,n],this.makePackedTensor(r.outShape,e.dtype))):(o=new Use(r),this.compileAndRun(o,[e,n]))},t.prototype.depthwiseConv2DDerInput=function(e,n,r){var o=new Lse(r);return this.compileAndRun(o,[e,n])},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){var o=new Bse(r);return this.compileAndRun(o,[e,n])},t.prototype.conv3d=function(e,n,r){var o=new zse(r);return this.compileAndRun(o,[e,n])},t.prototype.conv3dDerInput=function(e,n,r){var o=new Fse(r);return this.compileAndRun(o,[e,n])},t.prototype.conv3dDerFilter=function(e,n,r){var o=new Pse(r);return this.compileAndRun(o,[e,n])},t.prototype.maxPool=function(e,n){var r=new hw(n,"max",!1),o=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[e],o)},t.prototype.avgPool=function(e,n){var r=new hw(n,"avg",!1),o=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e],o)},t.prototype.maxPoolBackprop=function(e,n,r,o){var a=new hw(o,"max",!0),i=this.compileAndRun(a,[n]),s=new Jue(o),u=this.makeOutputArray(s.outputShape,n.dtype),l=this.compileAndRun(s,[e,i],u);return i.dispose(),l},t.prototype.avgPoolBackprop=function(e,n,r){var o=new $ie(r),a=this.makeOutputArray(o.outputShape,n.dtype);return this.compileAndRun(o,[e],a)},t.prototype.cast=function(e,n){return fB(e,n,this)},t.prototype.unstack=function(e,n){for(var r=e.shape[n],o=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==n&&(o[a++]=e.shape[i]);var s=new Array(e.rank).fill(0),u=e.shape.slice();u[n]=1;var l=new Array(r);for(i=0;i<l.length;i++)s[n]=i,l[i]=this.slice(e,s,u).reshape(o);return l},t.prototype.reshape=function(e,n){var r=this.texData.get(e.dataId);return!r.isPacked||qv(e.shape,n)||r.texture!==null&&qv(r.shape,n)?U2(e,n):this.packedReshape(e,n)},t.prototype.resizeBilinear=function(e,n,r,o){var a=Q.get("WEBGL_PACK_IMAGE_OPERATIONS")?new ple(e.shape,n,r,o):new hle(e.shape,n,r,o);return this.compileAndRun(a,[e])},t.prototype.resizeBilinearBackprop=function(e,n,r){var o=new fle(e,n,r);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighbor=function(e,n,r,o){var a=new vle(e.shape,n,r,o);return this.compileAndRun(a,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){var o=new mle(e,n,r);return this.compileAndRun(o,[e])},t.prototype.multinomial=function(e,n,r,o){var a=n?e:Wu(e),i=a.shape[0],s=a.shape[1],u=new Zue(i,s,r),l=this.makeOutputArray(u.outputShape,"int32"),d=u.getCustomSetupFunc(o);return this.compileAndRun(u,[a],l,d)},t.prototype.oneHot=function(e,n,r,o){var a=new ele(e.size,n,r,o);return this.compileAndRun(a,[e])},t.prototype.nonMaxSuppression=function(e,n,r,o,a){return z2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),EE(e.dataSync(),n.dataSync(),r,o,a)},t.prototype.cropAndResize=function(e,n,r,o,a,i){var s=new Vse(e.shape,n.shape,o,a,i);return this.compileAndRun(s,[e,n,r])},t.prototype.depthToSpace=function(e,n,r){ee(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});var o=e.shape[0],a=r==="NHWC"?e.shape[1]:e.shape[2],i=r==="NHWC"?e.shape[2]:e.shape[3],s=r==="NHWC"?e.shape[3]:e.shape[1],u=a*n,l=i*n,d=s/(n*n),f=new $se(r==="NHWC"?[o,u,l,d]:[o,d,u,l],n,r);return this.compileAndRun(f,[e])},t.prototype.split=function(e,n,r){return pB(e,n,r)},t.prototype.scatterND=function(e,n,r){var o=ey(n,e,r),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize,d=[l/s,s],f=e.reshape([i,a]),p=n.reshape([i,s]);if(l===0)return U2(Yn([]),r);var m=Pe(0),g=new AI(i,a,f.rank,p.rank,u,d);return this.compileAndRun(g,[p,f,m]).reshape(r)},t.prototype.sparseToDense=function(e,n,r,o){var a=ey(n,e,r),i=a.sliceRank,s=a.numUpdates,u=a.strides,l=a.outputSize,d=new AI(s,i,e.rank,n.rank,u,[l,1],!1);return this.compileAndRun(d,[n,e,o]).reshape(r)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,n){var r=this.texData.get(e.dataId),o=new EI(CI.REAL,e.shape,n),a=new EI(CI.IMAG,e.shape,n),i=[this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag)],s=this.compileAndRun(o,i),u=this.compileAndRun(a,i),l=this.complex(s,u).as2D(e.shape[0],e.shape[1]);return s.dispose(),u.dispose(),l},t.prototype.gatherND=function(e,n){var r=n.shape,o=r[r.length-1],a=aB(e,n),i=a[0],s=a[1],u=a[2],l=a[3],d=n.reshape([s,o]),f=e.reshape([e.size/u,u]),p=new Jse(o,l,[s,u]);return this.compileAndRun(p,[f,d]).reshape(i)},t.prototype.fill=function(e,n,r){if((r=r||Wp(n))==="string"){var o=Xg(r,ft(e));return o.fill(n),We.make(e,{values:o},r)}var a=new Xse(e,n),i=a.getCustomSetupFunc(n),s=this.makeOutputArray(e,r);return this.compileAndRun(a,[],s,i)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},t.prototype.makeOutputArray=function(e,n){return We.make(e,{},n,this)},t.prototype.makePackedTensor=function(e,n){var r=We.make(e,{},n,this);return this.texData.get(r.dataId).isPacked=!0,r},t.prototype.unpackTensor=function(e){var n=new vce(e.shape);return this.compileAndRun(n,[e],We.make(n.outputShape,{},e.dtype,this))},t.prototype.packTensor=function(e){var n=new tle(e.shape);return this.compileAndRun(n,[e],this.makePackedTensor(e.shape,e.dtype))},t.prototype.packedReshape=function(e,n){var r=e.reshape([nd(e.shape)].concat(rd(e.shape))),o=[nd(n)].concat(rd(n)),a=new lle(o,r.shape);return this.compileAndRun(a,[r]).reshape(n)},t.prototype.compileAndRun=function(e,n,r,o,a){var i=this;if(a===void 0&&(a=!0),r==null&&(r=e.usesPackedTextures?this.makePackedTensor(e.outputShape,n[0].dtype):this.makeOutputArray(e.outputShape,n[0].dtype)),r.size===0)return this.texData.get(r.dataId).values=M2(r.dtype,0),r;var s=n.map(function(E){if(E.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var _=i.texData.get(E.dataId);if(_.texture==null){if(!e.usesPackedTextures&&ft(E.shape)<=Q.get("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:E.shape,texData:null,isUniform:!0,uniformValues:i.readSync(E.dataId)};e.usesPackedTextures&&(_.isPacked=!0,_.shape=E.shape)}else if(!!_.isPacked!=!!e.usesPackedTextures)E=_.isPacked?i.unpackTensor(E):i.packTensor(E),_=i.texData.get(E.dataId);else if(_.isPacked&&!qv(_.shape,E.shape)){var T=E,D=E.shape;E.shape=_.shape,E=i.packedReshape(E,D),_=i.texData.get(E.dataId),T.shape=D}return i.uploadToGPU(E.dataId),{shape:E.shape,texData:_,isUniform:!1}});this.uploadToGPU(r.dataId);var u,l={shape:r.shape,texData:this.texData.get(r.dataId),isUniform:!1},d=Xue(e,s,l),f=this.getAndSaveBinary(d,function(){return $ue(i.gpgpu,e,s,l)}),p=this.activeTimers!=null;p&&(u=this.startTimer()),que(this.gpgpu,f,s,l,o);var m=1024*Q.get("WEBGL_NUM_MB_BEFORE_PAGING");if(a&&this.numBytesInGPU>m)for(var g=this.numBytesInGPU-m;g>0&&this.lruDataGPU.length>0;){var y=this.lruDataGPU.shift(),b=this.texData.get(y),S=b.texShape,C=b.dtype;g-=this.computeBytes(S,C),this.read(y)}return p&&(u=this.endTimer(u),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(u)})),Q.get("WEBGL_LAZILY_UNPACK")||!this.texData.get(r.dataId).isPacked||e.isPackShader?r:this.unpackTensor(r)},t.prototype.getAndSaveBinary=function(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas.remove(),this.fromPixels2DContext!=null&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return lt(function(){var n=Q.get("DEBUG");Q.set("DEBUG",!1);var r=e.abs(Pe(1e-8)).dataSync()[0];return Q.set("DEBUG",n),r>0?32:16})},t.prototype.uploadToGPU=function(e){var n,r=this.texData.get(e),o=r.shape,a=r.dtype,i=r.values,s=r.texture,u=r.usage,l=r.isPacked;if(s==null){var d,f=this.activeTimers!=null;f&&(d=performance.now());var p=Eue(o,l);r.texShape=p;var m=this.acquireTexture(e,p,u,a,l);if(r.texture=m,i!=null){if(l){var g=nd(o),y=1,b=1;o.length&&(y=(n=rd(o))[0],b=n[1]),this.gpgpu.uploadMatrixToPackedTexture(m,g,y,b,p[0],p[1],OI(i))}else this.gpgpu.uploadMatrixToTexture(m,p[0],p[1],OI(i));r.values=null,f&&(this.uploadWaitMs+=performance.now()-d)}}else Q.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY&&this.lruDataGPU.indexOf(e)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(e),1),this.lruDataGPU.push(e))},t.prototype.convertAndCacheOnCPU=function(e,n){var r=this.texData.get(e),o=r.texture,a=r.texShape,i=r.dtype,s=r.usage,u=r.isPacked;return o!=null&&(this.releaseTexture(e,o,a,s,i,u),r.texture=null,r.texShape=null,r.isPacked=!1),r.usage=vi.UPLOAD,n!=null&&(r.values=Ede(n,i)),r.values},t.prototype.releaseTexture=function(e,n,r,o,a,i){if(Q.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY){var s=this.lruDataGPU.indexOf(e);s>=0&&this.lruDataGPU.splice(s,1)}this.numBytesInGPU-=this.computeBytes(r,a),this.textureManager.releaseTexture(n,r,o,i)},t.prototype.acquireTexture=function(e,n,r,o,a){return Q.get("WEBGL_NUM_MB_BEFORE_PAGING")<Number.POSITIVE_INFINITY&&this.lruDataGPU.push(e),this.numBytesInGPU+=this.computeBytes(n,o),this.textureManager.acquireTexture(n,r,a)},t.prototype.computeBytes=function(e,n){return e[0]*e[1]*UF(n)},t})();function Ede(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){for(var n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}function OI(t){return t instanceof Float32Array?t:new Float32Array(t)}function Rde(t){var e=Y(t,"x","neg");return Q.engine.runKernel(function(n){return n.neg(e)},{$x:e},function(n){return{$x:function(){return n.neg()}}})}function _de(t){var e=Y(t,"x","ceil");return Q.engine.runKernel(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function Tde(t){var e=Y(t,"x","floor");return Q.engine.runKernel(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function Ade(t){var e=Y(t,"x","sign");return Q.engine.runKernel(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function Nde(t){var e=Y(t,"x","isNaN");return Q.engine.runKernel(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function Dde(t){var e=Y(t,"x","isInf");return Q.engine.runKernel(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function kde(t){var e=Y(t,"x","isFinite");return Q.engine.runKernel(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function Ide(t){var e=Y(t,"x","round");return Q.engine.runKernel(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return nn(n)}}})}function Mde(t){var e=Y(t,"x","exp");return Q.engine.runKernel(function(n,r){var o=n.exp(e);return r([o]),o},{$x:e},function(n,r){return{$x:function(){return n.mulStrict(r[0])}}})}function Ode(t){var e=Y(t,"x","expm1");return Q.engine.runKernel(function(n,r){var o=n.expm1(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}})}function Pde(t){var e=Y(t,"x","log");return Q.engine.runKernel(function(n,r){var o=n.log(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat())}}})}function Fde(t){var e=Y(t,"x","log1p");return Q.engine.runKernel(function(n,r){var o=n.log1p(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}})}function Bde(t){var e=Y(t,"x","sqrt");return Q.engine.runKernel(function(n,r){var o=n.sqrt(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}function Lde(t){var e=Y(t,"x","rsqrt");return Q.engine.runKernel(function(n,r){var o=n.rsqrt(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.pow(1.5).mul(2)).neg()}}})}function jde(t){var e=Y(t,"x","square");return Q.engine.runKernel(function(n,r){return r([e]),n.square(e)},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.toFloat().mul(2))}}})}function zde(t){var e=Y(t,"x","reciprocal");return Q.engine.runKernel(function(n,r){var o=n.reciprocal(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}})}function Ude(t){var e=Y(t,"x","abs");return e.dtype==="complex64"?Q.engine.runKernel(function(n){return n.complexAbs(e)},{$x:e}):Q.engine.runKernel(function(n,r){var o=n.abs(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.toFloat().step(-1))}}})}function Wde(t,e,n){var r=Y(t,"x","clipByValue");return ee(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."}),Q.engine.runKernel(function(o,a){var i=o.clip(r,e,n);return a([r]),i},{$x:r},function(o,a){var i=a[0];return{$x:function(){return o.where(i.greaterEqual(e).logicalAnd(i.lessEqual(n)),nn(o))}}})}function Vde(t){var e=Y(t,"x","sigmoid");return Q.engine.runKernel(function(n,r){var o=n.sigmoid(e);return r([o]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.mul(Pe(1).sub(o)))}}})}function Hde(t){var e=Y(t,"x","logSigmoid");return Q.engine.runKernel(function(n,r){var o=n.softplus(e.neg()).neg();return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}function Gde(t){var e=Y(t,"x","softplus");return Q.engine.runKernel(function(n,r){var o=n.softplus(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}})}function $de(t){var e=Y(t,"x","sin");return Q.engine.runKernel(function(n,r){var o=n.sin(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cos().mul(n)}}})}function qde(t){var e=Y(t,"x","cos");return Q.engine.runKernel(function(n,r){var o=n.cos(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sin().neg().mul(n)}}})}function Xde(t){var e=Y(t,"x","tan");return Q.engine.runKernel(function(n,r){var o=n.tan(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}})}function Kde(t){var e=Y(t,"x","asin");return Q.engine.runKernel(function(n,r){var o=n.asin(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Pe(1).sub(o.toFloat().square()).sqrt())}}})}function Yde(t){var e=Y(t,"x","acos");return Q.engine.runKernel(function(n,r){var o=n.acos(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Pe(1).sub(o.toFloat().square()).sqrt()).neg()}}})}function Qde(t){var e=Y(t,"x","atan");return Q.engine.runKernel(function(n,r){var o=n.atan(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}function Jde(t){var e=Y(t,"x","sinh");return Q.engine.runKernel(function(n,r){var o=n.sinh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}function Zde(t){var e=Y(t,"x","cosh");return Q.engine.runKernel(function(n,r){var o=n.cosh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}function efe(t){var e=Y(t,"x","tanh");return Q.engine.runKernel(function(n,r){var o=n.tanh(e);return r([o]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return Pe(1).sub(o.square()).mulStrict(n)}}})}function tfe(t){var e=Y(t,"x","asinh");return Q.engine.runKernel(function(n,r){var o=n.asinh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(Pe(1).add(o.toFloat().square()).sqrt())}}})}function nfe(t){var e=Y(t,"x","acosh");return Q.engine.runKernel(function(n,r){var o=n.acosh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}function rfe(t){var e=Y(t,"x","atanh");return Q.engine.runKernel(function(n,r){var o=n.atanh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(Pe(1).sub(o.toFloat().square()))}}})}function ofe(t){var e=Y(t,"x","erf");return ee(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),Q.engine.runKernel(function(n,r){var o=n.erf(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}function afe(t,e){e===void 0&&(e=0);var n=Y(t,"x","step");return Q.engine.runKernel(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return nn(r)}}})}Q.get("IS_BROWSER")&&Q.registerBackend("webgl",function(){return new Cde},2);var ife=ae({abs_:Ude}),sfe=ae({acos_:Yde}),ufe=ae({acosh_:nfe}),lfe=ae({asin_:Kde}),cfe=ae({asinh_:tfe}),dfe=ae({atan_:Qde}),ffe=ae({atanh_:rfe}),hfe=ae({ceil_:_de}),kE=ae({clipByValue_:Wde}),pfe=ae({cos_:qde}),mfe=ae({cosh_:Zde}),vfe=ae({erf_:ofe}),H2=ae({exp_:Mde}),gfe=ae({expm1_:Ode}),yfe=ae({floor_:Tde}),bfe=ae({log_:Pde}),xfe=ae({log1p_:Fde}),wfe=ae({logSigmoid_:Hde}),ty=ae({neg_:Rde}),Sfe=ae({reciprocal_:zde}),Cfe=ae({round_:Ide}),BB=ae({rsqrt_:Lde}),LB=ae({sigmoid_:Vde}),Efe=ae({sign_:Ade}),Rfe=ae({isNaN_:Nde}),_fe=ae({isInf_:Dde}),Tfe=ae({isFinite_:kde}),Afe=ae({sin_:$de}),Nfe=ae({sinh_:Jde}),Dfe=ae({softplus_:Gde}),kfe=ae({sqrt_:Bde}),Ife=ae({square_:jde}),Mfe=ae({step_:afe}),Ofe=ae({tan_:Xde}),Pfe=ae({tanh_:efe});function jB(t,e,n,r,o,a){var i,s,u=Y(t,"x","batchNorm"),l=Y(e,"mean","batchNorm"),d=Y(n,"variance","batchNorm");return o!=null&&(i=Y(o,"scale","batchNorm")),r!=null&&(s=Y(r,"offset","batchNorm")),ee(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),ee(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),ee(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),i!=null&&ee(i.rank===2||i.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),s!=null&&ee(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Qp(u,l,d,s,i,a)}function zB(t,e,n,r,o,a){var i,s,u=Y(t,"x","batchNorm"),l=Y(e,"mean","batchNorm"),d=Y(n,"variance","batchNorm");return o!=null&&(i=Y(o,"scale","batchNorm")),r!=null&&(s=Y(r,"offset","batchNorm")),ee(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),ee(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),ee(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),i!=null&&ee(i.rank===3||i.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),s!=null&&ee(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Qp(u,l,d,s,i,a)}function UB(t,e,n,r,o,a){var i,s,u=Y(t,"x","batchNorm"),l=Y(e,"mean","batchNorm"),d=Y(n,"variance","batchNorm");return o!=null&&(i=Y(o,"scale","batchNorm")),r!=null&&(s=Y(r,"offset","batchNorm")),ee(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),ee(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),ee(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),i!=null&&ee(i.rank===4||i.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),s!=null&&ee(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Qp(u,l,d,s,i,a)}function Ffe(t,e,n,r,o,a){return r===void 0&&(r=.001),O0(),Qp(t,e,n,a,o,r)}function Qp(t,e,n,r,o,a){a==null&&(a=.001);var i,s,u,l=Y(t,"x","batchNorm"),d=Y(e,"mean","batchNorm"),f=Y(n,"variance","batchNorm");return o!=null&&(i=Y(o,"scale","batchNorm")),r!=null&&(s=Y(r,"offset","batchNorm")),ee(d.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),ee(s==null||d.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),ee(i==null||d.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,Q.engine.runKernel(function(p,m){var g=p.batchNormalization(u,Kv(d),Kv(f),a,Kv(i),Kv(s));return m([l,d,f,i]),g},{$x:l,$mean:d,$variance:f,$scale:i,$offset:s},function(p,m){var g=m[0],y=m[1],b=m[2],S=m[3],C=S??Pe(1),E=ur(y.shape,u.shape),_=[];if(y.rank===1){for(var T=0;T<u.shape.length-1;++T)_.push(u.shape[T]);_.push(1)}var D=g.sub(y),k=p.mul(C),I=BB(b.add(Pe(a))),M=I.mul(I).mul(I).mul(Pe(-.5));return{$x:function(){return y.rank===1?p.mul(wd(I.as4D(1,1,1,y.shape[0]),_)).mul(C).reshape(g.shape):p.mul(I).mul(C).reshape(g.shape)},$mean:function(){var O=I.mul(Pe(-1)).mul(k);return y.rank===1&&(O=O.sum(E)),O.reshape(y.shape)},$variance:function(){var O=M.mul(D).mul(k);return y.rank===1&&(O=O.sum(E)),O.reshape(y.shape)},$scale:function(){var O=D.mul(I),F=p.mul(O);return y.rank===1&&(F=F.sum(E)),F.reshape(y.shape)},$offset:function(){var O=p;return y.rank===1&&(O=O.sum(E)),O.reshape(y.shape)}}}).reshape(l.shape)}function Kv(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Bfe(t,e,n,r,o,a){return r===void 0&&(r=.001),O0(),jB(t,e,n,a,o,r)}function Lfe(t,e,n,r,o,a){return r===void 0&&(r=.001),O0(),zB(t,e,n,a,o,r)}function jfe(t,e,n,r,o,a){return r===void 0&&(r=.001),O0(),UB(t,e,n,a,o,r)}function O0(){eB("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var zfe=ae({batchNormalization2d_:Bfe}),Ufe=ae({batchNormalization3d_:Lfe}),Wfe=ae({batchNormalization4d_:jfe}),Vfe=ae({batchNormalization_:Ffe}),WB=ae({batchNorm_:Qp}),Hfe=ae({batchNorm2d_:jB}),Gfe=ae({batchNorm3d_:zB}),$fe=ae({batchNorm4d_:UB});function Jp(t,e,n,r,o,a,i){i===void 0&&(i="channelsLast");var s,u=ny(e),l=u[0],d=u[1];if(i==="channelsLast")s=[l,d,t[3],t[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);s=[l,d,t[1],t[1]]}return Zp(t,s,n,r,o,a,!1,i)}function Zp(t,e,n,r,o,a,i,s){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],d=u[1],f=u[2],p=u[3];if(s==="channelsLast")l=t[0],d=t[1],f=t[2],p=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],p=t[1],d=t[2],f=t[3]}var m,g=e[0],y=e[1],b=e[3],S=ny(n),C=S[0],E=S[1],_=ny(r),T=_[0],D=_[1],k=Sd(g,T),I=Sd(y,D),M=Kfe(o,d,f,C,E,k,I,a),O=M.padInfo,F=M.outHeight,j=M.outWidth,G=i?b*p:b;return s==="channelsFirst"?m=[l,G,F,j]:s==="channelsLast"&&(m=[l,F,j,G]),{batchSize:l,dataFormat:s,inHeight:d,inWidth:f,inChannels:p,outHeight:F,outWidth:j,outChannels:G,padInfo:O,strideHeight:C,strideWidth:E,filterHeight:g,filterWidth:y,effectiveFilterHeight:k,effectiveFilterWidth:I,dilationHeight:T,dilationWidth:D,inShape:t,outShape:m,filterShape:e}}function IE(t,e,n,r,o,a,i){a===void 0&&(a=!1),i===void 0&&(i="channelsLast");var s=[-1,-1,-1,-1,-1],u=s[0],l=s[1],d=s[2],f=s[3],p=s[4];if(i==="channelsLast")u=t[0],l=t[1],d=t[2],f=t[3],p=t[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);u=t[0],p=t[1],l=t[2],d=t[3],f=t[4]}var m,g=e[0],y=e[1],b=e[2],S=e[4],C=PI(n),E=C[0],_=C[1],T=C[2],D=PI(r),k=D[0],I=D[1],M=D[2],O=Yfe(o,l,d,f,E,_,T,Sd(g,k),Sd(y,I),Sd(b,M)),F=O.padInfo,j=O.outDepth,G=O.outHeight,W=O.outWidth,q=a?S*p:S;return i==="channelsFirst"?m=[u,q,j,G,W]:i==="channelsLast"&&(m=[u,j,G,W,q]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:d,inWidth:f,inChannels:p,outDepth:j,outHeight:G,outWidth:W,outChannels:q,padInfo:F,strideDepth:E,strideHeight:_,strideWidth:T,filterDepth:g,filterHeight:y,filterWidth:b,dilationDepth:k,dilationHeight:I,dilationWidth:M,inShape:t,outShape:m,filterShape:e}}function qfe(t,e,n,r,o,a){o==null&&(o=Xfe(t,e,r));var i=t[0],s=t[1],u=FI((i-e+2*o)/r+1,a);ee(ya(u),function(){return"The output # of rows ("+u+") must be an integer. Change the stride and/or zero pad parameters"});var l=FI((s-e+2*o)/r+1,a);return ee(ya(l),function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"}),[u,l,n]}function Xfe(t,e,n,r){r===void 0&&(r=1);var o=Sd(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function ny(t){return typeof t=="number"?[t,t]:t}function PI(t){return typeof t=="number"?[t,t,t]:t}function Sd(t,e){return e<=1?t:t+(t-1)*(e-1)}function Kfe(t,e,n,r,o,a,i,s){var u,l,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};var f=qfe([e,n,1],a,1,r,t,s);l=f[0],d=f[1]}else if(t==="same"){l=Math.ceil(e/r),d=Math.ceil(n/o);var p=Math.max(0,(l-1)*r+a-e),m=Math.max(0,(d-1)*o+i-n),g=Math.floor(p/2),y=p-g,b=Math.floor(m/2);u={top:g,bottom:y,left:b,right:m-b,type:"SAME"}}else{if(t!=="valid")throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-a+1)/r),d=Math.ceil((n-i+1)/o)}return{padInfo:u,outHeight:l,outWidth:d}}function Yfe(t,e,n,r,o,a,i,s,u,l){var d,f,p,m;if(t==="same"){var g=((f=Math.ceil(e/o))-1)*o+s-e,y=((p=Math.ceil(n/a))-1)*a+u-n,b=((m=Math.ceil(r/i))-1)*i+l-r,S=Math.floor(g/2),C=g-S,E=Math.floor(y/2),_=y-E,T=Math.floor(b/2);d={top:E,bottom:_,left:T,right:b-T,front:S,back:C,type:"SAME"}}else{if(t!=="valid")throw Error("Unknown padding parameter: "+t);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((e-s+1)/o),p=Math.ceil((n-u+1)/a),m=Math.ceil((r-l+1)/i)}return{padInfo:d,outDepth:f,outHeight:p,outWidth:m}}function FI(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function ry(t){var e=ny(t),n=e[0],r=e[1];return n===1&&r===1}function Vu(t,e){return ry(t)||ry(e)}function Qfe(t,e,n,r,o,a,i){o===void 0&&(o="NWC"),a===void 0&&(a=1);var s=Y(t,"x","conv1d"),u=Y(e,"filter","conv1d"),l=s,d=!1;s.rank===2&&(d=!0,l=s.as3D(1,s.shape[0],s.shape[1])),ee(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),ee(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),i!=null&&ee(ya(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),ee(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),ee(Vu(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),ee(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),m=Ns(p,f,[1,n],r,"NHWC",[1,a],i);return d?m.as2D(m.shape[2],m.shape[3]):m.as3D(m.shape[0],m.shape[2],m.shape[3])}function Jfe(t,e,n,r,o,a,i){o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]);var s=Y(t,"x","conv2d"),u=Y(e,"filter","conv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ee(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),ee(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),i!=null&&ee(ya(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),ee(l.shape[3]===u.shape[2],function(){return"Error in conv2d: depth of input ("+l.shape[3]+") must match input depth for filter "+u.shape[2]+"."}),ee(Vu(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),ee(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var f=Zp(l.shape,u.shape,n,a,r,i),p=Q.engine.runKernel(function(m,g){var y=m.conv2d(l,u,f);return g([u,l]),y},{x:l,$filter:u},function(m,g){var y=g,b=y[0],S=y[1];return ee(ry(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return VB(S.shape,m,b,n,r)},$filter:function(){return HB(S,m,b.shape,n,r)}}});return d?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function VB(t,e,n,r,o,a){ee(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var i=t,s=e,u=!1;e.rank===3&&(u=!0,s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),i=[1,t[0],t[1],t[2]]);var l=i[3],d=s.shape[3];ee(i.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+i.length+"."}),ee(s.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank}),ee(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}),ee(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),ee(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),a!=null&&ee(ya(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var f=Zp(i,n.shape,r,1,o,a),p=Q.engine.runKernel(function(m,g){var y=m.conv2dDerInput(s,n,f);return g([n,s]),y},{dy4D:s,filter:n},function(m,g){var y=g[0],b=g[1];return{dy4D:function(){return Ns(m,y,r,o,"NHWC",1,a)},filter:function(){return GB(m,b,y.shape,r,o,a)}}});return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function HB(t,e,n,r,o,a){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;s.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),ee(i.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+i.shape+"."}),ee(s.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."}),ee(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}),ee(i.shape[3]===n[2],function(){return"Error in conv2dDerFilter: depth of input "+i.shape[3]+") must match input depth in filter ("+n[2]+"."}),ee(s.shape[3]===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."}),a!=null&&ee(ya(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var u=Zp(i.shape,n,r,1,o,a);return Q.engine.runKernel(function(l){return l.conv2dDerFilter(i,s,u)},{x4D:i,dy4D:s})}function Zfe(t,e,n,r,o,a){return VB(n,Y(t,"x","conv2dTranspose"),Y(e,"filter","conv2dTranspose"),r,o,a)}function ehe(t,e,n,r,o,a,i){a===void 0&&(a=[1,1]);var s=Y(t,"x","depthwiseConv2d"),u=Y(e,"filter","depthwiseConv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),ee(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),ee(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),ee(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),ee(Vu(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),i!=null&&ee(ya(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var f=Zp(l.shape,u.shape,n,a,r,i,!0),p=Q.engine.runKernel(function(m,g){var y=m.depthwiseConv2D(l,u,f);return g([l,u]),y},{x:l,$filter:u},function(m,g){ee(ry(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var y=g[0],b=g[1];return{x:function(){return ohe(y.shape,m,b,f)},$filter:function(){return ahe(y,m,b.shape,f)}}});return d?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function the(t,e,n,r,o,a,i){a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC");var s=Y(t,"x","separableConv2d"),u=Y(e,"depthwiseFilter","separableConv2d"),l=Y(n,"pointwiseFilter","separableConv2d"),d=s,f=!1;if(s.rank===3&&(f=!0,d=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ee(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),ee(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),ee(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),ee(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),ee(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var p=u.shape[2],m=u.shape[3];ee(l.shape[2]===p*m,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*m+", but got "+l.shape[2]+"."});var g=ME(d,u,r,o,i,a),y=Ns(g,l,1,"valid",i);return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function nhe(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function G2(t){var e=nhe(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function rhe(t,e){return G2(t)||G2(e)}function ohe(t,e,n,r){var o=e,a=!1;e.rank===3&&(a=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=Q.engine.runKernel(function(s){return s.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}function ahe(t,e,n,r){var o=t;t.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return a.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Q.engine.runKernel(function(i){return i.depthwiseConv2DDerFilter(o,a,r)},{x4D:o,dy4D:a})}function ihe(t,e,n,r,o,a){o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1,1]);var i=Y(t,"x","conv3d"),s=Y(e,"filter","conv3d"),u=i,l=!1;i.rank===4&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),ee(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),ee(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),ee(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),ee(rhe(n,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),ee(o==="NHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NHWC is currently supported."});var d=IE(u.shape,s.shape,n,a,r),f=Q.engine.runKernel(function(p,m){var g=p.conv3d(u,s,d);return m([u,s]),g},{x:u,$filter:s},function(p,m){ee(G2(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var g=m[0],y=m[1];return{x:function(){return she(g.shape,p,y,n,r)},$filter:function(){return uhe(g,p,y.shape,n,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}function she(t,e,n,r,o){ee(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,i=e,s=!1;e.rank===4&&(s=!0,i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],l=i.shape[4];ee(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),ee(i.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),ee(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),ee(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),ee(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var d=IE(a,n.shape,r,1,o),f=Q.engine.runKernel(function(p){return p.conv3dDerInput(i,n,d)},{dy5D:i});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}function uhe(t,e,n,r,o){var a=t;t.rank===4&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var i=e;i.rank===4&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),ee(a.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."}),ee(i.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."}),ee(n.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),ee(a.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."}),ee(i.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."});var s=IE(a.shape,n,r,1,o);return Q.engine.runKernel(function(u){return u.conv3dDerFilter(a,i,s)},{x5D:a,dy5D:i})}var lhe=ae({conv1d_:Qfe}),Ns=ae({conv2d_:Jfe}),che=ae({conv3d_:ihe}),GB=ae({conv2dDerFilter_:HB}),ME=ae({depthwiseConv2d_:ehe}),$B=ae({separableConv2d_:the}),dhe=ae({conv2dTranspose_:Zfe});function fhe(t,e,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var a=Y(t,"a","matMul"),i=Y(e,"b","matMul");o=sr(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],d=r?i.shape[i.rank-2]:i.shape[i.rank-1],f=a.shape.slice(0,-2),p=i.shape.slice(0,-2),m=ft(f),g=ft(p);ee(a.rank>=2&&i.rank>=2&&a.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."}),ee(eo(f,p),function(){return"Error in matMul: outer dimensions ("+f+") and ("+p+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."}),ee(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var y=a.shape.slice(0,-2).concat([l,d]),b=n?a.as3D(m,s,l):a.as3D(m,l,s),S=r?i.as3D(g,d,u):i.as3D(g,u,d);return Q.engine.runKernel(function(C,E){var _=C.batchMatMul(b,S,n,r);return E([b,S]),_},{$a:b,$b:S},function(C,E){var _=E,T=_[0],D=_[1];return n||r?!n&&r?{$a:function(){return C.matMul(D,!1,!1)},$b:function(){return C.matMul(T,!0,!1)}}:n&&!r?{$a:function(){return D.matMul(C,!1,!0)},$b:function(){return T.matMul(C,!1,!1)}}:{$a:function(){return D.matMul(C,!0,!0)},$b:function(){return C.matMul(T,!0,!0)}}:{$a:function(){return C.matMul(D,!1,!0)},$b:function(){return T.matMul(C,!0,!1)}}}).reshape(y)}function hhe(t,e){var n=Y(t,"v1","outerProduct"),r=Y(e,"v2","outerProduct");return ee(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}function phe(t,e){var n=Y(t,"t1","dot"),r=Y(e,"t2","dot");ee(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];return ee(o===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}var OE=ae({matMul_:fhe}),mhe=ae({dot_:phe}),vhe=ae({outerProduct_:hhe});function ghe(t){var e=Y(t,"x","reverse");return ee(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),em(e,0)}function yhe(t,e){var n=Y(t,"x","reverse");return ee(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),em(n,e)}function bhe(t,e){var n=Y(t,"x","reverse");return ee(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),em(n,e)}function xhe(t,e){var n=Y(t,"x","reverse");return ee(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),em(n,e)}function whe(t,e){var n=Y(t,"x","reverse");if(n.rank===0)return n.clone();var r=Dr(e,n.shape);return Q.engine.runKernel(function(o){return o.reverse(n,r)},{$x:n},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(n)}var em=ae({reverse_:whe}),She=ae({reverse1d_:ghe}),Che=ae({reverse2d_:yhe}),Ehe=ae({reverse3d_:bhe}),Rhe=ae({reverse4d_:xhe});function qB(t,e,n,r,o,a){var i=Y(t,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ee(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),ee(Vu(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),a!=null&&ee(ya(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var l=Jp(s.shape,e,n,r,o,a),d=Q.engine.runKernel(function(f,p){var m=f.maxPool(s,l);return p([s,m]),m},{x:s},function(f,p){var m=p[0],g=p[1];return{x:function(){return Nhe(f,m,g,e,n,r,o)}}});return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function _he(t,e,n,r,o){return qB(t,e,n,1,r,o)}function XB(t,e,n,r,o,a){var i=Y(t,"x","avgPool","float32");ee(Vu(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ee(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&ee(ya(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var l=Jp(s.shape,e,n,r,o,a),d=Q.engine.runKernel(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return Dhe(f,s,e,n,r,o)}}});return d=d.cast(i.dtype),u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function The(t,e,n,r,o){return XB(t,e,n,1,r,o)}function Ahe(t,e,n,r,o,a){o==null&&(o=[1,1]),a==null&&(a=1),r===0&&(r="valid");var i=Y(t,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ee(Vu(a,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"});var l,d=Jp(s.shape,e,a,o,r),f=[d.dilationHeight,d.dilationWidth];l=r==="same"?Ihe([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var p=f[0]===1&&f[1]===1,m=khe([d.inHeight,d.inWidth],f,l),g=m[0],y=m[1],b=p?r:"valid",S=p?s:PB(s,f,g),C=(n==="avg"?function(){return XB(S,e,a,1,b)}:function(){return qB(S,e,a,1,b)})(),E=p?C:MB(C,f,y);return u?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}function Nhe(t,e,n,r,o,a,i,s){var u=Y(t,"dy","maxPoolBackprop"),l=Y(e,"input","maxPoolBackprop"),d=Y(n,"output","maxPoolBackprop");ee(l.rank===u.rank,function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"}),ee(Vu(o,a),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}),ee(u.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),ee(l.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."});var f=Jp(l.shape,r,o,a,i,s);return Q.engine.runKernel(function(p){return p.maxPoolBackprop(u,l,d,f)},{$dy:u,$input:l})}function Dhe(t,e,n,r,o,a){var i=Y(t,"dy","avgPoolBackprop"),s=Y(e,"input","avgPoolBackprop");ee(s.rank===i.rank,function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"}),ee(Vu(r,o),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"});var u=s,l=i,d=!1;s.rank===3&&(d=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ee(l.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."}),ee(u.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."});var f=Jp(u.shape,n,r,o,a),p=Q.engine.runKernel(function(m){return m.avgPoolBackprop(l,u,f)},{dy4D:l,input4D:u});return d?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function khe(t,e,n){var r=n.map(function(u){return u[0]}),o=n.map(function(u){return u[1]}),a=t.concat(r,o),i=e.map(function(u,l){return(u-a[l]%u)%u}),s=o.map(function(u,l){return u+i[l]});return[e.map(function(u,l){return[r[l],s[l]]}),e.map(function(u,l){return[0,i[l]]})]}function Ihe(t,e){var n=t.map(function(a,i){return a+(a-1)*(e[i]-1)}).map(function(a){return a-1}),r=n.map(function(a){return Math.floor(a/2)}),o=n.map(function(a,i){return a-r[i]});return n.map(function(a,i){return[r[i],o[i]]})}var Wd=ae({maxPool_:_he}),tm=ae({avgPool_:The}),Mhe=ae({pool_:Ahe});function Ohe(t,e,n){var r=Y(t,"x","slice1d");return ee(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Iu(r,[e],[n])}function Phe(t,e,n){var r=Y(t,"x","slice2d");return ee(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Iu(r,e,n)}function Fhe(t,e,n){var r=Y(t,"x","slice3d");return ee(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Iu(r,e,n)}function Bhe(t,e,n){var r=Y(t,"x","slice4d");return ee(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Iu(r,e,n)}function Lhe(t,e,n){var r,o,a=Y(t,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");r=typeof e=="number"?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice(),o=(o=n==null?new Array(a.rank).fill(-1):typeof n=="number"?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(s,u){return s>=0?s:(ee(s===-1,function(){return"Bad value in size"}),a.shape[u]-r[u])}),jae(a,r,o);var i=a.shape;return Q.engine.runKernel(function(s){return s.slice(a,r,o)},{$x:a},function(s){for(var u=[],l=0;l<s.rank;l++)u.push([r[l],i[l]-r[l]-o[l]]);return{$x:function(){return s.pad(u)}}})}var Iu=ae({slice_:Lhe}),jhe=ae({slice1d_:Ohe}),zhe=ae({slice2d_:Phe}),KB=ae({slice3d_:Fhe}),Uhe=ae({slice4d_:Bhe});function Whe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","logSumExp"),o=Dr(e,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=ba(s.shape,o);return s.reshape(u)}return s}function Vhe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=Dr(e,r.shape);return Gp(function(a){var i=Ii(o,a.rank),s=o,u=a;i!=null&&(u=a.transpose(i),s=Mi(s.length,a.rank));var l=Q.engine.runKernel(function(f){return f.sum(u,s)},{permutedX:u});if(n){var d=ba(l.shape,o);l=l.reshape(d)}return{value:l,gradFunc:function(f){var p=a.shape.slice();return o.forEach(function(m){p[m]=1}),f.reshape(p).mul(zl(a.shape,"float32"))}}})(r)}function Hhe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=Dr(e,r.shape),a=Ii(o,r.rank),i=o,s=r;a!=null&&(s=r.transpose(a),i=Mi(i.length,r.rank));var u=Q.engine.runKernel(function(d){return d.prod(s,i)},{permutedX:s});if(n){var l=ba(u.shape,o);u=u.reshape(l)}return u}function Ghe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","mean"),o=Dr(e,r.shape),a=ft(Or(r.shape,o)[1]);return Gp(function(i){var s=Pe(a);return{value:(s.dtype===i.dtype?i:i.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=i.shape.slice();return o.forEach(function(d){l[d]=1}),u.reshape(l).mul(zl(i.shape,"float32")).div(a)}}})(r)}function YB(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(ba(e.shape,r))),t.rank<n.rank&&(t=t.reshape(ba(t.shape,r))),{$x:function(){var a=t.mul(n.equal(e).cast(t.dtype));return o==null?a:a.transpose(o)}}}function $he(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","min"),o=r,a=Dr(e,r.shape),i=a,s=Ii(i,r.rank);s!=null&&(r=r.transpose(s),i=Mi(i.length,r.rank));var u=Q.engine.runKernel(function(d,f){var p=d.min(r,i);return f([o,p]),p},{$x:r},function(d,f){return YB(d,f[1],f[0],a,s)});if(n){var l=ba(u.shape,a);u=u.reshape(l)}return u}function qhe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","max"),o=r,a=Dr(e,r.shape),i=a,s=Ii(i,r.rank);s!=null&&(r=r.transpose(s),i=Mi(i.length,r.rank));var u=Q.engine.runKernel(function(d,f){var p=d.max(r,i);return f([o,p]),p},{$x:r},function(d,f){return YB(d,f[1],f[0],a,s)});if(n){var l=ba(u.shape,a);u=u.reshape(l)}return u}function Xhe(t,e){e===void 0&&(e=0);var n=Y(t,"x","argMin");e==null&&(e=0);var r=Dr(e,n.shape),o=Ii(r,n.rank);return o!=null&&(n=n.transpose(o),r=Mi(r.length,n.rank)),Q.engine.runKernel(function(a,i){var s=a.argMin(n,r[0]);return i([n]),s},{$x:n},function(a,i){var s=i[0];return{$x:function(){return nn(s)}}})}function Khe(t,e){e===void 0&&(e=0);var n=Y(t,"x","argMax");e==null&&(e=0);var r=Dr(e,n.shape),o=Ii(r,n.rank);return o!=null&&(n=n.transpose(o),r=Mi(r.length,n.rank)),Q.engine.runKernel(function(a,i){var s=a.argMax(n,r[0]);return i([n]),s},{$x:n},function(a,i){var s=i[0];return{$x:function(){return nn(s)}}})}function Yhe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","all","bool"),o=Dr(e,r.shape),a=o,i=Ii(a,r.rank);i!=null&&(r=r.transpose(i),a=Mi(a.length,r.rank));var s=Q.engine.runKernel(function(l){return l.all(r,a)},{$x:r});if(n){var u=ba(s.shape,o);return s.reshape(u)}return s}function Qhe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Y(t,"x","any","bool"),o=Dr(e,r.shape),a=o,i=Ii(a,r.rank);i!=null&&(r=r.transpose(i),a=Mi(a.length,r.rank));var s=Q.engine.runKernel(function(l){return l.any(r,a)},{$x:r});if(n){var u=ba(s.shape,o);return s.reshape(u)}return s}function Jhe(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Dr(e,(t=Y(t,"x","moments")).shape),o=t.mean(r,n),a=o.shape;return n||(a=ba(o.shape,r)),{mean:o,variance:t.toFloat().sub(o.reshape(a)).square().mean(r,n)}}var Zhe=ae({all_:Yhe}),epe=ae({any_:Qhe}),tpe=ae({argMax_:Khe}),npe=ae({argMin_:Xhe}),rpe=ae({logSumExp_:Whe}),P0=ae({max_:qhe}),ope=ae({mean_:Ghe}),ape=ae({min_:$he}),ipe=ae({moments_:Jhe}),QB=ae({sum_:Vhe}),spe=ae({prod_:Hhe});function upe(t,e){var n,r=Y(t,"a","notEqual"),o=Y(e,"b","notEqual");return n=sr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.notEqual(r,o)},{$a:r,$b:o})}function lpe(t,e){var n=Y(t,"a","notEqualStrict"),r=Y(e,"b","notEqualStrict");return vn(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}function cpe(t,e){var n,r=Y(t,"a","less"),o=Y(e,"b","less");return n=sr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.less(r,o)},{$a:r,$b:o})}function dpe(t,e){var n=Y(t,"a","lessStrict"),r=Y(e,"b","lessStrict");return vn(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}function fpe(t,e){var n,r=Y(t,"a","equal"),o=Y(e,"b","equal");return n=sr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.equal(r,o)},{$a:r,$b:o})}function hpe(t,e){var n=Y(t,"a","equalStrict"),r=Y(e,"b","equalStrict");return vn(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}function ppe(t,e){var n,r=Y(t,"a","lessEqual"),o=Y(e,"b","lessEqual");return n=sr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.lessEqual(r,o)},{$a:r,$b:o})}function mpe(t,e){var n=Y(t,"a","lessEqualStrict"),r=Y(e,"b","lessEqualStrict");return vn(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}function vpe(t,e){var n,r=Y(t,"a","greater"),o=Y(e,"b","greater");return n=sr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a){return a.greater(r,o)},{$a:r,$b:o})}function gpe(t,e){var n=Y(t,"a","greaterStrict"),r=Y(e,"b","greaterStrict");return vn(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}function ype(t,e){var n,r=Y(t,"a","greaterEqual"),o=Y(e,"b","greaterEqual");return n=sr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a,i){var s=a.greaterEqual(r,o);return i([r,o]),s},{$a:r,$b:o},function(a,i){var s=i[0],u=i[1];return{$a:function(){return nn(s)},$b:function(){return nn(u)}}})}function bpe(t,e){var n=Y(t,"a","greaterEqualStrict"),r=Y(e,"b","greaterEqualStrict");return vn(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}var JB=ae({equal_:fpe}),xpe=ae({equalStrict_:hpe}),wpe=ae({greater_:vpe}),ZB=ae({greaterEqual_:ype}),Spe=ae({greaterEqualStrict_:bpe}),Cpe=ae({greaterStrict_:gpe}),Epe=ae({less_:cpe}),Rpe=ae({lessEqual_:ppe}),_pe=ae({lessEqualStrict_:mpe}),Tpe=ae({lessStrict_:dpe}),Ape=ae({notEqual_:upe}),Npe=ae({notEqualStrict_:lpe});function Dpe(t,e){var n,r=Y(t,"a","add"),o=Y(e,"b","add");n=sr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i){return i.add(r,o)},{$a:r,$b:o},function(i){return{$a:function(){var s=i,u=ur(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},$b:function(){var s=i,u=ur(o.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(o.shape)}}})}function kpe(t){ee(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),ee(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(o,a){return Y(o,"tensors"+a,"addN")}),n=e[0];e.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(o){if(!eo(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return Q.engine.runKernel(function(o){return o.addN(e)},r,function(o){var a={};return e.forEach(function(i,s){a[s]=function(){return o.clone()}}),a})}function Ipe(t,e){var n=Y(t,"a","addStrict"),r=Y(e,"b","addStrict");return vn(n.shape,r.shape,"Error in addStrict: "),n.add(r)}function Mpe(t,e){var n,r=Y(t,"a","sub"),o=Y(e,"b","sub");n=sr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i){return i.subtract(r,o)},{$a:r,$b:o},function(i){return{$a:function(){var s=i,u=ur(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},$b:function(){var s=i,u=ur(o.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}})}function Ope(t,e){var n=Y(t,"a","subStrict"),r=Y(e,"b","subStrict");return vn(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}function Ppe(t,e){var n=Y(t,"base","pow"),r=Y(e,"exp","pow"),o=Gt(n.shape,r.shape);return t=n.cast(hr(n.dtype,r.dtype)),e=r.cast(hr(n.dtype,r.dtype)),Q.engine.runKernel(function(a,i){var s=a.pow(n,r);return i([n,r,s]),s},{$base:n,$exp:r},function(a,i){var s=i[0],u=i[1],l=i[2];return{$base:function(){var d=u.toFloat(),f=a.mul(d.mul(s.pow(d.sub(Pe(1))))),p=ur(s.shape,o);return p.length>0&&(f=f.sum(p)),f.reshape(s.shape)},$exp:function(){var d=s.greater(0),f=s.log().where(d,nn(s)),p=a.mul(l.mul(f)),m=ur(u.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(u.shape)}}})}function Fpe(t,e){return vn(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}function Bpe(t,e){var n,r=Y(t,"a","mul"),o=Y(e,"b","mul");n=sr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.multiply(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=i.mul(l.toFloat()),f=ur(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},$b:function(){var d=i.mul(u.toFloat()),f=ur(l.shape,a);return f.length>0?d.sum(f).reshape(l.shape):d}}})}function Lpe(t,e){var n=Y(t,"a","mul"),r=Y(e,"b","mul");return vn(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}function jpe(t,e){var n,r=Y(t,"a","div"),o=Y(e,"b","div");if(n=sr(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return eL(r,o);var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.realDivide(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=i.div(l.toFloat()),f=ur(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},$b:function(){var d=i.mul(u.toFloat()),f=ur(l.shape,a);f.length>0&&(d=d.sum(f).reshape(l.shape));var p=l.square();return d.div(p.toFloat()).neg()}}})}function zpe(t,e){var n,r=Y(t,"a","floorDiv"),o=Y(e,"b","floorDiv");n=sr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.floorDiv(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=i.div(l.toFloat()),f=ur(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},$b:function(){var d=i.mul(u.toFloat()),f=ur(l.shape,a);f.length>0&&(d=d.sum(f).reshape(l.shape));var p=l.square();return d.div(p.toFloat()).neg()}}})}function Upe(t,e){var n=Y(t,"a","div"),r=Y(e,"b","div");return vn(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}function Wpe(t,e){var n,r=Y(t,"a","mod"),o=Y(e,"b","mod");n=sr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.mod(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=ur(u.shape,a);return d.length>0?i.sum(d).reshape(u.shape):i},$b:function(){var d=i.mul(u.div(l).floor().neg()),f=ur(l.shape,a);return f.length>0?d.sum(f).reshape(l.shape):d}}})}function Vpe(t,e){var n=Y(t,"a","modStrict"),r=Y(e,"b","modStrict");return vn(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}function Hpe(t,e){var n,r=Y(t,"a","minimum"),o=Y(e,"b","minimum");return n=sr(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Gt(r.shape,o.shape),Q.engine.runKernel(function(a,i){var s=a.minimum(r,o);return i([r,o]),s},{$a:r,$b:o},function(a,i){var s=i[0],u=i[1];return{$a:function(){return a.mul(s.lessEqual(u).toFloat())},$b:function(){return a.mul(s.greater(u).toFloat())}}})}function Gpe(t,e){var n=Y(t,"a","minimumStrict"),r=Y(e,"b","minimumStrict");return vn(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}function $pe(t,e){var n,r=Y(t,"a","maximum"),o=Y(e,"b","maximum");return n=sr(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Gt(r.shape,o.shape),Q.engine.runKernel(function(a,i){var s=a.maximum(r,o);return i([r,o]),s},{$a:r,$b:o},function(a,i){var s=i[0],u=i[1];return{$a:function(){return a.mul(s.greaterEqual(u).toFloat())},$b:function(){return a.mul(s.less(u).toFloat())}}})}function qpe(t,e){var n=Y(t,"a","maximumStrict"),r=Y(e,"b","maximumStrict");return vn(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}function Xpe(t,e){var n,r=Y(t,"a","squaredDifference"),o=Y(e,"b","squaredDifference");return n=sr(r,o),r=n[0],o=n[1],Gt(r.shape,o.shape),Q.engine.runKernel(function(a,i){var s=a.squaredDifference(r,o);return i([r,o]),s},{$a:r,$b:o},function(a,i){var s=i[0],u=i[1],l=Pe(2);return{$a:function(){return a.mul(s.sub(u).mul(l))},$b:function(){return a.mul(u.sub(s).mul(l))}}})}function Kpe(t,e){var n=Y(t,"a","squaredDifferenceStrict"),r=Y(e,"b","squaredDifferenceStrict");return vn(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}function Ype(t,e){var n,r=Y(t,"a","atan2"),o=Y(e,"b","atan2");n=sr(r,o),r=n[0],o=n[1];var a=Gt(r.shape,o.shape);return Q.engine.runKernel(function(i,s){var u=i.atan2(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=en(u.square(),l.square()),f=i.mul(l.div(d)),p=ur(u.shape,a);return p.length>0&&(f=f.sum(p)),f.reshape(u.shape)},$b:function(){var d=en(u.square(),l.square()),f=ty(i.mul(u.div(d))),p=ur(l.shape,a);return p.length>0&&(f=f.sum(p)),f.reshape(l.shape)}}})}var en=ae({add_:Dpe}),Qpe=ae({addN_:kpe}),Jpe=ae({addStrict_:Ipe}),Zpe=ae({atan2_:Ype}),os=ae({div_:jpe}),eme=ae({divStrict_:Upe}),eL=ae({floorDiv_:zpe}),PE=ae({maximum_:$pe}),tme=ae({maximumStrict_:qpe}),tL=ae({minimum_:Hpe}),nme=ae({minimumStrict_:Gpe}),rme=ae({mod_:Wpe}),ome=ae({modStrict_:Vpe}),cs=ae({mul_:Bpe}),ame=ae({mulStrict_:Lpe}),nL=ae({pow_:Ppe}),ime=ae({powStrict_:Fpe}),sme=ae({squaredDifference_:Xpe}),ume=ae({squaredDifferenceStrict_:Kpe}),Ei=ae({sub_:Mpe}),lme=ae({subStrict_:Ope});function cme(t){var e=Y(t,"x","logicalNot","bool");return Q.engine.runKernel(function(n){return n.logicalNot(e)},{$x:e})}function dme(t,e){var n=Y(t,"a","logicalAnd","bool"),r=Y(e,"b","logicalAnd","bool");return Gt(n.shape,r.shape),Q.engine.runKernel(function(o){return o.logicalAnd(n,r)},{$a:n,$b:r})}function fme(t,e){var n=Y(t,"a","logicalOr","bool"),r=Y(e,"b","logicalOr","bool");return Gt(n.shape,r.shape),Q.engine.runKernel(function(o){return o.logicalOr(n,r)},{$a:n,$b:r})}function hme(t,e){var n=Y(t,"a","logicalXor","bool"),r=Y(e,"b","logicalXor","bool");return Gt(n.shape,r.shape),rL(t,e).logicalAnd(FE(t,e).logicalNot())}function pme(t,e,n){var r=Y(e,"a","where"),o=Y(n,"b","where"),a=Y(t,"condition","where","bool");return vn(r.shape,o.shape,"Error in where: "),a.rank===1?ee(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):vn(a.shape,o.shape,"Error in where: "),Q.engine.runKernel(function(i,s){var u=i.select(a,r,o);return s([a]),u},{$condition:a,$a:r,$b:o},function(i,s){var u=s[0];return{$condition:function(){return nn(u).toFloat()},$a:function(){return i.mul(u.cast(i.dtype))},$b:function(){return i.mul(u.logicalNot().cast(i.dtype))}}})}function mme(t){return pn(this,void 0,void 0,function(){var e,n,r;return mn(this,function(o){switch(o.label){case 0:return[4,(e=Y(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=DE(e.shape,n),t!==e&&e.dispose(),[2,r]}})})}var FE=ae({logicalAnd_:dme}),vme=ae({logicalNot_:cme}),rL=ae({logicalOr_:fme}),gme=ae({logicalXor_:hme}),vp=ae({where_:pme}),yme=mme;function bme(t){var e=Y(t,"x","relu");return e.dtype==="bool"?e.toInt():Q.engine.runKernel(function(n,r){var o=n.relu(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mulStrict(o.step().toFloat())}}})}function xme(t){var e=Y(t,"x","elu");return Q.engine.runKernel(function(n,r){var o=n.elu(e);return r([o]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return Q.engine.runKernel(function(a){return a.eluDer(n,o)},{dy:n,y:o})}}})}function wme(t){var e=Y(t,"x","selu");return Q.engine.runKernel(function(n,r){var o=n.selu(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){var a=o.greater(Pe(0)),i=Pe(TE),s=Pe(AE),u=n.mul(s),l=n.mul(i).mul(o.toFloat().exp());return vp(a,u,l)}}})}function Sme(t,e){e===void 0&&(e=.2);var n=Y(t,"x","leakyRelu");return PE(Pe(e).mul(n),n)}function Cme(t,e){var n=Y(t,"x","prelu"),r=Y(e,"alpha","prelu");return Q.engine.runKernel(function(o,a){var i=o.prelu(n,r);return a([n,r]),i},{$x:n,$alpha:r},function(o,a){var i=a[0],s=a[1],u=i.greater(0);return{$x:function(){return vp(u,o,o.mul(s))},$alpha:function(){var l=vp(u,nn(o),o.mul(i)),d=ur(s.shape,o.shape);return d.length>0&&(l=l.sum(d)),l.reshape(s.shape)}}})}var Eme=ae({elu_:xme}),Rme=ae({leakyRelu_:Sme}),_me=ae({prelu_:Cme}),Jn=ae({relu_:bme}),Tme=ae({selu_:wme});function Ame(t,e){var n=Y(t,"x","transpose");return e==null&&(e=n.shape.map(function(r,o){return o}).reverse()),ee(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(r){ee(r>=0&&r<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1?n.clone():Q.engine.runKernel(function(r){return r.transpose(n,e)},{$x:n},function(r){var o=wE(e);return{$x:function(){return r.transpose(o)}}})}var Mu=ae({transpose_:Ame});function Nme(t,e,n,r,o){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var a=Y(t,"x","localResponseNormalization");ee(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),ee(ya(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var i=a,s=!1;a.rank===3&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=Q.engine.runKernel(function(l,d){var f=l.localResponseNormalization4D(i,e,n,r,o);return d([i,f]),f},{x4D:i},function(l,d){var f=d[0],p=d[1];return{x4D:function(){return Q.engine.runKernel(function(m){return m.LRNGrad(l,f,p,e,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var Dme=ae({localResponseNormalization_:Nme});function kme(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=oL(t=Y(t,"x","norm"),e,n),a=o.shape;if(r){var i=Dr(n,t.shape);a=ba(o.shape,i)}return o.reshape(a)}function oL(t,e,n){if(n===void 0&&(n=null),t.rank===0)return t.abs();if(t.rank!==1&&n===null)return oL(t.reshape([-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return t.abs().sum(n);if(e===1/0)return t.abs().max(n);if(e===-1/0)return t.abs().min(n);if(e==="euclidean"||e===2)return t.abs().pow(Pe(2,"int32")).sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+e)}if(Array.isArray(n)&&n.length===2){if(e===1)return t.abs().sum(n[0]).max(n[1]-1);if(e===1/0)return t.abs().sum(n[1]).max(n[0]);if(e===-1/0)return t.abs().sum(n[1]).min(n[0]);if(e==="fro"||e==="euclidean")return t.square().sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+n)}var aL=ae({norm_:kme});function Ime(t,e,n){var r=Y(t,"x","unsortedSegmentSum"),o=Y(e,"segmentIds","unsortedSegmentSum","int32");return ee(ya(n),function(){return"numSegments must be of dtype int"}),Q.engine.runKernel(function(a,i){var s=a.unsortedSegmentSum(r,o,n);return i([o]),s},{$x:r},function(a,i){var s=i[0];return{$x:function(){return Ome(a,s)}}})}function Mme(t,e,n){n===void 0&&(n=0);var r=Y(t,"x","gather"),o=Y(e,"indices","gather","int32");n=Dr(n,r.shape)[0];var a=Lae(r,o,n);return Q.engine.runKernel(function(i,s){var u=i.gather(r,o.flatten(),n);return s([o]),u},{$x:r},function(i,s){var u=s[0];return{$x:function(){var l=r.shape,d=u.size,f=l.slice(0,n),p=f.length,m=l.slice(n,l.length).slice(1),g=m.length,y=BI(0,p),b=BI(p+1,p+1+g),S=LI([f,[d],m]),C=i.reshape(S),E=u.reshape([d]),_=LI([[p],y,b]),T=C.transpose(_),D=sL(T,E,r.shape[n]),k=wE(_);return D=D.transpose(k)}}}).reshape(a.outputShape)}function BI(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function LI(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}function Ome(t,e){for(var n=PE(e,nn(e)),r=iL(t,n),o=ZB(e,Pe(0,"int32")),a=r.rank-o.rank,i=0;i<a;++i)o=ca(o,i+1);o=FE(o,zl(r.shape,"bool"));var s=nn(r);return vp(o,r,s)}var iL=ae({gather_:Mme}),sL=ae({unsortedSegmentSum_:Ime});function Pme(t,e,n,r){for(var o=Y(e,"data","multiRNNCell"),a=Yg(n,"c","multiRNNCell"),i=Yg(r,"h","multiRNNCell"),s=o,u=[],l=0;l<t.length;l++){var d=t[l](s,a[l],i[l]);u.push(d[0]),u.push(d[1]),s=d[1]}var f=[],p=[];for(l=0;l<u.length;l+=2)f.push(u[l]),p.push(u[l+1]);return[f,p]}function Fme(t,e,n,r,o,a){var i=Y(t,"forgetBias","basicLSTMCell"),s=Y(e,"lstmKernel","basicLSTMCell"),u=Y(n,"lstmBias","basicLSTMCell"),l=Y(r,"data","basicLSTMCell"),d=Y(o,"c","basicLSTMCell"),f=Y(a,"h","basicLSTMCell"),p=l.concat(f,1).matMul(s).add(u),m=p.shape[0],g=p.shape[1]/4,y=[m,g],b=p.slice([0,0],y),S=p.slice([0,g],y),C=p.slice([0,2*g],y),E=p.slice([0,3*g],y),_=b.sigmoid().mulStrict(S.tanh()).addStrict(d.mulStrict(i.add(C).sigmoid()));return[_,_.tanh().mulStrict(E.sigmoid())]}var Bme=ae({basicLSTMCell_:Fme}),Lme=ae({multiRNNCell_:Pme});function jme(t,e,n,r,o){o===void 0&&(o=!0);var a=Y(t,"v","movingAverage"),i=Y(e,"x","movingAverage"),s=Y(n,"decay","movingAverage");lae(a,i),ee(eo(a.shape,i.shape),function(){return"Shape mismatch in v and x"});var u=Pe(1),l=u.sub(s),d=i.sub(a).mul(l);if(o){ee(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=Y(r,"step","movingAverage");d=d.div(u.sub(nL(s,f)))}return a.add(d)}var zme=ae({movingAverage_:jme});function Ume(t,e,n,r,o,a,i,s,u){if(o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),i!==0)throw new Error("ellipsis mask is not yet supported");if(s!==0)throw new Error("new axis mask is not yet supported");var l=Y(t,"x","stridedSlice");if(r.every(function(y){return y===1})){var d=SE(l.shape,e,n,r,o,a,i,s,u),f=d[0],p=d[1],m=d[2],g=p.filter(function(y,b){return m.indexOf(b)===-1});return Iu(l,f,p).reshape(g)}return Q.engine.runKernel(function(y){return y.stridedSlice(l,e,n,r,o,a,i,s,u)},{$x:l})}var Wme=ae({stridedSlice_:Ume});function Vme(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=Y(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var a=Q.engine.runKernel(function(i){return i.topk(r,e,n)},{$x:r});return{values:a[0],indices:a[1]}}var Hme=ae({topk_:Vme});function Gme(t,e,n){var r=Y(t,"indices","scatterND","int32"),o=Y(e,"updates","scatterND");return Pae(o,r,n),Q.engine.runKernel(function(a){return a.scatterND(r,o,n)},{$indices:r,$updates:o})}var $me=ae({scatterND_:Gme});function qme(t){ee(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Q.engine.runKernel(function(o){return o.fft(r)},{input:t}).reshape(t.shape)}function Xme(t){ee(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Q.engine.runKernel(function(o){return o.ifft(r)},{input:t}).reshape(t.shape)}function Kme(t){ee(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.zerosLike(),o=Kr(t,r).as2D(n,e),a=BE(o),i=Math.floor(e/2)+1,s=mi(a),u=yu(a),l=s.split([i,e-i],s.shape.length-1),d=u.split([i,e-i],u.shape.length-1),f=t.shape.slice();return f[t.shape.length-1]=i,Kr(l[0],d[0]).reshape(f)}function Yme(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=oy(r);return mi(o)}var a=[n,2*(e-1)],i=mi(t).as2D(n,e),s=yu(t).as2D(n,e),u=i.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(Pe(-1)),d=i.concat(u,1),f=s.concat(l,1);return r=Kr(d,f).as2D(a[0],a[1]),o=oy(r),mi(o)}var BE=ae({fft_:qme}),oy=ae({ifft_:Xme}),uL=ae({rfft_:Kme}),lL=ae({irfft_:Yme}),Qme=Object.freeze({fft:BE,ifft:oy,rfft:uL,irfft:lL});function Jme(t,e,n,r){if(t.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var o=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var i=e.size;if(e.rank!==0&&(e.rank!==1||i!==o))throw new Error("sparseValues has incorrect shape "+e.shape+", should be [] or ["+o+"]");if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function Zme(t,e,n,r){r===void 0&&(r=0);var o=Y(t,"sparseIndices","sparseToDense","int32"),a=Y(e,"sparseValues","sparseToDense"),i=Y(r,"defaultValue","sparseToDense",a.dtype);return Jme(o,a,n,i),Q.engine.runKernel(function(s){return s.sparseToDense(o,a,n,i)},{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}var eve=ae({sparseToDense_:Zme});function tve(t,e){var n=Y(e,"indices","gatherND","int32"),r=Y(t,"x","gatherND");return Q.engine.runKernel(function(o){return o.gatherND(r,n)},{$x:r,$indices:n})}var Lr,nve=ae({gatherND_:tve});function rve(t,e,n){n===void 0&&(n=Lr.SUM_BY_NONZERO_WEIGHTS);var r=Y(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=Y(e,"weights","computeWeightedLoss"));var a=o==null?r:r.mul(o);if(n===Lr.NONE)return a;if(n===Lr.SUM)return a.sum();if(n===Lr.MEAN){if(o==null)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(Pe(i)):s}if(n===Lr.SUM_BY_NONZERO_WEIGHTS){if(o==null)return a.sum().div(Pe(r.size));var u=o.mul(zl(r.shape)).notEqual(Pe(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}function ove(t,e,n,r){r===void 0&&(r=Lr.SUM_BY_NONZERO_WEIGHTS);var o=Y(t,"labels","absoluteDifference"),a=Y(e,"predictions","absoluteDifference"),i=null;n!=null&&(i=Y(n,"weights","absoluteDifference")),vn(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return Ds(s,i,r)}function ave(t,e,n,r){r===void 0&&(r=Lr.SUM_BY_NONZERO_WEIGHTS);var o=Y(t,"labels","meanSquaredError"),a=Y(e,"predictions","meanSquaredError"),i=null;n!=null&&(i=Y(n,"weights","meanSquaredError")),vn(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return Ds(s,i,r)}function ive(t,e,n,r,o){o===void 0&&(o=Lr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"labels","cosineDistance"),i=Y(e,"predictions","cosineDistance"),s=null;r!=null&&(s=Y(r,"weights","cosineDistance")),vn(a.shape,i.shape,"Error in cosineDistance: ");var u=Pe(1).sub(a.mul(i).sum(n,!0));return Ds(u,s,o)}function sve(t,e,n,r){r===void 0&&(r=Lr.SUM_BY_NONZERO_WEIGHTS);var o=Y(t,"labels","hingeLoss"),a=Y(e,"predictions","hingeLoss"),i=null;n!=null&&(i=Y(n,"weights","hingeLoss")),vn(o.shape,a.shape,"Error in hingeLoss: ");var s=Pe(1);o=Pe(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return Ds(u,i,r)}function uve(t,e,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=Lr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"labels","logLoss"),i=Y(e,"predictions","logLoss"),s=null;n!=null&&(s=Y(n,"weights","logLoss")),vn(a.shape,i.shape,"Error in logLoss: ");var u=Pe(1),l=Pe(r),d=a.mul(i.add(l).log()).neg().sub(u.sub(a).mul(u.sub(i).add(l).log()));return Ds(d,s,o)}function lve(t,e){var n=Y(t,"labels","sigmoidCrossEntropyWithLogits"),r=Y(e,"logits","sigmoidCrossEntropyWithLogits");vn(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),a=r.mul(n),i=r.abs().neg().exp().log1p();return o.sub(a).add(i)}function cve(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=Lr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"multiClassLabels","sigmoidCrossEntropy"),i=Y(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=Y(n,"weights","sigmoidCrossEntropy")),vn(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Pe(r),l=Pe(1),d=Pe(.5);a=a.mul(l.sub(u)).add(d.mul(u))}var f=lve(a,i);return Ds(f,s,o)}function dve(t,e,n,r,o){r===void 0&&(r=1),o===void 0&&(o=Lr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"labels","huberLoss"),i=Y(e,"predictions","huberLoss"),s=null;n!=null&&(s=Y(n,"weights","huberLoss")),vn(a.shape,i.shape,"Error in huberLoss: ");var u=Pe(r),l=i.sub(a).abs(),d=tL(l,u),f=l.sub(d),p=Pe(.5).mul(d.square()).add(u.mul(f));return Ds(p,s,o)}function fve(t,e,n){if(n===void 0&&(n=-1),n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return Gp(function(r,o,a){var i=o.logSumExp([n],!0),s=o.toFloat().sub(i);return a([r,s]),{value:s.mul(r).neg().sum([n]),gradFunc:function(u,l){var d=l[0],f=l[1],p=ba(u.shape,[n]);return[u.reshape(p).mul(d.toFloat().sub(f.exp())),u.reshape(p).mul(f.exp().sub(d.toFloat()))]}}})(t,e)}function hve(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=Lr.SUM_BY_NONZERO_WEIGHTS);var a=Y(t,"onehotLabels","softmaxCrossEntropy"),i=Y(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=Y(n,"weights","softmaxCrossEntropy")),vn(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Pe(r),l=Pe(1),d=Pe(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(d))}var f=fve(a,i);return Ds(f,s,o)}(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Lr||(Lr={}));var pve=ae({absoluteDifference_:ove}),Ds=ae({computeWeightedLoss_:rve}),mve=ae({cosineDistance_:ive}),vve=ae({hingeLoss_:sve}),gve=ae({huberLoss_:dve}),yve=ae({logLoss_:uve}),bve=ae({meanSquaredError_:ave}),xve=ae({sigmoidCrossEntropy_:cve}),wve=ae({softmaxCrossEntropy_:hve}),Sve=Object.freeze({get Reduction(){return Lr},absoluteDifference:pve,computeWeightedLoss:Ds,cosineDistance:mve,hingeLoss:vve,huberLoss:gve,logLoss:yve,meanSquaredError:bve,sigmoidCrossEntropy:xve,softmaxCrossEntropy:wve});function Cve(t){var e;if(Array.isArray(t)){e=!1,ee(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){ee(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},o=1;o<t.length;++o)r(o)}else e=!0,t=NE(t,t.shape[0],0).map(function(u){return FB(u,[0])});ee(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var a=[],i=t,s=function(u){a.push(Q.engine.tidy(function(){var l=i[u];if(u>0)for(var d=0;d<u;++d){var f=QB(a[d].mulStrict(l)).mul(a[d]);l=l.sub(f)}return l.div(aL(l,"euclidean"))}))};for(o=0;o<t.length;++o)s(o);return e?La(a,0):a}function Eve(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return jI(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(a,i){return a*i}),r=[],o=[];return Ar(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0).forEach(function(a){var i=jI(a,e),s=i[0],u=i[1];r.push(s),o.push(u)}),[La(r,0).reshape(t.shape),La(o,0).reshape(t.shape)]}function jI(t,e){return e===void 0&&(e=!1),Q.engine.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=OB(n),a=t.clone(),i=M0([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(f){var p,m=a,g=s,y=o;p=Q.engine.tidy(function(){var b=a.slice([f,f],[n-f,1]),S=b.norm(),C=a.slice([f,f],[1,1]),E=C.sign().neg(),_=C.sub(E.mul(S)),T=b.div(_);s=T.shape[0]===1?i.clone():i.concat(T.slice([1,0],[T.shape[0]-1,T.shape[1]]),0);var D=E.matMul(_).div(S).neg(),k=a.slice([f,0],[n-f,r]),I=D.mul(s);a=f===0?k.sub(I.matMul(s.transpose().matMul(k))):a.slice([0,0],[f,r]).concat(k.sub(I.matMul(s.transpose().matMul(k))),0);var M=o.slice([0,f],[n,o.shape[1]-f]);return o=f===0?M.sub(M.matMul(s).matMul(I.transpose())):o.slice([0,0],[n,f]).concat(M.sub(M.matMul(s).matMul(I.transpose())),1),[s,a,o]}),s=p[0],a=p[1],o=p[2],kae([m,g,y])},d=0;d<u;++d)l(d);return!e&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]})}var Rve=ae({gramSchmidt_:Cve}),_ve=ae({qr_:Eve}),Tve=Object.freeze({gramSchmidt:Rve,qr:_ve});function Ave(t,e,n){n===void 0&&(n=!1);var r=Y(t,"images","resizeBilinear");ee(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),ee(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=Q.engine.runKernel(function(l,d){return d([o]),l.resizeBilinear(o,i,s,n)},{batchImages:o},function(l,d){return{batchImages:function(){return Q.engine.runKernel(function(f){return f.resizeBilinearBackprop(l,d[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}function Nve(t,e,n){n===void 0&&(n=!1);var r=Y(t,"images","resizeNearestNeighbor");ee(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),ee(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),ee(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=Q.engine.runKernel(function(l,d){return d([o]),l.resizeNearestNeighbor(o,i,s,n)},{batchImages:o},function(l,d){return{batchImages:function(){return Q.engine.runKernel(function(f){return f.resizeNearestNeighborBackprop(l,d[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}function Dve(t,e,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var a=Y(t,"boxes","nonMaxSuppression"),i=Y(e,"scores","nonMaxSuppression"),s=cL(a,i,n,r,o);return n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,Q.engine.runKernel(function(u){return u.nonMaxSuppression(a,i,n,r,o)},{$boxes:a})}function kve(t,e,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),pn(this,void 0,void 0,function(){var a,i,s,u,l,d;return mn(this,function(f){switch(f.label){case 0:return a=Y(t,"boxes","nonMaxSuppressionAsync"),i=Y(e,"scores","nonMaxSuppressionAsync"),s=cL(a,i,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,a.data()];case 1:return u=f.sent(),[4,i.data()];case 2:return l=f.sent(),d=EE(u,l,n,r,o),a!==t&&a.dispose(),i!==e&&i.dispose(),[2,d]}})})}function cL(t,e,n,r,o){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY);var a=t.shape[0];return n=Math.min(n,a),ee(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),ee(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),ee(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),ee(e.rank===1,function(){return"scores must be a 1D tensor"}),ee(e.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+e.shape[0]}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o}}function Ive(t,e,n,r,o,a){var i=Y(t,"image","cropAndResize","float32"),s=Y(e,"boxes","cropAndResize","float32"),u=Y(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var l=s.shape[0];return ee(i.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),ee(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),ee(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),ee(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),ee(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),ee(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),Q.engine.runKernel(function(d,f){return d.cropAndResize(i,s,u,r,o,a)},{$image:i,$boxes:s})}var Mve=ae({resizeBilinear_:Ave}),Ove=ae({resizeNearestNeighbor_:Nve}),Pve=ae({nonMaxSuppression_:Dve}),Fve=kve,Bve=ae({cropAndResize_:Ive}),dL=Object.freeze({resizeBilinear:Mve,resizeNearestNeighbor:Ove,nonMaxSuppression:Pve,nonMaxSuppressionAsync:Fve,cropAndResize:Bve});function Lve(t,e,n,r,o,a){var i;n===void 0&&(n=!1),r===void 0&&(r=!1),a===void 0&&(a="linear");var s=Y(t,"a","fused matMul"),u=Y(e,"b","fused matMul");i=sr(s,u),s=i[0],u=i[1];var l=n?s.shape[s.rank-2]:s.shape[s.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?s.shape[s.rank-1]:s.shape[s.rank-2],p=r?u.shape[u.rank-2]:u.shape[u.rank-1],m=s.shape.slice(0,-2),g=u.shape.slice(0,-2),y=ft(m),b=ft(g);ee(s.rank>=2&&u.rank>=2&&s.rank===u.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+u.rank+"."}),ee(eo(m,g),function(){return"Error in fused matMul: outer dimensions ("+m+") and ("+g+") of Tensors with shapes "+s.shape+" and "+u.shape+" must match."}),ee(l===d,function(){return"Error in fused matMul: inner shapes ("+l+") and ("+d+") of Tensors with shapes "+s.shape+" and "+u.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var S,C=s.shape.slice(0,-2).concat([f,p]),E=n?s.as3D(y,l,f):s.as3D(y,f,l),_=r?u.as3D(b,p,d):u.as3D(b,d,p);o!=null&&Gt(C,(S=sr(S=Y(o,"bias","fused matMul"),s)[0]).shape);var T={$a:E,$b:_};return o!=null&&(T.$bias=S),Q.engine.runKernel(function(D,k){var I=D.fusedBatchMatMul(E,_,n,r,S,a);return k([E,_,I]),I},T,function(D,k){var I,M=k[0],O=k[1],F=k[2];if(a==null||a==="linear")I=D;else{if(a!=="relu")throw new Error("Gradient for activation "+a+" has not been implemented yet.");I=D.mul(F.step())}var j={};return o!=null&&(j={$bias:function(){var G=I,W=ur(S.shape,I.shape);return W.length>0&&(G=G.sum(W)),G.reshape(S.shape)}}),Object.assign(n||r?!n&&r?{$a:function(){return I.matMul(O,!1,!1)},$b:function(){return I.matMul(M,!0,!1)}}:n&&!r?{$a:function(){return O.matMul(I,!1,!0)},$b:function(){return M.matMul(I,!1,!1)}}:{$a:function(){return O.matMul(I,!0,!0)},$b:function(){return I.matMul(M,!0,!0)}}:{$a:function(){return I.matMul(O,!1,!0)},$b:function(){return M.matMul(I,!0,!1)}},j)}).reshape(C)}var jve=ae({matMul_:Lve}),zve=Object.freeze({matMul:jve}),Uve=Object.freeze({image:dL,linalg:Tve,losses:Sve,spectral:Qme,fused:zve,op:ae,batchNormalization2d:zfe,batchNormalization3d:Ufe,batchNormalization4d:Wfe,batchNormalization:Vfe,batchNorm:WB,batchNorm2d:Hfe,batchNorm3d:Gfe,batchNorm4d:$fe,complex:Kr,real:mi,imag:yu,concat:mo,concat1d:Cce,concat2d:Ece,concat3d:Rce,concat4d:_ce,split:NE,conv1d:lhe,conv2d:Ns,conv3d:che,conv2dDerFilter:GB,depthwiseConv2d:ME,separableConv2d:$B,conv2dTranspose:dhe,matMul:OE,dot:mhe,outerProduct:vhe,reverse:em,reverse1d:She,reverse2d:Che,reverse3d:Ehe,reverse4d:Rhe,maxPool:Wd,avgPool:tm,pool:Mhe,slice:Iu,slice1d:jhe,slice2d:zhe,slice3d:KB,slice4d:Uhe,abs:ife,acos:sfe,acosh:ufe,asin:lfe,asinh:cfe,atan:dfe,atanh:ffe,ceil:hfe,clipByValue:kE,cos:pfe,cosh:mfe,erf:vfe,exp:H2,expm1:gfe,floor:yfe,log:bfe,log1p:xfe,logSigmoid:wfe,neg:ty,reciprocal:Sfe,round:Cfe,rsqrt:BB,sigmoid:LB,sign:Efe,isNaN:Rfe,isInf:_fe,isFinite:Tfe,sin:Afe,sinh:Nfe,softplus:Dfe,sqrt:kfe,square:Ife,step:Mfe,tan:Ofe,tanh:Pfe,all:Zhe,any:epe,argMax:tpe,argMin:npe,logSumExp:rpe,max:P0,mean:ope,min:ape,moments:ipe,sum:QB,prod:spe,equal:JB,equalStrict:xpe,greater:wpe,greaterEqual:ZB,greaterEqualStrict:Spe,greaterStrict:Cpe,less:Epe,lessEqual:Rpe,lessEqualStrict:_pe,lessStrict:Tpe,notEqual:Ape,notEqualStrict:Npe,add:en,addN:Qpe,addStrict:Jpe,atan2:Zpe,div:os,divStrict:eme,floorDiv:eL,maximum:PE,maximumStrict:tme,minimum:tL,minimumStrict:nme,mod:rme,modStrict:ome,mul:cs,mulStrict:ame,pow:nL,powStrict:ime,squaredDifference:sme,squaredDifferenceStrict:ume,sub:Ei,subStrict:lme,elu:Eme,leakyRelu:Rme,prelu:_me,relu:Jn,selu:Tme,logicalAnd:FE,logicalNot:vme,logicalOr:rL,logicalXor:gme,where:vp,whereAsync:yme,buffer:Bt,print:ade,batchToSpaceND:MB,cast:ide,clone:sde,cumsum:ude,depthToSpace:lde,expandDims:ca,eye:OB,multinomial:cde,oneHot:V2,pad:Yp,pad1d:dde,pad2d:fde,pad3d:hde,pad4d:pde,rand:mde,randomNormal:vde,randomUniform:gde,reshape:Ba,spaceToBatchND:PB,squeeze:FB,stack:La,tile:wd,truncatedNormal:yde,unstack:Ar,setdiff1dAsync:bde,fill:Gh,linspace:Jae,ones:zl,range:lB,scalar:Pe,tensor:Yn,tensor1d:Mo,tensor2d:M0,tensor3d:CE,tensor4d:Ia,tensor5d:Xae,tensor6d:Kae,zeros:$n,onesLike:cB,zerosLike:nn,transpose:Mu,softmax:Wu,logSoftmax:Hae,localResponseNormalization:Dme,norm:aL,gather:iL,unsortedSegmentSum:sL,basicLSTMCell:Bme,multiRNNCell:Lme,movingAverage:zme,stridedSlice:Wme,topk:Hme,scatterND:$me,fft:BE,ifft:oy,rfft:uL,irfft:lL,sparseToDense:eve,gatherND:nve});function Wve(t,e,n){if(e==="linear")return t.linear(n);if(e==="relu")return t.relu(n);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var Vve=(function(){function t(){this.blockSize=48,this.firstUse=!0,Q.get("IS_BROWSER")&&(this.fromPixels2DContext=document.createElement("canvas").getContext("2d"))}return t.prototype.setDataMover=function(e){this.data=new dB(e)},t.prototype.register=function(e,n,r){if(this.firstUse&&(this.firstUse=!1,Q.get("IS_NODE")&&z2(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================
`)),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,{dtype:r})},t.prototype.write=function(e,n){if(n==null)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(e).values=n},t.prototype.fromPixels=function(e,n){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r,o;if(Q.get("IS_NODE")&&e.getContext==null)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(e.getContext!=null)r=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else if(e instanceof ImageData)r=e.data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(this.fromPixels2DContext==null)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),r=this.fromPixels2DContext.getImageData(0,0,e.width,e.height).data}if(n===4)o=new Int32Array(r);else{var a=e.width*e.height;o=new Int32Array(a*n);for(var i=0;i<a;i++)for(var s=0;s<n;++s)o[i*n+s]=r[4*i+s]}return CE(o,[e.height,e.width,n],"int32")},t.prototype.read=function(e){return pn(this,void 0,void 0,function(){return mn(this,function(n){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var n=this.data.get(e),r=n.dtype,o=n.complexTensors;return r==="complex64"?hB(o.real.dataSync(),o.imag.dataSync()):this.data.get(e).values},t.prototype.disposeData=function(e){if(this.data.has(e)){var n=this.data.get(e).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){return n=Kg(),e(),[2,{kernelMs:Kg()-n}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,n){var r=We.make(e.shape,{},"complex64");return this.data.get(r.dataId).complexTensors={real:Q.engine.keep(e.clone()),imag:Q.engine.keep(n.clone())},r},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.assertNotComplex=function(e,n){Array.isArray(e)||(e=[e]),e.forEach(function(r){r!=null&&ee(r.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})},t.prototype.slice=function(e,n,r){if(this.assertNotComplex(e,"slice"),sB(e.shape,n,r)){var o=uB(n,e.strides),a=ft(r);return Yn(e.dataSync().subarray(o,o+a),r,e.dtype)}for(var i=Bt(r,e.dtype),s=e.bufferSync(),u=0;u<i.size;++u){var l=i.indexToLoc(u).map(function(d,f){return d+n[f]});i.values[u]=s.get.apply(s,l)}return i.toTensor()},t.prototype.stridedSlice=function(e,n,r,o,a,i,s,u,l){this.assertNotComplex(e,"stridedSlice");var d=SE(e.shape,n,r,o,a,i,s,u,l),f=d[0],p=d[1],m=d[2],g=p.filter(function(T,D){return m.indexOf(D)===-1});if(g.some(function(T){return T===0}))return Yn([],g);for(var y=Bt(p,e.dtype),b=e.bufferSync(),S=0;S<y.size;S++){for(var C=y.indexToLoc(S),E=new Array(C.length),_=0;_<E.length;_++)E[_]=C[_]*o[_]+f[_];y.set.apply(y,[b.get.apply(b,E)].concat(C))}return y.toTensor().reshape(g)},t.prototype.unstack=function(e,n){for(var r=e.shape[n],o=new Array(e.rank-1),a=0,i=0;i<e.rank;i++)i!==n&&(o[a++]=e.shape[i]);var s=new Array(e.rank).fill(0),u=e.shape.slice();u[n]=1;var l=new Array(r);for(i=0;i<l.length;i++)s[n]=i,l[i]=this.slice(e,s,u).reshape(o);return l},t.prototype.reverse=function(e,n){this.assertNotComplex(e,"reverse");for(var r=Bt(e.shape,e.dtype),o=e.bufferSync(),a=function(s){var u=r.indexToLoc(s),l=u.slice();n.forEach(function(d){return l[d]=e.shape[d]-1-l[d]}),r.set.apply(r,[o.get.apply(o,l)].concat(u))},i=0;i<r.size;i++)a(i);return r.toTensor()},t.prototype.concat=function(e,n){this.assertNotComplex(e,"concat");var r=e.map(function(l){var d=ft(l.shape.slice(n));return l.as2D(-1,d)}),o=Ud(r.map(function(l){return l.shape}),1),a=Bt(o,e[0].dtype).values;if(r[0].shape[0]===1){var i=0;r.forEach(function(l){a.set(l.dataSync(),i),i+=l.size})}else{var s=0;r.forEach(function(l){for(var d=l.dataSync(),f=0,p=0;p<l.shape[0];++p)for(var m=p*o[1]+s,g=0;g<l.shape[1];++g)a[m+g]=d[f++];s+=l.shape[1]})}var u=Ud(e.map(function(l){return l.shape}),n);return Yn(a,u,e[0].dtype)},t.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(Pe(-1),e)},t.prototype.add=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,o,a,i){return{real:r+a,imag:o+i}}):this.broadcastedBinaryOp(e,n,hr(e.dtype,n.dtype),function(r,o){return r+o})},t.prototype.addN=function(e){this.assertNotComplex(e,"addN");for(var n=e.map(function(u){return u.dataSync()}),r=Bt(e[0].shape,e[0].dtype),o=r.values,a=0;a<e.length;a++)for(var i=n[a],s=0;s<o.length;s++)o[s]+=i[s];return r.toTensor()},t.prototype.subtract=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,o,a,i){return{real:r-a,imag:o-i}}):this.broadcastedBinaryOp(e,n,hr(e.dtype,n.dtype),function(r,o){return r-o})},t.prototype.pow=function(e,n){return this.assertNotComplex([e,n],"pow"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return Math.pow(r,o)})},t.prototype.batchMatMul=function(e,n,r,o){this.assertNotComplex([e,n],"matMul");for(var a=r?e.shape[1]:e.shape[2],i=r?e.shape[2]:e.shape[1],s=o?n.shape[1]:n.shape[2],u=e.shape[0],l=e.dataSync(),d=n.dataSync(),f=r?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],p=f[0],m=f[1],g=f[2],y=o?[1,n.strides[1],n.strides[0]]:[n.strides[1],1,n.strides[0]],b=y[0],S=y[1],C=y[2],E=i*s,_=Bt([u,i,s],e.dtype),T=_.values,D=this.blockSize,k=0;k<u;k++)for(var I=0;I<i;I+=D)for(var M=0;M<s;M+=D)for(var O=0;O<a;O+=D)for(var F=Math.min(I+D,i),j=Math.min(M+D,s),G=Math.min(O+D,a),W=I;W<F;W++)for(var q=M;q<j;q++){for(var P=0,z=O;z<G;z++)P+=l[k*p+W*m+z*g]*d[z*b+q*S+k*C];T[k*E+(W*s+q)]+=P}return _.toTensor()},t.prototype.fusedBatchMatMul=function(e,n,r,o,a,i){var s=this.batchMatMul(e,n,r,o);return a&&(s=this.add(s,a)),i&&(s=Wve(this,i,s)),s},t.prototype.multiply=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,o,a,i){return{real:r*a-o*i,imag:r*i+o*a}}):this.broadcastedBinaryOp(e,n,hr(e.dtype,n.dtype),function(r,o){return r*o})},t.prototype.realDivide=function(e,n){return this.assertNotComplex([e,n],"realDivide"),this.broadcastedBinaryOp(e,n,"float32",function(r,o){return r/o})},t.prototype.floorDiv=function(e,n){return this.assertNotComplex([e,n],"floorDiv"),this.broadcastedBinaryOp(e,n,"int32",function(r,o){return Math.floor(r/o)})},t.prototype.sum=function(e,n){this.assertNotComplex(e,"sum"),Do("sum",n,e.rank);for(var r=Or(e.shape,n),o=r[0],a=r[1],i=$n(o,hr(e.dtype,"int32")),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=0,m=0;m<s;++m)p+=l[f+m];u[d]=p}return i},t.prototype.prod=function(e,n){this.assertNotComplex(e,"sum");for(var r=Or(e.shape,n),o=r[0],a=r[1],i=$n(o,hr(e.dtype,"int32")),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=1,m=0;m<s;++m)p*=l[f+m];u[d]=p}return i},t.prototype.unsortedSegmentSum=function(e,n,r){this.assertNotComplex(e,"unsortedSegmentSum");for(var o=[],a=e.rank-n.rank,i=0;i<a;++i)n=n.expandDims(i+1);for(i=0;i<r;++i){var s=Pe(i,"int32"),u=JB(s,n).asType("float32").mul(e).sum(0);o.push(u)}return La(o)},t.prototype.argMin=function(e,n){this.assertNotComplex(e,"argMin");var r=[n];Do("argMin",r,e.rank);for(var o=Or(e.shape,r),a=o[0],i=o[1],s=$n(a,"int32"),u=ft(i),l=s.dataSync(),d=e.dataSync(),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0,y=0;y<u;++y){var b=d[p+y];b<m&&(m=b,g=y)}l[f]=g}return s},t.prototype.argMax=function(e,n){this.assertNotComplex(e,"argMax");var r=[n];Do("argMax",r,e.rank);for(var o=Or(e.shape,r),a=o[0],i=o[1],s=$n(a,"int32"),u=ft(i),l=s.dataSync(),d=e.dataSync(),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0,y=0;y<u;++y){var b=d[p+y];b>m&&(m=b,g=y)}l[f]=g}return s},t.prototype.cumsum=function(e,n,r,o){if(this.assertNotComplex(e,"cumsum"),n!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+n);for(var a=hr(e.dtype,"int32"),i=$n(e.shape,a),s=i.dataSync(),u=e.dataSync(),l=e.shape[e.rank-1],d=o?function(y,b){return y+l-b-1}:function(y,b){return y+b},f=0;f<u.length;f+=l)for(var p=0;p<l;p++){var m=d(f,p);if(p===0)s[m]=r?0:u[m];else{var g=d(f,p-1);s[m]=r?u[g]+s[g]:u[m]+s[g]}}return i},t.prototype.equal=function(e,n){return this.assertNotComplex([e,n],"equal"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r===o?1:0})},t.prototype.notEqual=function(e,n){return this.assertNotComplex([e,n],"notEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r!==o?1:0})},t.prototype.less=function(e,n){return this.assertNotComplex([e,n],"less"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r<o?1:0})},t.prototype.lessEqual=function(e,n){return this.assertNotComplex([e,n],"lessEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r<=o?1:0})},t.prototype.greater=function(e,n){return this.assertNotComplex([e,n],"greater"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r>o?1:0})},t.prototype.greaterEqual=function(e,n){return this.assertNotComplex([e,n],"greaterEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r>=o?1:0})},t.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot");for(var n=e.dataSync(),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n[o]?0:1;return We.make(e.shape,{values:r},"bool")},t.prototype.logicalAnd=function(e,n){return this.assertNotComplex([e,n],"logicalAnd"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r&&o})},t.prototype.logicalOr=function(e,n){return this.assertNotComplex([e,n],"logicalOr"),this.broadcastedBinaryOp(e,n,"bool",function(r,o){return r||o})},t.prototype.select=function(e,n,r){this.assertNotComplex([e,n,r],"select");for(var o=e.dataSync(),a=n.dataSync(),i=r.dataSync(),s=$n(n.shape,hr(n.dtype,r.dtype)),u=s.dataSync(),l=0,d=e.rank===0||e.rank>1||n.rank===1?1:n.shape[1],f=0;f<o.length;f++)for(var p=0;p<d;p++)o[f]===1?u[l++]=a[f]:u[l++]=i[f];return s},t.prototype.where=function(e){this.assertNotComplex([e],"where");var n=e.dataSync();return DE(e.shape,n)},t.prototype.topk=function(e,n,r){return this.assertNotComplex(e,"topk"),mB(e.dataSync(),e.shape,e.dtype,n)},t.prototype.min=function(e,n){this.assertNotComplex(e,"min"),Do("min",n,e.rank);for(var r=Or(e.shape,n),o=r[0],a=r[1],i=$n(o,e.dtype),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=l[f],m=0;m<s;++m){var g=l[f+m];g<p&&(p=g)}u[d]=p}return i},t.prototype.minimum=function(e,n){return this.assertNotComplex([e,n],"minimum"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return Math.min(r,o)})},t.prototype.mod=function(e,n){return this.assertNotComplex([e,n],"mod"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){var a=r%o;return r<0&&o<0||r>=0&&o>=0?a:(a+o)%o})},t.prototype.max=function(e,n){this.assertNotComplex(e,"max"),Do("max",n,e.rank);for(var r=Or(e.shape,n),o=r[0],a=r[1],i=$n(o,e.dtype),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=l[f],m=0;m<s;++m){var g=l[f+m];g>p&&(p=g)}u[d]=p}return i},t.prototype.maximum=function(e,n){return this.assertNotComplex([e,n],"maximum"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return Math.max(r,o)})},t.prototype.all=function(e,n){this.assertNotComplex(e,"all"),Do("all",n,e.rank);for(var r=Or(e.shape,n),o=r[0],a=r[1],i=$n(o,e.dtype),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=l[f],m=0;m<s;++m){var g=l[f+m];p=p&&g}u[d]=p}return i},t.prototype.any=function(e,n){this.assertNotComplex(e,"any"),Do("any",n,e.rank);for(var r=Or(e.shape,n),o=r[0],a=r[1],i=$n(o,e.dtype),s=ft(a),u=i.dataSync(),l=e.dataSync(),d=0;d<u.length;++d){for(var f=d*s,p=l[f],m=0;m<s;++m){var g=l[f+m];p=p||g}u[d]=p}return i},t.prototype.squaredDifference=function(e,n){return this.assertNotComplex([e,n],"squaredDifference"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){var a=r-o;return a*a})},t.prototype.ceil=function(e){this.assertNotComplex(e,"ceil");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=Math.ceil(n[o]);return We.make(e.shape,{values:r})},t.prototype.floor=function(e){this.assertNotComplex(e,"floor");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=Math.floor(n[o]);return We.make(e.shape,{values:r})},t.prototype.sign=function(e){this.assertNotComplex(e,"x");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)n[o]<0?r[o]=-1:n[o]>0?r[o]=1:r[o]=0;return We.make(e.shape,{values:r})},t.prototype.isNaN=function(e){this.assertNotComplex(e,"x");for(var n=e.dataSync(),r=new Uint8Array(n.length),o=0;o<n.length;++o)Number.isNaN(n[o])&&(r[o]=1);return We.make(e.shape,{values:r},"bool")},t.prototype.isInf=function(e){this.assertNotComplex(e,"x");for(var n=e.dataSync(),r=new Uint8Array(n.length),o=0;o<n.length;++o)Math.abs(n[o])===1/0&&(r[o]=1);return We.make(e.shape,{values:r},"bool")},t.prototype.isFinite=function(e){this.assertNotComplex(e,"x");for(var n=e.dataSync(),r=new Uint8Array(n.length),o=0;o<n.length;++o)Number.isFinite(n[o])&&(r[o]=1);return We.make(e.shape,{values:r},"bool")},t.prototype.round=function(e){this.assertNotComplex(e,"round");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=Math.floor(n[o]);n[o]-a<.5?r[o]=Math.floor(n[o]):n[o]-a>.5?r[o]=Math.ceil(n[o]):r[o]=a%2==0?a:a+1}return We.make(e.shape,{values:r})},t.prototype.exp=function(e){this.assertNotComplex(e,"exp");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=Math.exp(n[o]);return We.make(e.shape,{values:r})},t.prototype.expm1=function(e){this.assertNotComplex(e,"expm1");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=Math.expm1(n[o]);return We.make(e.shape,{values:r})},t.prototype.log=function(e){this.assertNotComplex(e,"log");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=Math.log(a)}return We.make(e.shape,{values:r})},t.prototype.log1p=function(e){this.assertNotComplex(e,"log1p");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=Math.log1p(a)}return We.make(e.shape,{values:r})},t.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=Math.sqrt(a)}return We.make(e.shape,{values:r})},t.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=1/Math.sqrt(a)}return We.make(e.shape,{values:r})},t.prototype.square=function(e){this.assertNotComplex(e,"square");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o){var a=n[o];r[o]=a*a}return We.make(e.shape,{values:r})},t.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal");for(var n=e.dataSync(),r=new Float32Array(n.length),o=0;o<n.length;++o)r[o]=1/n[o];return We.make(e.shape,{values:r})},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){this.assertNotComplex(e,"relu");for(var n=$n(e.shape,e.dtype),r=n.dataSync(),o=e.dataSync(),a=0;a<o.length;++a)r[a]=Math.max(0,o[a]);return n},t.prototype.prelu=function(e,n){return this.assertNotComplex([e,n],"prelu"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return r<0?o*r:r})},t.prototype.elu=function(e){this.assertNotComplex(e,"elu");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o){var a=r[o];n[o]=a>=0?a:Math.exp(a)-1}return We.make(e.shape,{values:n})},t.prototype.eluDer=function(e,n){this.assertNotComplex([e,n],"eluDer");for(var r=new Float32Array(n.size),o=n.dataSync(),a=e.dataSync(),i=0;i<o.length;++i){var s=o[i];r[i]=s>=1?a[i]:a[i]*(s+1)}return We.make(n.shape,{values:r})},t.prototype.selu=function(e){this.assertNotComplex(e,"selu");for(var n=TE,r=AE,o=new Float32Array(e.size),a=e.dataSync(),i=0;i<a.length;++i){var s=a[i];o[i]=s>=0?r*s:n*(Math.exp(s)-1)}return We.make(e.shape,{values:o})},t.prototype.clip=function(e,n,r){this.assertNotComplex(e,"clip");for(var o=new Float32Array(e.size),a=e.dataSync(),i=0;i<a.length;++i){var s=a[i];o[i]=s>r?r:s<n?n:s}return We.make(e.shape,{values:o})},t.prototype.abs=function(e){for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.abs(r[o]);return We.make(e.shape,{values:n})},t.prototype.complexAbs=function(e){for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<e.size;++o){var a=r[2*o],i=r[2*o+1];n[o]=Math.hypot(a,i)}return We.make(e.shape,{values:n})},t.prototype.int=function(e){this.assertNotComplex(e,"int");for(var n=new Int32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=r[o];return We.make(e.shape,{values:n},"int32")},t.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=1/(1+Math.exp(-r[o]));return We.make(e.shape,{values:n})},t.prototype.softplus=function(e){this.assertNotComplex(e,"softplus");for(var n=Math.log(11920928955078125e-23)+2,r=new Float32Array(e.size),o=e.dataSync(),a=0;a<o.length;++a){var i=o[a]>-n,s=o[a]<n,u=Math.exp(o[a]),l=void 0;l=s?u:i?o[a]:Math.log(1+u),r[a]=l}return We.make(e.shape,{values:r})},t.prototype.sin=function(e){this.assertNotComplex(e,"sin");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.sin(r[o]);return We.make(e.shape,{values:n})},t.prototype.cos=function(e){this.assertNotComplex(e,"cos");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.cos(r[o]);return We.make(e.shape,{values:n})},t.prototype.tan=function(e){this.assertNotComplex(e,"tan");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.tan(r[o]);return We.make(e.shape,{values:n})},t.prototype.asin=function(e){this.assertNotComplex(e,"asin");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.asin(r[o]);return We.make(e.shape,{values:n})},t.prototype.acos=function(e){this.assertNotComplex(e,"acos");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.acos(r[o]);return We.make(e.shape,{values:n})},t.prototype.atan=function(e){this.assertNotComplex(e,"atan");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.atan(r[o]);return We.make(e.shape,{values:n})},t.prototype.atan2=function(e,n){return this.assertNotComplex([e,n],"atan2"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,o){return Math.atan2(r,o)})},t.prototype.sinh=function(e){this.assertNotComplex(e,"sinh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.sinh(r[o]);return We.make(e.shape,{values:n})},t.prototype.cosh=function(e){this.assertNotComplex(e,"cosh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.cosh(r[o]);return We.make(e.shape,{values:n})},t.prototype.tanh=function(e){this.assertNotComplex(e,"tanh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Hoe(r[o]);return We.make(e.shape,{values:n})},t.prototype.asinh=function(e){this.assertNotComplex(e,"asinh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.asinh(r[o]);return We.make(e.shape,{values:n})},t.prototype.acosh=function(e){this.assertNotComplex(e,"acosh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.acosh(r[o]);return We.make(e.shape,{values:n})},t.prototype.atanh=function(e){this.assertNotComplex(e,"atanh");for(var n=new Float32Array(e.size),r=e.dataSync(),o=0;o<r.length;++o)n[o]=Math.atanh(r[o]);return We.make(e.shape,{values:n})},t.prototype.erf=function(e){this.assertNotComplex(e,"erf");for(var n=new Float32Array(e.size),r=e.dataSync(),o=CB,a=EB,i=RB,s=_B,u=TB,l=AB,d=0;d<r.length;++d){var f=r[d],p=1/(1+o*f);n[d]=1-((((l*p+u)*p+s)*p+i)*p+a)*p*Math.exp(-f*f)}return We.make(e.shape,{values:n})},t.prototype.step=function(e,n){n===void 0&&(n=0),this.assertNotComplex(e,"step");for(var r=new Float32Array(e.size),o=e.dataSync(),a=0;a<o.length;++a){var i=o[a];isNaN(i)?r[a]=NaN:r[a]=i>0?1:n}return We.make(e.shape,{values:r})},t.prototype.conv2d=function(e,n,r){this.assertNotComplex([e,n],"conv2d");for(var o=r.filterHeight,a=r.filterWidth,i=r.dilationHeight,s=r.dilationWidth,u=r.padInfo.left,l=r.padInfo.top,d=Bt(r.outShape,e.dtype),f=e.dataSync(),p=n.dataSync(),m=d.values,g=0;g<r.batchSize;++g)for(var y=g*e.strides[0],b=g*d.strides[0],S=0;S<r.outHeight;++S)for(var C=b+S*d.strides[1],E=S*r.strideHeight-u,_=0;_<o;_++){var T=E+_*i;if(!(T<0||T>=r.inHeight))for(var D=_*n.strides[0],k=y+T*e.strides[1],I=0;I<r.outWidth;++I)for(var M=C+I*r.outChannels,O=I*r.strideWidth-l,F=0;F<a;F++){var j=O+F*s;if(!(j<0||j>=r.inWidth))for(var G=D+F*n.strides[1],W=k+j*r.inChannels,q=G,P=0;P<r.inChannels;++P){for(var z=f[W+P],U=0;U<r.outChannels;++U)m[M+U]+=z*p[q+U];q+=r.outChannels}}}return d.toTensor()},t.prototype.conv3d=function(e,n,r){for(var o=r.filterDepth,a=r.filterHeight,i=r.filterWidth,s=r.dilationDepth,u=r.dilationHeight,l=r.dilationWidth,d=r.padInfo.front,f=r.padInfo.left,p=r.padInfo.top,m=Bt(r.outShape,e.dtype),g=e.dataSync(),y=n.dataSync(),b=m.values,S=0;S<r.batchSize;++S)for(var C=S*e.strides[0],E=S*m.strides[0],_=0;_<r.outDepth;++_)for(var T=E+_*m.strides[1],D=_*r.strideDepth-d,k=0;k<o;k++){var I=D+k*s;if(!(I<0||I>=r.inDepth))for(var M=k*n.strides[0],O=C+I*e.strides[1],F=0;F<r.outHeight;++F)for(var j=T+F*m.strides[2],G=F*r.strideHeight-p,W=0;W<a;W++){var q=G+W*u;if(!(q<0||q>=r.inHeight))for(var P=M+W*n.strides[1],z=O+q*e.strides[2],U=0;U<r.outWidth;++U)for(var H=j+U*r.outChannels,L=U*r.strideWidth-f,$=0;$<i;$++){var J=L+$*l;if(!(J<0||J>=r.inWidth))for(var ne=P+$*n.strides[2],ce=z+J*r.inChannels,be=ne,se=0;se<r.inChannels;++se){for(var ie=g[ce+se],fe=0;fe<r.outChannels;++fe)b[H+fe]+=ie*y[be+fe];be+=r.outChannels}}}}return m.toTensor()},t.prototype.conv2dDerInput=function(e,n,r){this.assertNotComplex([e,n],"conv2dDerInput");for(var o=Bt(r.inShape,"float32"),a=o.values,i=o.strides,s=i[0],u=i[1],l=i[2],d=e.dataSync(),f=e.strides,p=f[0],m=f[1],g=f[2],y=n.dataSync(),b=n.strides,S=b[0],C=b[1],E=b[2],_=r.batchSize,T=r.filterHeight,D=r.filterWidth,k=r.inChannels,I=r.inHeight,M=r.inWidth,O=r.outChannels,F=r.outHeight,j=r.outWidth,G=r.strideHeight,W=r.strideWidth,q=T-1-r.padInfo.top,P=D-1-r.padInfo.left,z=0;z<_;++z)for(var U=0;U<k;++U)for(var H=0;H<I;++H)for(var L=H-q,$=Math.max(0,Math.ceil(L/G)),J=Math.min(F,(T+L)/G),ne=0;ne<M;++ne){for(var ce=ne-P,be=Math.max(0,Math.ceil(ce/W)),se=Math.min(j,(D+ce)/W),ie=0,fe=$;fe<J;++fe)for(var ge=fe*G-L,Oe=be;Oe<se;++Oe)for(var je=p*z+m*fe+g*Oe,Le=S*(T-1-ge)+C*(D-1-(Oe*W-ce))+E*U,ke=0;ke<O;++ke)ie+=d[je+ke]*y[Le+ke];a[s*z+u*H+l*ne+U]=ie}return o.toTensor()},t.prototype.conv3dDerInput=function(e,n,r){for(var o=Bt(r.inShape,"float32"),a=o.values,i=o.strides,s=i[0],u=i[1],l=i[2],d=i[3],f=e.dataSync(),p=e.strides,m=p[0],g=p[1],y=p[2],b=p[3],S=n.dataSync(),C=n.strides,E=C[0],_=C[1],T=C[2],D=C[3],k=r.batchSize,I=r.filterDepth,M=r.filterHeight,O=r.filterWidth,F=r.inChannels,j=r.inDepth,G=r.inHeight,W=r.inWidth,q=r.outChannels,P=r.outDepth,z=r.outHeight,U=r.outWidth,H=r.strideDepth,L=r.strideHeight,$=r.strideWidth,J=I-1-r.padInfo.front,ne=M-1-r.padInfo.top,ce=O-1-r.padInfo.left,be=0;be<k;++be)for(var se=0;se<F;++se)for(var ie=0;ie<j;++ie)for(var fe=ie-J,ge=Math.max(0,Math.ceil(fe/H)),Oe=Math.min(P,(I+fe)/H),je=0;je<G;++je)for(var Le=je-ne,ke=Math.max(0,Math.ceil(Le/L)),qe=Math.min(z,(M+Le)/L),nt=0;nt<W;++nt){for(var it=nt-ce,Ie=Math.max(0,Math.ceil(it/$)),Me=Math.min(U,(O+it)/$),Be=0,Je=ge;Je<Oe;++Je)for(var ct=Je*H-fe,st=ke;st<qe;++st)for(var $e=st*L-Le,Wt=Ie;Wt<Me;++Wt)for(var Fe=m*be+g*Je+y*st+b*Wt,Ve=E*(I-1-ct)+_*(M-1-$e)+T*(O-1-(Wt*$-it))+D*se,rt=0;rt<q;++rt)Be+=f[Fe+rt]*S[Ve+rt];a[s*be+u*ie+l*je+d*nt+se]=Be}return o.toTensor()},t.prototype.conv2dDerFilter=function(e,n,r){this.assertNotComplex([e,n],"conv2dDerFilter");for(var o=r.strideHeight,a=r.strideWidth,i=r.filterHeight,s=r.filterWidth,u=Bt(r.filterShape,"float32"),l=r.padInfo.left,d=r.padInfo.top,f=e.bufferSync(),p=n.bufferSync(),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((d-m)/o)),y=Math.min(r.outHeight,(r.inHeight+d-m)/o),b=0;b<s;++b)for(var S=Math.max(0,Math.ceil((l-b)/a)),C=Math.min(r.outWidth,(r.inWidth+l-b)/a),E=0;E<r.inChannels;++E)for(var _=0;_<r.outChannels;++_){for(var T=0,D=0;D<r.batchSize;++D)for(var k=g;k<y;++k)for(var I=m+k*o-d,M=S;M<C;++M){var O=b+M*a-l;T+=f.get(D,I,O,E)*p.get(D,k,M,_)}u.set(T,m,b,E,_)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,n,r){for(var o=r.strideDepth,a=r.strideHeight,i=r.strideWidth,s=r.filterDepth,u=r.filterHeight,l=r.filterWidth,d=Bt(r.filterShape,"float32"),f=d.values,p=d.strides,m=p[0],g=p[1],y=p[2],b=p[3],S=n.dataSync(),C=n.strides,E=C[0],_=C[1],T=C[2],D=C[3],k=e.dataSync(),I=e.strides,M=I[0],O=I[1],F=I[2],j=I[3],G=r.padInfo.front,W=r.padInfo.left,q=r.padInfo.top,P=0;P<s;++P)for(var z=Math.max(0,Math.ceil((G-P)/o)),U=Math.min(r.outDepth,(r.inDepth+G-P)/o),H=P*m,L=0;L<u;++L)for(var $=Math.max(0,Math.ceil((q-L)/a)),J=Math.min(r.outHeight,(r.inHeight+q-L)/a),ne=L*g+H,ce=0;ce<l;++ce)for(var be=Math.max(0,Math.ceil((W-ce)/i)),se=Math.min(r.outWidth,(r.inWidth+W-ce)/i),ie=ce*y+ne,fe=0;fe<r.inChannels;++fe)for(var ge=fe*b+ie,Oe=0;Oe<r.outChannels;++Oe){for(var je=0,Le=0;Le<r.batchSize;++Le)for(var ke=Le*M,qe=Le*E,nt=z;nt<U;++nt)for(var it=(P+nt*o-G)*O+ke,Ie=nt*_+qe,Me=$;Me<J;++Me)for(var Be=(L+Me*a-q)*F+it,Je=Me*T+Ie,ct=be;ct<se;++ct){var st=ct*D+Je;je+=k[(ce+ct*i-W)*j+Be+fe]*S[st+Oe]}f[ge+Oe]=je}return d.toTensor()},t.prototype.depthwiseConv2D=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2D");for(var o=r.filterHeight,a=r.filterWidth,i=r.dilationHeight,s=r.dilationWidth,u=r.padInfo.left,l=r.padInfo.top,d=r.outChannels/r.inChannels,f=Bt(r.outShape,e.dtype),p=e.dataSync(),m=n.dataSync(),g=f.values,y=0;y<r.batchSize;++y)for(var b=y*e.strides[0],S=y*f.strides[0],C=0;C<r.outHeight;++C)for(var E=S+C*f.strides[1],_=C*r.strideHeight-u,T=0;T<o;++T){var D=_+T*i;if(!(D<0||D>=r.inHeight))for(var k=T*n.strides[0],I=b+D*e.strides[1],M=0;M<r.outWidth;++M)for(var O=E+M*f.strides[2],F=M*r.strideWidth-l,j=0;j<a;++j){var G=F+j*s;if(!(G<0||G>=r.inWidth))for(var W=k+j*n.strides[1],q=I+G*r.inChannels,P=O,z=W,U=0;U<r.inChannels;++U){for(var H=p[q+U],L=0;L<d;++L)g[P+L]+=H*m[z+L];P+=d,z+=d}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2DDerInput");for(var o=Bt(r.inShape,"float32"),a=o.values,i=o.strides,s=i[0],u=i[1],l=i[2],d=e.dataSync(),f=e.strides,p=f[0],m=f[1],g=f[2],y=n.dataSync(),b=n.strides,S=b[0],C=b[1],E=b[2],_=r.batchSize,T=r.filterHeight,D=r.filterWidth,k=r.inChannels,I=r.inHeight,M=r.inWidth,O=r.outChannels,F=r.outHeight,j=r.outWidth,G=r.strideHeight,W=r.strideWidth,q=T-1-r.padInfo.top,P=D-1-r.padInfo.left,z=O/k,U=0;U<_;++U)for(var H=0;H<k;++H)for(var L=0;L<I;++L)for(var $=L-q,J=Math.max(0,Math.ceil($/G)),ne=Math.min(F,(T+$)/G),ce=0;ce<M;++ce){for(var be=ce-P,se=Math.max(0,Math.ceil(be/W)),ie=Math.min(j,(D+be)/W),fe=0,ge=J;ge<ne;++ge)for(var Oe=ge*G-$,je=se;je<ie;++je)for(var Le=p*U+m*ge+g*je,ke=S*(T-1-Oe)+C*(D-1-(je*W-be))+E*H,qe=0;qe<z;++qe)fe+=d[Le+(H*z+qe)]*y[ke+qe];a[s*U+u*L+l*ce+H]=fe}return o.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2DDerFilter");for(var o=r.strideHeight,a=r.strideWidth,i=r.filterHeight,s=r.filterWidth,u=Bt(r.filterShape,"float32"),l=r.padInfo.left,d=r.padInfo.top,f=r.outChannels/r.inChannels,p=e.bufferSync(),m=n.bufferSync(),g=0;g<i;++g)for(var y=Math.max(0,Math.ceil((d-g)/o)),b=Math.min(r.outHeight,(r.inHeight+d-g)/o),S=0;S<s;++S)for(var C=Math.max(0,Math.ceil((l-S)/a)),E=Math.min(r.outWidth,(r.inWidth+l-S)/a),_=0;_<r.outChannels;++_){for(var T=Math.trunc(_/f),D=_%f,k=0,I=0;I<r.batchSize;++I)for(var M=y;M<b;++M)for(var O=g+M*o-d,F=C;F<E;++F){var j=S+F*a-l;k+=p.get(I,O,j,T)*m.get(I,M,F,_)}u.set(k,g,S,T,D)}return u.toTensor()},t.prototype.tile=function(e,n){this.assertNotComplex(e,"tile");for(var r=new Array(e.rank),o=0;o<r.length;o++)r[o]=e.shape[o]*n[o];var a=Bt(r,e.dtype),i=e.bufferSync();for(o=0;o<a.values.length;++o){for(var s=a.indexToLoc(o),u=new Array(e.rank),l=0;l<u.length;l++)u[l]=s[l]%e.shape[l];var d=i.locToIndex(u);a.values[o]=i.values[d]}return a.toTensor()},t.prototype.pad=function(e,n,r){this.assertNotComplex(e,"pad");var o=n.map(function(f,p){return f[0]+e.shape[p]+f[1]}),a=n.map(function(f){return f[0]}),i=e.bufferSync(),s=Bt(o,e.dtype);r!==0&&s.values.fill(r);for(var u=0;u<e.size;u++){var l=i.indexToLoc(u),d=l.map(function(f,p){return f+a[p]});s.set.apply(s,[i.get.apply(i,l)].concat(d))}return s.toTensor()},t.prototype.transpose=function(e,n){this.assertNotComplex(e,"transpose");for(var r=new Array(e.rank),o=0;o<r.length;o++)r[o]=e.shape[n[o]];var a=e.dataSync(),i=Bt(r,e.dtype),s=e.bufferSync();for(o=0;o<e.size;++o){for(var u=s.indexToLoc(o),l=new Array(u.length),d=0;d<l.length;d++)l[d]=u[n[d]];var f=i.locToIndex(l);i.values[f]=a[o]}return i.toTensor()},t.prototype.gather=function(e,n,r){this.assertNotComplex([e,n],"gather");var o=e.shape.slice(),a=n.dataSync();o[r]=a.length;for(var i=Bt(o,e.dtype),s=e.bufferSync(),u=0;u<i.size;++u){var l=i.indexToLoc(u),d=l.slice();d[r]=a[l[r]];var f=s.locToIndex(d);i.values[u]=s.values[f]}return i.toTensor()},t.prototype.batchToSpaceND=function(e,n,r){this.assertNotComplex([e],"batchToSpaceND");var o=n.reduce(function(d,f){return d*f}),a=Qg(e.shape,n,o),i=Jg(a.length,n.length),s=Zg(e.shape,n,o),u=nB(r,n.length),l=rB(s,r,n.length);return e.reshape(a).transpose(i).reshape(s).slice(u,l)},t.prototype.spaceToBatchND=function(e,n,r){this.assertNotComplex([e],"spaceToBatchND");var o=n.reduce(function(f,p){return f*p}),a=[[0,0]];a.push.apply(a,r);for(var i=1+n.length;i<e.shape.length;++i)a.push([0,0]);var s=e.pad(a),u=Qg(s.shape,n,o,!1),l=Jg(u.length,n.length,!1),d=Zg(s.shape,n,o,!1);return s.reshape(u).transpose(l).reshape(d)},t.prototype.pool=function(e,n,r){this.assertNotComplex(e,"pool");for(var o=n.strideHeight,a=n.strideWidth,i=n.dilationHeight,s=n.dilationWidth,u=n.effectiveFilterHeight,l=n.effectiveFilterWidth,d=n.padInfo.top,f=n.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=e.dataSync(),g=Bt(n.outShape,e.dtype),y=g.values,b=n.outShape[1]*n.outShape[2]*n.outShape[3],S=n.outShape[2]*n.outShape[3],C=n.outShape[3],E=0;E<n.batchSize;++E)for(var _=E*b,T=E*e.strides[0],D=0;D<n.inChannels;++D)for(var k=0;k<n.outHeight;++k)for(var I=k*o-d,M=Math.max(0,I),O=Math.min(n.inHeight,u+I),F=_+k*S,j=0;j<n.outWidth;++j){for(var G=j*a-f,W=Math.max(0,G),q=Math.min(n.inWidth,l+G),P=p,z=0,U=0,H=M;H<O;H+=i){for(var L=T+H*e.strides[1],$=W;$<q;$+=s){var J=m[L+$*e.strides[2]+D];r==="max"&&J>P?P=J:r==="avg"&&(z+=J,U++)}if(isNaN(P))break}y[F+j*C+D]=r==="avg"?z/U:P}return g.toTensor()},t.prototype.maxPool=function(e,n){return this.pool(e,n,"max")},t.prototype.maxPoolPositions=function(e,n){for(var r=Bt(n.outShape,"int32"),o=n.strideHeight,a=n.strideWidth,i=n.dilationHeight,s=n.dilationWidth,u=n.effectiveFilterHeight,l=n.effectiveFilterWidth,d=n.padInfo.top,f=n.padInfo.left,p=e.bufferSync(),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.outHeight;++y){for(var b=y*o-d,S=b;S<0;)S+=i;for(var C=Math.min(n.inHeight,u+b),E=0;E<n.outWidth;++E){for(var _=E*a-f,T=_;T<0;)T+=s;for(var D=Math.min(n.inWidth,l+_),k=Number.NEGATIVE_INFINITY,I=-1,M=S;M<C;M+=i)for(var O=M-b,F=T;F<D;F+=s){var j=F-_,G=p.get(m,M,F,g);G>k&&(k=G,I=O*l+j)}r.set(I,m,y,E,g)}}return r.toTensor()},t.prototype.maxPoolBackprop=function(e,n,r,o){this.assertNotComplex([n,r],"maxPoolBackprop");for(var a=this.maxPoolPositions(n,o),i=o.strideHeight,s=o.strideWidth,u=o.dilationHeight,l=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,p=f-1-o.padInfo.left,m=d-1-o.padInfo.top,g=Bt(n.shape,"float32"),y=a.bufferSync(),b=e.bufferSync(),S=0;S<o.batchSize;++S)for(var C=0;C<o.inChannels;++C)for(var E=0;E<o.inHeight;++E)for(var _=0;_<o.inWidth;++_){for(var T=E-m,D=_-p,k=0,I=0;I<d;I+=u){var M=(T+I)/i;if(!(M<0||M>=o.outHeight||Math.floor(M)!==M))for(var O=0;O<f;O+=l){var F=(D+O)/s;if(!(F<0||F>=o.outWidth||Math.floor(F)!==F)){var j=d*f-1-y.get(S,M,F,C)===I*f+O?1:0;j!==0&&(k+=b.get(S,M,F,C)*j)}}}g.set(k,S,E,_,C)}return g.toTensor()},t.prototype.avgPoolBackprop=function(e,n,r){this.assertNotComplex([e,n],"avgPoolBackprop");for(var o=r.strideHeight,a=r.strideWidth,i=r.filterHeight,s=r.filterWidth,u=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=f-1-r.padInfo.left,m=d-1-r.padInfo.top,g=Bt(n.shape,"float32"),y=1/(i*s),b=e.bufferSync(),S=0;S<r.batchSize;++S)for(var C=0;C<r.inChannels;++C)for(var E=0;E<r.inHeight;++E)for(var _=0;_<r.inWidth;++_){for(var T=E-m,D=_-p,k=0,I=0;I<d;I+=u){var M=(T+I)/o;if(!(M<0||M>=r.outHeight||Math.floor(M)!==M))for(var O=0;O<f;O+=l){var F=(D+O)/a;F<0||F>=r.outWidth||Math.floor(F)!==F||(k+=b.get(S,M,F,C))}}g.set(k*y,S,E,_,C)}return g.toTensor()},t.prototype.cast=function(e,n){return fB(e,n,this)},t.prototype.reshape=function(e,n){return U2(e,n)},t.prototype.avgPool=function(e,n){return this.assertNotComplex(e,"avgPool"),this.pool(e,n,"avg").toFloat()},t.prototype.resizeBilinear=function(e,n,r,o){this.assertNotComplex(e,"resizeBilinear");for(var a=e.shape,i=a[0],s=a[1],u=a[2],l=a[3],d=e.dataSync(),f=new Float32Array(ft([i,n,r,l])),p=[o&&n>1?s-1:s,o&&r>1?u-1:u],m=[o&&n>1?n-1:n,o&&r>1?r-1:r],g=0,y=p[0]/m[0],b=p[1]/m[1],S=0;S<i;S++)for(var C=0;C<n;C++)for(var E=y*C,_=Math.floor(E),T=E-_,D=Math.min(s-1,Math.ceil(E)),k=S*e.strides[0]+_*e.strides[1],I=S*e.strides[0]+D*e.strides[1],M=0;M<r;M++)for(var O=b*M,F=Math.floor(O),j=O-F,G=Math.min(u-1,Math.ceil(O)),W=k+F*e.strides[2],q=I+F*e.strides[2],P=k+ +G*e.strides[2],z=I+G*e.strides[2],U=0;U<l;U++){var H=d[W+U],L=d[q+U],$=H+(d[P+U]-H)*j,J=$+(L+(d[z+U]-L)*j-$)*T;f[g++]=J}return Yn(f,[i,n,r,l])},t.prototype.resizeBilinearBackprop=function(e,n,r){this.assertNotComplex([e,n],"resizeBilinearBackprop");for(var o=n.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=e.shape,d=l[1],f=l[2],p=new Float32Array(a*i*s*u),m=[r&&d>1?i-1:i,r&&f>1?s-1:s],g=[r&&d>1?d-1:d,r&&f>1?f-1:f],y=m[0]/g[0],b=m[1]/g[1],S=e.dataSync(),C=0,E=0;E<a;E++)for(var _=E*n.strides[0],T=0;T<d;T++)for(var D=T*y,k=Math.floor(D),I=Math.min(Math.ceil(D),i-1),M=_+k*n.strides[1],O=_+I*n.strides[1],F=D-k,j=1-F,G=0;G<f;G++)for(var W=G*b,q=Math.floor(W),P=Math.min(Math.ceil(W),s-1),z=W-q,U=1-z,H=M+q*n.strides[2],L=M+P*n.strides[2],$=O+q*n.strides[2],J=O+P*n.strides[2],ne=j*U,ce=j*z,be=F*U,se=F*z,ie=0;ie<u;ie++){var fe=S[C++];p[H+ie]+=fe*ne,p[L+ie]+=fe*ce,p[$+ie]+=fe*be,p[J+ie]+=fe*se}return Ia(p,[a,s,i,u],n.dtype)},t.prototype.resizeNearestNeighbor=function(e,n,r,o){this.assertNotComplex(e,"resizeNearestNeighbor");for(var a=e.shape,i=a[0],s=a[1],u=a[2],l=a[3],d=e.dataSync(),f=new Float32Array(i*n*r*l),p=[o&&n>1?s-1:s,o&&r>1?u-1:u],m=[o&&n>1?n-1:n,o&&r>1?r-1:r],g=p[0]/m[0],y=p[1]/m[1],b=0,S=0;S<i;S++)for(var C=S*e.strides[0],E=0;E<n;E++)for(var _=g*E,T=C+Math.min(s-1,o?Math.round(_):Math.floor(_))*e.strides[1],D=0;D<r;D++)for(var k=y*D,I=T+Math.min(u-1,o?Math.round(k):Math.floor(k))*e.strides[2],M=0;M<l;M++){var O=d[I+M];f[b++]=O}return Yn(f,[i,n,r,l],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){this.assertNotComplex([e,n],"resizeNearestNeighborBackprop");for(var o=n.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=e.shape,d=l[1],f=l[2],p=new Float32Array(a*i*s*u),m=e.dataSync(),g=[r&&d>1?i-1:i,r&&f>1?s-1:s],y=[r&&d>1?d-1:d,r&&f>1?f-1:f],b=g[0]/y[0],S=g[1]/y[1],C=1/b,E=1/S,_=2*Math.ceil(C)+2,T=2*Math.ceil(E)+2,D=0;D<a;D++)for(var k=D*n.strides[0],I=0;I<i;I++)for(var M=k+I*n.strides[1],O=Math.floor(I*C),F=Math.floor(O-_/2),j=0;j<s;j++)for(var G=M+j*n.strides[2],W=Math.floor(j*E),q=Math.floor(W-T/2),P=0;P<u;P++){for(var z=0,U=0;U<_;U++){var H=U+F;if(!(H<0||H>=d)){var L=k+H*e.strides[1],$=H*b;if(I===Math.min(i-1,r?Math.round($):Math.floor($)))for(var J=0;J<T;J++){var ne=J+q;if(!(ne<0||ne>=f)){var ce=L+ne*e.strides[2],be=ne*S;j===Math.min(s-1,r?Math.round(be):Math.floor(be))&&(z+=m[ce+P])}}}}p[G+P]=z}return Ia(p,n.shape,n.dtype)},t.prototype.batchNormalization=function(e,n,r,o,a,i){this.assertNotComplex([e,n,r,a,i],"batchNorm");for(var s=e.dataSync(),u=n.dataSync(),l=r.dataSync(),d=a?a.dataSync():new Float32Array([1]),f=i?i.dataSync():new Float32Array([0]),p=new Float32Array(s.length),m=f.length,g=d.length,y=l.length,b=u.length,S=0,C=0,E=0,_=0,T=0;T<s.length;++T)p[T]=f[S++]+(s[T]-u[C++])*d[E++]/Math.sqrt(l[_++]+o),S>=m&&(S=0),C>=b&&(C=0),E>=g&&(E=0),_>=y&&(_=0);return Ia(p,e.shape)},t.prototype.localResponseNormalization4D=function(e,n,r,o,a){this.assertNotComplex(e,"localResponseNormalization4D");var i=e.shape[3],s=i-1,u=e.dataSync(),l=e.size,d=new Float32Array(l);function f(y){for(var b=y%i,S=y-b+Math.max(0,b-n),C=y-b+Math.min(b+n,s),E=0;S<=C;S++){var _=u[S];E+=_*_}return E}for(var p=0;p<l;p++){var m=f(p),g=u[p]*Math.pow(r+o*m,-a);d[p]=g}return Ia(d,e.shape)},t.prototype.LRNGrad=function(e,n,r,o,a,i,s){this.assertNotComplex(e,"LRNGrad");for(var u=e.shape[3],l=e.dataSync(),d=n.dataSync(),f=r.dataSync(),p=new Float32Array(e.size),m=e.size,g=0;g<m;g++){for(var y=g%u,b=g-y+Math.max(0,y-o),S=g-y+Math.min(u,y+o+1),C=0,E=b;E<S;E++)C+=Math.pow(d[E],2);for(C=i*C+a,E=b;E<S;E++){var _=-2*i*s*d[E]*f[g]/C;g===E&&(_+=Math.pow(C,-s)),_*=l[g],p[E]+=_}}return Ia(p,e.shape)},t.prototype.multinomial=function(e,n,r,o){this.assertNotComplex(e,"multinomial");for(var a=n?e:Wu(e),i=a.shape[0],s=a.shape[1],u=$n([i,r],"int32"),l=u.dataSync(),d=a.dataSync(),f=0;f<i;++f){var p=f*s,m=new Float32Array(s-1);m[0]=d[p];for(var g=1;g<m.length;++g)m[g]=m[g-1]+d[p+g];for(var y=kB(o.toString()),b=f*r,S=0;S<r;++S){var C=y();l[b+S]=m.length;for(var E=0;E<m.length;E++)if(C<m[E]){l[b+S]=E;break}}}return u},t.prototype.oneHot=function(e,n,r,o){this.assertNotComplex(e,"oneHot");var a=new Float32Array(e.size*n);a.fill(o);for(var i=e.dataSync(),s=0;s<e.size;++s)i[s]>=0&&i[s]<n&&(a[s*n+i[s]]=r);return M0(a,[e.size,n],"int32")},t.prototype.nonMaxSuppression=function(e,n,r,o,a){return this.assertNotComplex(e,"nonMaxSuppression"),EE(e.dataSync(),n.dataSync(),r,o,a)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,n){for(var r=e.shape[0],o=e.shape[1],a=Bt(e.shape,"float32"),i=Bt(e.shape,"float32"),s=mi(e).as2D(r,o),u=yu(e).as2D(r,o),l=0;l<r;l++)for(var d=s.slice([l,0],[1,o]),f=u.slice([l,0],[1,o]),p=Kr(d,f),m=this.fftImpl(p,n).dataSync(),g=0;g<o;g++){var y=gI(m,g);a.values[l*o+g]=y.real,i.values[l*o+g]=y.imag}return Kr(a.toTensor(),i.toTensor()).as2D(r,o)},t.prototype.fftImpl=function(e,n){var r=e.as1D(),o=r.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(r,o,n).as2D(e.shape[0],e.shape[1]);return n&&(a=Kr(mi(a).div(Pe(o)),yu(a).div(Pe(o)))),a}var i=e.dataSync(),s=Zae(this.fourierTransformByMatmul(i,o,n));return Kr(s.real,s.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return(e&e-1)==0},t.prototype.fftRadix2=function(e,n,r){if(n===1)return e;var o=e.dataSync(),a=n/2,i=eie(o),s=Kr(i.real,i.imag).as1D(),u=tie(o),l=Kr(u.real,u.imag).as1D();s=this.fftRadix2(s,a,r),l=this.fftRadix2(l,a,r);var d=rie(n,r),f=Kr(d.real,d.imag).mul(l),p=s.add(f),m=s.sub(f),g=mi(p).concat(mi(m)),y=yu(p).concat(yu(m));return Kr(g,y).as1D()},t.prototype.fourierTransformByMatmul=function(e,n,r){for(var o=new Float32Array(2*n),a=0;a<n;a++){for(var i=0,s=0,u=0;u<n;u++){var l=oie(a*u,n,r),d=gI(e,u);i+=d.real*l.real-d.imag*l.imag,s+=d.real*l.imag+d.imag*l.real}r&&(i/=n,s/=n),nie(o,i,s,a)}return o},t.prototype.depthToSpace=function(e,n,r){ee(r==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+r}),ee(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});for(var o=e.shape[0],a=e.shape[1],i=e.shape[2],s=e.shape[3],u=a*n,l=i*n,d=s/(n*n),f=e.dataSync(),p=new Float32Array(o*u*l*d),m=0,g=0;g<o;++g)for(var y=0;y<u;++y)for(var b=Math.floor(y/n),S=y%n,C=0;C<l;++C)for(var E=Math.floor(C/n),_=(S*n+C%n)*d,T=0;T<d;++T){var D=T+_+s*(E+i*(b+a*g));p[m++]=f[D]}return Ia(p,[o,u,l,d])},t.prototype.broadcastedBinaryOp=function(e,n,r,o){var a=Gt(e.shape,n.shape),i=Bt(a,r),s=e.dataSync(),u=n.dataSync(),l=fd(e.shape,a),d=fd(n.shape,a),f=i.values;if(l.length+d.length===0)for(var p=0;p<f.length;++p)f[p]=o(s[p%s.length],u[p%u.length]);else{var m=e.bufferSync(),g=n.bufferSync(),y=function(b){var S=i.indexToLoc(b),C=S.slice(-e.rank);l.forEach(function(D){return C[D]=0});var E=m.locToIndex(C),_=S.slice(-n.rank);d.forEach(function(D){return _[D]=0});var T=g.locToIndex(_);f[b]=o(s[E],u[T])};for(p=0;p<f.length;++p)y(p)}return i.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,n,r){var o=Gt(e.shape,n.shape),a=Bt(o,"float32"),i=Bt(o,"float32"),s=e.dataSync(),u=n.dataSync(),l=fd(e.shape,o),d=fd(n.shape,o),f=a.values,p=i.values;if(l.length+d.length===0)for(var m=0;m<f.length;m++){var g=m%s.length,y=m%u.length,b=r(s[2*g],s[2*g+1],u[2*y],u[2*y+1]);f[m]=b.real,p[m]=b.imag}else{var S=this.data.get(e.dataId).complexTensors.real.bufferSync(),C=this.data.get(n.dataId).complexTensors.real.bufferSync(),E=function(_){var T=a.indexToLoc(_),D=T.slice(-e.rank);l.forEach(function(F){return D[F]=0});var k=S.locToIndex(D),I=T.slice(-n.rank);d.forEach(function(F){return I[F]=0});var M=C.locToIndex(I),O=r(s[2*k],s[2*k+1],u[2*M],u[2*M+1]);f[_]=O.real,p[_]=O.imag};for(m=0;m<f.length;m++)E(m)}return this.complex(a.toTensor(),i.toTensor())},t.prototype.split=function(e,n,r){return pB(e,n,r)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.cropAndResize=function(e,n,r,o,a,i){for(var s=e.shape,u=s[0],l=s[1],d=s[2],f=s[3],p=n.shape[0],m=o[0],g=o[1],y=Bt([p,m,g,f],e.dtype),b=n.dataSync(),S=r.dataSync(),C=e.dataSync(),E=e.strides,_=y.strides,T=0;T<p;T++){var D=4*T,k=b[D],I=b[D+1],M=b[D+2],O=b[D+3],F=S[T];if(!(F>=u))for(var j=m>1?(M-k)*(l-1)/(m-1):0,G=g>1?(O-I)*(d-1)/(g-1):0,W=0;W<m;W++){var q=m>1?k*(l-1)+W*j:.5*(k+M)*(l-1);if(q<0||q>l-1)for(var P=0;P<g;P++)for(var z=0;z<f;z++){var U=z+P*_[2]+W*_[1]+T*_[0];y.values[U]=i}else if(a==="bilinear"){var H=Math.floor(q),L=Math.ceil(q),$=q-H;for(P=0;P<g;P++)if((Oe=g>1?I*(d-1)+P*G:.5*(I+O)*(d-1))<0||Oe>d-1)for(z=0;z<f;z++)U=z+P*_[2]+W*_[1]+T*_[0],y.values[U]=i;else{var J=Math.floor(Oe),ne=Math.ceil(Oe),ce=Oe-J;for(z=0;z<f;z++){var be=C[U=z+J*E[2]+H*E[1]+F*E[0]],se=C[U=z+ne*E[2]+H*E[1]+F*E[0]],ie=C[U=z+J*E[2]+L*E[1]+F*E[0]],fe=be+(se-be)*ce,ge=ie+(C[U=z+ne*E[2]+L*E[1]+F*E[0]]-ie)*ce;U=z+P*_[2]+W*_[1]+T*_[0],y.values[U]=fe+(ge-fe)*$}}}else for(P=0;P<g;++P){var Oe;if((Oe=g>1?I*(d-1)+P*G:.5*(I+O)*(d-1))<0||Oe>d-1)for(z=0;z<f;z++)U=z+P*_[2]+W*_[1]+T*_[0],y.values[U]=i;else{var je=Math.round(Oe),Le=Math.round(q);for(z=0;z<f;z++){var ke=z+je*E[2]+Le*E[1]+F*E[0],qe=z+P*_[2]+W*_[1]+T*_[0];y.values[qe]=C[ke]}}}}}return y.toTensor()},t.prototype.sparseToDense=function(e,n,r,o){var a=ey(n,e,r),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,d=a.outputSize;return this.scatter(e,n,r,d,u,s,i,l,o,!1)},t.prototype.gatherND=function(e,n){var r=n.shape,o=r[r.length-1],a=aB(e,n),i=a[0],s=a[1],u=a[2],l=a[3];if(s===0)return Yn([],i,e.dtype);for(var d=new mp([s,u],e.dtype),f=n.dataSync(),p=e.dataSync(),m=0;m<s;m++){for(var g=[],y=0,b=0;b<o;b++){var S=f[m*o+b];y+=S*l[b],g.push(S)}if(y<0||y>=e.size/u)throw new Error("Invalid indices: "+g+" does not index into "+e.shape);for(var C=0;C<u;C++)d.values[m*u+C]=p[y*u+C]}return d.toTensor().reshape(i)},t.prototype.scatterND=function(e,n,r){var o=ey(n,e,r),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize,d=Pe(0);return this.scatter(e,n,r,l,s,i,a,u,d,!0)},t.prototype.fill=function(e,n,r){var o=Xg(r=r||Wp(n),ft(e));return o.fill(n),We.make(e,{values:o},r)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var n=Xg(e.dtype,ft(e.shape));return We.make(e.shape,{values:n},e.dtype)},t.prototype.scatter=function(e,n,r,o,a,i,s,u,l,d){var f=[o/a,a],p=e.dataSync(),m=n.dataSync();if(o===0)return Yn([],r,n.dtype);var g=new mp(f,n.dtype);g.values.fill(l.dataSync()[0]);for(var y=0;y<i;y++){for(var b=[],S=0,C=0;C<s;C++){var E=p[y*s+C];b.push(E),S+=E*u[C]}if(S<0||S>=o/a)throw new Error("Invalid indices: "+b+" does not index into "+r);for(var _=0;_<a;_++)d?g.values[S*a+_]+=m[y*a+_]:g.values[S*a+_]=n.rank===0?m[0]:m[y*a+_]}return g.toTensor().reshape(r)},t})();Q.registerBackend("cpu",function(){return new Vve},1);var LE=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function zI(t){return LE?Buffer.byteLength(t):new Blob([t]).size}function Hve(t){return LE?Buffer.from(t).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(t)))}function Gve(t){if(LE){var e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}function $ve(t){var e=0;t.forEach(function(o){e+=o.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(o){n.set(new Uint8Array(o),r),r+=o.byteLength}),n.buffer}function F0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:zI(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:zI(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Ul=(function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(a){var i=a(e,r);i!==null&&o.push(i)}),o},t})(),UI="://",fL=(function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){ee(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(UI)&&(e=e.slice(0,e.indexOf(UI))),ee(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();ee(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t})(),$2="tensorflowjs",q2=1,_l="models_store",bu="model_info_store";function hL(){if(!Q.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function X2(t){var e=t.result;e.createObjectStore(_l,{keyPath:"modelPath"}),e.createObjectStore(bu,{keyPath:"modelPath"})}var Vd=(function(){function t(e){if(this.indexedDB=hL(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return pn(this,void 0,void 0,function(){return mn(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return pn(this,void 0,void 0,function(){return mn(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(o,a){var i=r.indexedDB.open($2,q2);i.onupgradeneeded=function(){return X2(i)},i.onsuccess=function(){var s=i.result;if(n==null){var u=s.transaction(_l,"readonly"),l=u.objectStore(_l).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(y){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var d,f=F0(n),p=s.transaction(bu,"readwrite"),m=p.objectStore(bu),g=m.put({modelPath:r.modelPath,modelArtifactsInfo:f});g.onsuccess=function(){var y=(d=s.transaction(_l,"readwrite")).objectStore(_l).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});y.onsuccess=function(){return o({modelArtifactsInfo:f})},y.onerror=function(b){var S=(m=p.objectStore(bu)).delete(r.modelPath);S.onsuccess=function(){return s.close(),a(y.error)},S.onerror=function(C){return s.close(),a(y.error)}}},g.onerror=function(y){return s.close(),a(g.error)},p.oncomplete=function(){d==null?s.close():d.oncomplete=function(){return s.close()}}}},i.onerror=function(s){return a(i.error)}})},t.URL_SCHEME="indexeddb://",t})(),WI=function(t){return Q.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Vd.URL_SCHEME)?qve(t.slice(Vd.URL_SCHEME.length)):null};function qve(t){return new Vd(t)}function Xve(t){return t.startsWith(Vd.URL_SCHEME)?t.slice(Vd.URL_SCHEME.length):t}Ul.registerSaveRouter(WI),Ul.registerLoadRouter(WI);var Kve=(function(){function t(){this.indexedDB=hL()}return t.prototype.listModels=function(){return pn(this,void 0,void 0,function(){var e=this;return mn(this,function(n){return[2,new Promise(function(r,o){var a=e.indexedDB.open($2,q2);a.onupgradeneeded=function(){return X2(a)},a.onsuccess=function(){var i=a.result,s=i.transaction(bu,"readonly"),u=s.objectStore(bu).getAll();u.onsuccess=function(){for(var l={},d=0,f=u.result;d<f.length;d++){var p=f[d];l[p.modelPath]=p.modelArtifactsInfo}r(l)},u.onerror=function(l){return i.close(),o(u.error)},s.oncomplete=function(){return i.close()}},a.onerror=function(i){return o(a.error)}})]})})},t.prototype.removeModel=function(e){return pn(this,void 0,void 0,function(){var n=this;return mn(this,function(r){return e=Xve(e),[2,new Promise(function(o,a){var i=n.indexedDB.open($2,q2);i.onupgradeneeded=function(){return X2(i)},i.onsuccess=function(){var s,u=i.result,l=u.transaction(bu,"readwrite"),d=l.objectStore(bu),f=d.get(e);f.onsuccess=function(){if(f.result==null)return u.close(),a(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var p=d.delete(e),m=function(){var g=(s=u.transaction(_l,"readwrite")).objectStore(_l).delete(e);g.onsuccess=function(){return o(f.result.modelArtifactsInfo)},g.onerror=function(y){return a(f.error)}};p.onsuccess=m,p.onerror=function(g){return m(),u.close(),a(f.error)}},f.onerror=function(p){return u.close(),a(f.error)},l.oncomplete=function(){s==null?u.close():s.oncomplete=function(){return u.close()}}},i.onerror=function(s){return a(i.error)}})]})})},t})();if(Q.get("IS_BROWSER"))try{fL.registerManager(Vd.URL_SCHEME,new Kve)}catch{}var us="/",od="tensorflowjs_models",pL="info",Yve="model_topology",Qve="weight_specs",Jve="weight_data",Zve="model_metadata";function mL(t){return{info:[od,t,pL].join(us),topology:[od,t,Yve].join(us),weightSpecs:[od,t,Qve].join(us),weightData:[od,t,Jve].join(us),modelMetadata:[od,t,Zve].join(us)}}function ege(t){var e=t.split(us);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(us)}function tge(t){return t.startsWith(Hd.URL_SCHEME)?t.slice(Hd.URL_SCHEME.length):t}var Hd=(function(){function t(e){if(!Q.get("IS_BROWSER")||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=mL(this.modelPath)}return t.prototype.save=function(e){return pn(this,void 0,void 0,function(){var n,r,o;return mn(this,function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=F0(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Hve(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return pn(this,void 0,void 0,function(){var e,n,r,o,a,i,s;return mn(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(a),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=Gve(s),[2,n]})})},t.URL_SCHEME="localstorage://",t})(),VI=function(t){return Q.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Hd.URL_SCHEME)?nge(t.slice(Hd.URL_SCHEME.length)):null};function nge(t){return new Hd(t)}Ul.registerSaveRouter(VI),Ul.registerLoadRouter(VI);var rge=(function(){function t(){ee(Q.get("IS_BROWSER"),function(){return"Current environment is not a web browser"}),ee(window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return pn(this,void 0,void 0,function(){var e,n,r,o,a,i;return mn(this,function(s){for(e={},n=od+us,r=us+pL,o=0;o<this.LS.length;++o)(a=this.LS.key(o)).startsWith(n)&&a.endsWith(r)&&(i=ege(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]})})},t.prototype.removeModel=function(e){return pn(this,void 0,void 0,function(){var n,r;return mn(this,function(o){if(e=tge(e),n=mL(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t})();if(Q.get("IS_BROWSER"))try{fL.registerManager(Hd.URL_SCHEME,new rge)}catch{}var oge="model",age=".json",ige=".weights.bin",K2=(function(){function t(e){if(!Q.get("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=oge),this.modelTopologyFileName=e+age,this.weightDataFileName=e+ige}return t.prototype.save=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s;return mn(this,function(u){if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,i.click(),e.weightData!=null&&((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,s.click()),[2,{modelArtifactsInfo:F0(e)}]})})},t.URL_SCHEME="downloads://",t})(),sge=function(t){return Q.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(K2.URL_SCHEME)?uge(t.slice(K2.URL_SCHEME.length)):null};function uge(t){return t===void 0&&(t="model"),new K2(t)}function HI(t,e,n,r){(function(a){ee(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(t),(function(a,i){ee(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),ee(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i}),ee(i>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+i})})(n=n??0,r=r??1);var o=0;return Promise.all(t.map(function(a){return a.then(function(i){var s=n+ ++o/t.length*(r-n);return e(s),i}),a}))}function lge(t,e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d;return mn(this,function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?fetch:e.fetchFunc,r=t.map(function(p){return n(p,e.requestInit)}),o=0,a=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=f.sent(),[3,4];case 2:return[4,HI(r,e.onProgress,o,a)];case 3:i=f.sent(),f.label=4;case 4:return s=i.map(function(p){return p.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return d=f.sent(),[3,8];case 6:return[4,HI(s,e.onProgress,u,l)];case 7:d=f.sent(),f.label=8;case 8:return[2,d]}})})}Ul.registerSaveRouter(sge);var cge="application/octet-stream",dge="application/json",vL=(function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc==null){var r=Q.global.fetch;if(r===void 0)throw new Error("browserHTTPRequest is not supported outside the web browser without a fetch polyfill.");n.fetchFunc=r.bind(Q.global)}else ee(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"});if(this.fetchFunc=function(o,a){return n.fetchFunc(o,a).catch(function(i){throw new Error("Request for "+o+" failed due to error: "+i)})},ee(e!=null&&e.length>0,function(){return"URL path for browserHTTPRequest must not be null, undefined or empty."}),Array.isArray(e)&&ee(e.length===2,function(){return"URL paths for browserHTTPRequest must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a;return mn(this,function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:dge}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:cge}),"model.weights.bin"),[4,this.getFetchFunc()(this.path,n)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:F0(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},t.prototype.load=function(){return pn(this,void 0,void 0,function(){var e,n,r,o,a,i,s,u;return mn(this,function(l){switch(l.label){case 0:return[4,this.getFetchFunc()(this.path,this.requestInit)];case 1:if(!(e=l.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");l.label=2;case 2:return l.trys.push([2,4,,5]),[4,e.json()];case 3:return n=l.sent(),[3,5];case 4:throw l.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,a=n.weightsManifest,o==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:u=l.sent(),i=u[0],s=u[1],l.label=7;case 7:return[2,{modelTopology:o,weightSpecs:i,weightData:s}]}})})},t.prototype.loadWeights=function(e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f,p;return mn(this,function(m){switch(m.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=fge(n),o=r[0],a=r[1],i=this.weightPathPrefix||o,s=[],u=0,l=e;u<l.length;u++)d=l[u],s.push.apply(s,d.weights);return f=[],e.forEach(function(g){g.paths.forEach(function(y){f.push(i+y+a)})}),[4,lge(f,{requestInit:this.requestInit,fetchFunc:this.getFetchFunc(),onProgress:this.onProgress})];case 1:return p=m.sent(),[2,[s,$ve(p)]]}})})},t.prototype.getFetchFunc=function(){return this.fetchFunc},t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function fge(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}function GI(t){return t.match(vL.URL_SCHEME_REGEX)!=null}var $I=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return GI(n)}):GI(t))?hge(t,{onProgress:e}):null};function hge(t,e){return new vL(t,e)}Ul.registerSaveRouter($I),Ul.registerLoadRouter($I);function pge(t,e,n){var r=Y(t,"labels","confusionMatrix"),o=Y(e,"predictions","confusionMatrix");ee(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),ee(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),ee(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),ee(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),ee(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=V2(r.asType("int32"),n),i=V2(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}ae({confusionMatrix_:pge});function mge(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return Q.engine.fromPixels(t,e)}function vge(t,e){return pn(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f,p,m,g,y,b,S,C,E,_,T;return mn(this,function(D){switch(D.label){case 0:if(n=Y(t,"img","toPixels"),t instanceof We||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(i=n.rank===2?1:n.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return s=n.min(),u=n.max(),[4,s.data()];case 1:return l=D.sent()[0],[4,u.data()];case 2:if(d=D.sent()[0],s.dispose(),u.dispose(),n.dtype==="float32"){if(l<0||d>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+l+" - "+d+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(l<0||d>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+l+" - "+d+"].")}return[4,n.data()];case 3:for(f=D.sent(),p=n.dtype==="float32"?255:1,m=new Uint8ClampedArray(a*o*4),g=0;g<o*a;++g)y=void 0,b=void 0,S=void 0,C=void 0,i===1?(y=f[g]*p,b=f[g]*p,S=f[g]*p,C=255):i===3?(y=f[3*g]*p,b=f[3*g+1]*p,S=f[3*g+2]*p,C=255):i===4&&(y=f[4*g]*p,b=f[4*g+1]*p,S=f[4*g+2]*p,C=f[4*g+3]*p),m[(E=4*g)+0]=Math.round(y),m[E+1]=Math.round(b),m[E+2]=Math.round(S),m[E+3]=Math.round(C);return e!=null&&(e.width=a,e.height=o,_=e.getContext("2d"),T=new ImageData(m,a,o),_.putImageData(T,0,0)),n!==t&&n.dispose(),[2,m]}})})}var gge=ae({fromPixels_:mge}),yge=Object.freeze({toPixels:vge,fromPixels:gge}),bge=(function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t})(),xge=(function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t})();function ec(t){ee(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),ee(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),ee(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),xge.register(t)}var tc=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Ts(e,t),e.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var a=this.computeGradients(n,o),i=a.value,s=a.grads;return this.applyGradients(s),Object.keys(s).forEach(function(u){return s[u].dispose()}),r?i:(i.dispose(),null)},e.prototype.computeGradients=function(n,r){return Dae(n,r)},e.prototype.dispose=function(){},e})(bge);Object.defineProperty(tc,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var wge=(function(t){function e(n,r,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=n,a.rho=r,a.epsilon=o,a.accumulatedGrads={},a.accumulatedUpdates={},a.c=Sn(Pe(-n)),a.rhoScalar=Sn(Pe(r)),a.oneMinusRho=Sn(Pe(1-r)),o===null&&(o=Q.get("EPSILON")),a.epsilonScalar=Sn(Pe(o)),a}return Ts(e,t),e.prototype.applyGradients=function(n){var r=this,o=function(s){var u=Q.engine.registeredVariables[s];a.accumulatedGrads[s]==null&&lt(function(){r.accumulatedGrads[s]=nn(u).variable(!1)}),a.accumulatedUpdates[s]==null&&lt(function(){r.accumulatedUpdates[s]=nn(u).variable(!1)});var l=n[s],d=a.accumulatedGrads[s],f=a.accumulatedUpdates[s];lt(function(){var p=r.rhoScalar.mul(d).add(r.oneMinusRho.mul(l.square())),m=f.add(r.epsilonScalar).sqrt().div(d.add(r.epsilonScalar).sqrt()).mul(l),g=r.rhoScalar.mul(f).add(r.oneMinusRho.mul(m.square()));r.accumulatedGrads[s].assign(p),r.accumulatedUpdates[s].assign(g);var y=r.c.mul(m).add(u);u.assign(y)})},a=this;for(var i in n)o(i)},e.prototype.dispose=function(){var n=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),this.accumulatedUpdates!=null&&(Object.keys(this.accumulatedUpdates).forEach(function(r){return n.accumulatedUpdates[r].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(r){return n.accumulatedGrads[r].dispose()}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="AdadeltaOptimizer",e})(tc);ec(wge);var Sge=(function(t){function e(n,r){r===void 0&&(r=.1);var o=t.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads={},o.c=Sn(Pe(-n)),o.epsilon=Sn(Pe(Q.get("EPSILON"))),o}return Ts(e,t),e.prototype.applyGradients=function(n){var r=this,o=function(s){var u=Q.engine.registeredVariables[s];a.accumulatedGrads[s]==null&&lt(function(){r.accumulatedGrads[s]=Gh(u.shape,r.initialAccumulatorValue).variable(!1)});var l=n[s],d=a.accumulatedGrads[s];lt(function(){var f=d.add(l.square());r.accumulatedGrads[s].assign(f);var p=r.c.mul(l.div(f.add(r.epsilon).sqrt())).add(u);u.assign(p)})},a=this;for(var i in n)o(i)},e.prototype.dispose=function(){var n=this;this.epsilon.dispose(),this.c.dispose(),this.accumulatedGrads!=null&&Object.keys(this.accumulatedGrads).forEach(function(r){return n.accumulatedGrads[r].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="AdagradOptimizer",e})(tc);ec(Sge);var Cge=(function(t){function e(n,r,o,a){a===void 0&&(a=null);var i=t.call(this)||this;return i.learningRate=n,i.beta1=r,i.beta2=o,i.epsilon=a,i.accumulatedFirstMoment={},i.accumulatedSecondMoment={},i.c=Sn(Pe(-n)),i.beta1Scalar=Sn(Pe(r)),i.beta2Scalar=Sn(Pe(o)),lt(function(){i.accBeta1=Pe(r).variable(),i.accBeta2=Pe(o).variable()}),i.oneMinusBeta1=Sn(Pe(1-r)),i.oneMinusBeta2=Sn(Pe(1-o)),i.one=Sn(Pe(1)),a===null&&(a=Q.get("EPSILON")),i.epsScalar=Sn(Pe(a)),i}return Ts(e,t),e.prototype.applyGradients=function(n){var r=this;lt(function(){var o=r.one.sub(r.accBeta1),a=r.one.sub(r.accBeta2);for(var i in n){var s=Q.engine.registeredVariables[i];if(r.accumulatedFirstMoment[i]==null){var u=!1;r.accumulatedFirstMoment[i]=nn(s).variable(u)}r.accumulatedSecondMoment[i]==null&&(u=!1,r.accumulatedSecondMoment[i]=nn(s).variable(u));var l=n[i],d=r.accumulatedFirstMoment[i],f=r.accumulatedSecondMoment[i],p=r.beta1Scalar.mul(d).add(r.oneMinusBeta1.mul(l)),m=r.beta2Scalar.mul(f).add(r.oneMinusBeta2.mul(l.square())),g=p.div(o),y=m.div(a);r.accumulatedFirstMoment[i].assign(p),r.accumulatedSecondMoment[i].assign(m);var b=r.c.mul(g.div(r.epsScalar.add(y.sqrt()))).add(s);s.assign(b)}r.accBeta1.assign(r.accBeta1.mul(r.beta1Scalar)),r.accBeta2.assign(r.accBeta2.mul(r.beta2Scalar))})},e.prototype.dispose=function(){var n=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),this.accumulatedFirstMoment!=null&&Object.keys(this.accumulatedFirstMoment).forEach(function(r){return n.accumulatedFirstMoment[r].dispose()}),this.accumulatedSecondMoment!=null&&Object.keys(this.accumulatedSecondMoment).forEach(function(r){return n.accumulatedSecondMoment[r].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="AdamOptimizer",e})(tc);ec(Cge);var Ege=(function(t){function e(n,r,o,a,i){a===void 0&&(a=null),i===void 0&&(i=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=a,s.decay=i,s.accumulatedFirstMoment={},s.accumulatedWeightedInfNorm={},s.c=Sn(Pe(-n)),s.beta1Scalar=Sn(Pe(r)),s.beta2Scalar=Sn(Pe(o)),s.decayScalar=Sn(Pe(i)),lt(function(){s.iteration=Pe(0).variable(),s.accBeta1=Pe(r).variable()}),s.oneMinusBeta1=Sn(Pe(1-r)),s.one=Sn(Pe(1)),a===null&&(a=Q.get("EPSILON")),s.epsScalar=Sn(Pe(a)),s}return Ts(e,t),e.prototype.applyGradients=function(n){var r=this;lt(function(){var o=r.one.sub(r.accBeta1),a=r.c.div(r.one.add(r.decayScalar.mul(r.iteration)));for(var i in n){var s=Q.engine.registeredVariables[i];if(r.accumulatedFirstMoment[i]==null){var u=!1;r.accumulatedFirstMoment[i]=nn(s).variable(u)}r.accumulatedWeightedInfNorm[i]==null&&(u=!1,r.accumulatedWeightedInfNorm[i]=nn(s).variable(u));var l=n[i],d=r.accumulatedFirstMoment[i],f=r.accumulatedWeightedInfNorm[i],p=r.beta1Scalar.mul(d).add(r.oneMinusBeta1.mul(l)),m=r.beta2Scalar.mul(f),g=l.abs(),y=m.maximum(g);r.accumulatedFirstMoment[i].assign(p),r.accumulatedWeightedInfNorm[i].assign(y);var b=a.div(o).mul(p.div(r.epsScalar.add(y))).add(s);s.assign(b)}r.iteration.assign(r.iteration.add(r.one)),r.accBeta1.assign(r.accBeta1.mul(r.beta1Scalar))})},e.prototype.dispose=function(){var n=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),this.accumulatedFirstMoment!=null&&Object.keys(this.accumulatedFirstMoment).forEach(function(r){return n.accumulatedFirstMoment[r].dispose()}),this.accumulatedWeightedInfNorm!=null&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(r){return n.accumulatedWeightedInfNorm[r].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="AdamaxOptimizer",e})(tc);ec(Ege);var gL=(function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Ts(e,t),e.prototype.applyGradients=function(n){var r=this;Object.keys(n).forEach(function(o){var a=n[o],i=Q.engine.registeredVariables[o];lt(function(){var s=r.c.mul(a).add(i);i.assign(s)})})},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=Sn(Pe(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGDOptimizer",e})(tc);ec(gL);var Rge=(function(t){function e(n,r,o){o===void 0&&(o=!1);var a=t.call(this,n)||this;return a.learningRate=n,a.momentum=r,a.useNesterov=o,a.m=Pe(a.momentum),a.accumulations={},a}return Ts(e,t),e.prototype.applyGradients=function(n){var r=this,o=function(s){var u=Q.engine.registeredVariables[s];a.accumulations[s]==null&&lt(function(){r.accumulations[s]=nn(u).variable(!1)});var l=a.accumulations[s],d=n[s];lt(function(){var f,p=r.m.mul(l).add(d);f=r.useNesterov?r.c.mul(d.add(p.mul(r.m))).add(u):r.c.mul(p).add(u),r.accumulations[s].assign(p),u.assign(f)})},a=this;for(var i in n)o(i)},e.prototype.dispose=function(){if(t.prototype.dispose.call(this),this.m.dispose(),this.accumulations!=null)for(var n in this.accumulations)this.accumulations[n].dispose()},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="MomentumOptimizer",e})(gL);ec(Rge);var _ge=(function(t){function e(n,r,o,a,i){r===void 0&&(r=.9),o===void 0&&(o=0),a===void 0&&(a=null),i===void 0&&(i=!1);var s=t.call(this)||this;return s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=a,s.accumulatedMeanSquares={},s.accumulatedMeanGrads={},s.accumulatedMoments={},s.c=Sn(Pe(n)),s.decayScalar=Sn(Pe(r)),s.momentumScalar=Sn(Pe(o)),s.oneMinusDecay=Sn(Pe(1-r)),s.centered=i,a===null&&(a=Q.get("EPSILON")),s.epsilonScalar=Sn(Pe(a)),s}return Ts(e,t),e.prototype.applyGradients=function(n){var r=this,o=function(s){var u=Q.engine.registeredVariables[s];a.accumulatedMeanSquares[s]==null&&lt(function(){r.accumulatedMeanSquares[s]=nn(u).variable(!1)}),a.accumulatedMeanGrads[s]==null&&a.centered&&lt(function(){r.accumulatedMeanGrads[s]=nn(u).variable(!1)}),a.accumulatedMoments[s]==null&&lt(function(){r.accumulatedMoments[s]=nn(u).variable(!1)});var l=a.accumulatedMeanSquares[s],d=a.accumulatedMeanGrads[s],f=a.accumulatedMoments[s],p=n[s];lt(function(){var m=r.decayScalar.mul(l).add(r.oneMinusDecay.mul(p.square()));if(r.centered){var g=r.decayScalar.mul(d).add(r.oneMinusDecay.mul(p)),y=r.momentumScalar.mul(f).add(r.c.mul(p).div(m.sub(g.square().add(r.epsilonScalar)).sqrt()));r.accumulatedMeanSquares[s].assign(m),r.accumulatedMeanGrads[s].assign(g),r.accumulatedMoments[s].assign(y);var b=u.sub(y);u.assign(b)}else{var S=r.decayScalar.mul(l).add(r.oneMinusDecay.mul(p.square()));y=r.momentumScalar.mul(f).add(r.c.mul(p).div(S.add(r.epsilonScalar).sqrt())),r.accumulatedMeanSquares[s].assign(S),r.accumulatedMoments[s].assign(y),b=u.sub(y),u.assign(b)}})},a=this;for(var i in n)o(i)},e.prototype.dispose=function(){var n=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),this.accumulatedMeanSquares!=null&&Object.keys(this.accumulatedMeanSquares).forEach(function(r){return n.accumulatedMeanSquares[r].dispose()}),this.accumulatedMeanGrads!=null&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(r){return n.accumulatedMeanGrads[r].dispose()}),this.accumulatedMoments!=null&&Object.keys(this.accumulatedMoments).forEach(function(r){return n.accumulatedMoments[r].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSPropOptimizer",e})(tc);ec(_ge);ki.setBackend;ki.getBackend;ki.disposeVariables;ki.memory;oae(Uve);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y2=function(t,e){return Y2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},Y2(t,e)};function nm(t,e){Y2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ay=function(){return ay=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ay.apply(this,arguments)};function ha(t,e,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function s(d){try{l(r.next(d))}catch(f){i(f)}}function u(d){try{l(r.throw(d))}catch(f){i(f)}}function l(d){d.done?a(d.value):o(d.value).then(s,u)}l((r=r.apply(t,[])).next())})}function pa(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(d){return u([l,d])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=l[0]&2?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(d){l=[6,d],o=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function mw(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var a=arguments[e],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var yL=function(t,e){return(yL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(t,e)};function Ka(t,e){function n(){this.constructor=t}yL(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Ye(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(l){try{u(r.next(l))}catch(d){a(d)}}function s(l){try{u(r.throw(l))}catch(d){a(d)}}function u(l){l.done?o(l.value):new n((function(d){d(l.value)})).then(i,s)}u((r=r.apply(t,[])).next())}))}function Qe(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return(function(d){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&d[0]?r.return:d[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,d[1])).done)return o;switch(r=0,o&&(d=[2&d[0],o.value]),d[0]){case 0:case 1:o=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,r=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){i=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){i.label=d[1];break}if(d[0]===6&&i.label<o[1]){i.label=o[1],o=d;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(d);break}o[2]&&i.ops.pop(),i.trys.pop();continue}d=e.call(t,i)}catch(f){d=[6,f],r=0}finally{n=o=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([u,l])}}}var Tge=(function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var o=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+o+"."),this.set(e,o)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,o=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return Age(r,i[0],i[1]),i.join("=")})),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach((function(a){var i=a.split(":"),s=i[0],u=i[1];e.urlFlags[s]=(function(l,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+l+".")})(s,u)}))}},t})();function Age(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Ce(){return bL}var bL=null,iy=new Map,Q2=new Map;function xL(t,e){var n=SL(t,e);return iy.get(n)}function qI(t){return Q2.get(t)}function XI(t){for(var e=iy.entries(),n=[];;){var r=e.next(),o=r.done,a=r.value;if(o)break;var i=a[0],s=a[1];i.split("_")[0]===t&&n.push(s)}return n}function wL(t){var e=t.kernelName,n=t.backendName,r=SL(e,n);if(iy.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");iy.set(r,t)}function Nge(t){var e=t.kernelName;Q2.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),Q2.set(e,t)}function SL(t,e){return e+"_"+t}function J2(t,e,n){return Math.max(t,Math.min(e,n))}function CL(t){return t%2==0?t:t+1}function Dge(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function K(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function on(t,e,n){n===void 0&&(n=""),K(mr(t,e),(function(){return n+" Shapes "+t+" and "+e+" must match"}))}function Cf(t){K(t!=null,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Gd(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||wi(t)&&!n)for(var r=0;r<t.length;++r)Gd(t[r],e,n);else e.push(t);return e}function Ke(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function mr(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function qn(t){return t%1==0}function kge(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function Z2(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Cd(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function KI(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise((function(r,o){var a=0,i=function(){if(t())r();else{a++;var s=e(a);n!=null&&a>=n?o():setTimeout(i,s)}};i()}))}function Ige(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function lr(t,e){var n=e.length;return K((t=t==null?e.map((function(r,o){return o})):[].concat(t)).every((function(r){return r>=-n&&r<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t})),K(t.every((function(r){return qn(r)})),(function(){return"All values in axis param must be integers but got axis "+t})),t.map((function(r){return r<0?n+r:r}))}function Sl(t,e){for(var n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||o?null:lr(e,t).sort(),i=0,s=0;s<t.length;++s){if(a!=null){if(a[i]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(a[i]==null||a[i]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[i]<=s&&i++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function $d(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function sy(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function Mge(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function Oge(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function Pge(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function wi(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function EL(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function Fge(t){if(t==null)return 0;var e=0;return t.forEach((function(n){return e+=n.length})),e}function jE(t){return typeof t=="string"||t instanceof String}function Bge(t){return typeof t=="boolean"}function Lge(t){return typeof t=="number"}function rm(t){return Array.isArray(t)?rm(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Lge(t)?"float32":jE(t)?"string":Bge(t)?"bool":"float32"}function eS(t){return!!(t&&t.constructor&&t.call&&t.apply)}function tS(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Vo(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function RL(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Gd(t)),n&&Mge(t,e),(function(a,i){return a instanceof Float32Array&&i==="float32"||a instanceof Int32Array&&i==="int32"||a instanceof Uint8Array&&i==="bool"})(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)Math.round(t[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function YI(t,e){if(t.length===0)return e[0];var n=t.reduce((function(r,o){return r*o}));if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return(function r(o,a,i){var s=new Array;if(a.length===1)for(var u=a[0],l=0;l<u;l++)s[l]=i[o+l];else{u=a[0];var d=a.slice(1),f=d.reduce((function(p,m){return p*m}));for(l=0;l<u;l++)s[l]=r(o+l*f,d,i)}return s})(0,t,e)}function _L(t,e){for(var n=om(t,e),r=0;r<n.length;r++)n[r]=1;return n}function om(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function ci(){return Ce().platform.now()}function TL(t){t.forEach((function(e){K(Number.isInteger(e)&&e>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."}))}))}function jge(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",Ce().platform.encode(t,e)}function uy(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",Ce().platform.decode(t,e)}function nS(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function AL(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}var zge=(function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Uge)}return t.prototype.profileKernel=function(e,n,r){var o,a=this,i=this.backendTimer.time((function(){o=r()}));return o.forEach((function(s){s.data().then((function(u){(function(l,d,f){if(d!=="float32")return!1;for(var p=0;p<l.length;p++){var m=l[p];if(isNaN(m)||!isFinite(m))return console.warn("Found "+m+" in the result of '"+f+"'"),!0}})(u,s.dtype,e),i.then((function(l){var d="";l.getExtraProfileInfo!=null&&(d=l.getExtraProfileInfo()),a.logger.logKernelProfile(e,s,u,l.kernelMs,n,d)}))}))})),o},t})(),Uge=(function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,o,a,i){var s=typeof o=="number"?Cd(o+"ms",9):o.error,u=Cd(e,25),l=n.rank,d=n.size,f=Cd(n.shape.toString(),14),p="";for(var m in a){var g=a[m].shape||n.shape,y=g.length;p+=m+": "+y+"D "+(y>0?g:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+d+"	%c"+p+"	%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t})(),QI=20,Oh=3,vw=7;function Wge(t,e,n,r){var o=Vo(e),a=(function(l,d,f,p){var m=Ke(d),g=p[p.length-1],y=new Array(g).fill(0),b=d.length,S=f==="complex64"?Fh(l):l;if(b>1)for(var C=0;C<m/g;C++)for(var E=C*g,_=0;_<g;_++)y[_]=Math.max(y[_],Ph(S[E+_],0,f).length);return y})(t,e,n,o),i=e.length,s=(function l(d,f,p,m,g,y){y===void 0&&(y=!0);var b=p==="complex64"?2:1,S=f[0],C=f.length;if(C===0)return p==="complex64"?[Ph(Fh(d)[0],0,p)]:p==="bool"?[NL(d[0])]:[d[0].toString()];if(C===1){if(S>QI){var E=Oh*b,_=Array.from(d.slice(0,E)),T=Array.from(d.slice((S-Oh)*b,S*b));return p==="complex64"&&(_=Fh(_),T=Fh(T)),["["+_.map((function(q,P){return Ph(q,g[P],p)})).join(", ")+", ..., "+T.map((function(q,P){return Ph(q,g[S-Oh+P],p)})).join(", ")+"]"]}return["["+(p==="complex64"?Fh(d):Array.from(d)).map((function(q,P){return Ph(q,g[P],p)})).join(", ")+"]"]}var D=f.slice(1),k=m.slice(1),I=m[0]*b,M=[];if(S>QI){for(var O=0;O<Oh;O++){var F=(j=O*I)+I;M.push.apply(M,l(d.slice(j,F),D,p,k,g,!1))}for(M.push("..."),O=S-Oh;O<S;O++)F=(j=O*I)+I,M.push.apply(M,l(d.slice(j,F),D,p,k,g,O===S-1))}else for(O=0;O<S;O++){var j;F=(j=O*I)+I,M.push.apply(M,l(d.slice(j,F),D,p,k,g,O===S-1))}var G=C===2?",":"";for(M[0]="["+M[0]+G,O=1;O<M.length-1;O++)M[O]=" "+M[O]+G;var W=`,
`;for(O=2;O<C;O++)W+=`
`;return M[M.length-1]=" "+M[M.length-1]+"]"+(y?"":W),M})(t,e,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map((function(l){return"    "+l})).join(`
`)),u.join(`
`)}function Ph(t,e,n){return Cd(Array.isArray(t)?parseFloat(t[0].toFixed(vw))+" + "+parseFloat(t[1].toFixed(vw))+"j":jE(t)?"'"+t+"'":n==="bool"?NL(t):parseFloat(t.toFixed(vw)).toString(),e)}function NL(t){return t===0?"false":"true"}function Fh(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var gp=(function(){function t(e,n,r){var o=this;if(this.dtype=n,this.shape=e.slice(),this.size=Ke(e),r!=null){var a=r.length;K(a===this.size,(function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+o.size+"'."}))}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||sy(n,this.size),this.strides=Vo(e)}return t.prototype.set=function(e){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),K(r.length===this.rank,(function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"}));var a=this.locToIndex(r);this.values[a]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,o=0,a=e;o<a.length;o++){var i=a[o];if(i<0||i>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return hi().makeTensor(this.values,this.shape,this.dtype)},t})(),hi=null,Se=null,DL=null,wn=(function(){function t(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Ke(e),this.strides=Vo(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),K(this.size===1,(function(){return"The array must have only 1 element."})),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,o){return this.throwIfDisposed(),this.reshape([e,n,r,o])},t.prototype.as5D=function(e,n,r,o,a){return this.throwIfDisposed(),this.reshape([e,n,r,o,a])},t.prototype.asType=function(e){return this.throwIfDisposed(),Se.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Ye(this,void 0,void 0,(function(){var e;return Qe(this,(function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,Se.buffer(this.shape,this.dtype,e)]}}))}))},t.prototype.bufferSync=function(){return Se.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Ye(this,void 0,void 0,(function(){var e;return Qe(this,(function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,YI(this.shape,e)]}}))}))},t.prototype.arraySync=function(){return YI(this.shape,this.dataSync())},t.prototype.data=function(){return Ye(this,void 0,void 0,(function(){var e,n;return Qe(this,(function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=hi().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map((function(o){return uy(o)}))]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}}))}))},t.prototype.dataSync=function(){this.throwIfDisposed();var e=hi().readSync(this.dataId);if(this.dtype==="string")try{return e.map((function(n){return uy(n)}))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return Ye(this,void 0,void 0,(function(){var e;return Qe(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,hi().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},t.prototype.dispose=function(){this.isDisposed||(hi().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),Se.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),Se.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),Se.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),Se.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),Se.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),Se.clone(this)},t.prototype.toString=function(e){return e===void 0&&(e=!1),Wge(this.dataSync(),this.shape,this.dtype,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),Se.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),Se.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),Se.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),Se.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),Se.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),Se.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),Se.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),Se.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),Se.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),Se.unstack(this,e)},t.prototype.batchNormalization=function(e,n,r,o,a){return r===void 0&&(r=.001),DL("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,a,o,r)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Se.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Se.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Se.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Se.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Se.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Se.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Se.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),Se.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),Se.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),Se.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),Se.cast(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),Se.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),Se.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),Se.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),Se.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),Se.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),Se.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),Se.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),Se.mulStrict(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),Se.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),Se.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),Se.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Se.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),Se.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Se.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),Se.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),Se.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Se.squaredDifferenceStrict(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),Se.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Se.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),Se.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),Se.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),Se.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),Se.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),Se.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Se.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),Se.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Se.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Se.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Se.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Se.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),Se.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),Se.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),Se.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),Se.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),Se.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),Se.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),Se.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),Se.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),Se.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),Se.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),Se.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),Se.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),Se.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),Se.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),Se.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),Se.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),Se.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),Se.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),Se.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),Se.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),Se.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),Se.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),Se.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),Se.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),Se.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),Se.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),Se.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),Se.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),Se.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),Se.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),Se.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),Se.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),Se.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),Se.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),Se.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),Se.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),Se.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),Se.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),Se.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),Se.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),Se.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),Se.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),Se.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),Se.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),Se.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),Se.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),Se.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),Se.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),Se.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),Se.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),Se.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,o,a,i){return o===void 0&&(o="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),Se.conv1d(this,e,n,r,o,a,i)},t.prototype.conv2d=function(e,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),Se.conv2d(this,e,n,r,o,a,i)},t.prototype.conv2dTranspose=function(e,n,r,o,a){return this.throwIfDisposed(),Se.conv2dTranspose(this,e,n,r,o,a)},t.prototype.depthwiseConv2D=function(e,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),Se.depthwiseConv2d(this,e,n,r,o,a,i)},t.prototype.separableConv2d=function(e,n,r,o,a,i){return a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),Se.separableConv2d(this,e,n,r,o,a,i)},t.prototype.avgPool=function(e,n,r,o){return this.throwIfDisposed(),Se.avgPool(this,e,n,r,o)},t.prototype.maxPool=function(e,n,r,o){return this.throwIfDisposed(),Se.maxPool(this,e,n,r,o)},t.prototype.localResponseNormalization=function(e,n,r,o){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),Se.localResponseNormalization(this,e,n,r,o)},t.prototype.pool=function(e,n,r,o,a){return this.throwIfDisposed(),Se.pool(this,e,n,r,o,a)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),hi().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),Se.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),Se.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),Se.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),Se.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,o,a,i,s,u){return o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),Se.stridedSlice(this,e,n,r,o,a,i,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),Se.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),Se.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),Se.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),Se.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),Se.spectral.irfft(this)},t})();Object.defineProperty(wn,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var JI,rS,oS,aS,iS,qd=(function(t){function e(n,r,o,a){var i=t.call(this,n.shape,n.dtype,n.dataId,a)||this;return i.trainable=r,i.name=o,i}return Ka(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!mr(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");hi().disposeTensor(this),this.dataId=n.dataId,hi().incRef(this,null)},e.prototype.dispose=function(){hi().disposeVariable(this),this.isDisposedInternal=!0},e})(wn);Object.defineProperty(qd,Symbol.hasInstance,{value:function(t){return t instanceof wn&&t.assign!=null&&t.assign instanceof Function}}),(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(JI||(JI={})),(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(rS||(rS={})),(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(oS||(oS={})),(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(aS||(aS={})),(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(iS||(iS={}));var Vge={float32:aS,int32:rS,bool:oS,complex64:iS};function Er(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return Vge[t][e]}function gw(t){return Er(t,"int32")}function Mn(t,e){if(t.dtype===e.dtype)return[t,e];var n=Er(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Hge(t,e){K(t.dtype===e.dtype,(function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"}))}function kL(t){var e=[];return(function n(r,o,a){if(r!=null){if(r instanceof wn)return void o.push(r);if(i=r,!(!Array.isArray(i)&&typeof i!="object")){var i,s=r;for(var u in s){var l=s[u];a.has(l)||(a.add(l),n(l,o,a))}}}})(t,e,new Set),e}var yw,ZI=(function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t})(),Gge=(function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ZI}return t.prototype.ready=function(){return Ye(this,void 0,void 0,(function(){var e,n,r;return Qe(this,(function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then((function(){}))];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,o.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return Ye(this,void 0,void 0,(function(){var n,r,o;return Qe(this,(function(a){switch(a.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return o=a.sent(),[3,3];case 2:o=r,a.label=3;case 3:if(!o)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new zge(this.backendInstance),[2,!0]}}))}))},t.prototype.setupRegisteredKernels=function(){var e=this;XI(this.backendName).forEach((function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)}))},t.prototype.disposeRegisteredKernels=function(e){var n=this;XI(e).forEach((function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])}))},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var a=++this.pendingBackendInitId,i=o.then((function(s){return!(a<n.pendingBackendInitId)&&(n.registry[e]=s,n.pendingBackendInit=null,!0)})).catch((function(s){return!(a<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority}))},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],o=this.initializeBackend(r),a=o.success,i=o.asyncInit;if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),o=r.backend,a=this.readSync(n);o.disposeData(n),r.backend=e,e.move(n,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,o=this,a=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return o.startScope(a)}),(function(){return o.endScope(r)}),(function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r}))},t.prototype.scopedRun=function(e,n,r){e();try{var o=r();return n(),o}catch(a){throw n(),a}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],(function(o){return{x:function(){return o.toFloat()}}}),[],{}),n},t.prototype.runKernel=function(e,n,r,o,a){return this.runKernelFunc(null,n,null,e,r,o,a)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var o=this.backend.numDataIds(),a=0;r.forEach((function(u){a+=u.dtype==="complex64"?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=o-n-a-i;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,o,a,i,s){var u,l=this,d=[],f=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var p,m=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var y,b=xL(o,this.backendName);if(b!=null)p=function(){var C=l.backend.numDataIds();y=b.kernelFunc({inputs:n,attrs:a,backend:l.backend});var E=Array.isArray(y)?y:[y];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,C,E);var _=E.map((function(k){var I=k.dataId,M=k.shape,O=k.dtype;return l.makeTensorFromDataId(I,M,O)}));if(f){var T=l.getTensorsForGradient(o,n,_);if(T==null){s==null&&(s=[]);var D=_.filter((function(k,I){return s[I]}));T=(i||[]).slice().concat(D)}d=l.saveTensorsForBackwardMode(T)}return _};else{var S=function(C){f&&(d=C.map((function(E){return l.keep(l.clone(E))})))};p=function(){var C=l.backend.numDataIds();y=l.tidy((function(){return e(l.backend,S)}));var E=Array.isArray(y)?y:[y];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,C,E),E}}return this.scopedRun((function(){return l.state.kernelDepth++}),(function(){return l.state.kernelDepth--}),(function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(o,n,(function(){return p()})):p()})),f&&this.addTapeNode(o,n,u,r,d,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-m,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map((function(C){return n[C].shape})),outputShapes:u.map((function(C){return C.shape}))}),Array.isArray(y)?u:u[0]},t.prototype.saveTensorsForBackwardMode=function(e){var n=this;return e.map((function(r){return n.keep(n.clone(r))}))},t.prototype.getTensorsForGradient=function(e,n,r){var o=qI(e);if(o!=null){var a=o.inputsToSave||[],i=o.outputsToSave||[],s=void 0;o.saveAllInputs?(K(Array.isArray(n),(function(){return"saveAllInputs is true, expected inputs to be an array."})),s=Object.keys(n).map((function(l){return n[l]}))):s=a.map((function(l){return n[l]}));var u=r.filter((function(l,d){return i[d]}));return s.concat(u)}return null},t.prototype.makeTensor=function(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var a=e;r==="string"&&jE(e[0])&&(a=e.map((function(d){return jge(d)})));var i=o.write(a,n,r),s=new wn(n,r,i,this.nextTensorId());if(this.incRef(s,o),r==="string"){var u=this.state.tensorInfo.get(i),l=Fge(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(e,n,r,o){var a=new wn(n,r=r||"float32",e,this.nextTensorId());return this.incRef(a,o),a},t.prototype.makeVariable=function(e,n,r,o){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.asType(o));var a=new qd(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*EL(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof qd||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return Ye(this,void 0,void 0,(function(){var n,r;return Qe(this,(function(o){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(a){return a.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]}))}))},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,o,a,i){var s=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},l=qI(e);l!=null&&(o=l.gradFunc),o!=null&&(u.gradient=function(d){return d=d.map((function(f,p){if(f==null){var m=r[p],g=om(m.size,m.dtype);return s.makeTensor(g,m.shape,m.dtype)}return f})),o(d.length>1?d:d[0],a,i)}),this.state.activeTape.push(u)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=kL(e),o=new Set(r.map((function(u){return u.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||o.has(i.id)||i.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach((function(u){u.kept||u.scopeId!==s.id||n.track(u)}))},t.prototype.gradients=function(e,n,r,o){var a=this;if(o===void 0&&(o=!1),K(n.length>0,(function(){return"gradients() received an empty list of xs."})),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));K(i instanceof wn,(function(){return"The result y returned by f() must be a tensor."}));var s=(function(u,l,d){for(var f={},p={},m=0;m<l.length;m++)f[l[m].id]=!0;for(m=0;m<u.length;m++){var g=(D=u[m]).inputs;for(var y in g){for(var b=g[y],S=!1,C=0;C<l.length;C++)if(f[b.id]){D.outputs.forEach((function(O){return f[O.id]=!0})),S=!0,p[D.id]=!0;break}if(S)break}}var E={};E[d.id]=!0;var _={};for(m=u.length-1;m>=0;m--)for(g=(D=u[m]).inputs,C=0;C<D.outputs.length;C++)if(E[D.outputs[C].id]){for(var y in g)E[g[y].id]=!0,_[D.id]=!0;break}var T=[];for(m=0;m<u.length;m++){var D;if(p[(D=u[m]).id]&&_[D.id]){var k={};for(var y in D.inputs){var I=D.inputs[y];f[I.id]&&(k[y]=I)}var M=Object.assign({},D);M.inputs=k,M.outputs=D.outputs,T.push(M)}}return T})(this.state.activeTape,n,i);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var u,l,d={};d[i.id]=r??(u=i.shape,l=_L(Ke(u),"float32"),oe.makeTensor(l,u,"float32")),(function(p,m,g){for(var y=function(S){var C=m[S],E=[];if(C.outputs.forEach((function(k){var I=p[k.id];I!=null?E.push(I):E.push(null)})),C.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+C.kernelName+".");var _=C.gradient(E),T=function(k){if(!(k in _))throw new Error("Cannot backprop through input "+k+". Available gradients found: "+Object.keys(_)+".");var I=g((function(){return _[k]()}));if(I.dtype!=="float32")throw new Error("Error in gradient for op "+C.kernelName+". The gradient of input "+k+" must have 'float32' dtype, but has '"+I.dtype+"'");var M=C.inputs[k];if(!mr(I.shape,M.shape))throw new Error("Error in gradient for op "+C.kernelName+". The gradient of input '"+k+"' has shape '"+I.shape+"', which does not match the shape of the input '"+M.shape+"'");if(p[M.id]==null)p[M.id]=I;else{var O=p[M.id];p[M.id]=O.add(I),O.dispose()}};for(var D in C.inputs)T(D)},b=m.length-1;b>=0;b--)y(b)})(d,s,(function(p){return a.tidy(p)}));var f=n.map((function(p){return d[p.id]}));return a.state.gradientDepth===0&&(a.state.activeTape.forEach((function(p){for(var m=0,g=p.saved;m<g.length;m++)g[m].dispose()})),a.state.activeTape=null),{value:i,grads:f}}))},t.prototype.customGrad=function(e){var n=this;return K(eS(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var r,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];K(o.every((function(s){return s instanceof wn})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return o.forEach((function(s,u){i[u]=s})),n.runKernelFunc((function(s,u){return K((r=e.apply(void 0,o.concat([u]))).value instanceof wn,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),K(eS(r.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),r.value}),i,(function(s,u){var l=r.gradFunc(s,u),d=Array.isArray(l)?l:[l];K(d.length===o.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),K(d.every((function(p){return p instanceof wn})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var f={};return d.forEach((function(p,m){f[m]=function(){return p}})),f}))}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return Ye(this,void 0,void 0,(function(){var n,r;return Qe(this,(function(o){switch(o.label){case 0:return n=ci(),[4,this.backend.time(e)];case 1:return(r=o.sent()).wallMs=ci()-n,[2,r]}}))}))},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ZI,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t})(),oe=(function(){var t=(function(){if(yw==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}yw=n}return yw})();if(t._tfengine==null){var e=new Tge(t);t._tfengine=new Gge(e)}return(function(n){bL=n})(t._tfengine.ENV),hi=function(){return t._tfengine},t._tfengine})();function IL(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ns=Ce();ns.registerFlag("DEBUG",(function(){return!1}),(function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),ns.registerFlag("IS_BROWSER",(function(){return IL()})),ns.registerFlag("IS_NODE",(function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0})),ns.registerFlag("IS_CHROME",(function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),ns.registerFlag("PROD",(function(){return!1})),ns.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return ns.getBool("DEBUG")})),ns.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),ns.registerFlag("IS_TEST",(function(){return!1}));var yp,Bo,Io,gl={},bw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function $ge(t,e){gl[t]=e}function Pi(t){t in gl||(gl[t]=(function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=(function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")})(n);return r.addEventListener("webglcontextlost",(function(o){o.preventDefault(),delete gl[n]}),!1),n===1?r.getContext("webgl",bw)||r.getContext("experimental-webgl",bw):r.getContext("webgl2",bw)})(t));var e=gl[t];return e.isContextLost()?(delete gl[t],Pi(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),gl[t])}function B0(t,e){return[e,t]}function $h(t){var e=Ke(t);return Z2(Math.ceil(e/4))}function am(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function zE(t,e){var n,r,o,a,i,s,u,l,d,f=t;return Ce().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,o=f.RGBA16F,a=f.RGBA32F,i=f.RED,s=4,u=1,l=f.HALF_FLOAT,d=f.FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,a=f.RGBA,i=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,d=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:d}}function et(t,e,n){var r=n();return e&&(function(o){var a=o.getError();if(a!==o.NO_ERROR)throw new Error("WebGL Error: "+Yge(o,a))})(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(yp||(yp={})),(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Bo||(Bo={})),(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Io||(Io={}));var qge=596e-10,Xge=65504;function Kge(t){return!!(Ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||qge<Math.abs(t)&&Math.abs(t)<Xge)}function Yge(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Yv(t,e,n){return ks(t,e,(function(){return t.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function Qge(t,e,n){var r=ks(t,e,(function(){return t.createShader(t.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(et(t,e,(function(){return t.shaderSource(r,n)})),et(t,e,(function(){return t.compileShader(r)})),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Jge(t,e,n){var r=ks(t,e,(function(){return t.createShader(t.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(et(t,e,(function(){return t.shaderSource(r,n)})),et(t,e,(function(){return t.compileShader(r)})),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw(function(o,a){var i=Zge.exec(a);if(i==null)return console.log("Couldn't parse line number in error: "+a),void console.log(o);for(var s=+i[1],u=o.split(`
`),l=u.length.toString().length+2,d=u.map((function(b,S){return Cd((S+1).toString(),l)+b})),f=0,p=0;p<d.length;p++)f=Math.max(d[p].length,f);var m=d.slice(0,s-1),g=d.slice(s-1,s),y=d.slice(s);console.log(m.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+Cd(g[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(y.join(`
`))})(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var xw,ww,Zge=/ERROR: [0-9]+:([0-9]+):/g;function eye(t,e){return ks(t,e,(function(){return t.createProgram()}),"Unable to create WebGLProgram.")}function tye(t,e,n){if(et(t,e,(function(){return t.linkProgram(n)})),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Sw(t,e,n){if(et(t,e,(function(){return t.validateProgram(n)})),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function nye(t,e,n){var r=ks(t,e,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return et(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),et(t,e,(function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)})),r}function rye(t,e,n){var r=ks(t,e,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return et(t,e,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)})),et(t,e,(function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)})),r}function oye(t,e){return ks(t,e,(function(){return t.createTexture()}),"Unable to create WebGLTexture.")}function aye(t,e){var n=Ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function iye(t,e){return ks(t,e,(function(){return t.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function eM(t,e,n,r,o,a,i,s){var u=t.getAttribLocation(n,r);return u!==-1&&(et(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,o)})),et(t,e,(function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,i,s)})),et(t,e,(function(){return t.enableVertexAttribArray(u)})),!0)}function sye(t,e,n,r){fye(t,r),et(t,e,(function(){return t.activeTexture(t.TEXTURE0+r)})),et(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)}))}function uye(t,e,n,r){return ks(t,e,(function(){return t.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function lye(t,e,n){return t.getUniformLocation(e,n)}function cye(t,e,n,r,o,a){et(t,e,(function(){return sye(t,e,r,a)})),et(t,e,(function(){return t.uniform1i(o,a)}))}function Cw(t,e,n,r){et(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)})),et(t,e,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}))}function tM(t,e,n){et(t,e,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)})),et(t,e,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}))}function Qv(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+dye(t,e))}function dye(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function ks(t,e,n,r){var o=et(t,e,(function(){return n()}));if(o==null)throw new Error(r);return o}function fye(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function ly(t,e){return e===void 0&&(e=2),Ke(t.slice(0,t.length-e))}function cy(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Ew(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[ly(t)].concat(cy(t))),e}function hye(t,e){var n;e===void 0&&(e=!1);var r=Ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map((function(l,d){return d>=t.length-2?CL(t[d]):t[d]}))).length===1&&(t=[2,t[0]])),t.length!==2){var o=Sl(t);t=o.newShape}var a=Ke(t);if(t.length<=1&&a<=r)return[1,a];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var i=ly(t),s=2,u=2;return t.length&&(s=(n=cy(t))[0],u=n[1]),Z2(a=i*(s/2)*(u/2)).map((function(l){return 2*l}))}return Z2(a)}function Jv(t){return t%2==0}function Zv(t,e){if(mr(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Jv(n)&&Jv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Jv(t[0])&&Jv(e[0])}function pye(t){if(xw==null){var e=Pi(t);xw=e.getParameter(e.MAX_TEXTURE_SIZE)}return xw}function mye(t){if(ww==null){var e=Pi(t);ww=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ww)}function vye(t){if(t===0)return 0;var e=Pi(t);return ma(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:ma(e,"EXT_disjoint_timer_query")?1:0}function ma(t,e){return t.getExtension(e)!=null}function nM(t){try{if(Pi(t)!=null)return!0}catch{return!1}return!1}function gye(t){if(t===0)return!1;var e=Pi(t);if(t===1){if(!ma(e,"OES_texture_float"))return!1}else if(!ma(e,"EXT_color_buffer_float"))return!1;return sS(e)}function yye(t){if(t===0)return!1;var e=Pi(t);if(t!==1){if(ma(e,"EXT_color_buffer_float"))return sS(e);if(ma(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return(function(r,o){var a=zE(r,o),i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(i),r.deleteFramebuffer(s),u})(e,n)}return!1}return!!ma(e,"OES_texture_float")&&!!ma(e,"WEBGL_color_buffer_float")&&sS(e)}function sS(t){var e=zE(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}function bye(t){return t===2&&Pi(t).fenceSync!=null}var yt=Ce();function ML(t){Ce().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function tn(t,e){return oe.tidy(t,e)}function vo(t){kL(t).forEach((function(e){return e.dispose()}))}function xye(t){return oe.keep(t)}function dy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ce().getBool("IS_TEST")||console.warn.apply(console,t)}function Hu(t,e){var n=t;if(wi(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||wi(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Ce().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&(function o(a,i,s){if(s=s||[],!Array.isArray(a)&&!wi(a))return void K(i.length===0,(function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+i[0]+" elements"}));K(i.length>0,(function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"})),K(a.length===i[0],(function(){return"Element arr["+s.join("][")+"] should have "+i[0]+" elements, but has "+a.length+" elements"}));for(var u=i.slice(1),l=0;l<a.length;++l)o(a[l],u,s.concat(l))})(t,r,[]),r}function rM(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function X(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof wn)return rM(r,t.dtype,e,n),t;var o=rm(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),rM(r,o,e,n),t==null||!wi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var a=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=Hu(t,o);wi(t)||Array.isArray(t)||(t=[t]);var s=o!=="string"?RL(t,o,Ce().getBool("DEBUG")):Gd(t,[],!0);return oe.makeTensor(s,i,o)}function fy(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map((function(o,a){return X(o,e+"["+a+"]",n)}),r)}function OL(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function wye(t,e,n){for(var r=t.length+e.length,o=[],a=0,i=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(t[a++]):o.push(e[i++]);return o}function Pr(t,e){for(var n=[],r=t.length,o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);return[n,e.map((function(a){return t[a]}))]}function yo(t,e){return wye(t,e.map((function(n){return 1})),e)}function ko(t,e,n){K(OL(e,n),(function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."}))}function Fi(t,e){if(OL(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach((function(o){return n.push(o)})),n}function UE(t){return t.map((function(e,n){return[n,e]})).sort((function(e,n){return e[1]-n[1]})).map((function(e){return e[0]}))}function Bi(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function Sye(t,e){var n=t[0].length;t.forEach((function(o,a){K(o.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+n+")"}))})),K(e>=0&&e<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=t[0];t.forEach((function(o,a){for(var i=0;i<n;i++)K(i===e||o[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."}))}))}function Xd(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function te(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];oe.startScope(n);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),oe.endScope(s),s}catch(u){throw oe.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}yt.registerFlag("HAS_WEBGL",(function(){return yt.getNumber("WEBGL_VERSION")>0})),yt.registerFlag("WEBGL_VERSION",(function(){return nM(2)?2:nM(1)?1:0})),yt.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return yt.get("WEBGL_VERSION")===2})),yt.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),yt.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),yt.registerFlag("WEBGL_PACK",(function(){return yt.getBool("HAS_WEBGL")})),yt.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_CLIP",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),yt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_PACK_REDUCE",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_CONV_IM2COL",(function(){return yt.getBool("WEBGL_PACK")})),yt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return pye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return mye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var t=yt.getNumber("WEBGL_VERSION");return t===0?0:vye(t)})),yt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return yt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t})),yt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return gye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!yt.getBool("WEBGL_FORCE_F16_TEXTURES")&&yt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),yt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return yye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return bye(yt.getNumber("WEBGL_VERSION"))})),yt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return yt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),DL=ML;var Cr=te({complex_:function(t,e){var n=X(t,"real","complex"),r=X(e,"imag","complex");return on(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),oe.runKernelFunc((function(o){return o.complex(n,r)}),{$real:n,$imag:r})}}),da=te({real_:function(t){var e=X(t,"input","real");return oe.runKernelFunc((function(n){return n.real(e)}),{$input:e})}}),pi=te({imag_:function(t){var e=X(t,"input","imag");return oe.runKernelFunc((function(n){return n.imag(e)}),{$input:e})}});function Rr(t,e,n){return Gu(t,e,Hu(t,n),n)}function Gu(t,e,n,r){if(r==null&&(r=rm(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!wi(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){TL(e);var o=Ke(e),a=Ke(n);K(o===a,(function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+a}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==Ke(e.slice(i));K(n[i]===e[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "}))}}return wi(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?RL(t,r,Ce().getBool("DEBUG")):Gd(t,[],!0),oe.makeTensor(t,e,r)}function tt(t,e){if((wi(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&wi(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Gu(t,[],[],e)}function Ha(t,e){Cf(t);var n=Hu(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Gu(t,null,n,e)}function Ml(t,e,n){if(Cf(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Hu(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Gu(t,e,r,n)}function PL(t,e,n){if(Cf(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Hu(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Gu(t,e,r,n)}function di(t,e,n){if(Cf(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Hu(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Gu(t,e,r,n)}function Cye(t,e,n){if(Cf(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Hu(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Gu(t,e,r,n)}function Eye(t,e,n){if(Cf(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Hu(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Gu(t,e=e||r,r,n)}function Rye(t,e,n,r){return e===void 0&&(e=!0),oe.makeVariable(t,e,n,r)}function Ef(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Ef(t,"float32"),r=Wn(t,"float32");return Cr(n,r)}var o=_L(Ke(t),e);return oe.makeTensor(o,t,e)}function Wn(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Wn(t,"float32"),r=Wn(t,"float32");return Cr(n,r)}var o=om(Ke(t),e);return oe.makeTensor(o,t,e)}function Ol(t,e,n){return oe.runKernelFunc((function(r){return r.fill(t,e,n)}),{})}function _ye(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return oe.runKernelFunc((function(r){return r.linspace(t,e,n)}),{})}function hy(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return Wn([0],r);var o=om(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return Ha(o,r)}var FL=te({onesLike_:function(t){var e=X(t,"x","onesLike");if(e.dtype==="complex64"){var n=FL(da(e)),r=$t(pi(e));return Cr(n,r)}return oe.runKernelFunc((function(o){return o.onesLike(e)}),{x:e},(function(o,a){return{x:function(){return $t(o)}}}),"OnesLike")}}),$t=te({zerosLike_:function(t){var e=X(t,"x","zerosLike");return oe.runKernelFunc((function(n){return n.zerosLike(e)}),{x:e},(function(n,r){return{x:function(){return $t(n)}}}),"ZerosLike")}}),xa=te({concat_:function(t,e){e===void 0&&(e=0),K(t.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=fy(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach((function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")})),e=lr(e,n[0].shape)[0];var r=Xd(n.map((function(s){return s.shape})),e);if(Ke(r)===0)return Rr([],r);if((n=n.filter((function(s){return s.size>0}))).length===1)return n[0];var o=n.map((function(s){return s.shape}));Sye(o,e);var a=n,i={axis:e};return oe.runKernelFunc((function(s){return s.concat(n,e)}),a,(function(s){var u=o.map((function(l){return l[e]}));return WE(s,u,e).map((function(l){return function(){return l}}))}),"Concat",i)}}),Tye=te({concat1d_:function(t){return xa(t,0)}}),Aye=te({concat2d_:function(t,e){return xa(t,e)}}),Nye=te({concat3d_:function(t,e){return xa(t,e)}}),Dye=te({concat4d_:function(t,e){return xa(t,e)}}),WE=te({split_:function(t,e,n){n===void 0&&(n=0);var r,o=X(t,"x","split");return n=lr(n,o.shape)[0],typeof e=="number"?(K(o.shape[n]%e==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(e).fill(o.shape[n]/e)):(K(o.shape[n]===e.reduce((function(a,i){return a+i})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=e),oe.runKernelFunc((function(a){return a.split(o,r,n)}),{$x:o},(function(a){return{$x:function(){return xa(a,n)}}}))}});function St(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",TL(t),new gp(t,e,n)}function kye(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var BL=te({batchToSpaceND_:function(t,e,n){var r=X(t,"x","batchToSpaceND"),o=e.reduce((function(a,i){return a*i}));return K(r.rank>=1+e.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length})),K(n.length===e.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length})),K(r.shape[0]%o==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o})),oe.runKernelFunc((function(a){return a.batchToSpaceND(r,e,n)}),{$x:r},(function(a){return{$x:function(){return a.spaceToBatchND(e,n)}}}))}}),Iye=te({cast_:function(t,e){var n=X(t,"x","cast");if(!Oge(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return oe.runKernelFunc((function(o){return o.cast(n,e)}),{x:n},(function(o){return{x:function(){return o.clone()}}}),"Cast",r)}}),Mye=te({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=X(t,"x","cumsum"),a=Fi([e|=0],o.rank),i=o;a!=null&&(i=o.transpose(a));var s=Bi(1,o.rank)[0],u=oe.runKernelFunc((function(l){return l.cumsum(i,s,n,r)}),{permutedX:i},(function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}}));return a!=null&&(u=u.transpose(a)),u}}),Oye=te({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=X(t,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];return K(o*e>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+`  for depthToSpace with input shape
      `+r.shape})),K(a*e>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+` for depthToSpace with input shape
          `+r.shape})),K(i%(e*e)==0,(function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+i+" for depthToSpace with input shape "+r.shape})),oe.runKernelFunc((function(s){return s.depthToSpace(r,e,n)}),{$x:r})}}),pu=te({expandDims_:function(t,e){e===void 0&&(e=0);var n=X(t,"x","expandDims",null);K(e<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return e<0&&(K(-(n.rank+1)<=e,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),e=n.rank+e+1),r.splice(e,0,1),as(n,r)}}),as=te({reshape_:function(t,e){var n=X(t,"x","reshape",null);e=Ige(e,n.size),K(n.size===Ke(e),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:e};return oe.runKernelFunc((function(o){return o.reshape(n,e)}),{x:n},(function(o){return{x:function(){return o.reshape(n.shape)}}}),"Reshape",r)}}),LL=te({spaceToBatchND_:function(t,e,n){var r=X(t,"x","spaceToBatchND");return K(r.rank>=1+e.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length})),K(n.length===e.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length})),K(r.shape.reduce((function(o,a,i){return i>0&&i<=e.length?o&&(a+n[i-1][0]+n[i-1][1])%e[i-1]==0:o}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()})),oe.runKernelFunc((function(o){return o.spaceToBatchND(r,e,n)}),{$x:r},(function(o){return{$x:function(){return o.batchToSpaceND(e,n)}}}))}}),jL=te({squeeze_:function(t,e){var n=X(t,"x","squeeze");return as(n,Sl(n.shape,e).newShape)}}),Ou=te({stack_:function(t,e){e===void 0&&(e=0);var n=fy(t,"tensors","stack");if(K(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length===1)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;K(e<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(s){on(o,s.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(s){K(a===s.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(s){return s.expandDims(e)}));return xa(i,e)}}),L0=te({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=X(t,"x","unstack");K(e>=-n.shape.length&&e<n.shape.length,(function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),e<0&&(e+=n.shape.length);var r={axis:e};return oe.runKernelFunc((function(o){return o.unstack(n,e)}),{x:n},(function(o){return{x:function(){return Ou(o,e)}}}),"Unpack",r)}}),Pye=function(t,e){return Ye(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,d,f;return Qe(this,(function(p){switch(p.label){case 0:return n=X(t,"x","setdiff1d"),r=X(e,"y","setdiff1d"),K(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),K(n.rank===1,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),K(r.rank===1,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return o=p.sent(),[4,r.data()];case 2:for(a=p.sent(),i=new Set(a),s=0,d=0;d<o.length;d++)i.has(o[d])||s++;for(u=new gp([s],n.dtype),l=new gp([s],"int32"),d=0,f=0;d<o.length;d++)i.has(o[d])||(u.values[f]=o[d],l.values[f]=d,f++);return[2,[u.toTensor(),l.toTensor()]]}}))}))};function py(t,e,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var a=e.length,i=0;i<a;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(a+1))}return o}function my(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function vy(t,e,n,r){r===void 0&&(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?o.push(e[a-1]*t[a]):o.push(t[a]/e[a-1]):o.push(t[a]);return o}function zL(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function UL(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}var WL="Add",j0="Div",z0="SquaredDifference",VL="BroadcastTo",HL="OneHot",GL="Identity",$L="Tile",qL="PadV2",wa=te({add_:function(t,e){var n,r=X(t,"a","add"),o=X(e,"b","add");n=Mn(r,o),r=n[0],o=n[1];var a={a:r,b:o};return oe.runKernelFunc((function(i,s){var u=i.add(r,o);return s([r,o]),u}),a,null,WL)}});function xu(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(a)}return r}function ir(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],a=e.length-r-1,i=e[a];(o==null||o===1&&i>1)&&n.unshift(a)}return n}function Mt(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var a=t[t.length-o-1];a==null&&(a=1);var i=e[e.length-o-1];if(i==null&&(i=1),a===1)n.unshift(i);else if(i===1)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}var Fye=te({abs_:function(t){var e=X(t,"x","abs");return e.dtype==="complex64"?oe.runKernelFunc((function(n){return n.complexAbs(e)}),{$x:e}):oe.runKernelFunc((function(n,r){var o=n.abs(e);return r([e]),o}),{x:e},(function(n,r){var o=r[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}}),"Abs")}}),Bye=te({acos_:function(t){var e=X(t,"x","acos");return oe.runKernelFunc((function(n,r){var o=n.acos(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.divStrict(tt(1).sub(o.toFloat().square()).sqrt()).neg()}}}))}}),Lye=te({acosh_:function(t){var e=X(t,"x","acosh");return oe.runKernelFunc((function(n,r){var o=n.acosh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}}))}}),jye=te({asin_:function(t){var e=X(t,"x","asin");return oe.runKernelFunc((function(n,r){var o=n.asin(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.divStrict(tt(1).sub(o.toFloat().square()).sqrt())}}}))}}),zye=te({asinh_:function(t){var e=X(t,"x","asinh");return oe.runKernelFunc((function(n,r){var o=n.asinh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.divStrict(tt(1).add(o.toFloat().square()).sqrt())}}}))}}),Uye=te({atan_:function(t){var e=X(t,"x","atan");return oe.runKernelFunc((function(n,r){var o=n.atan(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}}))}}),Wye=te({atanh_:function(t){var e=X(t,"x","atanh");return oe.runKernelFunc((function(n,r){var o=n.atanh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(tt(1).sub(o.toFloat().square()))}}}))}}),Vye=te({ceil_:function(t){var e=X(t,"x","ceil");return oe.runKernelFunc((function(n){return n.ceil(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),Hye=te({clipByValue_:function(t,e,n){var r=X(t,"x","clipByValue");K(e<=n,(function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."}));var o=[r],a={min:e,max:n};return oe.runKernelFunc((function(i,s){var u=i.clip(r,e,n);return s([r]),u}),{x:r},(function(i,s){var u=s[0];return{x:function(){return i.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),$t(i))}}}),"ClipByValue",a,o)}}),Gye=te({cos_:function(t){var e=X(t,"x","cos"),n=[e];return oe.runKernelFunc((function(r,o){var a=r.cos(e);return o([e]),a}),{x:e},(function(r,o){var a=o[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}}),"Cos",{},n)}}),$ye=te({cosh_:function(t){var e=X(t,"x","cosh");return oe.runKernelFunc((function(n,r){var o=n.cosh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}}))}}),qye=te({erf_:function(t){var e=X(t,"x","erf");return K(e.dtype==="int32"||e.dtype==="float32",(function(){return"Input dtype must be `int32` or `float32`."})),e.dtype==="int32"&&(e=e.toFloat()),oe.runKernelFunc((function(n,r){var o=n.erf(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Xye=te({exp_:function(t){var e=X(t,"x","exp");return oe.runKernelFunc((function(n,r){var o=n.exp(e);return r([o]),o}),{x:e},(function(n,r){return{x:function(){return n.mulStrict(r[0])}}}),"Exp",{},[],[!0])}}),Kye=te({expm1_:function(t){var e=X(t,"x","expm1");return oe.runKernelFunc((function(n,r){var o=n.expm1(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}}))}}),Yye=te({floor_:function(t){var e=X(t,"x","floor");return oe.runKernelFunc((function(n){return n.floor(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),Qye=te({log_:function(t){var e=X(t,"x","log"),n=[e];return oe.runKernelFunc((function(r,o){var a=r.log(e);return o([e]),a}),{x:e},(function(r,o){var a=o[0];return{x:function(){return r.div(a.toFloat())}}}),"Log",{},n)}}),Jye=te({log1p_:function(t){var e=X(t,"x","log1p");return oe.runKernelFunc((function(n,r){var o=n.log1p(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}}))}}),Zye=te({logSigmoid_:function(t){var e=X(t,"x","logSigmoid");return oe.runKernelFunc((function(n,r){var o=n.softplus(e.neg()).neg();return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}}))}}),VE=te({neg_:function(t){var e=X(t,"x","neg"),n=[e];return oe.runKernelFunc((function(r){return r.neg(e)}),{x:e},(function(r){return{x:function(){return r.neg()}}}),"Neg",{},n)}}),e0e=te({reciprocal_:function(t){var e=X(t,"x","reciprocal");return oe.runKernelFunc((function(n,r){var o=n.reciprocal(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}}))}}),t0e=te({round_:function(t){var e=X(t,"x","round");return oe.runKernelFunc((function(n){return n.round(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),XL=te({rsqrt_:function(t){var e=X(t,"x","rsqrt"),n=[e];return oe.runKernelFunc((function(r,o){var a=r.rsqrt(e);return o([e]),a}),{x:e},(function(r,o){var a=o[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),n0e=te({sigmoid_:function(t){var e=X(t,"x","sigmoid");return oe.runKernelFunc((function(n,r){var o=n.sigmoid(e);return r([o]),o}),{x:e},(function(n,r){var o=r[0];return{x:function(){return n.mul(o.mul(tt(1).sub(o)))}}}),"Sigmoid")}}),r0e=te({sign_:function(t){var e=X(t,"x","sign");return oe.runKernelFunc((function(n){return n.sign(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),o0e=te({isNaN_:function(t){var e=X(t,"x","isNaN");return oe.runKernelFunc((function(n){return n.isNaN(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),a0e=te({isInf_:function(t){var e=X(t,"x","isInf");return oe.runKernelFunc((function(n){return n.isInf(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),i0e=te({isFinite_:function(t){var e=X(t,"x","isFinite");return oe.runKernelFunc((function(n){return n.isFinite(e)}),{$x:e},(function(n){return{$x:function(){return $t(n)}}}))}}),s0e=te({sin_:function(t){var e=X(t,"x","sin"),n=[e];return oe.runKernelFunc((function(r,o){var a=r.sin(e);return o([e]),a}),{x:e},(function(r,o){var a=o[0];return{x:function(){return a.toFloat().cos().mul(r)}}}),"Sin",{},n)}}),u0e=te({sinh_:function(t){var e=X(t,"x","sinh");return oe.runKernelFunc((function(n,r){var o=n.sinh(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}}))}}),l0e=te({softplus_:function(t){var e=X(t,"x","softplus");return oe.runKernelFunc((function(n,r){var o=n.softplus(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}}))}}),c0e=te({sqrt_:function(t){var e=X(t,"x","sqrt");return oe.runKernelFunc((function(n,r){var o=n.sqrt(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}}))}}),d0e=te({step_:function(t,e){e===void 0&&(e=0);var n=X(t,"x","step");return oe.runKernelFunc((function(r){return r.step(n,e)}),{$x:n},(function(r){return{$x:function(){return $t(r)}}}))}}),f0e=te({tan_:function(t){var e=X(t,"x","tan");return oe.runKernelFunc((function(n,r){var o=n.tan(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}}))}}),h0e=te({tanh_:function(t){var e=X(t,"x","tanh");return oe.runKernelFunc((function(n,r){var o=n.tanh(e);return r([o]),o}),{x:e},(function(n,r){var o=r[0];return{x:function(){return tt(1).sub(o.square()).mulStrict(n)}}}),"Tanh",{},null,[!0])}}),p0e=te({addStrict_:function(t,e){var n=X(t,"a","addStrict"),r=X(e,"b","addStrict");return on(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),m0e=te({atan2_:function(t,e){var n,r=X(t,"a","atan2"),o=X(e,"b","atan2");n=Mn(r,o),r=n[0],o=n[1];var a=Mt(r.shape,o.shape);return oe.runKernelFunc((function(i,s){var u=i.atan2(r,o);return s([r,o]),u}),{$a:r,$b:o},(function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=wa(u.square(),l.square()),f=i.mul(l.div(d)),p=ir(u.shape,a);return p.length>0&&(f=f.sum(p)),f.reshape(u.shape)},$b:function(){var d=wa(u.square(),l.square()),f=VE(i.mul(u.div(d))),p=ir(l.shape,a);return p.length>0&&(f=f.sum(p)),f.reshape(l.shape)}}}))}}),v0e=te({divStrict_:function(t,e){var n=X(t,"a","div"),r=X(e,"b","div");return on(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),KL=te({floorDiv_:function(t,e){var n,r=X(t,"a","floorDiv"),o=X(e,"b","floorDiv");n=Mn(r,o),r=n[0],o=n[1];var a=Mt(r.shape,o.shape);return oe.runKernelFunc((function(i,s){var u=i.floorDiv(r,o);return s([r,o]),u}),{a:r,b:o},(function(i,s){var u=s[0],l=s[1];return{a:function(){var d=i.div(l.toFloat()),f=ir(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},b:function(){var d=i.mul(u.toFloat()),f=ir(l.shape,a);f.length>0&&(d=d.sum(f).reshape(l.shape));var p=l.square();return d.div(p.toFloat()).neg()}}}),"FloorDiv")}}),HE=te({maximum_:function(t,e){var n,r=X(t,"a","maximum"),o=X(e,"b","maximum");return n=Mn(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Mt(r.shape,o.shape),oe.runKernelFunc((function(a,i){var s=a.maximum(r,o);return i([r,o]),s}),{a:r,b:o},(function(a,i){var s=i[0],u=i[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}}),"Maximum")}}),g0e=te({maximumStrict_:function(t,e){var n=X(t,"a","maximumStrict"),r=X(e,"b","maximumStrict");return on(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),YL=te({minimum_:function(t,e){var n,r=X(t,"a","minimum"),o=X(e,"b","minimum");return n=Mn(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Mt(r.shape,o.shape),oe.runKernelFunc((function(a,i){var s=a.minimum(r,o);return i([r,o]),s}),{a:r,b:o},(function(a,i){var s=i[0],u=i[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}}),"Minimum")}}),y0e=te({minimumStrict_:function(t,e){var n=X(t,"a","minimumStrict"),r=X(e,"b","minimumStrict");return on(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),b0e=te({mod_:function(t,e){var n,r=X(t,"a","mod"),o=X(e,"b","mod");n=Mn(r,o),r=n[0],o=n[1];var a=Mt(r.shape,o.shape);return oe.runKernelFunc((function(i,s){var u=i.mod(r,o);return s([r,o]),u}),{$a:r,$b:o},(function(i,s){var u=s[0],l=s[1];return{$a:function(){var d=ir(u.shape,a);return d.length>0?i.sum(d).reshape(u.shape):i},$b:function(){var d=i.mul(u.div(l).floor().neg()),f=ir(l.shape,a);return f.length>0?d.sum(f).reshape(l.shape):d}}}))}}),x0e=te({modStrict_:function(t,e){var n=X(t,"a","modStrict"),r=X(e,"b","modStrict");return on(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Un=te({mul_:function(t,e){var n,r=X(t,"a","mul"),o=X(e,"b","mul");n=Mn(r,o),r=n[0],o=n[1];var a=Mt(r.shape,o.shape);return oe.runKernelFunc((function(i,s){var u=i.multiply(r,o);return s([r,o]),u}),{a:r,b:o},(function(i,s){var u=s[0],l=s[1];return{a:function(){var d=i.mul(l.toFloat()),f=ir(u.shape,a);return f.length>0?d.sum(f).reshape(u.shape):d},b:function(){var d=i.mul(u.toFloat()),f=ir(l.shape,a);return f.length>0?d.sum(f).reshape(l.shape):d}}}),"Mul")}}),w0e=te({mulStrict_:function(t,e){var n=X(t,"a","mul"),r=X(e,"b","mul");return on(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),gy=te({pow_:function(t,e){var n,r=X(t,"base","pow"),o=X(e,"exp","pow");n=Mn(r,o),r=n[0],o=n[1];var a=Mt(r.shape,o.shape),i=[r,o];return oe.runKernelFunc((function(s,u){var l=s.pow(r,o);return u([r,o,l]),l}),{a:r,b:o},(function(s,u){var l=u[0],d=u[1],f=u[2];return{a:function(){var p=d.toFloat(),m=s.mul(p.mul(l.pow(p.sub(tt(1))))),g=ir(l.shape,a);return g.length>0&&(m=m.sum(g)),m.reshape(l.shape)},b:function(){var p=l.greater(0),m=l.log().where(p,$t(l)),g=s.mul(f.mul(m)),y=ir(d.shape,a);return y.length>0&&(g=g.sum(y)),g.reshape(d.shape)}}}),"Pow",{},i,[!0])}}),S0e=te({powStrict_:function(t,e){return on(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),C0e=te({squaredDifferenceStrict_:function(t,e){var n=X(t,"a","squaredDifferenceStrict"),r=X(e,"b","squaredDifferenceStrict");return on(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),ja=te({sub_:function(t,e){var n,r=X(t,"a","sub"),o=X(e,"b","sub");n=Mn(r,o),r=n[0],o=n[1];var a=Mt(r.shape,o.shape);return oe.runKernelFunc((function(i){return i.subtract(r,o)}),{a:r,b:o},(function(i){return{a:function(){var s=i,u=ir(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=i,u=ir(o.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}}),"Sub")}}),E0e=te({subStrict_:function(t,e){var n=X(t,"a","subStrict"),r=X(e,"b","subStrict");return on(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Pu=te({div_:function(t,e){var n,r=X(t,"a","div"),o=X(e,"b","div");if(n=Mn(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return KL(r,o);var a={a:r,b:o};return oe.runKernelFunc((function(i,s){var u=i.realDivide(r,o);return s([r,o]),u}),a,null,j0,{})}});function QL(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=i[a],s.push(i[a]);var l=Vo(t.shape).map((function(d){return d/u})).concat([1]).slice(0,r);return[s,o,u,l]}var JL=30;function Rw(t){return t<=JL?t:tS(t,Math.floor(Math.sqrt(t)))}function R0e(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(a+" update.rank != "+(o+t.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+e.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+t[i+o]+")")}function _0e(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}R0e(n,e,t)}function yy(t,e,n){for(var r=e.shape.length,o=r>1?e.shape[r-1]:1,a=n.length,i=1,s=o;s<a;++s)i*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:Ke(e.shape)/u,sliceSize:i,strides:Vo(n.slice(0,o)).concat([1]),outputSize:Ke(n)}}function T0e(t,e,n){K(t.rank===e.length,(function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."})),K(t.rank===n.length,(function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."}));for(var r=function(a){K(e[a]+n[a]<=t.shape[a],(function(){return"Error in slice"+t.rank+"D: begin["+a+"] + size["+a+"] ("+(e[a]+n[a])+") would overflow input.shape["+a+"] ("+t.shape[a]+")"}))},o=0;o<t.rank;++o)r(o)}function oM(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function GE(t,e,n){for(var r=[],o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function A0e(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||a==null)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=J2(0,a,s-1)}function N0e(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||a==null)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=i>0?J2(0,a,s):J2(-1,a,s-1)}function ZL(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function ej(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function D0e(t,e){K(eS(t),(function(){return"The f passed in variableGrads(f) must be a function"})),K(e==null||Array.isArray(e)&&e.every((function(d){return d instanceof qd})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=e!=null;if(!n)for(var r in e=[],oe.registeredVariables)e.push(oe.registeredVariables[r]);var o=n?e.filter((function(d){return!d.trainable})):null,a=e.length;K((e=e.filter((function(d){return d.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."}));var i=oe.gradients(t,e,null,!0),s=i.value,u=i.grads;K(u.some((function(d){return d!=null})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),K(s.rank===0,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return e.forEach((function(d,f){u[f]!=null&&(l[d.name]=u[f])})),o?.forEach((function(d){return l[d.name]=null})),{value:s,grads:l}}function U0(t){return oe.customGrad(t)}var W0=te({softmax_:function(t,e){e===void 0&&(e=-1);var n=X(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return oe.runKernelFunc((function(r,o){var a=r.softmax(n,e);return o([a]),a}),{logits:n},(function(r,o){var a=o[0],i=r.mul(a);return{logits:function(){return i.sub(i.sum([e],!0).mul(a))}}}),"Softmax",{dim:e},[],[!0])}}),k0e=te({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=X(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return U0((function(r,o){var a=r.max(e,!0),i=r.sub(a),s=i.toFloat().sub(i.exp().sum(e,!0).log());return o([s]),{value:s,gradFunc:function(u,l){var d=l[0].exp();return u.sub(u.sum(e,!0).mul(d))}}}))(n)}}),Ma=te({transpose_:function(t,e){var n=X(t,"x","transpose");if(e==null&&(e=n.shape.map((function(o,a){return a})).reverse()),K(n.rank===e.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."})),e.forEach((function(o){K(o>=0&&o<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e}))})),n.rank<=1)return n.clone();var r={perm:e};return oe.runKernelFunc((function(o){return o.transpose(n,e)}),{x:n},null,"Transpose",r)}}),tj=(function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t})(),nj=(function(){function t(){}return t.prototype.time=function(e){return ve("time")},t.prototype.read=function(e){return ve("read")},t.prototype.readSync=function(e){return ve("readSync")},t.prototype.numDataIds=function(){return ve("numDataIds")},t.prototype.disposeData=function(e){return ve("disposeData")},t.prototype.write=function(e,n,r){return ve("write")},t.prototype.move=function(e,n,r,o){return ve("move")},t.prototype.memory=function(){return ve("memory")},t.prototype.floatPrecision=function(){return ve("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,o){return ve("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,ve("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return ve("slice")},t.prototype.stridedSlice=function(e,n,r,o){return ve("stridedSlice")},t.prototype.unstack=function(e,n){return ve("unstack")},t.prototype.reverse=function(e,n){return ve("reverse")},t.prototype.concat=function(e,n){return ve("concat")},t.prototype.neg=function(e){return ve("neg")},t.prototype.add=function(e,n){return ve("add")},t.prototype.addN=function(e){return ve("addN")},t.prototype.subtract=function(e,n){return ve("subtract")},t.prototype.multiply=function(e,n){return ve("multiply")},t.prototype.realDivide=function(e,n){return ve("realDivide")},t.prototype.floorDiv=function(e,n){return ve("floorDiv")},t.prototype.sum=function(e,n){return ve("sum")},t.prototype.prod=function(e,n){return ve("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return ve("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return ve("argMin")},t.prototype.argMax=function(e,n){return ve("argMax")},t.prototype.equal=function(e,n){return ve("equal")},t.prototype.notEqual=function(e,n){return ve("notEqual")},t.prototype.less=function(e,n){return ve("less")},t.prototype.lessEqual=function(e,n){return ve("lessEqual")},t.prototype.greater=function(e,n){return ve("greater")},t.prototype.greaterEqual=function(e,n){return ve("greaterEqual")},t.prototype.logicalNot=function(e){return ve("logicalNot")},t.prototype.logicalAnd=function(e,n){return ve("logicalAnd")},t.prototype.logicalOr=function(e,n){return ve("logicalOr")},t.prototype.where=function(e){return ve("where")},t.prototype.select=function(e,n,r){return ve("select")},t.prototype.topk=function(e,n,r){return ve("topk")},t.prototype.min=function(e,n){return ve("min")},t.prototype.minimum=function(e,n){return ve("minimum")},t.prototype.mod=function(e,n){return ve("mod")},t.prototype.max=function(e,n){return ve("max")},t.prototype.maximum=function(e,n){return ve("maximum")},t.prototype.all=function(e,n){return ve("all")},t.prototype.any=function(e,n){return ve("any")},t.prototype.squaredDifference=function(e,n){return ve("squaredDifference")},t.prototype.ceil=function(e){return ve("ceil")},t.prototype.floor=function(e){return ve("floor")},t.prototype.round=function(e){return ve("round")},t.prototype.sign=function(e){return ve("sign")},t.prototype.isNaN=function(e){return ve("isNaN")},t.prototype.isInf=function(e){return ve("isInf")},t.prototype.isFinite=function(e){return ve("isFinite")},t.prototype.pow=function(e,n){return ve("pow")},t.prototype.exp=function(e){return ve("exp")},t.prototype.expm1=function(e){return ve("expm1")},t.prototype.softmax=function(e,n){return ve("softmax")},t.prototype.log=function(e){return ve("log")},t.prototype.log1p=function(e){return ve("log1p")},t.prototype.sqrt=function(e){return ve("sqrt")},t.prototype.rsqrt=function(e){return ve("rsqrt")},t.prototype.square=function(e){return ve("square")},t.prototype.reciprocal=function(e){return ve("reciprocal")},t.prototype.relu=function(e){return ve("relu")},t.prototype.relu6=function(e){return ve("relu6")},t.prototype.prelu=function(e,n){return ve("prelu")},t.prototype.elu=function(e){return ve("elu")},t.prototype.eluDer=function(e,n){return ve("eluDer")},t.prototype.selu=function(e){return ve("selu")},t.prototype.int=function(e){return ve("int")},t.prototype.clip=function(e,n,r){return ve("clip")},t.prototype.abs=function(e){return ve("abs")},t.prototype.complexAbs=function(e){return ve("complexAbs")},t.prototype.sigmoid=function(e){return ve("sigmoid")},t.prototype.softplus=function(e){return ve("softplus")},t.prototype.sin=function(e){return ve("sin")},t.prototype.cos=function(e){return ve("cos")},t.prototype.tan=function(e){return ve("tan")},t.prototype.asin=function(e){return ve("asin")},t.prototype.acos=function(e){return ve("acos")},t.prototype.atan=function(e){return ve("atan")},t.prototype.atan2=function(e,n){return ve("atan2")},t.prototype.sinh=function(e){return ve("sinh")},t.prototype.cosh=function(e){return ve("cosh")},t.prototype.tanh=function(e){return ve("tanh")},t.prototype.asinh=function(e){return ve("asinh")},t.prototype.acosh=function(e){return ve("acosh")},t.prototype.atanh=function(e){return ve("atanh")},t.prototype.erf=function(e){return ve("erf")},t.prototype.step=function(e,n){return ve("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ve("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return ve("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return ve("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return ve("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ve("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return ve("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return ve("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return ve("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return ve("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return ve("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return ve("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return ve("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,o){return ve("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return ve("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return ve("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return ve("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return ve("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return ve("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,o){return ve("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return ve("reshape")},t.prototype.cast=function(e,n){return ve("cast")},t.prototype.tile=function(e,n){return ve("tile")},t.prototype.pad=function(e,n,r){return ve("pad")},t.prototype.transpose=function(e,n){return ve("transpose")},t.prototype.gather=function(e,n,r){return ve("gather")},t.prototype.gatherND=function(e,n){return ve("gatherND")},t.prototype.scatterND=function(e,n,r){return ve("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return ve("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return ve("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,o){return ve("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return ve("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,o){return ve("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return ve("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,o,a,i){return ve("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,o,a){return ve("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,o,a,i,s){return ve("LRNGrad")},t.prototype.multinomial=function(e,n,r,o){return ve("multinomial")},t.prototype.oneHot=function(e,n,r,o){return ve("oneHot")},t.prototype.cumsum=function(e,n,r,o){return ve("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,o,a){return ve("nonMaxSuppression")},t.prototype.fft=function(e){return ve("fft")},t.prototype.ifft=function(e){return ve("ifft")},t.prototype.complex=function(e,n){return ve("complex")},t.prototype.real=function(e){return ve("real")},t.prototype.imag=function(e){return ve("imag")},t.prototype.cropAndResize=function(e,n,r,o,a,i){return ve("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return ve("depthToSpace")},t.prototype.split=function(e,n,r){return ve("split")},t.prototype.sparseToDense=function(e,n,r,o){return ve("sparseToDense")},t.prototype.diag=function(e){return ve("diag")},t.prototype.fill=function(e,n,r){return ve("fill")},t.prototype.onesLike=function(e){return ve("onesLike")},t.prototype.zerosLike=function(e){return ve("zerosLike")},t.prototype.linspace=function(e,n,r){return ve("linspace")},t.prototype.dispose=function(){return ve("dispose")},t})();function ve(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Wl(t,e,n,r,o,a,i){i===void 0&&(i="channelsLast");var s,u=wy(e),l=u[0],d=u[1];if(i==="channelsLast")s=[l,d,t[3],t[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);s=[l,d,t[1],t[1]]}return nc(t,s,n,r,o,a,!1,i)}function by(t,e,n,r,o,a,i){i===void 0&&(i="NDHWC");var s,u,l=uS(e),d=l[0],f=l[1],p=l[2];if(i==="NDHWC")u="channelsLast",s=[d,f,p,t[4],t[4]];else{if(i!=="NCDHW")throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[d,f,p,t[1],t[1]]}return xy(t,s,n,r,o,!1,u,a)}function nc(t,e,n,r,o,a,i,s){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],d=u[1],f=u[2],p=u[3];if(s==="channelsLast")l=t[0],d=t[1],f=t[2],p=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],p=t[1],d=t[2],f=t[3]}var m,g=e[0],y=e[1],b=e[3],S=wy(n),C=S[0],E=S[1],_=wy(r),T=_[0],D=_[1],k=Ed(g,T),I=Ed(y,D),M=(function(W,q,P,z,U,H,L,$){var J,ne,ce;if(typeof W=="number"){J={top:W,bottom:W,left:W,right:W,type:W===0?"VALID":"NUMBER"};var be=(function(je,Le,ke,qe,nt){qe==null&&(qe=rj(je,Le,ke));var it=je[0],Ie=je[1],Me=qh((it-Le+2*qe)/ke+1,nt);K(qn(Me),(function(){return"The output # of rows ("+Me+") must be an integer. Change the stride and/or zero pad parameters"}));var Be=qh((Ie-Le+2*qe)/ke+1,nt);return K(qn(Be),(function(){return"The output # of columns ("+Be+") must be an integer. Change the stride and/or zero pad parameters"})),[Me,Be]})([q,P],H,z,W,$);ne=be[0],ce=be[1]}else if(W==="same"){ne=Math.ceil(q/z),ce=Math.ceil(P/U);var se=Math.max(0,(ne-1)*z+H-q),ie=Math.max(0,(ce-1)*U+L-P),fe=Math.floor(se/2),ge=se-fe,Oe=Math.floor(ie/2);J={top:fe,bottom:ge,left:Oe,right:ie-Oe,type:"SAME"}}else{if(W!=="valid")throw Error("Unknown padding parameter: "+W);J={top:0,bottom:0,left:0,right:0,type:"VALID"},ne=Math.ceil((q-H+1)/z),ce=Math.ceil((P-L+1)/U)}return{padInfo:J,outHeight:ne,outWidth:ce}})(o,d,f,C,E,k,I,a),O=M.padInfo,F=M.outHeight,j=M.outWidth,G=i?b*p:b;return s==="channelsFirst"?m=[l,G,F,j]:s==="channelsLast"&&(m=[l,F,j,G]),{batchSize:l,dataFormat:s,inHeight:d,inWidth:f,inChannels:p,outHeight:F,outWidth:j,outChannels:G,padInfo:O,strideHeight:C,strideWidth:E,filterHeight:g,filterWidth:y,effectiveFilterHeight:k,effectiveFilterWidth:I,dilationHeight:T,dilationWidth:D,inShape:t,outShape:m,filterShape:e}}function xy(t,e,n,r,o,a,i,s){a===void 0&&(a=!1),i===void 0&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],d=u[1],f=u[2],p=u[3],m=u[4];if(i==="channelsLast")l=t[0],d=t[1],f=t[2],p=t[3],m=t[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);l=t[0],m=t[1],d=t[2],f=t[3],p=t[4]}var g,y=e[0],b=e[1],S=e[2],C=e[4],E=uS(n),_=E[0],T=E[1],D=E[2],k=uS(r),I=k[0],M=k[1],O=k[2],F=Ed(y,I),j=Ed(b,M),G=Ed(S,O),W=(function(L,$,J,ne,ce,be,se,ie,fe,ge,Oe){var je,Le,ke,qe;if(typeof L=="number"){je={top:L,bottom:L,left:L,right:L,front:L,back:L,type:L===0?"VALID":"NUMBER"};var nt=(function(Wt,Fe,Ve,rt,Lt,Ot){Lt==null&&(Lt=rj(Wt,Fe,rt));var Vn=Wt[0],Qt=Wt[1],gn=Wt[2],kr=qh((Vn-Fe+2*Lt)/rt+1,Ot);K(qn(kr),(function(){return"The output # of depths ("+kr+") must be an integer. Change the stride and/or zero pad parameters"}));var Hr=qh((Qt-Fe+2*Lt)/rt+1,Ot);K(qn(Hr),(function(){return"The output # of rows ("+Hr+") must be an integer. Change the stride and/or zero pad parameters"}));var tr=qh((gn-Fe+2*Lt)/rt+1,Ot);return K(qn(tr),(function(){return"The output # of columns ("+tr+") must be an integer. Change the stride and/or zero pad parameters"})),[kr,Hr,tr,Ve]})([$,J,ne,1],ie,1,ce,L,Oe);Le=nt[0],ke=nt[1],qe=nt[2]}else if(L==="same"){Le=Math.ceil($/ce),ke=Math.ceil(J/be),qe=Math.ceil(ne/se);var it=(Le-1)*ce+ie-$,Ie=(ke-1)*be+fe-J,Me=(qe-1)*se+ge-ne,Be=Math.floor(it/2),Je=it-Be,ct=Math.floor(Ie/2),st=Ie-ct,$e=Math.floor(Me/2);je={top:ct,bottom:st,left:$e,right:Me-$e,front:Be,back:Je,type:"SAME"}}else{if(L!=="valid")throw Error("Unknown padding parameter: "+L);je={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Le=Math.ceil(($-ie+1)/ce),ke=Math.ceil((J-fe+1)/be),qe=Math.ceil((ne-ge+1)/se)}return{padInfo:je,outDepth:Le,outHeight:ke,outWidth:qe}})(o,d,f,p,_,T,D,F,j,G,s),q=W.padInfo,P=W.outDepth,z=W.outHeight,U=W.outWidth,H=a?C*m:C;return i==="channelsFirst"?g=[l,H,P,z,U]:i==="channelsLast"&&(g=[l,P,z,U,H]),{batchSize:l,dataFormat:i,inDepth:d,inHeight:f,inWidth:p,inChannels:m,outDepth:P,outHeight:z,outWidth:U,outChannels:H,padInfo:q,strideDepth:_,strideHeight:T,strideWidth:D,filterDepth:y,filterHeight:b,filterWidth:S,effectiveFilterDepth:F,effectiveFilterHeight:j,effectiveFilterWidth:G,dilationDepth:I,dilationHeight:M,dilationWidth:O,inShape:t,outShape:g,filterShape:e}}function rj(t,e,n,r){r===void 0&&(r=1);var o=Ed(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function wy(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function uS(t){return typeof t=="number"?[t,t,t]:t}function Ed(t,e){return e<=1?t:t+(t-1)*(e-1)}function qh(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Kd(t){var e=wy(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function to(t,e){return Kd(t)||Kd(e)}function $E(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function oj(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=Wn(t.shape),o=t.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!Pge(t.dtype,e))return oe.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var i=n.real(t);return a=i.cast(e),i.dispose(),a}if(e==="int32")return n.int(t);if(e==="bool"){var s=tt(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function lS(t,e){return oe.makeTensorFromDataId(t.dataId,e,t.dtype)}function aj(t,e,n){var r=(e-t)/(n-1),o=om(n,"float32");o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return Ha(o,"float32")}function cS(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function aM(t,e){return{real:t[2*e],imag:t[2*e+1]}}function I0e(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function M0e(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function O0e(t,e,n){var r=(function(a,i,s){return(function(u,l,d){for(var f=0,p=u.length,m=0,g=!1;f<p;){var y=d(l,u[m=f+(p-f>>>1)]);y>0?f=m+1:(p=m,g=!y)}return g?f:-f-1})(a,i,s||P0e)})(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function P0e(t,e){return t>e?1:t<e?-1:0}function qE(t,e,n,r,o){return ij(t,e,n,r,o,0).selectedIndices}function XE(t,e,n,r,o,a){var i=ij(t,e,n,r,o,a);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function ij(t,e,n,r,o,a,i,s){s===void 0&&(s=!1);for(var u=Array.from(e).map((function(_,T){return{score:_,boxIndex:T,suppressBeginIndex:0}})).filter((function(_){return _.score>o})).sort(iM),l=a>0?-.5/a:0,d=[],f=[];d.length<n&&u.length>0;){var p=u.pop(),m=p.score,g=p.boxIndex,y=p.suppressBeginIndex;if(m<o)break;for(var b=!1,S=d.length-1;S>=y;--S){var C=F0e(t,g,d[S]);if(C>=r){b=!0;break}if(p.score=p.score*B0e(r,l,C),p.score<=o)break}p.suppressBeginIndex=d.length,b||(p.score===m?(d.push(g),f.push(p.score)):p.score>o&&O0e(u,p,iM))}var E=d.length;return s&&(d.fill(0,E),f.fill(0,E)),{selectedIndices:Ha(d,"int32"),selectedScores:Ha(f,"float32"),numValidOutputs:tt(E,"int32")}}function F0e(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),d=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(s-a)*(u-i),g=(f-l)*(p-d);if(m<=0||g<=0)return 0;var y=Math.max(a,l),b=Math.max(i,d),S=Math.min(s,f),C=Math.min(u,p),E=Math.max(S-y,0)*Math.max(C-b,0);return E/(m+g-E)}function B0e(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function iM(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function sj(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map((function(a){o[n]=a;var i=t.slice(r,o);return r[n]+=a,i}))}function uj(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=St(n,t.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(t.rank),s=0;s<i.length;s++)i[s]=a[s]%t.shape[s];var u=t.locToIndex(i);o.values[r]=t.values[u]}return o.toTensor()}function lj(t,e,n,r,o){for(var a=e[e.length-1],i=[t.length/a,a],s=i[0],u=i[1],l=$d(n,s*r),d=$d("int32",s*r),f=0;f<s;f++){for(var p=f*u,m=t.subarray(p,p+u),g=[],y=0;y<m.length;y++)g.push({value:m[y],index:y});g.sort((function(_,T){return T.value-_.value}));var b=f*r,S=l.subarray(b,b+r),C=d.subarray(b,b+r);for(y=0;y<r;y++)S[y]=g[y].value,C[y]=g[y].index}var E=e.slice();return E[E.length-1]=r,[Rr(l,E,n),Rr(d,E,"int32")]}function KE(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=St(t,"int32"),a=St([n.length,t.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*t.length;a.values.set(i,s)}return a.toTensor()}var L0e=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((function(o,a){return"T"+a}));var n=[];this.variableNames.forEach((function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")}));var r=this.variableNames.map((function(o){return"v"+o})).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},j0e=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((function(o,a){return"T"+a}));var n=[];this.variableNames.forEach((function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")}));var r=this.variableNames.map((function(o){return"v"+o})).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},z0e=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function cj(t,e){return["x","y","z","w","u","v"].slice(0,e).map((function(n){return t+"."+n}))}function lo(t,e){return e===1?[t]:cj(t,e)}function jr(){var t,e,n,r,o,a,i,s,u,l;return Ce().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Tl(t,e,n){n===void 0&&(n="index");var r=Vo(e);return r.map((function(o,a){return"int "+t[a]+" = "+n+" / "+o+"; "+(a===r.length-1?"int "+t[a+1]+" = "+n+" - "+t[a]+" * "+o:"index -= "+t[a]+" * "+o)+";"})).join("")}function YE(t){var e=Vo(t).map((function(n){return n.toString()}));return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var dj=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function U0e(t,e,n,r){var o=[];t.forEach((function(m){var g=Ke(m.shapeInfo.logicalShape);m.shapeInfo.isUniform?o.push("uniform float "+m.name+(g>1?"["+g+"]":"")+";"):(o.push("uniform sampler2D "+m.name+";"),o.push("uniform int offset"+m.name+";"))}));var a,i,s=o.join(`
`),u=t.map((function(m){return(function(g,y,b){b===void 0&&(b=!1);var S="";S+=b?fj(g):ad(g);var C=g.shapeInfo.logicalShape,E=y.logicalShape;return C.length<=E.length&&(S+=b?(function(_,T){var D,k=_.name,I=k.charAt(0).toUpperCase()+k.slice(1),M="get"+I+"AtOutCoords",O=_.shapeInfo.logicalShape.length,F=T.logicalShape.length,j=xu(_.shapeInfo.logicalShape,T.logicalShape),G=Cn(F),W=F-O,q=["x","y","z","w","u","v"];D=O===0?"":F<2&&j.length>=1?"coords = 0;":j.map((function(J){return"coords."+q[J+W]+" = 0;"})).join(`
`);var P="";P=F<2&&O>0?"coords":_.shapeInfo.logicalShape.map((function(J,ne){return"coords."+q[ne+W]})).join(", ");var z="return outputValue;",U=Ke(_.shapeInfo.logicalShape)===1,H=Ke(T.logicalShape)===1;if(O!==1||U||H){if(U&&!H)z=F===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(j.length){var L=O-2,$=O-1;j.indexOf(L)>-1&&j.indexOf($)>-1?z="return vec4(outputValue.x);":j.indexOf(L)>-1?z="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":j.indexOf($)>-1&&(z="return vec4(outputValue.xx, outputValue.zz);")}}else z=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+M+`() {
      `+G+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+I+"("+P+`);
      `+z+`
    }
  `})(g,y):(function(_,T){var D=_.name,k=D.charAt(0).toUpperCase()+D.slice(1),I="get"+k+"AtOutCoords",M=T.texShape,O=_.shapeInfo.texShape,F=_.shapeInfo.logicalShape.length,j=T.logicalShape.length;if(!_.shapeInfo.isUniform&&F===j&&_.shapeInfo.flatOffset==null&&mr(O,M))return`
      float `+I+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var G,W=Cn(j),q=xu(_.shapeInfo.logicalShape,T.logicalShape),P=j-F,z=["x","y","z","w","u","v"];G=F===0?"":j<2&&q.length>=1?"coords = 0;":q.map((function(H){return"coords."+z[H+P]+" = 0;"})).join(`
`);var U="";return U=j<2&&F>0?"coords":_.shapeInfo.logicalShape.map((function(H,L){return"coords."+z[L+P]})).join(", "),`
    float `+I+`() {
      `+W+` coords = getOutputCoords();
      `+G+`
      return get`+k+"("+U+`);
    }
  `})(g,y)),S})(m,e,r)})).join(`
`),l=e.texShape,d=jr(),f=(function(m){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+m.texture2D+`(textureSampler, uv).r;
    }
  `})(d),p=(function(m){return m.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+m.varyingFs+` vec2 resultUV;
    `+m.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+m.defineSpecialNaN+`
    `+m.defineSpecialInf+`
    `+m.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+W0e+`
    `+V0e+`
    `+H0e+`
  `})(d);return e.isPacked?(a=(function(m,g){switch(m.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(_,T){var D=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `})(0,g);case 2:return(function(_,T){var D=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];if(mr(_,T))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var k=Math.ceil(_[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+k+`);
      int c = imod(index, `+k+`) * 2;

      return ivec2(r, c);
    }
  `})(m,g);case 3:return y=m,b=g,S=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],C=Math.ceil(y[2]/2),E=C*Math.ceil(y[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      int b = index / `+E+`;
      index -= b * `+E+`;

      int r = 2 * (index / `+C+`);
      int c = imod(index, `+C+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return(function(_,T){for(var D=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)],k=Math.ceil(_[_.length-1]/2),I=k*Math.ceil(_[_.length-2]/2),M=I,O="",F="b, r, c",j=2;j<_.length-1;j++)M*=_[_.length-j-1],O=`
      int b`+j+" = index / "+M+`;
      index -= b`+j+" * "+M+`;
    `+O,F="b"+j+", "+F;return`
    ivec`+_.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+O+`

      int b = index / `+I+`;
      index -= b * `+I+`;

      int r = 2 * (index / `+k+`);
      int c = imod(index, `+k+`) * 2;

      return ivec`+_.length+"("+F+`);
    }
  `})(m,g)}var y,b,S,C,E})(e.logicalShape,l),i=(function(m){return`
    void setOutput(vec4 val) {
      `+m.output+` = val;
    }
  `})(d)):(a=(function(m,g){switch(m.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(S,C){return C[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return resTexRC.x * `+C[1]+` + resTexRC.y;
    }
  `})(0,g);case 2:return(function(S,C){return mr(S,C)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `:S[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+C[0]+", "+C[1]+`));
        int index = resTexRC.x * `+C[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:S[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+C[0]+", "+C[1]+`));
        int index = resTexRC.x * `+C[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = index / `+S[1]+`;
      int c = index - r * `+S[1]+`;
      return ivec2(r, c);
    }
  `})(m,g);case 3:return y=g,b=Tl(["r","c","d"],m),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      `+b+`
      return ivec3(r, c, d);
    }
  `;case 4:return(function(S,C){var E=Tl(["r","c","d","d2"],S);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      `+E+`
      return ivec4(r, c, d, d2);
    }
  `})(m,g);case 5:return(function(S,C){var E=Tl(["r","c","d","d2","d3"],S);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+C[0]+`,
                             `+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+E+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `})(m,g);case 6:return(function(S,C){var E=Tl(["r","c","d","d2","d3","d4"],S);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+E+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `})(m,g);default:throw new Error(m.length+"-D output sampling is not yet supported")}var y,b})(e.logicalShape,l),i=(function(m){return`
    void setOutput(float val) {
      `+m.output+` = vec4(val, 0, 0, 0);
    }
  `})(d)),r&&(p+=G0e),[p,f,i,s,a,u,n].join(`
`)}function ad(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return(function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var a=n.shapeInfo.texShape,i=a[0],s=a[1];if(i===1&&s===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],d=u[1],f=fl(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+l+", "+d+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(t);case 1:return(function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+Yc(n)+`
      }
    `;var a=n.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=fl(r);return s===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+i+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:i===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+i+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(t);case 2:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=n.shapeInfo.texShape;if(i!=null&&mr(r,i)){var s=i[0],u=i[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var l=Sl(r),d=l.newShape,f=l.keptDims,p=d;if(p.length<r.length){var m=id(n,p);return`
      `+ad(m)+`
      float `+a+`(int row, int col) {
        return `+a+"("+sd(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Yc(n)+`
      }
    `;var g=i[0],y=i[1],b=fl(o);return y===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+g+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:g===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+y+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+b+`;
    vec2 uv = uvFromFlat(`+g+", "+y+`, index);
    return sampleTexture(`+o+`, uv);
  }
`})(t);case 3:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[1]*r[2],s=r[2],u=Sl(r),l=u.newShape,d=u.keptDims,f=l;if(f.length<r.length){var p=id(n,f);return`
        `+ad(p)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+sd(["row","col","depth"],d)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+i+", "+s+`, 1)));
        `+Yc(n)+`
      }
    `;var m=n.shapeInfo.texShape,g=m[0],y=m[1],b=n.shapeInfo.flatOffset;if(y===i&&b==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+y+".0, "+g+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(y===s&&b==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+y+".0, "+g+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var S=fl(o);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+i+" + col * "+s+" + depth + "+S+`;
        vec2 uv = uvFromFlat(`+g+", "+y+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `})(t);case 4:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[3],s=r[2]*i,u=r[1]*s,l=Sl(r),d=l.newShape,f=l.keptDims;if(d.length<r.length){var p=id(n,d);return`
      `+ad(p)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+sd(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+i+`, 1)));
        `+Yc(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,y=g[0],b=g[1];if(b===u&&m==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(b===i&&m==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var S=fl(o);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+i+` + depth2;
      vec2 uv = uvFromFlat(`+y+", "+b+", index + "+S+`);
      return sampleTexture(`+o+`, uv);
    }
  `})(t);case 5:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[4],s=r[3]*i,u=r[2]*s,l=r[1]*u,d=Sl(r),f=d.newShape,p=d.keptDims;if(f.length<r.length){var m=id(n,f);return`
      `+ad(m)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+sd(["row","col","depth","depth2","depth3"],p)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+i+`)) +
          depth3;
        `+Yc(n)+`
      }
    `;var g=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,b=y[0],S=y[1];if(S===l&&g==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+b+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(S===i&&g==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+b+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var C=fl(o);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+i+" + depth3 + "+C+`;
      vec2 uv = uvFromFlat(`+b+", "+S+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `})(t);case 6:return(function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=Sl(r),s=i.newShape,u=i.keptDims;if(s.length<r.length){var l=id(n,s);return`
      `+ad(l)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+sd(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var d=r[5],f=r[4]*d,p=r[3]*f,m=r[2]*p,g=r[1]*m;if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+g+", "+m+", "+p+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Yc(n)+`
      }
    `;var y=n.shapeInfo.flatOffset,b=n.shapeInfo.texShape,S=b[0],C=b[1];if(C===g&&y==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+m+", "+p+", "+f+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+C+".0, "+S+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(C===d&&y==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+C+".0, "+S+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var E=fl(o);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+g+" + col * "+m+" + depth * "+p+` +
          depth2 * `+f+" + depth3 * "+d+" + depth4 + "+E+`;
      vec2 uv = uvFromFlat(`+S+", "+C+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `})(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function fj(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=jr(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return(function(o){var a=o.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=o.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=jr();return`
    vec4 `+i+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+a+`, uv);
    }
  `})(t);case 2:return(function(o){var a=o.shapeInfo.logicalShape,i=o.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,l=u[0],d=u[1],f=jr();if(u!=null&&mr(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+l+`.0);

        return `+f.texture2D+"("+i+`, uv);
      }
    `;var p=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],m=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+m+", "+p[0]+", "+p[1]+`, row, col);
      return `+f.texture2D+"("+i+`, uv);
    }
  `})(t);case 3:return(function(o){var a=o.shapeInfo.logicalShape,i=o.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var d=a.slice(1),f=id(o,d);return`
        `+fj(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+sd(["b","row","col"],[1,2])+`);
        }
      `}var p=l[0],m=l[1],g=Math.ceil(a[2]/2),y=g*Math.ceil(a[1]/2),b=jr();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+p+", "+m+", "+y+", "+g+`, b, row, col);
      return `+b.texture2D+"("+i+`, uv);
    }
  `})(t);default:return(function(o){for(var a=o.shapeInfo.logicalShape,i=a.length,s=o.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=o.shapeInfo.texShape,d=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=d[0],p=d[1],m=Math.ceil(a[i-1]/2),g=m*Math.ceil(a[i-2]/2),y="int b, int row, int col",b="b * "+g+" + (row / 2) * "+m+" + (col / 2)",S=2;S<i-1;S++)y="int b"+S+", "+y,g*=a[i-S-1],b="b"+S+" * "+g+" + "+b;var C=jr();return`
    vec4 `+u+"("+y+`) {
      int index = `+b+`;
      int texR = index / `+p+`;
      int texC = index - texR * `+p+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+", "+f+`);
      return `+C.texture2D+"("+s+`, uv);
    }
  `})(t)}}var W0e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,V0e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,H0e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,G0e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function fl(t){return"offset"+t}function Yc(t){var e=t.name,n=Ke(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Cn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function id(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function sd(t,e){return e.map((function(n){return t[n]})).join(", ")}var $0e=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,K(t.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var o=t[t.length-1],a=Math.ceil(o/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,d=Cn(l),f=lo("coords",l);if(a===1){var p=Cn(s=l+1);i=`
        `+p+" sourceLocR = "+p+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+p+" sourceLocG = "+p+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+p+" sourceLocA = "+p+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+p+" sourceLocB = "+p+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,i=`
        `+d+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+d+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+d+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+d+` sourceLocB = coords;
        --`+f[l-2]+";";var m=["x","y","z","w","u","v"].slice(0,s),g="."+m[s-1],y=m.map((function(I){return"int "+I})),b=lo("sourceLocR",s-1).concat("inIdx.r"),S=lo("sourceLocG",s-1).concat("inIdx.g"),C=lo("sourceLocB",s-1).concat("inIdx.b"),E=lo("sourceLocA",s-1).concat("inIdx.a"),_=n==="max"?"greaterThan":"lessThan",T=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+E.join()+")));",D=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+E.join()+") : 0.)",k=r?"":`
      float getBestIndicesAChannel(`+y.join()+`) {
        return getChannel(getBestIndicesA(`+m.join()+`),
                                          vec2(`+m.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+y.join()+`) {
        return getChannel(getA(`+m.join()+`),
                               vec2(`+m.slice(-2).join()+`));
      }
      `+k+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+g+", sourceLocG"+g+`,
          sourceLocB`+g+", sourceLocA"+g+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+T+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+_+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},q0e=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,d=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+d+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},X0e=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth,m=d-1-t.padInfo.front,g=f-1-t.padInfo.top,y=p-1-t.padInfo.left,b=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+m+", "+g+", "+y+`);
      const float avgMultiplier = float(`+b+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+p+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},K0e=function(t,e,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Mt(t,e),Mt(t,n);var i="0.0";r!=null&&(Mt(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";o!=null&&(Mt(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Y0e=function(t,e,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Mt(t,e),Mt(t,n);var i="vec4(0.0)";r!=null&&(Mt(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(Mt(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Q0e="return areal * breal - aimag * bimag;",J0e="return areal * bimag + aimag * breal;",sM=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Mt(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},_w="return a + b;",Tw="return a - b;",uM="return a * b;",Z0e=`
if (a == b) {
  return 1.0;
};
return a / b;`,hj="return (a < 0.) ? b * a : a;",jn=function(t,e,n){this.variableNames=["A","B"],this.outputShape=Mt(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},ebe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,pj=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,ui=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Mt(e,n);var o=this.outputShape.length,a="";if(r)if(o===0||Ke(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+Cn(o)+` coords = getOutputCoords();
        `,o===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var i=lo("coords",o);a+=`
            bool nextRowOutOfBounds =
              (`+i[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+i[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},tbe=(function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(a,"maxVal")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t})(),nbe=(function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(a,"maxVal")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t})(),rbe=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},obe=function(t){this.outputShape=[],this.outputShape=Xd(t,1),this.variableNames=t.map((function(s,u){return"T"+u}));var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var o=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=e.length,i=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},abe=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Xd(t,e);var n=this.outputShape,r=n.length,o=Cn(r),a=lo("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((function(b,S){return"T"+S}));var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=i[e],d=i.slice(-2),f=i.join(),p="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+d.join()+`));
        }`;for(u=1;u<s.length;u++){var m=s[u-1];p+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+eg(i,l,m)+`),
            vec2(`+eg(d,l,m)+`));
        }`}var g=s.length,y=s[s.length-1];p+=`
        return getChannel(
          getT`+g+"("+eg(i,l,y)+`),
          vec2(`+eg(d,l,y)+"));",this.userCode=`
      float getValue(`+i.map((function(b){return"int "+b}))+`) {
        `+p+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+n[r-2]+` &&
            `+a[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function eg(t,e,n){var r=t.indexOf(e);return t.map((function(o,a){return a===r?o+" - "+n:o})).join()}var ibe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},sbe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=t.dataFormat==="channelsLast",i=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=a?1:2,l=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},ube=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,a=t.padInfo.top,i=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+o+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+a+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},lbe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},cbe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},dbe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},lM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,a=t.padInfo.left,i=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,d=t.filterHeight,f=t.filterWidth,p=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g=t.dataFormat==="channelsLast",y=g?1:2,b=g?2:3,S=g?3:1,C="",E="";n&&(C=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,E="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+C+`

      const ivec2 strides = ivec2(`+i+", "+s+`);
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+S+`];

        ivec2 xRCCorner =
            ivec2(coords[`+y+"], coords["+b+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+p+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+g+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(m===1)+`) {

              if (`+g+`) {
                dotProd +=
                    getX(batch, xR, xC, `+p+`) *
                    getW(wR, wC, `+p+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+p+`, xR, xC) *
                    getW(wR, wC, `+p+`, d2);
              }

            } else if (`+(m===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+p+`, d2),
                getW(wR, wC, `+p+` + 1, d2)
              );

              if (`+g+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+p+`),
                  getX(batch, xR, xC, `+p+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+p+`, xR, xC),
                  getX(batch, `+p+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(m===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+p+`, d2),
                getW(wR, wC, `+p+` + 1, d2),
                getW(wR, wC, `+p+` + 2, d2)
              );

              if (`+g+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+p+`),
                  getX(batch, xR, xC, `+p+` + 1),
                  getX(batch, xR, xC, `+p+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+p+`, xR, xC),
                  getX(batch, `+p+` + 1, xR, xC),
                  getX(batch, `+p+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+_+`
        `+E+`
        setOutput(result);
      }
    `},fbe=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,m=4*Math.floor(t.inChannels/4),g=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+a+", "+i+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+p+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+m+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(g===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+m+`) *
                  getW(wF, wR, wC, `+m+`, d2);
              } else if (`+(g===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(g===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1),
                  getX(batch, xF, xR, xC, `+m+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2),
                  getW(wF, wR, wC, `+m+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},cM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,a=t.inWidth,i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,d=t.dilationHeight,f=t.dilationWidth,p=t.filterHeight,m=t.filterWidth,g=t.outChannels/t.inChannels,y="",b="";n&&(y=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,b="result = activation(result);");var S=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+y+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+g+`;
        int q = d2 - d1 * `+g+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+p+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+S+`
        `+b+`
        setOutput(result);
      }
    `},dM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,a=t.inWidth,i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,d=t.dilationHeight,f=t.dilationWidth,p=t.filterHeight,m=t.filterWidth,g=m,y="int xR; int xC; int xCOffset;",b=0;b<p;b++)for(var S=0;S<m;S++)y+=`
          vec4 xTexelR`+b+"C"+2*S+` = vec4(0.);
          vec4 wR`+b+"C"+S+` = vec4(0.);
          vec4 xR`+b+"C"+S+" = vec4(0.);";for(b=0;b<p;b++)for(var C=0;C<g;C++){if(y+=`
          xR = xRCorner + `+b*d+`;
          xC = xCCorner + `+(S=2*C)*f+`;
        `,l===1){if(S<m&&(y+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+b+"C"+S+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+b+"C"+S+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+b+"C"+S+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+b+"C"+S+" = vec4(previous.zw, xTexelR"+b+"C"+S+`.xy);
                } else {
                  xR`+b+"C"+S+" = vec4(0, 0, xTexelR"+b+"C"+S+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+b+"C"+S+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+S+` = vec4(0.);
                }

                xR`+b+"C"+S+" = xTexelR"+b+"C"+S+`;
              `,S+1<m)){var E=s%2==0?CL(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(y+=`
                  xCOffset = xC + `+s%2+" + "+E+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+b+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(y+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+b+"C"+S+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+b+"C"+S+` = vec4(0.);
                    }
                  `),y+=`
                  xR`+b+"C"+(S+1)+` = vec4(
                    xTexelR`+b+"C"+S+".zw, xTexelR"+b+"C"+(S+2)+`.xy);
                `):y+=`
                  xCOffset = xC + `+E+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+b+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+b+"C"+(S+1)+" = xTexelR"+b+"C"+(S+2)+`;
                `}}else S<m&&(y+=`
              if(xR >= 0 && xR < `+o+`) {
            `,s%2==1?(y+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+b+"C"+S+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+S+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+b+"C"+(S+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+b+"C"+(S+2)+` = vec4(0.);
                }

                xR`+b+"C"+S+` = vec4(
                  xTexelR`+b+"C"+S+".zw, xTexelR"+b+"C"+(S+2)+`.zw);
              `,S+1<m&&(y+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+b+"C"+(S+1)+" = vec4(xTexelR"+b+"C"+(S+2)+`.xy, final.xy);
                `)):(y+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+b+"C"+S+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+S+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+b+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+(S+2)+` = vec4(0.);
                }

                xR`+b+"C"+S+` = vec4(
                  xTexelR`+b+"C"+S+".xy, xTexelR"+b+"C"+(S+2)+`.xy);
              `,S+1<m&&(y+=`
                  xR`+b+"C"+(S+1)+` = vec4(
                    xTexelR`+b+"C"+S+".zw, xTexelR"+b+"C"+(S+2)+`.zw);
                `)),y+="}");S<m&&(y+=`
            vec4 wTexelR`+b+"C"+S+" = getW("+b+", "+S+`, d1, q);
            wR`+b+"C"+S+" = vec4(wTexelR"+b+"C"+S+".xz, wTexelR"+b+"C"+S+`.xz);
          `,S+1<m&&(y+=`
              vec4 wTexelR`+b+"C"+(S+1)+" = getW("+b+", "+(S+1)+`, d1, q);
              wR`+b+"C"+(S+1)+` =
                vec4(wTexelR`+b+"C"+(S+1)+".xz, wTexelR"+b+"C"+(S+1)+".xz);"))}for(b=0;b<p;b++)for(S=0;S<m;S++)y+="dotProd += xR"+b+"C"+S+" * wR"+b+"C"+S+";";var _="",T="";n&&(_=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,T="result = activation(result);");var D=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+y+`

        vec4 result = dotProd;
        `+D+`
        `+T+`
        setOutput(result);
      }
    `},hbe=function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],i=t[1],s=t[2],u=t[3],l=e[0],d=n[0],f=n[1];this.outputShape=[l,d,f,u];var p=r==="bilinear"?1:0,m=[i-1+".0",s-1+".0"],g=m[0],y=m[1],b=d>1?[""+(i-1)/(d-1),"(y2-y1) * height_ratio","y1*"+g+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+g],S=b[0],C=b[1],E=b[2],_=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+y+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+y],T=_[0],D=_[1],k=_[2];this.userCode=`
      const float height_ratio = float(`+S+`);
      const float width_ratio = float(`+T+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+C+`;
        float width_scale = `+D+`;

        float in_y = `+E+`;
        if( in_y < 0.0 || in_y > `+g+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+k+`;
        if( in_x < 0.0 || in_x > `+y+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+p+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},pbe=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],a=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Cn(r)+` coords = getOutputCoords();
        int end = `+fM(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+fM(r,"coords")+` = idx;
          val += getX(`+(function(i,s){if(i===1)return""+s;if(i===2)return s+".x, "+s+".y";if(i===3)return s+".x, "+s+".y, "+s+".z";if(i===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+i+" is not yet supported")})(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function fM(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var mbe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=yp.DENSE;var e=$h(t),n=jr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Tl(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},vbe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=yp.DENSE;var e=$h(t),n=jr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Tl(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},gbe=(function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t})(),ybe=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},bbe=function(t){this.variableNames=["A"],this.outTexUsage=Bo.DOWNLOAD;var e=jr();this.outputShape=t,this.userCode=`
      `+dj+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},xbe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Bo.DOWNLOAD;var e=jr();this.outputShape=t,this.userCode=`
      `+dj+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},wbe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=jr(),o=e[0],a=e[1];this.outputShape=t;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`
      `+YE(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+i+`, 0., 0., 0.);
      }
    `},Sbe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=jr(),o=e[0],a=e[1];this.outputShape=t;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var d=2*u+l;i+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+YE(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+i+`

        `+r.output+" = "+s+`;
      }
    `},Cbe="return real * expR - imag * expI;",Ebe="return real * expI + imag * expR;",hM=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Rbe=(function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,e)}},t})(),_be=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=Cn(this.rank),a=(function(i,s){var u=i.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],f=0;f<i.length;f++)f===s?d.push("int(getIndices("+l[f]+"))"):d.push(""+l[f]);return d.join()})(t,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},Tbe=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Cn(e.length),o=Cn(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Abe(t,e){var n=jr();return Qge(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Nbe(t,e){return nye(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Dbe(t,e){return rye(t,e,new Uint16Array([0,1,2,2,1,3]))}function im(t,e,n,r,o,a,i){aye(n,r);var s=oye(t,e),u=t.TEXTURE_2D;return et(t,e,(function(){return t.bindTexture(u,s)})),et(t,e,(function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)})),et(t,e,(function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)})),et(t,e,(function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)})),et(t,e,(function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)})),et(t,e,(function(){return t.texImage2D(u,0,o,n,r,0,a,i,null)})),et(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)})),s}function kbe(t,e,n,r,o){var a=B0(n,r);return im(t,e,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function Ibe(t,e,n,r,o){var a=B0(n,r);return im(t,e,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function Mbe(t,e,n,r,o){var a=B0(n,r);return im(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function Obe(t,e,n,r,o){var a=am(n,r);return im(t,e,a[0],a[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function Pbe(t,e,n,r,o){var a=am(n,r);return im(t,e,a[0],a[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function Fbe(t,e,n,r){return et(t,e,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),eM(t,e,n,"clipSpacePos",r,3,20,0)&&eM(t,e,n,"uv",r,2,20,12)}function Bbe(t,e,n,r,o,a,i){var s,u,l;et(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)})),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*o*4),u=t.FLOAT,l=i.internalFormatPackedFloat),s.set(a),et(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,o,0,t.RGBA,u,s)})),et(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function Lbe(t,e,n,r){et(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,n)})),r.data instanceof Uint8Array?et(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)})):et(t,e,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)})),et(t,e,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}function jbe(t,e,n,r,o){var a=t.createBuffer();et(t,e,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)}));var i=16*n*r;return et(t,e,(function(){return t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)})),et(t,e,(function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)})),et(t,e,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)})),a}function zbe(t,e,n){var r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function Ube(t,e,n,r,o){var a=B0(n,r),i=a[0],s=a[1],u=new Uint8Array(n*r*4);return et(t,e,(function(){return t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function Wbe(t,e,n,r,o,a,i,s){var u=t,l=new Float32Array((function(d,f){var p=am(d,f);return p[0]*p[1]*4})(a,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function Vbe(t,e,n,r){var o=new Float32Array(n*r*4);return et(t,e,(function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,o)})),o}var Hbe=(function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Ce().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,$ge(n,e)):this.gl=Pi(n);var r="WEBGL_color_buffer_float";if(Ce().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Yv(this.gl,this.debug,"OES_texture_float"),ma(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Yv(this.gl,this.debug,"OES_texture_half_float");else if(Ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ma(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Yv(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ma(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ma(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Nbe(this.gl,this.debug),this.indexBuffer=Dbe(this.gl,this.debug),this.framebuffer=iye(this.gl,this.debug),this.textureConfig=zE(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return Ce().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;et(n,this.debug,(function(){return n.finish()})),et(n,this.debug,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)})),et(n,this.debug,(function(){return n.deleteFramebuffer(e.framebuffer)})),et(n,this.debug,(function(){return n.bindBuffer(n.ARRAY_BUFFER,null)})),et(n,this.debug,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)})),et(n,this.debug,(function(){return n.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),kbe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),Ibe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),Mbe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),Lbe(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,o){this.throwIfDisposed(),Bbe(this.gl,this.debug,e,n,r,o,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),Pbe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),Obe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(tM(this.gl,this.debug,this.framebuffer),this.outputTexture=null),et(this.gl,this.debug,(function(){return n.gl.deleteTexture(e)}))},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,(function(){return Ube(o.gl,o.debug,n,r,o.textureConfig)}))},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,o,a,i){return Wbe(this.gl,e,0,0,0,a,i,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return zbe(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var o=jbe(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,o=this;if(Ce().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=i}else Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,(function(){return Vbe(o.gl,o.debug,n,r)}))},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=Jge(n,this.debug,e),o=Abe(n,this.debug),a=eye(n,this.debug);return et(n,this.debug,(function(){return n.attachShader(a,o)})),et(n,this.debug,(function(){return n.attachShader(a,r)})),tye(n,this.debug,a),this.debug&&Sw(n,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=Fbe(n,this.debug,this.program,this.vertexBuffer)),a},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&et(this.gl,this.debug,(function(){return n.gl.deleteProgram(e)}))},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Sw(this.gl,this.debug,this.program),et(this.gl,this.debug,(function(){return n.gl.useProgram(e)}))},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?uye(this.gl,this.debug,e,n):lye(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),et(this.gl,this.debug,(function(){return r.gl.getAttribLocation(e,n)}))},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),cye(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var o=am(n,r),a=o[0],i=o[1];this.setOutputMatrixTextureDriver(e,a,i)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&Sw(this.gl,this.debug,this.program),Qv(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),et(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),et(this.gl,this.debug,(function(){return e.gl.finish()}))},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Yv(this.gl,this.debug,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),a=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,a),a},t.prototype.endQuery=function(){if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return Ye(this,void 0,void 0,(function(){var n=this;return Qe(this,(function(r){switch(r.label){case 0:return[4,KI((function(){return n.disposed||n.isQueryAvailable(e,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return r.sent(),[2,this.getQueryTime(e,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(e,o.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise((function(r){n.addItemToPoll((function(){return e.isFencePassed()}),(function(){return r()}))}))},t.prototype.pollItems=function(){for(var e=(function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1})(this.itemsToPoll.map((function(r){return r.isDoneFn}))),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||KI((function(){return r.pollItems(),r.itemsToPoll.length===0}))},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Cw(this.gl,this.debug,e,this.framebuffer),this.debug&&Qv(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Cw(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Qv(this.gl)):tM(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var o=this.gl;Cw(o,this.debug,e,this.framebuffer),this.debug&&Qv(o),this.outputTexture=e,et(o,this.debug,(function(){return o.viewport(0,0,n,r)})),et(o,this.debug,(function(){return o.scissor(0,0,n,r)}))},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,o){var a=this;this.throwIfDisposed(),et(this.gl,this.debug,(function(){return a.gl.scissor(e,n,r,o)}))},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t})();function pM(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach((function(n,r){var o=n.logicalShape,a=e[r],i=a.shape;if(!mr(o,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+i+" must match");if(!n.isUniform||!a.isUniform){var s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!mr(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}}))}var Gbe=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,d=n.dilationHeight,f=n.dataFormat,p=s.left,m=s.top,g=o*r,y=jr(),b=f==="channelsLast",S=b?0:1,C=b?1:2,E="",_=0;_<=1;_++)for(var T=0;T<=1;T++)E+=`
          blockIndex = rc.y + `+T+`;
          pos = rc.x + `+_+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+i+" - "+m+`;
            d0 = offsetY + `+d+" * (pos / "+g+`);

            if(d0 < `+e[S]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+p+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+g+".) / "+o+`.));

              if(d1 < `+e[C]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+b+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*_+T)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*_+T)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+E+`

        `+y.output+` = result;
      }
    `},$be=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},qbe=function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Xbe=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+i+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+i+"; j <= "+i+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},Kbe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,a=t.effectiveFilterWidth,i=o-1-t.padInfo.top,s=a-1-t.padInfo.left,u=o*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},Ybe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.dilationDepth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=s-1-t.padInfo.front,f=u-1-t.padInfo.top,p=l-1-t.padInfo.left,m=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+f+", "+p+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+i+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+m+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Aw=function(t,e,n,r,o,a,i){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),a===void 0&&(a=null),i===void 0&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";a&&(m=i?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+p[0]+`);
          result += (`+f[1]+" * "+p[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+y+`

        `+g+`

        setOutput(result);
      }
    `},Qbe=(function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t})(),Jbe=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},Zbe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=lo("rc",e),r=Cn(e),o=(function(s,u,l){if(s===1)return"rc > "+u[0];for(var d="",f=s-2;f<s;f++)d+=l[f]+" >= "+u[f],f<s-1&&(d+="||");return d})(e,t,n),a=(function(s,u,l,d){if(s===1)return"";var f=d.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `})(e,t[t.length-1],t[t.length-2],n),i=(function(s,u){var l=s.length,d=(function(f,p){for(var m=[],g=0;g<=1;g++)for(var y=0;y<=1;y++){for(var b=(g===0?"r":"rp1")+", "+(y===0?"c":"cp1"),S=2;S<f;S++)b=p[p.length-1-S]+","+b;m.push(b)}return m})(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"})(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+i+`));
          }
        }
      `}},exe=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map((function(u,l){return u[0]+t[l]+u[1]}));var r=t.length,o=Cn(r),a=e.map((function(u){return u[0]})).join(","),i=e.map((function(u,l){return u[0]+t[l]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+a+`);
      `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},txe=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((function(b,S){return b[0]+t[S]+b[1]}));for(var r=t.length,o=Cn(r),a=e.map((function(b){return b[0]})).join(","),i=e.map((function(b,S){return b[0]+t[S]})).join(","),s=lo("rc",r),u=lo("source",r),l=s[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],p=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",g=0,y=r===1?2:4;g<y;g++)m+=`
        `+f[g]+`
        if (`+p+`) {
          result[`+g+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+g+"] = getChannel(getX("+u.join()+"), "+d+`);
        }
      `;m+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+a+`);
      const `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+m+`
        setOutput(result);
      }
    `},Xh=function(t,e,n,r,o){if(r===void 0&&(r=!1),o===void 0&&(o=!1),this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var a=t.filterWidth,i=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var g=e==="avg",y="((batch  * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + d",b="(xR * "+t.inWidth+" + xC) * "+t.inChannels+" + d",S="0.0";if(g||(S="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+s+`);
        const ivec2 pads = ivec2(`+p+", "+m+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+d+`;
              wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = `+(r?o?y:b:"wR * "+f+" + wC")+`;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var C=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(C="avgValue / count");var E=4*Math.floor(a/4),_=a%4,T=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+s+`);
      const ivec2 pads = ivec2(`+p+", "+m+`);
      const float initializationValue = `+S+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+S+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+d+`;
            wR += `+u+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+E+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+T+`
          }

          int xC = xCCorner + `+E+`;
          if (`+(_===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+T+`
          } else if (`+(_===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+T+`
          } else if (`+(_===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+T+`
          }
        }
        setOutput(`+C+`);
      }
    `}},Nw=function(t,e,n,r,o){if(r===void 0&&(r=!1),o===void 0&&(o=!1),this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var a=t.filterWidth,i=t.strideDepth,s=t.strideHeight,u=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,p=t.effectiveFilterDepth,m=t.effectiveFilterHeight,g=t.effectiveFilterWidth,y=t.padInfo.front,b=t.padInfo.top,S=t.padInfo.left;this.outputShape=t.outShape;var C=e==="avg",E="0.0";if(C||(E="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+s+", "+u+`);
        const ivec3 pads = ivec3(`+y+", "+b+", "+S+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+p+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+m+`;
                wR += `+d+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+g+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = `+(r?o?"(((batch * "+t.inDepth+" + xD) * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"((xD * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"wD * "+m+" * "+g+` +
                      wR * `+g+" + wC")+`;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var _=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(_="avgValue / count");var T=4*Math.floor(a/4),D=a%4,k=`
      if (`+C+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+s+", "+u+`);
      const ivec3 pads = ivec3(`+y+", "+b+", "+S+`);
      const float initializationValue = `+E+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+E+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+p+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+m+`;
            wR += `+d+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+T+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+k+`
            }

            int xC = xCCorner + `+T+`;
            if (`+(D===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+k+`
            } else if (`+(D===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+k+`
            } else if (`+(D===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+k+`
            }
          }
          setOutput(`+_+`);
        }
      }
    `}},nxe=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";e==="prod"?i="1.0":e==="min"?(i="1.0 / 1e-20",s="min"):e==="max"&&(i="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),d=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,p="vec4";e==="all"?(i="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):e==="any"&&(i="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");var m="";o%n>0&&(m=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+m+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(d===1)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(d===2)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(d===3)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},rxe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Tl(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+YE(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},oxe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/d[0],p=l[1]/d[1],m=1/f,g=1/p,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+g+`);

        const int winHeight = int(`+y+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},axe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},ixe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},sxe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/d[0],p=l[1]/d[1],m=1/f,g=1/p,y=2*Math.ceil(m)+2,b=2*Math.ceil(g)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+g+`);

        const int winHeight = int(`+y+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},uxe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},lxe=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map((function(a,i){return(function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"})(i)})).join(","),o=Cn(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},cxe=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=lo("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Cn(n);function s(u){var l=t.map((function(d,f){return(function(p,m){return e.indexOf(p)!==-1&&t[p]!==1?t[p]+" - "+m[p]+" - 1":""+m[p]})(f,u)}));return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(u){return s(u)})(r.slice())+`;
          if(`+o+`){
            result.g = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)})(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+(function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            if(`+o+`) {
              result.a = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},mM=function(t,e,n,r,o,a,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=Cn(o.length),u=Cn(a.length),l="";n===1?l="i":n===2&&(l="i, j");var d="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var p="getUpdates("+f+")",m=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+m+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+p+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},dxe=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=t.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var f="";o%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},fxe=function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&i.push(""+a[u]);r=i.join(),o=s.join()}var l=Cn(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},hxe=(function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=Cn(this.rank),o="uniform int start["+this.rank+"];",a=(function(i){if(i===1)return"sourceLoc";if(i<=6)return Dw.slice(0,i).map((function(s){return"sourceLoc."+s})).join(",");throw Error("Slicing for rank "+i+" is not yet supported")})(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map((function(i,s){return"sourceLoc."+Dw[s]+" = start["+s+"] + coords."+Dw[s]+";"})).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+a+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t})(),Dw=["x","y","z","w","u","v"],pxe=(function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=Cn(this.rank),r=lo("coords",this.rank),o=lo("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",i="getChannel(getSource("+o.join()+"), "+a+")",s=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+i+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map((function(d,f){return"start["+f+"]"})).join()+");":e.map((function(d,f){return o[f]+" = "+r[f]+" + start["+f+"];"})).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t})(),mxe=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Cn(n.length),a=Cn(n.length),i="";if(r===1)i="coords * strides + begin";else{var s=0;i=n.map((function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"})).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+t+`);
      `+o+" strides = "+o+"("+e+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+i+`));
      }
    `},vxe=(function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var o,a=vM(n,r),i=gM(e,a,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[i].shift();return this.usedTextures[i].push(s),s}return this.numUsedTextures++,this.log(),a===Io.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Io.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Io.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Io.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Io.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),o},t.prototype.releaseTexture=function(e,n,r,o){if(this.freeTextures!=null){var a=gM(n,vM(r,o),o);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],s=i.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach((function(r){e.gpgpu.deleteMatrixTexture(r)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(o){e.gpgpu.deleteMatrixTexture(o)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t})();function vM(t,e){if(t===Bo.UPLOAD)return Io.PACKED_2X2_FLOAT32;if(t===Bo.RENDER||t==null)return(function(n){return Ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Io.PACKED_2X2_FLOAT32:Io.UNPACKED_FLOAT32:n?Io.PACKED_2X2_FLOAT16:Io.UNPACKED_FLOAT16})(e);if(t===Bo.DOWNLOAD||t===Bo.PIXELS)return Io.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function gM(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var gxe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=Cn(this.rank),a=(function(i){var s=i.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+i[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],d=0;d<i.length;d++)l.push("imod("+u[d]+", "+i[d]+")");return l.join()})(t);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},QE=1.7580993408473768,JE=1.0507009873554805,Rt=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ya="if (isnan(x)) return x;",yxe="return x;",yM="return abs(x);",mj=Ya+`
  return (x < 0.0) ? 0.0 : x;
`,vj=Ya+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,gj="return (x >= 0.0) ? x : (exp(x) - 1.0);",bxe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+QE+`;
  float scale = `+JE+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,bM="return -x;",xM="return ceil(x);",wM="return floor(x);",SM="return exp(x);",CM="return exp(x) - 1.0;",xxe=Ya+`
  return sin(x);
`,wxe=Ya+`
  return cos(x);
`,Sxe=Ya+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Cxe=Ya+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Exe=Ya+`
  return atan(x);
`,Rxe=Ya+"return log(x + sqrt(x * x + 1.0));",_xe=Ya+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Txe=Ya+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,tg="return x;",Axe="return x;",yj=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bj=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xj=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Bh=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Nxe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=lo("rc",e),r=Cn(e),o=(function(s,u){if(s===1)return"rc";for(var l="",d=0;d<s;d++)l+=u[d],d<s-1&&(l+=",");return l})(e,n),a=n.slice(-2),i=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `},ng={};function rg(t,e){if(e===void 0&&(e=!1),t==="linear")return e?Axe:yxe;if(t==="relu")return e?yj:mj;if(t==="elu")return e?xj:gj;if(t==="relu6")return e?bj:vj;if(t==="prelu")return e?pj:hj;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Dxe=600,kxe=(function(t){function e(n){var r,o=t.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!Ce().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var a=Pi(Ce().getNumber("WEBGL_VERSION"));o.binaryCache=((r=Ce().getNumber("WEBGL_VERSION"))in ng||(ng[r]={}),ng[r]),o.gpgpu=new Hbe(a),o.canvas=a.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new vxe(o.gpgpu),o.numMBBeforeWarning=Ce().global.screen==null?1024:Ce().global.screen.height*Ce().global.screen.width*window.devicePixelRatio*Dxe/1024/1024,o.texData=new tj(o,oe),o}return Ka(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,o){if(Ce().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:o,values:n,usage:Bo.UPLOAD}),a},e.prototype.move=function(n,r,o,a){if(Ce().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:a,values:r,usage:Bo.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),o=r.values,a=r.dtype,i=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var d=void 0;d=l?new Bh(u,tg):new Rt(u,tg);var f=this.runWebGLProgram(d,[{dataId:n,shape:u,dtype:a}],a),p=this.readSync(f.dataId);return this.disposeData(f.dataId),p}if(o!=null)return this.convertAndCacheOnCPU(n);if(a==="string")return o;var m,g,y=this.activeTimers!=null;return y&&(m=ci()),a==="complex64"?g=cS(i.real.dataSync(),i.imag.dataSync()):g=this.getValuesFromTexture(n),y&&(this.downloadWaitMs+=ci()-m),this.convertAndCacheOnCPU(n,g)},e.prototype.read=function(n){return Ye(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,d,f,p,m,g,y,b,S,C,E,_,T,D,k,I;return Qe(this,(function(M){switch(M.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise((function(O){return r.push(O)}))];if(o=this.texData.get(n),a=o.values,i=o.shape,s=o.slice,u=o.dtype,l=o.complexTensors,d=o.isPacked,s!=null)return f=void 0,f=d?new Bh(i,tg):new Rt(i,tg),p=this.runWebGLProgram(f,[{dataId:n,shape:i,dtype:u}],u),m=this.read(p.dataId),this.disposeData(p.dataId),[2,m];if(a!=null)return[2,this.convertAndCacheOnCPU(n)];if(!Ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ce().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return g=null,u!=="complex64"&&Ce().get("WEBGL_BUFFER_SUPPORTED")&&(y=this.decode(n),b=this.texData.get(y.dataId),g=(I=this.gpgpu).createBufferFromTexture.apply(I,[b.texture].concat($h(i)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:M.sent(),M.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return C=M.sent(),E=C[0],_=C[1],S=cS(E,_),[3,5];case 4:g==null?S=this.getValuesFromTexture(n):(T=Ke(i),S=this.gpgpu.downloadFloat32MatrixFromBuffer(g,T)),M.label=5;case 5:return y!=null&&this.disposeData(y.dataId),D=this.convertAndCacheOnCPU(n,S),k=this.pendingRead.get(n),this.pendingRead.delete(n),k.forEach((function(O){return O(D)})),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,D]}}))}))},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var o=n[r];if(!Kge(o))throw Ce().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,o=this.texData.get(n),a=o.shape,i=o.dtype,s=o.isPacked,u=Ke(a);if(Ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),d=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat($h(a))).subarray(0,u);return this.disposeData(l.dataId),f}var p=Ce().getBool("WEBGL_PACK")&&s===!0,m=p?Ew(a):a,g=p?new xbe(m):new bbe(m),y=this.runWebGLProgram(g,[{shape:m,dtype:i,dataId:n}],"float32"),b=this.texData.get(y.dataId),S=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(b.texture,b.texShape[0],b.texShape[1]).subarray(0,u);return this.disposeData(y.dataId),S},e.prototype.time=function(n){return Ye(this,void 0,void 0,(function(){var r,o,a,i,s,u,l;return Qe(this,(function(d){switch(d.label){case 0:return r=this.activeTimers,o=[],a=!1,this.programTimersStack==null?(this.programTimersStack=o,a=!0):this.activeTimers.push(o),this.activeTimers=o,n(),i=Gd(this.activeTimers.map((function(f){return f.query}))).filter((function(f){return f!=null})),s=Gd(this.activeTimers.map((function(f){return f.name}))).filter((function(f){return f!=null})),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return l=d.sent(),u.kernelMs=Dge(l),u.getExtraProfileInfo=function(){return l.map((function(f,p){return{name:s[p],ms:f}})).map((function(f){return f.name+": "+f.ms})).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ci(),endMs:null}},e.prototype.endTimer=function(n){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=ci(),n)},e.prototype.getQueryTime=function(n){return Ye(this,void 0,void 0,(function(){var r;return Qe(this,(function(o){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]}))}))},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),o=r.texture,a=r.dtype,i=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,d=l&&l.origDataId||n,f=this.dataRefCount.get(d);f>1?this.dataRefCount.set(d,f-1):(this.dataRefCount.delete(d),o!=null&&(this.numBytesInGPU-=this.computeBytes(i,a),this.textureManager.releaseTexture(o,i,s,u)));var p=this.texData.get(n);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return Ce().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=oe.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every((function(a){return o.texData.get(a.dataId).texture==null&&Ke(a.shape)<r}))},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:oe.keep(n.clone()),imag:oe.keep(r.clone())},o},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,o);if(Ke(o)===0)return Rr([],o,n.dtype);var a=this.texData.get(n.dataId).isPacked,i=ZL(n.shape,r,o);if(a||!i){var s=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pxe(o):new hxe(o),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,o)},e.prototype.shallowSlice=function(n,r,o){var a=this.texData.get(n.dataId),i=this.makeOutput(o,n.dtype),s=this.texData.get(i.dataId);Object.assign(s,a),s.shape=o,s.dtype=n.dtype;var u=ej(r,n.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),i},e.prototype.stridedSlice=function(n,r,o,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,o,a);var i=GE(r,o,a);if(i.some((function(u){return u===0})))return Rr([],i);var s=new mxe(r,a,i);return this.compileAndRun(s,[n])},e.prototype.reverse=function(n,r){var o=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cxe(n.shape,r):new lxe(n.shape,r);return this.compileAndRun(o,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var o=n.map((function(m){return da(m)})),a=n.map((function(m){return pi(m)}));return Cr(this.concat(o,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>Ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(n.length/2),s=this.concat(n.slice(0,i),r),u=this.concat(n.slice(i),r);return this.concat([s,u],r)}if(Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new abe(n.map((function(m){return m.shape})),r);return this.compileAndRun(l,n)}var d=Xd(n.map((function(m){return m.shape})),r),f=n.map((function(m){return m.as2D(-1,Ke(m.shape.slice(r)))})),p=new obe(f.map((function(m){return m.shape})));return this.compileAndRun(p,f).reshape(d)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,bM,n.dtype);var r=new Rt(n.shape,bM);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,o,a){var i=o?n.shape[2]:n.shape[1],s=a?r.shape[1]:r.shape[2],u=o?n.shape[1]:n.shape[2],l=n.shape[0];if((i===1||s===1)&&u>1e3){o&&(n=Ma(n,[0,2,1])),a&&(r=Ma(r,[0,2,1]));var d=s===1?n:n.as3D(l,u,1),f=s===1?2:1,p=s===1?r.as3D(l,1,u):r;return this.multiply(d,p).sum(f,!0)}var m=Er(n.dtype,r.dtype),g=new Aw(n.shape,[l,i,s],o,a);return this.compileAndRun(g,[n,r],m)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,a=n.transposeA,i=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,d=a?r.shape[2]:r.shape[1],f=i?o.shape[1]:o.shape[2],p=r.shape[0],m=Er(r.dtype,o.dtype),g=s!=null,y=l!=null,b=u?rg(u,!0):null,S=new Aw(r.shape,[p,d,f],a,i,g,b,y),C=[r,o];return s&&C.push(s),l&&C.push(l),this.compileAndRun(S,C,m)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),a=this.texData.get(r.dataId),i=new sM(Q0e,n.shape,r.shape),s=new sM(J0e,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],l=this.compileAndRun(i,u),d=this.compileAndRun(s,u),f=this.complex(l,d);return l.dispose(),d.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,uM,n.dtype);var p=new jn(uM,n.shape,r.shape);return this.compileAndRun(p,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,o,a,i,s){var u=[n,r,o],l=null;s!=null&&(l=s.shape,u.push(s));var d=null;if(i!=null&&(d=i.shape,u.push(i)),Ce().getBool("WEBGL_PACK_NORMALIZATION")){var f=new Y0e(n.shape,r.shape,o.shape,l,d,a);return this.compileAndRun(f,u)}var p=new K0e(n.shape,r.shape,o.shape,l,d,a);return this.compileAndRun(p,u)},e.prototype.localResponseNormalization4D=function(n,r,o,a,i){var s=Ce().getBool("WEBGL_PACK_NORMALIZATION")?new Xbe(n.shape,r,o,a,i):new $be(n.shape,r,o,a,i);return this.compileAndRun(s,[n])},e.prototype.LRNGrad=function(n,r,o,a,i,s,u){var l=new qbe(r.shape,a,i,s,u);return this.compileAndRun(l,[r,o,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var o=this.readSync(n.dataId).map((function(i){return uy(i)}));return uj(St(n.shape,n.dtype,o),r)}var a=new gxe(n.shape,r);return this.compileAndRun(a,[n])},e.prototype.pad=function(n,r,o){var a=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new txe(n.shape,r,o):new exe(n.shape,r,o);return this.compileAndRun(a,[n])},e.prototype.gather=function(n,r,o){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,o);var a=new _be(n.shape,r.size,o);return this.compileAndRun(a,[n,r])},e.prototype.batchToSpaceND=function(n,r,o){K(n.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var a=r.reduce((function(f,p){return f*p})),i=py(n.shape,r,a),s=my(i.length,r.length),u=vy(n.shape,r,a),l=zL(o,r.length),d=UL(u,o,r.length);return Ma(n.reshape(i),s).reshape(u).slice(l,d)},e.prototype.spaceToBatchND=function(n,r,o){K(n.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var a=r.reduce((function(p,m){return p*m})),i=[[0,0]];i.push.apply(i,o);for(var s=1+r.length;s<n.shape.length;++s)i.push([0,0]);var u=n.pad(i),l=py(u.shape,r,a,!1),d=my(l.length,r.length,!1),f=vy(u.shape,r,a,!1);return Ma(u.reshape(l),d).reshape(f)},e.prototype.reduce=function(n,r,o){var a=n.shape[0],i=n.shape[1],s=Rw(i),u=new nxe({windowSize:s,inSize:i,batchSize:a},r),l=this.compileAndRun(u,[n],o);return l.shape[1]===1?l:this.reduce(l,r,o)},e.prototype.argReduce=function(n,r,o){o===void 0&&(o=null);var a=n.shape[0],i=n.shape[1];o!=null&&(a=o.shape[0],i=o.shape[1]);var s=Rw(i),u=new z0e({windowSize:s,inSize:i,batchSize:a},r,o==null),l=[n];o!=null&&l.push(o);var d=this.compileAndRun(u,l,"int32");return d.shape[1]===1?d:this.argReduce(n,r,d)},e.prototype.argReducePacked=function(n,r,o){o===void 0&&(o=null);var a=o!=null?o.shape:n.shape,i=Rw(a[a.length-1]),s=new $0e(a,i,r,o==null),u=o==null?[n]:[n,o],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){ko("sum",r,n.rank);var o=Pr(n.shape,r),a=o[0],i=Ke(o[1]),s=n.as2D(-1,i),u=gw(n.dtype);return this.reduce(s,"sum",u).reshape(a)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var o=Pr(n.shape,r),a=o[0],i=Ke(o[1]),s=n.as2D(-1,i),u=gw(n.dtype);return this.reduce(s,"prod",u).reshape(a)},e.prototype.unsortedSegmentSum=function(n,r,o){var a=0,i=Fi([a],n.rank),s=n;i!=null&&(s=Ma(n,i),a=Bi(1,n.rank)[0]);var u=(function(m,g,y){for(var b=[],S=m.length,C=0;C<S;C++)C!==g?b.push(m[C]):b.push(y);return b})(s.shape,a,o),l=Ke([s.shape[a]]),d=s.as2D(-1,l),f=gw(n.dtype),p=this.segOpCompute(d,"unsortedSegmentSum",r,f,o).reshape(u);return i!=null&&(p=Ma(p,UE(i))),p},e.prototype.segOpCompute=function(n,r,o,a,i){var s=n.shape[0],u=n.shape[1],l=(function(p,m){var g,y=!1;for(p<=JL?(g=p,y=!0):g=tS(p,Math.floor(Math.sqrt(p)));!y;)g>m||g===p?y=!0:g=tS(p,g+1);return g})(u,i),d=new dxe({windowSize:l,inSize:u,batchSize:s,numSegments:i}),f=this.compileAndRun(d,[n,o],a);return f.shape[1]===i?f:(o=hy(0,i).tile([u/l]),this.segOpCompute(f,r,o,a,i))},e.prototype.argMinMaxReduce=function(n,r,o){var a=[r];if(ko("arg"+o.charAt(0).toUpperCase()+o.slice(1),a,n.rank),!Ce().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var i=Pr(n.shape,a),s=i[0],u=Ke(i[1]),l=n.as2D(-1,u);return this.argReduce(l,o).reshape(s)}return this.argReducePacked(n,o)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,o,a){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var i=new pbe(n.shape,o,a);return this.compileAndRun(i,[n])},e.prototype.equal=function(n,r){if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var o=new jn("return float(a == b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new jn("return float(a != b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new jn("return float(a < b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new jn("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new jn("return float(a > b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new jn("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new Rt(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new jn("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new jn("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.select=function(n,r,o){var a=new fxe(n.rank,r.shape,r.rank);return this.compileAndRun(a,[n,r,o],Er(r.dtype,o.dtype))},e.prototype.where=function(n){dy("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return KE(n.shape,r)},e.prototype.topk=function(n,r,o){return lj(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){ko("min",r,n.rank);var o=Pr(n.shape,r),a=o[0],i=Ke(o[1]),s=n.as2D(-1,i);return this.reduce(s,"min",s.dtype).reshape(a)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ui(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new jn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.mod=function(n,r){var o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ui(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new jn(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);ko("max",r,n.rank);var o=Pr(n.shape,r),a=o[0],i=Ke(o[1]),s=n.as2D(-1,i);return this.reduce(s,"max",s.dtype).reshape(a)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ui(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new jn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.all=function(n,r){ko("all",r,n.rank);var o=Pr(n.shape,r),a=o[0],i=Ke(o[1]),s=n.as2D(-1,i);return this.reduce(s,"all",s.dtype).reshape(a)},e.prototype.any=function(n,r){ko("any",r,n.rank);var o=Pr(n.shape,r),a=o[0],i=Ke(o[1]),s=n.as2D(-1,i);return this.reduce(s,"any",s.dtype).reshape(a)},e.prototype.floorDiv=function(n,r){if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new jn(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,_w);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var o=Er(n.dtype,r.dtype);if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,_w,o);var a=new jn(_w,n.shape,r.shape);return this.compileAndRun(a,[n,r],o)},e.prototype.packedUnaryOp=function(n,r,o){var a=new Bh(n.shape,r);return this.compileAndRun(a,[n],o)},e.prototype.packedBinaryOp=function(n,r,o,a,i){i===void 0&&(i=!1);var s=new ui(o,n.shape,r.shape,i);return this.compileAndRun(s,[n,r],a)},e.prototype.complexSeparableBinaryOp=function(n,r,o){var a=this,i=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[i.complexTensors.real,s.complexTensors.real],[i.complexTensors.imag,s.complexTensors.imag]].map((function(p){var m=p[0],g=p[1],y=a.makeComplexComponentTensorInfo(n,m),b=a.makeComplexComponentTensorInfo(r,g),S=new jn(o,n.shape,r.shape);return a.compileAndRun(S,[y,b],Er(m.dtype,g.dtype))})),l=u[0],d=u[1],f=this.complex(l,d);return l.dispose(),d.dispose(),f},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>Ce().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),o=this.addN(n.slice(0,r)),a=this.addN(n.slice(r));return this.addN([o,a])}var i=n.map((function(l){return l.dtype})).reduce((function(l,d){return Er(l,d)})),s=n.map((function(l){return l.shape})),u=Ce().getBool("WEBGL_PACK")?new j0e(n[0].shape,s):new L0e(n[0].shape,s);return this.compileAndRun(u,n,i)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Tw);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var o=Er(n.dtype,r.dtype);if(Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Tw,n.dtype);var a=new jn(Tw,n.shape,r.shape);return this.compileAndRun(a,[n,r],o)},e.prototype.pow=function(n,r){var o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ui(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new jn(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),a=Er(n.dtype,r.dtype);return this.compileAndRun(o,[n,r],a)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,xM,n.dtype);var r=new Rt(n.shape,xM);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,wM,n.dtype);var r=new Rt(n.shape,wM);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new Rt(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new Rt(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new Rt(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new Rt(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new Rt(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,SM,n.dtype);var r=new Rt(n.shape,SM);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,CM,n.dtype);var r=new Rt(n.shape,CM);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var o=lr([r],n.shape),a=this.max(n,o),i=yo(a.shape,o),s=this.subtract(n,a.reshape(i)),u=this.exp(s),l=this.sum(u,o).reshape(i);return Pu(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new Rt(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new Rt(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new Rt(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new Rt(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new Rt(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=Ce().getBool("WEBGL_PACK")?new Bh(n.shape,yj):new Rt(n.shape,mj),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=Ce().getBool("WEBGL_PACK")?new Bh(n.shape,bj):new Rt(n.shape,vj),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ui(pj,n.shape,r.shape):new jn(hj,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.elu=function(n){if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,xj,n.dtype);var r=new Rt(n.shape,gj);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ui(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new jn("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.selu=function(n){var r=new Rt(n.shape,bxe);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new Rt(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,o){var a,i=(a=Ce().getBool("WEBGL_PACK_CLIP")?new nbe(n.shape):new tbe(n.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(a,[n],null,i)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,yM,n.dtype);var r=new Rt(n.shape,yM);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),o=new rbe(n.shape),a=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(o,a)},e.prototype.sigmoid=function(n){var r=new Rt(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new Rt(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new Rt(n.shape,xxe);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new Rt(n.shape,wxe);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new Rt(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new Rt(n.shape,Sxe);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new Rt(n.shape,Cxe);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new Rt(n.shape,Exe);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ui(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new jn(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.sinh=function(n){var r=new Rt(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new Rt(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new Rt(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new Rt(n.shape,Rxe);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new Rt(n.shape,_xe);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new Rt(n.shape,Txe);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new Rt(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var o=new Rt(n.shape,(function(a){return a===void 0&&(a=0),Ya+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `})(r));return this.compileAndRun(o,[n])},e.prototype.conv2dByMatMul=function(n,r,o,a,i,s){var u=n.shape,l=this.texData.get(n.dataId),d=o.inChannels,f=u[0]*u[1]*u[2],p=o.outChannels,m=o.dataFormat==="channelsLast",g=(f===1||p===1)&&d>1e3,y=u[2]%2!=0&&!!l.isPacked;if(g||!Ce().getBool("WEBGL_LAZILY_UNPACK")||!Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!y){var b=m?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],S=this.reshape(n,[1,b,o.inChannels]),C=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:S,b:C,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:s}),o.outShape)}var E=m?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),_={dataId:n.dataId,shape:[1,E,o.inChannels],dtype:n.dtype},T=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,K(Zv(l.shape,_.shape),(function(){return"packed reshape "+l.shape+" to "+_.shape+" isn't free"}));var D=this.reshape(r,[1,o.inChannels,o.outChannels]),k=this.fusedBatchMatMul({a:_,b:D,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:s}),I=this.texData.get(k.dataId);return K(I.isPacked,(function(){return"batchMatMul result is expected to be packed"})),l.shape=T,I.shape=o.outShape,oe.makeTensorFromDataId(k.dataId,o.outShape,k.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,o,a,i,s){var u=o.filterWidth,l=o.filterHeight,d=o.inChannels,f=o.outWidth,p=o.outHeight,m=o.dataFormat==="channelsLast",g=u*l*d,y=p*f,b=[g,y],S=n.squeeze([0]),C=r.reshape([1,g,-1]),E=new Gbe(b,S.shape,o),_=this.compileAndRun(E,[S]).reshape([1,b[0],b[1]]),T=a!=null,D=s!=null,k=i?rg(i,!0):null,I=new Aw(_.shape,[1,y,o.outChannels],!0,!1,T,k,D),M=[_,C];a&&M.push(a),D&&M.push(s);var O=this.compileAndRun(I,M);return m?O.reshape([1,p,f,o.outChannels]):O.reshape([1,o.outChannels,p,f])},e.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,a,i,s,u);if(Ce().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,a,i,s,u);var l=i!=null,d=u!=null,f=s?rg(s,!1):null,p=new lM(a,l,f,d),m=[r,o];return i&&m.push(i),u&&m.push(u),this.compileAndRun(p,m)},e.prototype.conv2d=function(n,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,o);if(Ce().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,o);var a=new lM(o);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerInput=function(n,r,o){var a=new sbe(o);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerFilter=function(n,r,o){var a=new ibe(o);return this.compileAndRun(a,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,o=n.input,a=n.filter,i=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,d=Ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,f=u?rg(u,d):null,p=[o,a],m=s!=null,g=l!=null;return m&&p.push(s),g&&p.push(l),d?(r=new dM(i,m,f,g),this.compileAndRun(r,p)):(r=new cM(i,m,f,g),this.compileAndRun(r,p))},e.prototype.depthwiseConv2D=function(n,r,o){var a;return Ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(a=new dM(o),this.compileAndRun(a,[n,r])):(a=new cM(o),this.compileAndRun(a,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,o){var a=new dbe(o);return this.compileAndRun(a,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,o){var a=new cbe(o);return this.compileAndRun(a,[n,r])},e.prototype.conv3d=function(n,r,o){var a=new fbe(o);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerInput=function(n,r,o){var a=new lbe(o);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerFilter=function(n,r,o){var a=new ube(o);return this.compileAndRun(a,[n,r])},e.prototype.maxPool=function(n,r){var o=new Xh(r,"max",!1);return this.compileAndRun(o,[n])},e.prototype.avgPool=function(n,r){var o=new Xh(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,o,a){var i=new Xh(a,"max",!0),s=this.compileAndRun(i,[r]),u=new Kbe(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,o){var a=new q0e(o);return this.compileAndRun(a,[n],r.dtype)},e.prototype.cast=function(n,r){return oj(n,r,this)},e.prototype.unstack=function(n,r){for(var o=n.shape[r],a=new Array(n.rank-1),i=0,s=0;s<n.rank;s++)s!==r&&(a[i++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var d=new Array(o);for(s=0;s<d.length;s++)u[r]=s,d[s]=this.slice(n,u,l).reshape(a);return d},e.prototype.avgPool3d=function(n,r){var o=new Nw(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,o){var a=new X0e(o);return this.compileAndRun(a,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var o=new Nw(r,"max",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,o,a){var i=new Nw(a,"max",!0),s=this.compileAndRun(i,[r]),u=new Ybe(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(n,r){var o=this.texData.get(n.dataId);if(o.isPacked&&!Zv(n.shape,r)&&(o.texture===null||!Zv(o.shape,r))){var a=this.packedReshape(n,r);return oe.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return lS(n,r)},e.prototype.resizeBilinear=function(n,r,o,a){var i=Ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ixe(n.shape,r,o,a):new axe(n.shape,r,o,a);return this.compileAndRun(i,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,o){var a=new oxe(n,r,o);return this.compileAndRun(a,[n])},e.prototype.resizeNearestNeighbor=function(n,r,o,a){var i=new uxe(n.shape,r,o,a);return this.compileAndRun(i,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,o){var a=new sxe(n,r,o);return this.compileAndRun(a,[n])},e.prototype.multinomial=function(n,r,o,a){var i=r?n:W0(n),s=i.shape[0],u=i.shape[1],l=new Qbe(s,u,o),d=l.getCustomSetupFunc(a);return this.compileAndRun(l,[i],"int32",d)},e.prototype.oneHot=function(n,r,o,a){var i=new Jbe(n.size,r,o,a);return this.compileAndRun(i,[n])},e.prototype.diag=function(n){var r=new ybe(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,o,a,i){return dy("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),qE(n.dataSync(),r.dataSync(),o,a,i)},e.prototype.cropAndResize=function(n,r,o,a,i,s){var u=new hbe(n.shape,r.shape,a,i,s);return this.compileAndRun(u,[n,r,o],"float32")},e.prototype.depthToSpace=function(n,r,o){K(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));var a=n.shape[0],i=o==="NHWC"?n.shape[1]:n.shape[2],s=o==="NHWC"?n.shape[2]:n.shape[3],u=o==="NHWC"?n.shape[3]:n.shape[1],l=i*r,d=s*r,f=u/(r*r),p=new gbe(o==="NHWC"?[a,l,d,f]:[a,f,l,d],r,o);return this.compileAndRun(p,[n])},e.prototype.split=function(n,r,o){return sj(n,r,o)},e.prototype.scatterND=function(n,r,o){var a=yy(0,n,o),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,d=a.outputSize,f=[d/u,u],p=n.reshape([s,i]),m=r.reshape([s,u]);if(d===0)return lS(Rr([]),o);var g=tt(0),y=new mM(s,i,p.rank,m.rank,l,f);return this.compileAndRun(y,[m,p,g]).reshape(o)},e.prototype.sparseToDense=function(n,r,o,a){var i=yy(0,n,o),s=i.sliceRank,u=i.numUpdates,l=i.strides,d=i.outputSize,f=new mM(u,s,n.rank,r.rank,l,[d,1]);return this.compileAndRun(f,[r,n,a]).reshape(o)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var o=this.texData.get(n.dataId),a=new hM(Cbe,n.shape,r),i=new hM(Ebe,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(i,s),d=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),d},e.prototype.gatherND=function(n,r){var o=r.shape,a=o[o.length-1],i=QL(n,r),s=i[0],u=i[1],l=i[2],d=i[3],f=r.reshape([u,a]),p=n.reshape([n.size/l,l]),m=new Tbe(a,d,[u,l]);return this.compileAndRun(m,[p,f]).reshape(s)},e.prototype.fill=function(n,r,o){if((o=o||rm(r))==="string"){var a=sy(o,Ke(n));return a.fill(r),oe.makeTensor(a,n,o,this)}var i=new Rbe(n,r),s=i.getCustomSetupFunc(r);return this.compileAndRun(i,[],o,s)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,o){return aj(n,r,o)},e.prototype.makeTensorInfo=function(n,r){var o=this.write(null,n,r);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var o=this.makeTensorInfo(n,r).dataId;return oe.makeTensorFromDataId(o,n,r,this)},e.prototype.unpackTensor=function(n){var r=new Nxe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new Zbe(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var o=[ly(n.shape)].concat(cy(n.shape)),a={dtype:n.dtype,shape:o,dataId:n.dataId},i=[ly(r)].concat(cy(r)),s=new rxe(i,o),u=this.runWebGLProgram(s,[a],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,o=this.texData.get(n),a=o.isPacked,i=o.shape,s=o.dtype,u=Ew(i);return r=a?new vbe(u):new mbe(u),{dtype:s,shape:i,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,o,a,i){var s=this;i===void 0&&(i=!1);var u=this.makeTensorInfo(n.outputShape,o),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===yp.DENSE){var d=$h(n.outputShape);l.texShape=d.map((function(E){return 2*E}))}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),Ke(u.shape)===0)return l.values=$d(u.dtype,0),u;var f=[],p=r.map((function(E){if(E.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var _=s.texData.get(E.dataId);if(_.texture==null){if(!n.packedInputs&&Ke(E.shape)<=Ce().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:E.shape,texData:null,isUniform:!0,uniformValues:_.values};n.packedInputs&&(_.isPacked=!0,_.shape=E.shape)}else if(!!_.isPacked!=!!n.packedInputs)E=_.isPacked?s.unpackTensor(E):s.packTensor(E),f.push(E),_=s.texData.get(E.dataId);else if(_.isPacked&&!Zv(_.shape,E.shape)){var T=E,D=E.shape;E.shape=_.shape,E=s.packedReshape(E,D),f.push(E),_=s.texData.get(E.dataId),T.shape=D}return s.uploadToGPU(E.dataId),{shape:E.shape,texData:_,isUniform:!1}}));this.uploadToGPU(u.dataId);var m,g={shape:u.shape,texData:l,isUniform:!1},y=(function(E,_,T){var D="";_.concat(T).forEach((function(M){var O=M.texData!=null&&M.texData.slice!=null&&M.texData.slice.flatOffset>0,F=M.isUniform?"uniform":M.texData.texShape;D+=M.shape+"_"+F+"_"+O}));var k=E.userCode,I=E.constructor.name;return I+="_"+D+"_"+k})(n,p,g),b=this.getAndSaveBinary(y,(function(){return(function(E,_,T,D){var k=_.userCode,I=T.map((function(U,H){var L={logicalShape:U.shape,texShape:U.isUniform?null:U.texData.texShape,isUniform:U.isUniform,isPacked:!U.isUniform&&U.texData.isPacked,flatOffset:null};return U.texData!=null&&U.texData.slice!=null&&U.texData.slice.flatOffset>0&&(L.flatOffset=U.texData.slice.flatOffset),{name:_.variableNames[H],shapeInfo:L}})),M=I.map((function(U){return U.shapeInfo})),O={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},F=U0e(I,O,k,_.packedInputs),j=E.createProgram(F),G=null,W=E.getUniformLocation(j,"NAN",!1);Ce().getNumber("WEBGL_VERSION")===1&&(G=E.getUniformLocation(j,"INFINITY",!1));for(var q={},P=0;P<_.variableNames.length;P++){var z=_.variableNames[P];q[z]=E.getUniformLocation(j,z,!1),q["offset"+z]=E.getUniformLocation(j,"offset"+z,!1)}return{program:_,source:F,webGLProgram:j,uniformLocations:q,inShapeInfos:M,outShapeInfo:O,infLoc:G,nanLoc:W}})(s.gpgpu,n,p,g)})),S=this.activeTimers!=null;if(S&&(m=this.startTimer()),(function(E,_,T,D,k){pM(_.inShapeInfos,T),pM([_.outShapeInfo],[D]);var I=D.texData.texture,M=D.texData.texShape;D.texData.isPacked?E.setOutputPackedMatrixTexture(I,M[0],M[1]):E.setOutputMatrixTexture(I,M[0],M[1]),E.setProgram(_.webGLProgram),Ce().getNumber("WEBGL_VERSION")===1&&_.infLoc!==null&&E.gl.uniform1f(_.infLoc,1/0),_.nanLoc!==null&&E.gl.uniform1f(_.nanLoc,NaN),T.forEach((function(O,F){var j=_.program.variableNames[F],G=_.uniformLocations[j],W=_.uniformLocations["offset"+j];if(G!=null)if(O.isUniform)if(Ke(O.shape)<2)E.gl.uniform1f(G,O.uniformValues[0]);else{var q=O.uniformValues;q instanceof Float32Array||(q=new Float32Array(q)),E.gl.uniform1fv(G,q)}else O.texData.slice!=null&&W!=null&&E.gl.uniform1i(W,O.texData.slice.flatOffset),E.setInputMatrixTexture(O.texData.texture,G,F)})),k?.(E,_.webGLProgram),E.executeProgram()})(this.gpgpu,b,p,g,a),f.forEach((function(E){return s.disposeData(E.dataId)})),S&&(m=this.endTimer(m),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(m)})),!Ce().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){var C=this.unpackTensor(u);return this.disposeData(u.dataId),C}return u},e.prototype.compileAndRun=function(n,r,o,a,i){i===void 0&&(i=!1),o=o||r[0].dtype;var s=this.runWebGLProgram(n,r,o,a,i);return oe.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(Ce().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]})),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=tn((function(){if(!Ce().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=Ce().getBool("DEBUG");Ce().set("DEBUG",!1);var o=n.abs(tt(1e-8)).dataSync()[0];if(Ce().set("DEBUG",r),o>0)return 32}return 16}))),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,o=this.texData.get(n),a=o.shape,i=o.dtype,s=o.values,u=o.texture,l=o.usage,d=o.isPacked;if(u==null){var f,p=this.activeTimers!=null;p&&(f=ci());var m=o.texShape;if(m==null&&(m=hye(a,d),o.texShape=m),s!=null){var g=Ew(a),y=void 0,b=m[1],S=m[0],C=s instanceof Uint8Array;d?(b=(r=am(m[0],m[1]))[0],S=r[1],y=new Sbe(g,[S,b],C)):y=new wbe(g,[S,b],C);var E=this.makeTensorInfo([S,b],i);this.texData.get(E.dataId).usage=C?Bo.PIXELS:Bo.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(E.dataId),b,S,s);var _=this.runWebGLProgram(y,[E],i,null,!0),T=this.texData.get(_.dataId);o.texture=T.texture,o.texShape=T.texShape,o.isPacked=T.isPacked,o.usage=T.usage,this.disposeData(E.dataId),this.texData.delete(_.dataId),o.values=null,p&&(this.uploadWaitMs+=ci()-f)}else{var D=this.acquireTexture(m,l,i,d);o.texture=D}}},e.prototype.convertAndCacheOnCPU=function(n,r){var o=this.texData.get(n),a=o.dtype;return this.releaseGPUData(n),r!=null&&(o.values=(function(i,s){if(s==="float32"||s==="complex64")return i;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(i.length):new Uint8Array(i.length),l=0;l<u.length;++l)u[l]=Math.round(i[l]);return u}throw new Error("Unknown dtype "+s)})(r,a)),o.values},e.prototype.acquireTexture=function(n,r,o,a){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,a)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*EL(r)},e})(nj);IL()&&oe.registerBackend("webgl",(function(){return new kxe}),2);function rc(t,e){return t(e={exports:{}},e.exports),e.exports}var Ixe=rc((function(t){(function(e,n,r){function o(s){var u,l=this,d=(u=4022871197,function(f){f=f.toString();for(var p=0;p<f.length;p++){var m=.02519603282416938*(u+=f.charCodeAt(p));m-=u=m>>>0,u=(m*=u)>>>0,u+=4294967296*(m-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=d(" "),l.s1=d(" "),l.s2=d(" "),l.s0-=d(s),l.s0<0&&(l.s0+=1),l.s1-=d(s),l.s1<0&&(l.s1+=1),l.s2-=d(s),l.s2<0&&(l.s2+=1),d=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function i(s,u){var l=new o(s),d=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,d&&(typeof d=="object"&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.alea=i})(0,t)})),Mxe=rc((function(t){(function(e,n,r){function o(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var d=0;d<l.length+64;d++)u.x^=0|l.charCodeAt(d),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function i(s,u){var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(typeof d=="object"&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.xor128=i})(0,t)})),Oxe=rc((function(t){(function(e,n,r){function o(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var d=0;d<l.length+64;d++)u.x^=0|l.charCodeAt(d),d==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function i(s,u){var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(typeof d=="object"&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.xorwow=i})(0,t)})),Pxe=rc((function(t){(function(e,n,r){function o(s){var u=this;u.next=function(){var l,d,f=u.x,p=u.i;return l=f[p],d=(l^=l>>>7)^l<<24,d^=(l=f[p+1&7])^l>>>10,d^=(l=f[p+3&7])^l>>>3,d^=(l=f[p+4&7])^l<<7,l=f[p+7&7],d^=(l^=l<<13)^l<<9,f[p]=d,u.i=p+1&7,d},(function(l,d){var f,p=[];if(d===(0|d))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[7&f]=p[7&f]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],l.x=p,l.i=0,f=256;f>0;--f)l.next()})(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function i(s,u){s==null&&(s=+new Date);var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(d.x&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.xorshift7=i})(0,t)})),Fxe=rc((function(t){(function(e,n,r){function o(s){var u=this;u.next=function(){var l,d,f=u.w,p=u.X,m=u.i;return u.w=f=f+1640531527|0,d=p[m+34&127],l=p[m=m+1&127],d^=d<<13,l^=l<<17,d^=d>>>15,l^=l>>>12,d=p[m]=d^l,u.i=m,d+(f^f>>>16)|0},(function(l,d){var f,p,m,g,y,b=[],S=128;for(d===(0|d)?(p=d,d=null):(d+="\0",p=0,S=Math.max(S,d.length)),m=0,g=-32;g<S;++g)d&&(p^=d.charCodeAt((g+32)%d.length)),g===0&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,g>=0&&(y=y+1640531527|0,m=(f=b[127&g]^=p+y)==0?m+1:0);for(m>=128&&(b[127&(d&&d.length||0)]=-1),m=127,g=512;g>0;--g)p=b[m+34&127],f=b[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,b[m]=p^f;l.w=y,l.X=b,l.i=m})(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function i(s,u){s==null&&(s=+new Date);var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(d.X&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.xor4096=i})(0,t)})),Bxe=rc((function(t){(function(e,n,r){function o(s){var u=this,l="";u.next=function(){var f=u.b,p=u.c,m=u.d,g=u.a;return f=f<<25^f>>>7^p,p=p-m|0,m=m<<24^m>>>8^g,g=g-f|0,u.b=f=f<<20^f>>>12^p,u.c=p=p-m|0,u.d=m<<16^p>>>16^g,u.a=g-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var d=0;d<l.length+20;d++)u.b^=0|l.charCodeAt(d),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function i(s,u){var l=new o(s),d=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var p=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(p===0);return p},f.int32=l.next,f.quick=f,d&&(typeof d=="object"&&a(d,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=i:this.tychei=i})(0,t)})),yl=rc((function(t){(function(e,n){var r,o=this,a=256,i=6,s="random",u=n.pow(a,i),l=n.pow(2,52),d=2*l,f=a-1;function p(S,C,E){var _=[],T=y((function I(M,O){var F,j=[],G=typeof M;if(O&&G=="object")for(F in M)try{j.push(I(M[F],O-1))}catch{}return j.length?j:G=="string"?M:M+"\0"})((C=C==1?{entropy:!0}:C||{}).entropy?[S,b(e)]:S??(function(){try{var I;return r&&(I=r.randomBytes)?I=I(a):(I=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(I)),b(I)}catch{var M=o.navigator,O=M&&M.plugins;return[+new Date,o,O,o.screen,b(e)]}})(),3),_),D=new m(_),k=function(){for(var I=D.g(i),M=u,O=0;I<l;)I=(I+O)*a,M*=a,O=D.g(1);for(;I>=d;)I/=2,M/=2,O>>>=1;return(I+O)/M};return k.int32=function(){return 0|D.g(4)},k.quick=function(){return D.g(4)/4294967296},k.double=k,y(b(D.S),e),(C.pass||E||function(I,M,O,F){return F&&(F.S&&g(F,D),I.state=function(){return g(D,{})}),O?(n[s]=I,M):I})(k,T,"global"in C?C.global:this==n,C.state)}function m(S){var C,E=S.length,_=this,T=0,D=_.i=_.j=0,k=_.S=[];for(E||(S=[E++]);T<a;)k[T]=T++;for(T=0;T<a;T++)k[T]=k[D=f&D+S[T%E]+(C=k[T])],k[D]=C;(_.g=function(I){for(var M,O=0,F=_.i,j=_.j,G=_.S;I--;)M=G[F=f&F+1],O=O*a+G[f&(G[F]=G[j=f&j+M])+(G[j]=M)];return _.i=F,_.j=j,O})(a)}function g(S,C){return C.i=S.i,C.j=S.j,C.S=S.S.slice(),C}function y(S,C){for(var E,_=S+"",T=0;T<_.length;)C[f&T]=f&(E^=19*C[f&T])+_.charCodeAt(T++);return b(C)}function b(S){return String.fromCharCode.apply(0,S)}if(n["seed"+s]=p,y(n.random(),e),t.exports){t.exports=p;try{r=require("crypto")}catch{}}})([],Math)}));yl.alea=Ixe,yl.xor128=Mxe,yl.xorwow=Oxe,yl.xorshift7=Pxe,yl.xor4096=Fxe,yl.tychei=Bxe;var V0=yl.alea,Lxe=te({addN_:function(t){K(Array.isArray(t),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),K(t.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length}));var e=t.map((function(o,a){return X(o,"tensors"+a,"addN")})),n=e[0];e.forEach((function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),e.forEach((function(o){if(!mr(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=e;return oe.runKernelFunc((function(o,a){return o.addN(e)}),r,null,"AddN")}});function H0(){ML("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function wj(t){return t.rank===0||t.rank===1?t.as4D(1,1,1,t.size):t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Sj(t,e,n,r,o,a){a==null&&(a=.001);var i,s,u=X(t,"x","batchNorm"),l=X(e,"mean","batchNorm"),d=X(n,"variance","batchNorm");o!=null&&(i=X(o,"scale","batchNorm")),r!=null&&(s=X(r,"offset","batchNorm")),K(l.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),K(s==null||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),K(i==null||l.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f={x:u,scale:i,offset:s,mean:l,variance:d},p={varianceEpsilon:a};return oe.runKernelFunc((function(m,g){var y=wj(u),b=m.batchNormalization(y,og(l),og(d),a,og(i),og(s));return g([u,l,d,i]),b}),f,null,"FusedBatchNorm",p).reshape(u.shape)}function og(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}var jxe=te({batchNormalization_:function(t,e,n,r,o,a){return r===void 0&&(r=.001),H0(),Sj(t,e,n,a,o,r)}}),sm=te({batchNorm_:Sj});function Cj(t,e,n,r,o,a){var i,s,u=X(t,"x","batchNorm"),l=X(e,"mean","batchNorm"),d=X(n,"variance","batchNorm");return o!=null&&(i=X(o,"scale","batchNorm")),r!=null&&(s=X(r,"offset","batchNorm")),K(u.rank===2,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),K(l.rank===2||l.rank===1,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),K(d.rank===2||d.rank===1,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."})),i!=null&&K(i.rank===2||i.rank===1,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."})),s!=null&&K(s.rank===2||s.rank===1,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),sm(u,l,d,s,i,a)}var zxe=te({batchNormalization2d_:function(t,e,n,r,o,a){return r===void 0&&(r=.001),H0(),Cj(t,e,n,a,o,r)}}),Uxe=te({batchNorm2d_:Cj});function Ej(t,e,n,r,o,a){var i,s,u=X(t,"x","batchNorm"),l=X(e,"mean","batchNorm"),d=X(n,"variance","batchNorm");return o!=null&&(i=X(o,"scale","batchNorm")),r!=null&&(s=X(r,"offset","batchNorm")),K(u.rank===3,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),K(l.rank===3||l.rank===1,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),K(d.rank===3||d.rank===1,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."})),i!=null&&K(i.rank===3||i.rank===1,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."})),s!=null&&K(s.rank===3||s.rank===1,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),sm(u,l,d,s,i,a)}var Wxe=te({batchNormalization3d_:function(t,e,n,r,o,a){return r===void 0&&(r=.001),H0(),Ej(t,e,n,a,o,r)}}),Vxe=te({batchNorm3d_:Ej});function Rj(t,e,n,r,o,a){var i,s,u=X(t,"x","batchNorm"),l=X(e,"mean","batchNorm"),d=X(n,"variance","batchNorm");return o!=null&&(i=X(o,"scale","batchNorm")),r!=null&&(s=X(r,"offset","batchNorm")),K(u.rank===4,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),K(l.rank===4||l.rank===1,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),K(d.rank===4||d.rank===1,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."})),i!=null&&K(i.rank===4||i.rank===1,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."})),s!=null&&K(s.rank===4||s.rank===1,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),sm(u,l,d,s,i,a)}var Hxe=te({batchNormalization4d_:function(t,e,n,r,o,a){return r===void 0&&(r=.001),H0(),Rj(t,e,n,a,o,r)}}),Gxe=te({batchNorm4d_:Rj}),_j=te({broadcastTo_:function(t,e){var n=X(t,"broadcastTo","x"),r=n.shape;if(e.some((function(f){return!(f>0)||f%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var o=n.shape.slice();o.length<e.length;)o.unshift(1);n=n.reshape(o)}for(var a=n.shape,i=Array.from(e),s=e.length-1;s>=0;s--)if(a[s]===e[s])i[s]=1;else if(n.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var u=i.map((function(f,p){return f>1?p:-1})).filter((function(f){return f>=0}));if(u.length===0)return n.clone();var l={x:n},d={shape:e,inputShape:a};return oe.runKernelFunc((function(f){return f.tile(n,i)}),l,(function(f){return{x:function(){return f.sum(u,!0)}}}),VL,d)}}),$xe=te({clone_:function(t){var e=X(t,"x","clone",null);return oe.runKernelFunc((function(){return oe.makeTensorFromDataId(e.dataId,e.shape,e.dtype)}),{x:e},null,GL)}}),G0=te({logicalAnd_:function(t,e){var n=X(t,"a","logicalAnd","bool"),r=X(e,"b","logicalAnd","bool");return Mt(n.shape,r.shape),oe.runKernelFunc((function(o){return o.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),qxe=te({logicalNot_:function(t){var e=X(t,"x","logicalNot","bool");return oe.runKernelFunc((function(n){return n.logicalNot(e)}),{$x:e})}}),Tj=te({logicalOr_:function(t,e){var n=X(t,"a","logicalOr","bool"),r=X(e,"b","logicalOr","bool");return Mt(n.shape,r.shape),oe.runKernelFunc((function(o){return o.logicalOr(n,r)}),{$a:n,$b:r})}}),Xxe=te({logicalXor_:function(t,e){var n=X(t,"a","logicalXor","bool"),r=X(e,"b","logicalXor","bool");return Mt(n.shape,r.shape),Tj(t,e).logicalAnd(G0(t,e).logicalNot())}}),Vl=te({where_:function(t,e,n){var r=X(e,"a","where"),o=X(n,"b","where"),a=X(t,"condition","where","bool");return on(r.shape,o.shape,"Error in where: "),a.rank===1?K(a.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):on(a.shape,o.shape,"Error in where: "),oe.runKernelFunc((function(i,s){var u=i.select(a,r,o);return s([a]),u}),{$condition:a,$a:r,$b:o},(function(i,s){var u=s[0];return{$condition:function(){return $t(u).toFloat()},$a:function(){return i.mul(u.cast(i.dtype))},$b:function(){return i.mul(u.logicalNot().cast(i.dtype))}}}))}}),Aj=function(t){return Ye(this,void 0,void 0,(function(){var e,n,r;return Qe(this,(function(o){switch(o.label){case 0:return[4,(e=X(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=KE(e.shape,n),t!==e&&e.dispose(),[2,r]}}))}))},Nj=te({divNoNan_:function(t,e){var n,r=X(t,"a","div"),o=X(e,"b","div");r=(n=Mn(r,o))[0],o=n[1];var a=Pu(r,o),i=$t(a),s=o.equal(i);return Vl(s,i,a)}}),Rd=te({tile_:function(t,e){var n=X(t,"x","tile",null);K(n.rank===e.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."}));var r=[n],o={x:n},a={reps:e};return oe.runKernelFunc((function(i,s){var u=i.tile(n,e);return s([n]),u}),o,null,$L,a,r)}}),Dj=te({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var o=St([t,e],r),a=t<=e?t:e,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return Rd(pu(s,0),[n[0],1,1]);if(n.length===2)return Rd(pu(pu(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Rd(pu(pu(pu(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),Kxe=te({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var o=X(t,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=i===1?o.as2D(1,-1):o,u=oe.runKernelFunc((function(l){return l.multinomial(s,r,e,n)}),{logits2D:s});return i===1?u.as1D():u}}),Sy=te({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=X(t,"indices","oneHot","int32"),a=o.shape.concat([e]),i={indices:o=o.flatten()},s={depth:e,onValue:n,offValue:r};return oe.runKernelFunc((function(u,l){return l([o]),u.oneHot(o,e,n,r)}),i,null,HL,s).reshape(a)}}),Is=te({pad_:function(t,e,n){n===void 0&&(n=0);var r=X(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:e,constantValue:n},a={x:r};return oe.runKernelFunc((function(i,s){return s([r]),i.pad(r,e,n)}),a,null,qL,o)}}),Yxe=te({pad1d_:function(t,e,n){return n===void 0&&(n=0),K(e.length===2,(function(){return"Invalid number of paddings. Must be length of 2."})),Is(t,[e],n)}}),Qxe=te({pad2d_:function(t,e,n){return n===void 0&&(n=0),K(e.length===2&&e[0].length===2&&e[1].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Is(t,e,n)}}),Jxe=te({pad3d_:function(t,e,n){return n===void 0&&(n=0),K(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Is(t,e,n)}}),Zxe=te({pad4d_:function(t,e,n){return n===void 0&&(n=0),K(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Is(t,e,n)}}),e1e=te({rand_:function(t,e,n){var r=Ke(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=e();return oe.makeTensor(o,t,n)}}),ZE=(function(){function t(e,n,r,o,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=V0(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,o=!1;!o;){var a=void 0,i=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t})(),t1e=(function(){function t(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;var a=o||Math.random();this.randu=V0(a.toString()),this.randn=new ZE(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,o,a,i;;){do o=this.randn.nextValue(),i=1+this.c*o;while(i<=0);if(i*=i*i,n=1-.331*(e=o*o)*e,r=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<n||Math.log(a)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t})(),n1e=(function(){function t(e,n,r,o){var a=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=V0(o)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t})(),r1e=te({randomGamma_:function(t,e,n,r,o){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new t1e(e,n,r,o),i=St(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),o1e=te({randomNormal_:function(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new ZE(e,n,r,!1,o),i=St(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),kj=te({randomUniform_:function(t,e,n,r,o){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var a=St(t,r),i=new n1e(e,n,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Ij=te({square_:function(t){var e=X(t,"x","square"),n=[e];return oe.runKernelFunc((function(r,o){return o([e]),r.square(e)}),{x:e},null,"Square",{},n,[])}}),Mj=te({squaredDifference_:function(t,e){var n,r=X(t,"a","squaredDifference"),o=X(e,"b","squaredDifference");n=Mn(r,o),r=n[0],o=n[1],Mt(r.shape,o.shape);var a={a:r,b:o},i=[r,o];return oe.runKernelFunc((function(s,u){var l=s.squaredDifference(r,o);return u([r,o]),l}),a,(function(s,u){var l=u[0],d=u[1],f=tt(2);return{a:function(){return s.mul(l.sub(d).mul(f))},b:function(){return s.mul(d.sub(l).mul(f))}}}),z0,{},i,[])}}),a1e=te({truncatedNormal_:function(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");for(var a=new ZE(e,n,r,!0,o),i=St(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Oj=te({equal_:function(t,e){var n,r=X(t,"a","equal"),o=X(e,"b","equal");return n=Mn(r,o),r=n[0],o=n[1],Mt(r.shape,o.shape),oe.runKernelFunc((function(a){return a.equal(r,o)}),{$a:r,$b:o})}}),i1e=te({equalStrict_:function(t,e){var n=X(t,"a","equalStrict"),r=X(e,"b","equalStrict");return on(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),s1e=te({greater_:function(t,e){var n,r=X(t,"a","greater"),o=X(e,"b","greater");return n=Mn(r,o),r=n[0],o=n[1],Mt(r.shape,o.shape),oe.runKernelFunc((function(a){return a.greater(r,o)}),{a:r,b:o},null,"Greater")}}),Pj=te({greaterEqual_:function(t,e){var n,r=X(t,"a","greaterEqual"),o=X(e,"b","greaterEqual");return n=Mn(r,o),r=n[0],o=n[1],Mt(r.shape,o.shape),oe.runKernelFunc((function(a,i){var s=a.greaterEqual(r,o);return i([r,o]),s}),{a:r,b:o},(function(a,i){var s=i[0],u=i[1];return{a:function(){return $t(s)},b:function(){return $t(u)}}}),"GreaterEqual")}}),u1e=te({greaterEqualStrict_:function(t,e){var n=X(t,"a","greaterEqualStrict"),r=X(e,"b","greaterEqualStrict");return on(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),l1e=te({greaterStrict_:function(t,e){var n=X(t,"a","greaterStrict"),r=X(e,"b","greaterStrict");return on(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),c1e=te({less_:function(t,e){var n,r=X(t,"a","less"),o=X(e,"b","less");return n=Mn(r,o),r=n[0],o=n[1],Mt(r.shape,o.shape),oe.runKernelFunc((function(a){return a.less(r,o)}),{a:r,b:o},null,"Less")}}),d1e=te({lessEqual_:function(t,e){var n,r=X(t,"a","lessEqual"),o=X(e,"b","lessEqual");return n=Mn(r,o),r=n[0],o=n[1],Mt(r.shape,o.shape),oe.runKernelFunc((function(a,i){var s=a.lessEqual(r,o);return i([r,o]),s}),{a:r,b:o},null,"LessEqual")}}),f1e=te({lessEqualStrict_:function(t,e){var n=X(t,"a","lessEqualStrict"),r=X(e,"b","lessEqualStrict");return on(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),h1e=te({lessStrict_:function(t,e){var n=X(t,"a","lessStrict"),r=X(e,"b","lessStrict");return on(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),p1e=te({notEqual_:function(t,e){var n,r=X(t,"a","notEqual"),o=X(e,"b","notEqual");return n=Mn(r,o),r=n[0],o=n[1],Mt(r.shape,o.shape),oe.runKernelFunc((function(a){return a.notEqual(r,o)}),{a:r,b:o},null,"NotEqual")}}),m1e=te({notEqualStrict_:function(t,e){var n=X(t,"a","notEqualStrict"),r=X(e,"b","notEqualStrict");return on(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function EM(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function RM(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var eR=te({gather_:function(t,e,n){n===void 0&&(n=0);var r=X(t,"x","gather"),o=X(e,"indices","gather","int32");n=lr(n,r.shape)[0];var a=(function(i,s,u){for(var l=i.shape[u],d=[],f=1,p=1,m=0;m<u;m++)d.push(i.shape[m]),f*=i.shape[m];for(m=0;m<s.rank;m++)d.push(s.shape[m]);for(m=u+1;m<i.rank;m++)d.push(i.shape[m]),p*=i.shape[m];return{batchSize:f,sliceSize:p,dimSize:l,outputShape:d}})(r,o,n);return oe.runKernelFunc((function(i,s){var u=i.gather(r,o.flatten(),n);return s([o]),u}),{x:r,indices:o},(function(i,s){var u=s[0];return{x:function(){var l=r.shape,d=u.size,f=l.slice(0,n),p=f.length,m=l.slice(n,l.length).slice(1),g=m.length,y=EM(0,p),b=EM(p+1,p+1+g),S=RM([f,[d],m]),C=i.reshape(S),E=u.reshape([d]),_=RM([[p],y,b]),T=C.transpose(_),D=Fj(T,E,r.shape[n]),k=UE(_);return D=D.transpose(k)},indices:function(){return u}}}),"Gather",{axis:n}).reshape(a.outputShape)}}),Fj=te({unsortedSegmentSum_:function(t,e,n){var r=X(t,"x","unsortedSegmentSum"),o=X(e,"segmentIds","unsortedSegmentSum","int32");return K(qn(n),(function(){return"numSegments must be of dtype int"})),oe.runKernelFunc((function(a,i){var s=a.unsortedSegmentSum(r,o,n);return i([o]),s}),{$x:r},(function(a,i){var s=i[0];return{$x:function(){return(function(u,l){for(var d=HE(l,$t(l)),f=eR(u,d),p=Pj(l,tt(0,"int32")),m=f.rank-p.rank,g=0;g<m;++g)p=pu(p,g+1);p=G0(p,Ef(f.shape,"bool"));var y=$t(f);return Vl(p,f,y)})(a,s)}}}))}}),v1e=function(t,e,n){return Ye(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,d,f,p,m,g,y;return Qe(this,(function(b){switch(b.label){case 0:for(r=X(t,"tensor","boolMask"),o=X(e,"mask","boolMask","bool"),a=n??0,i=o.rank,s=r.shape,K(i>0,(function(){return"mask cannot be scalar"})),on(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=a;l<a+i;l++)u*=s[l];return d=s.slice(0,a).concat([u],s.slice(a+i)),f=r.reshape(d),p=o.reshape([-1]),[4,Aj(p)];case 1:return m=b.sent(),g=m.squeeze([1]),y=eR(f,g,a),t!==r&&r.dispose(),e!==o&&o.dispose(),g.dispose(),f.dispose(),p.dispose(),m.dispose(),[2,y]}}))}))};function Bj(t,e,n,r,o,a,i){a===void 0&&(a="NHWC"),K(t.length===e.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"}));var s=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),K(s.length===4,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),K(u.rank===4,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),K(n.rank===4,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var d=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];K(d===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+n.shape[2]+"."})),K(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."})),i!=null&&K(qn(o),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var p=$E(a),m=nc(s,n.shape,r,1,o,i,!1,p),g=oe.runKernelFunc((function(y,b){var S=y.conv2dDerInput(u,n,m);return b([n,u]),S}),{dy4D:u,filter:n},(function(y,b){var S=b[0],C=b[1];return{dy4D:function(){return oc(y,S,r,o,a,1,i)},filter:function(){return tR(y,C,S.shape,r,o,a,i)}}}));return l?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}function kw(t){var e=(function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a})(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function Lj(t,e,n,r,o){K(t.length===e.rank,(function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"}));var a=t,i=e,s=!1;e.rank===4&&(s=!0,i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],l=i.shape[4];K(a.length===5,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."})),K(i.rank===5,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank})),K(n.rank===5,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),K(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),K(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var d=xy(a,n.shape,r,1,o),f=oe.runKernelFunc((function(p){return p.conv3dDerInput(i,n,d)}),{dy5D:i});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var g1e=te({conv1d_:function(t,e,n,r,o,a,i){o===void 0&&(o="NWC"),a===void 0&&(a=1);var s=X(t,"x","conv1d"),u=X(e,"filter","conv1d"),l=s,d=!1;s.rank===2&&(d=!0,l=s.as3D(1,s.shape[0],s.shape[1])),K(l.rank===3,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),K(u.rank===3,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),i!=null&&K(qn(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),K(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),K(to(n,a),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"})),K(o==="NWC",(function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."}));var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),m=oc(p,f,[1,n],r,"NHWC",[1,a],i);return d?m.as2D(m.shape[2],m.shape[3]):m.as3D(m.shape[0],m.shape[2],m.shape[3])}}),oc=te({conv2d_:function(t,e,n,r,o,a,i){o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]);var s=X(t,"x","conv2d"),u=X(e,"filter","conv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),K(l.rank===4,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),K(u.rank===4,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),i!=null&&K(qn(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var f=o==="NHWC"?l.shape[3]:l.shape[1];K(f===u.shape[2],(function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."})),K(to(n,a),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}));var p=$E(o),m=nc(l.shape,u.shape,n,a,r,i,!1,p),g=[u,l],y=oe.runKernelFunc((function(b,S){var C=b.conv2d(l,u,m);return S([u,l]),C}),{x:l,filter:u},(function(b,S){var C=S,E=C[0],_=C[1];return K(Kd(a),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"})),{x:function(){return jj(_.shape,b,E,n,r,o)},filter:function(){return tR(_,b,E.shape,n,r,o)}}}),"Conv2D",m,g);return d?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),y1e=te({conv3d_:function(t,e,n,r,o,a){o===void 0&&(o="NDHWC"),a===void 0&&(a=[1,1,1]);var i=X(t,"x","conv3d"),s=X(e,"filter","conv3d"),u=i,l=!1;i.rank===4&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),K(u.rank===5,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),K(s.rank===5,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),K(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),K((function(p,m){return kw(p)||kw(m)})(n,a),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),K(o==="NDHWC",(function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."}));var d=xy(u.shape,s.shape,n,a,r),f=oe.runKernelFunc((function(p,m){var g=p.conv3d(u,s,d);return m([u,s]),g}),{x:u,$filter:s},(function(p,m){K(kw(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}));var g=m[0],y=m[1];return{x:function(){return Lj(g.shape,p,y,n,r)},$filter:function(){return(function(b,S,C,E,_){var T=b;b.rank===4&&(T=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]));var D=S;D.rank===4&&(D=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3])),K(T.rank===5,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+T.shape+"."})),K(D.rank===5,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."})),K(C.length===5,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+C+"."})),K(T.shape[4]===C[3],(function(){return"Error in conv3dDerFilter: depth of input "+T.shape[4]+") must match input depth in filter ("+C[3]+"."})),K(D.shape[4]===C[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+C[4]+")."}));var k=xy(T.shape,C,E,1,_);return oe.runKernelFunc((function(I){return I.conv3dDerFilter(T,D,k)}),{x5D:T,dy5D:D})})(g,p,y.shape,n,r)}}}));return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),tR=te({conv2dDerFilter_:function(t,e,n,r,o,a,i){a===void 0&&(a="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),K(s.rank===4,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),K(u.rank===4,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),K(n.length===4,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l=a==="NHWC"?s.shape[3]:s.shape[1],d=a==="NHWC"?u.shape[3]:u.shape[1];K(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),K(d===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+n[3]+")."})),i!=null&&K(qn(o),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var f=$E(a),p=nc(s.shape,n,r,1,o,i,!1,f);return oe.runKernelFunc((function(m){return m.conv2dDerFilter(s,u,p)}),{x4D:s,dy4D:u})}}),jj=te({conv2dDerInput_:Bj}),nR=te({depthwiseConv2d_:function(t,e,n,r,o,a,i){a===void 0&&(a=[1,1]);var s=X(t,"x","depthwiseConv2d"),u=X(e,"filter","depthwiseConv2d"),l=s,d=!1;s.rank===3&&(d=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),K(l.rank===4,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),K(u.rank===4,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),K(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),a==null&&(a=[1,1]),K(to(n,a),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),i!=null&&K(qn(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var f=nc(l.shape,u.shape,n,a,r,i,!0),p=[l,u],m=oe.runKernelFunc((function(g,y){var b=g.depthwiseConv2D(l,u,f);return y([l,u]),b}),{x:l,filter:u},(function(g,y){K(Kd(a),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var b=y[0],S=y[1];return{x:function(){return zj(b.shape,g,S,f)},filter:function(){return Uj(b,g,S.shape,f)}}}),"DepthwiseConv2dNative",f,p);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),zj=te({depthwiseConv2dDerInput_:function(t,e,n,r){var o=e,a=!1;e.rank===3&&(a=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=oe.runKernelFunc((function(s){return s.depthwiseConv2DDerInput(o,n,r)}),{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),Uj=te({depthwiseConv2dDerFilter_:function(t,e,n,r){var o=t;t.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return a.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),oe.runKernelFunc((function(i){return i.depthwiseConv2DDerFilter(o,a,r)}),{x4D:o,dy4D:a})}}),Wj=te({separableConv2d_:function(t,e,n,r,o,a,i){a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC");var s=X(t,"x","separableConv2d"),u=X(e,"depthwiseFilter","separableConv2d"),l=X(n,"pointwiseFilter","separableConv2d"),d=s,f=!1;if(s.rank===3&&(f=!0,d=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");K(d.rank===4,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."})),K(u.rank===4,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),K(l.rank===4,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),K(l.shape[0]===1,(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),K(l.shape[1]===1,(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var p=u.shape[2],m=u.shape[3];K(l.shape[2]===p*m,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*m+", but got "+l.shape[2]+"."}));var g=nR(d,u,r,o,i,a),y=oc(g,l,1,"valid",i);return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),b1e=te({conv2dTranspose_:function(t,e,n,r,o,a){return Bj(n,X(t,"x","conv2dTranspose"),X(e,"filter","conv2dTranspose"),r,o,"NHWC",a)}}),x1e=te({conv3dTranspose_:function(t,e,n,r,o){return Lj(n,X(t,"x","conv3dTranspose"),X(e,"filter","conv3dTranspose"),r,o)}}),Vj=te({matMul_:function(t,e,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var a=X(t,"a","matMul"),i=X(e,"b","matMul");o=Mn(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],d=r?i.shape[i.rank-2]:i.shape[i.rank-1],f=a.shape.slice(0,-2),p=i.shape.slice(0,-2),m=Ke(f),g=Ke(p);K(a.rank>=2&&i.rank>=2&&a.rank===i.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."})),K(mr(f,p),(function(){return"Error in matMul: outer dimensions ("+f+") and ("+p+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."})),K(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var y=a.shape.slice(0,-2).concat([l,d]),b=n?a.as3D(m,s,l):a.as3D(m,l,s),S=r?i.as3D(g,d,u):i.as3D(g,u,d),C={transposeA:n,transposeB:r};return oe.runKernelFunc((function(E,_){var T=E.batchMatMul(b,S,n,r);return _([b,S]),T}),{a:b,b:S},(function(E,_){var T=_,D=T[0],k=T[1];return n||r?!n&&r?{a:function(){return E.matMul(k,!1,!1)},b:function(){return E.matMul(D,!0,!1)}}:n&&!r?{a:function(){return k.matMul(E,!1,!0)},b:function(){return D.matMul(E,!1,!1)}}:{a:function(){return k.matMul(E,!0,!0)},b:function(){return E.matMul(D,!0,!0)}}:{a:function(){return E.matMul(k,!1,!0)},b:function(){return D.matMul(E,!0,!1)}}}),"BatchMatMul",C).reshape(y)}}),w1e=te({dot_:function(t,e){var n=X(t,"t1","dot"),r=X(e,"t2","dot");K(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var o=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];return K(o===a,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."})),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),S1e=te({outerProduct_:function(t,e){var n=X(t,"v1","outerProduct"),r=X(e,"v2","outerProduct");return K(n.rank===1&&r.rank===1,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),um=te({reverse_:function(t,e){var n=X(t,"x","reverse");if(n.rank===0)return n.clone();var r=lr(e,n.shape);return oe.runKernelFunc((function(o){return o.reverse(n,r)}),{$x:n},(function(o){return{$x:function(){return o.reverse(r)}}})).reshapeAs(n)}}),C1e=te({reverse1d_:function(t){var e=X(t,"x","reverse");return K(e.rank===1,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."})),um(e,0)}}),E1e=te({reverse2d_:function(t,e){var n=X(t,"x","reverse");return K(n.rank===2,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),um(n,e)}}),R1e=te({reverse3d_:function(t,e){var n=X(t,"x","reverse");return K(n.rank===3,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),um(n,e)}}),_1e=te({reverse4d_:function(t,e){var n=X(t,"x","reverse");return K(n.rank===4,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),um(n,e)}});function Hj(t,e,n,r,o,a){var i=X(t,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),K(s.rank===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),K(to(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),a!=null&&K(qn(o),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=Wl(s.shape,e,n,r,o,a);if(l.filterWidth===1&&l.filterHeight===1&&mr(l.inShape,l.outShape))return i.clone();var d=[s],f=oe.runKernelFunc((function(p,m){var g=p.maxPool(s,l);return m([s,g]),g}),{x:s},(function(p,m){var g=m[0],y=m[1];return{x:function(){return(function(b,S,C,E,_,T,D,k){var I=X(b,"dy","maxPoolBackprop"),M=X(S,"input","maxPoolBackprop"),O=X(C,"output","maxPoolBackprop");K(M.rank===I.rank,(function(){return"Rank of input ("+M.rank+") does not match rank of dy ("+I.rank+")"})),K(to(_,T),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+T+"'"})),K(I.rank===4,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+I.rank+"."})),K(M.rank===4,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+M.rank+"."}));var F=Wl(M.shape,E,_,T,D,k);return oe.runKernelFunc((function(j){return j.maxPoolBackprop(I,M,O,F)}),{$dy:I,$input:M})})(p,g,y,e,n,r,o)}}}),"MaxPool",l,d);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Gj(t,e,n,r,o,a){var i=X(t,"x","avgPool","float32");K(to(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),K(s.rank===4,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),a!=null&&K(qn(o),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=Wl(s.shape,e,n,r,o,a);if(l.filterWidth===1&&l.filterHeight===1&&mr(l.inShape,l.outShape))return i.clone();var d=oe.runKernelFunc((function(f){return f.avgPool(s,l)}),{x:s},(function(f){return{x:function(){return(function(p,m,g,y,b,S){var C=X(p,"dy","avgPoolBackprop"),E=X(m,"input","avgPoolBackprop");K(E.rank===C.rank,(function(){return"Rank of input ("+E.rank+") does not match rank of dy ("+C.rank+")"})),K(to(y,b),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+b+"'"}));var _=E,T=C,D=!1;E.rank===3&&(D=!0,_=E.as4D(1,E.shape[0],E.shape[1],E.shape[2]),T=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),K(T.rank===4,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."})),K(_.rank===4,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+_.rank+"."}));var k=Wl(_.shape,g,y,b,S),I=oe.runKernelFunc((function(M){return M.avgPoolBackprop(T,_,k)}),{dy4D:T,input4D:_});return D?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I})(f,s,e,n,r,o)}}}),"AvgPool",l);return d=d.cast(i.dtype),u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var To=te({maxPool_:function(t,e,n,r,o){return Hj(t,e,n,1,r,o)}}),T1e=te({avgPool_:function(t,e,n,r,o){return Gj(t,e,n,1,r,o)}}),A1e=te({pool_:function(t,e,n,r,o,a){o==null&&(o=[1,1]),a==null&&(a=1),r===0&&(r="valid");var i=X(t,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),K(to(a,o),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"}));var l,d=Wl(s.shape,e,a,o,r),f=[d.dilationHeight,d.dilationWidth];l=r==="same"?(function(_,T){var D=_.map((function(M,O){return M+(M-1)*(T[O]-1)})).map((function(M){return M-1})),k=D.map((function(M){return Math.floor(M/2)})),I=D.map((function(M,O){return M-k[O]}));return D.map((function(M,O){return[k[O],I[O]]}))})([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var p=f[0]===1&&f[1]===1,m=(function(_,T,D){var k=D.map((function(W){return W[0]})),I=D.map((function(W){return W[1]})),M=_.concat(k,I),O=T.map((function(W,q){return(W-M[q]%W)%W})),F=I.map((function(W,q){return W+O[q]})),j=T.map((function(W,q){return[k[q],F[q]]})),G=T.map((function(W,q){return[0,O[q]]}));return[j,G]})([d.inHeight,d.inWidth],f,l),g=m[0],y=m[1],b=p?r:"valid",S=p?s:LL(s,f,g),C=(n==="avg"?function(){return Gj(S,e,a,1,b)}:function(){return Hj(S,e,a,1,b)})(),E=p?C:BL(C,f,y);return u?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),N1e=te({maxPool3d_:function(t,e,n,r,o,a,i){a===void 0&&(a="NDHWC");var s=X(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),K(u.rank===5,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),K(a==="NDHWC",(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),K(to(n,i),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),o!=null&&K(qn(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var d=by(u.shape,e,n,i,r,o,a),f=oe.runKernelFunc((function(p,m){var g=p.maxPool3d(u,d);return m([u,g]),g}),{x:u},(function(p,m){var g=m[0],y=m[1];return{x:function(){return(function(b,S,C,E,_,T,D,k){var I=X(b,"dy","maxPool3dBackprop"),M=X(S,"input","maxPool3dBackprop"),O=X(C,"output","maxPool3dBackprop"),F=I,j=M,G=O,W=!1;M.rank===4&&(W=!0,F=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3]),j=M.as5D(1,M.shape[0],M.shape[1],M.shape[2],M.shape[3]),G=O.as5D(1,O.shape[0],O.shape[1],O.shape[2],O.shape[3])),K(F.rank===5,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+F.rank+"."})),K(j.rank===5,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+j.rank+"."})),K(G.rank===5,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+G.rank+"."})),T==null&&(T=[1,1,1]),K(to(_,T),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+T+"'"})),k!=null&&K(qn(D),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+k+" but got pad "+D+"."}));var q=by(j.shape,E,_,T,D,k),P=oe.runKernelFunc((function(z){return z.maxPool3dBackprop(F,j,G,q)}),{dy5D:F,input5D:j});return W?P.as4D(P.shape[1],P.shape[2],P.shape[3],P.shape[4]):P})(p,g,y,e,n,i,r,o)}}}));return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),D1e=te({avgPool3d_:function(t,e,n,r,o,a,i){a===void 0&&(a="NDHWC");var s=X(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),K(u.rank===5,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),K(a==="NDHWC",(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),K(to(n,i),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),o!=null&&K(qn(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var d=by(u.shape,e,n,i,r,o,a),f=oe.runKernelFunc((function(p){return p.avgPool3d(u,d)}),{x:u},(function(p){return{x:function(){return(function(m,g,y,b,S,C,E){var _=X(m,"dy","avgPool3dBackprop"),T=X(g,"input","avgPool3dBackprop"),D=_,k=T,I=!1;T.rank===4&&(I=!0,D=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]),k=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),K(D.rank===5,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."})),K(k.rank===5,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+k.rank+"."})),S==null&&(S=[1,1,1]),K(to(b,S),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+S+"'"})),E!=null&&K(qn(C),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+C+"."}));var M=by(k.shape,y,b,S,C,E),O=oe.runKernelFunc((function(F){return F.avgPool3dBackprop(D,k,M)}),{dy5D:D,input5D:k});return I?O.as4D(O.shape[1],O.shape[2],O.shape[3],O.shape[4]):O})(p,u,e,n,i,r,o)}}}));return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),k1e=te({maxPoolWithArgmax_:function(t,e,n,r,o){o===void 0&&(o=!1);var a=X(t,"x","maxPoolWithArgmax"),i={filterSize:e,strides:n,pad:r,includeBatchInIndex:o},s=oe.runKernel("MaxPoolWithArgmax",{x:a},i);return{result:s[0],indexes:s[1]}}}),Fu=te({slice_:function(t,e,n){var r,o,a=X(t,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach((function(u){K(u!==-1,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=n==null?new Array(a.rank).fill(-1):typeof n=="number"?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map((function(u,l){return u>=0?u:(K(u===-1,(function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."})),a.shape[l]-r[l])})),T0e(a,r,o);var i=a.shape,s={begin:r,size:o};return oe.runKernelFunc((function(u){return u.slice(a,r,o)}),{x:a},(function(u){for(var l=[],d=0;d<u.rank;d++)l.push([r[d],i[d]-r[d]-o[d]]);return{x:function(){return Is(u,l)}}}),"Slice",s)}}),I1e=te({slice1d_:function(t,e,n){var r=X(t,"x","slice1d");return K(r.rank===1,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Fu(r,[e],[n])}}),M1e=te({slice2d_:function(t,e,n){var r=X(t,"x","slice2d");return K(r.rank===2,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Fu(r,e,n)}}),O1e=te({slice3d_:function(t,e,n){var r=X(t,"x","slice3d");return K(r.rank===3,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Fu(r,e,n)}}),P1e=te({slice4d_:function(t,e,n){var r=X(t,"x","slice4d");return K(r.rank===4,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Fu(r,e,n)}});function $j(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(yo(e.shape,r))),t.rank<n.rank&&(t=t.reshape(yo(t.shape,r))),{x:function(){var a=t.mul(n.equal(e).cast(t.dtype));return o==null?a:a.transpose(o)}}}var F1e=te({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","all","bool"),o=lr(e,r.shape),a=o,i=Fi(a,r.rank);i!=null&&(r=r.transpose(i),a=Bi(a.length,r.rank));var s=oe.runKernelFunc((function(l){return l.all(r,a)}),{$x:r});if(n){var u=yo(s.shape,o);return s.reshape(u)}return s}}),B1e=te({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","any","bool"),o=lr(e,r.shape),a=o,i=Fi(a,r.rank);i!=null&&(r=r.transpose(i),a=Bi(a.length,r.rank));var s=oe.runKernelFunc((function(l){return l.any(r,a)}),{$x:r});if(n){var u=yo(s.shape,o);return s.reshape(u)}return s}}),L1e=te({argMax_:function(t,e){e===void 0&&(e=0);var n=X(t,"x","argMax");e==null&&(e=0);var r=lr(e,n.shape),o=Fi(r,n.rank);o!=null&&(n=n.transpose(o),r=Bi(r.length,n.rank));var a={axis:r[0]},i=[n];return oe.runKernelFunc((function(s,u){var l=s.argMax(n,r[0]);return u([n]),l}),{x:n},(function(s,u){var l=u[0];return{x:function(){return $t(l)}}}),"ArgMax",a,i)}}),j1e=te({argMin_:function(t,e){e===void 0&&(e=0);var n=X(t,"x","argMin");e==null&&(e=0);var r=lr(e,n.shape),o=Fi(r,n.rank);return o!=null&&(n=n.transpose(o),r=Bi(r.length,n.rank)),oe.runKernelFunc((function(a,i){var s=a.argMin(n,r[0]);return i([n]),s}),{$x:n},(function(a,i){var s=i[0];return{$x:function(){return $t(s)}}}))}}),z1e=te({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","logSumExp"),o=lr(e,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=yo(s.shape,o);return s.reshape(u)}return s}}),U1e=te({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","max"),o=r,a=lr(e,r.shape),i=a,s=Fi(i,r.rank);s!=null&&(r=r.transpose(s),i=Bi(i.length,r.rank));var u=[r],l=oe.runKernelFunc((function(f,p){var m=f.max(r,i);return p([o,m]),m}),{x:r},(function(f,p){return $j(f,p[1],p[0],a,s)}),"Max",{axes:i},u,[!0]);if(n){var d=yo(l.shape,a);l=l.reshape(d)}return l}}),W1e=te({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","mean"),o=lr(e,r.shape),a=Ke(Pr(r.shape,o)[1]);return U0((function(i){var s=tt(a);return{value:(s.dtype===i.dtype?i:i.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=i.shape.slice();return o.forEach((function(d){l[d]=1})),u.reshape(l).mul(Ef(i.shape,"float32")).div(a)}}}))(r)}}),V1e=te({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","min"),o=r,a=lr(e,r.shape),i=a,s=Fi(i,r.rank);s!=null&&(r=r.transpose(s),i=Bi(i.length,r.rank));var u=[r],l=oe.runKernelFunc((function(f,p){var m=f.min(r,i);return p([o,m]),m}),{x:r},(function(f,p){return $j(f,p[1],p[0],a,s)}),"Min",{axes:i},u,[!0]);if(n){var d=yo(l.shape,a);l=l.reshape(d)}return l}}),H1e=te({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=lr(e,(t=X(t,"x","moments")).shape),o=t.mean(r,n),a=o.shape;n||(a=yo(o.shape,r));var i=t.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,n)}}}),mu=te({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=lr(e,r.shape);return U0((function(a){var i=Fi(o,a.rank),s=o,u=a;i!=null&&(u=a.transpose(i),s=Bi(s.length,a.rank));var l=function(m){var g=a.shape.slice();return o.forEach((function(y){g[y]=1})),m.reshape(g).mul(Ef(a.shape,"float32"))},d={axes:s},f=oe.runKernelFunc((function(m){return m.sum(u,s)}),{x:u},(function(m){return{x:function(){return l(m)}}}),"Sum",d);if(n){var p=yo(f.shape,o);f=f.reshape(p)}return{value:f,gradFunc:l}}))(r)}}),G1e=te({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=X(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=lr(e,r.shape),a=Fi(o,r.rank),i=o,s=r;a!=null&&(s=r.transpose(a),i=Bi(i.length,r.rank));var u=oe.runKernelFunc((function(d){return d.prod(s,i)}),{permutedX:s});if(n){var l=yo(u.shape,o);u=u.reshape(l)}return u}}),qj=te({elu_:function(t){var e=X(t,"x","elu");return oe.runKernelFunc((function(n,r){var o=n.elu(e);return r([o]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){return oe.runKernelFunc((function(a){return a.eluDer(n,o)}),{dy:n,y:o})}}}))}}),$1e=te({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=X(t,"x","leakyRelu");return HE(tt(e).mul(n),n)}}),Xj=te({prelu_:function(t,e){var n=X(t,"x","prelu"),r=X(e,"alpha","prelu");return oe.runKernelFunc((function(o,a){var i=o.prelu(n,r);return a([n,r]),i}),{x:n,alpha:r},(function(o,a){var i=a[0],s=a[1],u=i.greater(0);return{x:function(){return Vl(u,o,o.mul(s))},alpha:function(){var l=Vl(u,$t(o),o.mul(i)),d=ir(s.shape,o.shape);return d.length>0&&(l=l.sum(d)),l.reshape(s.shape)}}}),"Prelu")}}),$0=te({relu_:function(t){var e=X(t,"x","relu");return e.dtype==="bool"?e.toInt():oe.runKernelFunc((function(n,r){var o=n.relu(e);return r([e]),o}),{x:e},(function(n,r){var o=r[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}}),"Relu")}}),Kj=te({relu6_:function(t){var e=X(t,"x","relu6");return e.dtype==="bool"?e.toInt():oe.runKernelFunc((function(n,r){var o=n.relu6(e);return r([e]),o}),{x:e},(function(n,r){var o=r[0],a=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(a.toFloat())}}}),"Relu6")}}),q1e=te({selu_:function(t){var e=X(t,"x","selu");return oe.runKernelFunc((function(n,r){var o=n.selu(e);return r([e]),o}),{$x:e},(function(n,r){var o=r[0];return{$x:function(){var a=o.greater(tt(0)),i=tt(QE),s=tt(JE),u=n.mul(s),l=n.mul(i).mul(o.toFloat().exp());return Vl(a,u,l)}}}))}}),X1e=te({localResponseNormalization_:function(t,e,n,r,o){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var a=X(t,"x","localResponseNormalization");K(a.rank===4||a.rank===3,(function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."})),K(qn(e),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."}));var i=a,s=!1;a.rank===3&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=oe.runKernelFunc((function(l,d){var f=l.localResponseNormalization4D(i,e,n,r,o);return d([i,f]),f}),{x4D:i},(function(l,d){var f=d[0],p=d[1];return{x4D:function(){return oe.runKernelFunc((function(m){return m.LRNGrad(l,f,p,e,n,r,o)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Yj=te({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=(function s(u,l,d){if(d===void 0&&(d=null),u.rank===0)return u.abs();if(u.rank!==1&&d===null)return s(u.reshape([-1]),l,d);if(u.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(l===1)return u.abs().sum(d);if(l===1/0)return u.abs().max(d);if(l===-1/0)return u.abs().min(d);if(l==="euclidean"||l===2)return u.abs().pow(tt(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(d)&&d.length===2){if(l===1)return u.abs().sum(d[0]).max(d[1]-1);if(l===1/0)return u.abs().sum(d[1]).max(d[0]);if(l===-1/0)return u.abs().sum(d[1]).min(d[0]);if(l==="fro"||l==="euclidean")return u.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+d)})(t=X(t,"x","norm"),e,n),a=o.shape;if(r){var i=lr(n,t.shape);a=yo(o.shape,i)}return o.reshape(a)}}),K1e=te({basicLSTMCell_:function(t,e,n,r,o,a){var i=X(t,"forgetBias","basicLSTMCell"),s=X(e,"lstmKernel","basicLSTMCell"),u=X(n,"lstmBias","basicLSTMCell"),l=X(r,"data","basicLSTMCell"),d=X(o,"c","basicLSTMCell"),f=X(a,"h","basicLSTMCell"),p=l.concat(f,1).matMul(s).add(u),m=p.shape[0],g=p.shape[1]/4,y=[m,g],b=p.slice([0,0],y),S=p.slice([0,g],y),C=p.slice([0,2*g],y),E=p.slice([0,3*g],y),_=b.sigmoid().mulStrict(S.tanh()).addStrict(d.mulStrict(i.add(C).sigmoid())),T=_.tanh().mulStrict(E.sigmoid());return[_,T]}}),Y1e=te({multiRNNCell_:function(t,e,n,r){for(var o=X(e,"data","multiRNNCell"),a=fy(n,"c","multiRNNCell"),i=fy(r,"h","multiRNNCell"),s=o,u=[],l=0;l<t.length;l++){var d=t[l](s,a[l],i[l]);u.push(d[0]),u.push(d[1]),s=d[1]}var f=[],p=[];for(l=0;l<u.length;l+=2)f.push(u[l]),p.push(u[l+1]);return[f,p]}}),Q1e=te({movingAverage_:function(t,e,n,r,o){o===void 0&&(o=!0);var a=X(t,"v","movingAverage"),i=X(e,"x","movingAverage"),s=X(n,"decay","movingAverage");Hge(a,i),K(mr(a.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=tt(1),l=u.sub(s),d=i.sub(a).mul(l);if(o){K(r!=null,(function(){return"When using zeroDebias: true, step is required."}));var f=X(r,"step","movingAverage");d=d.div(u.sub(gy(s,f)))}return a.add(d)}}),J1e=te({stridedSlice_:function(t,e,n,r,o,a,i,s,u){if(o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),i!==0)throw new Error("ellipsis mask is not yet supported");var l=X(t,"x","stridedSlice"),d=oM(s),f=l.shape.slice();d.forEach((function(b){e[b]=0,n[b]=1,f.splice(b,0,1)})),l=l.reshape(f);for(var p=0;p<l.rank;p++)e[p]=A0e(o,e,r,l.shape,p),n[p]=N0e(a,n,r,l.shape,p),r[p]=r[p]||1;var m=oM(u);m.forEach((function(b){n[b]=e[b]+1,r[b]=1}));var g=GE(e,n,r),y=g.filter((function(b,S){return m.indexOf(S)===-1}));return r.every((function(b){return b===1}))?Fu(l,e,g).reshape(y):oe.runKernelFunc((function(b){return b.stridedSlice(l,e,n,r)}),{$x:l}).reshape(y)}}),Z1e=te({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=X(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var a=oe.runKernelFunc((function(i){return i.topk(r,e,n)}),{$x:r});return{values:a[0],indices:a[1]}}}),ewe=te({scatterND_:function(t,e,n){var r=X(t,"indices","scatterND","int32"),o=X(e,"updates","scatterND");return _0e(o,r,n),oe.runKernelFunc((function(a){return a.scatterND(r,o,n)}),{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),rR=te({fft_:function(t){K(t.dtype==="complex64",(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."}));var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return oe.runKernelFunc((function(o){return o.fft(r)}),{input:t}).reshape(t.shape)}}),Cy=te({ifft_:function(t){K(t.dtype==="complex64",(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."}));var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return oe.runKernelFunc((function(o){return o.ifft(r)}),{input:t}).reshape(t.shape)}}),oR=te({rfft_:function(t,e){K(t.dtype==="float32",(function(){return"The dtype for rfft() must be real value but got "+t.dtype}));var n,r=t.shape[t.shape.length-1],o=t.size/r;if(e!=null&&e<r){var a=t.shape.map((function(S){return 0})),i=t.shape.map((function(S){return S}));i[t.shape.length-1]=e,n=t.slice(a,i),r=e}else if(e!=null&&e>r){var s=t.shape.map((function(S){return S}));s[t.shape.length-1]=e-r,n=t.concat(Wn(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=Cr(n,u).as2D(o,r),d=rR(l),f=Math.floor(r/2)+1,p=da(d),m=pi(d),g=p.split([f,r-f],p.shape.length-1),y=m.split([f,r-f],m.shape.length-1),b=n.shape.slice();return b[n.shape.length-1]=f,Cr(g[0],y[0]).reshape(b)}}),Qj=te({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=Cy(r);return da(o)}var a=[n,2*(e-1)],i=da(t).as2D(n,e),s=pi(t).as2D(n,e),u=i.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(tt(-1)),d=i.concat(u,1),f=s.concat(l,1);return r=Cr(d,f).as2D(a[0],a[1]),o=Cy(r),da(o)}}),twe=Object.freeze({fft:rR,ifft:Cy,rfft:oR,irfft:Qj}),nwe=te({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var o=X(t,"sparseIndices","sparseToDense","int32"),a=X(e,"sparseValues","sparseToDense"),i=X(r,"defaultValue","sparseToDense",a.dtype);return(function(s,u,l,d){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,p=s.rank>1?s.shape[1]:1;if(l.length!==p)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+p+".");var m=u.size;if(u.rank!==0&&(u.rank!==1||m!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")})(o,a,n,i),oe.runKernelFunc((function(s){return s.sparseToDense(o,a,n,i)}),{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}}),rwe=te({gatherND_:function(t,e){var n=X(e,"indices","gatherND","int32"),r=X(t,"x","gatherND");return oe.runKernelFunc((function(o){return o.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),owe=te({diag_:function(t){var e=X(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return oe.runKernelFunc((function(r){return r.diag(e)}),{$x:e}).reshape(n)}}),awe=te({dropout_:function(t,e,n,r){var o=X(t,"x","dropout");if(K(o.dtype==="float32",(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."})),K(e>=0&&e<1,(function(){return"rate must be a float in the range [0, 1), but got "+e+"."})),e===0)return t instanceof wn?o.clone():o;var a=(function(u,l){if(l==null)return u.shape.slice();if(mr(u.shape,l))return l;if(u.shape.length===l.length){for(var d=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?d.push(u.shape[f]):d.push(l[f]);return d}return l})(o,n),i=1-e,s=kj(a,0,1,"float32",r).add(i).floor().div(i);return o.mul(s)}});function Jj(t,e,n){for(var r=1-t%2,o=new Float32Array(t),a=0;a<t;++a){var i=2*Math.PI*a/(t+r-1);o[a]=e-n*Math.cos(i)}return Ha(o,"float32")}var aR=te({hannWindow_:function(t){return Jj(t,.5,.5)}}),Zj=te({hammingWindow_:function(t){return Jj(t,.54,.46)}}),iR=te({frame_:function(t,e,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var a=0,i=[];a+e<=t.size;)i.push(Fu(t,a,e)),a+=n;if(r)for(;a<t.size;){var s=a+e-t.size,u=xa([Fu(t,a,e-s),Ol([s],o)]);i.push(u),a+=n}return i.length===0?Ml([],[0,e]):xa(i).as2D(i.length,e)}}),ez=te({stft_:function(t,e,n,r,o){var a;o===void 0&&(o=aR),r==null&&(a=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=iR(t,e,n),s=Un(i,o(e)),u=[],l=0;l<i.shape[0];l++)u.push(oR(s.slice([l,0],[1,e]),r));return xa(u)}}),iwe=Object.freeze({hannWindow:aR,hammingWindow:Zj,frame:iR,stft:ez}),zr,swe=function(t,e,n){return n===void 0&&(n=1),Ye(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,d,f,p,m,g,y,b;return Qe(this,(function(S){switch(S.label){case 0:return r=X(t,"predictions","inTopK"),o=X(e,"targets","inTopK"),K(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),K(r.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank})),on(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],K(n>0&&n<=a,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n})),[4,r.data()];case 1:return i=S.sent(),[4,o.data()];case 2:for(s=S.sent(),u=[i.length/a,a],d=u[1],f=$d("bool",l=u[0]),p=0;p<l;p++){for(m=p*d,g=i.subarray(m,m+d),y=[],b=0;b<g.length;b++)y.push({value:g[b],index:b});for(y.sort((function(C,E){return E.value-C.value})),f[p]=0,b=0;b<n;b++)if(y[b].index===s[p]){f[p]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),[2,Rr(f,o.shape,"bool")]}}))}))};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(zr||(zr={}));var uwe=te({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=zr.SUM_BY_NONZERO_WEIGHTS);var o=X(t,"labels","absoluteDifference"),a=X(e,"predictions","absoluteDifference"),i=null;n!=null&&(i=X(n,"weights","absoluteDifference")),on(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return Ms(s,i,r)}}),Ms=te({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=zr.SUM_BY_NONZERO_WEIGHTS);var r=X(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=X(e,"weights","computeWeightedLoss"));var a=o==null?r:r.mul(o);if(n===zr.NONE)return a;if(n===zr.SUM)return a.sum();if(n===zr.MEAN){if(o==null)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(tt(i)):s}if(n===zr.SUM_BY_NONZERO_WEIGHTS){if(o==null)return a.sum().div(tt(r.size));var u=o.mul(Ef(r.shape)).notEqual(tt(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),lwe=te({cosineDistance_:function(t,e,n,r,o){o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"labels","cosineDistance"),i=X(e,"predictions","cosineDistance"),s=null;r!=null&&(s=X(r,"weights","cosineDistance")),on(a.shape,i.shape,"Error in cosineDistance: ");var u=tt(1).sub(a.mul(i).sum(n,!0));return Ms(u,s,o)}}),cwe=te({hingeLoss_:function(t,e,n,r){r===void 0&&(r=zr.SUM_BY_NONZERO_WEIGHTS);var o=X(t,"labels","hingeLoss"),a=X(e,"predictions","hingeLoss"),i=null;n!=null&&(i=X(n,"weights","hingeLoss")),on(o.shape,a.shape,"Error in hingeLoss: ");var s=tt(1);o=tt(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return Ms(u,i,r)}}),dwe=te({huberLoss_:function(t,e,n,r,o){r===void 0&&(r=1),o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"labels","huberLoss"),i=X(e,"predictions","huberLoss"),s=null;n!=null&&(s=X(n,"weights","huberLoss")),on(a.shape,i.shape,"Error in huberLoss: ");var u=tt(r),l=i.sub(a).abs(),d=YL(l,u),f=l.sub(d),p=tt(.5).mul(d.square()).add(u.mul(f));return Ms(p,s,o)}}),fwe=te({logLoss_:function(t,e,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"labels","logLoss"),i=X(e,"predictions","logLoss"),s=null;n!=null&&(s=X(n,"weights","logLoss")),on(a.shape,i.shape,"Error in logLoss: ");var u=tt(1),l=tt(r),d=a.mul(i.add(l).log()).neg().sub(u.sub(a).mul(u.sub(i).add(l).log()));return Ms(d,s,o)}}),hwe=te({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=zr.SUM_BY_NONZERO_WEIGHTS);var o=X(t,"labels","meanSquaredError"),a=X(e,"predictions","meanSquaredError"),i=null;n!=null&&(i=X(n,"weights","meanSquaredError")),on(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return Ms(s,i,r)}}),pwe=te({sigmoidCrossEntropy_:function(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"multiClassLabels","sigmoidCrossEntropy"),i=X(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=X(n,"weights","sigmoidCrossEntropy")),on(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=tt(r),l=tt(1),d=tt(.5);a=a.mul(l.sub(u)).add(d.mul(u))}var f=(function(p,m){var g=X(p,"labels","sigmoidCrossEntropyWithLogits"),y=X(m,"logits","sigmoidCrossEntropyWithLogits");on(g.shape,y.shape,"Error in sigmoidCrossEntropyWithLogits: ");var b=y.relu(),S=y.mul(g),C=y.abs().neg().exp().log1p();return b.sub(S).add(C)})(a,i);return Ms(f,s,o)}}),mwe=te({softmaxCrossEntropy_:function(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=zr.SUM_BY_NONZERO_WEIGHTS);var a=X(t,"onehotLabels","softmaxCrossEntropy"),i=X(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=X(n,"weights","softmaxCrossEntropy")),on(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=tt(r),l=tt(1),d=tt(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(d))}var f=(function(p,m,g){if(g===void 0&&(g=-1),g===-1&&(g=m.rank-1),g!==m.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+m.rank+" and dim was "+g);return U0((function(y,b,S){var C=b.logSumExp([g],!0),E=b.toFloat().sub(C);return S([y,E]),{value:E.mul(y).neg().sum([g]),gradFunc:function(_,T){var D=T[0],k=T[1],I=yo(_.shape,[g]);return[_.reshape(I).mul(D.toFloat().sub(k.exp())),_.reshape(I).mul(k.exp().sub(D.toFloat()))]}}}))(p,m)})(a,i);return Ms(f,s,o)}}),vwe=Object.freeze({get Reduction(){return zr},absoluteDifference:uwe,computeWeightedLoss:Ms,cosineDistance:lwe,hingeLoss:cwe,huberLoss:dwe,logLoss:fwe,meanSquaredError:hwe,sigmoidCrossEntropy:pwe,softmaxCrossEntropy:mwe});function _M(t,e){return e===void 0&&(e=!1),oe.tidy((function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=Dj(n),a=t.clone(),i=Ml([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(f){var p,m=a,g=s,y=o;p=oe.tidy((function(){var b=a.slice([f,f],[n-f,1]),S=b.norm(),C=a.slice([f,f],[1,1]),E=Ml([[-1]]).where(C.greater(0),Ml([[1]])),_=C.sub(E.mul(S)),T=b.div(_);s=T.shape[0]===1?i.clone():i.concat(T.slice([1,0],[T.shape[0]-1,T.shape[1]]),0);var D=E.matMul(_).div(S).neg(),k=a.slice([f,0],[n-f,r]),I=D.mul(s),M=s.transpose();if(f===0)a=k.sub(I.matMul(M.matMul(k)));else{var O=k.sub(I.matMul(M.matMul(k)));a=a.slice([0,0],[f,r]).concat(O,0)}var F=I.transpose(),j=o.slice([0,f],[n,o.shape[1]-f]);if(f===0)o=j.sub(j.matMul(s).matMul(F));else{var G=j.sub(j.matMul(s).matMul(F));o=o.slice([0,0],[n,f]).concat(G,1)}return[s,a,o]})),s=p[0],a=p[1],o=p[2],vo([m,g,y])},d=0;d<u;++d)l(d);return!e&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]}))}var gwe=te({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=X(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,a=r.shape.slice(-2),i=a[0],s=a[1];if(!(e<=i))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=i),n<0&&(n=s);var u=hy(0,i,1,"int32").reshape([-1,1]),l=hy(0,s,1,"int32"),d=ja(u,l),f=G0(d.lessEqual(tt(+e,"int32")),d.greaterEqual(tt(-n,"int32"))),p=Wn([i,s],r.dtype);return Ou(L0(r.reshape([-1,i,s])).map((function(m){return Vl(f,m,p)}))).reshape(o)}}),ywe=te({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,K(t!=null&&t.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=t[0].shape[0],r=function(u){K(t[u].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"}))},o=1;o<t.length;++o)r(o)}else e=!0,t=WE(t,t.shape[0],0).map((function(u){return jL(u,[0])}));K(t.length<=t[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."}));var a=[],i=t,s=function(u){a.push(oe.tidy((function(){var l=i[u];if(u>0)for(var d=0;d<u;++d){var f=mu(a[d].mulStrict(l)).mul(a[d]);l=l.sub(f)}return l.div(Yj(l,"euclidean"))})))};for(o=0;o<t.length;++o)s(o);return e?Ou(a,0):a}}),bwe=te({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return _M(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce((function(i,s){return i*s})),r=L0(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],a=[];return r.forEach((function(i){var s=_M(i,e),u=s[0],l=s[1];o.push(u),a.push(l)})),[Ou(o,0).reshape(t.shape),Ou(a,0).reshape(t.shape)]}}),xwe=Object.freeze({bandPart:gwe,gramSchmidt:ywe,qr:bwe});function q0(t,e,n,r,o,a){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),a==null&&(a=0);var i=t.shape[0];return n=Math.min(n,i),K(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),K(t.rank===2,(function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"})),K(t.shape[1]===4,(function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]})),K(e.rank===1,(function(){return"scores must be a 1D tensor"})),K(e.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+e.shape[0]})),K(0<=a&&a<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}var wwe=te({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=X(t,"images","resizeBilinear");K(r.rank===3||r.rank===4,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),K(e.length===2,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."}));var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=oe.runKernelFunc((function(l,d){return d([o]),l.resizeBilinear(o,i,s,n)}),{x:o},(function(l,d){return{x:function(){return oe.runKernelFunc((function(f){return f.resizeBilinearBackprop(l,d[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Swe=te({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=X(t,"images","resizeNearestNeighbor");K(r.rank===3||r.rank===4,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),K(e.length===2,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."})),K(r.dtype==="float32"||r.dtype==="int32",(function(){return"`images` must have `int32` or `float32` as dtype"}));var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=oe.runKernelFunc((function(l,d){return d([o]),l.resizeNearestNeighbor(o,i,s,n)}),{batchImages:o},(function(l,d){return{batchImages:function(){return oe.runKernelFunc((function(f){return f.resizeNearestNeighborBackprop(l,d[0],n)}),{})}}}));return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Cwe=te({nonMaxSuppression_:function(t,e,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var a=X(t,"boxes","nonMaxSuppression"),i=X(e,"scores","nonMaxSuppression"),s=q0(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return oe.runKernelFunc((function(l){return l.nonMaxSuppression(a,i,n,r,o)}),{boxes:a,scores:i},null,"NonMaxSuppressionV3",u)}}),Ewe=function(t,e,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),Ye(this,void 0,void 0,(function(){var a,i,s,u,l,d,f;return Qe(this,(function(p){switch(p.label){case 0:return a=X(t,"boxes","nonMaxSuppressionAsync"),i=X(e,"scores","nonMaxSuppressionAsync"),s=q0(a,i,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([a.data(),i.data()])];case 1:return u=p.sent(),l=u[0],d=u[1],f=qE(l,d,n,r,o),a!==t&&a.dispose(),i!==e&&i.dispose(),[2,f]}}))}))},Rwe=te({nonMaxSuppressionWithScore_:function(t,e,n,r,o,a){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var i=X(t,"boxes","nonMaxSuppression"),s=X(e,"scores","nonMaxSuppression"),u=q0(i,s,n,r,o,a),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},d=oe.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},l);return{selectedIndices:d[0],selectedScores:d[1]}}}),_we=function(t,e,n,r,o,a){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),Ye(this,void 0,void 0,(function(){var i,s,u,l,d,f,p;return Qe(this,(function(m){switch(m.label){case 0:return i=X(t,"boxes","nonMaxSuppressionAsync"),s=X(e,"scores","nonMaxSuppressionAsync"),u=q0(i,s,n,r,o,a),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([i.data(),s.data()])];case 1:return l=m.sent(),d=l[0],f=l[1],p=XE(d,f,n,r,o,a),i!==t&&i.dispose(),s!==e&&s.dispose(),[2,p]}}))}))},Twe=te({cropAndResize_:function(t,e,n,r,o,a){var i=X(t,"image","cropAndResize"),s=X(e,"boxes","cropAndResize","float32"),u=X(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var l=s.shape[0];return K(i.rank===4,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."})),K(s.rank===2&&s.shape[1]===4,(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),K(u.rank===1&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),K(r.length===2,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),K(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),K(o==="bilinear"||o==="nearest",(function(){return"method must be bilinear or nearest, but was "+o})),oe.runKernelFunc((function(d,f){return d.cropAndResize(i,s,u,r,o,a)}),{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:a,cropSize:r})}}),tz=Object.freeze({resizeBilinear:wwe,resizeNearestNeighbor:Swe,nonMaxSuppression:Cwe,nonMaxSuppressionAsync:Ewe,nonMaxSuppressionWithScore:Rwe,nonMaxSuppressionWithScoreAsync:_we,cropAndResize:Twe}),sR=function(t,e){return!(t>0)||e==="linear"},uR=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},lR=function(t,e){var n=e,r=ir(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},cR=function(t,e,n){if(e==="linear")return t;if(e==="relu")return $0(t);if(e==="elu")return qj(t);if(e==="relu6")return Kj(t);if(e==="prelu")return Xj(t,n);throw new Error("Unknown fused activation "+e+".")},Awe=te({fusedMatMul_:function(t){var e,n=t.a,r=t.b,o=t.transposeA,a=o!==void 0&&o,i=t.transposeB,s=i!==void 0&&i,u=t.bias,l=t.activation,d=l===void 0?"linear":l,f=t.preluActivationWeights;if(sR(oe.state.gradientDepth,d)===!1){var p=Vj(n,r,a,s);return u!=null&&(p=wa(p,u)),cR(p,d,f)}var m=X(n,"a","fused matMul"),g=X(r,"b","fused matMul");e=Mn(m,g),m=e[0],g=e[1];var y=a?m.shape[m.rank-2]:m.shape[m.rank-1],b=s?g.shape[g.rank-1]:g.shape[g.rank-2],S=a?m.shape[m.rank-1]:m.shape[m.rank-2],C=s?g.shape[g.rank-2]:g.shape[g.rank-1],E=m.shape.slice(0,-2),_=g.shape.slice(0,-2),T=Ke(E),D=Ke(_);K(m.rank>=2&&g.rank>=2&&m.rank===g.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+m.rank+" and "+g.rank+"."})),K(mr(E,_),(function(){return"Error in fused matMul: outer dimensions ("+E+") and ("+_+") of Tensors with shapes "+m.shape+" and "+g.shape+" must match."})),K(y===b,(function(){return"Error in fused matMul: inner shapes ("+y+") and ("+b+") of Tensors with shapes "+m.shape+" and "+g.shape+" and transposeA="+a+" and transposeB="+s+" must match."}));var k,I,M=m.shape.slice(0,-2).concat([S,C]),O=a?m.as3D(T,y,S):m.as3D(T,S,y),F=s?g.as3D(D,C,b):g.as3D(D,b,C);u!=null&&Mt(M,(k=Mn(k=X(u,"bias","fused matMul"),m)[0]).shape),f!=null&&(I=X(f,"prelu weights","fused matMul"));var j={a:O,b:F};u!=null&&(j.bias=k),f!=null&&(j.preluActivationWeights=I);var G=[O,F];return oe.runKernelFunc((function(W,q){var P=W.fusedBatchMatMul({a:O,b:F,transposeA:a,transposeB:s,bias:k,activation:d,preluActivationWeights:I});return q([O,F,P]),P}),j,(function(W,q){var P=q[0],z=q[1],U=q[2],H=uR(W,U,d),L={};return u!=null&&(L={bias:function(){return lR(k,H)}}),Object.assign(a||s?!a&&s?{a:function(){return H.matMul(z,!1,!1)},b:function(){return H.matMul(P,!0,!1)}}:a&&!s?{a:function(){return z.matMul(H,!1,!0)},b:function(){return P.matMul(H,!1,!1)}}:{a:function(){return z.matMul(H,!0,!0)},b:function(){return H.matMul(P,!0,!0)}}:{a:function(){return H.matMul(z,!1,!0)},b:function(){return P.matMul(H,!0,!1)}},L)}),"_FusedMatMul",{transposeA:a,transposeB:s,activation:d},G,[!0]).reshape(M)}}),Nwe=te({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,a=t.dataFormat,i=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,d=t.bias,f=t.activation,p=f===void 0?"linear":f,m=t.preluActivationWeights;if(p=p||"linear",sR(oe.state.gradientDepth,p)===!1){var g=oc(e,n,r,o,i,u,l);return d!=null&&(g=wa(g,d)),cR(g,p,m)}var y=X(e,"x","conv2d"),b=X(n,"filter","conv2d"),S=y,C=!1;y.rank===3&&(C=!0,S=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),K(S.rank===4,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+S.rank+"."})),K(b.rank===4,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."})),l!=null&&K(qn(o),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."})),K(S.shape[3]===b.shape[2],(function(){return"Error in conv2d: depth of input ("+S.shape[3]+") must match input depth for filter "+b.shape[2]+"."})),K(to(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),K(i==="NHWC",(function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."}));var E,_,T=nc(S.shape,b.shape,r,u,o,l);d!=null&&(E=Mn(E=X(d,"bias","fused conv2d"),y)[0],Mt(T.outShape,E.shape)),m!=null&&(_=X(m,"prelu weights","fused conv2d"));var D={x:S,filter:b};d!=null&&(D.bias=E),m!=null&&(D.preluActivationWeights=_);var k=[b,S],I=oe.runKernelFunc((function(M,O){var F=M.fusedConv2d({input:S,filter:b,convInfo:T,bias:E,activation:p,preluActivationWeights:_});return O([b,S,F]),F}),D,(function(M,O){var F=O,j=F[0],G=F[1],W=F[2],q=uR(M,W,p);K(Kd(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var P={};return d!=null&&(P={bias:function(){return lR(E,q)}}),Object.assign({x:function(){return jj(G.shape,q,j,r,o)},filter:function(){return tR(G,q,j.shape,r,o)}},P)}),"FusedConv2D",{convInfo:T,activation:p},k,[!0]);return C?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}}),Dwe=te({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,a=t.dataFormat,i=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,d=t.bias,f=t.activation,p=f===void 0?"linear":f,m=t.preluActivationWeights;if(sR(oe.state.gradientDepth,p)===!1){var g=nR(e,n,r,o,i,u,l);return d!=null&&(g=wa(g,d)),cR(g,p,m)}var y=X(e,"x","depthwiseConv2d"),b=X(n,"filter","depthwiseConv2d"),S=y,C=!1;y.rank===3&&(C=!0,S=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),K(S.rank===4,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+S.rank+"."})),K(b.rank===4,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+b.rank+"."})),K(S.shape[3]===b.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+S.shape[3]+") must match the inChannels dimension in filter "+b.shape[2]+"."})),u==null&&(u=[1,1]),K(to(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),l!=null&&K(qn(o),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."}));var E,_,T=nc(S.shape,b.shape,r,u,o,l,!0);d!=null&&(E=Mn(E=X(d,"bias","fused conv2d"),y)[0],Mt(T.outShape,E.shape)),m!=null&&(_=X(m,"prelu weights","fused depthwiseConv2d"));var D={x:S,filter:b};d!=null&&(D.bias=E),m!=null&&(D.preluActivationWeights=_);var k=[b,S],I=oe.runKernelFunc((function(M,O){var F=M.fusedDepthwiseConv2D({input:S,filter:b,convInfo:T,bias:E,activation:p,preluActivationWeights:_});return O([b,S,F]),F}),D,(function(M,O){K(Kd(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var F=O[0],j=O[1],G=O[2],W=uR(M,G,p),q={};return d!=null&&(q={bias:function(){return lR(E,W)}}),Object.assign({x:function(){return zj(j.shape,W,F,T)},filter:function(){return Uj(j,W,F.shape,T)}},q)}),"FusedDepthwiseConv2D",{convInfo:T,activation:p},k,[!0]);return C?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}}),kwe=Object.freeze({matMul:Awe,conv2d:Nwe,depthwiseConv2d:Dwe}),Iwe=Object.freeze({image:tz,linalg:xwe,losses:vwe,spectral:twe,fused:kwe,signal:iwe,add:wa,addN:Lxe,batchNorm:sm,batchNormalization:jxe,batchNorm2d:Uxe,batchNormalization2d:zxe,batchNorm3d:Vxe,batchNormalization3d:Wxe,batchNorm4d:Gxe,batchNormalization4d:Hxe,broadcastTo:_j,clone:$xe,div:Pu,divNoNan:Nj,eye:Dj,multinomial:Kxe,oneHot:Sy,pad:Is,pad1d:Yxe,pad2d:Qxe,pad3d:Jxe,pad4d:Zxe,rand:e1e,randomGamma:r1e,randomNormal:o1e,randomUniform:kj,square:Ij,squaredDifference:Mj,tile:Rd,truncatedNormal:a1e,conv1d:g1e,conv2d:oc,conv3d:y1e,depthwiseConv2d:nR,separableConv2d:Wj,conv2dTranspose:b1e,conv3dTranspose:x1e,op:te,booleanMaskAsync:v1e,complex:Cr,real:da,imag:pi,concat:xa,concat1d:Tye,concat2d:Aye,concat3d:Nye,concat4d:Dye,split:WE,matMul:Vj,dot:w1e,outerProduct:S1e,reverse:um,reverse1d:C1e,reverse2d:E1e,reverse3d:R1e,reverse4d:_1e,maxPool:To,avgPool:T1e,pool:A1e,maxPool3d:N1e,avgPool3d:D1e,maxPoolWithArgmax:k1e,slice:Fu,slice1d:I1e,slice2d:M1e,slice3d:O1e,slice4d:P1e,abs:Fye,acos:Bye,acosh:Lye,asin:jye,asinh:zye,atan:Uye,atanh:Wye,ceil:Vye,clipByValue:Hye,cos:Gye,cosh:$ye,erf:qye,exp:Xye,expm1:Kye,floor:Yye,log:Qye,log1p:Jye,logSigmoid:Zye,neg:VE,reciprocal:e0e,round:t0e,rsqrt:XL,sigmoid:n0e,sign:r0e,isNaN:o0e,isInf:a0e,isFinite:i0e,sin:s0e,sinh:u0e,softplus:l0e,sqrt:c0e,step:d0e,tan:f0e,tanh:h0e,all:F1e,any:B1e,argMax:L1e,argMin:j1e,logSumExp:z1e,max:U1e,mean:W1e,min:V1e,moments:H1e,sum:mu,prod:G1e,equal:Oj,equalStrict:i1e,greater:s1e,greaterEqual:Pj,greaterEqualStrict:u1e,greaterStrict:l1e,less:c1e,lessEqual:d1e,lessEqualStrict:f1e,lessStrict:h1e,notEqual:p1e,notEqualStrict:m1e,addStrict:p0e,atan2:m0e,divStrict:v0e,floorDiv:KL,maximum:HE,maximumStrict:g0e,minimum:YL,minimumStrict:y0e,mod:b0e,modStrict:x0e,mul:Un,mulStrict:w0e,pow:gy,powStrict:S0e,squaredDifferenceStrict:C0e,sub:ja,subStrict:E0e,elu:qj,leakyRelu:$1e,prelu:Xj,relu:$0,relu6:Kj,selu:q1e,logicalAnd:G0,logicalNot:qxe,logicalOr:Tj,logicalXor:Xxe,where:Vl,whereAsync:Aj,buffer:St,print:kye,batchToSpaceND:BL,cast:Iye,cumsum:Mye,depthToSpace:Oye,expandDims:pu,reshape:as,spaceToBatchND:LL,squeeze:jL,stack:Ou,unstack:L0,setdiff1dAsync:Pye,fill:Ol,linspace:_ye,ones:Ef,range:hy,scalar:tt,tensor:Rr,tensor1d:Ha,tensor2d:Ml,tensor3d:PL,tensor4d:di,tensor5d:Cye,tensor6d:Eye,variable:Rye,zeros:Wn,onesLike:FL,zerosLike:$t,transpose:Ma,softmax:W0,logSoftmax:k0e,localResponseNormalization:X1e,norm:Yj,gather:eR,unsortedSegmentSum:Fj,basicLSTMCell:K1e,multiRNNCell:Y1e,movingAverage:Q1e,stridedSlice:J1e,topk:Z1e,scatterND:ewe,fft:rR,ifft:Cy,rfft:oR,irfft:Qj,sparseToDense:nwe,gatherND:rwe,diag:owe,dropout:awe,hannWindow:aR,hammingWindow:Zj,frame:iR,stft:ez,inTopKAsync:swe});function Ne(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(n){n!=null&&K(n.dtype!=="complex64",(function(){return e+" does not support complex64 tensors."}))}))}function dS(t,e,n,r,o,a){for(var i=o.strideHeight,s=o.strideWidth,u=o.dilationHeight,l=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,p=o.padInfo.top,m=o.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=St(o.outShape,n),b=y.values,S=o.outShape[1]*o.outShape[2]*o.outShape[3],C=o.outShape[2]*o.outShape[3],E=o.outShape[3],_=0;_<o.batchSize;++_)for(var T=_*S,D=_*r[0],k=0;k<o.inChannels;++k)for(var I=0;I<o.outHeight;++I)for(var M=I*i-p,O=Math.max(0,M),F=Math.min(o.inHeight,d+M),j=T+I*C,G=0;G<o.outWidth;++G){for(var W=G*s-m,q=Math.max(0,W),P=Math.min(o.inWidth,f+W),z=g,U=0,H=0,L=O;L<F;L+=u){for(var $=D+L*r[1],J=q;J<P;J+=l){var ne=t[$+J*r[2]+k];a==="max"&&ne>z?z=ne:a==="avg"&&(U+=ne,H++)}if(isNaN(z))break}b[j+G*E+k]=a==="avg"?U/H:z}return y}function nz(t,e,n,r,o,a){o===void 0&&(o=!1),a===void 0&&(a=!1);for(var i=St(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterHeight,p=r.effectiveFilterWidth,m=r.padInfo.top,g=r.padInfo.left,y=St(e,n,t),b=0;b<r.batchSize;++b)for(var S=0;S<r.inChannels;++S)for(var C=0;C<r.outHeight;++C){for(var E=C*s-m,_=E;_<0;)_+=l;for(var T=Math.min(r.inHeight,f+E),D=0;D<r.outWidth;++D){for(var k=D*u-g,I=k;I<0;)I+=d;for(var M=Math.min(r.inWidth,p+k),O=Number.NEGATIVE_INFINITY,F=-1,j=_;j<T;j+=l)for(var G=j-E,W=I;W<M;W+=d){var q=W-k,P=y.get(b,j,W,S);P>O&&(O=P,F=o?a?((b*r.inHeight+j)*r.inWidth+W)*r.inChannels+S:(j*r.inWidth+W)*r.inChannels+S:G*p+q)}i.set(F,b,C,D,S)}}return i}function Iw(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Mwe=(function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new tj(n,oe),n}return Ka(e,t),e.prototype.write=function(n,r,o){this.firstUse&&(this.firstUse=!1,Ce().get("IS_NODE")&&dy(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:n,dtype:o}),a},e.prototype.move=function(n,r,o,a){this.data.set(n,{values:r,dtype:a})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(r){return[2,this.readSync(n)]}))}))},e.prototype.readSync=function(n){var r=this.data.get(n),o=r.dtype,a=r.complexTensors;return o==="complex64"?cS(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),o=r;if(n.dtype==="string")try{o=r.map((function(a){return uy(a)}))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return St(n.shape,n.dtype,o)},e.prototype.makeOutput=function(n,r,o){var a=this.write(n,r,o);return oe.makeTensorFromDataId(a,r,o,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return Ye(this,void 0,void 0,(function(){var r;return Qe(this,(function(o){return r=ci(),n(),[2,{kernelMs:ci()-r}]}))}))},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:oe.keep(n.clone()),imag:oe.keep(r.clone())},o},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,o){if(Ne(n,"slice"),ZL(n.shape,r,o)){var a=ej(r,n.strides),i=Ke(o);return Rr(this.readSync(n.dataId).subarray(a,a+i),o,n.dtype)}for(var s=St(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var d=s.indexToLoc(l).map((function(f,p){return f+r[p]}));s.values[l]=u.get.apply(u,d)}return s.toTensor()},e.prototype.stridedSlice=function(n,r,o,a){Ne(n,"stridedSlice");var i=GE(r,o,a);if(i.some((function(m){return m===0})))return Rr([],i);for(var s=St(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var d=s.indexToLoc(l),f=new Array(d.length),p=0;p<f.length;p++)f[p]=d[p]*a[p]+r[p];s.set.apply(s,[u.get.apply(u,f)].concat(d))}return s.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),o=St([n.size,n.size],n.dtype),a=o.values,i=0;i<r.length;i++)a[i*n.size+i]=r[i];return o.toTensor()},e.prototype.unstack=function(n,r){for(var o=n.shape[r],a=new Array(n.rank-1),i=0,s=0;s<n.rank;s++)s!==r&&(a[i++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var d=new Array(o);for(s=0;s<d.length;s++)u[r]=s,d[s]=this.slice(n,u,l).reshape(a);return d},e.prototype.reverse=function(n,r){Ne(n,"reverse");for(var o=St(n.shape,n.dtype),a=this.bufferSync(n),i=function(u){var l=o.indexToLoc(u),d=l.slice();r.forEach((function(f){return d[f]=n.shape[f]-1-d[f]})),o.set.apply(o,[a.get.apply(a,d)].concat(l))},s=0;s<o.size;s++)i(s);return o.toTensor()},e.prototype.concat=function(n,r){var o=this;if(n[0].dtype==="complex64"){var a=n.map((function(m){return da(m)})),i=n.map((function(m){return pi(m)}));return Cr(this.concat(a,r),this.concat(i,r))}var s=n.map((function(m){var g=Ke(m.shape.slice(r));return m.as2D(-1,g)})),u=Xd(s.map((function(m){return m.shape})),1),l=St(u,n[0].dtype).values;if(s[0].shape[0]===1){var d=0;s.forEach((function(m){l.set(o.readSync(m.dataId),d),d+=m.size}))}else{var f=0;s.forEach((function(m){for(var g=o.readSync(m.dataId),y=0,b=0;b<m.shape[0];++b)for(var S=b*u[1]+f,C=0;C<m.shape[1];++C)l[S+C]=g[y++];f+=m.shape[1]}))}var p=Xd(n.map((function(m){return m.shape})),r);return Rr(l,p,n[0].dtype)},e.prototype.neg=function(n){return Ne(n,"neg"),this.multiply(tt(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(o,a,i,s){return{real:o+i,imag:a+s}})):this.broadcastedBinaryOp(n,r,Er(n.dtype,r.dtype),(function(o,a){return o+a}))},e.prototype.addN=function(n){var r=this;Ne(n,"addN");for(var o=n.map((function(d){return r.readSync(d.dataId)})),a=St(n[0].shape,n[0].dtype),i=a.values,s=0;s<n.length;s++)for(var u=o[s],l=0;l<i.length;l++)i[l]+=u[l];return a.toTensor()},e.prototype.softmax=function(n,r){var o=lr([r],n.shape),a=this.max(n,o),i=yo(a.shape,o),s=this.subtract(n,a.reshape(i)),u=this.exp(s),l=this.sum(u,o).reshape(i);return Pu(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(o,a,i,s){return{real:o-i,imag:a-s}})):this.broadcastedBinaryOp(n,r,Er(n.dtype,r.dtype),(function(o,a){return o-a}))},e.prototype.pow=function(n,r){return Ne([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return Math.pow(o,a)}))},e.prototype.batchMatMul=function(n,r,o,a){Ne([n,r],"matMul");for(var i=o?n.shape[1]:n.shape[2],s=o?n.shape[2]:n.shape[1],u=a?r.shape[1]:r.shape[2],l=n.shape[0],d=this.readSync(n.dataId),f=this.readSync(r.dataId),p=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],m=p[0],g=p[1],y=p[2],b=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],S=b[0],C=b[1],E=b[2],_=s*u,T=St([l,s,u],n.dtype),D=T.values,k=this.blockSize,I=0;I<l;I++)for(var M=0;M<s;M+=k)for(var O=0;O<u;O+=k)for(var F=0;F<i;F+=k)for(var j=Math.min(M+k,s),G=Math.min(O+k,u),W=Math.min(F+k,i),q=M;q<j;q++)for(var P=O;P<G;P++){for(var z=0,U=F;U<W;U++)z+=d[I*m+q*g+U*y]*f[U*S+P*C+I*E];D[I*_+(q*u+P)]+=z}return T.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,a=n.transposeA,i=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,d=this.batchMatMul(r,o,a,i);return s&&(d=this.add(d,s)),u&&(d=Iw(this,d,u,l)),d},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(o,a,i,s){return{real:o*i-a*s,imag:o*s+a*i}})):this.broadcastedBinaryOp(n,r,Er(n.dtype,r.dtype),(function(o,a){return o*a}))},e.prototype.floorDiv=function(n,r){return Ne([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",(function(o,a){return Math.floor(o/a)}))},e.prototype.sum=function(n,r){Ne(n,"sum"),ko("sum",r,n.rank);for(var o=Pr(n.shape,r),a=o[0],i=o[1],s=Wn(a,Er(n.dtype,"int32")),u=Ke(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=0,g=0;g<u;++g)m+=d[p+g];l[f]=m}return s},e.prototype.prod=function(n,r){Ne(n,"sum");for(var o=Pr(n.shape,r),a=o[0],i=o[1],s=Wn(a,Er(n.dtype,"int32")),u=Ke(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=1,g=0;g<u;++g)m*=d[p+g];l[f]=m}return s},e.prototype.unsortedSegmentSum=function(n,r,o){Ne(n,"unsortedSegmentSum");for(var a=[],i=n.rank-r.rank,s=0;s<i;++s)r=r.expandDims(s+1);for(s=0;s<o;++s){var u=tt(s,"int32"),l=Oj(u,r).asType("float32").mul(n).sum(0);a.push(l)}return Ou(a)},e.prototype.argMin=function(n,r){Ne(n,"argMin");var o=[r];ko("argMin",o,n.rank);for(var a=Pr(n.shape,o),i=a[0],s=a[1],u=Wn(i,"int32"),l=Ke(s),d=this.readSync(u.dataId),f=this.readSync(n.dataId),p=0;p<d.length;++p){for(var m=p*l,g=f[m],y=0,b=0;b<l;++b){var S=f[m+b];S<g&&(g=S,y=b)}d[p]=y}return u},e.prototype.argMax=function(n,r){Ne(n,"argMax");var o=[r];ko("argMax",o,n.rank);for(var a=Pr(n.shape,o),i=a[0],s=a[1],u=Wn(i,"int32"),l=Ke(s),d=this.readSync(u.dataId),f=this.readSync(n.dataId),p=0;p<d.length;++p){for(var m=p*l,g=f[m],y=0,b=0;b<l;++b){var S=f[m+b];S>g&&(g=S,y=b)}d[p]=y}return u},e.prototype.cumsum=function(n,r,o,a){if(Ne(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var i=Er(n.dtype,"int32"),s=Wn(n.shape,i),u=this.readSync(s.dataId),l=this.readSync(n.dataId),d=n.shape[n.rank-1],f=a?function(b,S){return b+d-S-1}:function(b,S){return b+S},p=0;p<l.length;p+=d)for(var m=0;m<d;m++){var g=f(p,m);if(m===0)u[g]=o?0:l[g];else{var y=f(p,m-1);u[g]=o?l[y]+u[y]:l[g]+u[y]}}return s},e.prototype.equal=function(n,r){return Ne([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o===a?1:0}))},e.prototype.notEqual=function(n,r){return Ne([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o!==a?1:0}))},e.prototype.less=function(n,r){return Ne([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o<a?1:0}))},e.prototype.lessEqual=function(n,r){return Ne([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o<=a?1:0}))},e.prototype.greater=function(n,r){return Ne([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o>a?1:0}))},e.prototype.greaterEqual=function(n,r){return Ne([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o>=a?1:0}))},e.prototype.logicalNot=function(n){Ne(n,"logicalNot");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)o[a]=r[a]?0:1;return this.makeOutput(o,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return Ne([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o&&a}))},e.prototype.logicalOr=function(n,r){return Ne([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",(function(o,a){return o||a}))},e.prototype.select=function(n,r,o){Ne([n,r,o],"select");for(var a=this.readSync(n.dataId),i=this.readSync(r.dataId),s=this.readSync(o.dataId),u=Wn(r.shape,Er(r.dtype,o.dtype)),l=this.readSync(u.dataId),d=0,f=n.rank===0||n.rank>1||r.rank===1?1:Ke(r.shape.slice(1)),p=0;p<a.length;p++)for(var m=0;m<f;m++)a[p]===1?l[d++]=i[p]:l[d++]=s[p];return u},e.prototype.where=function(n){Ne([n],"where");var r=this.readSync(n.dataId);return KE(n.shape,r)},e.prototype.topk=function(n,r,o){return Ne(n,"topk"),lj(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){Ne(n,"min"),ko("min",r,n.rank);for(var o=Pr(n.shape,r),a=o[0],i=o[1],s=Wn(a,n.dtype),u=Ke(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0;g<u;++g){var y=d[p+g];y<m&&(m=y)}l[f]=m}return s},e.prototype.minimum=function(n,r){return Ne([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return Math.min(o,a)}))},e.prototype.mod=function(n,r){return Ne([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){var i=o%a;return o<0&&a<0||o>=0&&a>=0?i:(i+a)%a}))},e.prototype.max=function(n,r){Ne(n,"max"),ko("max",r,n.rank);for(var o=Pr(n.shape,r),a=o[0],i=o[1],s=Wn(a,n.dtype),u=Ke(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0;g<u;++g){var y=d[p+g];y>m&&(m=y)}l[f]=m}return s},e.prototype.maximum=function(n,r){return Ne([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return Math.max(o,a)}))},e.prototype.all=function(n,r){Ne(n,"all"),ko("all",r,n.rank);for(var o=Pr(n.shape,r),a=o[0],i=o[1],s=Wn(a,n.dtype),u=Ke(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0;g<u;++g){var y=d[p+g];m=m&&y}l[f]=m}return s},e.prototype.any=function(n,r){Ne(n,"any"),ko("any",r,n.rank);for(var o=Pr(n.shape,r),a=o[0],i=o[1],s=Wn(a,n.dtype),u=Ke(i),l=this.readSync(s.dataId),d=this.readSync(n.dataId),f=0;f<l.length;++f){for(var p=f*u,m=d[p],g=0;g<u;++g){var y=d[p+g];m=m||y}l[f]=m}return s},e.prototype.squaredDifference=function(n,r){return Ne([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){var i=o-a;return i*i}))},e.prototype.ceil=function(n){Ne(n,"ceil");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.ceil(r[a]);return this.makeOutput(o,n.shape,"float32")},e.prototype.floor=function(n){Ne(n,"floor");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.floor(r[a]);return this.makeOutput(o,n.shape,"float32")},e.prototype.sign=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?o[a]=-1:r[a]>0?o[a]=1:o[a]=0;return this.makeOutput(o,n.shape,"float32")},e.prototype.isNaN=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.isInf=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.isFinite=function(n){Ne(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.round=function(n){Ne(n,"round");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=Math.floor(r[a]);r[a]-i<.5?o[a]=Math.floor(r[a]):r[a]-i>.5?o[a]=Math.ceil(r[a]):o[a]=i%2==0?i:i+1}return this.makeOutput(o,n.shape,"float32")},e.prototype.exp=function(n){Ne(n,"exp");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.exp(r[a]);return this.makeOutput(o,n.shape,"float32")},e.prototype.expm1=function(n){Ne(n,"expm1");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.expm1(r[a]);return this.makeOutput(o,n.shape,"float32")},e.prototype.log=function(n){Ne(n,"log");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.log(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.log1p=function(n){Ne(n,"log1p");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.log1p(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.sqrt=function(n){Ne(n,"sqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.sqrt(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.rsqrt=function(n){Ne(n,"rsqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=1/Math.sqrt(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.reciprocal=function(n){Ne(n,"reciprocal");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=1/r[a];return this.makeOutput(o,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){Ne(n,"relu");for(var r=Wn(n.shape,n.dtype),o=this.readSync(r.dataId),a=this.readSync(n.dataId),i=0;i<a.length;++i)o[i]=Math.max(0,a[i]);return r},e.prototype.relu6=function(n){Ne(n,"relu");for(var r=Wn(n.shape,n.dtype),o=this.readSync(r.dataId),a=this.readSync(n.dataId),i=0;i<a.length;++i)o[i]=Math.min(Math.max(0,a[i]),6);return r},e.prototype.prelu=function(n,r){return Ne([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return o<0?a*o:o}))},e.prototype.elu=function(n){Ne(n,"elu");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?i:Math.exp(i)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){Ne([n,r],"eluDer");for(var o=new Float32Array(r.size),a=this.readSync(r.dataId),i=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>=1?i[s]:i[s]*(u+1)}return this.makeOutput(o,r.shape,"float32")},e.prototype.selu=function(n){Ne(n,"selu");for(var r=QE,o=JE,a=new Float32Array(n.size),i=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];a[s]=u>=0?o*u:r*(Math.exp(u)-1)}return this.makeOutput(a,n.shape,"float32")},e.prototype.clip=function(n,r,o){Ne(n,"clip");for(var a=new Float32Array(n.size),i=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];a[s]=u>o?o:u<r?r:u}return this.makeOutput(a,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.abs(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<n.size;++a){var i=o[2*a],s=o[2*a+1];r[a]=Math.hypot(i,s)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){Ne(n,"int");for(var r=new Int32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=o[a];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){Ne(n,"sigmoid");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=1/(1+Math.exp(-o[a]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){Ne(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var s=a[i]>-r,u=a[i]<r,l=Math.exp(a[i]),d=void 0;d=u?l:s?a[i]:Math.log(1+l),o[i]=d}return this.makeOutput(o,n.shape,"float32")},e.prototype.sin=function(n){Ne(n,"sin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.sin(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){Ne(n,"cos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.cos(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){Ne(n,"tan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.tan(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){Ne(n,"asin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.asin(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){Ne(n,"acos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.acos(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){Ne(n,"atan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.atan(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return Ne([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,(function(o,a){return Math.atan2(o,a)}))},e.prototype.sinh=function(n){Ne(n,"sinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.sinh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){Ne(n,"cosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.cosh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){Ne(n,"tanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=kge(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){Ne(n,"asinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.asinh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){Ne(n,"acosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.acosh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){Ne(n,"atanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.atanh(o[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){Ne(n,"erf");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var i=Math.sign(o[a]),s=Math.abs(o[a]),u=1/(1+.3275911*s);r[a]=i*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),Ne(n,"step");for(var o=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var s=a[i];isNaN(s)?o[i]=NaN:o[i]=s>0?1:r}return this.makeOutput(o,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,o,a);return i&&(l=this.add(l,i)),s&&(l=Iw(this,l,s,u)),l},e.prototype.conv2d=function(n,r,o){Ne([n,r],"conv2d");for(var a=o.filterHeight,i=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,d=o.padInfo.top,f=o.dataFormat==="channelsLast",p=St(o.outShape,n.dtype),m=n.strides[0],g=f?n.strides[1]:n.strides[2],y=f?n.strides[2]:1,b=f?1:n.strides[1],S=p.strides[0],C=f?p.strides[1]:p.strides[2],E=f?p.strides[2]:1,_=f?1:p.strides[1],T=this.readSync(n.dataId),D=this.readSync(r.dataId),k=p.values,I=0;I<o.batchSize;++I)for(var M=I*m,O=I*S,F=0;F<o.outHeight;++F)for(var j=O+F*C,G=F*o.strideHeight-d,W=0;W<a;W++){var q=G+W*s;if(!(q<0||q>=o.inHeight))for(var P=W*r.strides[0],z=M+q*g,U=0;U<o.outWidth;++U)for(var H=j+U*E,L=U*o.strideWidth-l,$=0;$<i;$++){var J=L+$*u;if(!(J<0||J>=o.inWidth))for(var ne=z+J*y,ce=P+$*r.strides[1],be=0;be<o.inChannels;++be){for(var se=T[ne+be*b],ie=0;ie<o.outChannels;++ie)k[H+ie*_]+=se*D[ce+ie];ce+=o.outChannels}}}return p.toTensor()},e.prototype.conv3d=function(n,r,o){for(var a=o.filterDepth,i=o.filterHeight,s=o.filterWidth,u=o.dilationDepth,l=o.dilationHeight,d=o.dilationWidth,f=o.padInfo.front,p=o.padInfo.left,m=o.padInfo.top,g=St(o.outShape,n.dtype),y=this.readSync(n.dataId),b=this.readSync(r.dataId),S=g.values,C=0;C<o.batchSize;++C)for(var E=C*n.strides[0],_=C*g.strides[0],T=0;T<o.outDepth;++T)for(var D=_+T*g.strides[1],k=T*o.strideDepth-f,I=0;I<a;I++){var M=k+I*u;if(!(M<0||M>=o.inDepth))for(var O=I*r.strides[0],F=E+M*n.strides[1],j=0;j<o.outHeight;++j)for(var G=D+j*g.strides[2],W=j*o.strideHeight-m,q=0;q<i;q++){var P=W+q*l;if(!(P<0||P>=o.inHeight))for(var z=O+q*r.strides[1],U=F+P*n.strides[2],H=0;H<o.outWidth;++H)for(var L=G+H*o.outChannels,$=H*o.strideWidth-p,J=0;J<s;J++){var ne=$+J*d;if(!(ne<0||ne>=o.inWidth))for(var ce=z+J*r.strides[2],be=U+ne*o.inChannels,se=ce,ie=0;ie<o.inChannels;++ie){for(var fe=y[be+ie],ge=0;ge<o.outChannels;++ge)S[L+ge]+=fe*b[se+ge];se+=o.outChannels}}}}return g.toTensor()},e.prototype.conv2dDerInput=function(n,r,o){Ne([n,r],"conv2dDerInput");for(var a=St(o.inShape,"float32"),i=a.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,d=l[0],f=l[1],p=l[2],m=o.batchSize,g=o.filterHeight,y=o.filterWidth,b=o.inChannels,S=o.inHeight,C=o.inWidth,E=o.outChannels,_=o.outHeight,T=o.outWidth,D=o.strideHeight,k=o.strideWidth,I=o.dataFormat,M=g-1-o.padInfo.top,O=y-1-o.padInfo.left,F=I==="channelsLast",j=a.strides[0],G=F?a.strides[1]:a.strides[2],W=F?a.strides[2]:1,q=F?1:a.strides[1],P=n.strides[0],z=F?n.strides[1]:n.strides[2],U=F?n.strides[2]:1,H=F?1:n.strides[1],L=0;L<m;++L)for(var $=0;$<b;++$)for(var J=0;J<S;++J)for(var ne=J-M,ce=Math.max(0,Math.ceil(ne/D)),be=Math.min(_,(g+ne)/D),se=0;se<C;++se){for(var ie=se-O,fe=Math.max(0,Math.ceil(ie/k)),ge=Math.min(T,(y+ie)/k),Oe=0,je=ce;je<be;++je)for(var Le=je*D-ne,ke=fe;ke<ge;++ke)for(var qe=P*L+z*je+U*ke,nt=d*(g-1-Le)+f*(y-1-(ke*k-ie))+p*$,it=0;it<E;++it)Oe+=s[qe+H*it]*u[nt+it];i[j*L+G*J+W*se+q*$]=Oe}return a.toTensor()},e.prototype.conv3dDerInput=function(n,r,o){for(var a=St(o.inShape,"float32"),i=a.values,s=a.strides,u=s[0],l=s[1],d=s[2],f=s[3],p=this.readSync(n.dataId),m=n.strides,g=m[0],y=m[1],b=m[2],S=m[3],C=this.readSync(r.dataId),E=r.strides,_=E[0],T=E[1],D=E[2],k=E[3],I=o.batchSize,M=o.filterDepth,O=o.filterHeight,F=o.filterWidth,j=o.inChannels,G=o.inDepth,W=o.inHeight,q=o.inWidth,P=o.outChannels,z=o.outDepth,U=o.outHeight,H=o.outWidth,L=o.strideDepth,$=o.strideHeight,J=o.strideWidth,ne=M-1-o.padInfo.front,ce=O-1-o.padInfo.top,be=F-1-o.padInfo.left,se=0;se<I;++se)for(var ie=0;ie<j;++ie)for(var fe=0;fe<G;++fe)for(var ge=fe-ne,Oe=Math.max(0,Math.ceil(ge/L)),je=Math.min(z,(M+ge)/L),Le=0;Le<W;++Le)for(var ke=Le-ce,qe=Math.max(0,Math.ceil(ke/$)),nt=Math.min(U,(O+ke)/$),it=0;it<q;++it){for(var Ie=it-be,Me=Math.max(0,Math.ceil(Ie/J)),Be=Math.min(H,(F+Ie)/J),Je=0,ct=Oe;ct<je;++ct)for(var st=ct*L-ge,$e=qe;$e<nt;++$e)for(var Wt=$e*$-ke,Fe=Me;Fe<Be;++Fe)for(var Ve=g*se+y*ct+b*$e+S*Fe,rt=_*(M-1-st)+T*(O-1-Wt)+D*(F-1-(Fe*J-Ie))+k*ie,Lt=0;Lt<P;++Lt)Je+=p[Ve+Lt]*C[rt+Lt];i[u*se+l*fe+d*Le+f*it+ie]=Je}return a.toTensor()},e.prototype.conv2dDerFilter=function(n,r,o){Ne([n,r],"conv2dDerFilter");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dataFormat==="channelsLast",d=St(o.filterShape,"float32"),f=o.padInfo.left,p=o.padInfo.top,m=this.bufferSync(n),g=this.bufferSync(r),y=0;y<s;++y)for(var b=Math.max(0,Math.ceil((p-y)/a)),S=Math.min(o.outHeight,(o.inHeight+p-y)/a),C=0;C<u;++C)for(var E=Math.max(0,Math.ceil((f-C)/i)),_=Math.min(o.outWidth,(o.inWidth+f-C)/i),T=0;T<o.inChannels;++T)for(var D=0;D<o.outChannels;++D){for(var k=0,I=0;I<o.batchSize;++I)for(var M=b;M<S;++M)for(var O=y+M*a-p,F=E;F<_;++F){var j=C+F*i-f;k+=l?m.get(I,O,j,T)*g.get(I,M,F,D):m.get(I,T,O,j)*g.get(I,D,M,F)}d.set(k,y,C,T,D)}return d.toTensor()},e.prototype.conv3dDerFilter=function(n,r,o){for(var a=o.strideDepth,i=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,d=o.filterWidth,f=St(o.filterShape,"float32"),p=f.values,m=f.strides,g=m[0],y=m[1],b=m[2],S=m[3],C=this.readSync(r.dataId),E=r.strides,_=E[0],T=E[1],D=E[2],k=E[3],I=this.readSync(n.dataId),M=n.strides,O=M[0],F=M[1],j=M[2],G=M[3],W=o.padInfo.front,q=o.padInfo.left,P=o.padInfo.top,z=0;z<u;++z)for(var U=Math.max(0,Math.ceil((W-z)/a)),H=Math.min(o.outDepth,(o.inDepth+W-z)/a),L=z*g,$=0;$<l;++$)for(var J=Math.max(0,Math.ceil((P-$)/i)),ne=Math.min(o.outHeight,(o.inHeight+P-$)/i),ce=$*y+L,be=0;be<d;++be)for(var se=Math.max(0,Math.ceil((q-be)/s)),ie=Math.min(o.outWidth,(o.inWidth+q-be)/s),fe=be*b+ce,ge=0;ge<o.inChannels;++ge)for(var Oe=ge*S+fe,je=0;je<o.outChannels;++je){for(var Le=0,ke=0;ke<o.batchSize;++ke)for(var qe=ke*O,nt=ke*_,it=U;it<H;++it)for(var Ie=(z+it*a-W)*F+qe,Me=it*T+nt,Be=J;Be<ne;++Be)for(var Je=($+Be*i-P)*j+Ie,ct=Be*D+Me,st=se;st<ie;++st){var $e=st*k+ct;Le+=I[(be+st*s-q)*G+Je+ge]*C[$e+je]}p[Oe+je]=Le}return f.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,o,a);return i&&(l=this.add(l,i)),s&&(l=Iw(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(n,r,o){Ne([n,r],"depthwiseConv2D");for(var a=o.filterHeight,i=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,d=o.padInfo.top,f=o.outChannels/o.inChannels,p=St(o.outShape,n.dtype),m=this.readSync(n.dataId),g=this.readSync(r.dataId),y=p.values,b=0;b<o.batchSize;++b)for(var S=b*n.strides[0],C=b*p.strides[0],E=0;E<o.outHeight;++E)for(var _=C+E*p.strides[1],T=E*o.strideHeight-l,D=0;D<a;++D){var k=T+D*s;if(!(k<0||k>=o.inHeight))for(var I=D*r.strides[0],M=S+k*n.strides[1],O=0;O<o.outWidth;++O)for(var F=_+O*p.strides[2],j=O*o.strideWidth-d,G=0;G<i;++G){var W=j+G*u;if(!(W<0||W>=o.inWidth))for(var q=I+G*r.strides[1],P=M+W*o.inChannels,z=F,U=q,H=0;H<o.inChannels;++H){for(var L=m[P+H],$=0;$<f;++$)y[z+$]+=L*g[U+$];z+=f,U+=f}}}return p.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,o){Ne([n,r],"depthwiseConv2DDerInput");for(var a=St(o.inShape,"float32"),i=a.values,s=a.strides,u=s[0],l=s[1],d=s[2],f=this.readSync(n.dataId),p=n.strides,m=p[0],g=p[1],y=p[2],b=this.readSync(r.dataId),S=r.strides,C=S[0],E=S[1],_=S[2],T=o.batchSize,D=o.filterHeight,k=o.filterWidth,I=o.inChannels,M=o.inHeight,O=o.inWidth,F=o.outChannels,j=o.outHeight,G=o.outWidth,W=o.strideHeight,q=o.strideWidth,P=D-1-o.padInfo.top,z=k-1-o.padInfo.left,U=F/I,H=0;H<T;++H)for(var L=0;L<I;++L)for(var $=0;$<M;++$)for(var J=$-P,ne=Math.max(0,Math.ceil(J/W)),ce=Math.min(j,(D+J)/W),be=0;be<O;++be){for(var se=be-z,ie=Math.max(0,Math.ceil(se/q)),fe=Math.min(G,(k+se)/q),ge=0,Oe=ne;Oe<ce;++Oe)for(var je=Oe*W-J,Le=ie;Le<fe;++Le)for(var ke=m*H+g*Oe+y*Le,qe=C*(D-1-je)+E*(k-1-(Le*q-se))+_*L,nt=0;nt<U;++nt)ge+=f[ke+(L*U+nt)]*b[qe+nt];i[u*H+l*$+d*be+L]=ge}return a.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,o){Ne([n,r],"depthwiseConv2DDerFilter");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=St(o.filterShape,"float32"),d=o.padInfo.left,f=o.padInfo.top,p=o.outChannels/o.inChannels,m=this.bufferSync(n),g=this.bufferSync(r),y=0;y<s;++y)for(var b=Math.max(0,Math.ceil((f-y)/a)),S=Math.min(o.outHeight,(o.inHeight+f-y)/a),C=0;C<u;++C)for(var E=Math.max(0,Math.ceil((d-C)/i)),_=Math.min(o.outWidth,(o.inWidth+d-C)/i),T=0;T<o.outChannels;++T){for(var D=Math.trunc(T/p),k=T%p,I=0,M=0;M<o.batchSize;++M)for(var O=b;O<S;++O)for(var F=y+O*a-f,j=E;j<_;++j){var G=C+j*i-d;I+=m.get(M,F,G,D)*g.get(M,O,j,T)}l.set(I,y,C,D,k)}return l.toTensor()},e.prototype.tile=function(n,r){return Ne(n,"tile"),uj(this.bufferSync(n),r)},e.prototype.pad=function(n,r,o){Ne(n,"pad");var a=r.map((function(p,m){return p[0]+n.shape[m]+p[1]})),i=r.map((function(p){return p[0]})),s=this.bufferSync(n),u=St(a,n.dtype);o!==0&&u.values.fill(o);for(var l=0;l<n.size;l++){var d=s.indexToLoc(l),f=d.map((function(p,m){return p+i[m]}));u.set.apply(u,[s.get.apply(s,d)].concat(f))}return u.toTensor()},e.prototype.gather=function(n,r,o){Ne([n,r],"gather");var a=n.shape.slice(),i=this.readSync(r.dataId);a[o]=i.length;for(var s=St(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var d=s.indexToLoc(l),f=d.slice();f[o]=i[d[o]];var p=u.locToIndex(f);s.values[l]=u.values[p]}return s.toTensor()},e.prototype.batchToSpaceND=function(n,r,o){Ne([n],"batchToSpaceND");var a=r.reduce((function(f,p){return f*p})),i=py(n.shape,r,a),s=my(i.length,r.length),u=vy(n.shape,r,a),l=zL(o,r.length),d=UL(u,o,r.length);return Ma(n.reshape(i),s).reshape(u).slice(l,d)},e.prototype.spaceToBatchND=function(n,r,o){Ne([n],"spaceToBatchND");var a=r.reduce((function(p,m){return p*m})),i=[[0,0]];i.push.apply(i,o);for(var s=1+r.length;s<n.shape.length;++s)i.push([0,0]);var u=n.pad(i),l=py(u.shape,r,a,!1),d=my(l.length,r.length,!1),f=vy(u.shape,r,a,!1);return Ma(u.reshape(l),d).reshape(f)},e.prototype.maxPool=function(n,r){return Ne(n,"maxPool"),dS(this.readSync(n.dataId),n.shape,n.dtype,n.strides,r,"max").toTensor()},e.prototype.maxPoolBackprop=function(n,r,o,a){Ne([r,o],"maxPoolBackprop");for(var i=this.readSync(r.dataId),s=St(a.outShape,r.dtype,nz(i,r.shape,r.dtype,a).values),u=a.strideHeight,l=a.strideWidth,d=a.dilationHeight,f=a.dilationWidth,p=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=m-1-a.padInfo.left,y=p-1-a.padInfo.top,b=St(r.shape,"float32"),S=this.bufferSync(n),C=0;C<a.batchSize;++C)for(var E=0;E<a.inChannels;++E)for(var _=0;_<a.inHeight;++_)for(var T=0;T<a.inWidth;++T){for(var D=_-y,k=T-g,I=0,M=0;M<p;M+=d){var O=(D+M)/u;if(!(O<0||O>=a.outHeight||Math.floor(O)!==O))for(var F=0;F<m;F+=f){var j=(k+F)/l;if(!(j<0||j>=a.outWidth||Math.floor(j)!==j)){var G=p*m-1-s.get(C,O,j,E)===M*m+F?1:0;G!==0&&(I+=S.get(C,O,j,E)*G)}}}b.set(I,C,_,T,E)}return b.toTensor()},e.prototype.avgPoolBackprop=function(n,r,o){Ne([n,r],"avgPoolBackprop");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=p-1-o.padInfo.left,g=f-1-o.padInfo.top,y=St(r.shape,"float32"),b=1/(s*u),S=this.bufferSync(n),C=0;C<o.batchSize;++C)for(var E=0;E<o.inChannels;++E)for(var _=0;_<o.inHeight;++_)for(var T=0;T<o.inWidth;++T){for(var D=_-g,k=T-m,I=0,M=0;M<f;M+=l){var O=(D+M)/a;if(!(O<0||O>=o.outHeight||Math.floor(O)!==O))for(var F=0;F<p;F+=d){var j=(k+F)/i;j<0||j>=o.outWidth||Math.floor(j)!==j||(I+=S.get(C,O,j,E))}}y.set(I*b,C,_,T,E)}return y.toTensor()},e.prototype.pool3d=function(n,r,o){Ne(n,"pool3d");for(var a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,m=r.effectiveFilterWidth,g=r.padInfo.front,y=r.padInfo.top,b=r.padInfo.left,S=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,C=this.readSync(n.dataId),E=St(r.outShape,n.dtype),_=E.values,T=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[3]*r.outShape[4],I=r.outShape[4],M=0;M<r.batchSize;++M)for(var O=M*T,F=M*n.strides[0],j=0;j<r.inChannels;++j)for(var G=0;G<r.outDepth;++G){for(var W=G*a-g,q=W;q<0;)q+=u;for(var P=Math.min(r.inDepth,f+W),z=O+G*D,U=0;U<r.outHeight;++U){for(var H=U*i-y,L=H;L<0;)L+=l;for(var $=Math.min(r.inHeight,p+H),J=z+U*k,ne=0;ne<r.outWidth;++ne){for(var ce=ne*s-b,be=ce;be<0;)be+=d;for(var se=Math.min(r.inWidth,m+ce),ie=J+ne*I,fe=S,ge=0,Oe=0,je=q;je<P;je+=u){for(var Le=F+je*n.strides[1],ke=L;ke<$;ke+=l){for(var qe=Le+ke*n.strides[2],nt=be;nt<se;nt+=d){var it=C[qe+nt*n.strides[3]+j];if(o==="max"&&it>fe?fe=it:o==="avg"&&(ge+=it,Oe++),isNaN(fe))break}if(isNaN(fe))break}if(isNaN(fe))break}_[ie+j]=o==="avg"?ge/Oe:fe}}}return E.toTensor()},e.prototype.avgPool3d=function(n,r){return Ne(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,o){Ne([n,r],"avgPool3dBackprop");for(var a=o.strideDepth,i=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,d=o.filterWidth,f=o.dilationDepth,p=o.dilationHeight,m=o.dilationWidth,g=o.effectiveFilterDepth,y=o.effectiveFilterHeight,b=o.effectiveFilterWidth,S=g-1-o.padInfo.front,C=b-1-o.padInfo.left,E=y-1-o.padInfo.top,_=St(r.shape,"float32"),T=1/(u*l*d),D=this.bufferSync(n),k=0;k<o.batchSize;++k)for(var I=0;I<o.inChannels;++I)for(var M=0;M<o.inDepth;++M)for(var O=0;O<o.inHeight;++O)for(var F=0;F<o.inWidth;++F){for(var j=M-S,G=O-E,W=F-C,q=0,P=0;P<g;P+=f){var z=(j+P)/a;if(!(z<0||z>=o.outDepth||Math.floor(z)!==z))for(var U=0;U<y;U+=p){var H=(G+U)/i;if(!(H<0||H>=o.outHeight||Math.floor(H)!==H))for(var L=0;L<b;L+=m){var $=(W+L)/s;$<0||$>=o.outWidth||Math.floor($)!==$||(q+=D.get(k,z,H,$,I))}}}_.set(q*T,k,M,O,F,I)}return _.toTensor()},e.prototype.maxPool3d=function(n,r){return Ne(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var o=St(r.outShape,"int32"),a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,d=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,m=r.effectiveFilterWidth,g=r.padInfo.front,y=r.padInfo.top,b=r.padInfo.left,S=this.bufferSync(n),C=0;C<r.batchSize;++C)for(var E=0;E<r.inChannels;++E)for(var _=0;_<r.outDepth;++_){for(var T=_*a-g,D=T;D<0;)D+=u;for(var k=Math.min(r.inDepth,f+T),I=0;I<r.outHeight;++I){for(var M=I*i-y,O=M;O<0;)O+=l;for(var F=Math.min(r.inHeight,p+M),j=0;j<r.outWidth;++j){for(var G=j*s-b,W=G;W<0;)W+=d;for(var q=Math.min(r.inWidth,m+G),P=Number.NEGATIVE_INFINITY,z=-1,U=D;U<k;U+=u)for(var H=U-T,L=O;L<F;L+=l)for(var $=L-M,J=W;J<q;J+=d){var ne=J-G,ce=S.get(C,U,L,J,E);ce>=P&&(P=ce,z=H*p*m+$*p+ne)}o.set(z,C,_,I,j,E)}}}return o.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,o,a){Ne([r,o],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,l=a.strideWidth,d=a.dilationDepth,f=a.dilationHeight,p=a.dilationWidth,m=a.effectiveFilterDepth,g=a.effectiveFilterHeight,y=a.effectiveFilterWidth,b=m-1-a.padInfo.front,S=y-1-a.padInfo.left,C=g-1-a.padInfo.top,E=St(r.shape,"float32"),_=this.bufferSync(i),T=this.bufferSync(n),D=0;D<a.batchSize;++D)for(var k=0;k<a.inChannels;++k)for(var I=0;I<a.inDepth;++I)for(var M=0;M<a.inHeight;++M)for(var O=0;O<a.inWidth;++O){for(var F=I-b,j=M-C,G=O-S,W=0,q=0;q<m;q+=d){var P=(F+q)/s;if(!(P<0||P>=a.outDepth||Math.floor(P)!==P))for(var z=0;z<g;z+=f){var U=(j+z)/u;if(!(U<0||U>=a.outHeight||Math.floor(U)!==U))for(var H=0;H<y;H+=p){var L=(G+H)/l;if(!(L<0||L>=a.outWidth||Math.floor(L)!==L)){var $=m*g*y-1-_.get(D,P,U,L,k)===q*g*y+z*y+H?1:0;$!==0&&(W+=T.get(D,P,U,L,k)*$)}}}}E.set(W,D,I,M,O,k)}return E.toTensor()},e.prototype.cast=function(n,r){return oj(n,r,this)},e.prototype.reshape=function(n,r){return lS(n,r)},e.prototype.avgPool=function(n,r){return Ne(n,"avgPool"),Ne(n,"maxPool"),dS(this.readSync(n.dataId),n.shape,n.dtype,n.strides,r,"avg").toTensor().toFloat()},e.prototype.resizeBilinear=function(n,r,o,a){Ne(n,"resizeBilinear");for(var i=n.shape,s=i[0],u=i[1],l=i[2],d=i[3],f=this.readSync(n.dataId),p=new Float32Array(Ke([s,r,o,d])),m=[a&&r>1?u-1:u,a&&o>1?l-1:l],g=[a&&r>1?r-1:r,a&&o>1?o-1:o],y=0,b=m[0]/g[0],S=m[1]/g[1],C=0;C<s;C++)for(var E=0;E<r;E++)for(var _=b*E,T=Math.floor(_),D=_-T,k=Math.min(u-1,Math.ceil(_)),I=C*n.strides[0]+T*n.strides[1],M=C*n.strides[0]+k*n.strides[1],O=0;O<o;O++)for(var F=S*O,j=Math.floor(F),G=F-j,W=Math.min(l-1,Math.ceil(F)),q=I+j*n.strides[2],P=M+j*n.strides[2],z=I+W*n.strides[2],U=M+W*n.strides[2],H=0;H<d;H++){var L=f[q+H],$=f[P+H],J=L+(f[z+H]-L)*G,ne=J+($+(f[U+H]-$)*G-J)*D;p[y++]=ne}return Rr(p,[s,r,o,d])},e.prototype.resizeBilinearBackprop=function(n,r,o){Ne([n,r],"resizeBilinearBackprop");for(var a=r.shape,i=a[0],s=a[1],u=a[2],l=a[3],d=n.shape,f=d[1],p=d[2],m=new Float32Array(i*s*u*l),g=[o&&f>1?s-1:s,o&&p>1?u-1:u],y=[o&&f>1?f-1:f,o&&p>1?p-1:p],b=g[0]/y[0],S=g[1]/y[1],C=this.readSync(n.dataId),E=0,_=0;_<i;_++)for(var T=_*r.strides[0],D=0;D<f;D++)for(var k=D*b,I=Math.floor(k),M=Math.min(Math.ceil(k),s-1),O=T+I*r.strides[1],F=T+M*r.strides[1],j=k-I,G=1-j,W=0;W<p;W++)for(var q=W*S,P=Math.floor(q),z=Math.min(Math.ceil(q),u-1),U=q-P,H=1-U,L=O+P*r.strides[2],$=O+z*r.strides[2],J=F+P*r.strides[2],ne=F+z*r.strides[2],ce=G*H,be=G*U,se=j*H,ie=j*U,fe=0;fe<l;fe++){var ge=C[E++];m[L+fe]+=ge*ce,m[$+fe]+=ge*be,m[J+fe]+=ge*se,m[ne+fe]+=ge*ie}return di(m,[i,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,o,a){Ne(n,"resizeNearestNeighbor");for(var i=n.shape,s=i[0],u=i[1],l=i[2],d=i[3],f=this.readSync(n.dataId),p=new Float32Array(s*r*o*d),m=[a&&r>1?u-1:u,a&&o>1?l-1:l],g=[a&&r>1?r-1:r,a&&o>1?o-1:o],y=m[0]/g[0],b=m[1]/g[1],S=0,C=0;C<s;C++)for(var E=C*n.strides[0],_=0;_<r;_++)for(var T=y*_,D=E+Math.min(u-1,a?Math.round(T):Math.floor(T))*n.strides[1],k=0;k<o;k++)for(var I=b*k,M=D+Math.min(l-1,a?Math.round(I):Math.floor(I))*n.strides[2],O=0;O<d;O++){var F=f[M+O];p[S++]=F}return Rr(p,[s,r,o,d],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,o){Ne([n,r],"resizeNearestNeighborBackprop");for(var a=r.shape,i=a[0],s=a[1],u=a[2],l=a[3],d=n.shape,f=d[1],p=d[2],m=new Float32Array(i*s*u*l),g=this.readSync(n.dataId),y=[o&&f>1?s-1:s,o&&p>1?u-1:u],b=[o&&f>1?f-1:f,o&&p>1?p-1:p],S=y[0]/b[0],C=y[1]/b[1],E=1/S,_=1/C,T=2*Math.ceil(E)+2,D=2*Math.ceil(_)+2,k=0;k<i;k++)for(var I=k*r.strides[0],M=0;M<s;M++)for(var O=I+M*r.strides[1],F=Math.floor(M*E),j=Math.floor(F-T/2),G=0;G<u;G++)for(var W=O+G*r.strides[2],q=Math.floor(G*_),P=Math.floor(q-D/2),z=0;z<l;z++){for(var U=0,H=0;H<T;H++){var L=H+j;if(!(L<0||L>=f)){var $=I+L*n.strides[1],J=L*S;if(M===Math.min(s-1,o?Math.round(J):Math.floor(J)))for(var ne=0;ne<D;ne++){var ce=ne+P;if(!(ce<0||ce>=p)){var be=$+ce*n.strides[2],se=ce*C;G===Math.min(u-1,o?Math.round(se):Math.floor(se))&&(U+=g[be+z])}}}}m[W+z]=U}return di(m,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,o,a,i,s){Ne([n,r,o,i,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),d=this.readSync(o.dataId),f=i?this.readSync(i.dataId):new Float32Array([1]),p=s?this.readSync(s.dataId):new Float32Array([0]),m=new Float32Array(u.length),g=p.length,y=f.length,b=d.length,S=l.length,C=0,E=0,_=0,T=0,D=0;D<u.length;++D)m[D]=p[C++]+(u[D]-l[E++])*f[_++]/Math.sqrt(d[T++]+a),C>=g&&(C=0),E>=S&&(E=0),_>=y&&(_=0),T>=b&&(T=0);return di(m,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,o,a,i){Ne(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),d=n.size,f=new Float32Array(d);function p(b){for(var S=b%s,C=b-S+Math.max(0,S-r),E=b-S+Math.min(S+r,u),_=0;C<=E;C++){var T=l[C];_+=T*T}return _}for(var m=0;m<d;m++){var g=p(m),y=l[m]*Math.pow(o+a*g,-i);f[m]=y}return di(f,n.shape)},e.prototype.LRNGrad=function(n,r,o,a,i,s,u){Ne(n,"LRNGrad");for(var l=n.shape[3],d=this.readSync(n.dataId),f=this.readSync(r.dataId),p=this.readSync(o.dataId),m=new Float32Array(n.size),g=n.size,y=0;y<g;y++){for(var b=y%l,S=y-b+Math.max(0,b-a),C=y-b+Math.min(l,b+a+1),E=0,_=S;_<C;_++)E+=Math.pow(f[_],2);for(E=s*E+i,_=S;_<C;_++){var T=-2*s*u*f[_]*p[y]/E;y===_&&(T+=Math.pow(E,-u)),T*=d[y],m[_]+=T}}return di(m,n.shape)},e.prototype.multinomial=function(n,r,o,a){Ne(n,"multinomial");for(var i=r?n:W0(n),s=i.shape[0],u=i.shape[1],l=Wn([s,o],"int32"),d=this.readSync(l.dataId),f=this.readSync(i.dataId),p=0;p<s;++p){var m=p*u,g=new Float32Array(u-1);g[0]=f[m];for(var y=1;y<g.length;++y)g[y]=g[y-1]+f[m+y];for(var b=V0(a.toString()),S=p*o,C=0;C<o;++C){var E=b();d[S+C]=g.length;for(var _=0;_<g.length;_++)if(E<g[_]){d[S+C]=_;break}}}return l},e.prototype.oneHot=function(n,r,o,a){Ne(n,"oneHot");var i=new Float32Array(n.size*r);i.fill(a);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(i[u*r+s[u]]=o);return Ml(i,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,o,a,i){return Ne(n,"nonMaxSuppression"),qE(this.readSync(n.dataId),this.readSync(r.dataId),o,a,i)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var o=n.shape[0],a=n.shape[1],i=St(n.shape,"float32"),s=St(n.shape,"float32"),u=da(n).as2D(o,a),l=pi(n).as2D(o,a),d=0;d<o;d++)for(var f=u.slice([d,0],[1,a]),p=l.slice([d,0],[1,a]),m=Cr(f,p),g=this.readSync(this.fftImpl(m,r).dataId),y=0;y<a;y++){var b=aM(g,y);i.values[d*a+y]=b.real,s.values[d*a+y]=b.imag}return Cr(i.toTensor(),s.toTensor()).as2D(o,a)},e.prototype.fftImpl=function(n,r){var o=n.as1D(),a=o.size;if(this.isExponentOf2(a)){var i=this.fftRadix2(o,a,r).as2D(n.shape[0],n.shape[1]);return r&&(i=Cr(da(i).div(tt(a)),pi(i).div(tt(a)))),i}var s=this.readSync(n.dataId),u=(function(l){for(var d=new Float32Array(l.length/2),f=new Float32Array(l.length/2),p=0;p<l.length;p+=2)d[p/2]=l[p],f[p/2]=l[p+1];return{real:d,imag:f}})(this.fourierTransformByMatmul(s,a,r));return Cr(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,o){if(r===1)return n;var a=this.readSync(n.dataId),i=r/2,s=(function(S){for(var C=Math.ceil(S.length/4),E=new Float32Array(C),_=new Float32Array(C),T=0;T<S.length;T+=4)E[Math.floor(T/4)]=S[T],_[Math.floor(T/4)]=S[T+1];return{real:E,imag:_}})(a),u=Cr(s.real,s.imag).as1D(),l=(function(S){for(var C=Math.floor(S.length/4),E=new Float32Array(C),_=new Float32Array(C),T=2;T<S.length;T+=4)E[Math.floor(T/4)]=S[T],_[Math.floor(T/4)]=S[T+1];return{real:E,imag:_}})(a),d=Cr(l.real,l.imag).as1D();u=this.fftRadix2(u,i,o),d=this.fftRadix2(d,i,o);var f=(function(S,C){for(var E=new Float32Array(S/2),_=new Float32Array(S/2),T=0;T<Math.ceil(S/2);T++){var D=(C?2:-2)*Math.PI*(T/S);E[T]=Math.cos(D),_[T]=Math.sin(D)}return{real:E,imag:_}})(r,o),p=Cr(f.real,f.imag).mul(d),m=u.add(p),g=u.sub(p),y=da(m).concat(da(g)),b=pi(m).concat(pi(g));return Cr(y,b).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,o){for(var a=new Float32Array(2*r),i=0;i<r;i++){for(var s=0,u=0,l=0;l<r;l++){var d=M0e(i*l,r,o),f=aM(n,l);s+=f.real*d.real-f.imag*d.imag,u+=f.real*d.imag+f.imag*d.real}o&&(s/=r,u/=r),I0e(a,s,u,i)}return a},e.prototype.depthToSpace=function(n,r,o){K(o==="NHWC",(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o})),K(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));for(var a=n.shape[0],i=n.shape[1],s=n.shape[2],u=n.shape[3],l=i*r,d=s*r,f=u/(r*r),p=this.readSync(n.dataId),m=new Float32Array(a*l*d*f),g=0,y=0;y<a;++y)for(var b=0;b<l;++b)for(var S=Math.floor(b/r),C=b%r,E=0;E<d;++E)for(var _=Math.floor(E/r),T=(C*r+E%r)*f,D=0;D<f;++D){var k=D+T+u*(_+s*(S+i*y));m[g++]=p[k]}return di(m,[a,l,d,f])},e.prototype.broadcastedBinaryOp=function(n,r,o,a){var i=Mt(n.shape,r.shape),s=St(i,o),u=this.readSync(n.dataId),l=this.readSync(r.dataId),d=xu(n.shape,i),f=xu(r.shape,i),p=s.values;if(d.length+f.length===0)for(var m=0;m<p.length;++m)p[m]=a(u[m%u.length],l[m%l.length]);else{var g=this.bufferSync(n),y=this.bufferSync(r),b=function(S){var C=s.indexToLoc(S),E=C.slice(-n.rank);d.forEach((function(k){return E[k]=0}));var _=g.locToIndex(E),T=C.slice(-r.rank);f.forEach((function(k){return T[k]=0}));var D=y.locToIndex(T);p[S]=a(u[_],l[D])};for(m=0;m<p.length;++m)b(m)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,o){var a=Mt(n.shape,r.shape),i=St(a,"float32"),s=St(a,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),d=xu(n.shape,a),f=xu(r.shape,a),p=i.values,m=s.values;if(d.length+f.length===0)for(var g=0;g<p.length;g++){var y=g%u.length,b=g%l.length,S=o(u[2*y],u[2*y+1],l[2*b],l[2*b+1]);p[g]=S.real,m[g]=S.imag}else{var C=this.bufferSync(this.data.get(n.dataId).complexTensors.real),E=this.bufferSync(this.data.get(r.dataId).complexTensors.real),_=function(T){var D=i.indexToLoc(T),k=D.slice(-n.rank);d.forEach((function(j){return k[j]=0}));var I=C.locToIndex(k),M=D.slice(-r.rank);f.forEach((function(j){return M[j]=0}));var O=E.locToIndex(M),F=o(u[2*I],u[2*I+1],l[2*O],l[2*O+1]);p[T]=F.real,m[T]=F.imag};for(g=0;g<p.length;g++)_(g)}return this.complex(i.toTensor(),s.toTensor())},e.prototype.split=function(n,r,o){return sj(n,r,o)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,o,a,i,s){for(var u=n.shape,l=u[0],d=u[1],f=u[2],p=u[3],m=r.shape[0],g=a[0],y=a[1],b=St([m,g,y,p],"float32"),S=this.readSync(r.dataId),C=this.readSync(o.dataId),E=this.readSync(n.dataId),_=n.strides,T=b.strides,D=0;D<m;D++){var k=4*D,I=S[k],M=S[k+1],O=S[k+2],F=S[k+3],j=C[D];if(!(j>=l))for(var G=g>1?(O-I)*(d-1)/(g-1):0,W=y>1?(F-M)*(f-1)/(y-1):0,q=0;q<g;q++){var P=g>1?I*(d-1)+q*G:.5*(I+O)*(d-1);if(P<0||P>d-1)for(var z=0;z<y;z++)for(var U=0;U<p;U++){var H=U+z*T[2]+q*T[1]+D*T[0];b.values[H]=s}else if(i==="bilinear"){var L=Math.floor(P),$=Math.ceil(P),J=P-L;for(z=0;z<y;z++)if((je=y>1?M*(f-1)+z*W:.5*(M+F)*(f-1))<0||je>f-1)for(U=0;U<p;U++)H=U+z*T[2]+q*T[1]+D*T[0],b.values[H]=s;else{var ne=Math.floor(je),ce=Math.ceil(je),be=je-ne;for(U=0;U<p;U++){var se=E[H=U+ne*_[2]+L*_[1]+j*_[0]],ie=E[H=U+ce*_[2]+L*_[1]+j*_[0]],fe=E[H=U+ne*_[2]+$*_[1]+j*_[0]],ge=se+(ie-se)*be,Oe=fe+(E[H=U+ce*_[2]+$*_[1]+j*_[0]]-fe)*be;H=U+z*T[2]+q*T[1]+D*T[0],b.values[H]=ge+(Oe-ge)*J}}}else for(z=0;z<y;++z){var je;if((je=y>1?M*(f-1)+z*W:.5*(M+F)*(f-1))<0||je>f-1)for(U=0;U<p;U++)H=U+z*T[2]+q*T[1]+D*T[0],b.values[H]=s;else{var Le=Math.round(je),ke=Math.round(P);for(U=0;U<p;U++){var qe=U+Le*_[2]+ke*_[1]+j*_[0],nt=U+z*T[2]+q*T[1]+D*T[0];b.values[nt]=E[qe]}}}}}return b.toTensor()},e.prototype.sparseToDense=function(n,r,o,a){var i=yy(0,n,o),s=i.sliceRank,u=i.numUpdates,l=i.sliceSize,d=i.strides,f=i.outputSize;return this.scatter(n,r,o,f,l,u,s,d,a,!1)},e.prototype.gatherND=function(n,r){var o=r.shape,a=o[o.length-1],i=QL(n,r),s=i[0],u=i[1],l=i[2],d=i[3];if(u===0)return Rr([],s,n.dtype);for(var f=new gp([u,l],n.dtype),p=this.readSync(r.dataId),m=this.readSync(n.dataId),g=0;g<u;g++){for(var y=[],b=0,S=0;S<a;S++){var C=p[g*a+S];b+=C*d[S],y.push(C)}if(b<0||b>=n.size/l)throw new Error("Invalid indices: "+y+" does not index into "+n.shape);for(var E=0;E<l;E++)f.values[g*l+E]=m[b*l+E]}return f.toTensor().reshape(s)},e.prototype.scatterND=function(n,r,o){var a=yy(0,n,o),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,d=a.outputSize,f=tt(0);return this.scatter(n,r,o,d,u,s,i,l,f,!0)},e.prototype.fill=function(n,r,o){var a=sy(o=o||rm(r),Ke(n));return a.fill(r),oe.makeTensor(a,n,o,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=sy(n.dtype,Ke(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,o){return aj(n,r,o)},e.prototype.scatter=function(n,r,o,a,i,s,u,l,d,f){var p=[a/i,i],m=this.readSync(n.dataId),g=this.readSync(r.dataId);if(a===0)return Rr([],o,r.dtype);var y=new gp(p,r.dtype);y.values.fill(this.readSync(d.dataId)[0]);for(var b=0;b<s;b++){for(var S=[],C=0,E=0;E<u;E++){var _=m[b*u+E];S.push(_),C+=_*l[E]}if(C<0||C>=a/i)throw new Error("Invalid indices: "+S+" does not index into "+o);for(var T=0;T<i;T++)f?y.values[C*i+T]+=g[b*i+T]:y.values[C*i+T]=r.rank===0?g[0]:g[b*i+T]}return y.toTensor().reshape(o)},e})(nj);function rz(t,e){return{kernelName:t,backendName:"cpu",kernelFunc:function(n){var r=n.inputs,o=n.backend,a=r,i=a.a,s=a.b,u=o;Ne([i,s],t);var l=u.data.get(i.dataId).values,d=u.data.get(s.dataId).values,f=e(i.shape,s.shape,l,d,i.dtype),p=f[0],m=f[1];return{dataId:u.write(p,m,i.dtype),shape:m,dtype:i.dtype}}}}function oz(t){return function(e,n,r,o,a){var i=Mt(e,n),s=i.length,u=Vo(i),l=$d(a,Ke(i)),d=e.length,f=n.length,p=Vo(e),m=Vo(n),g=xu(e,i),y=xu(n,i);if(g.length+y.length===0)for(var b=0;b<l.length;++b)l[b]=t(r[b%r.length],o[b%o.length]);else{var S=function(C){var E=AL(C,s,u),_=E.slice(-d);g.forEach((function(I){return _[I]=0}));var T=nS(_,d,p),D=E.slice(-f);y.forEach((function(I){return D[I]=0}));var k=nS(D,f,m);l[C]=t(r[T],o[k])};for(b=0;b<l.length;++b)S(b)}return[l,i]}}oe.registerBackend("cpu",(function(){return new Mwe}),1);var Owe=oz((function(t,e){return t/e})),Pwe=rz(j0,Owe),Fwe={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n,i=a.filterSize,s=a.strides,u=a.pad,l=a.includeBatchInIndex,d=r;Ne(o,"MaxPoolWithArgmax");var f=d.data.get(o.dataId).values,p=Wl(o.shape,i,s,[1,1],u),m=(function(C,E,_,T,D){var k=dS(C,0,_,Vo(E),D,"max"),I=nz(C,E,_,D,!0,T);return[k.values,I.values]})(f,o.shape,o.dtype,l,p),g=m[0],y=m[1],b=d.write(g,p.outShape,o.dtype),S=d.write(y,p.outShape,o.dtype);return[{dataId:b,shape:p.outShape,dtype:o.dtype},{dataId:S,shape:p.outShape,dtype:"int32"}]}},Bwe={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,d=s.scoreThreshold,f=s.softNmsSigma,p=n;Ne(a,"NonMaxSuppressionWithScore");var m=XE(p.data.get(a.dataId).values,p.data.get(i.dataId).values,u,l,d,f);return[m.selectedIndices,m.selectedScores]}},Lwe={kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n;Ne(r,"square");for(var a=o.data.get(r.dataId).values,i=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];i[s]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},jwe=oz((function(t,e){var n=t-e;return n*n}));function az(t,e,n,r,o){for(var a=Ke(e),i=e.length,s=Vo(e),u=Vo(o),l=$d(n,Ke(o)),d=0;d<a;++d){for(var f=AL(d,i,s),p=new Array(f.length),m=0;m<p.length;m++)p[m]=f[r[m]];l[nS(p,i,u)]=t[d]}return l}for(var Mw=0,TM=[Bwe,Lwe,rz(z0,jwe),Pwe,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n.perm,i=r;Ne(o,"transpose");for(var s=o.shape.length,u=new Array(s),l=0;l<u.length;l++)u[l]=o.shape[a[l]];var d=az(i.data.get(o.dataId).values,o.shape,o.dtype,a,u);return{dataId:i.write(d,u,o.dtype),shape:u,dtype:o.dtype}}},Fwe];Mw<TM.length;Mw++)wL(TM[Mw]);var Qc,zwe=function(t){this.variableNames=["A"];var e=jr(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Uwe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=jr(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `},Wwe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=Cn(this.rank),a=(function(i){var s=i.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),d=0;d<i.length;d++)l[i[d]]=u[d];return l.join()})(e);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},Vwe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Cn(this.rank),a=cj("rc",this.rank),i=new Array(this.rank);for(r=0;r<e.length;r++)i[e[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `};for(var Ow=0,AM=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.pixels,a=r.numChannels,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],d=u[1],f=[d,l],p=[d,l,a];(s||i)&&(Qc==null&&(Qc=document.createElement("canvas").getContext("2d")),Qc.canvas.width=l,Qc.canvas.height=d,Qc.drawImage(o,0,0,l,d),o=Qc.canvas);var m=n.makeTensorInfo(f,"int32");n.texData.get(m.dataId).usage=Bo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),o);var g=Ce().getBool("WEBGL_PACK")?new Uwe(p):new zwe(p),y=n.runWebGLProgram(g,[m],"int32");return n.disposeData(m.dataId),y}},{kernelName:j0,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e;return(function(o,a,i){var s=new jn(Z0e,o.shape,a.shape);return Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(s=new ui(ebe,o.shape,a.shape,!0)),i.runWebGLProgram(s,[o,a],"float32")})(r.a,r.b,n)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;dy("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=e,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,d=s.scoreThreshold,f=s.softNmsSigma,p=n,m=XE(p.readSync(a.dataId),p.readSync(i.dataId),u,l,d,f);return[m.selectedIndices,m.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n,a=new Rt(r.shape,"return x * x;");return o.runWebGLProgram(a,[r],r.dtype)}},{kernelName:z0,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,a=r.b,i=n,s=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ui("return (a - b) * (a - b);",o.shape,a.shape):new jn("return (a - b) * (a - b);",o.shape,a.shape);return i.compileAndRun(s,[o,a])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(t){for(var e,n=t.inputs,r=t.attrs,o=t.backend,a=n.x,i=r.perm,s=o,u=a.shape.length,l=new Array(u),d=0;d<l.length;d++)l[d]=a.shape[i[d]];if(s.shouldExecuteOnCPU([a])){var f=az(s.texData.get(a.dataId).values,a.shape,a.dtype,i,l);e=s.makeTensorInfo(l,a.dtype),s.texData.get(e.dataId).values=f}else e=(function(p,m,g){var y=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vwe(p.shape,m):new Wwe(p.shape,m);return g.runWebGLProgram(y,[p],p.dtype)})(a,i,s);return e}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n,i=a.filterSize,s=a.strides,u=a.pad,l=a.includeBatchInIndex,d=r;K(o.shape.length===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+o.shape.length+"."}));var f=[1,1];K(to(s,f),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+f+"'"}));var p=Wl(o.shape,i,s,f,u),m=(function(g,y,b,S){var C=new Xh(b,"max",!1),E=S.runWebGLProgram(C,[g],"float32");return C=new Xh(b,"max",!0,!0,y),[E,S.runWebGLProgram(C,[g],"float32")]})(o,l,p,d);return[m[0],m[1]]}}];Ow<AM.length;Ow++)wL(AM[Ow]);for(var Pw=0,NM=[{kernelName:WL,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=Mt(n.shape,r.shape);return{a:function(){var a=t,i=ir(n.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(n.shape)},b:function(){var a=t,i=ir(r.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(t,e){var n={};return e.forEach((function(r,o){n[o]=function(){return t.clone()}})),n}},{kernelName:VL,gradFunc:function(t,e,n){for(var r=n,o=r.inputShape,a=r.shape,i=Array.from(a),s=o.length-1;s>=0;s--)if(o[s]===a[s])i[s]=1;else if(o[s]!==1)throw new Error("broadcastTo(): ["+o+"] cannot be broadcast to ["+a+"].");var u=[];for(s=0;s<i.length;s++)i[s]>1&&u.push(s);return{x:function(){return t.sum(u,!0)}}}},{kernelName:j0,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=Mt(n.shape,r.shape);return{a:function(){var a=Pu(t,r.toFloat()),i=ir(n.shape,o);return i.length>0?mu(a,i).reshape(n.shape):a},b:function(){var a=t.mul(n.toFloat()),i=ir(r.shape,o);i.length>0&&(a=mu(a,i).reshape(r.shape));var s=Ij(r);return VE(Pu(a,s.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(t,e,n){var r=n.varianceEpsilon,o=e[0],a=e[1],i=e[2],s=e[3],u=wj(o),l=s??tt(1),d=ir(a.shape,u.shape),f=[];if(a.rank===1){for(var p=0;p<u.shape.length-1;++p)f.push(u.shape[p]);f.push(1)}var m=ja(o,a),g=Un(t,l),y=XL(wa(i,tt(r))),b=Un(Un(Un(y,y),y),tt(-.5));return{x:function(){return a.rank===1?as(Un(Un(t,Rd(y.as4D(1,1,1,a.shape[0]),f)),l),o.shape):as(Un(Un(t,y),l),o.shape)},mean:function(){var S=Un(Un(y,tt(-1)),g);return a.rank===1&&(S=mu(S,d)),as(S,a.shape)},variance:function(){var S=Un(Un(b,m),g);return a.rank===1&&(S=mu(S,d)),as(S,a.shape)},scale:function(){var S=Un(m,y),C=Un(t,S);return a.rank===1&&(C=mu(C,d)),as(C,a.shape)},offset:function(){var S=t;return a.rank===1&&(S=mu(S,d)),as(S,a.shape)}}}},{kernelName:GL,gradFunc:function(t){return{x:function(){return t.toFloat()}}}},{kernelName:HL,inputsToSave:["indices"],gradFunc:function(t,e){var n=e[0];return{indices:function(){return Wn(n.shape,"float32")}}}},{kernelName:qL,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],o=n.paddings.map((function(a){return a[0]}));return{x:function(){return t.slice(o,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:z0,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=tt(2);return{a:function(){return Un(t,Un(o,ja(n,r)))},b:function(){return Un(t,Un(o,ja(r,n)))}}}},{kernelName:$L,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],o=n.reps;return{x:function(){var a=$t(r);if(r.rank===1)for(var i=0;i<o[0];++i)a=a.add(t.slice([i*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(i=0;i<o[0];++i)for(var s=0;s<o[1];++s)a=a.add(t.slice([i*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(i=0;i<o[0];++i)for(s=0;s<o[1];++s)for(var u=0;u<o[2];++u)a=a.add(t.slice([i*r.shape[0],s*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(r.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(i=0;i<o[0];++i)for(s=0;s<o[1];++s)for(u=0;u<o[2];++u)for(var l=0;l<o[3];++l)a=a.add(t.slice([i*r.shape[0],s*r.shape[1],u*r.shape[2],l*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return a}}}},{kernelName:"Transpose",gradFunc:function(t,e,n){var r=UE(n.perm);return{x:function(){return Ma(t,r)}}}}];Pw<NM.length;Pw++)Nge(NM[Pw]);var Hwe=(function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t})();Ce().get("IS_BROWSER")&&Ce().setPlatform("browser",new Hwe);var Fw,Gwe=function(){return require("node-fetch")},$we=(function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return Ce().global.fetch!=null?Ce().global.fetch(e,n):(Fw==null&&(Fw=Gwe()),Fw(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t})();Ce().get("IS_NODE")&&Ce().setPlatform("node",new $we);var fS={float32:4,int32:4,uint16:2,uint8:1,bool:1},Ey=4;function iz(t,e){for(var n={},r=0,o=function(s){var u=s.name,l=s.dtype,d=s.shape,f=Ke(d),p=void 0;if("quantization"in s){var m=s.quantization;if(m.dtype!=="uint8"&&m.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+m.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var g=fS[m.dtype],y=t.slice(r,r+f*g),b=m.dtype==="uint8"?new Uint8Array(y):new Uint16Array(y);if(l==="float32")p=Float32Array.from(b,(function(D){return D*m.scale+m.min}));else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);p=Int32Array.from(b,(function(D){return Math.round(D*m.scale+m.min)}))}r+=f*g}else if(l==="string"){var S=Ke(s.shape);p=[];for(var C=0;C<S;C++){var E=new Uint32Array(t.slice(r,r+Ey))[0];r+=Ey;var _=new Uint8Array(t.slice(r,r+E));p.push(_),r+=E}}else{var T=fS[l];if(y=t.slice(r,r+f*T),l==="float32")p=new Float32Array(y);else if(l==="int32")p=new Int32Array(y);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);p=new Uint8Array(y)}r+=f*T}n[u]=Rr(p,d,l)},a=0,i=e;a<i.length;a++)o(i[a]);return n}function qwe(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach((function(a){if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)}));var r=new Uint8Array(e),o=0;return n.forEach((function(a){r.set(new Uint8Array(a.buffer),o),o+=a.byteLength})),r.buffer}var hS=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function DM(t){return hS?Buffer.byteLength(t):new Blob([t]).size}function dR(t){var e=0;t.forEach((function(o){e+=o.byteLength}));var n=new Uint8Array(e),r=0;return t.forEach((function(o){n.set(new Uint8Array(o),r),r+=o.byteLength})),n.buffer}function kM(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function lm(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:DM(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:DM(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Lo=(function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach((function(a){var i=a(e,r);i!==null&&o.push(i)})),o},t})(),_d="://",Tu=(function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){K(e!=null,(function(){return"scheme must not be undefined or null."})),e.endsWith(_d)&&(e=e.slice(0,e.indexOf(_d))),K(e.length>0,(function(){return"scheme must not be an empty string."}));var r=t.getInstance();K(r.managers[e]==null,(function(){return"A model store manager is already registered for scheme '"+e+"'."})),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t})();function Eg(t){if(t.indexOf(_d)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Tu.getSchemes().join(","));return{scheme:t.split(_d)[0],path:t.split(_d)[1]}}function IM(t,e,n){return n===void 0&&(n=!1),Ye(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,d,f;return Qe(this,(function(p){switch(p.label){case 0:return K(t!==e,(function(){return"Old path and new path are the same: '"+t+"'"})),K((r=Lo.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+t+"."})),K(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."})),o=r[0],K((a=Lo.getSaveHandlers(e)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+e+"."})),K(a.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."})),i=a[0],s=Eg(t).scheme,u=Eg(t).path,l=s===Eg(t).scheme,[4,o.load()];case 1:return d=p.sent(),n&&l?[4,Tu.getManager(s).removeModel(u)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[4,i.save(d)];case 4:return f=p.sent(),!n||l?[3,6]:[4,Tu.getManager(s).removeModel(u)];case 5:p.sent(),p.label=6;case 6:return[2,f.modelArtifactsInfo]}}))}))}var Al="models_store",wu="model_info_store";function sz(){if(!Ce().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function pS(t){var e=t.result;e.createObjectStore(Al,{keyPath:"modelPath"}),e.createObjectStore(wu,{keyPath:"modelPath"})}var Td=(function(){function t(e){if(this.indexedDB=sz(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},t.prototype.load=function(){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},t.prototype.databaseAction=function(e,n){var r=this;return new Promise((function(o,a){var i=r.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return pS(i)},i.onsuccess=function(){var s=i.result;if(n==null){var u=s.transaction(Al,"readonly"),l=u.objectStore(Al).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(y){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var d,f=lm(n),p=s.transaction(wu,"readwrite"),m=p.objectStore(wu),g=m.put({modelPath:r.modelPath,modelArtifactsInfo:f});g.onsuccess=function(){var y=(d=s.transaction(Al,"readwrite")).objectStore(Al).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});y.onsuccess=function(){return o({modelArtifactsInfo:f})},y.onerror=function(b){var S=(m=p.objectStore(wu)).delete(r.modelPath);S.onsuccess=function(){return s.close(),a(y.error)},S.onerror=function(C){return s.close(),a(y.error)}}},g.onerror=function(y){return s.close(),a(g.error)},p.oncomplete=function(){d==null?s.close():d.oncomplete=function(){return s.close()}}}},i.onerror=function(s){return a(i.error)}}))},t.URL_SCHEME="indexeddb://",t})(),MM=function(t){return Ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Td.URL_SCHEME)?(e=t.slice(Td.URL_SCHEME.length),new Td(e)):null;var e};Lo.registerSaveRouter(MM),Lo.registerLoadRouter(MM);var Xwe=(function(){function t(){this.indexedDB=sz()}return t.prototype.listModels=function(){return Ye(this,void 0,void 0,(function(){var e=this;return Qe(this,(function(n){return[2,new Promise((function(r,o){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return pS(a)},a.onsuccess=function(){var i=a.result,s=i.transaction(wu,"readonly"),u=s.objectStore(wu).getAll();u.onsuccess=function(){for(var l={},d=0,f=u.result;d<f.length;d++){var p=f[d];l[p.modelPath]=p.modelArtifactsInfo}r(l)},u.onerror=function(l){return i.close(),o(u.error)},s.oncomplete=function(){return i.close()}},a.onerror=function(i){return o(a.error)}}))]}))}))},t.prototype.removeModel=function(e){return Ye(this,void 0,void 0,(function(){var n=this;return Qe(this,(function(r){var o;return e=(o=e).startsWith(Td.URL_SCHEME)?o.slice(Td.URL_SCHEME.length):o,[2,new Promise((function(a,i){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return pS(s)},s.onsuccess=function(){var u,l=s.result,d=l.transaction(wu,"readwrite"),f=d.objectStore(wu),p=f.get(e);p.onsuccess=function(){if(p.result==null)return l.close(),i(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var m=f.delete(e),g=function(){var y=(u=l.transaction(Al,"readwrite")).objectStore(Al).delete(e);y.onsuccess=function(){return a(p.result.modelArtifactsInfo)},y.onerror=function(b){return i(p.error)}};m.onsuccess=g,m.onerror=function(y){return g(),l.close(),i(p.error)}},p.onerror=function(m){return l.close(),i(p.error)},d.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return i(s.error)}}))]}))}))},t})();if(Ce().getBool("IS_BROWSER"))try{Tu.registerManager(Td.URL_SCHEME,new Xwe)}catch{}var ls="/",ud="tensorflowjs_models",uz="info",Kwe="model_topology",Ywe="weight_specs",Qwe="weight_data",Jwe="model_metadata";function lz(t){return{info:[ud,t,uz].join(ls),topology:[ud,t,Kwe].join(ls),weightSpecs:[ud,t,Ywe].join(ls),weightData:[ud,t,Qwe].join(ls),modelMetadata:[ud,t,Jwe].join(ls)}}function Zwe(t){var e=t.split(ls);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(ls)}var Ad=(function(){function t(e){if(!Ce().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=lz(this.modelPath)}return t.prototype.save=function(e){return Ye(this,void 0,void 0,(function(){var n,r,o;return Qe(this,(function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=lm(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(function(i){if(hS)return Buffer.from(i).toString("base64");for(var s=new Uint8Array(i),u="",l=0,d=s.length;l<d;l++)u+=String.fromCharCode(s[l]);return btoa(u)})(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]}))}))},t.prototype.load=function(){return Ye(this,void 0,void 0,(function(){var e,n,r,o,a,i,s;return Qe(this,(function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(a),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,n.userDefinedMetadata=i.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=(function(l){if(hS){var d=Buffer.from(l,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var f=atob(l),p=new Uint8Array(f.length),m=0;m<f.length;++m)p.set([f.charCodeAt(m)],m);return p.buffer})(s),[2,n]}))}))},t.URL_SCHEME="localstorage://",t})(),OM=function(t){return Ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ad.URL_SCHEME)?(e=t.slice(Ad.URL_SCHEME.length),new Ad(e)):null;var e};Lo.registerSaveRouter(OM),Lo.registerLoadRouter(OM);var e2e=(function(){function t(){K(Ce().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),K(typeof window>"u"||window.localStorage!==void 0,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return t.prototype.listModels=function(){return Ye(this,void 0,void 0,(function(){var e,n,r,o,a,i;return Qe(this,(function(s){for(e={},n=ud+ls,r=ls+uz,o=0;o<this.LS.length;++o)(a=this.LS.key(o)).startsWith(n)&&a.endsWith(r)&&(i=Zwe(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]}))}))},t.prototype.removeModel=function(e){return Ye(this,void 0,void 0,(function(){var n,r;return Qe(this,(function(o){var a;if(e=(a=e).startsWith(Ad.URL_SCHEME)?a.slice(Ad.URL_SCHEME.length):a,n=lz(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]}))}))},t})();if(Ce().getBool("IS_BROWSER"))try{Tu.registerManager(Ad.URL_SCHEME,new e2e)}catch{}var t2e="model",n2e=".json",r2e=".weights.bin";function PM(t){return new Promise((function(e){return setTimeout(e)})).then(t)}var Bw=(function(){function t(e){if(!Ce().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=t2e),this.modelTopologyFileName=e+n2e,this.weightDataFileName=e+r2e}return t.prototype.save=function(e){return Ye(this,void 0,void 0,(function(){var n,r,o,a,i,s;return Qe(this,(function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,[4,PM((function(){return i.dispatchEvent(new MouseEvent("click"))}))];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,PM((function(){return s.dispatchEvent(new MouseEvent("click"))}))]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:lm(e)}]}}))}))},t.URL_SCHEME="downloads://",t})(),o2e=(function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return Ye(this,void 0,void 0,(function(){var e,n,r=this;return Qe(this,(function(o){return e=this.files[0],n=this.files.slice(1),[2,new Promise((function(a,i){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),d=l.modelTopology;if(d!=null){n.length===0&&a({modelTopology:d});var f=l.weightsManifest;if(f!=null){var p;try{p=r.checkManifestAndWeightFiles(f,n)}catch(b){return void i(b)}var m=[],g=[],y=[];f.forEach((function(b){b.paths.forEach((function(S){g.push(S),y.push(null)})),m.push.apply(m,b.weights)})),f.forEach((function(b){b.paths.forEach((function(S){var C=new FileReader;C.onload=function(E){var _=E.target.result,T=g.indexOf(S);y[T]=_,y.indexOf(null)===-1&&a({modelTopology:d,weightSpecs:m,weightData:dR(y),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},C.onerror=function(E){return i("Failed to weights data from file of path '"+S+"'.")},C.readAsArrayBuffer(p[S])}))}))}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)}))]}))}))},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],o=n.map((function(u){return kM(u.name)})),a={},i=0,s=e;i<s.length;i++)s[i].paths.forEach((function(u){var l=kM(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),o.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");a[u]=n[o.indexOf(l)]}));if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return a},t})();function FM(t,e,n,r){(function(a){K(a!=null&&Array.isArray(a)&&a.length>0,(function(){return"promises must be a none empty array"}))})(t),(function(a,i){K(a>=0&&a<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a})),K(i>=0&&i<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i})),K(i>=a,(function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+i}))})(n=n??0,r=r??1);var o=0;return Promise.all(t.map((function(a){return a.then((function(i){var s=n+ ++o/t.length*(r-n);return e(s),i})),a})))}function cz(t,e){return Ye(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,d;return Qe(this,(function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?Ce().platform.fetch:e.fetchFunc,r=t.map((function(p){return n(p,e.requestInit,{isBinary:!0})})),o=0,a=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=f.sent(),[3,4];case 2:return[4,FM(r,e.onProgress,o,a)];case 3:i=f.sent(),f.label=4;case 4:return s=i.map((function(p){return p.arrayBuffer()})),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return d=f.sent(),[3,8];case 6:return[4,FM(s,e.onProgress,u,l)];case 7:d=f.sent(),f.label=8;case 8:return[2,d]}}))}))}function BM(t){var e=this;return function(n,r,o){return r===void 0&&(r=""),Ye(e,void 0,void 0,(function(){var a,i,s,u,l,d,f,p,m,g;return Qe(this,(function(y){switch(y.label){case 0:if(a=n.map((function(){return!1})),i={},s=o!=null?o.map((function(){return!1})):[],u=[],n.forEach((function(b,S){var C=0;b.weights.forEach((function(E){var _="quantization"in E?E.quantization.dtype:E.dtype,T=fS[_]*Ke(E.shape),D=function(){a[S]=!0,i[S]==null&&(i[S]=[]),i[S].push({manifestEntry:E,groupOffset:C,sizeBytes:T})};o!=null?o.forEach((function(k,I){k===E.name&&(D(),s[I]=!0)})):D(),u.push(E.name),C+=T}))})),!s.every((function(b){return b})))throw l=o.filter((function(b,S){return!s[S]})),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return d=a.reduce((function(b,S,C){return S&&b.push(C),b}),[]),f=[],d.forEach((function(b){n[b].paths.forEach((function(S){var C=r+(r.endsWith("/")?"":"/")+S;f.push(C)}))})),[4,t(f)];case 1:return p=y.sent(),m={},g=0,d.forEach((function(b){for(var S=n[b].paths.length,C=0,E=0;E<S;E++)C+=p[g+E].byteLength;for(var _=new ArrayBuffer(C),T=new Uint8Array(_),D=0,k=0;k<S;k++){var I=new Uint8Array(p[g+k]);T.set(I,D),D+=I.byteLength}i[b].forEach((function(M){var O=iz(_.slice(M.groupOffset,M.groupOffset+M.sizeBytes),[M.manifestEntry]);for(var F in O)m[F]=O[F]})),g+=S})),[2,m]}}))}))}}Lo.registerSaveRouter((function(t){return Ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Bw.URL_SCHEME)?(function(e){return e===void 0&&(e="model"),new Bw(e)})(t.slice(Bw.URL_SCHEME.length)):null}));var dz=(function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(K(typeof n.fetchFunc=="function",(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Ce().platform.fetch,K(e!=null&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&K(e.length===2,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return Ye(this,void 0,void 0,(function(){var n,r,o,a;return Qe(this,(function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:lm(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}}))}))},t.prototype.load=function(){return Ye(this,void 0,void 0,(function(){var e,n,r,o,a,i,s,u,l,d,f,p;return Qe(this,(function(m){switch(m.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=m.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");m.label=2;case 2:return m.trys.push([2,4,,5]),[4,e.json()];case 3:return n=m.sent(),[3,5];case 4:throw m.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,a=n.weightsManifest,i=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,o==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:p=m.sent(),d=p[0],f=p[1],m.label=7;case 7:return[2,{modelTopology:o,weightSpecs:d,weightData:f,userDefinedMetadata:l,generatedBy:i,convertedBy:s,format:u}]}}))}))},t.prototype.loadWeights=function(e){return Ye(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,d,f,p;return Qe(this,(function(m){switch(m.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=(function(g){var y=g.lastIndexOf("/"),b=g.lastIndexOf("?"),S=g.substring(0,y),C=b>y?g.substring(b):"";return[S+"/",C]})(n),o=r[0],a=r[1],i=this.weightPathPrefix||o,s=[],u=0,l=e;u<l.length;u++)d=l[u],s.push.apply(s,d.weights);return f=[],e.forEach((function(g){g.paths.forEach((function(y){f.push(i+y+a)}))})),[4,cz(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return p=m.sent(),[2,[s,dR(p)]]}}))}))},t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function mS(t){return t.match(dz.URL_SCHEME_REGEX)!=null}var LM=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every((function(n){return mS(n)})):mS(t))?vS(t,{onProgress:e}):null};function vS(t,e){return new dz(t,e)}Lo.registerSaveRouter(LM),Lo.registerLoadRouter(LM);var Lw=(function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(e){return[2,this.modelArtifacts]}))}))},t})(),a2e=(function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){return[2,this.saveHandler(e)]}))}))},t})(),fz=Object.freeze({browserFiles:function(t){return new o2e(t)},browserHTTPRequest:function(t,e){return vS(t,e)},concatenateArrayBuffers:dR,decodeWeights:iz,encodeWeights:function(t,e){return Ye(this,void 0,void 0,(function(){var n,r,o,a,i,s=this;return Qe(this,(function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(t)?t.map((function(l){return l.name})):Object.keys(t),a=function(l){var d=o[l],f=Array.isArray(t)?t[l].tensor:t[d];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+f.dtype);var p={name:d,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var m=new Promise((function(g){return Ye(s,void 0,void 0,(function(){var y,b,S,C,E,_,T;return Qe(this,(function(D){switch(D.label){case 0:return[4,f.bytes()];case 1:for(y=D.sent(),b=y.reduce((function(k,I){return k+I.length}),0)+Ey*y.length,S=new Uint8Array(b),C=0,E=0;E<y.length;E++)_=y[E],T=new Uint8Array(new Uint32Array([_.length]).buffer),S.set(T,C),C+=Ey,S.set(_,C),C+=_.length;return g(S),[2]}}))}))}));r.push(m)}else r.push(f.data());e!=null&&(p.group=e),n.push(p)},i=0;i<o.length;++i)a(i);return[4,Promise.all(r)];case 1:return[2,{data:qwe(u.sent()),specs:n}]}}))}))},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new Lw(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Lw({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Lw({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return Lo.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:lm,getSaveHandlers:function(t){return Lo.getSaveHandlers(t)},http:vS,isHTTPScheme:mS,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),Ye(this,void 0,void 0,(function(){return Qe(this,(function(o){return[2,BM((function(a){return cz(a,{requestInit:r})}))(t,e,n)]}))}))},registerLoadRouter:function(t){return Lo.registerLoadRouter(t)},registerSaveRouter:function(t){return Lo.registerSaveRouter(t)},weightsLoaderFactory:BM,withSaveHandler:function(t){return new a2e(t)},copyModel:function(t,e){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){return[2,IM(t,e,!1)]}))}))},listModels:function(){return Ye(this,void 0,void 0,(function(){var t,e,n,r,o,a,i;return Qe(this,(function(s){switch(s.label){case 0:t=Tu.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(o=r[n],[4,Tu.getManager(o).listModels()]):[3,4];case 2:for(i in a=s.sent())e[o+_d+i]=a[i];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}}))}))},moveModel:function(t,e){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){return[2,IM(t,e,!0)]}))}))},removeModel:function(t){return Ye(this,void 0,void 0,(function(){var e;return Qe(this,(function(n){return e=Eg(t),[2,Tu.getManager(e.scheme).removeModel(e.path)]}))}))}}),Jc;te({confusionMatrix_:function(t,e,n){var r=X(t,"labels","confusionMatrix"),o=X(e,"predictions","confusionMatrix");K(n==null||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),K(r.rank===1,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),K(o.rank===1,(function(){return"Expected the rank of predictions to be 1, but got "+o.rank})),K(r.shape[0]===o.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."})),K(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var a=Sy(r.asType("int32"),n),i=Sy(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}});var i2e=te({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,a=!1,i=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)a=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);i=!0}if(o&&o&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(xL("FromPixels",oe.backendName)!=null)return oe.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],d=l[0],f=l[1];if(i?s=t.getContext("2d").getImageData(0,0,d,f).data:r||n?s=t.data:(a||o)&&(Jc==null&&(Jc=document.createElement("canvas").getContext("2d")),Jc.canvas.width=d,Jc.canvas.height=f,Jc.drawImage(t,0,0,d,f),s=Jc.getImageData(0,0,d,f).data),e===4)u=new Int32Array(s);else{var p=d*f;u=new Int32Array(p*e);for(var m=0;m<p;m++)for(var g=0;g<e;++g)u[m*e+g]=s[4*m+g]}return PL(u,[f,d,e],"int32")}}),hz=Object.freeze({toPixels:function(t,e){return Ye(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,d,f,p,m,g,y,b,S,C,E,_,T,D,k,I;return Qe(this,(function(M){switch(M.label){case 0:if(n=X(t,"img","toPixels"),t instanceof wn||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(i=n.rank===2?1:n.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return s=M.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(d=M.sent(),f=d[0],p=d[1],m=f[0],g=p[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(m<0||g>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+m+" - "+g+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(m<0||g>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+m+" - "+g+"].")}for(y=n.dtype==="float32"?255:1,b=new Uint8ClampedArray(a*o*4),S=0;S<o*a;++S)C=void 0,E=void 0,_=void 0,T=void 0,i===1?(C=s[S]*y,E=s[S]*y,_=s[S]*y,T=255):i===3?(C=s[3*S]*y,E=s[3*S+1]*y,_=s[3*S+2]*y,T=255):i===4&&(C=s[4*S]*y,E=s[4*S+1]*y,_=s[4*S+2]*y,T=s[4*S+3]*y),b[(D=4*S)+0]=Math.round(C),b[D+1]=Math.round(E),b[D+2]=Math.round(_),b[D+3]=Math.round(T);return e!=null&&(e.width=a,e.height=o,k=e.getContext("2d"),I=new ImageData(b,a,o),k.putImageData(I,0,0)),n!==t&&n.dispose(),[2,b]}}))}))},fromPixels:i2e}),s2e=(function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t})(),u2e=(function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t})();function ac(t){K(t.className!=null,(function(){return"Class being registered does not have the static className property defined."})),K(typeof t.className=="string",(function(){return"className is required to be a string, but got type "+typeof t.className})),K(t.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),u2e.register(t)}var ic=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Ka(e,t),e.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var a=this.computeGradients(n,o),i=a.value,s=a.grads;if(o!=null){var u=o.map((function(l){return{name:l.name,tensor:s[l.name]}}));this.applyGradients(u)}else this.applyGradients(s);return vo(s),r?i:(i.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return D0e(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&vo(this.iterations_)},e.prototype.saveIterations=function(){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:tt(this.iterations_,"int32")}]}))}))},e.prototype.getWeights=function(){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},e.prototype.setWeights=function(n){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},e.prototype.extractIterations=function(n){return Ye(this,void 0,void 0,(function(){var r;return Qe(this,(function(o){switch(o.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,n.slice(1)]}}))}))},e})(s2e);Object.defineProperty(ic,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var l2e=(function(t){function e(n,r,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=n,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],o==null&&(a.epsilon=oe.backend.epsilon()),a}return Ka(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=oe.registeredVariables[o];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:o+"/accum_grad",variable:tn((function(){return $t(i).variable(!1)}))}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:o+"/accum_var",variable:tn((function(){return $t(i).variable(!1)}))});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[a].variable,l=r.accumulatedUpdates[a].variable;tn((function(){var d=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),p=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(d),l.assign(p);var m=f.mul(-r.learningRate).add(i);i.assign(m)}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(vo(this.accumulatedGrads.map((function(n){return n.variable}))),vo(this.accumulatedUpdates.map((function(n){return n.variable}))))},e.prototype.getWeights=function(){return Ye(this,void 0,void 0,(function(){var n;return Qe(this,(function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(o){return{name:o.originalName,tensor:o.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Ye(this,void 0,void 0,(function(){var r;return Qe(this,(function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),this.accumulatedUpdates=n.slice(r,2*r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e})(ic);ac(l2e);var c2e=(function(t){function e(n,r){r===void 0&&(r=.1);var o=t.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return Ka(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=oe.registeredVariables[o];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:o+"/accumulator",variable:tn((function(){return Ol(i.shape,r.initialAccumulatorValue).variable(!1)}))});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[a].variable;tn((function(){var l=u.add(s.square());u.assign(l);var d=s.div(l.add(oe.backend.epsilon()).sqrt()).mul(-r.learningRate).add(i);i.assign(d)}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&vo(this.accumulatedGrads.map((function(n){return n.variable})))},e.prototype.getWeights=function(){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e})(ic);ac(c2e);var d2e=(function(t){function e(n,r,o,a){a===void 0&&(a=null);var i=t.call(this)||this;return i.learningRate=n,i.beta1=r,i.beta2=o,i.epsilon=a,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],tn((function(){i.accBeta1=tt(r).variable(),i.accBeta2=tt(o).variable()})),a==null&&(i.epsilon=oe.backend.epsilon()),i}return Ka(e,t),e.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n);tn((function(){var a=ja(1,r.accBeta1),i=ja(1,r.accBeta2);o.forEach((function(s,u){var l=oe.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:tn((function(){return $t(l).variable(!1)}))}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:tn((function(){return $t(l).variable(!1)}))});var d=Array.isArray(n)?n[u].tensor:n[s];if(d!=null){var f=r.accumulatedFirstMoment[u].variable,p=r.accumulatedSecondMoment[u].variable,m=f.mul(r.beta1).add(d.mul(1-r.beta1)),g=p.mul(r.beta2).add(d.square().mul(1-r.beta2)),y=m.div(a),b=g.div(i);f.assign(m),p.assign(g);var S=y.div(b.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(S)}})),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&vo(this.accumulatedFirstMoment.map((function(n){return n.variable}))),this.accumulatedSecondMoment!=null&&vo(this.accumulatedSecondMoment.map((function(n){return n.variable})))},e.prototype.getWeights=function(){return Ye(this,void 0,void 0,(function(){var n;return Qe(this,(function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(o){return{name:o.originalName,tensor:o.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Ye(this,void 0,void 0,(function(){var r,o=this;return Qe(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),tn((function(){o.accBeta1.assign(gy(o.beta1,o.iterations_+1)),o.accBeta2.assign(gy(o.beta2,o.iterations_+1))})),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),this.accumulatedSecondMoment=n.slice(r,2*r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e})(ic);ac(d2e);var f2e=(function(t){function e(n,r,o,a,i){a===void 0&&(a=null),i===void 0&&(i=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=a,s.decay=i,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],tn((function(){s.iteration=tt(0).variable(),s.accBeta1=tt(r).variable()})),a==null&&(s.epsilon=oe.backend.epsilon()),s}return Ka(e,t),e.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n);tn((function(){var a=ja(1,r.accBeta1),i=Pu(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach((function(s,u){var l=oe.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:$t(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:$t(l).variable(!1)});var d=Array.isArray(n)?n[u].tensor:n[s];if(d!=null){var f=r.accumulatedFirstMoment[u].variable,p=r.accumulatedWeightedInfNorm[u].variable,m=f.mul(r.beta1).add(d.mul(1-r.beta1)),g=p.mul(r.beta2),y=d.abs(),b=g.maximum(y);f.assign(m),p.assign(b);var S=i.div(a).mul(m.div(b.add(r.epsilon))).add(l);l.assign(S)}})),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&vo(this.accumulatedFirstMoment.map((function(n){return n.variable}))),this.accumulatedWeightedInfNorm!=null&&vo(this.accumulatedWeightedInfNorm.map((function(n){return n.variable})))},e.prototype.getWeights=function(){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},e.prototype.setWeights=function(n){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(r){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e})(ic);ac(f2e);var pz=(function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Ka(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=Array.isArray(n)?n[a].tensor:n[o];if(i!=null){var s=oe.registeredVariables[o];tn((function(){var u=r.c.mul(i).add(s);s.assign(u)}))}})),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=xye(tt(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}}))}))},e.prototype.setWeights=function(n){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e})(ic);ac(pz);var h2e=(function(t){function e(n,r,o){o===void 0&&(o=!1);var a=t.call(this,n)||this;return a.learningRate=n,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=tt(a.momentum),a}return Ka(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=oe.registeredVariables[o];r.accumulations[a]==null&&(r.accumulations[a]={originalName:o+"/momentum",variable:tn((function(){return $t(i).variable(!1)}))});var s=r.accumulations[a].variable,u=Array.isArray(n)?n[a].tensor:n[o];u!=null&&tn((function(){var l,d=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(d.mul(r.m))).add(i):r.c.mul(d).add(i),s.assign(d),i.assign(l)}))})),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&vo(this.accumulations.map((function(n){return n.variable})))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Ye(this,void 0,void 0,(function(){return Qe(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e})(pz);ac(h2e);var p2e=(function(t){function e(n,r,o,a,i){r===void 0&&(r=.9),o===void 0&&(o=0),a===void 0&&(a=null),i===void 0&&(i=!1);var s=t.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=i,a==null&&(s.epsilon=oe.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Ka(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n)).forEach((function(o,a){var i=oe.registeredVariables[o];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:o+"/rms",variable:tn((function(){return $t(i).variable(!1)}))}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:o+"/momentum",variable:tn((function(){return $t(i).variable(!1)}))}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:o+"/mg",variable:tn((function(){return $t(i).variable(!1)}))});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,l=r.accumulatedMoments[a].variable;tn((function(){var d=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[a].variable,p=f.mul(r.decay).add(s.mul(1-r.decay)),m=l.mul(r.momentum).add(s.mul(r.learningRate).div(d.sub(p.square().add(r.epsilon)).sqrt()));u.assign(d),f.assign(p),l.assign(m);var g=i.sub(m);i.assign(g)}else{var y=u.mul(r.decay).add(s.square().mul(1-r.decay));m=l.mul(r.momentum).add(s.mul(r.learningRate).div(y.add(r.epsilon).sqrt())),u.assign(y),l.assign(m),g=i.sub(m),i.assign(g)}}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&vo(this.accumulatedMeanSquares.map((function(n){return n.variable}))),this.accumulatedMeanGrads!=null&&this.centered&&vo(this.accumulatedMeanGrads.map((function(n){return n.variable}))),this.accumulatedMoments!=null&&vo(this.accumulatedMoments.map((function(n){return n.variable})))},e.prototype.getWeights=function(){return Ye(this,void 0,void 0,(function(){var n;return Qe(this,(function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(o){return{name:o.originalName,tensor:o.variable}})))]}}))}))},e.prototype.setWeights=function(n){return Ye(this,void 0,void 0,(function(){var r;return Qe(this,(function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),this.accumulatedMoments=n.slice(r,2*r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}))),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e})(ic);ac(p2e);wn.prototype.add=function(t){return wa(this,t)},wn.prototype.broadcastTo=function(t){return _j(this,t)},wn.prototype.div=function(t){return Pu(this,t)},wn.prototype.divNoNan=function(t){return Nj(this,t)},wn.prototype.squaredDifference=function(t){return Mj(this,t)},wn.prototype.tile=function(t){return Rd(this,t)},wn.prototype.oneHot=function(t,e,n){return e===void 0&&(e=1),n===void 0&&(n=0),Sy(this,t,e,n)},wn.prototype.transpose=function(t){return Ma(this,t)},wn.prototype.pad=function(t,e){return Is(this,t,e)},wn.prototype.batchNorm=function(t,e,n,r,o){return sm(this,t,e,n,r,o)},Se=Iwe;var Pl=(function(){function t(e,n){if(!Fl(e)||!Fl(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t})(),Yt=(function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t})();function X0(t,e){return t instanceof wn&&t.shape.length===e}function m2e(t){return X0(t,2)}function K0(t){return X0(t,3)}function Au(t){return X0(t,4)}function v2e(t){return t%1!==0}function jM(t){return t%2===0}function fR(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function zM(t){return t&&t.width&&t.height}function g2e(t,e){var n=t.width,r=t.height,o=e/Math.max(r,n);return new Pl(Math.round(n*o),Math.round(r*o))}function hR(t){return t.reduce(function(e,n){return e.add(n)},new Yt(0,0)).div(new Yt(t.length,t.length))}function bp(t,e,n){return Array(t).fill(0).map(function(r,o){return e+o*n})}function Fl(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function UM(t){return Fl(t)&&0<=t&&t<=1}var Ri=(function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},o=[r.left,r.top,r.right,r.bottom].every(Fl),a=[r.x,r.y,r.width,r.height].every(Fl);if(!a&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=i[0],u=i[1],l=i[2],d=i[3];t.assertIsValidBox({x:s,y:u,width:l,height:d},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=d}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Fl)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new Yt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new Yt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new Yt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new Yt(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(i){return Math.round(i)}),n=e[0],r=e[1],o=e[2],a=e[3];return new t({x:n,y:r,width:o,height:a})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(i){return Math.floor(i)}),n=e[0],r=e[1],o=e[2],a=e[3];return new t({x:n,y:r,width:o,height:a})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,o=e.width,a=e.height,i=Math.abs(o-a);return o<a&&(n-=i/2,o+=i),a<o&&(r-=i/2,a+=i),new t({x:n,y:r,width:o,height:a})},t.prototype.rescale=function(e){var n=zM(e)?e.width:e,r=zM(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],o=r[0],a=r[1],i=r[2],s=r[3];return new t({x:o,y:a,width:i,height:s})},t.prototype.clipAtImageBorders=function(e,n){var r=this,o=r.x,a=r.y,i=r.right,s=r.bottom,u=Math.max(o,0),l=Math.max(a,0),d=i-u,f=s-l,p=Math.min(d,e-u),m=Math.min(f,n-l);return new t({x:u,y:l,width:p,height:m}).floor()},t.prototype.shift=function(e,n){var r=this,o=r.width,a=r.height,i=this.x+e,s=this.y+n;return new t({x:i,y:s,width:o,height:a})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,o=this.height+1,a=1,i=1,s=r,u=o,l=this.left,d=this.top,f=this.right,p=this.bottom;return f>n&&(s=-f+n+r,f=n),p>e&&(u=-p+e+o,p=e),l<1&&(u=2-l,l=1),d<1&&(u=2-d,d=1),{dy:i,edy:u,dx:a,edx:s,y:d,ey:p,x:l,ex:f,w:r,h:o}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t})(),Y0=(function(t){nm(e,t);function e(n,r,o,a,i){return i===void 0&&(i=!1),t.call(this,{left:n,top:r,right:o,bottom:a},i)||this}return e})(Ri),WM=(function(t){nm(e,t);function e(n,r){var o=t.call(this,n)||this;return o._label=r,o}return e.assertIsValidLabeledBox=function(n,r){if(Ri.assertIsValidBox(n,r),!Fl(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e})(Ri),mz=(function(){function t(e,n,r,o,a){this._imageDims=new Pl(a.width,a.height),this._score=e,this._classScore=n,this._className=r,this._box=new Ri(o).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new Ri(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t})();(function(t){nm(e,t);function e(n,r,o,a){var i=t.call(this,n,r)||this;return i._score=o,i._classScore=a,i}return e.assertIsValidPredictedBox=function(n,r){if(WM.assertIsValidLabeledBox(n,r),!UM(n.score)||!UM(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(WM);var pR=(function(t){nm(e,t);function e(n,r,o,a,i){return i===void 0&&(i=!1),t.call(this,{x:n,y:r,width:o,height:a},i)||this}return e})(Ri);function vz(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function gz(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(o,a){t.readFile(r,function(i,s){return i?a(i):o(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function yz(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=gz();return ay({Canvas:t||(function(){function i(){}return i})(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||(function(){function i(){}return i})(),Image:e||(function(){function i(){}return i})(),ImageData:global.ImageData||(function(){function i(){}return i})(),Video:global.HTMLVideoElement||(function(){function i(){}return i})(),createCanvasElement:n,createImageElement:r,fetch:o},a)}function bz(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function xz(){return typeof global=="object"&&typeof require=="function"&&typeof s5<"u"&&typeof process<"u"&&!!process.version}var ar;function y2e(){if(!ar)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return ar}function gS(t){ar=t}function mR(){bz()&&gS(vz()),xz()&&gS(yz())}function b2e(t){if(ar||mR(),!ar)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?ar.Canvas:e,r=t.Image,o=r===void 0?ar.Image:r;ar.Canvas=n,ar.Image=o,ar.createCanvasElement=t.createCanvasElement||(function(){return new n}),ar.createImageElement=t.createImageElement||(function(){return new o}),ar.ImageData=t.ImageData||ar.ImageData,ar.Video=t.Video||ar.Video,ar.fetch=t.fetch||ar.fetch,ar.readFile=t.readFile||ar.readFile}var Wr={getEnv:y2e,setEnv:gS,initialize:mR,createBrowserEnv:vz,createFileSystem:gz,createNodejsEnv:yz,monkeyPatch:b2e,isBrowser:bz,isNodejs:xz};mR();function vR(t){return!Wr.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function _i(t){var e=Wr.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var o=vR(t);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=o.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var ds;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(ds||(ds={}));var gR=(function(){function t(e){e===void 0&&(e={});var n=e.anchorPosition,r=e.backgroundColor,o=e.fontColor,a=e.fontSize,i=e.fontStyle,s=e.padding;this.anchorPosition=n||ds.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=o||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=s||4}return t})(),yR=(function(){function t(e,n,r){r===void 0&&(r={}),this.text=typeof e=="string"?[e]:e instanceof t?e.text:e,this.anchor=n,this.options=new gR(r)}return t.prototype.measureWidth=function(e){var n=this.options.padding;return this.text.map(function(r){return e.measureText(r).width}).reduce(function(r,o){return r<o?o:r},0)+2*n},t.prototype.measureHeight=function(){var e=this.options,n=e.fontSize,r=e.padding;return this.text.length*n+2*r},t.prototype.getUpperLeft=function(e,n){var r=this.options.anchorPosition,o=r===ds.BOTTOM_RIGHT||r===ds.TOP_RIGHT,a=r===ds.BOTTOM_LEFT||r===ds.BOTTOM_RIGHT,i=this.measureWidth(e),s=this.measureHeight(),u=o?this.anchor.x-i:this.anchor.x,l=a?this.anchor.y-s:this.anchor.y;if(n){var d=n.width,f=n.height,p=Math.max(Math.min(u,d-i),0),m=Math.max(Math.min(l,f-s),0);return{x:p,y:m}}return{x:u,y:l}},t.prototype.draw=function(e){var n=vR(e),r=_i(n),o=this.options,a=o.backgroundColor,i=o.fontColor,s=o.fontSize,u=o.fontStyle,l=o.padding;r.font=s+"px "+u;var d=this.measureWidth(r),f=this.measureHeight();r.fillStyle=a;var p=this.getUpperLeft(r,n);r.fillRect(p.x,p.y,d,f),r.fillStyle=i,this.text.forEach(function(m,g){var y=l+p.x,b=l+p.y+(g+1)*s;r.fillText(m,y,b)})},t})(),wz=(function(){function t(e){e===void 0&&(e={});var n=e.boxColor,r=e.lineWidth,o=e.label,a=e.drawLabelOptions;this.boxColor=n||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=o;var i={anchorPosition:ds.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new gR(Object.assign({},i,a))}return t})(),Sz=(function(){function t(e,n){n===void 0&&(n={}),this.box=new Ri(e),this.options=new wz(n)}return t.prototype.draw=function(e){var n=_i(e),r=this.options,o=r.boxColor,a=r.lineWidth,i=this.box,s=i.x,u=i.y,l=i.width,d=i.height;n.strokeStyle=o,n.lineWidth=a,n.strokeRect(s,u,l,d);var f=this.options.label;f&&new yR([f],{x:s-a/2,y:u},this.options.drawLabelOptions).draw(e)},t})();const x2e=Object.freeze(Object.defineProperty({__proto__:null,get AnchorPosition(){return ds},DrawBox:Sz,DrawBoxOptions:wz,DrawTextField:yR,DrawTextFieldOptions:gR},Symbol.toStringTag,{value:"Module"}));function za(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),tn(function(){var o=wa(oc(t,e.filters,[1,1],n),e.bias);return r?$0(o):o})}function Os(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function Q0(t,e){return function(n,r,o,a){var i=di(t(n*r*o*o),[o,o,n,r]),s=Ha(t(r));return e.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:s}}}function bR(t,e){return function(n,r,o){var a=Ml(t(n*r),[n,r]),i=Ha(t(r));return e.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:a,bias:i}}}var Cz=(function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t})();function xR(t,e){return function(n,r,o){var a=di(t(9*n),[3,3,n,1]),i=di(t(n*r),[1,1,n,r]),s=Ha(t(r));return e.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new Cz(a,i,s)}}function wR(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),o=t(e+"/bias",1);return new Cz(n,r,o)}}function $u(t,e){return function(n,r,o){var a=t[n];if(!X0(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return e.push({originalPath:n,paramPath:o||n}),a}}function Ps(t){var e=t;function n(o){var a=e.slice(0,o);return e=e.slice(o),a}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function Ez(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var o=t.split("/").filter(function(s){return s}),a=t.endsWith(".json")?o[o.length-1]:n,i=r+(t.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return i=t.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:i==="/"?"/"+a:i+"/"+a}}function Rz(t){var e=Wr.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function w2e(t){return new Promise(function(e,n){if(t instanceof Wr.getEnv().Canvas||Rz(t))return e();function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",o),e(a))}function o(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",o),n(a))}t.addEventListener("load",r),t.addEventListener("error",o)})}function _z(t){var e=Wr.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new Pl(t.naturalWidth,t.naturalHeight):t instanceof r?new Pl(t.videoWidth,t.videoHeight):new Pl(t.width,t.height)}function J0(t){var e=t.width,n=t.height,r=Wr.getEnv().createCanvasElement,o=r();return o.width=e,o.height=n,o}function SR(t,e){var n=Wr.getEnv().ImageData;if(!(t instanceof n)&&!Rz(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=_z(t),o=r.width,a=r.height,i=J0({width:o,height:a});return t instanceof n?_i(i).putImageData(t,0,0):_i(i).drawImage(t,0,0,o,a),i}function S2e(t,e){return ha(this,void 0,void 0,function(){var n,r;return pa(this,function(o){switch(o.label){case 0:return n=Wr.getEnv().fetch,[4,n(t,e)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function C2e(t){return ha(this,void 0,void 0,function(){return pa(this,function(e){switch(e.label){case 0:return[4,S2e(t)];case 1:return[2,e.sent().json()]}})})}function E2e(t,e){return ha(this,void 0,void 0,function(){var n,r,o,a,i,s;return pa(this,function(u){switch(u.label){case 0:return n=Wr.getEnv().createCanvasElement(),r=t.shape.slice(Au(t)?1:0),o=r[0],a=r[1],i=r[2],s=tn(function(){return t.as3D(o,a,i).toInt()}),[4,hz.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function R2e(t,e,n){n===void 0&&(n=!1);var r=Wr.getEnv(),o=r.Image,a=r.Canvas;if(!(t instanceof o||t instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=_z(t),s=e/Math.max(i.height,i.width),u=s*i.width,l=s*i.height,d=J0({width:e,height:e}),f=t instanceof a?t:SR(t),p=Math.abs(u-l)/2,m=n&&u<l?p:0,g=n&&l<u?p:0;return _i(d).drawImage(f,m,g,u,l),d}function VM(t){var e=Wr.getEnv(),n=e.Image,r=e.Canvas,o=e.Video;return t instanceof n||t instanceof r||t instanceof o}function _2e(t,e){return ha(this,void 0,void 0,function(){var n,r,o,a;return pa(this,function(i){switch(i.label){case 0:return n=Ez(t,e),r=n.manifestUri,o=n.modelBaseUri,[4,C2e(r)];case 1:return a=i.sent(),[2,fz.loadWeights(a,o)]}})})}function T2e(t,e){return e===void 0&&(e=!1),tn(function(){var n=t.shape.slice(1),r=n[0],o=n[1];if(r===o)return t;var a=Math.abs(r-o),i=Math.round(a*(e?.5:1)),s=r>o?2:1,u=function(m){var g=t.shape.slice();return g[s]=m,Ol(g,0)},l=u(i),d=a-l.shape[s],f=e&&d?u(d):null,p=[f,t,l].filter(function(m){return!!m}).map(function(m){return m.toFloat()});return xa(p,s)})}var Ry=(function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(o,a){if(K0(o)){r._imageTensors[a]=o,r._inputDimensions[a]=o.shape;return}if(Au(o)){var i=o.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+i+" passed, but not supported in input array");r._imageTensors[a]=o,r._inputDimensions[a]=o.shape.slice(1);return}var s=o instanceof Wr.getEnv().Canvas?o:SR(o);r._canvases[a]=s,r._inputDimensions[a]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return bp(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return g2e({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,tn(function(){var o=bp(r.batchSize,0,1).map(function(i){var s=r.getInput(i);if(s instanceof wn){var u=Au(s)?s:s.expandDims();return u=T2e(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=tz.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(s instanceof Wr.getEnv().Canvas)return hz.fromPixels(R2e(s,e,n));throw new Error("toBatchTensor - at batchIdx "+i+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),a=Ou(o.map(function(i){return i.toFloat()})).as4D(r.batchSize,e,e,3);return a})},t})();function yr(t){return ha(this,void 0,void 0,function(){var e,n,r;return pa(this,function(o){switch(o.label){case 0:if(t instanceof Ry)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(a){return Array.isArray(t)?" at input index "+a+":":""},r=e.map(vR),r.forEach(function(a,i){if(!VM(a)&&!K0(a)&&!Au(a))throw typeof e[i]=="string"?new Error("toNetInput -"+n(i)+" string passed, but could not resolve HTMLElement for element id "+e[i]):new Error("toNetInput -"+n(i)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Au(a)){var s=a.shape[0];if(s!==1)throw new Error("toNetInput -"+n(i)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(a){return VM(a)&&w2e(a)}))];case 1:return o.sent(),[2,new Ry(r,Array.isArray(t))]}})})}var Fs=(function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;return r[o]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),o=r.obj,a=r.objProp;o[a].dispose(),o[a]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof qd})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof qd)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,o=n.tensor;e.reassignParamFromPath(r,o.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,o=n.tensor,a=Rr(o.dataSync());o.dispose(),e.reassignParamFromPath(r,a)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return ha(this,void 0,void 0,function(){return pa(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return ha(this,void 0,void 0,function(){var n;return pa(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,_2e(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return ha(this,void 0,void 0,function(){var n,r,o,a,i,s,u,l,d,f;return pa(this,function(p){switch(p.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Wr.getEnv().readFile,r=Ez(e,this.getDefaultModelName()),o=r.manifestUri,a=r.modelBaseUri,i=function(m){return Promise.all(m.map(function(g){return n(g).then(function(y){return y.buffer})}))},s=fz.weightsLoaderFactory(i),d=(l=JSON).parse,[4,n(o)];case 1:return u=d.apply(l,[p.sent().toString()]),[4,s(u,a)];case 2:return f=p.sent(),this.loadFromWeightMap(f),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(a,i){if(!a.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property "+i+", for path "+e);return{obj:a.nextObj,objProp:i,nextObj:a.nextObj[i]}},{nextObj:this.params}),r=n.obj,o=n.objProp;if(!r||!o||!(r[o]instanceof wn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:o}},t})();function A2e(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),o=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),a=r*o;return n?a/(t.area+e.area-a):a/Math.min(t.area,e.area)}function xp(t,e,n,r){r===void 0&&(r=!0);for(var o=e.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),a=[],i=function(){var s=o.pop();a.push(s);for(var u=o,l=[],d=0;d<u.length;d++){var f=u[d],p=t[s],m=t[f];l.push(A2e(p,m,r))}o=o.filter(function(g,y){return l[y]<=n})};o.length>0;)i();return a}function cm(t,e){return tn(function(){var n=e[0],r=e[1],o=e[2],a=Ol(mw(t.shape.slice(0,3),[1]),n),i=Ol(mw(t.shape.slice(0,3),[1]),r),s=Ol(mw(t.shape.slice(0,3),[1]),o),u=xa([a,i,s],3);return ja(t,u)})}function jw(t){return 1/(1+Math.exp(-t))}var ag=function(t){return typeof t=="number"};function N2e(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!ag(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return ag(e.x)&&ag(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(ag)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function CR(t){return tn(function(){var e=Un(t,tt(.10000000149011612));return wa($0(ja(t,e)),e)})}function cu(t,e){return tn(function(){var n=Is(t,[[0,0],[1,1],[1,1],[0,0]]);return n=oc(n,e.conv.filters,[1,1],"valid"),n=ja(n,e.bn.sub),n=Un(n,e.bn.truediv),n=wa(n,e.conv.bias),CR(n)})}function du(t,e){return tn(function(){var n=Is(t,[[0,0],[1,1],[1,1],[0,0]]);return n=Wj(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=wa(n,e.bias),CR(n)})}function D2e(t,e){var n=Q0(t,e);function r(i,s){var u=Ha(t(i)),l=Ha(t(i));return e.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function o(i,s,u){var l=n(i,s,3,u+"/conv"),d=r(s,u+"/bn");return{conv:l,bn:d}}var a=xR(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function k2e(t,e,n,r){var o=Ps(t),a=o.extractWeights,i=o.getRemainingWeights,s=[],u=D2e(a,s),l=u.extractConvParams,d=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,p;if(e.withSeparableConvs){var m=r[0],g=r[1],y=r[2],b=r[3],S=r[4],C=r[5],E=r[6],_=r[7],T=r[8],D=e.isFirstLayerConv2d?l(m,g,3,"conv0"):f(m,g,"conv0"),k=f(g,y,"conv1"),I=f(y,b,"conv2"),M=f(b,S,"conv3"),O=f(S,C,"conv4"),F=f(C,E,"conv5"),j=_?f(E,_,"conv6"):void 0,G=T?f(_,T,"conv7"):void 0,W=l(T||_||E,5*n,1,"conv8");p={conv0:D,conv1:k,conv2:I,conv3:M,conv4:O,conv5:F,conv6:j,conv7:G,conv8:W}}else{var m=r[0],g=r[1],y=r[2],b=r[3],S=r[4],C=r[5],E=r[6],_=r[7],T=r[8],D=d(m,g,"conv0"),k=d(g,y,"conv1"),I=d(y,b,"conv2"),M=d(b,S,"conv3"),O=d(S,C,"conv4"),F=d(C,E,"conv5"),j=d(E,_,"conv6"),G=d(_,T,"conv7"),W=l(T,5*n,1,"conv8");p={conv0:D,conv1:k,conv2:I,conv3:M,conv4:O,conv5:F,conv6:j,conv7:G,conv8:W}}if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:p,paramMappings:s}}function I2e(t,e){var n=$u(t,e);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function o(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function a(s){var u=o(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var i=wR(n);return{extractConvParams:o,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function M2e(t,e){var n=[],r=I2e(t,n),o=r.extractConvParams,a=r.extractConvWithBatchNormParams,i=r.extractSeparableConvParams,s;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;s={conv0:e.isFirstLayerConv2d?o("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:u>7?i("conv6"):void 0,conv7:u>8?i("conv7"):void 0,conv8:o("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:o("conv8")};return Os(t,n),{params:s,paramMappings:n}}var HM;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(HM||(HM={}));var ER=(function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t})(),Tz=(function(t){nm(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return N2e(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var o=cu(n,r.conv0);return o=To(o,[2,2],[2,2],"same"),o=cu(o,r.conv1),o=To(o,[2,2],[2,2],"same"),o=cu(o,r.conv2),o=To(o,[2,2],[2,2],"same"),o=cu(o,r.conv3),o=To(o,[2,2],[2,2],"same"),o=cu(o,r.conv4),o=To(o,[2,2],[2,2],"same"),o=cu(o,r.conv5),o=To(o,[2,2],[1,1],"same"),o=cu(o,r.conv6),o=cu(o,r.conv7),za(o,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var o=this.config.isFirstLayerConv2d?CR(za(n,r.conv0,"valid",!1)):du(n,r.conv0);return o=To(o,[2,2],[2,2],"same"),o=du(o,r.conv1),o=To(o,[2,2],[2,2],"same"),o=du(o,r.conv2),o=To(o,[2,2],[2,2],"same"),o=du(o,r.conv3),o=To(o,[2,2],[2,2],"same"),o=du(o,r.conv4),o=To(o,[2,2],[2,2],"same"),o=du(o,r.conv5),o=To(o,[2,2],[1,1],"same"),o=r.conv6?du(o,r.conv6):o,o=r.conv7?du(o,r.conv7):o,za(o,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var o=this,a=this.params;if(!a)throw new Error("TinyYolov2 - load model before inference");return tn(function(){var i=n.toBatchTensor(r,!1).toFloat();return i=o.config.meanRgb?cm(i,o.config.meanRgb):i,i=i.div(tt(256)),o.config.withSeparableConvs?o.runMobilenet(i,a):o.runTinyYolov2(i,a)})},e.prototype.forward=function(n,r){return ha(this,void 0,void 0,function(){var o;return pa(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,yr(n)];case 1:return[4,o.apply(this,[a.sent(),r])];case 2:return[2,a.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),ha(this,void 0,void 0,function(){var o,a,i,s,u,l,d,f,p,m,g,y,b,S,C=this;return pa(this,function(E){switch(E.label){case 0:return o=new ER(r),a=o.inputSize,i=o.scoreThreshold,[4,yr(n)];case 1:return s=E.sent(),[4,this.forwardInput(s,a)];case 2:return u=E.sent(),l=tn(function(){return L0(u)[0].expandDims()}),d={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),i)];case 3:return f=E.sent(),u.dispose(),l.dispose(),p=f.map(function(_){return _.box}),m=f.map(function(_){return _.score}),g=f.map(function(_){return _.classScore}),y=f.map(function(_){return C.config.classes[_.label]}),b=xp(p.map(function(_){return _.rescale(a)}),m,this.config.iouThreshold,!0),S=b.map(function(_){return new mz(m[_],g[_],y[_],p[_],d)}),[2,S]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return M2e(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return k2e(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,o){return ha(this,void 0,void 0,function(){var a,i,s,u,l,d,f,p,m,g,y,b,S,C,E,_,T,D,k,I,M,O,F,j,G,W,q,P,z,U=this;return pa(this,function(H){switch(H.label){case 0:return a=r.width,i=r.height,s=Math.max(a,i),u=s/a,l=s/i,d=n.shape[1],f=this.config.anchors.length,p=tn(function(){var L=n.reshape([d,d,f,U.boxEncodingSize]),$=L.slice([0,0,0,0],[d,d,f,4]),J=L.slice([0,0,0,4],[d,d,f,1]),ne=U.withClassScores?W0(L.slice([0,0,0,5],[d,d,f,U.config.classes.length]),3):tt(0);return[$,J,ne]}),m=p[0],g=p[1],y=p[2],b=[],[4,g.array()];case 1:return S=H.sent(),[4,m.array()];case 2:C=H.sent(),E=0,H.label=3;case 3:if(!(E<d))return[3,12];_=0,H.label=4;case 4:if(!(_<d))return[3,11];T=0,H.label=5;case 5:return T<f?(D=jw(S[E][_][T][0]),!o||D>o?(k=(_+jw(C[E][_][T][0]))/d*u,I=(E+jw(C[E][_][T][1]))/d*l,M=Math.exp(C[E][_][T][2])*this.config.anchors[T].x/d*u,O=Math.exp(C[E][_][T][3])*this.config.anchors[T].y/d*l,F=k-M/2,j=I-O/2,G={row:E,col:_,anchor:T},this.withClassScores?[4,this.extractPredictedClass(y,G)]:[3,7]):[3,9]):[3,10];case 6:return z=H.sent(),[3,8];case 7:z={classScore:1,label:0},H.label=8;case 8:W=z,q=W.classScore,P=W.label,b.push(ay({box:new Y0(F,j,F+M,j+O),score:D,classScore:D*q,label:P},G)),H.label=9;case 9:return T++,[3,5];case 10:return _++,[3,4];case 11:return E++,[3,3];case 12:return m.dispose(),g.dispose(),y.dispose(),[2,b]}})})},e.prototype.extractPredictedClass=function(n,r){return ha(this,void 0,void 0,function(){var o,a,i,s;return pa(this,function(u){switch(u.label){case 0:return o=r.row,a=r.col,i=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,d){return s[o][a][i][d]}).map(function(l,d){return{classScore:l,label:d}}).reduce(function(l,d){return l.classScore>d.classScore?l:d})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e})(Fs);function fu(t,e,n){if(n===void 0&&(n=!1),t.beginPath(),e.slice(1).forEach(function(a,i){var s=a.x,u=a.y,l=e[i];t.moveTo(l.x,l.y),t.lineTo(s,u)}),n){var r=e[e.length-1],o=e[0];if(!r||!o)return;t.moveTo(r.x,r.y),t.lineTo(o.x,o.y)}t.stroke()}var qo=(function(t){Tt(e,t);function e(n,r,o){return t.call(this,n,n,"",r,o)||this}return e.prototype.forSize=function(n,r){var o=t.prototype.forSize.call(this,n,r),a=o.score,i=o.relativeBox,s=o.imageDims;return new e(a,i,s)},e})(mz);function wp(t){return t.detection instanceof qo}function Sp(t,e){var n={detection:e};return Object.assign({},t,n)}function O2e(t,e){var n=Array.isArray(e)?e:[e];n.forEach(function(r){var o=r instanceof qo?r.score:wp(r)?r.detection.score:void 0,a=r instanceof qo?r.box:wp(r)?r.detection.box:new Ri(r),i=o?""+fR(o):void 0;new Sz(a,{label:i}).draw(t)})}function jo(t,e,n){return lt(function(){var r=$B(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=en(r,e.bias),r})}function zw(t,e,n){return n===void 0&&(n=!1),lt(function(){var r=Jn(n?en(Ns(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):jo(t,e.conv0,[2,2])),o=jo(r,e.conv1,[1,1]),a=Jn(en(r,o)),i=jo(a,e.conv2,[1,1]);return Jn(en(r,en(o,i)))})}function ig(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),lt(function(){var o=Jn(n?en(Ns(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):jo(t,e.conv0,r?[2,2]:[1,1])),a=jo(o,e.conv1,[1,1]),i=Jn(en(o,a)),s=jo(i,e.conv2,[1,1]),u=Jn(en(o,en(a,s))),l=jo(u,e.conv3,[1,1]);return Jn(en(o,en(a,en(s,l))))})}function Az(t,e){var n=Q0(t,e),r=xR(t,e);function o(i,s,u,l){l===void 0&&(l=!1);var d=l?n(i,s,3,u+"/conv0"):r(i,s,u+"/conv0"),f=r(s,s,u+"/conv1"),p=r(s,s,u+"/conv2");return{conv0:d,conv1:f,conv2:p}}function a(i,s,u,l){l===void 0&&(l=!1);var d=o(i,s,u,l),f=d.conv0,p=d.conv1,m=d.conv2,g=r(s,s,u+"/conv3");return{conv0:f,conv1:p,conv2:m,conv3:g}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function P2e(t){var e=[],n=Ps(t),r=n.extractWeights,o=n.getRemainingWeights,a=Az(r,e).extractDenseBlock4Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{dense0:i,dense1:s,dense2:u,dense3:l}}}function Nz(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function Dz(t,e){var n=$u(t,e),r=Nz(n),o=wR(n);function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),d=o(s+"/conv1"),f=o(s+"/conv2");return{conv0:l,conv1:d,conv2:f}}function i(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),d=o(s+"/conv1"),f=o(s+"/conv2"),p=o(s+"/conv3");return{conv0:l,conv1:d,conv2:f,conv3:p}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function F2e(t){var e=[],n=Dz(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Os(t,e),{params:r,paramMappings:e}}var kz=(function(t){Tt(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return lt(function(){var o=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],i=cm(o,a).div(Pe(255)),s=ig(i,r.dense0,!0);return s=ig(s,r.dense1),s=ig(s,r.dense2),s=ig(s,r.dense3),s=tm(s,[7,7],[2,2],"valid"),s})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,yr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return F2e(n)},e.prototype.extractParams=function(n){return P2e(n)},e})(Fs);function gi(t,e){return lt(function(){return en(OE(t,e.weights),e.bias)})}function B2e(t,e,n){var r=[],o=Ps(t),a=o.extractWeights,i=o.getRemainingWeights,s=bR(a,r),u=s(e,n,"fc");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:u}}}function L2e(t){var e=[],n=$u(t,e);function r(a){var i=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:i,bias:s}}var o={fc:r("fc")};return Os(t,e),{params:o,paramMappings:e}}function Iz(t){var e={},n={};return Object.keys(t).forEach(function(r){var o=r.startsWith("fc")?n:e;o[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var Mz=(function(t){Tt(e,t);function e(n,r){var o=t.call(this,n)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return lt(function(){var a=n instanceof Ry?r.faceFeatureExtractor.forwardInput(n):n;return gi(a.as2D(a.shape[0],-1),o.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,a=r.paramMappings;this._params=o,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return B2e(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=Iz(n),o=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),L2e(a)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),a=o*r+o,i=n.slice(0,n.length-a),s=n.slice(n.length-a);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(s)},e})(Fs),GM=["neutral","happy","sad","angry","fearful","disgusted","surprised"],RR=(function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);GM.forEach(function(r,o){n[r]=e[o]})}return t.prototype.asSortedArray=function(){var e=this;return GM.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t})(),j2e=(function(t){Tt(e,t);function e(n){return n===void 0&&(n=new kz),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return lt(function(){return Wu(r.runNet(n))})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,yr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.predictExpressions=function(n){return xt(this,void 0,void 0,function(){var r,o,a,i,s=this;return wt(this,function(u){switch(u.label){case 0:return[4,yr(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return o=u.sent(),[4,Promise.all(Ar(o).map(function(l){return xt(s,void 0,void 0,function(){var d;return wt(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return d=f.sent(),l.dispose(),[2,d]}})})}))];case 3:return a=u.sent(),o.dispose(),i=a.map(function(l){return new RR(l)}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e})(Mz);function z2e(t){return t.expressions instanceof RR}function Oz(t,e){var n={expressions:e};return Object.assign({},t,n)}function U2e(t,e,n,r){n===void 0&&(n=.1);var o=Array.isArray(e)?e:[e];o.forEach(function(a){var i=a instanceof RR?a:z2e(a)?a.expressions:void 0;if(!i)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var s=i.asSortedArray(),u=s.filter(function(f){return f.probability>n}),l=wp(a)?a.detection.box.bottomLeft:r||new Yt(0,0),d=new yR(u.map(function(f){return f.expression+" ("+fR(f.probability)+")"}),l);d.draw(t)})}function W2e(t){var e=t.map(function(s){return s.x}),n=t.map(function(s){return s.y}),r=e.reduce(function(s,u){return u<s?u:s},1/0),o=n.reduce(function(s,u){return u<s?u:s},1/0),a=e.reduce(function(s,u){return s<u?u:s},0),i=n.reduce(function(s,u){return s<u?u:s},0);return new Y0(r,o,a,i)}var V2e=.5,H2e=.43,G2e=.45,Yd=(function(){function t(e,n,r){r===void 0&&(r=new Yt(0,0));var o=n.width,a=n.height;this._imgDims=new Pl(o,a),this._shift=r,this._positions=e.map(function(i){return i.mul(new Yt(o,a)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new Yt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new Yt(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new Yt(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof qo?e.box.floor():new Ri(e);return this.shiftBy(r.x,r.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),a=o.useDlibAlignment,i=o.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(i)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],o=e[2],a=function(f){return o.sub(f).magnitude()},i=(a(n)+a(r))/2,s=Math.floor(i/G2e),u=hR(e),l=Math.floor(Math.max(0,u.x-V2e*s)),d=Math.floor(Math.max(0,u.y-H2e*s));return new pR(l,d,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+d))},t.prototype.alignMinBbox=function(e){var n=W2e(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t})(),Pz=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(hR)},e})(Yd);function _R(t){return wp(t)&&t.landmarks instanceof Yd&&t.unshiftedLandmarks instanceof Yd&&t.alignedRect instanceof qo}function Z0(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),o=r.align(),a=t.detection.imageDims,i=new qo(t.detection.score,o.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:e,alignedRect:i};return Object.assign({},t,s)}var Fz=(function(){function t(e){e===void 0&&(e={});var n=e.drawLines,r=n===void 0?!0:n,o=e.drawPoints,a=o===void 0?!0:o,i=e.lineWidth,s=e.lineColor,u=e.pointSize,l=e.pointColor;this.drawLines=r,this.drawPoints=a,this.lineWidth=i||1,this.pointSize=u||2,this.lineColor=s||"rgba(0, 255, 255, 1)",this.pointColor=l||"rgba(255, 0, 255, 1)"}return t})(),Bz=(function(){function t(e,n){n===void 0&&(n={}),this.faceLandmarks=e,this.options=new Fz(n)}return t.prototype.draw=function(e){var n=_i(e),r=this.options,o=r.drawLines,a=r.drawPoints,i=r.lineWidth,s=r.lineColor,u=r.pointSize,l=r.pointColor;if(o&&this.faceLandmarks instanceof Pz&&(n.strokeStyle=s,n.lineWidth=i,fu(n,this.faceLandmarks.getJawOutline()),fu(n,this.faceLandmarks.getLeftEyeBrow()),fu(n,this.faceLandmarks.getRightEyeBrow()),fu(n,this.faceLandmarks.getNose()),fu(n,this.faceLandmarks.getLeftEye(),!0),fu(n,this.faceLandmarks.getRightEye(),!0),fu(n,this.faceLandmarks.getMouth(),!0)),a){n.strokeStyle=l,n.fillStyle=l;var d=function(f){n.beginPath(),n.arc(f.x,f.y,u,0,2*Math.PI),n.fill()};this.faceLandmarks.positions.forEach(d)}},t})();function $2e(t,e){var n=Array.isArray(e)?e:[e];n.forEach(function(r){var o=r instanceof Yd?r:_R(r)?r.landmarks:void 0;if(!o)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new Bz(o).draw(t)})}const q2e=Object.freeze(Object.defineProperty({__proto__:null,DrawFaceLandmarks:Bz,DrawFaceLandmarksOptions:Fz,drawContour:fu,drawDetections:O2e,drawFaceExpressions:U2e,drawFaceLandmarks:$2e},Symbol.toStringTag,{value:"Module"}));function X2e(t,e){var n=Q0(t,e),r=xR(t,e);function o(i,s,u){var l=r(i,s,u+"/separable_conv0"),d=r(s,s,u+"/separable_conv1"),f=n(i,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:d,expansion_conv:f}}function a(i,s){var u=r(i,i,s+"/separable_conv0"),l=r(i,i,s+"/separable_conv1"),d=r(i,i,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:d}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:a}}function K2e(t,e){var n=[],r=Ps(t),o=r.extractWeights,a=r.getRemainingWeights,i=X2e(o,n),s=i.extractConvParams,u=i.extractSeparableConvParams,l=i.extractReductionBlockParams,d=i.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),p=l(32,64,"entry_flow/reduction_block_0"),m=l(64,128,"entry_flow/reduction_block_1"),g={conv_in:f,reduction_block_0:p,reduction_block_1:m},y={};bp(e,0,1).forEach(function(E){y["main_block_"+E]=d(128,"middle_flow/main_block_"+E)});var b=l(128,256,"exit_flow/reduction_block"),S=u(256,512,"exit_flow/separable_conv"),C={reduction_block:b,separable_conv:S};if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:g,middle_flow:y,exit_flow:C}}}function Y2e(t,e){var n=$u(t,e),r=Nz(n),o=wR(n);function a(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),d=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:d}}function i(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),d=o(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:a,extractMainBlockParams:i}}function Q2e(t,e){var n=[],r=Y2e(t,n),o=r.extractConvParams,a=r.extractSeparableConvParams,i=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=o("entry_flow/conv_in"),l=i("entry_flow/reduction_block_0"),d=i("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:d},p={};bp(e,0,1).forEach(function(b){p["main_block_"+b]=s("middle_flow/main_block_"+b)});var m=i("exit_flow/reduction_block"),g=a("exit_flow/separable_conv"),y={reduction_block:m,separable_conv:g};return Os(t,n),{params:{entry_flow:f,middle_flow:p,exit_flow:y},paramMappings:n}}function Lz(t,e,n){return en(Ns(t,e.filters,n,"same"),e.bias)}function Uw(t,e,n){n===void 0&&(n=!0);var r=n?Jn(t):t;return r=jo(r,e.separable_conv0,[1,1]),r=jo(Jn(r),e.separable_conv1,[1,1]),r=Wd(r,[3,3],[2,2],"same"),r=en(r,Lz(t,e.expansion_conv,[2,2])),r}function J2e(t,e){var n=jo(Jn(t),e.separable_conv0,[1,1]);return n=jo(Jn(n),e.separable_conv1,[1,1]),n=jo(Jn(n),e.separable_conv2,[1,1]),n=en(n,t),n}var Z2e=(function(t){Tt(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return lt(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=cm(a,i).div(Pe(256)),u=Jn(Lz(s,o.entry_flow.conv_in,[2,2]));return u=Uw(u,o.entry_flow.reduction_block_0,!1),u=Uw(u,o.entry_flow.reduction_block_1),bp(r._numMainBlocks,0,1).forEach(function(l){u=J2e(u,o.middle_flow["main_block_"+l])}),u=Uw(u,o.exit_flow.reduction_block),u=Jn(jo(u,o.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,yr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Q2e(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return K2e(n,this._numMainBlocks)},e})(Fs);function eSe(t){var e=[],n=Ps(t),r=n.extractWeights,o=n.getRemainingWeights,a=bR(r,e),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{fc:{age:i,gender:s}}}}function tSe(t){var e=[],n=$u(t,e);function r(a){var i=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:i,bias:s}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Os(t,e),{params:o,paramMappings:e}}var _y;(function(t){t.FEMALE="female",t.MALE="male"})(_y||(_y={}));var nSe=(function(t){Tt(e,t);function e(n){n===void 0&&(n=new Z2e(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return lt(function(){var a=n instanceof Ry?r.faceFeatureExtractor.forwardInput(n):n,i=tm(a,[7,7],[2,2],"valid").as2D(a.shape[0],-1),s=gi(i,o.fc.age).as1D(),u=gi(i,o.fc.gender);return{age:s,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return lt(function(){var o=r.runNet(n),a=o.age,i=o.gender;return{age:a,gender:Wu(i)}})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,yr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return xt(this,void 0,void 0,function(){var r,o,a,i,s,u,l=this;return wt(this,function(d){switch(d.label){case 0:return[4,yr(n)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return o=d.sent(),a=Ar(o.age),i=Ar(o.gender),s=a.map(function(f,p){return{ageTensor:f,genderTensor:i[p]}}),[4,Promise.all(s.map(function(f){var p=f.ageTensor,m=f.genderTensor;return xt(l,void 0,void 0,function(){var g,y,b,S,C;return wt(this,function(E){switch(E.label){case 0:return[4,p.data()];case 1:return g=E.sent()[0],[4,m.data()];case 2:return y=E.sent()[0],b=y>.5,S=b?_y.MALE:_y.FEMALE,C=b?y:1-y,p.dispose(),m.dispose(),[2,{age:g,gender:S,genderProbability:C}]}})})}))];case 3:return u=d.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,a=r.paramMappings;this._params=o,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return eSe(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=Iz(n),o=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),tSe(a)},e.prototype.extractParams=function(n){var r=1539,o=n.slice(0,n.length-r),a=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(a)},e})(Fs),rSe=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],hR([n[3],n[4]])]},e})(Yd),$M=(function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+fR(this.distance)+")":"")},t})(),Ww=(function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t})();function TR(t,e){return xt(this,void 0,void 0,function(){var n,r,o,a,i,s,u;return wt(this,function(l){switch(l.label){case 0:return n=Wr.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,yr(t)];case 1:if(o=l.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=o.getInput(0),a instanceof n?(i=a,[3,4]):[3,2];case 2:return[4,E2e(a)];case 3:i=l.sent(),l.label=4;case 4:r=i,l.label=5;case 5:return s=_i(r),u=e.map(function(d){return d instanceof qo?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(d){var f=d.x,p=d.y,m=d.width,g=d.height,y=J0({width:m,height:g});return _i(y).putImageData(s.getImageData(f,p,m,g),0,0),y})]}})})}function AR(t,e){return xt(this,void 0,void 0,function(){return wt(this,function(n){if(!K0(t)&&!Au(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Au(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,lt(function(){var r=t.shape.slice(Au(t)?1:0),o=r[0],a=r[1],i=r[2],s=e.map(function(l){return l instanceof qo?l.forSize(a,o).box:l}).map(function(l){return l.clipAtImageBorders(a,o)}),u=s.map(function(l){var d=l.x,f=l.y,p=l.width,m=l.height;return KB(t.as3D(o,a,i),[f,d,0],[m,p,i])});return u})]})})}var jz=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,o){var a=o.map(function(s){var u=s.width,l=s.height,d=r/Math.max(l,u);return{width:u*d,height:l*d}}),i=a.length;return lt(function(){var s=function(p,m){return La([Gh([68],p),Gh([68],m)],1).as2D(1,136).as1D()},u=function(p,m){var g=a[p],y=g.width,b=g.height;return m(y,b)?Math.abs(y-b)/2:0},l=function(p){return u(p,function(m,g){return m<g})},d=function(p){return u(p,function(m,g){return g<m})},f=n.mul(Gh([i,136],r)).sub(La(Array.from(Array(i),function(p,m){return s(l(m),d(m))}))).div(La(Array.from(Array(i),function(p,m){return s(a[m].width,a[m].height)})));return f})},e.prototype.forwardInput=function(n){var r=this;return lt(function(){var o=r.runNet(n);return r.postProcess(o,n.inputSize,n.inputDimensions.map(function(a){var i=a[0],s=a[1];return{height:i,width:s}}))})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,yr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.detectLandmarks=function(n){return xt(this,void 0,void 0,function(){var r,o,a,i=this;return wt(this,function(s){switch(s.label){case 0:return[4,yr(n)];case 1:return r=s.sent(),o=lt(function(){return Ar(i.forwardInput(r))}),[4,Promise.all(o.map(function(u,l){return xt(i,void 0,void 0,function(){var d,f,p,m,g;return wt(this,function(y){switch(y.label){case 0:return p=(f=Array).from,[4,u.data()];case 1:return d=p.apply(f,[y.sent()]),m=d.filter(function(b,S){return jM(S)}),g=d.filter(function(b,S){return!jM(S)}),[2,new Pz(Array(68).fill(0).map(function(b,S){return new Yt(m[S],g[S])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return a=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e})(Mz),zz=(function(t){Tt(e,t);function e(n){return n===void 0&&(n=new kz),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e})(jz);function oSe(t){var e=[],n=Dz(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Os(t,e),{params:r,paramMappings:e}}function aSe(t){var e=[],n=Ps(t),r=n.extractWeights,o=n.getRemainingWeights,a=Az(r,e).extractDenseBlock3Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{dense0:i,dense1:s,dense2:u}}}var iSe=(function(t){Tt(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return lt(function(){var o=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],i=cm(o,a).div(Pe(255)),s=zw(i,r.dense0,!0);return s=zw(s,r.dense1),s=zw(s,r.dense2),s=tm(s,[14,14],[2,2],"valid"),s})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,yr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return oSe(n)},e.prototype.extractParams=function(n){return aSe(n)},e})(Fs),sSe=(function(t){Tt(e,t);function e(n){return n===void 0&&(n=new iSe),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e})(jz);(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(zz);function uSe(t,e){return en(cs(t,e.weights),e.biases)}function NR(t,e,n,r,o){o===void 0&&(o="same");var a=e.conv,i=a.filters,s=a.bias,u=Ns(t,i,n,o);return u=en(u,s),u=uSe(u,e.scale),r?Jn(u):u}function lSe(t,e){return NR(t,e,[1,1],!0)}function Uz(t,e){return NR(t,e,[1,1],!1)}function Wz(t,e){return NR(t,e,[2,2],!0,"valid")}function cSe(t,e){function n(s,u,l){var d=t(s),f=d.length/(u*l*l);if(v2e(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+d.length+", numFilters: "+u+", filterSize: "+l);return lt(function(){return Mu(Ia(d,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,d){var f=n(s,u,l),p=Mo(t(u));return e.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:f,bias:p}}function o(s,u){var l=Mo(t(s)),d=Mo(t(s));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:d}}function a(s,u,l,d){var f=r(s,u,l,d+"/conv"),p=o(u,d+"/scale");return{conv:f,scale:p}}function i(s,u,l,d,f){f===void 0&&(f=!1);var p=a((f?.5:1)*s,u,l,d+"/conv1"),m=a(s,u,l,d+"/conv2");return{conv1:p,conv2:m}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function dSe(t){var e=Ps(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],a=cSe(n,o),i=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),d=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),p=s(36864,64,3,"conv64_down",!0),m=s(36864,64,3,"conv64_1"),g=s(36864,64,3,"conv64_2"),y=s(36864,64,3,"conv64_3"),b=s(147456,128,3,"conv128_down",!0),S=s(147456,128,3,"conv128_1"),C=s(147456,128,3,"conv128_2"),E=s(589824,256,3,"conv256_down",!0),_=s(589824,256,3,"conv256_1"),T=s(589824,256,3,"conv256_2"),D=s(589824,256,3,"conv256_down_out"),k=lt(function(){return Mu(M0(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var I={conv32_down:u,conv32_1:l,conv32_2:d,conv32_3:f,conv64_down:p,conv64_1:m,conv64_2:g,conv64_3:y,conv128_down:b,conv128_1:S,conv128_2:C,conv256_down:E,conv256_1:_,conv256_2:T,conv256_down_out:D,fc:k};return{params:I,paramMappings:o}}function fSe(t,e){var n=$u(t,e);function r(i){var s=n(i+"/scale/weights",1),u=n(i+"/scale/biases",1);return{weights:s,biases:u}}function o(i){var s=n(i+"/conv/filters",4),u=n(i+"/conv/bias",1),l=r(i);return{conv:{filters:s,bias:u},scale:l}}function a(i){return{conv1:o(i+"/conv1"),conv2:o(i+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function hSe(t){var e=[],n=fSe(t,e),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,a=r("conv32_down"),i=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),d=o("conv64_1"),f=o("conv64_2"),p=o("conv64_3"),m=o("conv128_down"),g=o("conv128_1"),y=o("conv128_2"),b=o("conv256_down"),S=o("conv256_1"),C=o("conv256_2"),E=o("conv256_down_out"),_=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!m2e(_))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+_);var T={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:d,conv64_2:f,conv64_3:p,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:S,conv256_2:C,conv256_down_out:E,fc:_};return Os(t,e),{params:T,paramMappings:e}}function ii(t,e){var n=lSe(t,e.conv1);return n=Uz(n,e.conv2),n=en(n,t),n=Jn(n),n}function sg(t,e){var n=Wz(t,e.conv1);n=Uz(n,e.conv2);var r=tm(t,2,2,"valid"),o=$n(r.shape),a=r.shape[3]!==n.shape[3],i=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(i){var s=n.shape.slice();s[1]=1;var u=$n(s);n=mo([n,u],1);var l=n.shape.slice();l[2]=1;var d=$n(l);n=mo([n,d],2)}return r=a?mo([r,o],3):r,n=en(r,n),n=Jn(n),n}var pSe=(function(t){Tt(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return lt(function(){var o=n.toBatchTensor(150,!0).toFloat(),a=[122.782,117.001,104.298],i=cm(o,a).div(Pe(256)),s=Wz(i,r.conv32_down);s=Wd(s,3,2,"valid"),s=ii(s,r.conv32_1),s=ii(s,r.conv32_2),s=ii(s,r.conv32_3),s=sg(s,r.conv64_down),s=ii(s,r.conv64_1),s=ii(s,r.conv64_2),s=ii(s,r.conv64_3),s=sg(s,r.conv128_down),s=ii(s,r.conv128_1),s=ii(s,r.conv128_2),s=sg(s,r.conv256_down),s=ii(s,r.conv256_1),s=ii(s,r.conv256_2),s=sg(s,r.conv256_down_out);var u=s.mean([1,2]),l=OE(u,r.fc);return l})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,yr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return xt(this,void 0,void 0,function(){var r,o,a,i=this;return wt(this,function(s){switch(s.label){case 0:return[4,yr(n)];case 1:return r=s.sent(),o=lt(function(){return Ar(i.forwardInput(r))}),[4,Promise.all(o.map(function(u){return u.data()}))];case 2:return a=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return hSe(n)},e.prototype.extractParams=function(n){return dSe(n)},e})(Fs);function Vz(t,e){var n={descriptor:e};return Object.assign({},t,n)}var Hz=(function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,o=n.scaleFactor,a=n.maxNumScales,i=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=a||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t})();function mSe(t,e){function n(u,l){var d=Ia(t(9*u),[3,3,u,1]),f=Mo(t(u)),p=Mo(t(u)),m=Mo(t(u)),g=Mo(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:d,batch_norm_scale:f,batch_norm_offset:p,batch_norm_mean:m,batch_norm_variance:g}}function r(u,l,d,f,p){var m=Ia(t(u*l*d*d),[d,d,u,l]),g=Mo(t(l));return e.push({paramPath:f+"/filters"},{paramPath:f+"/"+(p?"batch_norm_offset":"bias")}),{filters:m,bias:g}}function o(u,l,d,f){var p=r(u,l,d,f,!0),m=p.filters,g=p.bias;return{filters:m,batch_norm_offset:g}}function a(u,l,d){var f=n(u,d+"/depthwise_conv"),p=o(u,l,1,d+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:p}}function i(){var u=o(3,32,3,"mobilenetv1/conv_0"),l=a(32,64,"mobilenetv1/conv_1"),d=a(64,128,"mobilenetv1/conv_2"),f=a(128,128,"mobilenetv1/conv_3"),p=a(128,256,"mobilenetv1/conv_4"),m=a(256,256,"mobilenetv1/conv_5"),g=a(256,512,"mobilenetv1/conv_6"),y=a(512,512,"mobilenetv1/conv_7"),b=a(512,512,"mobilenetv1/conv_8"),S=a(512,512,"mobilenetv1/conv_9"),C=a(512,512,"mobilenetv1/conv_10"),E=a(512,512,"mobilenetv1/conv_11"),_=a(512,1024,"mobilenetv1/conv_12"),T=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:d,conv_3:f,conv_4:p,conv_5:m,conv_6:g,conv_7:y,conv_8:b,conv_9:S,conv_10:C,conv_11:E,conv_12:_,conv_13:T}}function s(){var u=o(1024,256,1,"prediction_layer/conv_0"),l=o(256,512,3,"prediction_layer/conv_1"),d=o(512,128,1,"prediction_layer/conv_2"),f=o(128,256,3,"prediction_layer/conv_3"),p=o(256,128,1,"prediction_layer/conv_4"),m=o(128,256,3,"prediction_layer/conv_5"),g=o(256,64,1,"prediction_layer/conv_6"),y=o(64,128,3,"prediction_layer/conv_7"),b=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),S=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),C=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),E=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),_=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),T=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),k=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),I=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),M=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),O=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),F=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),j={box_encoding_predictor:b,class_predictor:S},G={box_encoding_predictor:C,class_predictor:E},W={box_encoding_predictor:_,class_predictor:T},q={box_encoding_predictor:D,class_predictor:k},P={box_encoding_predictor:I,class_predictor:M},z={box_encoding_predictor:O,class_predictor:F};return{conv_0:u,conv_1:l,conv_2:d,conv_3:f,conv_4:p,conv_5:m,conv_6:g,conv_7:y,box_predictor_0:j,box_predictor_1:G,box_predictor_2:W,box_predictor_3:q,box_predictor_4:P,box_predictor_5:z}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:s}}function vSe(t){var e=[],n=Ps(t),r=n.extractWeights,o=n.getRemainingWeights,a=mSe(r,e),i=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=i(),l=s(),d=CE(r(5118*4),[1,5118,4]),f={extra_dim:d};if(e.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:e}}function gSe(t,e){var n=$u(t,e);function r(l,d,f){var p=n(l+"/Conv2d_"+d+"_pointwise/weights",4,f+"/filters"),m=n(l+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:p,batch_norm_offset:m}}function o(l){var d="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",p=d+"/depthwise_conv",m=d+"/pointwise_conv",g=n(f+"/depthwise_weights",4,p+"/filters"),y=n(f+"/BatchNorm/gamma",1,p+"/batch_norm_scale"),b=n(f+"/BatchNorm/beta",1,p+"/batch_norm_offset"),S=n(f+"/BatchNorm/moving_mean",1,p+"/batch_norm_mean"),C=n(f+"/BatchNorm/moving_variance",1,p+"/batch_norm_variance");return{depthwise_conv:{filters:g,batch_norm_scale:y,batch_norm_offset:b,batch_norm_mean:S,batch_norm_variance:C},pointwise_conv:r("MobilenetV1",l,m)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function i(l,d){var f=n(l+"/weights",4,d+"/filters"),p=n(l+"/biases",1,d+"/bias");return{filters:f,bias:p}}function s(l){var d=i("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=i("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:d,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function ySe(t){var e=[],n=gSe(t,e),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,a=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!K0(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var i={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:a}};return Os(t,e),{params:i,paramMappings:e}}function li(t,e,n){return lt(function(){var r=Ns(t,e.filters,n,"same");return r=en(r,e.batch_norm_offset),kE(r,0,6)})}var bSe=.0010000000474974513;function xSe(t,e,n){return lt(function(){var r=ME(t,e.filters,n,"same");return r=WB(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,bSe),kE(r,0,6)})}function wSe(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function SSe(t,e){return lt(function(){var n=null,r=li(t,e.conv_0,[2,2]),o=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(o.forEach(function(a,i){var s=i+1,u=wSe(s);r=xSe(r,a.depthwise_conv,u),r=li(r,a.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function CSe(t,e,n,r,o){var a=t.shape[0],i=Math.min(n,a),s=e.map(function(d,f){return{score:d,boxIndex:f}}).filter(function(d){return d.score>o}).sort(function(d,f){return f.score-d.score}),u=function(d){return d<=r?1:0},l=[];return s.forEach(function(d){if(!(l.length>=i)){for(var f=d.score,p=l.length-1;p>=0;--p){var m=ESe(t,d.boxIndex,l[p]);if(m!==0&&(d.score*=u(m),d.score<=o))break}f===d.score&&l.push(d.boxIndex)}}),l}function ESe(t,e,n){var r=t.arraySync(),o=Math.min(r[e][0],r[e][2]),a=Math.min(r[e][1],r[e][3]),i=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),d=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),p=(i-o)*(s-a),m=(d-u)*(f-l);if(p<=0||m<=0)return 0;var g=Math.max(o,u),y=Math.max(a,l),b=Math.min(i,d),S=Math.min(s,f),C=Math.max(b-g,0)*Math.max(S-y,0);return C/(p+m-C)}function RSe(t){var e=Ar(Mu(t,[1,0])),n=[Ei(e[2],e[0]),Ei(e[3],e[1])],r=[en(e[0],os(n[0],Pe(2))),en(e[1],os(n[1],Pe(2)))];return{sizes:n,centers:r}}function _Se(t,e){var n=RSe(t),r=n.sizes,o=n.centers,a=Ar(Mu(e,[1,0])),i=os(cs(H2(os(a[2],Pe(5))),r[0]),Pe(2)),s=en(cs(os(a[0],Pe(10)),r[0]),o[0]),u=os(cs(H2(os(a[3],Pe(5))),r[1]),Pe(2)),l=en(cs(os(a[1],Pe(10)),r[1]),o[1]);return Mu(La([Ei(s,i),Ei(l,u),en(s,i),en(l,u)]),[1,0])}function TSe(t,e,n){return lt(function(){var r=t.shape[0],o=_Se(Ba(wd(n.extra_dim,[r,1,1]),[-1,4]),Ba(t,[-1,4]));o=Ba(o,[r,o.shape[0]/r,4]);var a=LB(Iu(e,[0,0,1],[-1,-1,-1])),i=Iu(a,[0,0,0],[-1,-1,1]);i=Ba(i,[r,i.shape[1]]);var s=Ar(o),u=Ar(i);return{boxes:s,scores:u}})}function Zc(t,e){return lt(function(){var n=t.shape[0],r=Ba(za(t,e.box_encoding_predictor),[n,-1,1,4]),o=Ba(za(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function ASe(t,e,n){return lt(function(){var r=li(t,n.conv_0,[1,1]),o=li(r,n.conv_1,[2,2]),a=li(o,n.conv_2,[1,1]),i=li(a,n.conv_3,[2,2]),s=li(i,n.conv_4,[1,1]),u=li(s,n.conv_5,[2,2]),l=li(u,n.conv_6,[1,1]),d=li(l,n.conv_7,[2,2]),f=Zc(e,n.box_predictor_0),p=Zc(t,n.box_predictor_1),m=Zc(o,n.box_predictor_2),g=Zc(i,n.box_predictor_3),y=Zc(u,n.box_predictor_4),b=Zc(d,n.box_predictor_5),S=mo([f.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding,b.boxPredictionEncoding],1),C=mo([f.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction,y.classPrediction,b.classPrediction],1);return{boxPredictions:S,classPredictions:C}})}var eb=(function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t})(),Gz=(function(t){Tt(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return lt(function(){var o=n.toBatchTensor(512,!1).toFloat(),a=Ei(cs(o,Pe(.007843137718737125)),Pe(1)),i=SSe(a,r.mobilenetv1),s=ASe(i.out,i.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return TSe(u,l,r.output_layer)})},e.prototype.forward=function(n){return xt(this,void 0,void 0,function(){var r;return wt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,yr(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var o,a,i,s,u,l,d,f,p,m,g,y,b,S,C,E,_,T,D,k,I;return wt(this,function(M){switch(M.label){case 0:return o=new eb(r),a=o.maxResults,i=o.minConfidence,[4,yr(n)];case 1:for(s=M.sent(),u=this.forwardInput(s),l=u.boxes,d=u.scores,f=l[0],p=d[0],m=1;m<l.length;m++)l[m].dispose(),d[m].dispose();return b=(y=Array).from,[4,p.data()];case 2:return g=b.apply(y,[M.sent()]),S=.5,C=CSe(f,g,a,S,i),E=s.getReshapedInputDimensions(0),_=s.inputSize,T=_/E.width,D=_/E.height,k=f.arraySync(),I=C.map(function(O){var F=[Math.max(0,k[O][0]),Math.min(1,k[O][2])].map(function(z){return z*D}),j=F[0],G=F[1],W=[Math.max(0,k[O][1]),Math.min(1,k[O][3])].map(function(z){return z*T}),q=W[0],P=W[1];return new qo(g[O],new pR(q,j,P-q,G-j),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),p.dispose(),[2,I]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return ySe(n)},e.prototype.extractParams=function(n){return vSe(n)},e})(Fs);(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Gz);var $z=(function(t){Tt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e})(ER),dm=(function(){function t(){}return t.prototype.then=function(e){return xt(this,void 0,void 0,function(){var n;return wt(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return xt(this,void 0,void 0,function(){return wt(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t})();function tb(t,e,n,r,o){return o===void 0&&(o=function(a){var i=a.alignedRect;return i}),xt(this,void 0,void 0,function(){var a,i,s,u,l;return wt(this,function(d){switch(d.label){case 0:return a=t.map(function(f){return _R(f)?o(f):f.detection}),s=r,s?[3,5]:e instanceof We?[4,AR(e,a)]:[3,2];case 1:return u=d.sent(),[3,4];case 2:return[4,TR(e,a)];case 3:u=d.sent(),d.label=4;case 4:s=u,d.label=5;case 5:return i=s,[4,n(i)];case 6:return l=d.sent(),i.forEach(function(f){return f instanceof We&&f.dispose()}),[2,l]}})})}function DR(t,e,n,r,o){return xt(this,void 0,void 0,function(){var a=this;return wt(this,function(i){return[2,tb([t],e,function(s){return xt(a,void 0,void 0,function(){return wt(this,function(u){return[2,n(s[0])]})})},r,o)]})})}function NSe(t){return lt(function(){return La(Ar(t,3).reverse(),3)})}var ug=2,Ty=12;function DSe(t,e){var n=Q0(t,e),r=bR(t,e);function o(l,d){var f=Mo(t(l));return e.push({paramPath:d}),f}function a(l,d,f){f===void 0&&(f=!1);var p=n(l[0],l[1],3,d+"/conv1"),m=o(l[1],d+"/prelu1_alpha"),g=n(l[1],l[2],3,d+"/conv2"),y=o(l[2],d+"/prelu2_alpha"),b=n(l[2],l[3],f?2:3,d+"/conv3"),S=o(l[3],d+"/prelu3_alpha");return{conv1:p,prelu1_alpha:m,conv2:g,prelu2_alpha:y,conv3:b,prelu3_alpha:S}}function i(){var l=a([3,10,16,32],"pnet"),d=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return ms({},l,{conv4_1:d,conv4_2:f})}function s(){var l=a([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),f=o(128,"rnet/prelu4_alpha"),p=r(128,2,"rnet/fc2_1"),m=r(128,4,"rnet/fc2_2");return ms({},l,{fc1:d,prelu4_alpha:f,fc2_1:p,fc2_2:m})}function u(){var l=a([3,32,64,64],"onet"),d=n(64,128,2,"onet/conv4"),f=o(128,"onet/prelu4_alpha"),p=r(1152,256,"onet/fc1"),m=o(256,"onet/prelu5_alpha"),g=r(256,2,"onet/fc2_1"),y=r(256,4,"onet/fc2_2"),b=r(256,10,"onet/fc2_3");return ms({},l,{conv4:d,prelu4_alpha:f,fc1:p,prelu5_alpha:m,fc2_1:g,fc2_2:y,fc2_3:b})}return{extractPNetParams:i,extractRNetParams:s,extractONetParams:u}}function kSe(t){var e=Ps(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],a=DSe(n,o),i=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,l=i(),d=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:d,onet:f},paramMappings:o}}function ISe(t,e){var n=$u(t,e);function r(d){var f=n(d+"/weights",4,d+"/filters"),p=n(d+"/bias",1);return{filters:f,bias:p}}function o(d){var f=n(d+"/weights",2),p=n(d+"/bias",1);return{weights:f,bias:p}}function a(d){return n(d,1)}function i(d){var f=r(d+"/conv1"),p=a(d+"/prelu1_alpha"),m=r(d+"/conv2"),g=a(d+"/prelu2_alpha"),y=r(d+"/conv3"),b=a(d+"/prelu3_alpha");return{conv1:f,prelu1_alpha:p,conv2:m,prelu2_alpha:g,conv3:y,prelu3_alpha:b}}function s(){var d=i("pnet"),f=r("pnet/conv4_1"),p=r("pnet/conv4_2");return ms({},d,{conv4_1:f,conv4_2:p})}function u(){var d=i("rnet"),f=o("rnet/fc1"),p=a("rnet/prelu4_alpha"),m=o("rnet/fc2_1"),g=o("rnet/fc2_2");return ms({},d,{fc1:f,prelu4_alpha:p,fc2_1:m,fc2_2:g})}function l(){var d=i("onet"),f=r("onet/conv4"),p=a("onet/prelu4_alpha"),m=o("onet/fc1"),g=a("onet/prelu5_alpha"),y=o("onet/fc2_1"),b=o("onet/fc2_2"),S=o("onet/fc2_3");return ms({},d,{conv4:f,prelu4_alpha:p,fc1:m,prelu5_alpha:g,fc2_1:y,fc2_2:b,fc2_3:S})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function MSe(t){var e=[],n=ISe(t,e),r=n.extractPNetParams,o=n.extractRNetParams,a=n.extractONetParams,i=r(),s=o(),u=a();return Os(t,e),{params:{pnet:i,rnet:s,onet:u},paramMappings:e}}function yS(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function OSe(t,e,n){for(var r=n[0],o=n[1],a=Ty/t,i=[],s=Math.min(r,o)*a,u=0;s>=12;)i.push(a*Math.pow(e,u)),s=s*e,u+=1;return i}var kR=(function(t){Tt(e,t);function e(n,r,o,a){return t.call(this,{left:n,top:r,right:o,bottom:a},!0)||this}return e})(Ri);function qz(t){return lt(function(){return cs(Ei(t,Pe(127.5)),Pe(.0078125))})}function Nd(t,e){return lt(function(){return en(Jn(t),cs(e,ty(Jn(ty(t)))))})}function IR(t,e,n){return n===void 0&&(n=!1),lt(function(){var r=za(t,e.conv1,"valid");return r=Nd(r,e.prelu1_alpha),r=Wd(r,n?[2,2]:[3,3],[2,2],"same"),r=za(r,e.conv2,"valid"),r=Nd(r,e.prelu2_alpha),r=n?r:Wd(r,[3,3],[2,2],"valid"),r=za(r,e.conv3,"valid"),r=Nd(r,e.prelu3_alpha),r})}function PSe(t,e){return lt(function(){var n=IR(t,e,!0),r=za(n,e.conv4_1,"valid"),o=ca(P0(r,3),3),a=Wu(Ei(r,o),3),i=za(n,e.conv4_2,"valid");return{prob:a,regions:i}})}function FSe(t,e){return lt(function(){var n=yS(e,t.shape.slice(1)),r=n.height,o=n.width,a=dL.resizeBilinear(t,[r,o]),i=qz(a);return Mu(i,[0,2,1,3])})}function BSe(t,e,n,r){for(var o=[],a=t.arraySync(),i=0;i<t.shape[0];i++)for(var s=0;s<t.shape[1];s++)a[i][s]>=r&&o.push(new Yt(s,i));var u=o.map(function(l){var d=new Y0(Math.round((l.y*ug+1)/n),Math.round((l.x*ug+1)/n),Math.round((l.y*ug+Ty)/n),Math.round((l.x*ug+Ty)/n)),f=a[l.y][l.x],p=e.arraySync(),m=new kR(p[l.y][l.x][0],p[l.y][l.x][1],p[l.y][l.x][2],p[l.y][l.x][3]);return{cell:d,score:f,region:m}});return u}function LSe(t,e,n,r,o){o.stage1=[];var a=e.map(function(p){return lt(function(){var m={scale:p},g=FSe(t,p),y=Date.now(),b=PSe(g,r),S=b.prob,C=b.regions;m.pnet=Date.now()-y;var E=Ar(Ar(S,3)[1])[0],_=Ar(C)[0];return{scoresTensor:E,regionsTensor:_,scale:p,statsForScale:m}})}),i=a.map(function(p){var m=p.scoresTensor,g=p.regionsTensor,y=p.scale,b=p.statsForScale,S=BSe(m,g,y,n);if(m.dispose(),g.dispose(),!S.length)return o.stage1.push(b),[];var C=Date.now(),E=xp(S.map(function(_){return _.cell}),S.map(function(_){return _.score}),.5);return b.nms=Date.now()-C,b.numBoxes=E.length,o.stage1.push(b),E.map(function(_){return S[_]})}),s=i.reduce(function(p,m){return p.concat(m)},[]),u=[],l=[];if(s.length>0){var d=Date.now(),f=xp(s.map(function(p){return p.cell}),s.map(function(p){return p.score}),.7);o.stage1_nms=Date.now()-d,l=f.map(function(p){return s[p].score}),u=f.map(function(p){return s[p]}).map(function(p){var m=p.cell,g=p.region;return new Y0(m.left+g.left*m.width,m.top+g.top*m.height,m.right+g.right*m.width,m.bottom+g.bottom*m.height).toSquare().round()})}return{boxes:u,scores:l}}function Xz(t,e,n){var r=n.width,o=n.height;return xt(this,void 0,void 0,function(){var a,i,s,u=this;return wt(this,function(l){switch(l.label){case 0:return a=_i(t),[4,Promise.all(e.map(function(d){return xt(u,void 0,void 0,function(){var f,p,m,g,y,b,S,C;return wt(this,function(E){return f=d.padAtBorders(t.height,t.width),p=f.y,m=f.ey,g=f.x,y=f.ex,b=g-1,S=p-1,C=a.getImageData(b,S,y-b,m-S),[2,Wr.isNodejs()?SR(C):createImageBitmap(C)]})})}))];case 1:return i=l.sent(),s=[],i.forEach(function(d){var f=J0({width:r,height:o}),p=_i(f);p.drawImage(d,0,0,r,o);for(var m=p.getImageData(0,0,r,o).data,g=[],y=0;y<m.length;y+=4)g.push(m[y+2]),g.push(m[y+1]),g.push(m[y]);s.push(g)}),[2,s.map(function(d){var f=lt(function(){var p=Mu(Ia(d,[1,r,o,3]),[0,2,1,3]).toFloat();return qz(p)});return f})]}})})}function jSe(t,e){return lt(function(){var n=IR(t,e),r=Ba(n,[n.shape[0],e.fc1.weights.shape[0]]),o=gi(r,e.fc1),a=Nd(o,e.prelu4_alpha),i=gi(a,e.fc2_1),s=ca(P0(i,1),1),u=Wu(Ei(i,s),1),l=gi(a,e.fc2_2),d=Ar(u,1)[1];return{scores:d,regions:l}})}function zSe(t,e,n,r,o){return xt(this,void 0,void 0,function(){var a,i,s,u,l,d,f,p,m,g,y,b,S,C;return wt(this,function(E){switch(E.label){case 0:return a=Date.now(),[4,Xz(t,e,{width:24,height:24})];case 1:return i=E.sent(),o.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map(function(_){var T=jSe(_,r);return _.dispose(),T}),o.stage2_rnet=Date.now()-a,u=s.length>1?mo(s.map(function(_){return _.scores})):s[0].scores,f=(d=Array).from,[4,u.data()];case 2:return l=f.apply(d,[E.sent()]),u.dispose(),p=l.map(function(_,T){return{score:_,idx:T}}).filter(function(_){return _.score>n}).map(function(_){var T=_.idx;return T}),m=p.map(function(_){return e[_]}),g=p.map(function(_){return l[_]}),y=[],b=[],m.length>0&&(a=Date.now(),S=xp(m,g,.7),o.stage2_nms=Date.now()-a,C=S.map(function(_){var T=s[p[_]].regions.arraySync();return new kR(T[0][0],T[0][1],T[0][2],T[0][3])}),b=S.map(function(_){return g[_]}),y=S.map(function(_,T){return m[_].calibrate(C[T])})),s.forEach(function(_){_.regions.dispose(),_.scores.dispose()}),[2,{boxes:y,scores:b}]}})})}function USe(t,e){return lt(function(){var n=IR(t,e);n=Wd(n,[2,2],[2,2],"same"),n=za(n,e.conv4,"valid"),n=Nd(n,e.prelu4_alpha);var r=Ba(n,[n.shape[0],e.fc1.weights.shape[0]]),o=gi(r,e.fc1),a=Nd(o,e.prelu5_alpha),i=gi(a,e.fc2_1),s=ca(P0(i,1),1),u=Wu(Ei(i,s),1),l=gi(a,e.fc2_2),d=gi(a,e.fc2_3),f=Ar(u,1)[1];return{scores:f,regions:l,points:d}})}function WSe(t,e,n,r,o){return xt(this,void 0,void 0,function(){var a,i,s,u,l,d,f,p,m,g,y,b,S,C,E;return wt(this,function(_){switch(_.label){case 0:return a=Date.now(),[4,Xz(t,e,{width:48,height:48})];case 1:return i=_.sent(),o.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map(function(T){var D=USe(T,r);return T.dispose(),D}),o.stage3_onet=Date.now()-a,u=s.length>1?mo(s.map(function(T){return T.scores})):s[0].scores,f=(d=Array).from,[4,u.data()];case 2:return l=f.apply(d,[_.sent()]),u.dispose(),p=l.map(function(T,D){return{score:T,idx:D}}).filter(function(T){return T.score>n}).map(function(T){var D=T.idx;return D}),m=p.map(function(T){var D=s[T].regions.arraySync();return new kR(D[0][0],D[0][1],D[0][2],D[0][3])}),g=p.map(function(T,D){return e[T].calibrate(m[D])}),y=p.map(function(T){return l[T]}),b=[],S=[],C=[],g.length>0&&(a=Date.now(),E=xp(g,y,.7,!1),o.stage3_nms=Date.now()-a,b=E.map(function(T){return g[T]}),S=E.map(function(T){return y[T]}),C=E.map(function(T,D){return Array(5).fill(0).map(function(k,I){var M=s[T].points.arraySync();return new Yt(M[0][I]*(b[D].width+1)+b[D].left,M[0][I+5]*(b[D].height+1)+b[D].top)})})),s.forEach(function(T){T.regions.dispose(),T.scores.dispose(),T.points.dispose()}),[2,{boxes:b,scores:S,points:C}]}})})}var VSe=(function(t){Tt(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var o,a,i,s,u,l,d,f,p,m,g,y,b,S,C,E,_,T,D,k,I;return wt(this,function(M){switch(M.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(a=n.canvases[0],!a)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},s=Date.now(),u=lt(function(){return NSe(ca(yge.fromPixels(a)).toFloat())}),l=function(O){return u.dispose(),i.total=Date.now()-s,O},d=u.shape.slice(1),f=d[0],p=d[1],m=new Hz(r),g=m.minFaceSize,y=m.scaleFactor,b=m.maxNumScales,S=m.scoreThresholds,C=m.scaleSteps,E=(C||OSe(g,y,[f,p])).filter(function(O){var F=yS(O,[f,p]);return Math.min(F.width,F.height)>Ty}).slice(0,b),i.scales=E,i.pyramid=E.map(function(O){return yS(O,[f,p])}),_=Date.now(),[4,LSe(u,E,S[0],o.pnet,i)];case 1:return T=M.sent(),i.total_stage1=Date.now()-_,T.boxes.length?(i.stage2_numInputBoxes=T.boxes.length,_=Date.now(),[4,zSe(a,T.boxes,S[1],o.rnet,i)]):[2,l({results:[],stats:i})];case 2:return D=M.sent(),i.total_stage2=Date.now()-_,D.boxes.length?(i.stage3_numInputBoxes=D.boxes.length,_=Date.now(),[4,WSe(a,D.boxes,S[2],o.onet,i)]):[2,l({results:[],stats:i})];case 3:return k=M.sent(),i.total_stage3=Date.now()-_,I=k.boxes.map(function(O,F){return Z0(Sp({},new qo(k.scores[F],new pR(O.left/p,O.top/f,O.width/p,O.height/f),{height:f,width:p})),new rSe(k.points[F].map(function(j){return j.sub(new Yt(O.left,O.top)).div(new Yt(O.width,O.height))}),{width:O.width,height:O.height}))}),[2,l({results:I,stats:i})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,yr(n)];case 1:return[4,o.apply(this,[a.sent(),r])];case 2:return[2,a.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),xt(this,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,yr(n)];case 1:return[2,o.apply(this,[a.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return MSe(n)},e.prototype.extractParams=function(n){return kSe(n)},e})(Fs),HSe=.4,GSe=[new Yt(1.603231,2.094468),new Yt(6.041143,7.080126),new Yt(2.882459,3.518061),new Yt(4.266906,5.178857),new Yt(9.041765,10.66308)],$Se=[117.001,114.697,97.404],qSe=(function(t){Tt(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:HSe,classes:["face"],anchors:GSe,meanRgb:$Se,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return xt(this,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return o=a.sent(),[2,o.map(function(i){return new qo(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e})(Tz),XSe=.4,KSe=[new Yt(.738768,.874946),new Yt(2.42204,2.65704),new Yt(4.30971,7.04493),new Yt(10.246,4.59428),new Yt(12.6868,11.8741)],YSe=[new Yt(1.603231,2.094468),new Yt(6.041143,7.080126),new Yt(2.882459,3.518061),new Yt(4.266906,5.178857),new Yt(9.041765,10.66308)],QSe=[117.001,114.697,97.404],JSe="tiny_yolov2_model",ZSe="tiny_yolov2_separable_conv_model",eCe=(function(t){Tt(e,t);function e(n){n===void 0&&(n=!0);var r=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:XSe,classes:["face"]},n?{anchors:YSe,meanRgb:QSe}:{anchors:KSe,withClassScores:!0});return r=t.call(this,o)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return xt(this,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return o=a.sent(),[2,o.map(function(i){return new qo(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?ZSe:JSe},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e})(Tz),Qr={ssdMobilenetv1:new Gz,tinyFaceDetector:new qSe,tinyYolov2:new eCe,mtcnn:new VSe,faceLandmark68Net:new zz,faceLandmark68TinyNet:new sSe,faceRecognitionNet:new pSe,faceExpressionNet:new j2e,ageGenderNet:new nSe};function Kz(t,e){var n={age:e};return Object.assign({},t,n)}function Yz(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var Qz=(function(t){Tt(e,t);function e(n,r,o){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=o,a}return e})(dm),MR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o=this;return wt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,tb(n,this.input,function(i){return xt(o,void 0,void 0,function(){return wt(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return Qr.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(i,s){return Oz(i,r[s])})]}})})},e.prototype.withAgeAndGender=function(){return new BR(this,this.input)},e})(Qz),OR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r;return wt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,DR(n,this.input,function(a){return Qr.faceExpressionNet.predictExpressions(a)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,Oz(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new LR(this,this.input)},e})(Qz),PR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new jR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new UR(this,this.input)},e})(MR),FR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new zR(this,this.input)},e.prototype.withFaceDescriptor=function(){return new WR(this,this.input)},e})(OR),Jz=(function(t){Tt(e,t);function e(n,r,o){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=o,a}return e})(dm),BR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o=this;return wt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,tb(n,this.input,function(i){return xt(o,void 0,void 0,function(){return wt(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return Qr.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(i,s){var u=r[s],l=u.age,d=u.gender,f=u.genderProbability;return Kz(Yz(i,d,f),l)})]}})})},e.prototype.withFaceExpressions=function(){return new MR(this,this.input)},e})(Jz),LR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o,a,i;return wt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,DR(n,this.input,function(u){return Qr.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),o=r.age,a=r.gender,i=r.genderProbability,[2,Kz(Yz(n,a,i),o)]}})})},e.prototype.withFaceExpressions=function(){return new OR(this,this.input)},e})(Jz),jR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new PR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new UR(this,this.input)},e})(BR),zR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new FR(this,this.input)},e.prototype.withFaceDescriptor=function(){return new WR(this,this.input)},e})(LR),Zz=(function(t){Tt(e,t);function e(n,r){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o}return e})(dm),UR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r;return wt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,tb(n,this.input,function(a){return Promise.all(a.map(function(i){return Qr.faceRecognitionNet.computeFaceDescriptor(i)}))},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(a,i){return Vz(n[i],a)})]}})})},e.prototype.withFaceExpressions=function(){return new PR(this,this.input)},e.prototype.withAgeAndGender=function(){return new jR(this,this.input)},e})(Zz),WR=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r;return wt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,DR(n,this.input,function(a){return Qr.faceRecognitionNet.computeFaceDescriptor(a)},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,Vz(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new FR(this,this.input)},e.prototype.withAgeAndGender=function(){return new zR(this,this.input)},e})(Zz),e5=(function(t){Tt(e,t);function e(n,r,o){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.useTinyLandmarkNet=o,a}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Qr.faceLandmark68TinyNet:Qr.faceLandmark68Net},enumerable:!0,configurable:!0}),e})(dm),tCe=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o,a,i,s=this;return wt(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof We?[4,AR(this.input,r)]:[3,3];case 2:return a=u.sent(),[3,5];case 3:return[4,TR(this.input,r)];case 4:a=u.sent(),u.label=5;case 5:return o=a,[4,Promise.all(o.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return i=u.sent(),o.forEach(function(l){return l instanceof We&&l.dispose()}),[2,n.map(function(l,d){return Z0(l,i[d])})]}})})},e.prototype.withFaceExpressions=function(){return new PR(this,this.input)},e.prototype.withAgeAndGender=function(){return new jR(this,this.input)},e.prototype.withFaceDescriptors=function(){return new UR(this,this.input)},e})(e5),nCe=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o,a,i;return wt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof We?[4,AR(this.input,[r])]:[3,3]):[2];case 2:return a=s.sent(),[3,5];case 3:return[4,TR(this.input,[r])];case 4:a=s.sent(),s.label=5;case 5:return o=a,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return i=s.sent(),o.forEach(function(u){return u instanceof We&&u.dispose()}),[2,Z0(n,i)]}})})},e.prototype.withFaceExpressions=function(){return new FR(this,this.input)},e.prototype.withAgeAndGender=function(){return new zR(this,this.input)},e.prototype.withFaceDescriptor=function(){return new WR(this,this.input)},e})(e5),t5=(function(t){Tt(e,t);function e(n,r){r===void 0&&(r=new eb);var o=t.call(this)||this;return o.input=n,o.options=r,o}return e})(dm),n5=(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r,o,a;return wt(this,function(i){switch(i.label){case 0:return n=this,r=n.input,o=n.options,o instanceof Hz?[4,Qr.mtcnn.forward(r,o)]:[3,2];case 1:return[2,i.sent().map(function(s){return s.detection})];case 2:if(a=o instanceof $z?function(s){return Qr.tinyFaceDetector.locateFaces(s,o)}:o instanceof eb?function(s){return Qr.ssdMobilenetv1.locateFaces(s,o)}:o instanceof ER?function(s){return Qr.tinyYolov2.locateFaces(s,o)}:null,!a)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,a(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return xt(n,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return o=a.sent(),[2,r(o.map(function(i){return Sp({},i)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new tCe(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new MR(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new BR(this.runAndExtendWithFaceDetections(),this.input)},e})(t5);(function(t){Tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return xt(this,void 0,void 0,function(){var n,r;return wt(this,function(o){switch(o.label){case 0:return[4,new n5(this.input,this.options)];case 1:return n=o.sent(),r=n[0],n.forEach(function(a){a.score>r.score&&(r=a)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return xt(n,void 0,void 0,function(){var o;return wt(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return o=a.sent(),[2,r(o?Sp({},o):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new nCe(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new OR(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new LR(this.runAndExtendWithFaceDetection(),this.input)},e})(t5);function rCe(t,e){return e===void 0&&(e=new eb),new n5(t,e)}function oCe(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(o,a){return o-r[a]}).reduce(function(o,a){return o+Math.pow(a,2)},0))}(function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,a=function(){return"person "+o++};this._labeledDescriptors=r.map(function(i){if(i instanceof Ww)return i;if(i instanceof Float32Array)return new Ww(a(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new Ww(a(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return oCe(r,e)}).reduce(function(r,o){return r+o},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,a=r.label;return new $M(a,n.computeMeanDistance(e,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new $M("unknown",n.distance)},t})();function r5(t,e){var n=new Pl(e.width,e.height),r=n.width,o=n.height;if(r<=0||o<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:o}));if(Array.isArray(t))return t.map(function(s){return r5(s,{width:r,height:o})});if(_R(t)){var a=t.detection.forSize(r,o),i=t.unshiftedLandmarks.forSize(a.box.width,a.box.height);return Z0(Sp(t,a),i)}return wp(t)?Sp(t,t.detection.forSize(r,o)):t instanceof Yd||t instanceof qo?t.forSize(r,o):t}var aCe=ms({},x2e,q2e);function qM(t,e,n,r,o,a,i){try{var s=t[a](i),u=s.value}catch(l){n(l);return}s.done?e(u):Promise.resolve(u).then(r,o)}function Nl(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(u){qM(a,r,o,i,s,"next",u)}function s(u){qM(a,r,o,i,s,"throw",u)}i(void 0)})}}var Vw,XM;function iCe(){if(XM)return Vw;XM=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,u=typeof Ev=="object"&&Ev&&Ev.Object===Object&&Ev,l=typeof self=="object"&&self&&self.Object===Object&&self,d=u||l||Function("return this")(),f=Object.prototype,p=f.toString,m=Math.max,g=Math.min,y=function(){return d.Date.now()};function b(T,D,k){var I,M,O,F,j,G,W=0,q=!1,P=!1,z=!0;if(typeof T!="function")throw new TypeError(t);D=_(D)||0,S(k)&&(q=!!k.leading,P="maxWait"in k,O=P?m(_(k.maxWait)||0,D):O,z="trailing"in k?!!k.trailing:z);function U(ie){var fe=I,ge=M;return I=M=void 0,W=ie,F=T.apply(ge,fe),F}function H(ie){return W=ie,j=setTimeout(J,D),q?U(ie):F}function L(ie){var fe=ie-G,ge=ie-W,Oe=D-fe;return P?g(Oe,O-ge):Oe}function $(ie){var fe=ie-G,ge=ie-W;return G===void 0||fe>=D||fe<0||P&&ge>=O}function J(){var ie=y();if($(ie))return ne(ie);j=setTimeout(J,L(ie))}function ne(ie){return j=void 0,z&&I?U(ie):(I=M=void 0,F)}function ce(){j!==void 0&&clearTimeout(j),W=0,I=G=M=j=void 0}function be(){return j===void 0?F:ne(y())}function se(){var ie=y(),fe=$(ie);if(I=arguments,M=this,G=ie,fe){if(j===void 0)return H(G);if(P)return j=setTimeout(J,D),U(G)}return j===void 0&&(j=setTimeout(J,D)),F}return se.cancel=ce,se.flush=be,se}function S(T){var D=typeof T;return!!T&&(D=="object"||D=="function")}function C(T){return!!T&&typeof T=="object"}function E(T){return typeof T=="symbol"||C(T)&&p.call(T)==n}function _(T){if(typeof T=="number")return T;if(E(T))return e;if(S(T)){var D=typeof T.valueOf=="function"?T.valueOf():T;T=S(D)?D+"":D}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var k=a.test(T);return k||i.test(T)?s(T.slice(2),k?2:8):o.test(T)?e:+T}return Vw=b,Vw}var sCe=iCe();const uCe=Qd(sCe),hd=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),lCe=t=>t===hd;var Ay=(()=>/(android)/i.test(typeof navigator<"u"?navigator.userAgent:""));const Ny=(...t)=>t.map(e=>e.trim()).join(" ").trim(),cCe=/\s*\((.*?)\)\s*/g,dCe=/(\(\?:[^)]+\))\?/g,fCe=/(\(\?)?:\w+/g,hCe=/\*/g,pCe=/[-{}[\]+?.,\\^$|#]/g,mCe=t=>t instanceof RegExp?new RegExp(t.source,"i"):(t=t.replace(pCe,"\\$&").replace(cCe,"(?:$1)?").replace(fCe,(e,n)=>n?e:"([^\\s]+)").replace(hCe,"(.*?)").replace(dCe,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i")),vCe=(t,e)=>{if(t=t.replace(/\s+/g,"").toLowerCase(),e=e.replace(/\s+/g,"").toLowerCase(),!t.length&&!e.length)return 1;if(!t.length||!e.length)return 0;if(t===e)return 1;if(t.length===1&&e.length===1||t.length<2||e.length<2)return 0;const n=new Map;for(let o=0;o<t.length-1;o++){const a=t.substring(o,o+2),i=n.has(a)?n.get(a)+1:1;n.set(a,i)}let r=0;for(let o=0;o<e.length-1;o++){const a=e.substring(o,o+2),i=n.has(a)?n.get(a):0;i>0&&(n.set(a,i-1),r++)}return 2*r/(t.length+e.length-2)},o5=()=>typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0);class Hw{setSpeechRecognition(e){const n=!!e&&(lCe(e)||o5());n&&(this.disableRecognition(),this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(n)}subscribe(e,n){this.subscribers[e]=n}unsubscribe(e){delete this.subscribers[e]}emitListeningChange(e){this.listening=e,Object.keys(this.subscribers).forEach(n=>{const{onListeningChange:r}=this.subscribers[n];r(e)})}emitMicrophoneAvailabilityChange(e){this.isMicrophoneAvailable=e,Object.keys(this.subscribers).forEach(n=>{const{onMicrophoneAvailabilityChange:r}=this.subscribers[n];r(e)})}emitTranscriptChange(e,n){Object.keys(this.subscribers).forEach(r=>{const{onTranscriptChange:o}=this.subscribers[r];o(e,n)})}emitClearTranscript(){Object.keys(this.subscribers).forEach(e=>{const{onClearTranscript:n}=this.subscribers[e];n()})}emitBrowserSupportsSpeechRecognitionChange(e){Object.keys(this.subscribers).forEach(n=>{const{onBrowserSupportsSpeechRecognitionChange:r,onBrowserSupportsContinuousListeningChange:o}=this.subscribers[n];r(e),o(e)})}disconnect(e){if(this.recognition&&this.listening)switch(e){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}disableRecognition(){this.recognition&&(this.recognition.onresult=()=>{},this.recognition.onend=()=>{},this.recognition.onerror=()=>{},this.listening&&this.stopListening())}onError(e){e&&e.error&&e.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}onRecognitionDisconnect(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}updateTranscript({results:e,resultIndex:n}){const r=n===void 0?e.length-1:n;this.interimTranscript="",this.finalTranscript="";for(let a=r;a<e.length;++a)e[a].isFinal&&(!Ay()||e[a][0].confidence>0)?this.updateFinalTranscript(e[a][0].transcript):this.interimTranscript=Ny(this.interimTranscript,e[a][0].transcript);let o=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(o=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,o||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}updateFinalTranscript(e){this.finalTranscript=Ny(this.finalTranscript,e)}resetTranscript(){this.disconnect("RESET")}startListening(){return Nl(function*({continuous:e=!1,language:n}={}){if(!this.recognition)return;const r=e!==this.recognition.continuous,o=n&&n!==this.recognition.lang;if((r||o)&&(this.listening&&(yield this.stopListening()),this.recognition.continuous=r?e:this.recognition.continuous,this.recognition.lang=o?n:this.recognition.lang),!this.listening){this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript());try{yield this.start(),this.emitListeningChange(!0)}catch(a){a instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1)}}}).apply(this,arguments)}abortListening(){return Nl(function*(){this.disconnect("ABORT"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}stopListening(){return Nl(function*(){this.disconnect("STOP"),this.emitListeningChange(!1),yield new Promise(e=>{this.onStopListening=e})}).call(this)}getRecognition(){return this.recognition}start(){return Nl(function*(){this.recognition&&!this.listening&&(yield this.recognition.start(),this.listening=!0)}).call(this)}stop(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}abort(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}constructor(e){this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=()=>{},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(e),Ay()&&(this.updateFinalTranscript=uCe(this.updateFinalTranscript,250,{leading:!0}))}}const a5="CLEAR_TRANSCRIPT",i5="APPEND_TRANSCRIPT",gCe=()=>({type:a5}),yCe=(t,e)=>({type:i5,payload:{interimTranscript:t,finalTranscript:e}}),bCe=(t,e)=>{switch(e.type){case a5:return{interimTranscript:"",finalTranscript:""};case i5:return{interimTranscript:e.payload.interimTranscript,finalTranscript:Ny(t.finalTranscript,e.payload.finalTranscript)};default:throw new Error}};let pd=!!hd,Rg=pd&&!Ay(),rs;const xCe=({transcribing:t=!0,clearTranscriptOnListen:e=!0,commands:n=[]}={})=>{const[r]=A.useState(fs.getRecognitionManager()),[o,a]=A.useState(pd),[i,s]=A.useState(Rg),[{interimTranscript:u,finalTranscript:l},d]=A.useReducer(bCe,{interimTranscript:r.interimTranscript,finalTranscript:""}),[f,p]=A.useState(r.listening),[m,g]=A.useState(r.isMicrophoneAvailable),y=A.useRef(n);y.current=n;const b=()=>{d(gCe())},S=A.useCallback(()=>{r.resetTranscript(),b()},[r]),C=(I,M,O)=>{const j=(typeof I=="object"?I.toString():I).replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),G=vCe(j,M);return G>=O?{command:I,commandWithoutSpecials:j,howSimilar:G,isFuzzyMatch:!0}:null},E=(I,M)=>{const F=mCe(I).exec(M);return F?{command:I,parameters:F.slice(1)}:null},_=A.useCallback((I,M)=>{y.current.forEach(({command:O,callback:F,matchInterim:j=!1,isFuzzyMatch:G=!1,fuzzyMatchingThreshold:W=.8,bestMatchOnly:q=!1})=>{const P=!M&&j?I.trim():M.trim(),U=(Array.isArray(O)?O:[O]).map(H=>G?C(H,P,W):E(H,P)).filter(H=>H);if(G&&q&&U.length>=2){U.sort((J,ne)=>ne.howSimilar-J.howSimilar);const{command:H,commandWithoutSpecials:L,howSimilar:$}=U[0];F(L,P,$,{command:H,resetTranscript:S})}else U.forEach(H=>{if(H.isFuzzyMatch){const{command:L,commandWithoutSpecials:$,howSimilar:J}=H;F($,P,J,{command:L,resetTranscript:S})}else{const{command:L,parameters:$}=H;F(...$,{command:L,resetTranscript:S})}})})},[S]),T=A.useCallback((I,M)=>{t&&d(yCe(I,M)),_(I,M)},[_,t]),D=A.useCallback(()=>{e&&b()},[e]);return A.useEffect(()=>{const I=fs.counter;fs.counter+=1;const M={onListeningChange:p,onMicrophoneAvailabilityChange:g,onTranscriptChange:T,onClearTranscript:D,onBrowserSupportsSpeechRecognitionChange:a,onBrowserSupportsContinuousListeningChange:s};return r.subscribe(I,M),()=>{r.unsubscribe(I)}},[t,e,r,T,D]),{transcript:Ny(l,u),interimTranscript:u,finalTranscript:l,listening:f,isMicrophoneAvailable:m,resetTranscript:S,browserSupportsSpeechRecognition:o,browserSupportsContinuousListening:i}},fs={counter:0,applyPolyfill:t=>{rs?rs.setSpeechRecognition(t):rs=new Hw(t);const e=!!t&&o5();pd=e,Rg=e},removePolyfill:()=>{rs?rs.setSpeechRecognition(hd):rs=new Hw(hd),pd=!!hd,Rg=pd&&!Ay()},getRecognitionManager:()=>(rs||(rs=new Hw(hd)),rs),getRecognition:()=>fs.getRecognitionManager().getRecognition(),startListening:({continuous:t,language:e}={})=>Nl(function*(){yield fs.getRecognitionManager().startListening({continuous:t,language:e})})(),stopListening:()=>Nl(function*(){yield fs.getRecognitionManager().stopListening()})(),abortListening:()=>Nl(function*(){yield fs.getRecognitionManager().abortListening()})(),browserSupportsSpeechRecognition:()=>pd,browserSupportsContinuousListening:()=>Rg};function wCe(){const{jotformId:t}=wS(),[e]=qW(),n=Ga(),r=e.get("course"),[o,a]=A.useState("setup"),[i,s]=A.useState(0),[u,l]=A.useState(!1),[d,f]=A.useState(null),[p,m]=A.useState(!1),[g,y]=A.useState(null),[b,S]=A.useState(null),[C,E]=A.useState(null),[_,T]=A.useState(!1),[D,k]=A.useState(null),[I,M]=A.useState(null),[O,F]=A.useState(null),[j,G]=A.useState([]),[W,q]=A.useState(null),[P,z]=A.useState([]),[U,H]=A.useState(!1),[L,$]=A.useState(!1),[J,ne]=A.useState(!0),[ce,be]=A.useState(!1),[se,ie]=A.useState(!1),[fe,ge]=A.useState(!1),[Oe,je]=A.useState(!1),{transcript:Le,listening:ke,resetTranscript:qe,browserSupportsSpeechRecognition:nt}=xCe(),it=A.useRef(null),Ie=A.useRef(null),Me=A.useRef(null),Be=A.useRef(null),Je=A.useRef(null),ct=A.useRef("");A.useEffect(()=>{ct.current=Le},[Le]);const st={width:640,height:480,facingMode:"user"},$e={width:220,height:165,facingMode:"user",frameRate:30};A.useEffect(()=>((async()=>{try{const Pt="/models";await Promise.all([Qr.tinyFaceDetector.loadFromUri(Pt),Qr.faceLandmark68Net.loadFromUri(Pt),Qr.faceRecognitionNet.loadFromUri(Pt)]),be(!0),console.log("Face recognition models loaded")}catch(Pt){console.error("Error loading face models:",Pt)}})(),()=>{Je.current&&Je.current.getTracks().forEach(Pt=>Pt.stop()),document.removeEventListener("fullscreenchange",kr)}),[]),A.useEffect(()=>{if(ce&&o==="exam"){const Pt=setInterval(async()=>{if(Ie.current&&Ie.current.video&&Ie.current.video.readyState===4){const Dt=Ie.current.video,Ft=Me.current;if(Ft){const an=await rCe(Dt,new $z({inputSize:224,scoreThreshold:.5}));Ft.getContext("2d").clearRect(0,0,Ft.width,Ft.height);const Jt=await Wt(Dt);je(Jt<50),an.length===0?(ie(!1),ge(!1)):an.length>1?(ie(!0),ge(!0)):(ie(!0),ge(!1));const Li=r5(an,{width:Dt.videoWidth,height:Dt.videoHeight});Ft.width=Dt.videoWidth,Ft.height=Dt.videoHeight,aCe.drawDetections(Ft,Li)}}},2e3);return()=>clearInterval(Pt)}},[ce,o,Oe]);const Wt=async mt=>{const Pt=document.createElement("canvas"),Dt=Pt.getContext("2d");Pt.width=mt.videoWidth,Pt.height=mt.videoHeight,Dt.drawImage(mt,0,0);const an=Dt.getImageData(0,0,Pt.width,Pt.height).data;let sn=0;for(let Jt=0;Jt<an.length;Jt+=4)sn+=(an[Jt]+an[Jt+1]+an[Jt+2])/3;return sn/(an.length/4)},Fe=mt=>{l(!0),Je.current=mt,f(null)},Ve=mt=>{f(mt.message),l(!1)},rt=()=>{if(it.current){const mt=it.current.getScreenshot();mt&&(y(mt),m(!0))}},Lt=()=>{y(null),m(!1)},Ot=async()=>{try{T(!0),k(null);const Pt=(await ut.get("http://localhost:8081/api/jotforms",{withCredentials:!0})).data.find(Dt=>Dt.jotformName===t);if(Pt){S(Pt);let Dt=null;for(const Ft of Pt.pages){for(const an of Ft.elements)if(an.tagName==="randominteger"){Dt=parseInt(an.content);break}if(Dt)break}if(Dt){M(Dt);const Ft=Math.floor(Math.random()*Dt)+1;F(Ft);const an=Pt.pages.map(sn=>{const Jt=sn.elements.filter(Ja=>Ja.tagName==="paragraph").sort((Ja,Rf)=>Ja.sequence-Rf.sequence),Li=sn.elements.find(Ja=>Ja.tagName==="videorecording"),sc=Jt[Ft-1];return{pageNumber:sn.page,selectedParagraph:sc||null,hasVideoRecording:!!Li,totalParagraphs:Jt.length}});G(an),s(0),E({title:Pt.title||`Assignment - ${r}`,pages:an,randomNumber:Ft,...Pt})}else throw new Error("No randominteger element found in the form")}else throw new Error(`No jotform found with name: ${t}`);T(!1)}catch(mt){k(mt.message),T(!1)}},Vn=()=>{i<j.length-1&&s(i+1)},Qt=()=>ne(!J),gn=()=>{document.documentElement.requestFullscreen&&(document.documentElement.requestFullscreen(),H(!0),$(!0),document.addEventListener("fullscreenchange",kr))},kr=()=>{document.fullscreenElement||(H(!1),bn.show({title:"Warning: Fullscreen Exited",message:"Exiting fullscreen mode may be flagged.",color:"orange"}))},Hr=async()=>{if(Je.current&&!W)try{qe(),fs.startListening({continuous:!0,language:"en-US"});const mt=new MediaRecorder(Je.current,{mimeType:"video/webm; codecs=vp9,opus",audioBitsPerSecond:128e3,videoBitsPerSecond:25e5}),Pt=[];mt.ondataavailable=Dt=>{Dt.data&&Dt.data.size>0&&Pt.push(Dt.data)},mt.onstop=()=>{fs.stopListening();const Dt=new Blob(Pt,{type:"video/webm"}),Ft=URL.createObjectURL(Dt),an=j[i],sn={id:Date.now(),blob:Dt,url:Ft,pageNumber:i+1,questionText:an.selectedParagraph?.content||"No question text",transcript:ct.current,timestamp:new Date().toISOString(),randomQuestionNumber:O};z(Jt=>[...Jt,sn]),q(null),bn.show({title:"Recording Saved",message:`Answer for page ${i+1} recorded.`,color:"green"})},Be.current=mt,mt.start(),q({startTime:Date.now(),pageNumber:i+1}),bn.show({title:"Recording Started",message:"Speak your answer now...",color:"blue"})}catch{bn.show({title:"Recording Failed",message:"Could not start recording.",color:"red"})}},tr=()=>{Be.current&&W&&Be.current.stop()},Aa=mt=>{const Pt=mt.split(","),Dt=Pt[0].match(/:(.*?);/)[1],Ft=atob(Pt[1]);let an=Ft.length;const sn=new Uint8Array(an);for(;an--;)sn[an]=Ft.charCodeAt(an);return new Blob([sn],{type:Dt})},_n=async()=>{try{const Dt={jotformId:t,username:"rahul",userId:"user101",warnings:[`MultipleFaces Detected: ${fe}`,`Lighting Issue: ${Oe}`],answers:P.map(sn=>({questionText:sn.questionText,transcript:sn.transcript}))},Ft=new FormData;if(Ft.append("submission",JSON.stringify(Dt)),g){const sn=Aa(g);Ft.append("photo",sn,"identity-photo.jpg")}P.forEach((sn,Jt)=>{Ft.append("videos",sn.blob,`answer-video-${Jt+1}.webm`)}),await ut.post("http://localhost:8081/api/assignment/submit-answer",Ft,{withCredentials:!0}),a("completed")}catch(mt){console.error("❌ SUBMISSION ERROR:",mt.response?mt.response.data:mt.message),bn.show({title:"Submission Failed",message:mt.response?`Server Error: ${mt.response.statusText}`:"An unexpected error occurred.",color:"red"})}},Qa=()=>{window.confirm("Exit assignment? Progress will be lost.")&&n(-1)};if(o==="setup")return w.jsxs(cn,{size:"md",py:"xl",children:[w.jsxs(jt,{order:2,ta:"center",mb:"xl",children:["Assignment Setup - ",r]}),w.jsxs(Yr,{shadow:"sm",padding:"lg",radius:"md",mb:"xl",children:[w.jsx(jt,{order:4,mb:"md",children:"Camera & Proctoring Setup"}),w.jsx(we,{size:"sm",color:"dimmed",mb:"md",children:"Please allow camera and microphone access."}),w.jsxs(Po,{children:[w.jsx(Ge,{justify:"space-between",children:w.jsxs(Ge,{children:[w.jsx(cK,{size:20}),w.jsx(we,{children:"Camera & Microphone"}),u&&w.jsx(ua,{color:"green",children:"Ready"}),d&&w.jsx(ua,{color:"red",children:"Error"})]})}),d&&w.jsxs(ss,{color:"red",size:"sm",children:[w.jsx("strong",{children:"Error:"})," ",d]}),w.jsx(No,{children:w.jsx(Wv,{audio:!0,ref:it,screenshotFormat:"image/jpeg",width:300,height:200,videoConstraints:st,onUserMedia:Fe,onUserMediaError:Ve,style:{borderRadius:8,backgroundColor:"#000",border:u?"2px solid #51cf66":"2px solid #868e96"}})})]})]}),w.jsxs(Ge,{justify:"space-between",children:[w.jsx(He,{variant:"outline",onClick:Qa,leftSection:w.jsx(gg,{size:16}),children:"Back"}),u&&w.jsx(He,{onClick:()=>a("photo"),size:"lg",children:"Continue"})]})]});if(o==="photo")return w.jsxs(cn,{size:"md",py:"xl",children:[w.jsx(jt,{order:2,ta:"center",mb:"xl",children:"Identity Photo Capture"}),w.jsxs(Yr,{shadow:"sm",padding:"lg",radius:"md",mb:"xl",children:[w.jsx(jt,{order:4,mb:"md",children:"Take Your Photo"}),w.jsx(No,{mb:"lg",children:p?w.jsxs(le,{ta:"center",children:[w.jsx(tp,{src:g,alt:"Identity",style:{width:400,height:300,borderRadius:8,marginBottom:16}}),w.jsxs(Ge,{justify:"center",children:[w.jsx(He,{variant:"outline",onClick:Lt,children:"Retake"}),w.jsx(He,{onClick:()=>a("verification"),color:"green",children:"Use Photo"})]})]}):w.jsxs(le,{ta:"center",children:[w.jsx(Wv,{audio:!1,ref:it,screenshotFormat:"image/jpeg",width:400,height:300,videoConstraints:st,style:{borderRadius:8,marginBottom:16,backgroundColor:"#000"}}),w.jsx(He,{leftSection:w.jsx(Lg,{size:16}),onClick:rt,size:"lg",disabled:!u,children:"Take Photo"})]})})]}),w.jsx(Ge,{justify:"space-between",children:w.jsx(He,{variant:"outline",onClick:()=>a("setup"),leftSection:w.jsx(gg,{size:16}),children:"Back"})})]});if(o==="verification")return w.jsxs(cn,{size:"md",py:"xl",children:[w.jsx(jt,{order:2,ta:"center",mb:"xl",children:"Identity Verification"}),w.jsxs(Po,{children:[w.jsxs(Yr,{shadow:"sm",padding:"lg",radius:"md",children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsxs(Ge,{children:[w.jsx(Lg,{size:20}),w.jsx(we,{children:"Identity Photo"}),p&&w.jsx(ua,{color:"green",children:"Captured"})]}),w.jsx(He,{size:"sm",variant:"outline",onClick:()=>a("photo"),children:"Change"})]}),g&&w.jsx(No,{children:w.jsx(tp,{src:g,alt:"Identity",style:{width:200,height:150,borderRadius:8}})})]}),p&&w.jsxs(Yr,{shadow:"sm",padding:"lg",radius:"md",children:[w.jsx(ss,{color:"orange",mb:"md",children:"The exam will start in fullscreen with live monitoring. You cannot go back."}),w.jsx(No,{children:w.jsx(He,{onClick:()=>{Ot(),a("exam"),setTimeout(gn,1e3)},size:"lg",color:"green",children:"Start Assignment"})})]})]}),w.jsx(Ge,{justify:"space-between",mt:"md",children:w.jsx(He,{variant:"outline",onClick:()=>a("photo"),leftSection:w.jsx(gg,{size:16}),children:"Back"})})]});if(o==="exam"){if(!nt)return w.jsx(cn,{size:"md",py:"xl",children:w.jsx(ss,{color:"red",children:"Speech recognition not supported. Please use Chrome."})});if(_)return w.jsx(cn,{size:"xl",py:"xl",children:w.jsx(No,{children:w.jsxs(Po,{align:"center",children:[w.jsx(Ko,{}),w.jsx(we,{children:"Loading..."})]})})});if(D)return w.jsx(cn,{size:"md",py:"xl",children:w.jsxs(ss,{color:"red",children:["Error: ",D,w.jsx(He,{mt:"md",onClick:Ot,children:"Retry"})]})});if(!j.length)return w.jsx(cn,{size:"md",py:"xl",children:w.jsx(No,{children:w.jsx(we,{children:"No pages to display."})})});const mt=j[i],Pt=i===j.length-1,Dt=(i+1)/j.length*100;return w.jsxs(le,{children:[w.jsx("style",{children:"@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }"}),w.jsxs(le,{style:{position:"fixed",top:0,left:0,right:0,background:"#1a1a1a",color:"white",padding:"8px 16px",zIndex:1001,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[w.jsxs(Ge,{children:[w.jsx(ua,{color:"red",variant:"dot",children:"MONITORING"}),w.jsx(ua,{color:ke?"orange":"blue",variant:"dot",children:ke?"LISTENING":"READY"})]}),w.jsxs(Ge,{children:[w.jsx(ua,{color:se?"green":"red",children:se?"Face OK":"No Face"}),w.jsxs(He,{size:"xs",variant:"subtle",onClick:Qt,children:[w.jsx(qC,{size:14})," ",J?"Hide":"Show"]}),!U&&w.jsx(He,{size:"xs",onClick:gn,children:"Go Fullscreen"})]})]}),J&&w.jsxs(le,{style:{position:"fixed",top:60,right:20,width:220,height:165,zIndex:1e3,border:`3px solid ${se?"#51cf66":"#ff6b6b"}`,borderRadius:12,overflow:"hidden",background:"#000"},children:[w.jsx(Wv,{audio:!1,ref:Ie,mirrored:!0,muted:!0,videoConstraints:$e,style:{width:"100%",height:"100%",objectFit:"cover"}}),w.jsx("canvas",{ref:Me,style:{position:"absolute",inset:0,width:"100%",height:"100%"}}),w.jsxs(le,{style:{position:"absolute",top:8,left:8,background:"#ff4757",color:"white",padding:"4px 8px",borderRadius:4,fontSize:"11px",display:"flex",alignItems:"center",gap:4},children:[w.jsx("div",{style:{width:8,height:8,background:"white",borderRadius:"50%",animation:"pulse 2s infinite"}}),"LIVE"]}),W&&w.jsxs(le,{style:{position:"absolute",top:8,right:8,background:"#ff4757",color:"white",padding:"4px 8px",borderRadius:4,fontSize:"11px"},children:["REC ",Math.floor((Date.now()-W.startTime)/1e3),"s"]})]}),w.jsx(le,{style:{position:"fixed",top:-1e3,left:-1e3},children:w.jsx(Wv,{audio:!0,muted:!0,ref:it,onUserMedia:Fe,videoConstraints:st})}),w.jsxs(cn,{size:"xl",py:"md",pt:60,style:{paddingRight:J?260:20},children:[w.jsxs(jt,{order:3,mb:"md",ta:"center",children:["Assignment: ",C.title]}),w.jsxs(Yr,{shadow:"sm",p:"sm",radius:"md",mb:"lg",children:[w.jsxs(Ge,{justify:"space-between",mb:"xs",children:[w.jsx(we,{size:"sm",weight:500,children:"Progress"}),w.jsxs(we,{size:"sm",color:"dimmed",children:["Page ",i+1,"/",j.length]})]}),w.jsx(cf,{value:Dt,color:"blue"})]}),w.jsxs(Yr,{shadow:"lg",p:"xl",radius:"md",mb:"lg",children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsxs(jt,{order:4,children:["Page ",mt.pageNumber]}),w.jsxs(ua,{color:"blue",size:"lg",children:["Q",O,"/",mt.totalParagraphs]})]}),mt.selectedParagraph?w.jsx(we,{size:"lg",mb:"md",style:{lineHeight:1.8},children:mt.selectedParagraph.content}):w.jsx(ss,{color:"orange",children:"No question available."}),mt.hasVideoRecording&&w.jsxs(le,{children:[w.jsx(zo,{my:"lg"}),w.jsx(we,{weight:600,size:"md",mb:"md",children:"Record your answer:"}),w.jsxs(le,{p:"xl",style:{border:"2px dashed #dee2e6",borderRadius:12,textAlign:"center",background:"#f8f9fa"},children:[w.jsx(X4,{size:56,color:"#868e96",style:{marginBottom:16}}),P.some(Ft=>Ft.pageNumber===i+1)&&w.jsxs(ua,{color:"green",size:"lg",children:[w.jsx(f2,{size:14})," Answer Recorded"]})]}),ke&&w.jsxs(le,{mt:"lg",p:"md",style:{border:"1px solid #ced4da",borderRadius:8,background:"#f1f3f5"},children:[w.jsxs(Ge,{mb:"xs",children:[w.jsx(XC,{size:16}),w.jsx(we,{size:"sm",weight:500,children:"Live Transcript..."})]}),w.jsx(we,{color:"dimmed",children:Le||"Start speaking..."})]}),w.jsx(No,{mt:"xl",children:W?w.jsxs(He,{onClick:tr,color:"green",size:"xl",children:["Stop Recording (",Math.floor((Date.now()-W.startTime)/1e3),"s)"]}):w.jsx(He,{onClick:Hr,color:"red",size:"xl",children:"Record Answer"})})]})]}),w.jsx(Yr,{shadow:"sm",p:"lg",radius:"md",style:{background:"#f8f9fa"},children:w.jsxs(Ge,{justify:"space-between",children:[w.jsxs(we,{size:"sm",color:"dimmed",children:["Page ",i+1," of ",j.length]}),Pt?w.jsx(He,{onClick:_n,size:"lg",color:"green",children:"Submit Assignment"}):w.jsx(He,{onClick:Vn,size:"lg",color:"blue",children:"Next Page"})]})})]})]})}return o==="completed"?w.jsx(cn,{size:"md",py:"xl",children:w.jsx(No,{children:w.jsxs(Po,{align:"center",children:[w.jsx(f2,{size:64,color:"green"}),w.jsx(jt,{order:2,children:"Assignment Completed"}),w.jsx(we,{color:"dimmed",children:"Your assignment has been submitted successfully."}),w.jsx(He,{onClick:()=>n("/dashboard"),mt:"lg",size:"lg",children:"Return to Dashboard"})]})})}):null}function bS(){const[t,e]=A.useState(!1),[n,r]=A.useState(""),[o,a]=A.useState([]),[i,s]=A.useState(!1),[u,l]=A.useState(""),d=A.useRef(null),f=()=>{d.current?.scrollTo({top:d.current.scrollHeight,behavior:"smooth"})};A.useEffect(()=>{f()},[o]);const p=async()=>{if(!n.trim())return;const g={sender:"user",text:n};a(y=>[...y,g]),r(""),s(!0),l("");try{const b={sender:"bot",text:(await ut.post("http://localhost:8081/api/gemini/ask",n,{headers:{"Content-Type":"text/plain"},withCredentials:!0})).data};a(S=>[...S,b])}catch(y){const b=y.response?.data||y.message||"An unexpected error occurred.";l(b);const S={sender:"bot",text:"Sorry, I ran into an error. Please try again."};a(C=>[...C,S])}finally{s(!1)}},m=(g,y)=>w.jsx(Ra,{p:"sm",radius:"lg",withBorder:!0,mb:"sm",style:{backgroundColor:g.sender==="user"?"#e7f5ff":"#f8f9fa",alignSelf:g.sender==="user"?"flex-end":"flex-start",maxWidth:"80%"},children:w.jsx(we,{size:"sm",style:{whiteSpace:"pre-wrap"},children:g.text})},y);return w.jsxs(w.Fragment,{children:[w.jsx(Nn,{variant:"filled",color:"blue",size:"xl",radius:"xl",style:{position:"fixed",bottom:20,right:20,zIndex:1e3},onClick:()=>e(!0),children:w.jsx(qK,{size:24})}),w.jsx(Nr,{opened:t,onClose:()=>e(!1),title:w.jsx(jt,{order:4,children:"Chat with AI Assistant"}),size:"lg",children:w.jsxs(le,{style:{display:"flex",flexDirection:"column",height:"60vh"},children:[w.jsx(Xo,{viewportRef:d,style:{flex:1,marginBottom:"1rem"},children:w.jsxs(le,{style:{display:"flex",flexDirection:"column",padding:"0 1rem"},children:[o.map(m),i&&w.jsx(Ko,{size:"sm",style:{alignSelf:"flex-start"}})]})}),w.jsxs(le,{children:[u&&w.jsx(we,{c:"red",size:"xs",mb:"xs",children:u}),w.jsx(np,{placeholder:"Ask me anything...",value:n,onChange:g=>r(g.currentTarget.value),onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),p())},autosize:!0,minRows:2,rightSection:w.jsx(Nn,{onClick:p,loading:i,size:32,radius:"xl",variant:"filled",children:w.jsx(aY,{size:18})})})]})]})})]})}function SCe(){const[t,e]=A.useState(null),[n,r]=A.useState(""),[o,a]=A.useState(""),[i,s]=A.useState(!1),[u,l]=A.useState(""),d=async()=>{if(!t){a("Please select a file first.");return}s(!0),a(`Uploading ${t.name}...`);const p=new FormData;p.append("file",t);try{const g=(await ut.post("http://localhost:8081/upload",p,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data;a(`Upload successful! File key: ${g}`),r(g)}catch(m){const g=m.response?.data||m.message||"Upload failed.";a(`Error: ${g}`)}finally{s(!1)}},f=async()=>{if(!n){a("Please upload a file or enter a key first.");return}a(`Generating URL for key: ${n}...`);try{const m=(await ut.get(`http://localhost:8081/generate-presigned-url/${n}`,{withCredentials:!0})).data;l(m),a("URL generated successfully!")}catch(p){const m=p.response?.data||p.message||"Failed to generate URL.";a(`Error: ${m}`)}};return w.jsxs(Ra,{shadow:"md",p:"xl",withBorder:!0,children:[w.jsxs(le,{maw:600,mx:"auto",children:[w.jsx(jt,{order:2,ta:"center",mb:"lg",children:"S3 File URL Generator"}),w.jsxs(le,{mb:"xl",children:[w.jsx(jt,{order:4,mb:"sm",children:"1. Upload a File"}),w.jsxs(Ge,{children:[w.jsx(Pg,{placeholder:"Select a file (video, PDF, etc.)",value:t,onChange:e,style:{flex:1},clearable:!0}),w.jsx(He,{onClick:d,leftSection:w.jsx(KC,{size:14}),loading:i,disabled:!t,children:"Upload"})]})]}),w.jsxs(le,{children:[w.jsx(jt,{order:4,mb:"sm",children:"2. Generate URL"}),w.jsxs(Ge,{children:[w.jsx(xs,{placeholder:"File key will appear here after upload",value:n,onChange:p=>r(p.currentTarget.value),style:{flex:1}}),w.jsx(He,{onClick:f,leftSection:w.jsx($4,{size:14}),disabled:!n,children:"Get URL"})]})]}),w.jsxs(le,{mt:"lg",children:[o&&w.jsx(we,{c:"dimmed",ta:"center",children:o}),u&&w.jsxs(le,{mt:"sm",children:[w.jsx(we,{fw:500,children:"Shareable URL (valid for 10 minutes):"}),w.jsx(we,{c:"blue",component:"a",href:u,target:"_blank",rel:"noopener noreferrer",style:{wordBreak:"break-all"},children:u})]})]})]}),w.jsx(bS,{})]})}const Lh="http://localhost:8081/api",CCe=()=>{const[t,e]=A.useState({}),[n,r]=A.useState([]),[o,a]=A.useState(!1),[i,s]=A.useState(!1),[u,l]=A.useState(null),[d,f]=A.useState(""),[p,m]=A.useState("bl"),[g,y]=A.useState([]),b=async()=>{try{const D=await ut.get(`${Lh}/subjects`,{withCredentials:!0});e(D.data)}catch(D){console.error("Error fetching subjects:",D)}},S=async()=>{try{const D=await ut.get(`${Lh}/courses`,{withCredentials:!0});r(D.data.map(k=>({value:k.id.toString(),label:k.courseName})))}catch(D){console.error("Error fetching courses:",D)}};A.useEffect(()=>{b(),S()},[]);const C=async D=>{D.preventDefault();const k={subjectName:d,groupName:p,courseIds:g.map(I=>parseInt(I))};try{i?await ut.put(`${Lh}/subjects/${u}`,k,{withCredentials:!0}):await ut.post(`${Lh}/subjects`,k,{withCredentials:!0}),b(),a(!1),f(""),m("bl"),y([]),s(!1),l(null)}catch(I){console.error(`Error ${i?"updating":"creating"} subject:`,I)}},E=D=>{s(!0),l(D.id),f(D.subjectName),m(D.groupName),y(D.courses.map(k=>k.id.toString())),a(!0)},_=async D=>{if(window.confirm("Are you sure you want to delete this subject?"))try{await ut.delete(`${Lh}/subjects/${D}`,{withCredentials:!0}),b()}catch(k){console.error("Error deleting subject:",k)}},T={bl:"Group BL",bh:"Group BH",bm:"Group BM"};return w.jsxs(cn,{size:"lg",children:[w.jsxs(Ge,{position:"apart",mb:"xl",children:[w.jsx(jt,{order:2,children:"Subject Management"}),w.jsx(He,{onClick:()=>{s(!1),f(""),m("bl"),y([]),a(!0)},children:"Map Subject"})]}),Object.keys(T).map(D=>t[D]&&t[D].length>0&&w.jsxs(le,{mb:"xl",children:[w.jsx(jt,{order:3,mb:"md",children:T[D]}),w.jsx(zu,{cols:3,spacing:"lg",children:t[D].map(k=>w.jsxs(Ra,{shadow:"sm",p:"md",withBorder:!0,children:[w.jsxs(Ge,{position:"apart",children:[w.jsx(we,{weight:500,children:k.subjectName}),w.jsxs(Ge,{children:[w.jsx(Nn,{color:"blue",onClick:()=>E(k),children:w.jsx(NK,{size:16})}),w.jsx(Nn,{color:"red",onClick:()=>_(k.id),children:w.jsx(Op,{size:16})})]})]}),w.jsx(we,{size:"sm",color:"dimmed",mt:4,children:"Courses:"}),w.jsx(Ge,{mt:5,children:k.courses.map(I=>w.jsx(ua,{variant:"light",children:I.courseName},I.id))})]},k.id))})]},D)),w.jsx(Nr,{opened:o,onClose:()=>{a(!1),s(!1),f(""),m("bl"),y([]),l(null)},title:i?"Edit Subject":"Create a New Subject",children:w.jsxs("form",{onSubmit:C,children:[w.jsx(xs,{label:"Subject Name",placeholder:"Enter subject name",required:!0,value:d,onChange:D=>f(D.currentTarget.value),mb:"md"}),w.jsx(Eu,{label:"Group",required:!0,data:[{value:"bl",label:"BL Group"},{value:"bh",label:"BH Group"},{value:"bm",label:"BM Group"}],value:p,onChange:m,mb:"md"}),w.jsx(PC,{label:"Select Courses",placeholder:"Pick all courses you like",data:n,value:g,onChange:y,searchable:!0,nothingFound:"Nothing found",mb:"xl"}),w.jsx(He,{type:"submit",fullWidth:!0,children:i?"Update Subject":"Create Subject"})]})})]})};function ECe(){const[t,e]=A.useState([]),[n,r]=A.useState([]),[o,a]=A.useState(!0),[i,s]=A.useState(null),[u,l]=A.useState(null),[d,f]=A.useState(null),p="bl";A.useEffect(()=>{(async()=>{a(!0),s(null);try{const E=(await ut.get("http://localhost:8081/api/subjects",{withCredentials:!0})).data[p]||[];e(E)}catch(C){s("Failed to fetch subjects. Please try again later."),console.error(C)}finally{a(!1)}})()},[p]);const m=S=>{l(S),r(S.courses||[])},g=()=>{l(null),r([]),f(null)},y=S=>{f(S)},b=()=>{f(null)};return d?w.jsx(LF,{course:d,onBack:b}):u?w.jsxs(cn,{size:"xl",py:"xl",children:[w.jsxs(Ge,{justify:"space-between",mb:"md",children:[w.jsxs(jt,{order:2,children:[u.subjectName," Courses"]}),w.jsx(Nn,{onClick:g,variant:"outline",color:"blue",children:w.jsx(qD,{style:{transform:"rotate(180deg)"}})})]}),n.length>0?w.jsx(zu,{cols:{base:1,sm:2,md:3,lg:4},spacing:"lg",children:n.map(S=>w.jsx(jF,{course:S,onSelectCourse:y},S.id))}):w.jsxs(we,{ta:"center",c:"dimmed",children:["No courses available for ",u.subjectName,"."]})]}):w.jsxs(cn,{size:"xl",py:"xl",children:[w.jsxs(jt,{order:2,ta:"center",mb:"md",children:["Subject Catalog (",p.toUpperCase()," Group)"]}),o?w.jsxs(Ge,{justify:"center",children:[w.jsx(Ko,{}),w.jsx(we,{children:"Loading subjects..."})]}):i?w.jsx(we,{ta:"center",c:"red",children:i}):t.length>0?w.jsxs(Re,{highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,children:[w.jsx(Re.Thead,{children:w.jsxs(Re.Tr,{children:[w.jsx(Re.Th,{children:"Subject Name"}),w.jsx(Re.Th,{children:"Courses"}),w.jsx(Re.Th,{children:"Action"})]})}),w.jsx(Re.Tbody,{children:t.map(S=>w.jsxs(Re.Tr,{children:[w.jsx(Re.Td,{children:S.subjectName}),w.jsx(Re.Td,{children:S.courses.length}),w.jsx(Re.Td,{children:w.jsx(Nn,{onClick:()=>m(S),variant:"filled",color:"blue",children:w.jsx(qD,{})})})]},S.id))})]}):w.jsxs(we,{ta:"center",c:"dimmed",children:["No subjects available for the ",p.toUpperCase()," group."]})]})}function RCe(){const[t,e]=A.useState(0);return w.jsxs("div",{children:[w.jsx(tJ,{}),w.jsxs(yW,{children:[w.jsx(kn,{path:"/",element:w.jsx($J,{})}),w.jsx(kn,{path:"/login",element:w.jsx(kJ,{})}),w.jsx(kn,{path:"/mapuser",element:w.jsx(SP,{})}),w.jsx(kn,{path:"/lmsdashboard",element:w.jsx(qJ,{})}),w.jsx(kn,{path:"/createjotform",element:w.jsx(EP,{})}),w.jsx(kn,{path:"/jotformbuilder",element:w.jsx(hoe,{})}),w.jsx(kn,{path:"/jotformmapping",element:w.jsx(PF,{})}),w.jsx(kn,{path:"/coursemanagment",element:w.jsx(poe,{})}),w.jsx(kn,{path:"/analyticdashboard",element:w.jsx(voe,{})}),w.jsx(kn,{path:"/course",element:w.jsx(Doe,{})}),w.jsx(kn,{path:"/jotformviewer",element:w.jsx(FF,{})}),w.jsx(kn,{path:"/jotformmanagment",element:w.jsx(koe,{})}),w.jsx(kn,{path:"/usermanagment",element:w.jsx(Ioe,{})}),w.jsx(kn,{path:"/resultmanagement",element:w.jsx(Moe,{})}),w.jsx(kn,{path:"/user-results/:courseId",element:w.jsx(Ooe,{})}),w.jsx(kn,{path:"/assignment-review/:courseId/:userId",element:w.jsx(Poe,{})}),w.jsx(kn,{path:"/course/:courseId/assignment",element:w.jsx(BF,{})}),w.jsx(kn,{path:"/assignment/:jotformId",element:w.jsx(wCe,{})}),w.jsx(kn,{path:"/fileupload",element:w.jsx(SCe,{})}),w.jsx(kn,{path:"/chatmodal",element:w.jsx(bS,{})}),w.jsx(kn,{path:"/subjectmanagement",element:w.jsx(CCe,{})}),w.jsx(kn,{path:"/subject",element:w.jsx(ECe,{})})]}),w.jsx(hJ,{}),w.jsx(bS,{})]})}A6.createRoot(document.getElementById("root")).render(w.jsx(bt.StrictMode,{children:w.jsxs(WW,{children:[" ",w.jsx(MO,{children:w.jsxs(EX,{children:[w.jsx(_s,{}),w.jsx(KQ,{children:w.jsx(RCe,{})})]})})]})}))});export default _Ce();
